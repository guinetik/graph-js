const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/angular-html-CU67Zn6k.js","assets/html-GMplVEZG.js","assets/javascript-wDzz0qaB.js","assets/css-DPfMkruS.js","assets/angular-ts-BwZT4LLn.js","assets/scss-OYdSNvt2.js","assets/apl-dKokRX4l.js","assets/xml-sdJ4AIDG.js","assets/java-CylS5w8V.js","assets/json-Cp-IABpG.js","assets/astro-CbQHKStN.js","assets/typescript-BPQ3VLAy.js","assets/postcss-CXtECtnM.js","assets/tsx-COt5Ahok.js","assets/blade-DVc8C-J4.js","assets/html-derivative-BFtXZ54Q.js","assets/sql-BLtJtn59.js","assets/bsl-BO_Y6i37.js","assets/sdbl-DVxCFoDh.js","assets/cairo-KRGpt6FW.js","assets/python-B6aJPvgy.js","assets/cobol-nwyudZeR.js","assets/coffee-Ch7k5sss.js","assets/cpp-CofmeUqb.js","assets/regexp-CDVJQ6XC.js","assets/glsl-DplSGwfg.js","assets/c-BIGW1oBm.js","assets/crystal-tKQVLTB8.js","assets/shellscript-Yzrsuije.js","assets/edge-BkV0erSs.js","assets/elixir-CDX3lj18.js","assets/elm-DbKCFpqz.js","assets/erb-BOJIQeun.js","assets/ruby-BvKwtOVI.js","assets/haml-B8DHNrY2.js","assets/graphql-ChdNCCLP.js","assets/jsx-g9-lgVsj.js","assets/lua-BbnMAYS6.js","assets/yaml-Buea-lGh.js","assets/erlang-DsQrWhSR.js","assets/markdown-Cvjx9yec.js","assets/fortran-fixed-form-BZjJHVRy.js","assets/fortran-free-form-D22FLkUw.js","assets/fsharp-CXgrBDvD.js","assets/gdresource-B7Tvp0Sc.js","assets/gdshader-DkwncUOv.js","assets/gdscript-DTMYz4Jt.js","assets/git-commit-F4YmCXRG.js","assets/diff-D97Zzqfu.js","assets/git-rebase-r7XF79zn.js","assets/glimmer-js-Rg0-pVw9.js","assets/glimmer-ts-U6CK756n.js","assets/hack-CaT9iCJl.js","assets/handlebars-BL8al0AC.js","assets/http-jrhK8wxY.js","assets/hurl-irOxFIW8.js","assets/csv-fuZLfV_i.js","assets/hxml-Bvhsp5Yf.js","assets/haxe-CzTSHFRz.js","assets/jinja-4LBKfQ-Z.js","assets/jison-wvAkD_A8.js","assets/julia-C8NyazO9.js","assets/r-DiinP2Uv.js","assets/latex-BdAV_C_H.js","assets/tex-CxkMU7Pf.js","assets/liquid-DYVedYrR.js","assets/marko-CPi9NSCl.js","assets/less-B1dDrJ26.js","assets/mdc-DUICxH0z.js","assets/nginx-DknmC5AR.js","assets/nim-CVrawwO9.js","assets/perl-C0TMdlhV.js","assets/php-CDn_0X-4.js","assets/pug-CGlum2m_.js","assets/qml-3beO22l8.js","assets/razor-CE9lU5zL.js","assets/csharp-K5feNrxe.js","assets/rst-B0xPkSld.js","assets/cmake-D1j8_8rp.js","assets/sas-cz2c8ADy.js","assets/shaderlab-Dg9Lc6iA.js","assets/hlsl-D3lLCCz7.js","assets/shellsession-BADoaaVG.js","assets/soy-Brmx7dQM.js","assets/sparql-rVzFXLq3.js","assets/turtle-BsS91CYL.js","assets/stata-BH5u7GGu.js","assets/svelte-3Dk4HxPD.js","assets/templ-W15q3VgB.js","assets/go-Dn2_MT6a.js","assets/ts-tags-zn1MmPIZ.js","assets/twig-CO9l9SDP.js","assets/vue-DnHKYNfI.js","assets/vue-html-CChd_i61.js","assets/vue-vine-8moa0y9V.js","assets/stylus-BEDo0Tqx.js","assets/xsl-CtQFsRM5.js"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();function Qc(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const je={},ir=[],xn=()=>{},rg=()=>!1,oa=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),ed=t=>t.startsWith("onUpdate:"),ut=Object.assign,td=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},Lv=Object.prototype.hasOwnProperty,ze=(t,e)=>Lv.call(t,e),Ne=Array.isArray,rr=t=>To(t)==="[object Map]",sa=t=>To(t)==="[object Set]",Qd=t=>To(t)==="[object Date]",Le=t=>typeof t=="function",Ze=t=>typeof t=="string",cn=t=>typeof t=="symbol",Be=t=>t!==null&&typeof t=="object",og=t=>(Be(t)||Le(t))&&Le(t.then)&&Le(t.catch),sg=Object.prototype.toString,To=t=>sg.call(t),Iv=t=>To(t).slice(8,-1),ag=t=>To(t)==="[object Object]",nd=t=>Ze(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Yr=Qc(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),aa=t=>{const e=Object.create(null);return(n=>e[n]||(e[n]=t(n)))},Pv=/-\w/g,Zt=aa(t=>t.replace(Pv,e=>e.slice(1).toUpperCase())),Dv=/\B([A-Z])/g,pi=aa(t=>t.replace(Dv,"-$1").toLowerCase()),la=aa(t=>t.charAt(0).toUpperCase()+t.slice(1)),Ua=aa(t=>t?`on${la(t)}`:""),ui=(t,e)=>!Object.is(t,e),us=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},lg=(t,e,n,i=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:i,value:n})},ca=t=>{const e=parseFloat(t);return isNaN(e)?t:e},Mv=t=>{const e=Ze(t)?Number(t):NaN;return isNaN(e)?t:e};let eu;const da=()=>eu||(eu=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function No(t){if(Ne(t)){const e={};for(let n=0;n<t.length;n++){const i=t[n],r=Ze(i)?$v(i):No(i);if(r)for(const o in r)e[o]=r[o]}return e}else if(Ze(t)||Be(t))return t}const Ov=/;(?![^(]*\))/g,Gv=/:([^]+)/,Fv=/\/\*[^]*?\*\//g;function $v(t){const e={};return t.replace(Fv,"").split(Ov).forEach(n=>{if(n){const i=n.split(Gv);i.length>1&&(e[i[0].trim()]=i[1].trim())}}),e}function Xe(t){let e="";if(Ze(t))e=t;else if(Ne(t))for(let n=0;n<t.length;n++){const i=Xe(t[n]);i&&(e+=i+" ")}else if(Be(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const zv="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Bv=Qc(zv);function cg(t){return!!t||t===""}function Vv(t,e){if(t.length!==e.length)return!1;let n=!0;for(let i=0;n&&i<t.length;i++)n=pr(t[i],e[i]);return n}function pr(t,e){if(t===e)return!0;let n=Qd(t),i=Qd(e);if(n||i)return n&&i?t.getTime()===e.getTime():!1;if(n=cn(t),i=cn(e),n||i)return t===e;if(n=Ne(t),i=Ne(e),n||i)return n&&i?Vv(t,e):!1;if(n=Be(t),i=Be(e),n||i){if(!n||!i)return!1;const r=Object.keys(t).length,o=Object.keys(e).length;if(r!==o)return!1;for(const s in t){const a=t.hasOwnProperty(s),l=e.hasOwnProperty(s);if(a&&!l||!a&&l||!pr(t[s],e[s]))return!1}}return String(t)===String(e)}function Uv(t,e){return t.findIndex(n=>pr(n,e))}const dg=t=>!!(t&&t.__v_isRef===!0),b=t=>Ze(t)?t:t==null?"":Ne(t)||Be(t)&&(t.toString===sg||!Le(t.toString))?dg(t)?b(t.value):JSON.stringify(t,ug,2):String(t),ug=(t,e)=>dg(e)?ug(t,e.value):rr(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[i,r],o)=>(n[ja(i,o)+" =>"]=r,n),{})}:sa(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>ja(n))}:cn(e)?ja(e):Be(e)&&!Ne(e)&&!ag(e)?String(e):e,ja=(t,e="")=>{var n;return cn(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};let Dt;class jv{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Dt,!e&&Dt&&(this.index=(Dt.scopes||(Dt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=Dt;try{return Dt=this,e()}finally{Dt=n}}}on(){++this._on===1&&(this.prevScope=Dt,Dt=this)}off(){this._on>0&&--this._on===0&&(Dt=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let n,i;for(n=0,i=this.effects.length;n<i;n++)this.effects[n].stop();for(this.effects.length=0,n=0,i=this.cleanups.length;n<i;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,i=this.scopes.length;n<i;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0}}}function Hv(){return Dt}let We;const Ha=new WeakSet;class hg{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Dt&&Dt.active&&Dt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Ha.has(this)&&(Ha.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||gg(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,tu(this),pg(this);const e=We,n=an;We=this,an=!0;try{return this.fn()}finally{mg(this),We=e,an=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)od(e);this.deps=this.depsTail=void 0,tu(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Ha.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Fl(this)&&this.run()}get dirty(){return Fl(this)}}let fg=0,Jr,Qr;function gg(t,e=!1){if(t.flags|=8,e){t.next=Qr,Qr=t;return}t.next=Jr,Jr=t}function id(){fg++}function rd(){if(--fg>0)return;if(Qr){let e=Qr;for(Qr=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;Jr;){let e=Jr;for(Jr=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(i){t||(t=i)}e=n}}if(t)throw t}function pg(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function mg(t){let e,n=t.depsTail,i=n;for(;i;){const r=i.prevDep;i.version===-1?(i===n&&(n=r),od(i),Wv(i)):e=i,i.dep.activeLink=i.prevActiveLink,i.prevActiveLink=void 0,i=r}t.deps=e,t.depsTail=n}function Fl(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(yg(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function yg(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===ao)||(t.globalVersion=ao,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!Fl(t))))return;t.flags|=2;const e=t.dep,n=We,i=an;We=t,an=!0;try{pg(t);const r=t.fn(t._value);(e.version===0||ui(r,t._value))&&(t.flags|=128,t._value=r,e.version++)}catch(r){throw e.version++,r}finally{We=n,an=i,mg(t),t.flags&=-3}}function od(t,e=!1){const{dep:n,prevSub:i,nextSub:r}=t;if(i&&(i.nextSub=r,t.prevSub=void 0),r&&(r.prevSub=i,t.nextSub=void 0),n.subs===t&&(n.subs=i,!i&&n.computed)){n.computed.flags&=-5;for(let o=n.computed.deps;o;o=o.nextDep)od(o,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function Wv(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let an=!0;const vg=[];function Wn(){vg.push(an),an=!1}function qn(){const t=vg.pop();an=t===void 0?!0:t}function tu(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=We;We=void 0;try{e()}finally{We=n}}}let ao=0;class qv{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class sd{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!We||!an||We===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==We)n=this.activeLink=new qv(We,this),We.deps?(n.prevDep=We.depsTail,We.depsTail.nextDep=n,We.depsTail=n):We.deps=We.depsTail=n,bg(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const i=n.nextDep;i.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=i),n.prevDep=We.depsTail,n.nextDep=void 0,We.depsTail.nextDep=n,We.depsTail=n,We.deps===n&&(We.deps=i)}return n}trigger(e){this.version++,ao++,this.notify(e)}notify(e){id();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{rd()}}}function bg(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let i=e.deps;i;i=i.nextDep)bg(i)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const $l=new WeakMap,Pi=Symbol(""),zl=Symbol(""),lo=Symbol("");function vt(t,e,n){if(an&&We){let i=$l.get(t);i||$l.set(t,i=new Map);let r=i.get(n);r||(i.set(n,r=new sd),r.map=i,r.key=n),r.track()}}function $n(t,e,n,i,r,o){const s=$l.get(t);if(!s){ao++;return}const a=l=>{l&&l.trigger()};if(id(),e==="clear")s.forEach(a);else{const l=Ne(t),c=l&&nd(n);if(l&&n==="length"){const d=Number(i);s.forEach((u,h)=>{(h==="length"||h===lo||!cn(h)&&h>=d)&&a(u)})}else switch((n!==void 0||s.has(void 0))&&a(s.get(n)),c&&a(s.get(lo)),e){case"add":l?c&&a(s.get("length")):(a(s.get(Pi)),rr(t)&&a(s.get(zl)));break;case"delete":l||(a(s.get(Pi)),rr(t)&&a(s.get(zl)));break;case"set":rr(t)&&a(s.get(Pi));break}}rd()}function ji(t){const e=Ge(t);return e===t?e:(vt(e,"iterate",lo),Kt(t)?e:e.map(dn))}function ua(t){return vt(t=Ge(t),"iterate",lo),t}function ri(t,e){return Kn(t)?Di(t)?mr(dn(e)):mr(e):dn(e)}const Kv={__proto__:null,[Symbol.iterator](){return Wa(this,Symbol.iterator,t=>ri(this,t))},concat(...t){return ji(this).concat(...t.map(e=>Ne(e)?ji(e):e))},entries(){return Wa(this,"entries",t=>(t[1]=ri(this,t[1]),t))},every(t,e){return Nn(this,"every",t,e,void 0,arguments)},filter(t,e){return Nn(this,"filter",t,e,n=>n.map(i=>ri(this,i)),arguments)},find(t,e){return Nn(this,"find",t,e,n=>ri(this,n),arguments)},findIndex(t,e){return Nn(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return Nn(this,"findLast",t,e,n=>ri(this,n),arguments)},findLastIndex(t,e){return Nn(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return Nn(this,"forEach",t,e,void 0,arguments)},includes(...t){return qa(this,"includes",t)},indexOf(...t){return qa(this,"indexOf",t)},join(t){return ji(this).join(t)},lastIndexOf(...t){return qa(this,"lastIndexOf",t)},map(t,e){return Nn(this,"map",t,e,void 0,arguments)},pop(){return Ir(this,"pop")},push(...t){return Ir(this,"push",t)},reduce(t,...e){return nu(this,"reduce",t,e)},reduceRight(t,...e){return nu(this,"reduceRight",t,e)},shift(){return Ir(this,"shift")},some(t,e){return Nn(this,"some",t,e,void 0,arguments)},splice(...t){return Ir(this,"splice",t)},toReversed(){return ji(this).toReversed()},toSorted(t){return ji(this).toSorted(t)},toSpliced(...t){return ji(this).toSpliced(...t)},unshift(...t){return Ir(this,"unshift",t)},values(){return Wa(this,"values",t=>ri(this,t))}};function Wa(t,e,n){const i=ua(t),r=i[e]();return i!==t&&!Kt(t)&&(r._next=r.next,r.next=()=>{const o=r._next();return o.done||(o.value=n(o.value)),o}),r}const Xv=Array.prototype;function Nn(t,e,n,i,r,o){const s=ua(t),a=s!==t&&!Kt(t),l=s[e];if(l!==Xv[e]){const u=l.apply(t,o);return a?dn(u):u}let c=n;s!==t&&(a?c=function(u,h){return n.call(this,ri(t,u),h,t)}:n.length>2&&(c=function(u,h){return n.call(this,u,h,t)}));const d=l.call(s,c,i);return a&&r?r(d):d}function nu(t,e,n,i){const r=ua(t);let o=n;return r!==t&&(Kt(t)?n.length>3&&(o=function(s,a,l){return n.call(this,s,a,l,t)}):o=function(s,a,l){return n.call(this,s,ri(t,a),l,t)}),r[e](o,...i)}function qa(t,e,n){const i=Ge(t);vt(i,"iterate",lo);const r=i[e](...n);return(r===-1||r===!1)&&cd(n[0])?(n[0]=Ge(n[0]),i[e](...n)):r}function Ir(t,e,n=[]){Wn(),id();const i=Ge(t)[e].apply(t,n);return rd(),qn(),i}const Zv=Qc("__proto__,__v_isRef,__isVue"),_g=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(cn));function Yv(t){cn(t)||(t=String(t));const e=Ge(this);return vt(e,"has",t),e.hasOwnProperty(t)}class wg{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,i){if(n==="__v_skip")return e.__v_skip;const r=this._isReadonly,o=this._isShallow;if(n==="__v_isReactive")return!r;if(n==="__v_isReadonly")return r;if(n==="__v_isShallow")return o;if(n==="__v_raw")return i===(r?o?ab:Ag:o?Eg:kg).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(i)?e:void 0;const s=Ne(e);if(!r){let l;if(s&&(l=Kv[n]))return l;if(n==="hasOwnProperty")return Yv}const a=Reflect.get(e,n,kt(e)?e:i);if((cn(n)?_g.has(n):Zv(n))||(r||vt(e,"get",n),o))return a;if(kt(a)){const l=s&&nd(n)?a:a.value;return r&&Be(l)?Vl(l):l}return Be(a)?r?Vl(a):Ro(a):a}}class xg extends wg{constructor(e=!1){super(!1,e)}set(e,n,i,r){let o=e[n];const s=Ne(e)&&nd(n);if(!this._isShallow){const c=Kn(o);if(!Kt(i)&&!Kn(i)&&(o=Ge(o),i=Ge(i)),!s&&kt(o)&&!kt(i))return c||(o.value=i),!0}const a=s?Number(n)<e.length:ze(e,n),l=Reflect.set(e,n,i,kt(e)?e:r);return e===Ge(r)&&(a?ui(i,o)&&$n(e,"set",n,i):$n(e,"add",n,i)),l}deleteProperty(e,n){const i=ze(e,n);e[n];const r=Reflect.deleteProperty(e,n);return r&&i&&$n(e,"delete",n,void 0),r}has(e,n){const i=Reflect.has(e,n);return(!cn(n)||!_g.has(n))&&vt(e,"has",n),i}ownKeys(e){return vt(e,"iterate",Ne(e)?"length":Pi),Reflect.ownKeys(e)}}class Jv extends wg{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const Qv=new xg,eb=new Jv,tb=new xg(!0);const Bl=t=>t,Fo=t=>Reflect.getPrototypeOf(t);function nb(t,e,n){return function(...i){const r=this.__v_raw,o=Ge(r),s=rr(o),a=t==="entries"||t===Symbol.iterator&&s,l=t==="keys"&&s,c=r[t](...i),d=n?Bl:e?mr:dn;return!e&&vt(o,"iterate",l?zl:Pi),{next(){const{value:u,done:h}=c.next();return h?{value:u,done:h}:{value:a?[d(u[0]),d(u[1])]:d(u),done:h}},[Symbol.iterator](){return this}}}}function $o(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function ib(t,e){const n={get(r){const o=this.__v_raw,s=Ge(o),a=Ge(r);t||(ui(r,a)&&vt(s,"get",r),vt(s,"get",a));const{has:l}=Fo(s),c=e?Bl:t?mr:dn;if(l.call(s,r))return c(o.get(r));if(l.call(s,a))return c(o.get(a));o!==s&&o.get(r)},get size(){const r=this.__v_raw;return!t&&vt(Ge(r),"iterate",Pi),r.size},has(r){const o=this.__v_raw,s=Ge(o),a=Ge(r);return t||(ui(r,a)&&vt(s,"has",r),vt(s,"has",a)),r===a?o.has(r):o.has(r)||o.has(a)},forEach(r,o){const s=this,a=s.__v_raw,l=Ge(a),c=e?Bl:t?mr:dn;return!t&&vt(l,"iterate",Pi),a.forEach((d,u)=>r.call(o,c(d),c(u),s))}};return ut(n,t?{add:$o("add"),set:$o("set"),delete:$o("delete"),clear:$o("clear")}:{add(r){!e&&!Kt(r)&&!Kn(r)&&(r=Ge(r));const o=Ge(this);return Fo(o).has.call(o,r)||(o.add(r),$n(o,"add",r,r)),this},set(r,o){!e&&!Kt(o)&&!Kn(o)&&(o=Ge(o));const s=Ge(this),{has:a,get:l}=Fo(s);let c=a.call(s,r);c||(r=Ge(r),c=a.call(s,r));const d=l.call(s,r);return s.set(r,o),c?ui(o,d)&&$n(s,"set",r,o):$n(s,"add",r,o),this},delete(r){const o=Ge(this),{has:s,get:a}=Fo(o);let l=s.call(o,r);l||(r=Ge(r),l=s.call(o,r)),a&&a.call(o,r);const c=o.delete(r);return l&&$n(o,"delete",r,void 0),c},clear(){const r=Ge(this),o=r.size!==0,s=r.clear();return o&&$n(r,"clear",void 0,void 0),s}}),["keys","values","entries",Symbol.iterator].forEach(r=>{n[r]=nb(r,t,e)}),n}function ad(t,e){const n=ib(t,e);return(i,r,o)=>r==="__v_isReactive"?!t:r==="__v_isReadonly"?t:r==="__v_raw"?i:Reflect.get(ze(n,r)&&r in i?n:i,r,o)}const rb={get:ad(!1,!1)},ob={get:ad(!1,!0)},sb={get:ad(!0,!1)};const kg=new WeakMap,Eg=new WeakMap,Ag=new WeakMap,ab=new WeakMap;function lb(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function cb(t){return t.__v_skip||!Object.isExtensible(t)?0:lb(Iv(t))}function Ro(t){return Kn(t)?t:ld(t,!1,Qv,rb,kg)}function Cg(t){return ld(t,!1,tb,ob,Eg)}function Vl(t){return ld(t,!0,eb,sb,Ag)}function ld(t,e,n,i,r){if(!Be(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const o=cb(t);if(o===0)return t;const s=r.get(t);if(s)return s;const a=new Proxy(t,o===2?i:n);return r.set(t,a),a}function Di(t){return Kn(t)?Di(t.__v_raw):!!(t&&t.__v_isReactive)}function Kn(t){return!!(t&&t.__v_isReadonly)}function Kt(t){return!!(t&&t.__v_isShallow)}function cd(t){return t?!!t.__v_raw:!1}function Ge(t){const e=t&&t.__v_raw;return e?Ge(e):t}function db(t){return!ze(t,"__v_skip")&&Object.isExtensible(t)&&lg(t,"__v_skip",!0),t}const dn=t=>Be(t)?Ro(t):t,mr=t=>Be(t)?Vl(t):t;function kt(t){return t?t.__v_isRef===!0:!1}function oe(t){return Sg(t,!1)}function ub(t){return Sg(t,!0)}function Sg(t,e){return kt(t)?t:new hb(t,e)}class hb{constructor(e,n){this.dep=new sd,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:Ge(e),this._value=n?e:dn(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,i=this.__v_isShallow||Kt(e)||Kn(e);e=i?e:Ge(e),ui(e,n)&&(this._rawValue=e,this._value=i?e:dn(e),this.dep.trigger())}}function y(t){return kt(t)?t.value:t}const fb={get:(t,e,n)=>e==="__v_raw"?t:y(Reflect.get(t,e,n)),set:(t,e,n,i)=>{const r=t[e];return kt(r)&&!kt(n)?(r.value=n,!0):Reflect.set(t,e,n,i)}};function Tg(t){return Di(t)?t:new Proxy(t,fb)}class gb{constructor(e,n,i){this.fn=e,this.setter=n,this._value=void 0,this.dep=new sd(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=ao-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=i}notify(){if(this.flags|=16,!(this.flags&8)&&We!==this)return gg(this,!0),!0}get value(){const e=this.dep.track();return yg(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function pb(t,e,n=!1){let i,r;return Le(t)?i=t:(i=t.get,r=t.set),new gb(i,r,n)}const zo={},As=new WeakMap;let Ei;function mb(t,e=!1,n=Ei){if(n){let i=As.get(n);i||As.set(n,i=[]),i.push(t)}}function yb(t,e,n=je){const{immediate:i,deep:r,once:o,scheduler:s,augmentJob:a,call:l}=n,c=v=>r?v:Kt(v)||r===!1||r===0?zn(v,1):zn(v);let d,u,h,f,p=!1,m=!1;if(kt(t)?(u=()=>t.value,p=Kt(t)):Di(t)?(u=()=>c(t),p=!0):Ne(t)?(m=!0,p=t.some(v=>Di(v)||Kt(v)),u=()=>t.map(v=>{if(kt(v))return v.value;if(Di(v))return c(v);if(Le(v))return l?l(v,2):v()})):Le(t)?e?u=l?()=>l(t,2):t:u=()=>{if(h){Wn();try{h()}finally{qn()}}const v=Ei;Ei=d;try{return l?l(t,3,[f]):t(f)}finally{Ei=v}}:u=xn,e&&r){const v=u,C=r===!0?1/0:r;u=()=>zn(v(),C)}const w=Hv(),_=()=>{d.stop(),w&&w.active&&td(w.effects,d)};if(o&&e){const v=e;e=(...C)=>{v(...C),_()}}let x=m?new Array(t.length).fill(zo):zo;const k=v=>{if(!(!(d.flags&1)||!d.dirty&&!v))if(e){const C=d.run();if(r||p||(m?C.some((A,S)=>ui(A,x[S])):ui(C,x))){h&&h();const A=Ei;Ei=d;try{const S=[C,x===zo?void 0:m&&x[0]===zo?[]:x,f];x=C,l?l(e,3,S):e(...S)}finally{Ei=A}}}else d.run()};return a&&a(k),d=new hg(u),d.scheduler=s?()=>s(k,!1):k,f=v=>mb(v,!1,d),h=d.onStop=()=>{const v=As.get(d);if(v){if(l)l(v,4);else for(const C of v)C();As.delete(d)}},e?i?k(!0):x=d.run():s?s(k.bind(null,!0),!0):d.run(),_.pause=d.pause.bind(d),_.resume=d.resume.bind(d),_.stop=_,_}function zn(t,e=1/0,n){if(e<=0||!Be(t)||t.__v_skip||(n=n||new Map,(n.get(t)||0)>=e))return t;if(n.set(t,e),e--,kt(t))zn(t.value,e,n);else if(Ne(t))for(let i=0;i<t.length;i++)zn(t[i],e,n);else if(sa(t)||rr(t))t.forEach(i=>{zn(i,e,n)});else if(ag(t)){for(const i in t)zn(t[i],e,n);for(const i of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,i)&&zn(t[i],e,n)}return t}function Lo(t,e,n,i){try{return i?t(...i):t()}catch(r){ha(r,e,n)}}function un(t,e,n,i){if(Le(t)){const r=Lo(t,e,n,i);return r&&og(r)&&r.catch(o=>{ha(o,e,n)}),r}if(Ne(t)){const r=[];for(let o=0;o<t.length;o++)r.push(un(t[o],e,n,i));return r}}function ha(t,e,n,i=!0){const r=e?e.vnode:null,{errorHandler:o,throwUnhandledErrorInProduction:s}=e&&e.appContext.config||je;if(e){let a=e.parent;const l=e.proxy,c=`https://vuejs.org/error-reference/#runtime-${n}`;for(;a;){const d=a.ec;if(d){for(let u=0;u<d.length;u++)if(d[u](t,l,c)===!1)return}a=a.parent}if(o){Wn(),Lo(o,null,10,[t,l,c]),qn();return}}vb(t,n,r,i,s)}function vb(t,e,n,i=!0,r=!1){if(r)throw t;console.error(t)}const Rt=[];let bn=-1;const or=[];let oi=null,Zi=0;const Ng=Promise.resolve();let Cs=null;function Gi(t){const e=Cs||Ng;return t?e.then(this?t.bind(this):t):e}function bb(t){let e=bn+1,n=Rt.length;for(;e<n;){const i=e+n>>>1,r=Rt[i],o=co(r);o<t||o===t&&r.flags&2?e=i+1:n=i}return e}function dd(t){if(!(t.flags&1)){const e=co(t),n=Rt[Rt.length-1];!n||!(t.flags&2)&&e>=co(n)?Rt.push(t):Rt.splice(bb(e),0,t),t.flags|=1,Rg()}}function Rg(){Cs||(Cs=Ng.then(Ig))}function _b(t){Ne(t)?or.push(...t):oi&&t.id===-1?oi.splice(Zi+1,0,t):t.flags&1||(or.push(t),t.flags|=1),Rg()}function iu(t,e,n=bn+1){for(;n<Rt.length;n++){const i=Rt[n];if(i&&i.flags&2){if(t&&i.id!==t.uid)continue;Rt.splice(n,1),n--,i.flags&4&&(i.flags&=-2),i(),i.flags&4||(i.flags&=-2)}}}function Lg(t){if(or.length){const e=[...new Set(or)].sort((n,i)=>co(n)-co(i));if(or.length=0,oi){oi.push(...e);return}for(oi=e,Zi=0;Zi<oi.length;Zi++){const n=oi[Zi];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}oi=null,Zi=0}}const co=t=>t.id==null?t.flags&2?-1:1/0:t.id;function Ig(t){try{for(bn=0;bn<Rt.length;bn++){const e=Rt[bn];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),Lo(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;bn<Rt.length;bn++){const e=Rt[bn];e&&(e.flags&=-2)}bn=-1,Rt.length=0,Lg(),Cs=null,(Rt.length||or.length)&&Ig()}}let ft=null,Pg=null;function Ss(t){const e=ft;return ft=t,Pg=t&&t.type.__scopeId||null,e}function Ue(t,e=ft,n){if(!e||t._n)return t;const i=(...r)=>{i._d&&Rs(-1);const o=Ss(e);let s;try{s=t(...r)}finally{Ss(o),i._d&&Rs(1)}return s};return i._n=!0,i._c=!0,i._d=!0,i}function qt(t,e){if(ft===null)return t;const n=ya(ft),i=t.dirs||(t.dirs=[]);for(let r=0;r<e.length;r++){let[o,s,a,l=je]=e[r];o&&(Le(o)&&(o={mounted:o,updated:o}),o.deep&&zn(s),i.push({dir:o,instance:n,value:s,oldValue:void 0,arg:a,modifiers:l}))}return t}function yi(t,e,n,i){const r=t.dirs,o=e&&e.dirs;for(let s=0;s<r.length;s++){const a=r[s];o&&(a.oldValue=o[s].value);let l=a.dir[i];l&&(Wn(),un(l,n,8,[t.el,a,t,e]),qn())}}const Dg=Symbol("_vte"),Mg=t=>t.__isTeleport,eo=t=>t&&(t.disabled||t.disabled===""),ru=t=>t&&(t.defer||t.defer===""),ou=t=>typeof SVGElement<"u"&&t instanceof SVGElement,su=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,Ul=(t,e)=>{const n=t&&t.to;return Ze(n)?e?e(n):null:n},Og={name:"Teleport",__isTeleport:!0,process(t,e,n,i,r,o,s,a,l,c){const{mc:d,pc:u,pbc:h,o:{insert:f,querySelector:p,createText:m,createComment:w}}=c,_=eo(e.props);let{shapeFlag:x,children:k,dynamicChildren:v}=e;if(t==null){const C=e.el=m(""),A=e.anchor=m("");f(C,n,i),f(A,n,i);const S=(I,D)=>{x&16&&d(k,I,D,r,o,s,a,l)},M=()=>{const I=e.target=Ul(e.props,p),D=Gg(I,e,m,f);I&&(s!=="svg"&&ou(I)?s="svg":s!=="mathml"&&su(I)&&(s="mathml"),r&&r.isCE&&(r.ce._teleportTargets||(r.ce._teleportTargets=new Set)).add(I),_||(S(I,D),hs(e,!1)))};_&&(S(n,A),hs(e,!0)),ru(e.props)?(e.el.__isMounted=!1,Tt(()=>{M(),delete e.el.__isMounted},o)):M()}else{if(ru(e.props)&&t.el.__isMounted===!1){Tt(()=>{Og.process(t,e,n,i,r,o,s,a,l,c)},o);return}e.el=t.el,e.targetStart=t.targetStart;const C=e.anchor=t.anchor,A=e.target=t.target,S=e.targetAnchor=t.targetAnchor,M=eo(t.props),I=M?n:A,D=M?C:S;if(s==="svg"||ou(A)?s="svg":(s==="mathml"||su(A))&&(s="mathml"),v?(h(t.dynamicChildren,v,I,r,o,s,a),fd(t,e,!0)):l||u(t,e,I,D,r,o,s,a,!1),_)M?e.props&&t.props&&e.props.to!==t.props.to&&(e.props.to=t.props.to):Bo(e,n,C,c,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const O=e.target=Ul(e.props,p);O&&Bo(e,O,null,c,0)}else M&&Bo(e,A,S,c,1);hs(e,_)}},remove(t,e,n,{um:i,o:{remove:r}},o){const{shapeFlag:s,children:a,anchor:l,targetStart:c,targetAnchor:d,target:u,props:h}=t;if(u&&(r(c),r(d)),o&&r(l),s&16){const f=o||!eo(h);for(let p=0;p<a.length;p++){const m=a[p];i(m,e,n,f,!!m.dynamicChildren)}}},move:Bo,hydrate:wb};function Bo(t,e,n,{o:{insert:i},m:r},o=2){o===0&&i(t.targetAnchor,e,n);const{el:s,anchor:a,shapeFlag:l,children:c,props:d}=t,u=o===2;if(u&&i(s,e,n),(!u||eo(d))&&l&16)for(let h=0;h<c.length;h++)r(c[h],e,n,2);u&&i(a,e,n)}function wb(t,e,n,i,r,o,{o:{nextSibling:s,parentNode:a,querySelector:l,insert:c,createText:d}},u){function h(m,w,_,x){w.anchor=u(s(m),w,a(m),n,i,r,o),w.targetStart=_,w.targetAnchor=x}const f=e.target=Ul(e.props,l),p=eo(e.props);if(f){const m=f._lpa||f.firstChild;if(e.shapeFlag&16)if(p)h(t,e,m,m&&s(m));else{e.anchor=s(t);let w=m;for(;w;){if(w&&w.nodeType===8){if(w.data==="teleport start anchor")e.targetStart=w;else if(w.data==="teleport anchor"){e.targetAnchor=w,f._lpa=e.targetAnchor&&s(e.targetAnchor);break}}w=s(w)}e.targetAnchor||Gg(f,e,d,c),u(m&&s(m),e,f,n,i,r,o)}hs(e,p)}else p&&e.shapeFlag&16&&h(t,e,t,s(t));return e.anchor&&s(e.anchor)}const xb=Og;function hs(t,e){const n=t.ctx;if(n&&n.ut){let i,r;for(e?(i=t.el,r=t.anchor):(i=t.targetStart,r=t.targetAnchor);i&&i!==r;)i.nodeType===1&&i.setAttribute("data-v-owner",n.uid),i=i.nextSibling;n.ut()}}function Gg(t,e,n,i){const r=e.targetStart=n(""),o=e.targetAnchor=n("");return r[Dg]=o,t&&(i(r,t),i(o,t)),o}const Gn=Symbol("_leaveCb"),Vo=Symbol("_enterCb");function kb(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Jt(()=>{t.isMounted=!0}),Wg(()=>{t.isUnmounting=!0}),t}const jt=[Function,Array],Fg={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:jt,onEnter:jt,onAfterEnter:jt,onEnterCancelled:jt,onBeforeLeave:jt,onLeave:jt,onAfterLeave:jt,onLeaveCancelled:jt,onBeforeAppear:jt,onAppear:jt,onAfterAppear:jt,onAppearCancelled:jt},$g=t=>{const e=t.subTree;return e.component?$g(e.component):e},Eb={name:"BaseTransition",props:Fg,setup(t,{slots:e}){const n=pp(),i=kb();return()=>{const r=e.default&&Vg(e.default(),!0);if(!r||!r.length)return;const o=zg(r),s=Ge(t),{mode:a}=s;if(i.isLeaving)return Ka(o);const l=au(o);if(!l)return Ka(o);let c=jl(l,s,i,n,u=>c=u);l.type!==_t&&uo(l,c);let d=n.subTree&&au(n.subTree);if(d&&d.type!==_t&&!Ni(d,l)&&$g(n).type!==_t){let u=jl(d,s,i,n);if(uo(d,u),a==="out-in"&&l.type!==_t)return i.isLeaving=!0,u.afterLeave=()=>{i.isLeaving=!1,n.job.flags&8||n.update(),delete u.afterLeave,d=void 0},Ka(o);a==="in-out"&&l.type!==_t?u.delayLeave=(h,f,p)=>{const m=Bg(i,d);m[String(d.key)]=d,h[Gn]=()=>{f(),h[Gn]=void 0,delete c.delayedLeave,d=void 0},c.delayedLeave=()=>{p(),delete c.delayedLeave,d=void 0}}:d=void 0}else d&&(d=void 0);return o}}};function zg(t){let e=t[0];if(t.length>1){for(const n of t)if(n.type!==_t){e=n;break}}return e}const Ab=Eb;function Bg(t,e){const{leavingVNodes:n}=t;let i=n.get(e.type);return i||(i=Object.create(null),n.set(e.type,i)),i}function jl(t,e,n,i,r){const{appear:o,mode:s,persisted:a=!1,onBeforeEnter:l,onEnter:c,onAfterEnter:d,onEnterCancelled:u,onBeforeLeave:h,onLeave:f,onAfterLeave:p,onLeaveCancelled:m,onBeforeAppear:w,onAppear:_,onAfterAppear:x,onAppearCancelled:k}=e,v=String(t.key),C=Bg(n,t),A=(I,D)=>{I&&un(I,i,9,D)},S=(I,D)=>{const O=D[1];A(I,D),Ne(I)?I.every($=>$.length<=1)&&O():I.length<=1&&O()},M={mode:s,persisted:a,beforeEnter(I){let D=l;if(!n.isMounted)if(o)D=w||l;else return;I[Gn]&&I[Gn](!0);const O=C[v];O&&Ni(t,O)&&O.el[Gn]&&O.el[Gn](),A(D,[I])},enter(I){let D=c,O=d,$=u;if(!n.isMounted)if(o)D=_||c,O=x||d,$=k||u;else return;let j=!1;const E=I[Vo]=R=>{j||(j=!0,R?A($,[I]):A(O,[I]),M.delayedLeave&&M.delayedLeave(),I[Vo]=void 0)};D?S(D,[I,E]):E()},leave(I,D){const O=String(t.key);if(I[Vo]&&I[Vo](!0),n.isUnmounting)return D();A(h,[I]);let $=!1;const j=I[Gn]=E=>{$||($=!0,D(),E?A(m,[I]):A(p,[I]),I[Gn]=void 0,C[O]===t&&delete C[O])};C[O]=t,f?S(f,[I,j]):j()},clone(I){const D=jl(I,e,n,i,r);return r&&r(D),D}};return M}function Ka(t){if(fa(t))return t=gi(t),t.children=null,t}function au(t){if(!fa(t))return Mg(t.type)&&t.children?zg(t.children):t;if(t.component)return t.component.subTree;const{shapeFlag:e,children:n}=t;if(n){if(e&16)return n[0];if(e&32&&Le(n.default))return n.default()}}function uo(t,e){t.shapeFlag&6&&t.component?(t.transition=e,uo(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function Vg(t,e=!1,n){let i=[],r=0;for(let o=0;o<t.length;o++){let s=t[o];const a=n==null?s.key:String(n)+String(s.key!=null?s.key:o);s.type===qe?(s.patchFlag&128&&r++,i=i.concat(Vg(s.children,e,a))):(e||s.type!==_t)&&i.push(a!=null?gi(s,{key:a}):s)}if(r>1)for(let o=0;o<i.length;o++)i[o].patchFlag=-2;return i}function Ug(t,e){return Le(t)?ut({name:t.name},e,{setup:t}):t}function jg(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}const Ts=new WeakMap;function to(t,e,n,i,r=!1){if(Ne(t)){t.forEach((p,m)=>to(p,e&&(Ne(e)?e[m]:e),n,i,r));return}if(sr(i)&&!r){i.shapeFlag&512&&i.type.__asyncResolved&&i.component.subTree.component&&to(t,e,n,i.component.subTree);return}const o=i.shapeFlag&4?ya(i.component):i.el,s=r?null:o,{i:a,r:l}=t,c=e&&e.r,d=a.refs===je?a.refs={}:a.refs,u=a.setupState,h=Ge(u),f=u===je?rg:p=>ze(h,p);if(c!=null&&c!==l){if(lu(e),Ze(c))d[c]=null,f(c)&&(u[c]=null);else if(kt(c)){c.value=null;const p=e;p.k&&(d[p.k]=null)}}if(Le(l))Lo(l,a,12,[s,d]);else{const p=Ze(l),m=kt(l);if(p||m){const w=()=>{if(t.f){const _=p?f(l)?u[l]:d[l]:l.value;if(r)Ne(_)&&td(_,o);else if(Ne(_))_.includes(o)||_.push(o);else if(p)d[l]=[o],f(l)&&(u[l]=d[l]);else{const x=[o];l.value=x,t.k&&(d[t.k]=x)}}else p?(d[l]=s,f(l)&&(u[l]=s)):m&&(l.value=s,t.k&&(d[t.k]=s))};if(s){const _=()=>{w(),Ts.delete(t)};_.id=-1,Ts.set(t,_),Tt(_,n)}else lu(t),w()}}}function lu(t){const e=Ts.get(t);e&&(e.flags|=8,Ts.delete(t))}da().requestIdleCallback;da().cancelIdleCallback;const sr=t=>!!t.type.__asyncLoader,fa=t=>t.type.__isKeepAlive;function Cb(t,e){Hg(t,"a",e)}function Sb(t,e){Hg(t,"da",e)}function Hg(t,e,n=wt){const i=t.__wdc||(t.__wdc=()=>{let r=n;for(;r;){if(r.isDeactivated)return;r=r.parent}return t()});if(ga(e,i,n),n){let r=n.parent;for(;r&&r.parent;)fa(r.parent.vnode)&&Tb(i,e,n,r),r=r.parent}}function Tb(t,e,n,i){const r=ga(e,t,i,!0);Bi(()=>{td(i[e],r)},n)}function ga(t,e,n=wt,i=!1){if(n){const r=n[t]||(n[t]=[]),o=e.__weh||(e.__weh=(...s)=>{Wn();const a=Io(n),l=un(e,n,t,s);return a(),qn(),l});return i?r.unshift(o):r.push(o),o}}const Yn=t=>(e,n=wt)=>{(!go||t==="sp")&&ga(t,(...i)=>e(...i),n)},Nb=Yn("bm"),Jt=Yn("m"),Rb=Yn("bu"),Lb=Yn("u"),Wg=Yn("bum"),Bi=Yn("um"),Ib=Yn("sp"),Pb=Yn("rtg"),Db=Yn("rtc");function Mb(t,e=wt){ga("ec",t,e)}const qg="components";function Hl(t,e){return Xg(qg,t,!0,e)||t}const Kg=Symbol.for("v-ndc");function Ob(t){return Ze(t)?Xg(qg,t,!1)||t:t||Kg}function Xg(t,e,n=!0,i=!1){const r=ft||wt;if(r){const o=r.type;{const a=k0(o,!1);if(a&&(a===e||a===Zt(e)||a===la(Zt(e))))return o}const s=cu(r[t]||o[t],e)||cu(r.appContext[t],e);return!s&&i?o:s}}function cu(t,e){return t&&(t[e]||t[Zt(e)]||t[la(Zt(e))])}function ln(t,e,n,i){let r;const o=n,s=Ne(t);if(s||Ze(t)){const a=s&&Di(t);let l=!1,c=!1;a&&(l=!Kt(t),c=Kn(t),t=ua(t)),r=new Array(t.length);for(let d=0,u=t.length;d<u;d++)r[d]=e(l?c?mr(dn(t[d])):dn(t[d]):t[d],d,void 0,o)}else if(typeof t=="number"){r=new Array(t);for(let a=0;a<t;a++)r[a]=e(a+1,a,void 0,o)}else if(Be(t))if(t[Symbol.iterator])r=Array.from(t,(a,l)=>e(a,l,void 0,o));else{const a=Object.keys(t);r=new Array(a.length);for(let l=0,c=a.length;l<c;l++){const d=a[l];r[l]=e(t[d],d,l,o)}}else r=[];return r}function Wl(t,e,n={},i,r){if(ft.ce||ft.parent&&sr(ft.parent)&&ft.parent.ce){const c=Object.keys(n).length>0;return e!=="default"&&(n.name=e),H(),Xn(qe,null,[we("slot",n,i)],c?-2:64)}let o=t[e];o&&o._c&&(o._d=!1),H();const s=o&&Zg(o(n)),a=n.key||s&&s.key,l=Xn(qe,{key:(a&&!cn(a)?a:`_${e}`)+(!s&&i?"_fb":"")},s||[],s&&t._===1?64:-2);return!r&&l.scopeId&&(l.slotScopeIds=[l.scopeId+"-s"]),o&&o._c&&(o._d=!0),l}function Zg(t){return t.some(e=>fo(e)?!(e.type===_t||e.type===qe&&!Zg(e.children)):!0)?t:null}const ql=t=>t?mp(t)?ya(t):ql(t.parent):null,no=ut(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>ql(t.parent),$root:t=>ql(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>Jg(t),$forceUpdate:t=>t.f||(t.f=()=>{dd(t.update)}),$nextTick:t=>t.n||(t.n=Gi.bind(t.proxy)),$watch:t=>qb.bind(t)}),Xa=(t,e)=>t!==je&&!t.__isScriptSetup&&ze(t,e),Gb={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:i,data:r,props:o,accessCache:s,type:a,appContext:l}=t;if(e[0]!=="$"){const h=s[e];if(h!==void 0)switch(h){case 1:return i[e];case 2:return r[e];case 4:return n[e];case 3:return o[e]}else{if(Xa(i,e))return s[e]=1,i[e];if(r!==je&&ze(r,e))return s[e]=2,r[e];if(ze(o,e))return s[e]=3,o[e];if(n!==je&&ze(n,e))return s[e]=4,n[e];Kl&&(s[e]=0)}}const c=no[e];let d,u;if(c)return e==="$attrs"&&vt(t.attrs,"get",""),c(t);if((d=a.__cssModules)&&(d=d[e]))return d;if(n!==je&&ze(n,e))return s[e]=4,n[e];if(u=l.config.globalProperties,ze(u,e))return u[e]},set({_:t},e,n){const{data:i,setupState:r,ctx:o}=t;return Xa(r,e)?(r[e]=n,!0):i!==je&&ze(i,e)?(i[e]=n,!0):ze(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(o[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:i,appContext:r,props:o,type:s}},a){let l;return!!(n[a]||t!==je&&a[0]!=="$"&&ze(t,a)||Xa(e,a)||ze(o,a)||ze(i,a)||ze(no,a)||ze(r.config.globalProperties,a)||(l=s.__cssModules)&&l[a])},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:ze(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function du(t){return Ne(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let Kl=!0;function Fb(t){const e=Jg(t),n=t.proxy,i=t.ctx;Kl=!1,e.beforeCreate&&uu(e.beforeCreate,t,"bc");const{data:r,computed:o,methods:s,watch:a,provide:l,inject:c,created:d,beforeMount:u,mounted:h,beforeUpdate:f,updated:p,activated:m,deactivated:w,beforeDestroy:_,beforeUnmount:x,destroyed:k,unmounted:v,render:C,renderTracked:A,renderTriggered:S,errorCaptured:M,serverPrefetch:I,expose:D,inheritAttrs:O,components:$,directives:j,filters:E}=e;if(c&&$b(c,i,null),s)for(const G in s){const B=s[G];Le(B)&&(i[G]=B.bind(n))}if(r){const G=r.call(n,n);Be(G)&&(t.data=Ro(G))}if(Kl=!0,o)for(const G in o){const B=o[G],q=Le(B)?B.bind(n,n):Le(B.get)?B.get.bind(n,n):xn,ee=!Le(B)&&Le(B.set)?B.set.bind(n):xn,fe=Je({get:q,set:ee});Object.defineProperty(i,G,{enumerable:!0,configurable:!0,get:()=>fe.value,set:_e=>fe.value=_e})}if(a)for(const G in a)Yg(a[G],i,n,G);if(l){const G=Le(l)?l.call(n):l;Reflect.ownKeys(G).forEach(B=>{fs(B,G[B])})}d&&uu(d,t,"c");function L(G,B){Ne(B)?B.forEach(q=>G(q.bind(n))):B&&G(B.bind(n))}if(L(Nb,u),L(Jt,h),L(Rb,f),L(Lb,p),L(Cb,m),L(Sb,w),L(Mb,M),L(Db,A),L(Pb,S),L(Wg,x),L(Bi,v),L(Ib,I),Ne(D))if(D.length){const G=t.exposed||(t.exposed={});D.forEach(B=>{Object.defineProperty(G,B,{get:()=>n[B],set:q=>n[B]=q,enumerable:!0})})}else t.exposed||(t.exposed={});C&&t.render===xn&&(t.render=C),O!=null&&(t.inheritAttrs=O),$&&(t.components=$),j&&(t.directives=j),I&&jg(t)}function $b(t,e,n=xn){Ne(t)&&(t=Xl(t));for(const i in t){const r=t[i];let o;Be(r)?"default"in r?o=kn(r.from||i,r.default,!0):o=kn(r.from||i):o=kn(r),kt(o)?Object.defineProperty(e,i,{enumerable:!0,configurable:!0,get:()=>o.value,set:s=>o.value=s}):e[i]=o}}function uu(t,e,n){un(Ne(t)?t.map(i=>i.bind(e.proxy)):t.bind(e.proxy),e,n)}function Yg(t,e,n,i){let r=i.includes(".")?tp(n,i):()=>n[i];if(Ze(t)){const o=e[t];Le(o)&&dt(r,o)}else if(Le(t))dt(r,t.bind(n));else if(Be(t))if(Ne(t))t.forEach(o=>Yg(o,e,n,i));else{const o=Le(t.handler)?t.handler.bind(n):e[t.handler];Le(o)&&dt(r,o,t)}}function Jg(t){const e=t.type,{mixins:n,extends:i}=e,{mixins:r,optionsCache:o,config:{optionMergeStrategies:s}}=t.appContext,a=o.get(e);let l;return a?l=a:!r.length&&!n&&!i?l=e:(l={},r.length&&r.forEach(c=>Ns(l,c,s,!0)),Ns(l,e,s)),Be(e)&&o.set(e,l),l}function Ns(t,e,n,i=!1){const{mixins:r,extends:o}=e;o&&Ns(t,o,n,!0),r&&r.forEach(s=>Ns(t,s,n,!0));for(const s in e)if(!(i&&s==="expose")){const a=zb[s]||n&&n[s];t[s]=a?a(t[s],e[s]):e[s]}return t}const zb={data:hu,props:fu,emits:fu,methods:qr,computed:qr,beforeCreate:St,created:St,beforeMount:St,mounted:St,beforeUpdate:St,updated:St,beforeDestroy:St,beforeUnmount:St,destroyed:St,unmounted:St,activated:St,deactivated:St,errorCaptured:St,serverPrefetch:St,components:qr,directives:qr,watch:Vb,provide:hu,inject:Bb};function hu(t,e){return e?t?function(){return ut(Le(t)?t.call(this,this):t,Le(e)?e.call(this,this):e)}:e:t}function Bb(t,e){return qr(Xl(t),Xl(e))}function Xl(t){if(Ne(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function St(t,e){return t?[...new Set([].concat(t,e))]:e}function qr(t,e){return t?ut(Object.create(null),t,e):e}function fu(t,e){return t?Ne(t)&&Ne(e)?[...new Set([...t,...e])]:ut(Object.create(null),du(t),du(e??{})):e}function Vb(t,e){if(!t)return e;if(!e)return t;const n=ut(Object.create(null),t);for(const i in e)n[i]=St(t[i],e[i]);return n}function Qg(){return{app:null,config:{isNativeTag:rg,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Ub=0;function jb(t,e){return function(i,r=null){Le(i)||(i=ut({},i)),r!=null&&!Be(r)&&(r=null);const o=Qg(),s=new WeakSet,a=[];let l=!1;const c=o.app={_uid:Ub++,_component:i,_props:r,_container:null,_context:o,_instance:null,version:A0,get config(){return o.config},set config(d){},use(d,...u){return s.has(d)||(d&&Le(d.install)?(s.add(d),d.install(c,...u)):Le(d)&&(s.add(d),d(c,...u))),c},mixin(d){return o.mixins.includes(d)||o.mixins.push(d),c},component(d,u){return u?(o.components[d]=u,c):o.components[d]},directive(d,u){return u?(o.directives[d]=u,c):o.directives[d]},mount(d,u,h){if(!l){const f=c._ceVNode||we(i,r);return f.appContext=o,h===!0?h="svg":h===!1&&(h=void 0),t(f,d,h),l=!0,c._container=d,d.__vue_app__=c,ya(f.component)}},onUnmount(d){a.push(d)},unmount(){l&&(un(a,c._instance,16),t(null,c._container),delete c._container.__vue_app__)},provide(d,u){return o.provides[d]=u,c},runWithContext(d){const u=ar;ar=c;try{return d()}finally{ar=u}}};return c}}let ar=null;function fs(t,e){if(wt){let n=wt.provides;const i=wt.parent&&wt.parent.provides;i===n&&(n=wt.provides=Object.create(i)),n[t]=e}}function kn(t,e,n=!1){const i=pp();if(i||ar){let r=ar?ar._context.provides:i?i.parent==null||i.ce?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:void 0;if(r&&t in r)return r[t];if(arguments.length>1)return n&&Le(e)?e.call(i&&i.proxy):e}}const Hb=Symbol.for("v-scx"),Wb=()=>kn(Hb);function dt(t,e,n){return ep(t,e,n)}function ep(t,e,n=je){const{immediate:i,deep:r,flush:o,once:s}=n,a=ut({},n),l=e&&i||!e&&o!=="post";let c;if(go){if(o==="sync"){const f=Wb();c=f.__watcherHandles||(f.__watcherHandles=[])}else if(!l){const f=()=>{};return f.stop=xn,f.resume=xn,f.pause=xn,f}}const d=wt;a.call=(f,p,m)=>un(f,d,p,m);let u=!1;o==="post"?a.scheduler=f=>{Tt(f,d&&d.suspense)}:o!=="sync"&&(u=!0,a.scheduler=(f,p)=>{p?f():dd(f)}),a.augmentJob=f=>{e&&(f.flags|=4),u&&(f.flags|=2,d&&(f.id=d.uid,f.i=d))};const h=yb(t,e,a);return go&&(c?c.push(h):l&&h()),h}function qb(t,e,n){const i=this.proxy,r=Ze(t)?t.includes(".")?tp(i,t):()=>i[t]:t.bind(i,i);let o;Le(e)?o=e:(o=e.handler,n=e);const s=Io(this),a=ep(r,o.bind(i),n);return s(),a}function tp(t,e){const n=e.split(".");return()=>{let i=t;for(let r=0;r<n.length&&i;r++)i=i[n[r]];return i}}const Kb=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${Zt(e)}Modifiers`]||t[`${pi(e)}Modifiers`];function Xb(t,e,...n){if(t.isUnmounted)return;const i=t.vnode.props||je;let r=n;const o=e.startsWith("update:"),s=o&&Kb(i,e.slice(7));s&&(s.trim&&(r=n.map(d=>Ze(d)?d.trim():d)),s.number&&(r=n.map(ca)));let a,l=i[a=Ua(e)]||i[a=Ua(Zt(e))];!l&&o&&(l=i[a=Ua(pi(e))]),l&&un(l,t,6,r);const c=i[a+"Once"];if(c){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,un(c,t,6,r)}}const Zb=new WeakMap;function np(t,e,n=!1){const i=n?Zb:e.emitsCache,r=i.get(t);if(r!==void 0)return r;const o=t.emits;let s={},a=!1;if(!Le(t)){const l=c=>{const d=np(c,e,!0);d&&(a=!0,ut(s,d))};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!o&&!a?(Be(t)&&i.set(t,null),null):(Ne(o)?o.forEach(l=>s[l]=null):ut(s,o),Be(t)&&i.set(t,s),s)}function pa(t,e){return!t||!oa(e)?!1:(e=e.slice(2).replace(/Once$/,""),ze(t,e[0].toLowerCase()+e.slice(1))||ze(t,pi(e))||ze(t,e))}function gu(t){const{type:e,vnode:n,proxy:i,withProxy:r,propsOptions:[o],slots:s,attrs:a,emit:l,render:c,renderCache:d,props:u,data:h,setupState:f,ctx:p,inheritAttrs:m}=t,w=Ss(t);let _,x;try{if(n.shapeFlag&4){const v=r||i,C=v;_=_n(c.call(C,v,d,u,f,h,p)),x=a}else{const v=e;_=_n(v.length>1?v(u,{attrs:a,slots:s,emit:l}):v(u,null)),x=e.props?a:Yb(a)}}catch(v){io.length=0,ha(v,t,1),_=we(_t)}let k=_;if(x&&m!==!1){const v=Object.keys(x),{shapeFlag:C}=k;v.length&&C&7&&(o&&v.some(ed)&&(x=Jb(x,o)),k=gi(k,x,!1,!0))}return n.dirs&&(k=gi(k,null,!1,!0),k.dirs=k.dirs?k.dirs.concat(n.dirs):n.dirs),n.transition&&uo(k,n.transition),_=k,Ss(w),_}const Yb=t=>{let e;for(const n in t)(n==="class"||n==="style"||oa(n))&&((e||(e={}))[n]=t[n]);return e},Jb=(t,e)=>{const n={};for(const i in t)(!ed(i)||!(i.slice(9)in e))&&(n[i]=t[i]);return n};function Qb(t,e,n){const{props:i,children:r,component:o}=t,{props:s,children:a,patchFlag:l}=e,c=o.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return i?pu(i,s,c):!!s;if(l&8){const d=e.dynamicProps;for(let u=0;u<d.length;u++){const h=d[u];if(s[h]!==i[h]&&!pa(c,h))return!0}}}else return(r||a)&&(!a||!a.$stable)?!0:i===s?!1:i?s?pu(i,s,c):!0:!!s;return!1}function pu(t,e,n){const i=Object.keys(e);if(i.length!==Object.keys(t).length)return!0;for(let r=0;r<i.length;r++){const o=i[r];if(e[o]!==t[o]&&!pa(n,o))return!0}return!1}function e0({vnode:t,parent:e},n){for(;e;){const i=e.subTree;if(i.suspense&&i.suspense.activeBranch===t&&(i.el=t.el),i===t)(t=e.vnode).el=n,e=e.parent;else break}}const ip={},rp=()=>Object.create(ip),op=t=>Object.getPrototypeOf(t)===ip;function t0(t,e,n,i=!1){const r={},o=rp();t.propsDefaults=Object.create(null),sp(t,e,r,o);for(const s in t.propsOptions[0])s in r||(r[s]=void 0);n?t.props=i?r:Cg(r):t.type.props?t.props=r:t.props=o,t.attrs=o}function n0(t,e,n,i){const{props:r,attrs:o,vnode:{patchFlag:s}}=t,a=Ge(r),[l]=t.propsOptions;let c=!1;if((i||s>0)&&!(s&16)){if(s&8){const d=t.vnode.dynamicProps;for(let u=0;u<d.length;u++){let h=d[u];if(pa(t.emitsOptions,h))continue;const f=e[h];if(l)if(ze(o,h))f!==o[h]&&(o[h]=f,c=!0);else{const p=Zt(h);r[p]=Zl(l,a,p,f,t,!1)}else f!==o[h]&&(o[h]=f,c=!0)}}}else{sp(t,e,r,o)&&(c=!0);let d;for(const u in a)(!e||!ze(e,u)&&((d=pi(u))===u||!ze(e,d)))&&(l?n&&(n[u]!==void 0||n[d]!==void 0)&&(r[u]=Zl(l,a,u,void 0,t,!0)):delete r[u]);if(o!==a)for(const u in o)(!e||!ze(e,u))&&(delete o[u],c=!0)}c&&$n(t.attrs,"set","")}function sp(t,e,n,i){const[r,o]=t.propsOptions;let s=!1,a;if(e)for(let l in e){if(Yr(l))continue;const c=e[l];let d;r&&ze(r,d=Zt(l))?!o||!o.includes(d)?n[d]=c:(a||(a={}))[d]=c:pa(t.emitsOptions,l)||(!(l in i)||c!==i[l])&&(i[l]=c,s=!0)}if(o){const l=Ge(n),c=a||je;for(let d=0;d<o.length;d++){const u=o[d];n[u]=Zl(r,l,u,c[u],t,!ze(c,u))}}return s}function Zl(t,e,n,i,r,o){const s=t[n];if(s!=null){const a=ze(s,"default");if(a&&i===void 0){const l=s.default;if(s.type!==Function&&!s.skipFactory&&Le(l)){const{propsDefaults:c}=r;if(n in c)i=c[n];else{const d=Io(r);i=c[n]=l.call(null,e),d()}}else i=l;r.ce&&r.ce._setProp(n,i)}s[0]&&(o&&!a?i=!1:s[1]&&(i===""||i===pi(n))&&(i=!0))}return i}const i0=new WeakMap;function ap(t,e,n=!1){const i=n?i0:e.propsCache,r=i.get(t);if(r)return r;const o=t.props,s={},a=[];let l=!1;if(!Le(t)){const d=u=>{l=!0;const[h,f]=ap(u,e,!0);ut(s,h),f&&a.push(...f)};!n&&e.mixins.length&&e.mixins.forEach(d),t.extends&&d(t.extends),t.mixins&&t.mixins.forEach(d)}if(!o&&!l)return Be(t)&&i.set(t,ir),ir;if(Ne(o))for(let d=0;d<o.length;d++){const u=Zt(o[d]);mu(u)&&(s[u]=je)}else if(o)for(const d in o){const u=Zt(d);if(mu(u)){const h=o[d],f=s[u]=Ne(h)||Le(h)?{type:h}:ut({},h),p=f.type;let m=!1,w=!0;if(Ne(p))for(let _=0;_<p.length;++_){const x=p[_],k=Le(x)&&x.name;if(k==="Boolean"){m=!0;break}else k==="String"&&(w=!1)}else m=Le(p)&&p.name==="Boolean";f[0]=m,f[1]=w,(m||ze(f,"default"))&&a.push(u)}}const c=[s,a];return Be(t)&&i.set(t,c),c}function mu(t){return t[0]!=="$"&&!Yr(t)}const ud=t=>t==="_"||t==="_ctx"||t==="$stable",hd=t=>Ne(t)?t.map(_n):[_n(t)],r0=(t,e,n)=>{if(e._n)return e;const i=Ue((...r)=>hd(e(...r)),n);return i._c=!1,i},lp=(t,e,n)=>{const i=t._ctx;for(const r in t){if(ud(r))continue;const o=t[r];if(Le(o))e[r]=r0(r,o,i);else if(o!=null){const s=hd(o);e[r]=()=>s}}},cp=(t,e)=>{const n=hd(e);t.slots.default=()=>n},dp=(t,e,n)=>{for(const i in e)(n||!ud(i))&&(t[i]=e[i])},o0=(t,e,n)=>{const i=t.slots=rp();if(t.vnode.shapeFlag&32){const r=e._;r?(dp(i,e,n),n&&lg(i,"_",r,!0)):lp(e,i)}else e&&cp(t,e)},s0=(t,e,n)=>{const{vnode:i,slots:r}=t;let o=!0,s=je;if(i.shapeFlag&32){const a=e._;a?n&&a===1?o=!1:dp(r,e,n):(o=!e.$stable,lp(e,r)),s=e}else e&&(cp(t,e),s={default:1});if(o)for(const a in r)!ud(a)&&s[a]==null&&delete r[a]},Tt=u0;function a0(t){return l0(t)}function l0(t,e){const n=da();n.__VUE__=!0;const{insert:i,remove:r,patchProp:o,createElement:s,createText:a,createComment:l,setText:c,setElementText:d,parentNode:u,nextSibling:h,setScopeId:f=xn,insertStaticContent:p}=t,m=(N,P,F,W=null,Y=null,Z=null,ae=void 0,ge=null,ue=!!P.dynamicChildren)=>{if(N===P)return;N&&!Ni(N,P)&&(W=U(N),_e(N,Y,Z,!0),N=null),P.patchFlag===-2&&(ue=!1,P.dynamicChildren=null);const{type:se,ref:Ae,shapeFlag:ve}=P;switch(se){case ma:w(N,P,F,W);break;case _t:_(N,P,F,W);break;case Ya:N==null&&x(P,F,W,ae);break;case qe:$(N,P,F,W,Y,Z,ae,ge,ue);break;default:ve&1?C(N,P,F,W,Y,Z,ae,ge,ue):ve&6?j(N,P,F,W,Y,Z,ae,ge,ue):(ve&64||ve&128)&&se.process(N,P,F,W,Y,Z,ae,ge,ue,ie)}Ae!=null&&Y?to(Ae,N&&N.ref,Z,P||N,!P):Ae==null&&N&&N.ref!=null&&to(N.ref,null,Z,N,!0)},w=(N,P,F,W)=>{if(N==null)i(P.el=a(P.children),F,W);else{const Y=P.el=N.el;P.children!==N.children&&c(Y,P.children)}},_=(N,P,F,W)=>{N==null?i(P.el=l(P.children||""),F,W):P.el=N.el},x=(N,P,F,W)=>{[N.el,N.anchor]=p(N.children,P,F,W,N.el,N.anchor)},k=({el:N,anchor:P},F,W)=>{let Y;for(;N&&N!==P;)Y=h(N),i(N,F,W),N=Y;i(P,F,W)},v=({el:N,anchor:P})=>{let F;for(;N&&N!==P;)F=h(N),r(N),N=F;r(P)},C=(N,P,F,W,Y,Z,ae,ge,ue)=>{if(P.type==="svg"?ae="svg":P.type==="math"&&(ae="mathml"),N==null)A(P,F,W,Y,Z,ae,ge,ue);else{const se=N.el&&N.el._isVueCE?N.el:null;try{se&&se._beginPatch(),I(N,P,Y,Z,ae,ge,ue)}finally{se&&se._endPatch()}}},A=(N,P,F,W,Y,Z,ae,ge)=>{let ue,se;const{props:Ae,shapeFlag:ve,transition:Ee,dirs:Te}=N;if(ue=N.el=s(N.type,Z,Ae&&Ae.is,Ae),ve&8?d(ue,N.children):ve&16&&M(N.children,ue,null,W,Y,Za(N,Z),ae,ge),Te&&yi(N,null,W,"created"),S(ue,N,N.scopeId,ae,W),Ae){for(const Q in Ae)Q!=="value"&&!Yr(Q)&&o(ue,Q,null,Ae[Q],Z,W);"value"in Ae&&o(ue,"value",null,Ae.value,Z),(se=Ae.onVnodeBeforeMount)&&mn(se,W,N)}Te&&yi(N,null,W,"beforeMount");const De=c0(Y,Ee);De&&Ee.beforeEnter(ue),i(ue,P,F),((se=Ae&&Ae.onVnodeMounted)||De||Te)&&Tt(()=>{se&&mn(se,W,N),De&&Ee.enter(ue),Te&&yi(N,null,W,"mounted")},Y)},S=(N,P,F,W,Y)=>{if(F&&f(N,F),W)for(let Z=0;Z<W.length;Z++)f(N,W[Z]);if(Y){let Z=Y.subTree;if(P===Z||hp(Z.type)&&(Z.ssContent===P||Z.ssFallback===P)){const ae=Y.vnode;S(N,ae,ae.scopeId,ae.slotScopeIds,Y.parent)}}},M=(N,P,F,W,Y,Z,ae,ge,ue=0)=>{for(let se=ue;se<N.length;se++){const Ae=N[se]=ge?si(N[se]):_n(N[se]);m(null,Ae,P,F,W,Y,Z,ae,ge)}},I=(N,P,F,W,Y,Z,ae)=>{const ge=P.el=N.el;let{patchFlag:ue,dynamicChildren:se,dirs:Ae}=P;ue|=N.patchFlag&16;const ve=N.props||je,Ee=P.props||je;let Te;if(F&&vi(F,!1),(Te=Ee.onVnodeBeforeUpdate)&&mn(Te,F,P,N),Ae&&yi(P,N,F,"beforeUpdate"),F&&vi(F,!0),(ve.innerHTML&&Ee.innerHTML==null||ve.textContent&&Ee.textContent==null)&&d(ge,""),se?D(N.dynamicChildren,se,ge,F,W,Za(P,Y),Z):ae||B(N,P,ge,null,F,W,Za(P,Y),Z,!1),ue>0){if(ue&16)O(ge,ve,Ee,F,Y);else if(ue&2&&ve.class!==Ee.class&&o(ge,"class",null,Ee.class,Y),ue&4&&o(ge,"style",ve.style,Ee.style,Y),ue&8){const De=P.dynamicProps;for(let Q=0;Q<De.length;Q++){const ne=De[Q],X=ve[ne],ye=Ee[ne];(ye!==X||ne==="value")&&o(ge,ne,X,ye,Y,F)}}ue&1&&N.children!==P.children&&d(ge,P.children)}else!ae&&se==null&&O(ge,ve,Ee,F,Y);((Te=Ee.onVnodeUpdated)||Ae)&&Tt(()=>{Te&&mn(Te,F,P,N),Ae&&yi(P,N,F,"updated")},W)},D=(N,P,F,W,Y,Z,ae)=>{for(let ge=0;ge<P.length;ge++){const ue=N[ge],se=P[ge],Ae=ue.el&&(ue.type===qe||!Ni(ue,se)||ue.shapeFlag&198)?u(ue.el):F;m(ue,se,Ae,null,W,Y,Z,ae,!0)}},O=(N,P,F,W,Y)=>{if(P!==F){if(P!==je)for(const Z in P)!Yr(Z)&&!(Z in F)&&o(N,Z,P[Z],null,Y,W);for(const Z in F){if(Yr(Z))continue;const ae=F[Z],ge=P[Z];ae!==ge&&Z!=="value"&&o(N,Z,ge,ae,Y,W)}"value"in F&&o(N,"value",P.value,F.value,Y)}},$=(N,P,F,W,Y,Z,ae,ge,ue)=>{const se=P.el=N?N.el:a(""),Ae=P.anchor=N?N.anchor:a("");let{patchFlag:ve,dynamicChildren:Ee,slotScopeIds:Te}=P;Te&&(ge=ge?ge.concat(Te):Te),N==null?(i(se,F,W),i(Ae,F,W),M(P.children||[],F,Ae,Y,Z,ae,ge,ue)):ve>0&&ve&64&&Ee&&N.dynamicChildren?(D(N.dynamicChildren,Ee,F,Y,Z,ae,ge),(P.key!=null||Y&&P===Y.subTree)&&fd(N,P,!0)):B(N,P,F,Ae,Y,Z,ae,ge,ue)},j=(N,P,F,W,Y,Z,ae,ge,ue)=>{P.slotScopeIds=ge,N==null?P.shapeFlag&512?Y.ctx.activate(P,F,W,ae,ue):E(P,F,W,Y,Z,ae,ue):R(N,P,ue)},E=(N,P,F,W,Y,Z,ae)=>{const ge=N.component=v0(N,W,Y);if(fa(N)&&(ge.ctx.renderer=ie),b0(ge,!1,ae),ge.asyncDep){if(Y&&Y.registerDep(ge,L,ae),!N.el){const ue=ge.subTree=we(_t);_(null,ue,P,F),N.placeholder=ue.el}}else L(ge,N,P,F,Y,Z,ae)},R=(N,P,F)=>{const W=P.component=N.component;if(Qb(N,P,F))if(W.asyncDep&&!W.asyncResolved){G(W,P,F);return}else W.next=P,W.update();else P.el=N.el,W.vnode=P},L=(N,P,F,W,Y,Z,ae)=>{const ge=()=>{if(N.isMounted){let{next:ve,bu:Ee,u:Te,parent:De,vnode:Q}=N;{const it=up(N);if(it){ve&&(ve.el=Q.el,G(N,ve,ae)),it.asyncDep.then(()=>{N.isUnmounted||ge()});return}}let ne=ve,X;vi(N,!1),ve?(ve.el=Q.el,G(N,ve,ae)):ve=Q,Ee&&us(Ee),(X=ve.props&&ve.props.onVnodeBeforeUpdate)&&mn(X,De,ve,Q),vi(N,!0);const ye=gu(N),Ie=N.subTree;N.subTree=ye,m(Ie,ye,u(Ie.el),U(Ie),N,Y,Z),ve.el=ye.el,ne===null&&e0(N,ye.el),Te&&Tt(Te,Y),(X=ve.props&&ve.props.onVnodeUpdated)&&Tt(()=>mn(X,De,ve,Q),Y)}else{let ve;const{el:Ee,props:Te}=P,{bm:De,m:Q,parent:ne,root:X,type:ye}=N,Ie=sr(P);vi(N,!1),De&&us(De),!Ie&&(ve=Te&&Te.onVnodeBeforeMount)&&mn(ve,ne,P),vi(N,!0);{X.ce&&X.ce._def.shadowRoot!==!1&&X.ce._injectChildStyle(ye);const it=N.subTree=gu(N);m(null,it,F,W,N,Y,Z),P.el=it.el}if(Q&&Tt(Q,Y),!Ie&&(ve=Te&&Te.onVnodeMounted)){const it=P;Tt(()=>mn(ve,ne,it),Y)}(P.shapeFlag&256||ne&&sr(ne.vnode)&&ne.vnode.shapeFlag&256)&&N.a&&Tt(N.a,Y),N.isMounted=!0,P=F=W=null}};N.scope.on();const ue=N.effect=new hg(ge);N.scope.off();const se=N.update=ue.run.bind(ue),Ae=N.job=ue.runIfDirty.bind(ue);Ae.i=N,Ae.id=N.uid,ue.scheduler=()=>dd(Ae),vi(N,!0),se()},G=(N,P,F)=>{P.component=N;const W=N.vnode.props;N.vnode=P,N.next=null,n0(N,P.props,W,F),s0(N,P.children,F),Wn(),iu(N),qn()},B=(N,P,F,W,Y,Z,ae,ge,ue=!1)=>{const se=N&&N.children,Ae=N?N.shapeFlag:0,ve=P.children,{patchFlag:Ee,shapeFlag:Te}=P;if(Ee>0){if(Ee&128){ee(se,ve,F,W,Y,Z,ae,ge,ue);return}else if(Ee&256){q(se,ve,F,W,Y,Z,ae,ge,ue);return}}Te&8?(Ae&16&&pe(se,Y,Z),ve!==se&&d(F,ve)):Ae&16?Te&16?ee(se,ve,F,W,Y,Z,ae,ge,ue):pe(se,Y,Z,!0):(Ae&8&&d(F,""),Te&16&&M(ve,F,W,Y,Z,ae,ge,ue))},q=(N,P,F,W,Y,Z,ae,ge,ue)=>{N=N||ir,P=P||ir;const se=N.length,Ae=P.length,ve=Math.min(se,Ae);let Ee;for(Ee=0;Ee<ve;Ee++){const Te=P[Ee]=ue?si(P[Ee]):_n(P[Ee]);m(N[Ee],Te,F,null,Y,Z,ae,ge,ue)}se>Ae?pe(N,Y,Z,!0,!1,ve):M(P,F,W,Y,Z,ae,ge,ue,ve)},ee=(N,P,F,W,Y,Z,ae,ge,ue)=>{let se=0;const Ae=P.length;let ve=N.length-1,Ee=Ae-1;for(;se<=ve&&se<=Ee;){const Te=N[se],De=P[se]=ue?si(P[se]):_n(P[se]);if(Ni(Te,De))m(Te,De,F,null,Y,Z,ae,ge,ue);else break;se++}for(;se<=ve&&se<=Ee;){const Te=N[ve],De=P[Ee]=ue?si(P[Ee]):_n(P[Ee]);if(Ni(Te,De))m(Te,De,F,null,Y,Z,ae,ge,ue);else break;ve--,Ee--}if(se>ve){if(se<=Ee){const Te=Ee+1,De=Te<Ae?P[Te].el:W;for(;se<=Ee;)m(null,P[se]=ue?si(P[se]):_n(P[se]),F,De,Y,Z,ae,ge,ue),se++}}else if(se>Ee)for(;se<=ve;)_e(N[se],Y,Z,!0),se++;else{const Te=se,De=se,Q=new Map;for(se=De;se<=Ee;se++){const Ft=P[se]=ue?si(P[se]):_n(P[se]);Ft.key!=null&&Q.set(Ft.key,se)}let ne,X=0;const ye=Ee-De+1;let Ie=!1,it=0;const Tn=new Array(ye);for(se=0;se<ye;se++)Tn[se]=0;for(se=Te;se<=ve;se++){const Ft=N[se];if(X>=ye){_e(Ft,Y,Z,!0);continue}let pn;if(Ft.key!=null)pn=Q.get(Ft.key);else for(ne=De;ne<=Ee;ne++)if(Tn[ne-De]===0&&Ni(Ft,P[ne])){pn=ne;break}pn===void 0?_e(Ft,Y,Z,!0):(Tn[pn-De]=se+1,pn>=it?it=pn:Ie=!0,m(Ft,P[pn],F,null,Y,Z,ae,ge,ue),X++)}const Zd=Ie?d0(Tn):ir;for(ne=Zd.length-1,se=ye-1;se>=0;se--){const Ft=De+se,pn=P[Ft],Yd=P[Ft+1],Jd=Ft+1<Ae?Yd.el||Yd.placeholder:W;Tn[se]===0?m(null,pn,F,Jd,Y,Z,ae,ge,ue):Ie&&(ne<0||se!==Zd[ne]?fe(pn,F,Jd,2):ne--)}}},fe=(N,P,F,W,Y=null)=>{const{el:Z,type:ae,transition:ge,children:ue,shapeFlag:se}=N;if(se&6){fe(N.component.subTree,P,F,W);return}if(se&128){N.suspense.move(P,F,W);return}if(se&64){ae.move(N,P,F,ie);return}if(ae===qe){i(Z,P,F);for(let ve=0;ve<ue.length;ve++)fe(ue[ve],P,F,W);i(N.anchor,P,F);return}if(ae===Ya){k(N,P,F);return}if(W!==2&&se&1&&ge)if(W===0)ge.beforeEnter(Z),i(Z,P,F),Tt(()=>ge.enter(Z),Y);else{const{leave:ve,delayLeave:Ee,afterLeave:Te}=ge,De=()=>{N.ctx.isUnmounted?r(Z):i(Z,P,F)},Q=()=>{Z._isLeaving&&Z[Gn](!0),ve(Z,()=>{De(),Te&&Te()})};Ee?Ee(Z,De,Q):Q()}else i(Z,P,F)},_e=(N,P,F,W=!1,Y=!1)=>{const{type:Z,props:ae,ref:ge,children:ue,dynamicChildren:se,shapeFlag:Ae,patchFlag:ve,dirs:Ee,cacheIndex:Te}=N;if(ve===-2&&(Y=!1),ge!=null&&(Wn(),to(ge,null,F,N,!0),qn()),Te!=null&&(P.renderCache[Te]=void 0),Ae&256){P.ctx.deactivate(N);return}const De=Ae&1&&Ee,Q=!sr(N);let ne;if(Q&&(ne=ae&&ae.onVnodeBeforeUnmount)&&mn(ne,P,N),Ae&6)le(N.component,F,W);else{if(Ae&128){N.suspense.unmount(F,W);return}De&&yi(N,null,P,"beforeUnmount"),Ae&64?N.type.remove(N,P,F,ie,W):se&&!se.hasOnce&&(Z!==qe||ve>0&&ve&64)?pe(se,P,F,!1,!0):(Z===qe&&ve&384||!Y&&Ae&16)&&pe(ue,P,F),W&&ke(N)}(Q&&(ne=ae&&ae.onVnodeUnmounted)||De)&&Tt(()=>{ne&&mn(ne,P,N),De&&yi(N,null,P,"unmounted")},F)},ke=N=>{const{type:P,el:F,anchor:W,transition:Y}=N;if(P===qe){V(F,W);return}if(P===Ya){v(N);return}const Z=()=>{r(F),Y&&!Y.persisted&&Y.afterLeave&&Y.afterLeave()};if(N.shapeFlag&1&&Y&&!Y.persisted){const{leave:ae,delayLeave:ge}=Y,ue=()=>ae(F,Z);ge?ge(N.el,Z,ue):ue()}else Z()},V=(N,P)=>{let F;for(;N!==P;)F=h(N),r(N),N=F;r(P)},le=(N,P,F)=>{const{bum:W,scope:Y,job:Z,subTree:ae,um:ge,m:ue,a:se}=N;yu(ue),yu(se),W&&us(W),Y.stop(),Z&&(Z.flags|=8,_e(ae,N,P,F)),ge&&Tt(ge,P),Tt(()=>{N.isUnmounted=!0},P)},pe=(N,P,F,W=!1,Y=!1,Z=0)=>{for(let ae=Z;ae<N.length;ae++)_e(N[ae],P,F,W,Y)},U=N=>{if(N.shapeFlag&6)return U(N.component.subTree);if(N.shapeFlag&128)return N.suspense.next();const P=h(N.anchor||N.el),F=P&&P[Dg];return F?h(F):P};let te=!1;const z=(N,P,F)=>{N==null?P._vnode&&_e(P._vnode,null,null,!0):m(P._vnode||null,N,P,null,null,null,F),P._vnode=N,te||(te=!0,iu(),Lg(),te=!1)},ie={p:m,um:_e,m:fe,r:ke,mt:E,mc:M,pc:B,pbc:D,n:U,o:t};return{render:z,hydrate:void 0,createApp:jb(z)}}function Za({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function vi({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function c0(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function fd(t,e,n=!1){const i=t.children,r=e.children;if(Ne(i)&&Ne(r))for(let o=0;o<i.length;o++){const s=i[o];let a=r[o];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=r[o]=si(r[o]),a.el=s.el),!n&&a.patchFlag!==-2&&fd(s,a)),a.type===ma&&a.patchFlag!==-1&&(a.el=s.el),a.type===_t&&!a.el&&(a.el=s.el)}}function d0(t){const e=t.slice(),n=[0];let i,r,o,s,a;const l=t.length;for(i=0;i<l;i++){const c=t[i];if(c!==0){if(r=n[n.length-1],t[r]<c){e[i]=r,n.push(i);continue}for(o=0,s=n.length-1;o<s;)a=o+s>>1,t[n[a]]<c?o=a+1:s=a;c<t[n[o]]&&(o>0&&(e[i]=n[o-1]),n[o]=i)}}for(o=n.length,s=n[o-1];o-- >0;)n[o]=s,s=e[s];return n}function up(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:up(e)}function yu(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const hp=t=>t.__isSuspense;function u0(t,e){e&&e.pendingBranch?Ne(t)?e.effects.push(...t):e.effects.push(t):_b(t)}const qe=Symbol.for("v-fgt"),ma=Symbol.for("v-txt"),_t=Symbol.for("v-cmt"),Ya=Symbol.for("v-stc"),io=[];let Bt=null;function H(t=!1){io.push(Bt=t?null:[])}function h0(){io.pop(),Bt=io[io.length-1]||null}let ho=1;function Rs(t,e=!1){ho+=t,t<0&&Bt&&e&&(Bt.hasOnce=!0)}function fp(t){return t.dynamicChildren=ho>0?Bt||ir:null,h0(),ho>0&&Bt&&Bt.push(t),t}function K(t,e,n,i,r,o){return fp(g(t,e,n,i,r,o,!0))}function Xn(t,e,n,i,r){return fp(we(t,e,n,i,r,!0))}function fo(t){return t?t.__v_isVNode===!0:!1}function Ni(t,e){return t.type===e.type&&t.key===e.key}const gp=({key:t})=>t??null,gs=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?Ze(t)||kt(t)||Le(t)?{i:ft,r:t,k:e,f:!!n}:t:null);function g(t,e=null,n=null,i=0,r=null,o=t===qe?0:1,s=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&gp(e),ref:e&&gs(e),scopeId:Pg,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:i,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:ft};return a?(gd(l,n),o&128&&t.normalize(l)):n&&(l.shapeFlag|=Ze(n)?8:16),ho>0&&!s&&Bt&&(l.patchFlag>0||o&6)&&l.patchFlag!==32&&Bt.push(l),l}const we=f0;function f0(t,e=null,n=null,i=0,r=null,o=!1){if((!t||t===Kg)&&(t=_t),fo(t)){const a=gi(t,e,!0);return n&&gd(a,n),ho>0&&!o&&Bt&&(a.shapeFlag&6?Bt[Bt.indexOf(t)]=a:Bt.push(a)),a.patchFlag=-2,a}if(E0(t)&&(t=t.__vccOpts),e){e=g0(e);let{class:a,style:l}=e;a&&!Ze(a)&&(e.class=Xe(a)),Be(l)&&(cd(l)&&!Ne(l)&&(l=ut({},l)),e.style=No(l))}const s=Ze(t)?1:hp(t)?128:Mg(t)?64:Be(t)?4:Le(t)?2:0;return g(t,e,n,i,r,s,o,!0)}function g0(t){return t?cd(t)||op(t)?ut({},t):t:null}function gi(t,e,n=!1,i=!1){const{props:r,ref:o,patchFlag:s,children:a,transition:l}=t,c=e?p0(r||{},e):r,d={__v_isVNode:!0,__v_skip:!0,type:t.type,props:c,key:c&&gp(c),ref:e&&e.ref?n&&o?Ne(o)?o.concat(gs(e)):[o,gs(e)]:gs(e):o,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==qe?s===-1?16:s|16:s,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:l,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&gi(t.ssContent),ssFallback:t.ssFallback&&gi(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l&&i&&uo(d,l.clone(d)),d}function Ce(t=" ",e=0){return we(ma,null,t,e)}function Me(t="",e=!1){return e?(H(),Xn(_t,null,t)):we(_t,null,t)}function _n(t){return t==null||typeof t=="boolean"?we(_t):Ne(t)?we(qe,null,t.slice()):fo(t)?si(t):we(ma,null,String(t))}function si(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:gi(t)}function gd(t,e){let n=0;const{shapeFlag:i}=t;if(e==null)e=null;else if(Ne(e))n=16;else if(typeof e=="object")if(i&65){const r=e.default;r&&(r._c&&(r._d=!1),gd(t,r()),r._c&&(r._d=!0));return}else{n=32;const r=e._;!r&&!op(e)?e._ctx=ft:r===3&&ft&&(ft.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Le(e)?(e={default:e,_ctx:ft},n=32):(e=String(e),i&64?(n=16,e=[Ce(e)]):n=8);t.children=e,t.shapeFlag|=n}function p0(...t){const e={};for(let n=0;n<t.length;n++){const i=t[n];for(const r in i)if(r==="class")e.class!==i.class&&(e.class=Xe([e.class,i.class]));else if(r==="style")e.style=No([e.style,i.style]);else if(oa(r)){const o=e[r],s=i[r];s&&o!==s&&!(Ne(o)&&o.includes(s))&&(e[r]=o?[].concat(o,s):s)}else r!==""&&(e[r]=i[r])}return e}function mn(t,e,n,i=null){un(t,e,7,[n,i])}const m0=Qg();let y0=0;function v0(t,e,n){const i=t.type,r=(e?e.appContext:t.appContext)||m0,o={uid:y0++,vnode:t,type:i,parent:e,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new jv(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(r.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:ap(i,r),emitsOptions:np(i,r),emit:null,emitted:null,propsDefaults:je,inheritAttrs:i.inheritAttrs,ctx:je,data:je,props:je,attrs:je,slots:je,refs:je,setupState:je,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=e?e.root:o,o.emit=Xb.bind(null,o),t.ce&&t.ce(o),o}let wt=null;const pp=()=>wt||ft;let Ls,Yl;{const t=da(),e=(n,i)=>{let r;return(r=t[n])||(r=t[n]=[]),r.push(i),o=>{r.length>1?r.forEach(s=>s(o)):r[0](o)}};Ls=e("__VUE_INSTANCE_SETTERS__",n=>wt=n),Yl=e("__VUE_SSR_SETTERS__",n=>go=n)}const Io=t=>{const e=wt;return Ls(t),t.scope.on(),()=>{t.scope.off(),Ls(e)}},vu=()=>{wt&&wt.scope.off(),Ls(null)};function mp(t){return t.vnode.shapeFlag&4}let go=!1;function b0(t,e=!1,n=!1){e&&Yl(e);const{props:i,children:r}=t.vnode,o=mp(t);t0(t,i,o,e),o0(t,r,n||e);const s=o?_0(t,e):void 0;return e&&Yl(!1),s}function _0(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,Gb);const{setup:i}=n;if(i){Wn();const r=t.setupContext=i.length>1?x0(t):null,o=Io(t),s=Lo(i,t,0,[t.props,r]),a=og(s);if(qn(),o(),(a||t.sp)&&!sr(t)&&jg(t),a){if(s.then(vu,vu),e)return s.then(l=>{bu(t,l)}).catch(l=>{ha(l,t,0)});t.asyncDep=s}else bu(t,s)}else yp(t)}function bu(t,e,n){Le(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Be(e)&&(t.setupState=Tg(e)),yp(t)}function yp(t,e,n){const i=t.type;t.render||(t.render=i.render||xn);{const r=Io(t);Wn();try{Fb(t)}finally{qn(),r()}}}const w0={get(t,e){return vt(t,"get",""),t[e]}};function x0(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,w0),slots:t.slots,emit:t.emit,expose:e}}function ya(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(Tg(db(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in no)return no[n](t)},has(e,n){return n in e||n in no}})):t.proxy}function k0(t,e=!0){return Le(t)?t.displayName||t.name:t.name||e&&t.__name}function E0(t){return Le(t)&&"__vccOpts"in t}const Je=(t,e)=>pb(t,e,go);function pd(t,e,n){try{Rs(-1);const i=arguments.length;return i===2?Be(e)&&!Ne(e)?fo(e)?we(t,null,[e]):we(t,e):we(t,null,e):(i>3?n=Array.prototype.slice.call(arguments,2):i===3&&fo(n)&&(n=[n]),we(t,e,n))}finally{Rs(1)}}const A0="3.5.25";let Jl;const _u=typeof window<"u"&&window.trustedTypes;if(_u)try{Jl=_u.createPolicy("vue",{createHTML:t=>t})}catch{}const vp=Jl?t=>Jl.createHTML(t):t=>t,C0="http://www.w3.org/2000/svg",S0="http://www.w3.org/1998/Math/MathML",Mn=typeof document<"u"?document:null,wu=Mn&&Mn.createElement("template"),T0={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,i)=>{const r=e==="svg"?Mn.createElementNS(C0,t):e==="mathml"?Mn.createElementNS(S0,t):n?Mn.createElement(t,{is:n}):Mn.createElement(t);return t==="select"&&i&&i.multiple!=null&&r.setAttribute("multiple",i.multiple),r},createText:t=>Mn.createTextNode(t),createComment:t=>Mn.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Mn.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,i,r,o){const s=n?n.previousSibling:e.lastChild;if(r&&(r===o||r.nextSibling))for(;e.insertBefore(r.cloneNode(!0),n),!(r===o||!(r=r.nextSibling)););else{wu.innerHTML=vp(i==="svg"?`<svg>${t}</svg>`:i==="mathml"?`<math>${t}</math>`:t);const a=wu.content;if(i==="svg"||i==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,n)}return[s?s.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},Qn="transition",Pr="animation",po=Symbol("_vtc"),bp={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},N0=ut({},Fg,bp),R0=t=>(t.displayName="Transition",t.props=N0,t),Is=R0((t,{slots:e})=>pd(Ab,L0(t),e)),bi=(t,e=[])=>{Ne(t)?t.forEach(n=>n(...e)):t&&t(...e)},xu=t=>t?Ne(t)?t.some(e=>e.length>1):t.length>1:!1;function L0(t){const e={};for(const $ in t)$ in bp||(e[$]=t[$]);if(t.css===!1)return e;const{name:n="v",type:i,duration:r,enterFromClass:o=`${n}-enter-from`,enterActiveClass:s=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:l=o,appearActiveClass:c=s,appearToClass:d=a,leaveFromClass:u=`${n}-leave-from`,leaveActiveClass:h=`${n}-leave-active`,leaveToClass:f=`${n}-leave-to`}=t,p=I0(r),m=p&&p[0],w=p&&p[1],{onBeforeEnter:_,onEnter:x,onEnterCancelled:k,onLeave:v,onLeaveCancelled:C,onBeforeAppear:A=_,onAppear:S=x,onAppearCancelled:M=k}=e,I=($,j,E,R)=>{$._enterCancelled=R,_i($,j?d:a),_i($,j?c:s),E&&E()},D=($,j)=>{$._isLeaving=!1,_i($,u),_i($,f),_i($,h),j&&j()},O=$=>(j,E)=>{const R=$?S:x,L=()=>I(j,$,E);bi(R,[j,L]),ku(()=>{_i(j,$?l:o),Rn(j,$?d:a),xu(R)||Eu(j,i,m,L)})};return ut(e,{onBeforeEnter($){bi(_,[$]),Rn($,o),Rn($,s)},onBeforeAppear($){bi(A,[$]),Rn($,l),Rn($,c)},onEnter:O(!1),onAppear:O(!0),onLeave($,j){$._isLeaving=!0;const E=()=>D($,j);Rn($,u),$._enterCancelled?(Rn($,h),Su($)):(Su($),Rn($,h)),ku(()=>{$._isLeaving&&(_i($,u),Rn($,f),xu(v)||Eu($,i,w,E))}),bi(v,[$,E])},onEnterCancelled($){I($,!1,void 0,!0),bi(k,[$])},onAppearCancelled($){I($,!0,void 0,!0),bi(M,[$])},onLeaveCancelled($){D($),bi(C,[$])}})}function I0(t){if(t==null)return null;if(Be(t))return[Ja(t.enter),Ja(t.leave)];{const e=Ja(t);return[e,e]}}function Ja(t){return Mv(t)}function Rn(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[po]||(t[po]=new Set)).add(e)}function _i(t,e){e.split(/\s+/).forEach(i=>i&&t.classList.remove(i));const n=t[po];n&&(n.delete(e),n.size||(t[po]=void 0))}function ku(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let P0=0;function Eu(t,e,n,i){const r=t._endId=++P0,o=()=>{r===t._endId&&i()};if(n!=null)return setTimeout(o,n);const{type:s,timeout:a,propCount:l}=D0(t,e);if(!s)return i();const c=s+"end";let d=0;const u=()=>{t.removeEventListener(c,h),o()},h=f=>{f.target===t&&++d>=l&&u()};setTimeout(()=>{d<l&&u()},a+1),t.addEventListener(c,h)}function D0(t,e){const n=window.getComputedStyle(t),i=p=>(n[p]||"").split(", "),r=i(`${Qn}Delay`),o=i(`${Qn}Duration`),s=Au(r,o),a=i(`${Pr}Delay`),l=i(`${Pr}Duration`),c=Au(a,l);let d=null,u=0,h=0;e===Qn?s>0&&(d=Qn,u=s,h=o.length):e===Pr?c>0&&(d=Pr,u=c,h=l.length):(u=Math.max(s,c),d=u>0?s>c?Qn:Pr:null,h=d?d===Qn?o.length:l.length:0);const f=d===Qn&&/\b(?:transform|all)(?:,|$)/.test(i(`${Qn}Property`).toString());return{type:d,timeout:u,propCount:h,hasTransform:f}}function Au(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,i)=>Cu(n)+Cu(t[i])))}function Cu(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function Su(t){return(t?t.ownerDocument:document).body.offsetHeight}function M0(t,e,n){const i=t[po];i&&(e=(e?[e,...i]:[...i]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const Ps=Symbol("_vod"),_p=Symbol("_vsh"),Uo={name:"show",beforeMount(t,{value:e},{transition:n}){t[Ps]=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):Dr(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:i}){!e!=!n&&(i?e?(i.beforeEnter(t),Dr(t,!0),i.enter(t)):i.leave(t,()=>{Dr(t,!1)}):Dr(t,e))},beforeUnmount(t,{value:e}){Dr(t,e)}};function Dr(t,e){t.style.display=e?t[Ps]:"none",t[_p]=!e}const O0=Symbol(""),G0=/(?:^|;)\s*display\s*:/;function F0(t,e,n){const i=t.style,r=Ze(n);let o=!1;if(n&&!r){if(e)if(Ze(e))for(const s of e.split(";")){const a=s.slice(0,s.indexOf(":")).trim();n[a]==null&&ps(i,a,"")}else for(const s in e)n[s]==null&&ps(i,s,"");for(const s in n)s==="display"&&(o=!0),ps(i,s,n[s])}else if(r){if(e!==n){const s=i[O0];s&&(n+=";"+s),i.cssText=n,o=G0.test(n)}}else e&&t.removeAttribute("style");Ps in t&&(t[Ps]=o?i.display:"",t[_p]&&(i.display="none"))}const Tu=/\s*!important$/;function ps(t,e,n){if(Ne(n))n.forEach(i=>ps(t,e,i));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const i=$0(t,e);Tu.test(n)?t.setProperty(pi(i),n.replace(Tu,""),"important"):t[i]=n}}const Nu=["Webkit","Moz","ms"],Qa={};function $0(t,e){const n=Qa[e];if(n)return n;let i=Zt(e);if(i!=="filter"&&i in t)return Qa[e]=i;i=la(i);for(let r=0;r<Nu.length;r++){const o=Nu[r]+i;if(o in t)return Qa[e]=o}return e}const Ru="http://www.w3.org/1999/xlink";function Lu(t,e,n,i,r,o=Bv(e)){i&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(Ru,e.slice(6,e.length)):t.setAttributeNS(Ru,e,n):n==null||o&&!cg(n)?t.removeAttribute(e):t.setAttribute(e,o?"":cn(n)?String(n):n)}function Iu(t,e,n,i,r){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?vp(n):n);return}const o=t.tagName;if(e==="value"&&o!=="PROGRESS"&&!o.includes("-")){const a=o==="OPTION"?t.getAttribute("value")||"":t.value,l=n==null?t.type==="checkbox"?"on":"":String(n);(a!==l||!("_value"in t))&&(t.value=l),n==null&&t.removeAttribute(e),t._value=n;return}let s=!1;if(n===""||n==null){const a=typeof t[e];a==="boolean"?n=cg(n):n==null&&a==="string"?(n="",s=!0):a==="number"&&(n=0,s=!0)}try{t[e]=n}catch{}s&&t.removeAttribute(r||e)}function li(t,e,n,i){t.addEventListener(e,n,i)}function z0(t,e,n,i){t.removeEventListener(e,n,i)}const Pu=Symbol("_vei");function B0(t,e,n,i,r=null){const o=t[Pu]||(t[Pu]={}),s=o[e];if(i&&s)s.value=i;else{const[a,l]=V0(e);if(i){const c=o[e]=H0(i,r);li(t,a,c,l)}else s&&(z0(t,a,s,l),o[e]=void 0)}}const Du=/(?:Once|Passive|Capture)$/;function V0(t){let e;if(Du.test(t)){e={};let i;for(;i=t.match(Du);)t=t.slice(0,t.length-i[0].length),e[i[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):pi(t.slice(2)),e]}let el=0;const U0=Promise.resolve(),j0=()=>el||(U0.then(()=>el=0),el=Date.now());function H0(t,e){const n=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=n.attached)return;un(W0(i,n.value),e,5,[i])};return n.value=t,n.attached=j0(),n}function W0(t,e){if(Ne(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(i=>r=>!r._stopped&&i&&i(r))}else return e}const Mu=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,q0=(t,e,n,i,r,o)=>{const s=r==="svg";e==="class"?M0(t,i,s):e==="style"?F0(t,n,i):oa(e)?ed(e)||B0(t,e,n,i,o):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):K0(t,e,i,s))?(Iu(t,e,i),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&Lu(t,e,i,s,o,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!Ze(i))?Iu(t,Zt(e),i,o,e):(e==="true-value"?t._trueValue=i:e==="false-value"&&(t._falseValue=i),Lu(t,e,i,s))};function K0(t,e,n,i){if(i)return!!(e==="innerHTML"||e==="textContent"||e in t&&Mu(e)&&Le(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="sandbox"&&t.tagName==="IFRAME"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const r=t.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return Mu(e)&&Ze(n)?!1:e in t}const yr=t=>{const e=t.props["onUpdate:modelValue"]||!1;return Ne(e)?n=>us(e,n):e};function X0(t){t.target.composing=!0}function Ou(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const jn=Symbol("_assign");function Gu(t,e,n){return e&&(t=t.trim()),n&&(t=ca(t)),t}const Ql={created(t,{modifiers:{lazy:e,trim:n,number:i}},r){t[jn]=yr(r);const o=i||r.props&&r.props.type==="number";li(t,e?"change":"input",s=>{s.target.composing||t[jn](Gu(t.value,n,o))}),(n||o)&&li(t,"change",()=>{t.value=Gu(t.value,n,o)}),e||(li(t,"compositionstart",X0),li(t,"compositionend",Ou),li(t,"change",Ou))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:i,trim:r,number:o}},s){if(t[jn]=yr(s),t.composing)return;const a=(o||t.type==="number")&&!/^0\d/.test(t.value)?ca(t.value):t.value,l=e??"";a!==l&&(document.activeElement===t&&t.type!=="range"&&(i&&e===n||r&&t.value.trim()===l)||(t.value=l))}},ec={created(t,{value:e},n){t.checked=pr(e,n.props.value),t[jn]=yr(n),li(t,"change",()=>{t[jn](mo(t))})},beforeUpdate(t,{value:e,oldValue:n},i){t[jn]=yr(i),e!==n&&(t.checked=pr(e,i.props.value))}},wp={deep:!0,created(t,{value:e,modifiers:{number:n}},i){const r=sa(e);li(t,"change",()=>{const o=Array.prototype.filter.call(t.options,s=>s.selected).map(s=>n?ca(mo(s)):mo(s));t[jn](t.multiple?r?new Set(o):o:o[0]),t._assigning=!0,Gi(()=>{t._assigning=!1})}),t[jn]=yr(i)},mounted(t,{value:e}){Fu(t,e)},beforeUpdate(t,e,n){t[jn]=yr(n)},updated(t,{value:e}){t._assigning||Fu(t,e)}};function Fu(t,e){const n=t.multiple,i=Ne(e);if(!(n&&!i&&!sa(e))){for(let r=0,o=t.options.length;r<o;r++){const s=t.options[r],a=mo(s);if(n)if(i){const l=typeof a;l==="string"||l==="number"?s.selected=e.some(c=>String(c)===String(a)):s.selected=Uv(e,a)>-1}else s.selected=e.has(a);else if(pr(mo(s),e)){t.selectedIndex!==r&&(t.selectedIndex=r);return}}!n&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function mo(t){return"_value"in t?t._value:t.value}const Z0=["ctrl","shift","alt","meta"],Y0={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>Z0.some(n=>t[`${n}Key`]&&!e.includes(n))},Qi=(t,e)=>{const n=t._withMods||(t._withMods={}),i=e.join(".");return n[i]||(n[i]=((r,...o)=>{for(let s=0;s<e.length;s++){const a=Y0[e[s]];if(a&&a(r,e))return}return t(r,...o)}))},J0={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Bn=(t,e)=>{const n=t._withKeys||(t._withKeys={}),i=e.join(".");return n[i]||(n[i]=(r=>{if(!("key"in r))return;const o=pi(r.key);if(e.some(s=>s===o||J0[s]===o))return t(r)}))},Q0=ut({patchProp:q0},T0);let $u;function e_(){return $u||($u=a0(Q0))}const t_=((...t)=>{const e=e_().createApp(...t),{mount:n}=e;return e.mount=i=>{const r=i_(i);if(!r)return;const o=e._component;!Le(o)&&!o.render&&!o.template&&(o.template=r.innerHTML),r.nodeType===1&&(r.textContent="");const s=n(r,!1,n_(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),s},e});function n_(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function i_(t){return Ze(t)?document.querySelector(t):t}const Yi=typeof document<"u";function xp(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function r_(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&xp(t.default)}const $e=Object.assign;function tl(t,e){const n={};for(const i in e){const r=e[i];n[i]=hn(r)?r.map(t):t(r)}return n}const ro=()=>{},hn=Array.isArray;function zu(t,e){const n={};for(const i in t)n[i]=i in e?e[i]:t[i];return n}const kp=/#/g,o_=/&/g,s_=/\//g,a_=/=/g,l_=/\?/g,Ep=/\+/g,c_=/%5B/g,d_=/%5D/g,Ap=/%5E/g,u_=/%60/g,Cp=/%7B/g,h_=/%7C/g,Sp=/%7D/g,f_=/%20/g;function md(t){return t==null?"":encodeURI(""+t).replace(h_,"|").replace(c_,"[").replace(d_,"]")}function g_(t){return md(t).replace(Cp,"{").replace(Sp,"}").replace(Ap,"^")}function tc(t){return md(t).replace(Ep,"%2B").replace(f_,"+").replace(kp,"%23").replace(o_,"%26").replace(u_,"`").replace(Cp,"{").replace(Sp,"}").replace(Ap,"^")}function p_(t){return tc(t).replace(a_,"%3D")}function m_(t){return md(t).replace(kp,"%23").replace(l_,"%3F")}function y_(t){return m_(t).replace(s_,"%2F")}function yo(t){if(t==null)return null;try{return decodeURIComponent(""+t)}catch{}return""+t}const v_=/\/$/,b_=t=>t.replace(v_,"");function nl(t,e,n="/"){let i,r={},o="",s="";const a=e.indexOf("#");let l=e.indexOf("?");return l=a>=0&&l>a?-1:l,l>=0&&(i=e.slice(0,l),o=e.slice(l,a>0?a:e.length),r=t(o.slice(1))),a>=0&&(i=i||e.slice(0,a),s=e.slice(a,e.length)),i=k_(i??e,n),{fullPath:i+o+s,path:i,query:r,hash:yo(s)}}function __(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function Bu(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function w_(t,e,n){const i=e.matched.length-1,r=n.matched.length-1;return i>-1&&i===r&&vr(e.matched[i],n.matched[r])&&Tp(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function vr(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function Tp(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!x_(t[n],e[n]))return!1;return!0}function x_(t,e){return hn(t)?Vu(t,e):hn(e)?Vu(e,t):t===e}function Vu(t,e){return hn(e)?t.length===e.length&&t.every((n,i)=>n===e[i]):t.length===1&&t[0]===e}function k_(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),i=t.split("/"),r=i[i.length-1];(r===".."||r===".")&&i.push("");let o=n.length-1,s,a;for(s=0;s<i.length;s++)if(a=i[s],a!==".")if(a==="..")o>1&&o--;else break;return n.slice(0,o).join("/")+"/"+i.slice(s).join("/")}const ei={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let nc=(function(t){return t.pop="pop",t.push="push",t})({}),il=(function(t){return t.back="back",t.forward="forward",t.unknown="",t})({});function E_(t){if(!t)if(Yi){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),b_(t)}const A_=/^[^#]+#/;function C_(t,e){return t.replace(A_,"#")+e}function S_(t,e){const n=document.documentElement.getBoundingClientRect(),i=t.getBoundingClientRect();return{behavior:e.behavior,left:i.left-n.left-(e.left||0),top:i.top-n.top-(e.top||0)}}const va=()=>({left:window.scrollX,top:window.scrollY});function T_(t){let e;if("el"in t){const n=t.el,i=typeof n=="string"&&n.startsWith("#"),r=typeof n=="string"?i?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!r)return;e=S_(r,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function Uu(t,e){return(history.state?history.state.position-e:-1)+t}const ic=new Map;function N_(t,e){ic.set(t,e)}function R_(t){const e=ic.get(t);return ic.delete(t),e}function L_(t){return typeof t=="string"||t&&typeof t=="object"}function Np(t){return typeof t=="string"||typeof t=="symbol"}let Ye=(function(t){return t[t.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",t[t.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",t[t.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",t[t.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",t[t.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",t})({});const Rp=Symbol("");Ye.MATCHER_NOT_FOUND+"",Ye.NAVIGATION_GUARD_REDIRECT+"",Ye.NAVIGATION_ABORTED+"",Ye.NAVIGATION_CANCELLED+"",Ye.NAVIGATION_DUPLICATED+"";function br(t,e){return $e(new Error,{type:t,[Rp]:!0},e)}function Ln(t,e){return t instanceof Error&&Rp in t&&(e==null||!!(t.type&e))}const I_=["params","query","hash"];function P_(t){if(typeof t=="string")return t;if(t.path!=null)return t.path;const e={};for(const n of I_)n in t&&(e[n]=t[n]);return JSON.stringify(e,null,2)}function D_(t){const e={};if(t===""||t==="?")return e;const n=(t[0]==="?"?t.slice(1):t).split("&");for(let i=0;i<n.length;++i){const r=n[i].replace(Ep," "),o=r.indexOf("="),s=yo(o<0?r:r.slice(0,o)),a=o<0?null:yo(r.slice(o+1));if(s in e){let l=e[s];hn(l)||(l=e[s]=[l]),l.push(a)}else e[s]=a}return e}function ju(t){let e="";for(let n in t){const i=t[n];if(n=p_(n),i==null){i!==void 0&&(e+=(e.length?"&":"")+n);continue}(hn(i)?i.map(r=>r&&tc(r)):[i&&tc(i)]).forEach(r=>{r!==void 0&&(e+=(e.length?"&":"")+n,r!=null&&(e+="="+r))})}return e}function M_(t){const e={};for(const n in t){const i=t[n];i!==void 0&&(e[n]=hn(i)?i.map(r=>r==null?null:""+r):i==null?i:""+i)}return e}const O_=Symbol(""),Hu=Symbol(""),yd=Symbol(""),vd=Symbol(""),rc=Symbol("");function Mr(){let t=[];function e(i){return t.push(i),()=>{const r=t.indexOf(i);r>-1&&t.splice(r,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function ai(t,e,n,i,r,o=s=>s()){const s=i&&(i.enterCallbacks[r]=i.enterCallbacks[r]||[]);return()=>new Promise((a,l)=>{const c=h=>{h===!1?l(br(Ye.NAVIGATION_ABORTED,{from:n,to:e})):h instanceof Error?l(h):L_(h)?l(br(Ye.NAVIGATION_GUARD_REDIRECT,{from:e,to:h})):(s&&i.enterCallbacks[r]===s&&typeof h=="function"&&s.push(h),a())},d=o(()=>t.call(i&&i.instances[r],e,n,c));let u=Promise.resolve(d);t.length<3&&(u=u.then(c)),u.catch(h=>l(h))})}function rl(t,e,n,i,r=o=>o()){const o=[];for(const s of t)for(const a in s.components){let l=s.components[a];if(!(e!=="beforeRouteEnter"&&!s.instances[a]))if(xp(l)){const c=(l.__vccOpts||l)[e];c&&o.push(ai(c,n,i,s,a,r))}else{let c=l();o.push(()=>c.then(d=>{if(!d)throw new Error(`Couldn't resolve component "${a}" at "${s.path}"`);const u=r_(d)?d.default:d;s.mods[a]=d,s.components[a]=u;const h=(u.__vccOpts||u)[e];return h&&ai(h,n,i,s,a,r)()}))}}return o}function G_(t,e){const n=[],i=[],r=[],o=Math.max(e.matched.length,t.matched.length);for(let s=0;s<o;s++){const a=e.matched[s];a&&(t.matched.find(c=>vr(c,a))?i.push(a):n.push(a));const l=t.matched[s];l&&(e.matched.find(c=>vr(c,l))||r.push(l))}return[n,i,r]}let F_=()=>location.protocol+"//"+location.host;function Lp(t,e){const{pathname:n,search:i,hash:r}=e,o=t.indexOf("#");if(o>-1){let s=r.includes(t.slice(o))?t.slice(o).length:1,a=r.slice(s);return a[0]!=="/"&&(a="/"+a),Bu(a,"")}return Bu(n,t)+i+r}function $_(t,e,n,i){let r=[],o=[],s=null;const a=({state:h})=>{const f=Lp(t,location),p=n.value,m=e.value;let w=0;if(h){if(n.value=f,e.value=h,s&&s===p){s=null;return}w=m?h.position-m.position:0}else i(f);r.forEach(_=>{_(n.value,p,{delta:w,type:nc.pop,direction:w?w>0?il.forward:il.back:il.unknown})})};function l(){s=n.value}function c(h){r.push(h);const f=()=>{const p=r.indexOf(h);p>-1&&r.splice(p,1)};return o.push(f),f}function d(){if(document.visibilityState==="hidden"){const{history:h}=window;if(!h.state)return;h.replaceState($e({},h.state,{scroll:va()}),"")}}function u(){for(const h of o)h();o=[],window.removeEventListener("popstate",a),window.removeEventListener("pagehide",d),document.removeEventListener("visibilitychange",d)}return window.addEventListener("popstate",a),window.addEventListener("pagehide",d),document.addEventListener("visibilitychange",d),{pauseListeners:l,listen:c,destroy:u}}function Wu(t,e,n,i=!1,r=!1){return{back:t,current:e,forward:n,replaced:i,position:window.history.length,scroll:r?va():null}}function z_(t){const{history:e,location:n}=window,i={value:Lp(t,n)},r={value:e.state};r.value||o(i.value,{back:null,current:i.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function o(l,c,d){const u=t.indexOf("#"),h=u>-1?(n.host&&document.querySelector("base")?t:t.slice(u))+l:F_()+t+l;try{e[d?"replaceState":"pushState"](c,"",h),r.value=c}catch(f){console.error(f),n[d?"replace":"assign"](h)}}function s(l,c){o(l,$e({},e.state,Wu(r.value.back,l,r.value.forward,!0),c,{position:r.value.position}),!0),i.value=l}function a(l,c){const d=$e({},r.value,e.state,{forward:l,scroll:va()});o(d.current,d,!0),o(l,$e({},Wu(i.value,l,null),{position:d.position+1},c),!1),i.value=l}return{location:i,state:r,push:a,replace:s}}function B_(t){t=E_(t);const e=z_(t),n=$_(t,e.state,e.location,e.replace);function i(o,s=!0){s||n.pauseListeners(),history.go(o)}const r=$e({location:"",base:t,go:i,createHref:C_.bind(null,t)},e,n);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>e.state.value}),r}let Ri=(function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.Group=2]="Group",t})({});var rt=(function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.ParamRegExp=2]="ParamRegExp",t[t.ParamRegExpEnd=3]="ParamRegExpEnd",t[t.EscapeNext=4]="EscapeNext",t})(rt||{});const V_={type:Ri.Static,value:""},U_=/[a-zA-Z0-9_]/;function j_(t){if(!t)return[[]];if(t==="/")return[[V_]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(f){throw new Error(`ERR (${n})/"${c}": ${f}`)}let n=rt.Static,i=n;const r=[];let o;function s(){o&&r.push(o),o=[]}let a=0,l,c="",d="";function u(){c&&(n===rt.Static?o.push({type:Ri.Static,value:c}):n===rt.Param||n===rt.ParamRegExp||n===rt.ParamRegExpEnd?(o.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),o.push({type:Ri.Param,value:c,regexp:d,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),c="")}function h(){c+=l}for(;a<t.length;){if(l=t[a++],l==="\\"&&n!==rt.ParamRegExp){i=n,n=rt.EscapeNext;continue}switch(n){case rt.Static:l==="/"?(c&&u(),s()):l===":"?(u(),n=rt.Param):h();break;case rt.EscapeNext:h(),n=i;break;case rt.Param:l==="("?n=rt.ParamRegExp:U_.test(l)?h():(u(),n=rt.Static,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case rt.ParamRegExp:l===")"?d[d.length-1]=="\\"?d=d.slice(0,-1)+l:n=rt.ParamRegExpEnd:d+=l;break;case rt.ParamRegExpEnd:u(),n=rt.Static,l!=="*"&&l!=="?"&&l!=="+"&&a--,d="";break;default:e("Unknown state");break}}return n===rt.ParamRegExp&&e(`Unfinished custom RegExp for param "${c}"`),u(),s(),r}const qu="[^/]+?",H_={sensitive:!1,strict:!1,start:!0,end:!0};var Nt=(function(t){return t[t._multiplier=10]="_multiplier",t[t.Root=90]="Root",t[t.Segment=40]="Segment",t[t.SubSegment=30]="SubSegment",t[t.Static=40]="Static",t[t.Dynamic=20]="Dynamic",t[t.BonusCustomRegExp=10]="BonusCustomRegExp",t[t.BonusWildcard=-50]="BonusWildcard",t[t.BonusRepeatable=-20]="BonusRepeatable",t[t.BonusOptional=-8]="BonusOptional",t[t.BonusStrict=.7000000000000001]="BonusStrict",t[t.BonusCaseSensitive=.25]="BonusCaseSensitive",t})(Nt||{});const W_=/[.+*?^${}()[\]/\\]/g;function q_(t,e){const n=$e({},H_,e),i=[];let r=n.start?"^":"";const o=[];for(const c of t){const d=c.length?[]:[Nt.Root];n.strict&&!c.length&&(r+="/");for(let u=0;u<c.length;u++){const h=c[u];let f=Nt.Segment+(n.sensitive?Nt.BonusCaseSensitive:0);if(h.type===Ri.Static)u||(r+="/"),r+=h.value.replace(W_,"\\$&"),f+=Nt.Static;else if(h.type===Ri.Param){const{value:p,repeatable:m,optional:w,regexp:_}=h;o.push({name:p,repeatable:m,optional:w});const x=_||qu;if(x!==qu){f+=Nt.BonusCustomRegExp;try{`${x}`}catch(v){throw new Error(`Invalid custom RegExp for param "${p}" (${x}): `+v.message)}}let k=m?`((?:${x})(?:/(?:${x}))*)`:`(${x})`;u||(k=w&&c.length<2?`(?:/${k})`:"/"+k),w&&(k+="?"),r+=k,f+=Nt.Dynamic,w&&(f+=Nt.BonusOptional),m&&(f+=Nt.BonusRepeatable),x===".*"&&(f+=Nt.BonusWildcard)}d.push(f)}i.push(d)}if(n.strict&&n.end){const c=i.length-1;i[c][i[c].length-1]+=Nt.BonusStrict}n.strict||(r+="/?"),n.end?r+="$":n.strict&&!r.endsWith("/")&&(r+="(?:/|$)");const s=new RegExp(r,n.sensitive?"":"i");function a(c){const d=c.match(s),u={};if(!d)return null;for(let h=1;h<d.length;h++){const f=d[h]||"",p=o[h-1];u[p.name]=f&&p.repeatable?f.split("/"):f}return u}function l(c){let d="",u=!1;for(const h of t){(!u||!d.endsWith("/"))&&(d+="/"),u=!1;for(const f of h)if(f.type===Ri.Static)d+=f.value;else if(f.type===Ri.Param){const{value:p,repeatable:m,optional:w}=f,_=p in c?c[p]:"";if(hn(_)&&!m)throw new Error(`Provided param "${p}" is an array but it is not repeatable (* or + modifiers)`);const x=hn(_)?_.join("/"):_;if(!x)if(w)h.length<2&&(d.endsWith("/")?d=d.slice(0,-1):u=!0);else throw new Error(`Missing required param "${p}"`);d+=x}}return d||"/"}return{re:s,score:i,keys:o,parse:a,stringify:l}}function K_(t,e){let n=0;for(;n<t.length&&n<e.length;){const i=e[n]-t[n];if(i)return i;n++}return t.length<e.length?t.length===1&&t[0]===Nt.Static+Nt.Segment?-1:1:t.length>e.length?e.length===1&&e[0]===Nt.Static+Nt.Segment?1:-1:0}function Ip(t,e){let n=0;const i=t.score,r=e.score;for(;n<i.length&&n<r.length;){const o=K_(i[n],r[n]);if(o)return o;n++}if(Math.abs(r.length-i.length)===1){if(Ku(i))return 1;if(Ku(r))return-1}return r.length-i.length}function Ku(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const X_={strict:!1,end:!0,sensitive:!1};function Z_(t,e,n){const i=q_(j_(t.path),n),r=$e(i,{record:t,parent:e,children:[],alias:[]});return e&&!r.record.aliasOf==!e.record.aliasOf&&e.children.push(r),r}function Y_(t,e){const n=[],i=new Map;e=zu(X_,e);function r(u){return i.get(u)}function o(u,h,f){const p=!f,m=Zu(u);m.aliasOf=f&&f.record;const w=zu(e,u),_=[m];if("alias"in u){const v=typeof u.alias=="string"?[u.alias]:u.alias;for(const C of v)_.push(Zu($e({},m,{components:f?f.record.components:m.components,path:C,aliasOf:f?f.record:m})))}let x,k;for(const v of _){const{path:C}=v;if(h&&C[0]!=="/"){const A=h.record.path,S=A[A.length-1]==="/"?"":"/";v.path=h.record.path+(C&&S+C)}if(x=Z_(v,h,w),f?f.alias.push(x):(k=k||x,k!==x&&k.alias.push(x),p&&u.name&&!Yu(x)&&s(u.name)),Pp(x)&&l(x),m.children){const A=m.children;for(let S=0;S<A.length;S++)o(A[S],x,f&&f.children[S])}f=f||x}return k?()=>{s(k)}:ro}function s(u){if(Np(u)){const h=i.get(u);h&&(i.delete(u),n.splice(n.indexOf(h),1),h.children.forEach(s),h.alias.forEach(s))}else{const h=n.indexOf(u);h>-1&&(n.splice(h,1),u.record.name&&i.delete(u.record.name),u.children.forEach(s),u.alias.forEach(s))}}function a(){return n}function l(u){const h=ew(u,n);n.splice(h,0,u),u.record.name&&!Yu(u)&&i.set(u.record.name,u)}function c(u,h){let f,p={},m,w;if("name"in u&&u.name){if(f=i.get(u.name),!f)throw br(Ye.MATCHER_NOT_FOUND,{location:u});w=f.record.name,p=$e(Xu(h.params,f.keys.filter(k=>!k.optional).concat(f.parent?f.parent.keys.filter(k=>k.optional):[]).map(k=>k.name)),u.params&&Xu(u.params,f.keys.map(k=>k.name))),m=f.stringify(p)}else if(u.path!=null)m=u.path,f=n.find(k=>k.re.test(m)),f&&(p=f.parse(m),w=f.record.name);else{if(f=h.name?i.get(h.name):n.find(k=>k.re.test(h.path)),!f)throw br(Ye.MATCHER_NOT_FOUND,{location:u,currentLocation:h});w=f.record.name,p=$e({},h.params,u.params),m=f.stringify(p)}const _=[];let x=f;for(;x;)_.unshift(x.record),x=x.parent;return{name:w,path:m,params:p,matched:_,meta:Q_(_)}}t.forEach(u=>o(u));function d(){n.length=0,i.clear()}return{addRoute:o,resolve:c,removeRoute:s,clearRoutes:d,getRoutes:a,getRecordMatcher:r}}function Xu(t,e){const n={};for(const i of e)i in t&&(n[i]=t[i]);return n}function Zu(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:J_(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function J_(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const i in t.components)e[i]=typeof n=="object"?n[i]:n;return e}function Yu(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function Q_(t){return t.reduce((e,n)=>$e(e,n.meta),{})}function ew(t,e){let n=0,i=e.length;for(;n!==i;){const o=n+i>>1;Ip(t,e[o])<0?i=o:n=o+1}const r=tw(t);return r&&(i=e.lastIndexOf(r,i-1)),i}function tw(t){let e=t;for(;e=e.parent;)if(Pp(e)&&Ip(t,e)===0)return e}function Pp({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function Ju(t){const e=kn(yd),n=kn(vd),i=Je(()=>{const l=y(t.to);return e.resolve(l)}),r=Je(()=>{const{matched:l}=i.value,{length:c}=l,d=l[c-1],u=n.matched;if(!d||!u.length)return-1;const h=u.findIndex(vr.bind(null,d));if(h>-1)return h;const f=Qu(l[c-2]);return c>1&&Qu(d)===f&&u[u.length-1].path!==f?u.findIndex(vr.bind(null,l[c-2])):h}),o=Je(()=>r.value>-1&&sw(n.params,i.value.params)),s=Je(()=>r.value>-1&&r.value===n.matched.length-1&&Tp(n.params,i.value.params));function a(l={}){if(ow(l)){const c=e[y(t.replace)?"replace":"push"](y(t.to)).catch(ro);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>c),c}return Promise.resolve()}return{route:i,href:Je(()=>i.value.href),isActive:o,isExactActive:s,navigate:a}}function nw(t){return t.length===1?t[0]:t}const iw=Ug({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:Ju,setup(t,{slots:e}){const n=Ro(Ju(t)),{options:i}=kn(yd),r=Je(()=>({[eh(t.activeClass,i.linkActiveClass,"router-link-active")]:n.isActive,[eh(t.exactActiveClass,i.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const o=e.default&&nw(e.default(n));return t.custom?o:pd("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:r.value},o)}}}),rw=iw;function ow(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function sw(t,e){for(const n in e){const i=e[n],r=t[n];if(typeof i=="string"){if(i!==r)return!1}else if(!hn(r)||r.length!==i.length||i.some((o,s)=>o!==r[s]))return!1}return!0}function Qu(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const eh=(t,e,n)=>t??e??n,aw=Ug({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const i=kn(rc),r=Je(()=>t.route||i.value),o=kn(Hu,0),s=Je(()=>{let c=y(o);const{matched:d}=r.value;let u;for(;(u=d[c])&&!u.components;)c++;return c}),a=Je(()=>r.value.matched[s.value]);fs(Hu,Je(()=>s.value+1)),fs(O_,a),fs(rc,r);const l=oe();return dt(()=>[l.value,a.value,t.name],([c,d,u],[h,f,p])=>{d&&(d.instances[u]=c,f&&f!==d&&c&&c===h&&(d.leaveGuards.size||(d.leaveGuards=f.leaveGuards),d.updateGuards.size||(d.updateGuards=f.updateGuards))),c&&d&&(!f||!vr(d,f)||!h)&&(d.enterCallbacks[u]||[]).forEach(m=>m(c))},{flush:"post"}),()=>{const c=r.value,d=t.name,u=a.value,h=u&&u.components[d];if(!h)return th(n.default,{Component:h,route:c});const f=u.props[d],p=f?f===!0?c.params:typeof f=="function"?f(c):f:null,w=pd(h,$e({},p,e,{onVnodeUnmounted:_=>{_.component.isUnmounted&&(u.instances[d]=null)},ref:l}));return th(n.default,{Component:w,route:c})||w}}});function th(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const lw=aw;function cw(t){const e=Y_(t.routes,t),n=t.parseQuery||D_,i=t.stringifyQuery||ju,r=t.history,o=Mr(),s=Mr(),a=Mr(),l=ub(ei);let c=ei;Yi&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const d=tl.bind(null,U=>""+U),u=tl.bind(null,y_),h=tl.bind(null,yo);function f(U,te){let z,ie;return Np(U)?(z=e.getRecordMatcher(U),ie=te):ie=U,e.addRoute(ie,z)}function p(U){const te=e.getRecordMatcher(U);te&&e.removeRoute(te)}function m(){return e.getRoutes().map(U=>U.record)}function w(U){return!!e.getRecordMatcher(U)}function _(U,te){if(te=$e({},te||l.value),typeof U=="string"){const F=nl(n,U,te.path),W=e.resolve({path:F.path},te),Y=r.createHref(F.fullPath);return $e(F,W,{params:h(W.params),hash:yo(F.hash),redirectedFrom:void 0,href:Y})}let z;if(U.path!=null)z=$e({},U,{path:nl(n,U.path,te.path).path});else{const F=$e({},U.params);for(const W in F)F[W]==null&&delete F[W];z=$e({},U,{params:u(F)}),te.params=u(te.params)}const ie=e.resolve(z,te),ce=U.hash||"";ie.params=d(h(ie.params));const N=__(i,$e({},U,{hash:g_(ce),path:ie.path})),P=r.createHref(N);return $e({fullPath:N,hash:ce,query:i===ju?M_(U.query):U.query||{}},ie,{redirectedFrom:void 0,href:P})}function x(U){return typeof U=="string"?nl(n,U,l.value.path):$e({},U)}function k(U,te){if(c!==U)return br(Ye.NAVIGATION_CANCELLED,{from:te,to:U})}function v(U){return S(U)}function C(U){return v($e(x(U),{replace:!0}))}function A(U,te){const z=U.matched[U.matched.length-1];if(z&&z.redirect){const{redirect:ie}=z;let ce=typeof ie=="function"?ie(U,te):ie;return typeof ce=="string"&&(ce=ce.includes("?")||ce.includes("#")?ce=x(ce):{path:ce},ce.params={}),$e({query:U.query,hash:U.hash,params:ce.path!=null?{}:U.params},ce)}}function S(U,te){const z=c=_(U),ie=l.value,ce=U.state,N=U.force,P=U.replace===!0,F=A(z,ie);if(F)return S($e(x(F),{state:typeof F=="object"?$e({},ce,F.state):ce,force:N,replace:P}),te||z);const W=z;W.redirectedFrom=te;let Y;return!N&&w_(i,ie,z)&&(Y=br(Ye.NAVIGATION_DUPLICATED,{to:W,from:ie}),fe(ie,ie,!0,!1)),(Y?Promise.resolve(Y):D(W,ie)).catch(Z=>Ln(Z)?Ln(Z,Ye.NAVIGATION_GUARD_REDIRECT)?Z:ee(Z):B(Z,W,ie)).then(Z=>{if(Z){if(Ln(Z,Ye.NAVIGATION_GUARD_REDIRECT))return S($e({replace:P},x(Z.to),{state:typeof Z.to=="object"?$e({},ce,Z.to.state):ce,force:N}),te||W)}else Z=$(W,ie,!0,P,ce);return O(W,ie,Z),Z})}function M(U,te){const z=k(U,te);return z?Promise.reject(z):Promise.resolve()}function I(U){const te=V.values().next().value;return te&&typeof te.runWithContext=="function"?te.runWithContext(U):U()}function D(U,te){let z;const[ie,ce,N]=G_(U,te);z=rl(ie.reverse(),"beforeRouteLeave",U,te);for(const F of ie)F.leaveGuards.forEach(W=>{z.push(ai(W,U,te))});const P=M.bind(null,U,te);return z.push(P),pe(z).then(()=>{z=[];for(const F of o.list())z.push(ai(F,U,te));return z.push(P),pe(z)}).then(()=>{z=rl(ce,"beforeRouteUpdate",U,te);for(const F of ce)F.updateGuards.forEach(W=>{z.push(ai(W,U,te))});return z.push(P),pe(z)}).then(()=>{z=[];for(const F of N)if(F.beforeEnter)if(hn(F.beforeEnter))for(const W of F.beforeEnter)z.push(ai(W,U,te));else z.push(ai(F.beforeEnter,U,te));return z.push(P),pe(z)}).then(()=>(U.matched.forEach(F=>F.enterCallbacks={}),z=rl(N,"beforeRouteEnter",U,te,I),z.push(P),pe(z))).then(()=>{z=[];for(const F of s.list())z.push(ai(F,U,te));return z.push(P),pe(z)}).catch(F=>Ln(F,Ye.NAVIGATION_CANCELLED)?F:Promise.reject(F))}function O(U,te,z){a.list().forEach(ie=>I(()=>ie(U,te,z)))}function $(U,te,z,ie,ce){const N=k(U,te);if(N)return N;const P=te===ei,F=Yi?history.state:{};z&&(ie||P?r.replace(U.fullPath,$e({scroll:P&&F&&F.scroll},ce)):r.push(U.fullPath,ce)),l.value=U,fe(U,te,z,P),ee()}let j;function E(){j||(j=r.listen((U,te,z)=>{if(!le.listening)return;const ie=_(U),ce=A(ie,le.currentRoute.value);if(ce){S($e(ce,{replace:!0,force:!0}),ie).catch(ro);return}c=ie;const N=l.value;Yi&&N_(Uu(N.fullPath,z.delta),va()),D(ie,N).catch(P=>Ln(P,Ye.NAVIGATION_ABORTED|Ye.NAVIGATION_CANCELLED)?P:Ln(P,Ye.NAVIGATION_GUARD_REDIRECT)?(S($e(x(P.to),{force:!0}),ie).then(F=>{Ln(F,Ye.NAVIGATION_ABORTED|Ye.NAVIGATION_DUPLICATED)&&!z.delta&&z.type===nc.pop&&r.go(-1,!1)}).catch(ro),Promise.reject()):(z.delta&&r.go(-z.delta,!1),B(P,ie,N))).then(P=>{P=P||$(ie,N,!1),P&&(z.delta&&!Ln(P,Ye.NAVIGATION_CANCELLED)?r.go(-z.delta,!1):z.type===nc.pop&&Ln(P,Ye.NAVIGATION_ABORTED|Ye.NAVIGATION_DUPLICATED)&&r.go(-1,!1)),O(ie,N,P)}).catch(ro)}))}let R=Mr(),L=Mr(),G;function B(U,te,z){ee(U);const ie=L.list();return ie.length?ie.forEach(ce=>ce(U,te,z)):console.error(U),Promise.reject(U)}function q(){return G&&l.value!==ei?Promise.resolve():new Promise((U,te)=>{R.add([U,te])})}function ee(U){return G||(G=!U,E(),R.list().forEach(([te,z])=>U?z(U):te()),R.reset()),U}function fe(U,te,z,ie){const{scrollBehavior:ce}=t;if(!Yi||!ce)return Promise.resolve();const N=!z&&R_(Uu(U.fullPath,0))||(ie||!z)&&history.state&&history.state.scroll||null;return Gi().then(()=>ce(U,te,N)).then(P=>P&&T_(P)).catch(P=>B(P,U,te))}const _e=U=>r.go(U);let ke;const V=new Set,le={currentRoute:l,listening:!0,addRoute:f,removeRoute:p,clearRoutes:e.clearRoutes,hasRoute:w,getRoutes:m,resolve:_,options:t,push:v,replace:C,go:_e,back:()=>_e(-1),forward:()=>_e(1),beforeEach:o.add,beforeResolve:s.add,afterEach:a.add,onError:L.add,isReady:q,install(U){U.component("RouterLink",rw),U.component("RouterView",lw),U.config.globalProperties.$router=le,Object.defineProperty(U.config.globalProperties,"$route",{enumerable:!0,get:()=>y(l)}),Yi&&!ke&&l.value===ei&&(ke=!0,v(r.location).catch(ie=>{}));const te={};for(const ie in ei)Object.defineProperty(te,ie,{get:()=>l.value[ie],enumerable:!0});U.provide(yd,le),U.provide(vd,Cg(te)),U.provide(rc,l);const z=U.unmount;V.add(U),U.unmount=function(){V.delete(U),V.size<1&&(c=ei,j&&j(),j=null,l.value=ei,ke=!1,G=!1),z()}}};function pe(U){return U.reduce((te,z)=>te.then(()=>I(z)),Promise.resolve())}return le}function dw(t){return kn(vd)}const Hi={ERROR:1,WARN:2,INFO:3,DEBUG:4,TRACE:5},uw="info",nh="sandbox_logging_filters",ih=["themeswitcher","codemirroreditor","editoradapter"];let hw=class{constructor(e={}){this.enabled=e.enabled!==!1,this.level=e.level||uw,this.prefix=e.prefix||"",this.component=this.prefix,this.redactSecrets=e.redactSecrets||!1,this.showTimestamp=e.showTimestamp!==!1,this.format=e.format||"[{timestamp}] [{prefix}] {message}",this.currentLevel=Hi[this.level.toUpperCase()]??Hi.INFO,this.loggingManager=e.loggingManager,this.console=e.console||console,this.component&&this.loggingManager&&this.loggingManager.registerComponent(this.component)}shouldLog(e){if(e.toUpperCase()==="ERROR")return this.enabled&&Hi[e.toUpperCase()]<=this.currentLevel;const n=!this.component||!this.loggingManager||this.loggingManager.isComponentEnabled(this.component);return this.enabled&&n&&Hi[e.toUpperCase()]<=this.currentLevel}redactArgs(e){return this.redactSecrets?e.map(n=>this.redactValue(n)):e}redactValue(e){if(typeof e=="string")return e.replace(/\b[a-zA-Z0-9_-]{20,}\b/g,"[REDACTED]");if(Array.isArray(e))return e.map(n=>this.redactValue(n));if(e&&typeof e=="object"&&e.constructor===Object){const n={};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=this.redactValue(e[i]));return n}return e}getTimestamp(){return new Date().toISOString()}formatMessage(e,...n){const i=this.showTimestamp?this.getTimestamp():"",r=this.prefix;let o=this.format.replace("{timestamp}",i).replace("{prefix}",r).replace("{message}",e);this.showTimestamp||(o=o.replace(/\s*\[?\]\s*/g," ").replace(/\s+/g," ").trim());const s=this.redactArgs(n);return[o,...s]}error(e,...n){this.shouldLog("error")&&this.console.error(...this.formatMessage(e,...n))}warn(e,...n){this.shouldLog("warn")&&this.console.warn(...this.formatMessage(e,...n))}info(e,...n){this.shouldLog("info")&&this.console.info(...this.formatMessage(e,...n))}log(e,...n){this.shouldLog("info")&&this.console.log(...this.formatMessage(e,...n))}debug(e,...n){this.shouldLog("debug")&&this.console.debug(...this.formatMessage(e,...n))}trace(e,...n){if(this.shouldLog("trace")){const i=this.redactSecrets;this.redactSecrets=!0;const r=this.formatMessage(e,...n);this.redactSecrets=i,this.console.trace(...r)}}table(e,n){if(this.shouldLog("info")){const i=this.prefix?`[${this.prefix}]`:"";i&&this.console.log(i),this.console.table(e,n)}}group(e){this.shouldLog("info")&&this.console.group(...this.formatMessage(e))}groupCollapsed(e){this.shouldLog("info")&&this.console.groupCollapsed(...this.formatMessage(e))}groupEnd(){this.shouldLog("info")&&this.console.groupEnd()}time(e){this.shouldLog("debug")&&this.console.time(this.prefix?`[${this.prefix}] ${e}`:e)}timeEnd(e){this.shouldLog("debug")&&this.console.timeEnd(this.prefix?`[${this.prefix}] ${e}`:e)}setLevel(e){this.level=e,this.currentLevel=Hi[e.toUpperCase()]??Hi.INFO}enable(){this.enabled=!0}disable(){this.enabled=!1}isEnabled(){return this.enabled}},fw=class{constructor(e={}){this.storage=e.storage,this.console=e.console||console,this.allowedComponents=new Set,this.globalEnabled=!0,this.allowAll=!1,this.registeredComponents=new Set,this.storage&&this.loadFromStorage()}enable(...e){e.forEach(n=>this.allowedComponents.add(n.toLowerCase())),this.saveToStorage(),this.console.log(" Logging enabled for:",e.join(", "))}disable(...e){e.forEach(n=>this.allowedComponents.delete(n.toLowerCase())),this.saveToStorage(),this.console.log(" Logging disabled for:",e.join(", "))}enableAll(){this.allowAll=!0,this.saveToStorage(),this.console.log(" Logging enabled for ALL components")}disableAll(){this.allowAll=!1,this.allowedComponents.clear(),this.saveToStorage(),this.console.log(" Logging disabled for ALL components (errors still show)")}status(){this.console.log(" Logging Status:"),this.console.log("  Global enabled:",this.globalEnabled),this.console.log("  Allow all:",this.allowAll),this.console.log("  Enabled components:",Array.from(this.allowedComponents).join(", ")||"none")}listComponents(){this.console.log(" Available components to filter:"),Array.from(this.registeredComponents).sort().forEach(e=>{const n=this.isComponentEnabled(e);this.console.log(`  ${n?"":""} ${e}`)})}isComponentEnabled(e){return this.globalEnabled?this.allowAll?!0:this.allowedComponents.has(e.toLowerCase()):!1}registerComponent(e){this.registeredComponents.add(e)}saveToStorage(){if(this.storage)try{const e={allowedComponents:Array.from(this.allowedComponents),allowAll:this.allowAll,globalEnabled:this.globalEnabled};this.storage.setItem(nh,JSON.stringify(e))}catch{}}loadFromStorage(){if(this.storage)try{const e=this.storage.getItem(nh),n=JSON.parse(e||"{}");this.allowedComponents=new Set(n.allowedComponents||[]),this.allowAll=n.allowAll||!1,this.globalEnabled=n.globalEnabled!==!1,e||(this.allowedComponents=new Set(ih))}catch{this.allowedComponents=new Set(ih)}}},Dp=class{getItem(e){throw new Error("StorageAdapter.getItem must be implemented")}setItem(e,n){throw new Error("StorageAdapter.setItem must be implemented")}removeItem(e){throw new Error("StorageAdapter.removeItem must be implemented")}},gw=class extends Dp{constructor(){super(),this.storage=new Map}getItem(e){return this.storage.get(e)??null}setItem(e,n){this.storage.set(e,n)}removeItem(e){this.storage.delete(e)}},pw=class extends Dp{getItem(e){try{return localStorage.getItem(e)}catch{return null}}setItem(e,n){try{localStorage.setItem(e,n)}catch{}}removeItem(e){try{localStorage.removeItem(e)}catch{}}};function mw(){return typeof localStorage<"u"?new pw:new gw}let Mp=class{getGlobal(){throw new Error("GlobalAdapter.getGlobal must be implemented")}setGlobalProperty(e,n){throw new Error("GlobalAdapter.setGlobalProperty must be implemented")}hasGlobalProperty(e){throw new Error("GlobalAdapter.hasGlobalProperty must be implemented")}},yw=class extends Mp{getGlobal(){return window}setGlobalProperty(e,n){window[e]=n}hasGlobalProperty(e){return e in window}},vw=class extends Mp{getGlobal(){return globalThis}setGlobalProperty(e,n){globalThis[e]=n}hasGlobalProperty(e){return e in globalThis}};function bw(){return typeof window<"u"?new yw:new vw}const _w=mw(),rh=bw(),Ai=new fw({storage:_w,console});if(typeof window<"u"){const t={enable:(...e)=>Ai.enable(...e),disable:(...e)=>Ai.disable(...e),enableAll:()=>Ai.enableAll(),disableAll:()=>Ai.disableAll(),status:()=>Ai.status(),list:()=>Ai.listComponents()};rh.setGlobalProperty("logFilter",t),rh.setGlobalProperty("loggerjs",t)}function Et(t={}){return new hw({...t,loggingManager:Ai})}const ww=Et({prefix:"i18n",level:"info"}),oc={en:{nav:{home:"Home",showcase:"Features Showcase",explorer:"Network Explorer",degrees:"Degrees",family:"Family Tree",docs:"Documentation"},common:{loading:"Loading...",error:"Error",success:"Success",darkMode:"Toggle dark mode",language:"Language"},footer:{madeBy:"Made with",by:"by",license:"MIT License"},home:{hero:{title:"Modern Network Analysis for JavaScript",subtitle:"Powerful graph theory and network analysis with worker-first architecture",description:"Analyze social networks, family trees, and complex graphs with ease. Fast parallel computation, comprehensive metrics, and beautiful visualizations - all in pure JavaScript.",cta:"Get Started",github:"View on GitHub"},features:[{icon:"",title:"Network Analytics",description:"Compute centrality metrics, clustering coefficients, and graph-level statistics with comprehensive analysis tools"},{icon:"",title:"Interactive Explorer",description:"Explore networks with drag-and-drop, zoom, pan, and real-time analysis of nodes and communities"},{icon:"",title:"Multiple Layouts",description:"11 layout algorithms including force-directed, Kamada-Kawai, spectral, and hierarchical layouts"},{icon:"",title:"Worker Performance",description:"Non-blocking UI with web workers for parallel computation on large graphs with thousands of nodes"},{icon:"",title:"Community Detection",description:"Find clusters and groups in networks using Louvain algorithm with modularity optimization"},{icon:"",title:"Rich Metrics",description:"Degree, betweenness, eigenvector, clustering, closeness, and more statistical features"}],code:{title:"Quick Start Example",snippet:`npm install @guinetik/graph-js

import NetworkStats from '@guinetik/graph-js';

const network = [
  { source: 'Alice', target: 'Bob', weight: 1 },
  { source: 'Bob', target: 'Carol', weight: 2 },
  { source: 'Carol', target: 'Alice', weight: 1 }
];

const analyzer = new NetworkStats({ verbose: true });
const results = await analyzer.analyze(network, ['degree', 'eigenvector']);

console.log(results);
// Analysis runs in workers for optimal performance!`}},docs:{title:"Documentation",subtitle:"Complete API reference for @guinetik/graph-js",sections:{quickStart:"Quick Start",coreClasses:"Core Classes",workers:"Worker Architecture",adapters:"Data Adapters",layouts:"Graph Layouts",community:"Community Detection",examples:"Usage Examples"},quickStart:{title:"Quick Start",install:"Installation",installCmd:"npm install @guinetik/graph-js",basicUsage:"Basic Usage",description:"Get started with network analysis in just a few lines of code."},graph:{title:"Graph",description:"Core graph data structure using adjacency maps for efficient operations.",methods:"Methods",methodsList:{addNode:{name:"addNode(nodeId)",description:"Add a single node to the graph"},addNodesFrom:{name:"addNodesFrom(nodeIds)",description:"Add multiple nodes from an array"},addEdge:{name:"addEdge(source, target, weight?)",description:"Add an edge between two nodes"},removeNode:{name:"removeNode(nodeId)",description:"Remove a node and all its edges"},getNeighbors:{name:"getNeighbors(nodeId)",description:"Get array of neighbor node IDs"},hasEdge:{name:"hasEdge(source, target)",description:"Check if edge exists"},numberOfNodes:{name:"numberOfNodes()",description:"Get total number of nodes"}}},networkStats:{title:"NetworkStats",description:"Main class for analyzing networks and calculating statistical metrics. All computation happens in web workers for optimal performance.",constructor:"Constructor",constructorParams:{verbose:"Enable detailed logging (default: true)",maxWorkers:"Maximum number of workers (default: auto-detect CPU cores)",taskTimeout:"Task timeout in milliseconds (default: 60000)",workerScript:"Custom worker script path for bundlers like Vite"},analyze:{title:"analyze() Method",description:"Compute network statistics for all nodes"},features:{title:"Available Features",degree:"Number of connections per node",eigenvector:"Influence based on connection quality (like PageRank)",eigenvectorLaplacian:"Laplacian eigenvector centrality (for spectral layouts)",betweenness:"Bridge importance between groups",clustering:"How densely connected neighbors are",closeness:"Average distance to all other nodes in the network",cliques:"Number of complete subgraphs containing the node",egoDensity:"Density of the node's immediate neighborhood",modularity:"Community assignment (Louvain algorithm)"}},workers:{title:"Worker Architecture",description:"All computation runs in Web Workers for non-blocking UI and optimal performance. The worker system includes intelligent affinity routing for JIT optimization, inspired by samsantosb/BeeThreads.",components:{title:"Components",workerManager:{name:"WorkerManager",description:"Singleton manager that initializes and routes tasks to workers"},workerPool:{name:"WorkerPool",description:"Pool of workers that execute tasks with automatic load balancing"},workerAdapter:{name:"WorkerAdapter",description:"Cross-platform adapter for Web Workers (browser) and Worker Threads (Node.js)"}},affinity:{title:"Worker Affinity System",description:"Routes repeated algorithm calls to the same worker, leveraging JavaScript JIT compilation for 10-30% faster repeated operations.",howItWorks:"How It Works",howItWorksSteps:["When a worker executes an algorithm, the function is JIT-compiled","The worker tracks which functions it has cached","Future calls for the same algorithm are routed to that worker",'The "hot" JIT-optimized code path is reused'],selectionTitle:"Selection Priority",selectionSteps:["Affinity Match: Find worker that previously ran the same algorithm","Least Loaded: Select worker with fewest tasks executed","FIFO Fallback: If affinity disabled, use first-available"]},config:{title:"Configuration",options:{maxWorkers:"Maximum workers (default: auto-detect CPU cores)",enableAffinity:"Enable worker affinity routing (default: true)",affinityCacheLimit:"Max cached functions per worker (default: 50)",taskTimeout:"Task timeout in milliseconds (default: 300000)"}},monitoring:{title:"Monitoring",description:"Get real-time statistics about worker pool and affinity performance"}},adapters:{title:"Data Adapters",description:"Convert between various graph formats and the standard GraphData format. All adapters use static methods.",csv:{title:"CSVAdapter",description:"Load and convert CSV files to graph format. Supports edge lists and node property files.",methods:"Methods",methodsList:{fromEdgeList:{name:"fromEdgeList(csvText, options)",description:'Parse CSV edge list. Options: header (default: true), delimiter (default: ","), weighted (default: true)',returns:"Returns GraphData with nodes and edges"},fromNodes:{name:"fromNodes(csvText, options)",description:"Parse CSV node properties",returns:"Returns array of NodeData objects"},loadFromURL:{name:"loadFromURL(edgeURL, nodeURL, options)",description:"Async method to fetch and parse CSV from URLs",returns:"Returns Promise<GraphData>"},toEdgeList:{name:"toEdgeList(graphData, options)",description:"Export edges to CSV string",returns:"Returns CSV string"},toNodes:{name:"toNodes(graphData, options)",description:"Export nodes to CSV string",returns:"Returns CSV string"}}},json:{title:"JSONAdapter",description:"Support for D3.js, Cytoscape, and other JSON formats. Auto-detects format.",methods:"Methods",methodsList:{fromD3:{name:"fromD3(d3Data)",description:'Convert D3.js force-directed format (with "links") to GraphData',returns:"Returns GraphData"},fromCytoscape:{name:"fromCytoscape(cytoData)",description:"Convert Cytoscape.js format to GraphData",returns:"Returns GraphData"},fromFormat:{name:"fromFormat(jsonData)",description:"Auto-detect format (GraphData, D3, Cytoscape, NetworkX)",returns:"Returns GraphData"},toD3:{name:"toD3(graphData)",description:'Convert to D3.js format with "links" property',returns:"Returns D3GraphData"},toCytoscape:{name:"toCytoscape(graphData)",description:"Convert to Cytoscape.js format",returns:"Returns CytoscapeData"},loadFromURL:{name:"loadFromURL(url)",description:"Async method to fetch and parse JSON",returns:"Returns Promise<GraphData>"}}},networkx:{title:"NetworkXAdapter",description:"Python NetworkX interoperability. Supports node-link and adjacency formats.",methods:"Methods",methodsList:{fromNodeLink:{name:"fromNodeLink(nxData)",description:"Convert NetworkX node-link format (most common)",returns:"Returns GraphData"},fromAdjacency:{name:"fromAdjacency(nxData)",description:"Convert NetworkX adjacency format",returns:"Returns GraphData"},toNodeLink:{name:"toNodeLink(graphData, options)",description:"Convert to node-link format. Options: directed (default: false), multigraph (default: false)",returns:"Returns NetworkX node-link data"},toAdjacency:{name:"toAdjacency(graphData)",description:"Convert to adjacency format",returns:"Returns array of node objects with adjacency lists"}}}},layouts:{title:"Graph Layouts",description:"Position nodes in 2D space using various algorithms. All layouts use async computation in Web Workers for optimal performance.",note:"All layout methods are async and return Promise<Object> with node positions {nodeId: {x, y}}",forceDirected:{title:"ForceDirectedLayout",description:"Spring-electrical model using Fruchterman-Reingold algorithm. Good for general-purpose network visualization.",complexity:"Time Complexity: O(iterations  V)",bestFor:"Best for: General networks, social graphs",constructor:"new ForceDirectedLayout(graph, options)",options:{iterations:"Number of simulation steps (default: 50)",k:"Optimal distance between nodes (default: auto-calculated)",scale:"Scale factor for positions (default: 1)",center:"Center point {x, y} (default: {x:0, y:0})",initialPositions:"Starting positions (default: random)",threshold:"Convergence threshold (default: 1e-4)"}},kamadaKawai:{title:"KamadaKawaiLayout",description:"Energy minimization based on all-pairs shortest paths. Produces aesthetically pleasing layouts.",complexity:"Time Complexity: O(V + iterations  V)",bestFor:"Best for: Small-medium graphs (<1000 nodes), trees, planar graphs",constructor:"new KamadaKawaiLayout(graph, options)",options:{iterations:"Maximum iterations (default: 1000)",scale:"Scale factor (default: 1)",center:"Center point (default: {x:0, y:0})",initialPositions:"Starting positions (default: circular)",threshold:"Convergence threshold (default: 1e-4)",K:"Spring constant scaling (default: auto)"}},spectral:{title:"SpectralLayout",description:"Uses Laplacian eigenvectors as coordinates. Excellent for visualizing community structure.",complexity:"Time Complexity: O(V) using pre-computed eigenvectors",bestFor:"Best for: Community visualization, graph topology",requires:'Requires: "eigenvector-laplacian" statistic must be pre-computed',constructor:"new SpectralLayout(graph, options)",options:{scale:"Scale factor (default: 100)",center:"Center point (default: {x:0, y:0})"}},circular:{title:"CircularLayout",description:"Positions nodes in a circle. Simple and clean for small networks.",complexity:"Time Complexity: O(V)",bestFor:"Best for: Small networks, cycle graphs",constructor:"new CircularLayout(graph, options)",options:{scale:"Circle radius (default: 100)",center:"Center point (default: {x:0, y:0})",sortBy:"Optional sort function for node order"}},shell:{title:"ShellLayout",description:"Concentric circles based on node degree. High-degree nodes in center.",complexity:"Time Complexity: O(V)",bestFor:"Best for: Hub-and-spoke networks, star graphs",requires:'Requires: "degree" statistic must be pre-computed',constructor:"new ShellLayout(graph, options)"},spiral:{title:"SpiralLayout",description:"Archimedean spiral pattern. Aesthetically pleasing for ordered data.",complexity:"Time Complexity: O(V)",bestFor:"Best for: Sequential or temporal networks",constructor:"new SpiralLayout(graph, options)"},bfs:{title:"BFSLayout",description:"Breadth-first search layers. Shows distance from root node.",complexity:"Time Complexity: O(V + E)",bestFor:"Best for: Trees, hierarchies, showing propagation",constructor:"new BFSLayout(graph, options)"},bipartite:{title:"BipartiteLayout",description:"Two-layer layout for bipartite graphs.",complexity:"Time Complexity: O(V)",bestFor:"Best for: Two-mode networks, actor-event data",constructor:"new BipartiteLayout(graph, options)"},random:{title:"RandomLayout",description:"Random positions. Useful as starting point for other layouts.",complexity:"Time Complexity: O(V)",bestFor:"Best for: Initial positions, testing",constructor:"new RandomLayout(graph, options)"},usage:"Usage Pattern",usageDescription:"All layouts follow the same async pattern"},community:{title:"Community Detection",description:"Detect communities (clusters) in networks using various algorithms. All computation runs in Web Workers.",mainClass:{title:"CommunityDetection",description:"Main class for detecting communities in graphs",constructor:"new CommunityDetection(graph)",methods:{detectCommunities:{name:"detectCommunities(algorithm, options)",description:'Detect communities using specified algorithm. Algorithm can be instance or string ("louvain")',returns:"Returns Promise<CommunityResult> with communities, modularity, numCommunities"},calculateModularity:{name:"calculateModularity(communities)",description:"Calculate modularity score for a partition",returns:"Returns number (-1 to 1, higher is better)"}},staticMethods:{detect:{name:"CommunityDetection.detect(graphData, algorithm, options)",description:"Convenience method for direct detection from GraphData",returns:"Returns Promise<CommunityResult>"},getNodesInCommunity:{name:"CommunityDetection.getNodesInCommunity(communities, communityId)",description:"Get array of node IDs in a specific community"},getCommunityGroups:{name:"CommunityDetection.getCommunityGroups(communities)",description:"Get object mapping communityId to array of node IDs"}}},louvain:{title:"LouvainAlgorithm",description:"Fast modularity optimization using the Louvain method. The most popular community detection algorithm.",complexity:"Time Complexity: O(V log V)",bestFor:"Best for: Large networks, general-purpose community detection",constructor:"new LouvainAlgorithm(options)",options:{resolution:"Resolution parameter for modularity (default: 1.0). Higher values find smaller communities.",maxIterations:"Maximum iterations (default: 100)"}},result:{title:"CommunityResult",description:"Result object returned by community detection",properties:{communities:"Object mapping nodeId to communityId (number)",modularity:"Modularity score (-1 to 1, typically 0.3-0.7 for good partitions)",numCommunities:"Number of communities found",algorithm:"Algorithm name used",metadata:"Optional additional information"}},customAlgorithm:{title:"Custom Algorithms",description:"Extend CommunityAlgorithm base class to create your own algorithms",note:"Implement the detect() method and configure worker module path"}},examples:{title:"Usage Examples",description:"Complete code examples for common use cases",basic:{title:"Basic Network Analysis",description:"Analyze a simple network and compute centrality metrics"},csv:{title:"Loading CSV Data",description:"Import network data from CSV files and analyze"},json:{title:"Working with JSON",description:"Convert between JSON formats (D3, Cytoscape, NetworkX)"},layout:{title:"Applying Layouts",description:"Position nodes using layout algorithms"},community:{title:"Community Detection",description:"Find communities using Louvain algorithm"},complete:{title:"Complete Workflow",description:"End-to-end example: load data, analyze, layout, detect communities"}}},showcase:{title:"Features Showcase",description:"Explore all the features of @guinetik/graph-js",header:{title:" Interactive Network Graph",subtitle:"Explore network analysis in real-time. Add nodes, remove them, and watch the graph update dynamically."},whatIs:{title:"What is this?",description:"This interactive visualization demonstrates <strong>network analysis</strong>. Node size represents centrality: larger nodes are more influential in the network."},status:{title:"Status",ready:"Ready for operations",hover:"Hover over nodes to see details"},controls:{title:"Controls",addRandom:"Add a random node connected to a random existing node",addToSelected:"Add a node connected to {name}",selectNodeFirst:"Select a node first",removeRandom:"Remove a random node"},dataLoading:{title:"Load Dataset",choose:"Choose Dataset:",default:"Default Inline (15 nodes)",karate:"Karate Club JSON (34 nodes)",miserables:"Les Misrables CSV (77 nodes)",kevinbacon:"Kevin Bacon CSV (128 nodes)",loadButton:" Load Dataset",loading:" Loading..."},networkAnalysis:{title:" Network Analysis (Node Sizes)",description:"<strong>Uses @guinetik/graph-js:</strong> Computes centrality metrics in web workers for optimal performance.",metricsTitle:"Metrics to Calculate:",selectAll:"Select All",unselectAll:"Unselect All",degreeCentrality:"Degree Centrality",degreeDescription:"Counts the number of direct connections to a node. The simplest centrality measure - identifies hubs and highly connected nodes.",betweennessCentrality:"Betweenness Centrality",betweennessDescription:"Measures how often a node appears on shortest paths between other nodes. Identifies bridge nodes and information bottlenecks.",clusteringCoefficient:"Clustering Coefficient",clusteringDescription:"Measures how connected a node's neighbors are to each other. Detects tightly-knit groups and local community structure.",eigenvectorCentrality:"Eigenvector Centrality",eigenvectorDescription:"Measures node importance based on the importance of its neighbors. Identifies influential nodes connected to other influential nodes.",pageRankCentrality:"PageRank Centrality",pagerankDescription:"Similar to eigenvector centrality, measures node importance based on connections. Popularized by Google's PageRank algorithm.",cliqueCount:"Clique Count",cliquesDescription:"Counts how many maximal cliques (complete subgraphs) a node belongs to. Identifies nodes in dense, tightly-knit communities. Warning: computationally expensive.",closenessCentrality:"Closeness Centrality",closenessDescription:"Measures how close a node is to all other nodes based on average shortest path length. Identifies nodes that can quickly reach the entire network.",egoDensity:"Ego Density",egoDensityDescription:"Measures the density of connections among a node's immediate neighbors. Quantifies local cohesion around a node.",eigenvectorLaplacian:"Eigenvector (Laplacian) - for Spectral layout",eigenvectorLaplacianDescription:"Laplacian eigenvector centrality used for spectral graph analysis. Useful for spectral layout algorithms.",nodeSizeLabel:"Node Size Based On:",selectMetric:"-- Select a metric --",analyzeButton:" Analyze Network",analyzingButton:" Analyzing...",degreeName:"Degree",betweennessName:"Betweenness",clusteringName:"Clustering",eigenvectorName:"Eigenvector",pageRankName:"PageRank",cliquesName:"Cliques",closenessName:"Closeness",egoDensityName:"Ego Density",highlightCliqueEdges:" Highlight Clique Edges",cliqueEdgesDescription:"Color edges that are part of triangles/cliques"},layoutAlgorithm:{title:"Layout Algorithm"},communityDetection:{title:" Community Detection",communitiesFound:"Communities Found:",modularity:"Modularity:",nodeColorsAssignments:"Node colors represent community assignments"},instructions:{title:" How to interact",dragNodes:" <strong>Drag nodes</strong> to reposition them",scroll:" <strong>Scroll</strong> to zoom in/out",dragBackground:" <strong>Drag background</strong> to pan",hoverNodes:" <strong>Hover nodes</strong> to see detailed information",nodeSize:" <strong>Node size</strong> = centrality",color:" <strong>Color</strong> = group/community"},buttons:{add:"Add",toSelected:"To Selected",remove:"Remove"},messages:{loadingGraph:"Loading graph...",loadingDataset:"Loading {dataset} dataset...",loadingDatasetName:"Loading {name} dataset...",analyzing:"Analyzing network using workers...",applyingLayout:"Applying {layout} layout...",detectingCommunities:"Detecting communities using {algorithm}...",loadedDataset:" Loaded {name} dataset ({nodes} nodes, {edges} edges)",failedToLoadDataset:" Failed to load dataset: {error}",addedNode:' Added node "{nodeId}" connected to "{connectedTo}"',noNodeSelected:" No node selected. Click on a node to select it first.",noNodesToRemove:" No nodes to remove",removedNode:' Removed node "{nodeId}"',analysisComplete:" Analysis complete! Computed {count} node metrics using web workers",analysisFailed:" Analysis failed: {error}",usingD3Physics:" Using D3 physics simulation (no layout algorithm)",appliedLayout:" Applied {layout} layout algorithm",layoutFailed:" Layout failed: {error}",foundCommunities:"Found {count} communities (modularity: {modularity})",communityDetectionFailed:"Community detection failed",graphNotInitialized:"Graph not initialized",graphIsEmpty:"Graph is empty"},layoutPicker:{chooseLayout:"Choose Layout:",applyButton:" Apply Layout",applyingButton:" Applying..."},communityPicker:{chooseAlgorithm:"Choose Algorithm:",detectButton:" Detect Communities",detectingButton:" Detecting..."}},explorer:{title:"Network Explorer",description:"Interactive network analysis and visualization",header:{title:" Network Explorer",subtitle:"Explore sample networks and upload your own files. Supports CSV, JSON, and NetworkX formats."},renderer:{title:"Graph Renderer",d3:"D3.js (SVG)",sigma:"Sigma.js (WebGL)",d3Description:"SVG-based rendering. Best for small-medium graphs (<1000 nodes). Supports rich interactions.",sigmaDescription:"WebGL-based rendering. Optimized for large graphs (10k+ nodes). Hardware-accelerated."},parallelComputation:{title:" Parallel Computation Demo",description:"This demo showcases <strong>Web Workers</strong> for parallel network analysis. Large networks are processed across multiple CPU cores for faster computation.",workersSupported:" Workers Supported",workersNotSupported:" Workers Not Supported",cores:"cores"},status:{title:"Status",ready:"Ready for operations",loadNetwork:"Load a network to begin"},dataLoading:{title:"Data Loading",sampleNetworks:" Sample Networks",uploadFile:" Upload File",chooseNetwork:"Choose Network:",chooseCity:"-- Choose a network --",caruaru:"Caruaru (~130 edges, small)",rj:"Rio de Janeiro (~1,900 edges, medium)",niteroi:"Niteri (~18,500 edges, large)",karate:"Karate Club (34 nodes, 78 edges)",miserables:"Les Misrables (77 nodes, 254 edges)",kevinbacon:"Kevin Bacon (128 nodes, 128 edges)",sixdegrees:"6 Degrees of Kevin Bacon (3,610 nodes, 5,514 edges)",loadNetwork:" Load Network",loading:" Loading...",fileFormat:"File Format:",edgesCSV:"Edges CSV (Required):",nodesCSV:"Nodes CSV (Optional):",edgeCSVFormat:"<strong>Edge CSV format:</strong> source,target,weight<br><strong>Node CSV format:</strong> id,group,label,...",jsonFile:"JSON File:",networkxFile:"NetworkX JSON File:",jsonSupports:"Supports: Standard (nodes/edges), D3 (nodes/links), Cytoscape, or raw edge list array",networkxSupports:"Supports: node-link format, adjacency format",loadUploadedFile:" Load Uploaded File",formatJSON:"JSON (nodes/edges, D3, Cytoscape)",formatCSV:"CSV (edge list)",formatNetworkX:"NetworkX (node-link, adjacency)"},networkStats:{title:"Network Statistics",nodes:"Nodes",edges:"Edges",avgDegree:"Avg Degree",analysisTime:"Analysis Time",communities:"Communities",modularity:"Modularity",usingParallel:" Using parallel computation",workersActive:"workers active",singleThreaded:" Single-threaded mode",networkTooSmall:"Network too small for workers"},networkAnalysis:{title:" Network Analysis (Node Sizes)"},layoutAlgorithm:{title:" Layout Algorithm",requiresAnalysis:"requires analysis"},graphStats:{title:" Graph Statistics",density:"Density",diameter:"Diameter",avgClustering:"Avg Clustering",avgPathLength:"Avg Path Length",avgDegree:"Avg Degree",connectedComponents:"Components",calculated:"Calculated alongside node metrics"},communityDetection:{title:" Community Detection (Node Colors)",algorithm:"Algorithm:"},communityResults:{title:" Community Detection Results",communitiesFound:"Communities Found:",modularityScore:"Modularity Score:",computationTime:"Computation Time:",algorithm:"Algorithm:",nodeColorsRepresent:"Node colors represent their community assignments"},instructions:{title:" How to interact",dragNodes:" <strong>Drag nodes</strong> to reposition them",scroll:" <strong>Scroll</strong> to zoom in/out",dragBackground:" <strong>Drag background</strong> to pan",hoverNodes:" <strong>Hover nodes</strong> to see detailed information",nodeSize:" <strong>Node size</strong> = selected metric",color:" <strong>Color</strong> = community"},messages:{loadingNetworkData:"Loading network data...",loadedNetwork:" Loaded {name} ({nodes} nodes, {edges} edges)",failedToLoadNetwork:" Failed to load network: {error}",loadingUploadedFile:"Loading uploaded file...",loadedFile:" Loaded {fileName} ({nodes} nodes, {edges} edges)",failedToLoadFile:" Failed to load file: {error}",analyzingNetwork:"Analyzing network using workers...",analysisComplete:" Analysis complete! Computed {count} node metrics",analysisFailed:" Analysis failed: {error}",usingD3Physics:" Using D3 physics simulation (no layout algorithm)",applyingLayout:"Applying {layout} layout...",appliedLayout:" Applied {layout} layout algorithm",layoutFailed:" Layout failed: {error}",graphNotInitialized:"Graph not initialized",graphIsEmpty:"Graph is empty",detectingCommunities:"Detecting communities using {algorithm}...",foundCommunities:"Found {count} communities (modularity: {modularity})",communityDetectionFailed:"Community detection failed"}},family:{title:"Family Tree",subtitle:"Build and visualize your family tree interactively",description:"Visualize family relationships",header:{title:" Family Tree Builder",subtitle:"Build and visualize your family tree interactively. Start with yourself and add relatives to see the network grow."},whatIs:{title:"What is this?",description:"A network visualization of family relationships. Each color represents a different relationship type. The tree auto-saves to your browser's storage every 30 seconds."},status:{title:"Status",ready:"Ready for operations",clickToAdd:"Click buttons to add relatives"},addRelatives:{title:"Add Relatives",parents:" Parents",grandparents:" Grandparents",sibling:" Sibling",nieceNephew:" Niece/Nephew",uncleAunt:" Uncle/Aunt",cousin:" Cousin",partner:" Partner",child:" Child"},actions:{title:"Actions",saveFamily:" Save Family",saveImage:" Save as Image",lockGraph:" Lock Graph",unlockGraph:" Unlock Graph",undo:" Undo",redo:" Redo",resetTree:" Reset Tree"},renderNodes:{title:" Render Nodes",colors:" Colors",avatars:" Avatars",colorsDesc:"Nodes colored by relationship type.",avatarsDesc:"Nodes shown as emoji avatars (if set)."},networkAnalysis:{title:" Network Analysis (Node Sizes)"},relationshipColors:{title:"Relationship Colors",you:"You",parents:"Parents",siblings:"Siblings",unclesAunts:"Uncles/Aunts",cousins:"Cousins",grandparents:"Grandparents",nieces:"Nieces/Nephews",partners:"Partners/Spouses",children:"Children"},layoutAlgorithm:{title:" Layout Algorithm"},instructions:{title:" How to use",dragNodes:" <strong>Drag nodes</strong> to arrange your tree",autoSaves:" <strong>Auto-saves</strong> every 30 seconds",lock:" <strong>Lock</strong> to freeze positions",download:" <strong>Download</strong> as PNG image",analyze:" <strong>Analyze</strong> to size nodes by centrality metrics",layouts:" <strong>Apply layouts</strong> to visualize your tree differently",undoRedo:" <strong>Undo/Redo</strong> with buttons or Ctrl+Z / Ctrl+Y (up to 10 actions)"},dialogs:{selectOption:"Select an option",addParents:"Add Parents",addSibling:"Add Sibling",addGrandparents:"Add Grandparents",addUncleAunt:"Add Uncle/Aunt",addCousin:"Add Cousin",addChild:"Add Child",addNieceNephew:"Add Niece/Nephew",addPartner:"Add Partner/Spouse",fields:{motherName:"Mother Name",motherAvatar:"Mother Avatar (optional)",fatherName:"Father Name",fatherAvatar:"Father Avatar (optional)",siblingName:"Sibling Name",gender:"Gender",avatar:"Avatar (optional)",parentsSide:"Parent's Side",grandmotherName:"Grandmother Name",grandmotherAvatar:"Grandmother Avatar (optional)",grandfatherName:"Grandfather Name",grandfatherAvatar:"Grandfather Avatar (optional)",name:"Name",uncleAuntField:"Uncle/Aunt",sibling:"Sibling",parent:"Parent",partnerOf:"Partner Of"},genderOptions:{male:"Male",female:"Female",other:"Other"},placeholders:{mother:" Type an emoji",father:" Type an emoji",avatar:" Type an emoji",grandmother:" Type an emoji",grandfather:" Type an emoji"}},operations:{errors:{atLeastOneParent:"At least one parent name is required",onlyOneParentSlot:"Only one parent slot available. Added only the mother.",siblingNameRequired:"Sibling name is required",genderRequired:"Gender is required",graphNotInitialized:"Graph not initialized",failedToAddSibling:"Failed to add sibling",parentNotFound:"Parent not found",atLeastOneGrandparent:"At least one grandparent name is required",onlyOneGrandparentSlot:"Only one grandparent slot available for this parent. Added only the grandmother.",failedToAddGrandparents:"Failed to add grandparents",uncleAuntNameRequired:"Uncle/aunt name is required",failedToAddUncleAunt:"Failed to add uncle/aunt",cousinNameRequired:"Cousin name is required",failedToAddCousin:"Failed to add cousin",childNameRequired:"Child name is required",failedToAddChild:"Failed to add child",nieceNephewNameRequired:"Niece/nephew name is required",failedToAddNieceNephew:"Failed to add niece/nephew",partnerNameRequired:"Partner name is required",personNotFound:"Person not found",alreadyHasPartner:"already has a partner!"},success:{parentAdded:"Parent(s) added successfully",siblingAdded:"Sibling added successfully",grandparentsAdded:"Grandparent(s) added successfully",uncleAuntAdded:"Uncle/Aunt added successfully",cousinAdded:"Cousin added successfully",childAdded:"Child added successfully",nieceNephewAdded:"Niece/Nephew added successfully",partnerAdded:"Partner added successfully"},validation:{noParents:"You must add parents first before adding grandparents",noUnclesAunts:"You must add uncles/aunts first before adding cousins",noSiblings:"You must add siblings first before adding nieces/nephews",maxParents:"You already have 2 parents added. You cannot add more than 2 parents.",notEligibleForPartner:"No eligible people available for partners"}},storage:{saved:"Family tree saved!",loaded:"Family tree loaded",reset:"Family tree reset",error:"Error saving family tree"},history:{undone:"Action undone",redone:"Action redone",nothingToUndo:"Nothing to undo",nothingToRedo:"Nothing to redo"},relationships:{yourPartner:"Your Partner/Spouse",partnerOf:"'s Partner",yourChild:"Your child",siblingChild:"'s child (your niece/nephew)",cousinChild:"'s child (your cousin's child)",grandchild:"'s child (your grandchild)",siblingInLaw:"'s partner (your sibling-in-law)",childInLaw:"'s partner (your child-in-law)"},dropdownOptions:{yourChild:"Your child",childTemplate:"{name}'s child",nieceNephewTemplate:"{name}'s child (your niece/nephew)",cousinChildTemplate:"{name}'s child (your cousin's child)",grandchildTemplate:"{name}'s child (your grandchild)",partnerTemplate:"{name}'s partner",siblingPartnerTemplate:"{name}'s partner (your sibling-in-law)",childPartnerTemplate:"{name}'s partner (your child-in-law)",parentSideTemplate:"{name}'s sibling",uncleAuntChildTemplate:"{name}'s child",siblingChildTemplate:"{name}'s child"}},degrees:{header:{title:"6 Degrees of Kevin Bacon",subtitle:'Explore the famous "small world" network connecting Hollywood actors through their movie collaborations'},whatIs:{title:"What is this?",description:`The <strong>Six Degrees of Kevin Bacon</strong> is a parlor game based on the "six degrees of separation" concept. It posits that any actor can be linked to Kevin Bacon through their film roles in six steps or fewer. This visualization shows <strong>2 degrees of separation</strong> - Kevin Bacon's co-stars and their co-stars.`},status:{title:"Status",ready:"Network loaded and ready"},stats:{title:"Network Statistics",nodes:"Total Nodes",edges:"Total Edges",movies:"Movies",actors:"Actors"},legend:{title:"Legend",movies:"Movies",actors:"Actors",kevinBacon:"Kevin Bacon",center:"Center of the network (0 degrees)",degree1:"1 Degree",degree1Desc:"Direct co-stars of Kevin Bacon",degree2:"2 Degrees",degree2Desc:"Co-stars of Kevin Bacon's co-stars"},baconFinder:{title:"Find Bacon Number",placeholder:"Search actor or movie..."},filter:{title:"Filter Nodes",all:"All",actors:"Actors Only",movies:"Movies Only"},layout:{title:"Layout Algorithm"},analysis:{title:"Network Analysis"},instructions:{title:"How to use",hover:"<strong>Hover</strong> over nodes to see actor/movie details",drag:"<strong>Drag</strong> nodes to rearrange the network",zoom:"<strong>Scroll</strong> to zoom in/out"}}},pt:{nav:{home:"Incio",showcase:"Demonstrao",explorer:"Explorador de Redes",degrees:"Graus",family:"rvore Genealgica",docs:"Documentao"},common:{loading:"Carregando...",error:"Erro",success:"Sucesso",darkMode:"Alternar modo escuro",language:"Idioma"},footer:{madeBy:"Feito com",by:"por",license:"Licena MIT"},showcase:{title:"Demonstrao",description:"Explore todos os recursos de @guinetik/graph-js",header:{title:" Grafo de Rede Interativo",subtitle:"Explore anlise de redes em tempo real. Adicione ns, remova-os e veja o grafo se atualizar dinamicamente."},whatIs:{title:"O que  isto?",description:"Esta visualizao interativa demonstra <strong>anlise de redes</strong>. O tamanho do n representa centralidade: ns maiores so mais influentes na rede."},status:{title:"Status",ready:"Pronto para operaes",hover:"Passe o mouse sobre ns para ver detalhes"},controls:{title:"Controles",addRandom:"Adicionar um n aleatrio conectado a um n existente aleatrio",addToSelected:"Adicionar um n conectado a {name}",selectNodeFirst:"Selecione um n primeiro",removeRandom:"Remover um n aleatrio"},dataLoading:{title:"Carregar Conjunto de Dados",choose:"Escolha um Conjunto de Dados:",default:"Padro Embutido (15 ns)",karate:"Karate Club JSON (34 ns)",miserables:"Os Miserveis CSV (77 ns)",kevinbacon:"Kevin Bacon CSV (128 ns)",loadButton:" Carregar Conjunto de Dados",loading:" Carregando..."},networkAnalysis:{title:" Anlise de Rede (Tamanhos de N)",description:"<strong>Usa @guinetik/graph-js:</strong> Calcula mtricas de centralidade em web workers para desempenho ideal.",metricsTitle:"Mtricas para Calcular:",selectAll:"Selecionar Todas",unselectAll:"Desselecionar Todas",degreeCentrality:"Centralidade de Grau",degreeDescription:"Conta o nmero de conexes diretas de um n. A medida de centralidade mais simples - identifica hubs e ns altamente conectados.",betweennessCentrality:"Centralidade de Intermediao",betweennessDescription:"Mede com que frequncia um n aparece nos caminhos mais curtos entre outros ns. Identifica ns ponte e gargalos de informao.",clusteringCoefficient:"Coeficiente de Agrupamento",clusteringDescription:"Mede o quo conectados os vizinhos de um n esto entre si. Detecta grupos coesos e estrutura de comunidade local.",eigenvectorCentrality:"Centralidade de Eigenvector",eigenvectorDescription:"Mede a importncia de um n com base na importncia de seus vizinhos. Identifica ns influentes conectados a outros ns influentes.",pageRankCentrality:"Centralidade PageRank",pagerankDescription:"Similar  centralidade de eigenvector, mede a importncia do n com base em conexes. Popularizado pelo algoritmo PageRank do Google.",cliqueCount:"Contagem de Cliques",cliquesDescription:"Conta quantos cliques maximais (subgrafos completos) um n pertence. Identifica ns em comunidades densas e coesas. Aviso: computacionalmente caro.",closenessCentrality:"Centralidade de Proximidade",closenessDescription:"Mede o quo prximo um n est de todos os outros ns com base no comprimento mdio do caminho mais curto. Identifica ns que podem alcanar rapidamente toda a rede.",egoDensity:"Densidade Ego",egoDensityDescription:"Mede a densidade de conexes entre os vizinhos imediatos de um n. Quantifica a coeso local ao redor de um n.",eigenvectorLaplacian:"Eigenvector (Laplaciano) - para layout Espectral",eigenvectorLaplacianDescription:"Centralidade de eigenvector Laplaciano usada para anlise espectral de grafos. til para algoritmos de layout espectral.",nodeSizeLabel:"Tamanho do N Baseado Em:",selectMetric:"-- Selecione uma mtrica --",analyzeButton:" Analisar Rede",analyzingButton:" Analisando...",degreeName:"Grau",betweennessName:"Intermediao",clusteringName:"Agrupamento",eigenvectorName:"Eigenvector",pageRankName:"PageRank",cliquesName:"Cliques",closenessName:"Proximidade",egoDensityName:"Densidade Ego",highlightCliqueEdges:" Destacar Arestas de Cliques",cliqueEdgesDescription:"Colorir arestas que fazem parte de tringulos/cliques"},layoutAlgorithm:{title:"Algoritmo de Layout"},communityDetection:{title:" Deteco de Comunidades",communitiesFound:"Comunidades Encontradas:",modularity:"Modularidade:",nodeColorsAssignments:"As cores dos ns representam as atribuies de comunidades"},instructions:{title:" Como interagir",dragNodes:" <strong>Arraste ns</strong> para reposicion-los",scroll:" <strong>Role</strong> para ampliar/reduzir",dragBackground:" <strong>Arraste o fundo</strong> para mover",hoverNodes:" <strong>Passe o mouse sobre ns</strong> para ver informaes detalhadas",nodeSize:" <strong>Tamanho do n</strong> = centralidade",color:" <strong>Cor</strong> = grupo/comunidade"},buttons:{add:"Adicionar",toSelected:"Para Selecionado",remove:"Remover"},messages:{loadingGraph:"Carregando grafo...",loadingDataset:"Carregando conjunto de dados {dataset}...",loadingDatasetName:"Carregando conjunto de dados {name}...",analyzing:"Analisando rede usando workers...",applyingLayout:"Aplicando layout {layout}...",detectingCommunities:"Detectando comunidades usando {algorithm}...",loadedDataset:" Conjunto de dados {name} carregado ({nodes} ns, {edges} arestas)",failedToLoadDataset:" Falha ao carregar conjunto de dados: {error}",addedNode:' N "{nodeId}" adicionado conectado a "{connectedTo}"',noNodeSelected:" Nenhum n selecionado. Clique em um n para selecion-lo primeiro.",noNodesToRemove:" Nenhum n para remover",removedNode:' N "{nodeId}" removido',analysisComplete:" Anlise completa! Computadas {count} mtricas de ns usando web workers",analysisFailed:" Anlise falhou: {error}",usingD3Physics:" Usando simulao de fsica D3 (sem algoritmo de layout)",appliedLayout:" Layout {layout} aplicado",layoutFailed:" Layout falhou: {error}",foundCommunities:"Encontradas {count} comunidades (modularidade: {modularity})",communityDetectionFailed:"Deteco de comunidades falhou",graphNotInitialized:"Grafo no inicializado",graphIsEmpty:"Grafo est vazio"},layoutPicker:{chooseLayout:"Escolha o Layout:",applyButton:" Aplicar Layout",applyingButton:" Aplicando..."},communityPicker:{chooseAlgorithm:"Escolha o Algoritmo:",detectButton:" Detectar Comunidades",detectingButton:" Detectando..."}},home:{hero:{title:"Anlise de Redes Moderna para JavaScript",subtitle:"Teoria de grafos e anlise de redes poderosa com arquitetura worker-first",description:"Analise redes sociais, rvores genealgicas e grafos complexos com facilidade. Computao paralela rpida, mtricas abrangentes e visualizaes bonitas - tudo em JavaScript puro.",cta:"Comear",github:"Ver no GitHub"},features:[{icon:"",title:"Anlise de Redes",description:"Calcule mtricas de centralidade, coeficientes de agrupamento e estatsticas de grafo com ferramentas de anlise abrangentes"},{icon:"",title:"Explorador Interativo",description:"Explore redes com arrastar e soltar, zoom, pan e anlise em tempo real de ns e comunidades"},{icon:"",title:"Mltiplos Layouts",description:"11 algoritmos de layout incluindo force-directed, Kamada-Kawai, spectral e layouts hierrquicos"},{icon:"",title:"Performance com Workers",description:"UI no bloqueante com web workers para computao paralela em grafos grandes com milhares de ns"},{icon:"",title:"Deteco de Comunidades",description:"Encontre clusters e grupos em redes usando algoritmo Louvain com otimizao de modularidade"},{icon:"",title:"Mtricas Ricas",description:"Grau, intermediao, eigenvector, agrupamento, proximidade e mais recursos estatsticos"}],code:{title:"Exemplo de Incio Rpido",snippet:`npm install @guinetik/graph-js

import NetworkStats from '@guinetik/graph-js';

const network = [
  { source: 'Alice', target: 'Bob', weight: 1 },
  { source: 'Bob', target: 'Carol', weight: 2 },
  { source: 'Carol', target: 'Alice', weight: 1 }
];

const analyzer = new NetworkStats({ verbose: true });
const results = await analyzer.analyze(network, ['degree', 'eigenvector']);

console.log(results);
// Anlise executada em workers para desempenho ideal!`}},docs:{title:"Documentao",subtitle:"Referncia completa da API para @guinetik/graph-js",sections:{quickStart:"Incio Rpido",coreClasses:"Classes Principais",workers:"Arquitetura de Workers",adapters:"Adaptadores de Dados",layouts:"Layouts de Grafos",community:"Deteco de Comunidades",examples:"Exemplos de Uso"},quickStart:{title:"Incio Rpido",install:"Instalao",installCmd:"npm install @guinetik/graph-js",basicUsage:"Uso Bsico",description:"Comece com anlise de redes em apenas algumas linhas de cdigo."},graph:{title:"Graph",description:"Estrutura de dados de grafo principal usando mapas de adjacncia.",methods:"Mtodos",methodsList:{addNode:{name:"addNode(nodeId)",description:"Adicionar um n ao grafo"},addNodesFrom:{name:"addNodesFrom(nodeIds)",description:"Adicionar mltiplos ns de um array"},addEdge:{name:"addEdge(source, target, weight?)",description:"Adicionar uma aresta entre dois ns"},removeNode:{name:"removeNode(nodeId)",description:"Remover um n e todas as suas arestas"},getNeighbors:{name:"getNeighbors(nodeId)",description:"Obter array de IDs de ns vizinhos"},hasEdge:{name:"hasEdge(source, target)",description:"Verificar se aresta existe"},numberOfNodes:{name:"numberOfNodes()",description:"Obter nmero total de ns"}}},networkStats:{title:"NetworkStats",description:"Classe principal para analisar redes e calcular mtricas estatsticas. Toda computao acontece em web workers para desempenho ideal.",constructor:"Construtor",constructorParams:{verbose:"Ativar logging detalhado (padro: true)",maxWorkers:"Nmero mximo de workers (padro: detecta ncleos da CPU automaticamente)",taskTimeout:"Timeout de tarefa em milissegundos (padro: 60000)",workerScript:"Caminho personalizado do script worker para bundlers como Vite"},analyze:{title:"Mtodo analyze()",description:"Computar estatsticas de rede para todos os ns"},features:{title:"Recursos Disponveis",degree:"Nmero de conexes por n",eigenvector:"Influncia baseada na qualidade das conexes (como PageRank)",eigenvectorLaplacian:"Centralidade eigenvector Laplaciano (para layouts espectrais)",betweenness:"Importncia de ponte entre grupos",clustering:"Quo densamente conectados esto os vizinhos",closeness:"Distncia mdia para todos os outros ns na rede",cliques:"Nmero de subgrafos completos contendo o n",egoDensity:"Densidade da vizinhana imediata do n",modularity:"Atribuio de comunidade (algoritmo Louvain)"}},workers:{title:"Arquitetura de Workers",description:"Todo o processamento roda em Web Workers para UI no-bloqueante e performance otimizada. O sistema inclui roteamento inteligente de afinidade para otimizao JIT, inspirado pelo BeeThreads.",components:{title:"Componentes",workerManager:{name:"WorkerManager",description:"Gerenciador singleton que inicializa e roteia tarefas para workers"},workerPool:{name:"WorkerPool",description:"Pool de workers que executam tarefas com balanceamento automtico de carga"},workerAdapter:{name:"WorkerAdapter",description:"Adaptador cross-platform para Web Workers (browser) e Worker Threads (Node.js)"}},affinity:{title:"Sistema de Afinidade de Workers",description:"Roteia chamadas repetidas do mesmo algoritmo para o mesmo worker, aproveitando compilao JIT do JavaScript para operaes 10-30% mais rpidas.",howItWorks:"Como Funciona",howItWorksSteps:["Quando um worker executa um algoritmo, a funo  compilada JIT","O worker rastreia quais funes ele tem em cache","Chamadas futuras do mesmo algoritmo so roteadas para esse worker",'O caminho de cdigo otimizado JIT "quente"  reutilizado'],selectionTitle:"Prioridade de Seleo",selectionSteps:["Match de Afinidade: Encontrar worker que j executou o mesmo algoritmo","Menos Carregado: Selecionar worker com menos tarefas executadas","Fallback FIFO: Se afinidade desabilitada, usar primeiro disponvel"]},config:{title:"Configurao",options:{maxWorkers:"Mximo de workers (padro: auto-detectar ncleos CPU)",enableAffinity:"Habilitar roteamento de afinidade (padro: true)",affinityCacheLimit:"Mximo de funes em cache por worker (padro: 50)",taskTimeout:"Timeout de tarefa em milissegundos (padro: 300000)"}},monitoring:{title:"Monitoramento",description:"Obtenha estatsticas em tempo real sobre pool de workers e performance de afinidade"}},adapters:{title:"Adaptadores de Dados",description:"Converter entre vrios formatos de grafo e o formato padro GraphData. Todos os adaptadores usam mtodos estticos.",csv:{title:"CSVAdapter",description:"Carregar e converter arquivos CSV para formato de grafo. Suporta listas de arestas e arquivos de propriedades de ns.",methods:"Mtodos",methodsList:{fromEdgeList:{name:"fromEdgeList(csvText, options)",description:'Analisar lista de arestas CSV. Opes: header (padro: true), delimiter (padro: ","), weighted (padro: true)',returns:"Retorna GraphData com ns e arestas"},fromNodes:{name:"fromNodes(csvText, options)",description:"Analisar propriedades de ns CSV",returns:"Retorna array de objetos NodeData"},loadFromURL:{name:"loadFromURL(edgeURL, nodeURL, options)",description:"Mtodo assncrono para buscar e analisar CSV de URLs",returns:"Retorna Promise<GraphData>"},toEdgeList:{name:"toEdgeList(graphData, options)",description:"Exportar arestas para string CSV",returns:"Retorna string CSV"},toNodes:{name:"toNodes(graphData, options)",description:"Exportar ns para string CSV",returns:"Retorna string CSV"}}},json:{title:"JSONAdapter",description:"Suporte para D3.js, Cytoscape e outros formatos JSON. Detecta formato automaticamente.",methods:"Mtodos",methodsList:{fromD3:{name:"fromD3(d3Data)",description:'Converter formato D3.js force-directed (com "links") para GraphData',returns:"Retorna GraphData"},fromCytoscape:{name:"fromCytoscape(cytoData)",description:"Converter formato Cytoscape.js para GraphData",returns:"Retorna GraphData"},fromFormat:{name:"fromFormat(jsonData)",description:"Detectar formato automaticamente (GraphData, D3, Cytoscape, NetworkX)",returns:"Retorna GraphData"},toD3:{name:"toD3(graphData)",description:'Converter para formato D3.js com propriedade "links"',returns:"Retorna D3GraphData"},toCytoscape:{name:"toCytoscape(graphData)",description:"Converter para formato Cytoscape.js",returns:"Retorna CytoscapeData"},loadFromURL:{name:"loadFromURL(url)",description:"Mtodo assncrono para buscar e analisar JSON",returns:"Retorna Promise<GraphData>"}}},networkx:{title:"NetworkXAdapter",description:"Interoperabilidade com Python NetworkX. Suporta formatos node-link e adjacncia.",methods:"Mtodos",methodsList:{fromNodeLink:{name:"fromNodeLink(nxData)",description:"Converter formato NetworkX node-link (mais comum)",returns:"Retorna GraphData"},fromAdjacency:{name:"fromAdjacency(nxData)",description:"Converter formato de adjacncia NetworkX",returns:"Retorna GraphData"},toNodeLink:{name:"toNodeLink(graphData, options)",description:"Converter para formato node-link. Opes: directed (padro: false), multigraph (padro: false)",returns:"Retorna dados node-link NetworkX"},toAdjacency:{name:"toAdjacency(graphData)",description:"Converter para formato de adjacncia",returns:"Retorna array de objetos de ns com listas de adjacncia"}}}},layouts:{title:"Layouts de Grafos",description:"Posicionar ns no espao 2D usando vrios algoritmos. Todos os layouts usam computao assncrona em Web Workers para desempenho ideal.",note:"Todos os mtodos de layout so assncronos e retornam Promise<Object> com posies de ns {nodeId: {x, y}}",forceDirected:{title:"ForceDirectedLayout",description:"Modelo spring-eltrico usando algoritmo Fruchterman-Reingold. Bom para visualizao geral de redes.",complexity:"Complexidade de Tempo: O(iterations  V)",bestFor:"Melhor para: Redes gerais, grafos sociais",constructor:"new ForceDirectedLayout(graph, options)",options:{iterations:"Nmero de passos de simulao (padro: 50)",k:"Distncia tima entre ns (padro: auto-calculado)",scale:"Fator de escala para posies (padro: 1)",center:"Ponto central {x, y} (padro: {x:0, y:0})",initialPositions:"Posies iniciais (padro: aleatrio)",threshold:"Limiar de convergncia (padro: 1e-4)"}},kamadaKawai:{title:"KamadaKawaiLayout",description:"Minimizao de energia baseada em caminhos mais curtos. Produz layouts esteticamente agradveis.",complexity:"Complexidade de Tempo: O(V + iterations  V)",bestFor:"Melhor para: Grafos pequenos-mdios (<1000 ns), rvores, grafos planares",constructor:"new KamadaKawaiLayout(graph, options)",options:{iterations:"Mximo de iteraes (padro: 1000)",scale:"Fator de escala (padro: 1)",center:"Ponto central (padro: {x:0, y:0})",initialPositions:"Posies iniciais (padro: circular)",threshold:"Limiar de convergncia (padro: 1e-4)",K:"Escala de constante de mola (padro: auto)"}},spectral:{title:"SpectralLayout",description:"Usa autovetores Laplacianos como coordenadas. Excelente para visualizar estrutura de comunidades.",complexity:"Complexidade de Tempo: O(V) usando autovetores pr-computados",bestFor:"Melhor para: Visualizao de comunidades, topologia de grafo",requires:'Requer: estatstica "eigenvector-laplacian" deve ser pr-computada',constructor:"new SpectralLayout(graph, options)",options:{scale:"Fator de escala (padro: 100)",center:"Ponto central (padro: {x:0, y:0})"}},circular:{title:"CircularLayout",description:"Posiciona ns em crculo. Simples e limpo para redes pequenas.",complexity:"Complexidade de Tempo: O(V)",bestFor:"Melhor para: Redes pequenas, grafos cclicos",constructor:"new CircularLayout(graph, options)",options:{scale:"Raio do crculo (padro: 100)",center:"Ponto central (padro: {x:0, y:0})",sortBy:"Funo de ordenao opcional para ordem dos ns"}},shell:{title:"ShellLayout",description:"Crculos concntricos baseados no grau do n. Ns de alto grau no centro.",complexity:"Complexidade de Tempo: O(V)",bestFor:"Melhor para: Redes hub-and-spoke, grafos estrela",requires:'Requer: estatstica "degree" deve ser pr-computada',constructor:"new ShellLayout(graph, options)"},spiral:{title:"SpiralLayout",description:"Padro de espiral arquimediana. Esteticamente agradvel para dados ordenados.",complexity:"Complexidade de Tempo: O(V)",bestFor:"Melhor para: Redes sequenciais ou temporais",constructor:"new SpiralLayout(graph, options)"},bfs:{title:"BFSLayout",description:"Camadas de busca em largura. Mostra distncia do n raiz.",complexity:"Complexidade de Tempo: O(V + E)",bestFor:"Melhor para: rvores, hierarquias, mostrando propagao",constructor:"new BFSLayout(graph, options)"},bipartite:{title:"BipartiteLayout",description:"Layout de duas camadas para grafos bipartidos.",complexity:"Complexidade de Tempo: O(V)",bestFor:"Melhor para: Redes de dois modos, dados ator-evento",constructor:"new BipartiteLayout(graph, options)"},random:{title:"RandomLayout",description:"Posies aleatrias. til como ponto de partida para outros layouts.",complexity:"Complexidade de Tempo: O(V)",bestFor:"Melhor para: Posies iniciais, testes",constructor:"new RandomLayout(graph, options)"},usage:"Padro de Uso",usageDescription:"Todos os layouts seguem o mesmo padro assncrono"},community:{title:"Deteco de Comunidades",description:"Detectar comunidades (clusters) em redes usando vrios algoritmos. Toda computao  executada em Web Workers.",mainClass:{title:"CommunityDetection",description:"Classe principal para detectar comunidades em grafos",constructor:"new CommunityDetection(graph)",methods:{detectCommunities:{name:"detectCommunities(algorithm, options)",description:'Detectar comunidades usando algoritmo especificado. Algoritmo pode ser instncia ou string ("louvain")',returns:"Retorna Promise<CommunityResult> com communities, modularity, numCommunities"},calculateModularity:{name:"calculateModularity(communities)",description:"Calcular pontuao de modularidade para uma partio",returns:"Retorna number (-1 a 1, maior  melhor)"}},staticMethods:{detect:{name:"CommunityDetection.detect(graphData, algorithm, options)",description:"Mtodo de convenincia para deteco direta de GraphData",returns:"Retorna Promise<CommunityResult>"},getNodesInCommunity:{name:"CommunityDetection.getNodesInCommunity(communities, communityId)",description:"Obter array de IDs de ns em uma comunidade especfica"},getCommunityGroups:{name:"CommunityDetection.getCommunityGroups(communities)",description:"Obter objeto mapeando communityId para array de IDs de ns"}}},louvain:{title:"LouvainAlgorithm",description:"Otimizao rpida de modularidade usando o mtodo Louvain. O algoritmo de deteco de comunidades mais popular.",complexity:"Complexidade de Tempo: O(V log V)",bestFor:"Melhor para: Redes grandes, deteco de comunidades de uso geral",constructor:"new LouvainAlgorithm(options)",options:{resolution:"Parmetro de resoluo para modularidade (padro: 1.0). Valores maiores encontram comunidades menores.",maxIterations:"Mximo de iteraes (padro: 100)"}},result:{title:"CommunityResult",description:"Objeto de resultado retornado pela deteco de comunidades",properties:{communities:"Objeto mapeando nodeId para communityId (nmero)",modularity:"Pontuao de modularidade (-1 a 1, tipicamente 0.3-0.7 para boas parties)",numCommunities:"Nmero de comunidades encontradas",algorithm:"Nome do algoritmo usado",metadata:"Informaes adicionais opcionais"}},customAlgorithm:{title:"Algoritmos Personalizados",description:"Estender classe base CommunityAlgorithm para criar seus prprios algoritmos",note:"Implementar o mtodo detect() e configurar caminho do mdulo worker"}},examples:{title:"Exemplos de Uso",description:"Exemplos de cdigo completos para casos de uso comuns",basic:{title:"Anlise Bsica de Redes",description:"Analisar uma rede simples e computar mtricas de centralidade"},csv:{title:"Carregando Dados CSV",description:"Importar dados de rede de arquivos CSV e analisar"},json:{title:"Trabalhando com JSON",description:"Converter entre formatos JSON (D3, Cytoscape, NetworkX)"},layout:{title:"Aplicando Layouts",description:"Posicionar ns usando algoritmos de layout"},community:{title:"Deteco de Comunidades",description:"Encontrar comunidades usando algoritmo Louvain"},complete:{title:"Fluxo Completo",description:"Exemplo ponta a ponta: carregar dados, analisar, aplicar layout, detectar comunidades"}}},explorer:{title:"Explorador de Redes",description:"Anlise e visualizao interativa de redes",header:{title:" Explorador de Redes",subtitle:"Explore redes de exemplo e carregue seus prprios arquivos. Suporta formatos CSV, JSON e NetworkX."},renderer:{title:"Renderizador de Grafo",d3:"D3.js (SVG)",sigma:"Sigma.js (WebGL)",d3Description:"Renderizao baseada em SVG. Melhor para grafos pequenos-mdios (<1000 ns). Suporta interaes ricas.",sigmaDescription:"Renderizao baseada em WebGL. Otimizado para grafos grandes (10k+ ns). Acelerao por hardware."},parallelComputation:{title:" Demonstrao de Computao Paralela",description:"Esta demonstrao apresenta <strong>Web Workers</strong> para anlise de redes paralela. Redes grandes so processadas em mltiplos ncleos de CPU para computao mais rpida.",workersSupported:" Workers Suportados",workersNotSupported:" Workers No Suportados",cores:"ncleos"},status:{title:"Status",ready:"Pronto para operaes",loadNetwork:"Carregue uma rede para comear"},dataLoading:{title:"Carregamento de Dados",sampleNetworks:" Redes de Exemplo",uploadFile:" Carregar Arquivo",chooseNetwork:"Escolha uma Rede:",chooseCity:"-- Escolha uma rede --",caruaru:"Caruaru (~130 arestas, pequena)",rj:"Rio de Janeiro (~1.900 arestas, mdia)",niteroi:"Niteri (~18.500 arestas, grande)",karate:"Karate Club (34 ns, 78 arestas)",miserables:"Les Misrables (77 ns, 254 arestas)",kevinbacon:"Kevin Bacon (128 ns, 128 arestas)",sixdegrees:"6 Graus de Kevin Bacon (3.610 ns, 5.514 arestas)",loadNetwork:" Carregar Rede",loading:" Carregando...",fileFormat:"Formato do Arquivo:",edgesCSV:"CSV de Arestas (Obrigatrio):",nodesCSV:"CSV de Ns (Opcional):",edgeCSVFormat:"<strong>Formato CSV de arestas:</strong> source,target,weight<br><strong>Formato CSV de ns:</strong> id,group,label,...",jsonFile:"Arquivo JSON:",networkxFile:"Arquivo JSON NetworkX:",jsonSupports:"Suporta: Padro (nodes/edges), D3 (nodes/links), Cytoscape, ou array de lista de arestas",networkxSupports:"Suporta: formato node-link, formato adjacency",loadUploadedFile:" Carregar Arquivo Enviado",formatJSON:"JSON (nodes/edges, D3, Cytoscape)",formatCSV:"CSV (lista de arestas)",formatNetworkX:"NetworkX (node-link, adjacency)"},networkStats:{title:"Estatsticas da Rede",nodes:"Ns",edges:"Arestas",avgDegree:"Grau Mdio",analysisTime:"Tempo de Anlise",communities:"Comunidades",modularity:"Modularidade",usingParallel:" Usando computao paralela",workersActive:"workers ativos",singleThreaded:" Modo single-thread",networkTooSmall:"Rede muito pequena para workers"},networkAnalysis:{title:" Anlise de Rede (Tamanhos de N)"},layoutAlgorithm:{title:" Algoritmo de Layout",requiresAnalysis:"requer anlise"},graphStats:{title:" Estatsticas do Grafo",density:"Densidade",diameter:"Dimetro",avgClustering:"Agrupamento Mdio",avgPathLength:"Comprimento Mdio do Caminho",avgDegree:"Grau Mdio",connectedComponents:"Componentes",calculated:"Calculado junto com mtricas de ns"},communityDetection:{title:" Deteco de Comunidades (Cores dos Ns)",algorithm:"Algoritmo:"},communityResults:{title:" Resultados da Deteco de Comunidades",communitiesFound:"Comunidades Encontradas:",modularityScore:"Pontuao de Modularidade:",computationTime:"Tempo de Computao:",algorithm:"Algoritmo:",nodeColorsRepresent:"As cores dos ns representam as atribuies de comunidades"},instructions:{title:" Como interagir",dragNodes:" <strong>Arraste ns</strong> para reposicion-los",scroll:" <strong>Role</strong> para ampliar/reduzir",dragBackground:" <strong>Arraste o fundo</strong> para mover",hoverNodes:" <strong>Passe o mouse sobre ns</strong> para ver informaes detalhadas",nodeSize:" <strong>Tamanho do n</strong> = mtrica selecionada",color:" <strong>Cor</strong> = comunidade"},messages:{loadingNetworkData:"Carregando dados da rede...",loadedNetwork:" {name} carregada ({nodes} ns, {edges} arestas)",failedToLoadNetwork:" Falha ao carregar rede: {error}",loadingUploadedFile:"Carregando arquivo enviado...",loadedFile:" {fileName} carregado ({nodes} ns, {edges} arestas)",failedToLoadFile:" Falha ao carregar arquivo: {error}",analyzingNetwork:"Analisando rede usando workers...",analysisComplete:" Anlise completa! Computadas {count} mtricas de ns",analysisFailed:" Anlise falhou: {error}",usingD3Physics:" Usando simulao de fsica D3 (sem algoritmo de layout)",applyingLayout:"Aplicando layout {layout}...",appliedLayout:" Layout {layout} aplicado",layoutFailed:" Layout falhou: {error}",graphNotInitialized:"Grafo no inicializado",graphIsEmpty:"Grafo est vazio",detectingCommunities:"Detectando comunidades usando {algorithm}...",foundCommunities:"Encontradas {count} comunidades (modularidade: {modularity})",communityDetectionFailed:"Deteco de comunidades falhou"}},family:{title:"rvore Genealgica",subtitle:"Construa e visualize sua rvore genealgica interativamente",description:"Visualize relaes familiares",header:{title:" Construtor de rvore Genealgica",subtitle:"Construa e visualize sua rvore genealgica interativamente. Comece com voc mesmo e adicione parentes para ver a rede crescer."},whatIs:{title:"O que  isso?",description:"Uma visualizao de rede de relaes familiares. Cada cor representa um tipo de relao diferente. A rvore  salva automaticamente no armazenamento do seu navegador a cada 30 segundos."},status:{title:"Status",ready:"Pronto para operaes",clickToAdd:"Clique nos botes para adicionar parentes"},addRelatives:{title:"Adicionar Parentes",parents:" Pais",grandparents:" Avs",sibling:" Irm/Irmo",nieceNephew:" Sobrinha/Sobrinho",uncleAunt:" Tio/Tia",cousin:" Primo/Prima",partner:" Parceiro/Parceira",child:" Filho/Filha"},actions:{title:"Aes",saveFamily:" Salvar Famlia",saveImage:" Salvar como Imagem",lockGraph:" Bloquear Grafo",unlockGraph:" Desbloquear Grafo",undo:" Desfazer",redo:" Refazer",resetTree:" Redefinir rvore"},renderNodes:{title:" Renderizar Ns",colors:" Cores",avatars:" Avatares",colorsDesc:"Ns coloridos por tipo de relao.",avatarsDesc:"Ns mostrados como avatares emoji (se definido)."},networkAnalysis:{title:" Anlise de Rede (Tamanhos de N)"},relationshipColors:{title:"Cores de Relao",you:"Voc",parents:"Pais",siblings:"Irmos",unclesAunts:"Tios/Tias",cousins:"Primos/Primas",grandparents:"Avs",nieces:"Sobrinhas/Sobrinhos",partners:"Parceiros/Parceiras",children:"Filhos/Filhas"},layoutAlgorithm:{title:" Algoritmo de Layout"},instructions:{title:" Como usar",dragNodes:" <strong>Arraste ns</strong> para organizar sua rvore",autoSaves:" <strong>Salva automaticamente</strong> a cada 30 segundos",lock:" <strong>Bloqueie</strong> para congelar posies",download:" <strong>Baixe</strong> como imagem PNG",analyze:" <strong>Analise</strong> para dimensionar ns por mtricas de centralidade",layouts:" <strong>Aplique layouts</strong> para visualizar sua rvore de forma diferente",undoRedo:" <strong>Desfazer/Refazer</strong> com botes ou Ctrl+Z / Ctrl+Y (at 10 aes)"},dialogs:{selectOption:"Selecione uma opo",addParents:"Adicionar Pais",addSibling:"Adicionar Irm/Irmo",addGrandparents:"Adicionar Avs",addUncleAunt:"Adicionar Tio/Tia",addCousin:"Adicionar Primo/Prima",addChild:"Adicionar Filho/Filha",addNieceNephew:"Adicionar Sobrinha/Sobrinho",addPartner:"Adicionar Parceiro/Parceira",fields:{motherName:"Nome da Me",motherAvatar:"Avatar da Me (opcional)",fatherName:"Nome do Pai",fatherAvatar:"Avatar do Pai (opcional)",siblingName:"Nome do Irm/Irmo",gender:"Gnero",avatar:"Avatar (opcional)",parentsSide:"Lado do Pai/Me",grandmotherName:"Nome da Av",grandmotherAvatar:"Avatar da Av (opcional)",grandfatherName:"Nome do Av",grandfatherAvatar:"Avatar do Av (opcional)",name:"Nome",uncleAuntField:"Tio/Tia",sibling:"Irm/Irmo",parent:"Pai/Me",partnerOf:"Parceiro/Parceira De"},genderOptions:{male:"Masculino",female:"Feminino",other:"Outro"},placeholders:{mother:" Digite um emoji",father:" Digite um emoji",avatar:" Digite um emoji",grandmother:" Digite um emoji",grandfather:" Digite um emoji"}},operations:{errors:{atLeastOneParent:"Pelo menos um nome de pai  necessrio",onlyOneParentSlot:"Apenas um slot de pai disponvel. Adicionada apenas a me.",siblingNameRequired:"Nome do irm/irmo  obrigatrio",genderRequired:"Gnero  obrigatrio",graphNotInitialized:"Grafo no inicializado",failedToAddSibling:"Falha ao adicionar irm/irmo",parentNotFound:"Pai/Me no encontrado",atLeastOneGrandparent:"Pelo menos um nome de av  necessrio",onlyOneGrandparentSlot:"Apenas um slot de av disponvel para este pai. Adicionada apenas a av.",failedToAddGrandparents:"Falha ao adicionar avs",uncleAuntNameRequired:"Nome do tio/tia  obrigatrio",failedToAddUncleAunt:"Falha ao adicionar tio/tia",cousinNameRequired:"Nome do primo/prima  obrigatrio",failedToAddCousin:"Falha ao adicionar primo/prima",childNameRequired:"Nome do filho/filha  obrigatrio",failedToAddChild:"Falha ao adicionar filho/filha",nieceNephewNameRequired:"Nome do sobrinha/sobrinho  obrigatrio",failedToAddNieceNephew:"Falha ao adicionar sobrinha/sobrinho",partnerNameRequired:"Nome do parceiro/parceira  obrigatrio",personNotFound:"Pessoa no encontrada",alreadyHasPartner:"j tem um parceiro/parceira!"},success:{parentAdded:"Pais adicionados com sucesso",siblingAdded:"Irm(o) adicionado(a) com sucesso",grandparentsAdded:"Avs adicionados com sucesso",uncleAuntAdded:"Tio(a) adicionado(a) com sucesso",cousinAdded:"Primo(a) adicionado(a) com sucesso",childAdded:"Filho(a) adicionado(a) com sucesso",nieceNephewAdded:"Sobrinho(a) adicionado(a) com sucesso",partnerAdded:"Parceiro(a) adicionado(a) com sucesso"},validation:{noParents:"Voc deve adicionar pais primeiro antes de adicionar avs",noUnclesAunts:"Voc deve adicionar tios/tias primeiro antes de adicionar primos",noSiblings:"Voc deve adicionar irmos primeiro antes de adicionar sobrinhos",maxParents:"Voc j tem 2 pais adicionados. Voc no pode adicionar mais de 2 pais.",notEligibleForPartner:"Nenhuma pessoa disponvel para parceiros"}},storage:{saved:"rvore genealgica salva!",loaded:"rvore genealgica carregada",reset:"rvore genealgica redefinida",error:"Erro ao salvar rvore genealgica"},history:{undone:"Ao desfeita",redone:"Ao refeita",nothingToUndo:"Nada para desfazer",nothingToRedo:"Nada para refazer"},relationships:{yourPartner:"Seu Parceiro/Parceira",partnerOf:"'s Parceiro/Parceira",yourChild:"Seu filho/filha",siblingChild:"'s filho/filha (seu sobrinha/sobrinho)",cousinChild:"'s filho/filha (filho/filha do seu primo/prima)",grandchild:"'s filho/filha (seu neto/neta)",siblingInLaw:"'s parceiro/parceira (seu cunhado/cunhada)",childInLaw:"'s parceiro/parceira (seu genro/nora)"},dropdownOptions:{yourChild:"Seu filho/filha",childTemplate:"Filho(a) de {name}",nieceNephewTemplate:"Filho(a) de {name} (seu sobrinho(a))",cousinChildTemplate:"Filho(a) de {name} (filho(a) do seu primo(a))",grandchildTemplate:"Filho(a) de {name} (seu neto(a))",partnerTemplate:"Parceiro(a) de {name}",siblingPartnerTemplate:"Parceiro(a) de {name} (seu cunhado(a))",childPartnerTemplate:"Parceiro(a) de {name} (seu genro/nora)",parentSideTemplate:"Irm(o) de {name}",uncleAuntChildTemplate:"Filho(a) de {name}",siblingChildTemplate:"Filho(a) de {name}"}},degrees:{header:{title:"6 Graus de Kevin Bacon",subtitle:'Explore a famosa rede "mundo pequeno" conectando atores de Hollywood atravs de suas colaboraes em filmes'},whatIs:{title:"O que  isso?",description:'Os <strong>Seis Graus de Kevin Bacon</strong>  um jogo baseado no conceito de "seis graus de separao". Ele postula que qualquer ator pode ser ligado a Kevin Bacon atravs de seus papis em filmes em seis passos ou menos. Esta visualizao mostra <strong>2 graus de separao</strong> - os co-estrelas de Kevin Bacon e seus co-estrelas.'},status:{title:"Status",ready:"Rede carregada e pronta"},stats:{title:"Estatsticas da Rede",nodes:"Total de Ns",edges:"Total de Arestas",movies:"Filmes",actors:"Atores"},legend:{title:"Legenda",movies:"Filmes",actors:"Atores",kevinBacon:"Kevin Bacon",center:"Centro da rede (0 graus)",degree1:"1 Grau",degree1Desc:"Co-estrelas diretos de Kevin Bacon",degree2:"2 Graus",degree2Desc:"Co-estrelas dos co-estrelas de Kevin Bacon"},baconFinder:{title:"Encontrar Nmero Bacon",placeholder:"Buscar ator ou filme..."},filter:{title:"Filtrar Ns",all:"Todos",actors:"Apenas Atores",movies:"Apenas Filmes"},layout:{title:"Algoritmo de Layout"},analysis:{title:"Anlise de Rede"},instructions:{title:"Como usar",hover:"<strong>Passe o mouse</strong> sobre os ns para ver detalhes do ator/filme",drag:"<strong>Arraste</strong> os ns para reorganizar a rede",zoom:"<strong>Role</strong> para ampliar/reduzir"}}}};function Op(t,e,n={}){const i=e.split(".");let r=oc[t];for(const o of i)if(r=r?.[o],r===void 0)return ww.warn("Translation not found",{key:e,lang:t}),e;return typeof r=="string"&&Object.keys(n).length>0?r.replace(/\{(\w+)\}/g,(o,s)=>n[s]!==void 0?n[s]:o):r}const xw=Et({prefix:"useI18n",level:"info"}),Or=oe(localStorage.getItem("lang")||"en");function fn(){return{lang:Or,t:(n,i={})=>{const r=n.split(".");let o=oc[Or.value];for(const s of r)if(o=o?.[s],o===void 0)return xw.warn("Translation not found",{key:n,lang:Or.value}),n;return typeof o=="string"&&Object.keys(i).length>0?o.replace(/\{(\w+)\}/g,(s,a)=>i[a]!==void 0?i[a]:s):o},changeLanguage:n=>{Or.value=n,localStorage.setItem("lang",n)},translations:Je(()=>oc[Or.value])}}const lr=oe(localStorage.getItem("darkMode")==="true"),kw=()=>{lr.value?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")};dt(lr,()=>{localStorage.setItem("darkMode",lr.value),kw()},{immediate:!0});function Gp(){return{darkMode:lr,toggleDarkMode:()=>{lr.value=!lr.value}}}function Ew(){const t=document.getElementById("particles");if(!t)return;const e=t.getContext("2d");t.width=window.innerWidth,t.height=window.innerHeight;const n=[],i=100,r=150;class o{constructor(){this.x=Math.random()*t.width,this.y=Math.random()*t.height,this.vx=(Math.random()-.5)*.5,this.vy=(Math.random()-.5)*.5,this.radius=Math.random()*2+1}update(){this.x+=this.vx,this.y+=this.vy,(this.x<0||this.x>t.width)&&(this.vx*=-1),(this.y<0||this.y>t.height)&&(this.vy*=-1)}draw(){const l=document.documentElement.classList.contains("dark");e.fillStyle=l?"rgba(167, 139, 250, 0.6)":"rgba(139, 92, 246, 0.5)",e.beginPath(),e.arc(this.x,this.y,this.radius,0,Math.PI*2),e.fill()}}for(let a=0;a<i;a++)n.push(new o);function s(){e.clearRect(0,0,t.width,t.height),n.forEach(l=>{l.update(),l.draw()});const a=document.documentElement.classList.contains("dark");n.forEach((l,c)=>{n.slice(c+1).forEach(d=>{const u=l.x-d.x,h=l.y-d.y,f=Math.sqrt(u*u+h*h);if(f<r){const p=(1-f/r)*.4;e.strokeStyle=a?`rgba(167, 139, 250, ${p})`:`rgba(139, 92, 246, ${p})`,e.lineWidth=1.5,e.beginPath(),e.moveTo(l.x,l.y),e.lineTo(d.x,d.y),e.stroke()}})}),requestAnimationFrame(s)}s(),window.addEventListener("resize",()=>{t.width=window.innerWidth,t.height=window.innerHeight})}const wi=Ro({visible:!1,text:"",x:0,y:0});function Fp(){const t=r=>{wi.text=r,wi.visible=!0},e=()=>{wi.visible=!1,wi.text=""},n=r=>{r&&(wi.x=r.clientX??0,wi.y=r.clientY??0)};return{showTooltip:t,hideTooltip:e,updatePosition:n,showTooltipAt:(r,o)=>{r&&n(r),t(o)},tooltipState:wi}}const Cn=(t,e)=>{const n=t.__vccOpts||t;for(const[i,r]of e)n[i]=r;return n},jo=15,oh=288,sh=120,Aw={__name:"GlobalTooltip",setup(t){const{tooltipState:e}=Fp(),n=Je(()=>{if(!e.visible)return{display:"none"};let r=e.x+jo,o=e.y+jo;return r+oh>window.innerWidth&&(r=e.x-oh-jo),o+sh>window.innerHeight&&(o=e.y-sh-jo),r<0&&(r=5),o<0&&(o=5),{left:`${r}px`,top:`${o}px`}}),i=r=>{e.visible&&(e.x=r.clientX,e.y=r.clientY)};return Jt(()=>{document.addEventListener("mousemove",i)}),Bi(()=>{document.removeEventListener("mousemove",i)}),(r,o)=>(H(),Xn(Is,{name:"tooltip-fade"},{default:Ue(()=>[y(e).visible&&y(e).text?(H(),K("div",{key:0,class:"global-tooltip",style:No(n.value)},b(y(e).text),5)):Me("",!0)]),_:1}))}},Cw=Cn(Aw,[["__scopeId","data-v-637ae200"]]),Sw=["disabled","aria-expanded"],Tw={class:"custom-dropdown-value"},Nw=["aria-selected","onClick"],Rw={__name:"CustomDropdown",props:{modelValue:{type:[String,Number],default:null},options:{type:Array,required:!0},disabled:{type:Boolean,default:!1},placeholder:{type:String,default:"Select an option"},compact:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(t,{emit:e}){const n=t,i=e,r=oe(!1),o=oe(null),s=oe(null),a=m=>typeof m=="object"&&m!==null?m.value:m,l=m=>typeof m=="object"&&m!==null?m.label:m,c=m=>a(m)===n.modelValue,d=Je(()=>{if(n.modelValue===null||n.modelValue===void 0||n.modelValue==="")return n.placeholder;const m=n.options.find(w=>a(w)===n.modelValue);return m?l(m):n.placeholder}),u=()=>{n.disabled||(r.value=!r.value)},h=m=>{const w=a(m);i("update:modelValue",w),r.value=!1},f=m=>{r.value&&o.value&&s.value&&!o.value.contains(m.target)&&!s.value.contains(m.target)&&(r.value=!1)},p=m=>{m.key==="Escape"&&r.value&&(r.value=!1)};return dt(()=>n.modelValue,()=>{}),Jt(()=>{document.addEventListener("click",f),document.addEventListener("keydown",p)}),Bi(()=>{document.removeEventListener("click",f),document.removeEventListener("keydown",p)}),(m,w)=>(H(),K("div",{class:Xe(["custom-dropdown",{"is-open":r.value,"is-disabled":t.disabled,"is-compact":t.compact}])},[g("button",{ref_key:"triggerRef",ref:o,type:"button",disabled:t.disabled,onClick:u,class:Xe(["custom-dropdown-trigger",{"is-compact":t.compact}]),"aria-expanded":r.value,"aria-haspopup":!0},[g("span",Tw,b(d.value),1),(H(),K("svg",{class:Xe(["custom-dropdown-chevron",{"is-open":r.value}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...w[0]||(w[0]=[g("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)])],2))],10,Sw),we(Is,{name:"dropdown-fade"},{default:Ue(()=>[r.value?(H(),K("div",{key:0,ref_key:"dropdownRef",ref:s,class:"custom-dropdown-menu",role:"listbox"},[(H(!0),K(qe,null,ln(t.options,_=>(H(),K("button",{key:a(_),type:"button",role:"option","aria-selected":c(_),onClick:x=>h(_),class:Xe(["custom-dropdown-option",{"is-selected":c(_)}])},b(l(_)),11,Nw))),128))],512)):Me("",!0)]),_:1})],2))}},Fi=Cn(Rw,[["__scopeId","data-v-9c4ce30e"]]),Lw={class:"content-wrapper"},Iw={class:"header"},Pw={class:"container-main header-content"},Dw={class:"flex items-center gap-4"},Mw={class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Ow={key:0,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"},Gw={key:1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},Fw={class:"nav hidden md:flex"},$w={class:"hidden md:flex items-center space-x-4"},zw={class:"w-20"},Bw=["title"],Vw={key:0,class:"text-xl"},Uw={key:1,class:"text-xl"},jw={class:"flex flex-col h-full p-6"},Hw={class:"flex flex-col space-y-2 mb-8"},Ww={class:"border-t border-[var(--color-border)] pt-6 space-y-4"},qw={class:"block text-sm font-medium mb-2"},Kw={class:"text-2xl"},Xw={class:"page"},Zw={key:0,class:"footer"},Yw={class:"container-main footer-content"},Jw={class:"mb-2"},Qw={class:"text-sm"},e1={__name:"App",setup(t){const e=dw(),{lang:n,t:i,changeLanguage:r}=fn(),{darkMode:o,toggleDarkMode:s}=Gp(),a=oe(!1),l=()=>{a.value=!a.value},c=()=>{a.value=!1},d=Je(()=>["showcase","explorer","degrees","family"].includes(e.name));return dt(d,u=>{u?document.body.classList.add("demo-page"):document.body.classList.remove("demo-page")},{immediate:!0}),Jt(()=>{Ew()}),(u,h)=>{const f=Hl("router-link"),p=Hl("router-view");return H(),K(qe,null,[h[12]||(h[12]=g("canvas",{id:"particles"},null,-1)),g("div",Lw,[g("header",Iw,[g("div",Pw,[g("div",Dw,[we(f,{to:"/",class:"logo"},{default:Ue(()=>[...h[5]||(h[5]=[Ce(" @guinetik/graph-js ",-1)])]),_:1})]),g("button",{onClick:l,class:"md:hidden btn-icon","aria-label":"Toggle menu"},[(H(),K("svg",Mw,[a.value?(H(),K("path",Gw)):(H(),K("path",Ow))]))]),g("nav",Fw,[we(f,{to:"/showcase",class:"nav-link","active-class":"nav-link-active"},{default:Ue(()=>[Ce(b(y(i)("nav.showcase")),1)]),_:1}),we(f,{to:"/explorer",class:"nav-link","active-class":"nav-link-active"},{default:Ue(()=>[Ce(b(y(i)("nav.explorer")),1)]),_:1}),we(f,{to:"/degrees",class:"nav-link","active-class":"nav-link-active"},{default:Ue(()=>[Ce(b(y(i)("nav.degrees")),1)]),_:1}),we(f,{to:"/family",class:"nav-link","active-class":"nav-link-active"},{default:Ue(()=>[Ce(b(y(i)("nav.family")),1)]),_:1}),we(f,{to:"/docs",class:"nav-link","active-class":"nav-link-active"},{default:Ue(()=>[Ce(b(y(i)("nav.docs")),1)]),_:1})]),g("div",$w,[g("div",zw,[we(Fi,{"model-value":y(n),"onUpdate:modelValue":h[0]||(h[0]=m=>{n.value=m,y(r)(m)}),options:[{value:"en",label:"EN"},{value:"pt",label:"PT"}],compact:!0},null,8,["model-value"])]),g("button",{onClick:h[1]||(h[1]=(...m)=>y(s)&&y(s)(...m)),class:"btn-icon",title:y(i)("common.darkMode")},[y(o)?(H(),K("span",Uw,"")):(H(),K("span",Vw,""))],8,Bw),h[6]||(h[6]=g("a",{href:"https://github.com/guinetik/graph-js",target:"_blank",class:"btn-icon",title:"View on GitHub"},[g("svg",{class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24"},[g("path",{d:"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"})])],-1))])])]),we(Is,{name:"mobile-menu"},{default:Ue(()=>[a.value?(H(),K("div",{key:0,class:"fixed inset-0 z-50 md:hidden",onClick:c},[h[10]||(h[10]=g("div",{class:"absolute inset-0 bg-black/50"},null,-1)),g("div",{class:"absolute top-0 right-0 bottom-0 w-72 bg-[var(--color-bg-primary)] shadow-xl",onClick:h[4]||(h[4]=Qi(()=>{},["stop"]))},[g("div",jw,[g("div",{class:"flex justify-between items-center mb-8"},[h[8]||(h[8]=g("h2",{class:"text-xl font-bold"},"Menu",-1)),g("button",{onClick:c,class:"btn-icon"},[...h[7]||(h[7]=[g("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[g("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),g("nav",Hw,[we(f,{to:"/showcase",class:"nav-link text-lg py-3 px-4 rounded-md hover:bg-[var(--color-bg-secondary)] transition-colors","active-class":"bg-[var(--color-bg-secondary)] text-accent",onClick:c},{default:Ue(()=>[Ce(b(y(i)("nav.showcase")),1)]),_:1}),we(f,{to:"/explorer",class:"nav-link text-lg py-3 px-4 rounded-md hover:bg-[var(--color-bg-secondary)] transition-colors","active-class":"bg-[var(--color-bg-secondary)] text-accent",onClick:c},{default:Ue(()=>[Ce(b(y(i)("nav.explorer")),1)]),_:1}),we(f,{to:"/degrees",class:"nav-link text-lg py-3 px-4 rounded-md hover:bg-[var(--color-bg-secondary)] transition-colors","active-class":"bg-[var(--color-bg-secondary)] text-accent",onClick:c},{default:Ue(()=>[Ce(b(y(i)("nav.degrees")),1)]),_:1}),we(f,{to:"/family",class:"nav-link text-lg py-3 px-4 rounded-md hover:bg-[var(--color-bg-secondary)] transition-colors","active-class":"bg-[var(--color-bg-secondary)] text-accent",onClick:c},{default:Ue(()=>[Ce(b(y(i)("nav.family")),1)]),_:1}),we(f,{to:"/docs",class:"nav-link text-lg py-3 px-4 rounded-md hover:bg-[var(--color-bg-secondary)] transition-colors","active-class":"bg-[var(--color-bg-secondary)] text-accent",onClick:c},{default:Ue(()=>[Ce(b(y(i)("nav.docs")),1)]),_:1})]),g("div",Ww,[g("div",null,[g("label",qw,b(y(i)("common.language")),1),we(Fi,{"model-value":y(n),"onUpdate:modelValue":h[2]||(h[2]=m=>{n.value=m,y(r)(m)}),options:[{value:"en",label:"English"},{value:"pt",label:"Portugus"}]},null,8,["model-value"])]),g("button",{onClick:h[3]||(h[3]=(...m)=>y(s)&&y(s)(...m)),class:"w-full flex items-center justify-between px-4 py-3 rounded-md bg-secondary hover:bg-[var(--color-bg-tertiary)] transition-colors"},[g("span",null,b(y(i)("common.darkMode")),1),g("span",Kw,b(y(o)?"":""),1)]),h[9]||(h[9]=g("a",{href:"https://github.com/guinetik/graph-js",target:"_blank",class:"flex items-center justify-between px-4 py-3 rounded-md bg-secondary hover:bg-[var(--color-bg-tertiary)] transition-colors"},[g("span",null,"View on GitHub"),g("svg",{class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24"},[g("path",{d:"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"})])],-1))])])])])):Me("",!0)]),_:1}),g("main",Xw,[we(p,null,{default:Ue(({Component:m})=>[we(Is,{name:"page-transition",mode:"out-in"},{default:Ue(()=>[(H(),Xn(Ob(m)))]),_:2},1024)]),_:1})]),d.value?Me("",!0):(H(),K("footer",Zw,[g("div",Yw,[g("p",Jw,[Ce(b(y(i)("footer.madeBy"))+"  "+b(y(i)("footer.by"))+" ",1),h[11]||(h[11]=g("a",{href:"https://github.com/guinetik",target:"_blank",class:"text-accent"},"@guinetik",-1))]),g("p",Qw,b(y(i)("footer.license")),1)])])),we(Cw)])],64)}}},t1="modulepreload",n1=function(t){return"/"+t},ah={},T=function(e,n,i){let r=Promise.resolve();if(n&&n.length>0){let l=function(c){return Promise.all(c.map(d=>Promise.resolve(d).then(u=>({status:"fulfilled",value:u}),u=>({status:"rejected",reason:u}))))};document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),a=s?.nonce||s?.getAttribute("nonce");r=l(n.map(c=>{if(c=n1(c),c in ah)return;ah[c]=!0;const d=c.endsWith(".css"),u=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":t1,d||(h.as="script"),h.crossOrigin="",h.href=c,a&&h.setAttribute("nonce",a),document.head.appendChild(h),d)return new Promise((f,p)=>{h.addEventListener("load",f),h.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${c}`)))})}))}function o(s){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=s,window.dispatchEvent(a),!a.defaultPrevented)throw s}return r.then(s=>{for(const a of s||[])a.status==="rejected"&&o(a.reason);return e().catch(o)})};let nt=class extends Error{constructor(e){super(e),this.name="ShikiError"}};function i1(t){return bd(t)}function bd(t){return Array.isArray(t)?r1(t):t instanceof RegExp?t:typeof t=="object"?o1(t):t}function r1(t){let e=[];for(let n=0,i=t.length;n<i;n++)e[n]=bd(t[n]);return e}function o1(t){let e={};for(let n in t)e[n]=bd(t[n]);return e}function $p(t,...e){return e.forEach(n=>{for(let i in n)t[i]=n[i]}),t}function zp(t){const e=~t.lastIndexOf("/")||~t.lastIndexOf("\\");return e===0?t:~e===t.length-1?zp(t.substring(0,t.length-1)):t.substr(~e+1)}var ol=/\$(\d+)|\${(\d+):\/(downcase|upcase)}/g,Ho=class{static hasCaptures(t){return t===null?!1:(ol.lastIndex=0,ol.test(t))}static replaceCaptures(t,e,n){return t.replace(ol,(i,r,o,s)=>{let a=n[parseInt(r||o,10)];if(a){let l=e.substring(a.start,a.end);for(;l[0]===".";)l=l.substring(1);switch(s){case"downcase":return l.toLowerCase();case"upcase":return l.toUpperCase();default:return l}}else return i})}};function Bp(t,e){return t<e?-1:t>e?1:0}function Vp(t,e){if(t===null&&e===null)return 0;if(!t)return-1;if(!e)return 1;let n=t.length,i=e.length;if(n===i){for(let r=0;r<n;r++){let o=Bp(t[r],e[r]);if(o!==0)return o}return 0}return n-i}function lh(t){return!!(/^#[0-9a-f]{6}$/i.test(t)||/^#[0-9a-f]{8}$/i.test(t)||/^#[0-9a-f]{3}$/i.test(t)||/^#[0-9a-f]{4}$/i.test(t))}function Up(t){return t.replace(/[\-\\\{\}\*\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&")}var jp=class{constructor(t){this.fn=t}cache=new Map;get(t){if(this.cache.has(t))return this.cache.get(t);const e=this.fn(t);return this.cache.set(t,e),e}},Ds=class{constructor(t,e,n){this._colorMap=t,this._defaults=e,this._root=n}static createFromRawTheme(t,e){return this.createFromParsedTheme(l1(t),e)}static createFromParsedTheme(t,e){return d1(t,e)}_cachedMatchRoot=new jp(t=>this._root.match(t));getColorMap(){return this._colorMap.getColorMap()}getDefaults(){return this._defaults}match(t){if(t===null)return this._defaults;const e=t.scopeName,i=this._cachedMatchRoot.get(e).find(r=>s1(t.parent,r.parentScopes));return i?new Hp(i.fontStyle,i.foreground,i.background):null}},sl=class ms{constructor(e,n){this.parent=e,this.scopeName=n}static push(e,n){for(const i of n)e=new ms(e,i);return e}static from(...e){let n=null;for(let i=0;i<e.length;i++)n=new ms(n,e[i]);return n}push(e){return new ms(this,e)}getSegments(){let e=this;const n=[];for(;e;)n.push(e.scopeName),e=e.parent;return n.reverse(),n}toString(){return this.getSegments().join(" ")}extends(e){return this===e?!0:this.parent===null?!1:this.parent.extends(e)}getExtensionIfDefined(e){const n=[];let i=this;for(;i&&i!==e;)n.push(i.scopeName),i=i.parent;return i===e?n.reverse():void 0}};function s1(t,e){if(e.length===0)return!0;for(let n=0;n<e.length;n++){let i=e[n],r=!1;if(i===">"){if(n===e.length-1)return!1;i=e[++n],r=!0}for(;t&&!a1(t.scopeName,i);){if(r)return!1;t=t.parent}if(!t)return!1;t=t.parent}return!0}function a1(t,e){return e===t||t.startsWith(e)&&t[e.length]==="."}var Hp=class{constructor(t,e,n){this.fontStyle=t,this.foregroundId=e,this.backgroundId=n}};function l1(t){if(!t)return[];if(!t.settings||!Array.isArray(t.settings))return[];let e=t.settings,n=[],i=0;for(let r=0,o=e.length;r<o;r++){let s=e[r];if(!s.settings)continue;let a;if(typeof s.scope=="string"){let u=s.scope;u=u.replace(/^[,]+/,""),u=u.replace(/[,]+$/,""),a=u.split(",")}else Array.isArray(s.scope)?a=s.scope:a=[""];let l=-1;if(typeof s.settings.fontStyle=="string"){l=0;let u=s.settings.fontStyle.split(" ");for(let h=0,f=u.length;h<f;h++)switch(u[h]){case"italic":l=l|1;break;case"bold":l=l|2;break;case"underline":l=l|4;break;case"strikethrough":l=l|8;break}}let c=null;typeof s.settings.foreground=="string"&&lh(s.settings.foreground)&&(c=s.settings.foreground);let d=null;typeof s.settings.background=="string"&&lh(s.settings.background)&&(d=s.settings.background);for(let u=0,h=a.length;u<h;u++){let p=a[u].trim().split(" "),m=p[p.length-1],w=null;p.length>1&&(w=p.slice(0,p.length-1),w.reverse()),n[i++]=new c1(m,w,r,l,c,d)}}return n}var c1=class{constructor(t,e,n,i,r,o){this.scope=t,this.parentScopes=e,this.index=n,this.fontStyle=i,this.foreground=r,this.background=o}},xt=(t=>(t[t.NotSet=-1]="NotSet",t[t.None=0]="None",t[t.Italic=1]="Italic",t[t.Bold=2]="Bold",t[t.Underline=4]="Underline",t[t.Strikethrough=8]="Strikethrough",t))(xt||{});function d1(t,e){t.sort((l,c)=>{let d=Bp(l.scope,c.scope);return d!==0||(d=Vp(l.parentScopes,c.parentScopes),d!==0)?d:l.index-c.index});let n=0,i="#000000",r="#ffffff";for(;t.length>=1&&t[0].scope==="";){let l=t.shift();l.fontStyle!==-1&&(n=l.fontStyle),l.foreground!==null&&(i=l.foreground),l.background!==null&&(r=l.background)}let o=new u1(e),s=new Hp(n,o.getId(i),o.getId(r)),a=new f1(new sc(0,null,-1,0,0),[]);for(let l=0,c=t.length;l<c;l++){let d=t[l];a.insert(0,d.scope,d.parentScopes,d.fontStyle,o.getId(d.foreground),o.getId(d.background))}return new Ds(o,s,a)}var u1=class{_isFrozen;_lastColorId;_id2color;_color2id;constructor(t){if(this._lastColorId=0,this._id2color=[],this._color2id=Object.create(null),Array.isArray(t)){this._isFrozen=!0;for(let e=0,n=t.length;e<n;e++)this._color2id[t[e]]=e,this._id2color[e]=t[e]}else this._isFrozen=!1}getId(t){if(t===null)return 0;t=t.toUpperCase();let e=this._color2id[t];if(e)return e;if(this._isFrozen)throw new Error(`Missing color in color map - ${t}`);return e=++this._lastColorId,this._color2id[t]=e,this._id2color[e]=t,e}getColorMap(){return this._id2color.slice(0)}},h1=Object.freeze([]),sc=class Wp{scopeDepth;parentScopes;fontStyle;foreground;background;constructor(e,n,i,r,o){this.scopeDepth=e,this.parentScopes=n||h1,this.fontStyle=i,this.foreground=r,this.background=o}clone(){return new Wp(this.scopeDepth,this.parentScopes,this.fontStyle,this.foreground,this.background)}static cloneArr(e){let n=[];for(let i=0,r=e.length;i<r;i++)n[i]=e[i].clone();return n}acceptOverwrite(e,n,i,r){this.scopeDepth>e?console.log("how did this happen?"):this.scopeDepth=e,n!==-1&&(this.fontStyle=n),i!==0&&(this.foreground=i),r!==0&&(this.background=r)}},f1=class ac{constructor(e,n=[],i={}){this._mainRule=e,this._children=i,this._rulesWithParentScopes=n}_rulesWithParentScopes;static _cmpBySpecificity(e,n){if(e.scopeDepth!==n.scopeDepth)return n.scopeDepth-e.scopeDepth;let i=0,r=0;for(;e.parentScopes[i]===">"&&i++,n.parentScopes[r]===">"&&r++,!(i>=e.parentScopes.length||r>=n.parentScopes.length);){const o=n.parentScopes[r].length-e.parentScopes[i].length;if(o!==0)return o;i++,r++}return n.parentScopes.length-e.parentScopes.length}match(e){if(e!==""){let i=e.indexOf("."),r,o;if(i===-1?(r=e,o=""):(r=e.substring(0,i),o=e.substring(i+1)),this._children.hasOwnProperty(r))return this._children[r].match(o)}const n=this._rulesWithParentScopes.concat(this._mainRule);return n.sort(ac._cmpBySpecificity),n}insert(e,n,i,r,o,s){if(n===""){this._doInsertHere(e,i,r,o,s);return}let a=n.indexOf("."),l,c;a===-1?(l=n,c=""):(l=n.substring(0,a),c=n.substring(a+1));let d;this._children.hasOwnProperty(l)?d=this._children[l]:(d=new ac(this._mainRule.clone(),sc.cloneArr(this._rulesWithParentScopes)),this._children[l]=d),d.insert(e+1,c,i,r,o,s)}_doInsertHere(e,n,i,r,o){if(n===null){this._mainRule.acceptOverwrite(e,i,r,o);return}for(let s=0,a=this._rulesWithParentScopes.length;s<a;s++){let l=this._rulesWithParentScopes[s];if(Vp(l.parentScopes,n)===0){l.acceptOverwrite(e,i,r,o);return}}i===-1&&(i=this._mainRule.fontStyle),r===0&&(r=this._mainRule.foreground),o===0&&(o=this._mainRule.background),this._rulesWithParentScopes.push(new sc(e,n,i,r,o))}},_r=class Wt{static toBinaryStr(e){return e.toString(2).padStart(32,"0")}static print(e){const n=Wt.getLanguageId(e),i=Wt.getTokenType(e),r=Wt.getFontStyle(e),o=Wt.getForeground(e),s=Wt.getBackground(e);console.log({languageId:n,tokenType:i,fontStyle:r,foreground:o,background:s})}static getLanguageId(e){return(e&255)>>>0}static getTokenType(e){return(e&768)>>>8}static containsBalancedBrackets(e){return(e&1024)!==0}static getFontStyle(e){return(e&30720)>>>11}static getForeground(e){return(e&16744448)>>>15}static getBackground(e){return(e&4278190080)>>>24}static set(e,n,i,r,o,s,a){let l=Wt.getLanguageId(e),c=Wt.getTokenType(e),d=Wt.containsBalancedBrackets(e)?1:0,u=Wt.getFontStyle(e),h=Wt.getForeground(e),f=Wt.getBackground(e);return n!==0&&(l=n),i!==8&&(c=i),r!==null&&(d=r?1:0),o!==-1&&(u=o),s!==0&&(h=s),a!==0&&(f=a),(l<<0|c<<8|d<<10|u<<11|h<<15|f<<24)>>>0}};function Ms(t,e){const n=[],i=g1(t);let r=i.next();for(;r!==null;){let l=0;if(r.length===2&&r.charAt(1)===":"){switch(r.charAt(0)){case"R":l=1;break;case"L":l=-1;break;default:console.log(`Unknown priority ${r} in scope selector`)}r=i.next()}let c=s();if(n.push({matcher:c,priority:l}),r!==",")break;r=i.next()}return n;function o(){if(r==="-"){r=i.next();const l=o();return c=>!!l&&!l(c)}if(r==="("){r=i.next();const l=a();return r===")"&&(r=i.next()),l}if(ch(r)){const l=[];do l.push(r),r=i.next();while(ch(r));return c=>e(l,c)}return null}function s(){const l=[];let c=o();for(;c;)l.push(c),c=o();return d=>l.every(u=>u(d))}function a(){const l=[];let c=s();for(;c&&(l.push(c),r==="|"||r===",");){do r=i.next();while(r==="|"||r===",");c=s()}return d=>l.some(u=>u(d))}}function ch(t){return!!t&&!!t.match(/[\w\.:]+/)}function g1(t){let e=/([LR]:|[\w\.:][\w\.:\-]*|[\,\|\-\(\)])/g,n=e.exec(t);return{next:()=>{if(!n)return null;const i=n[0];return n=e.exec(t),i}}}function qp(t){typeof t.dispose=="function"&&t.dispose()}var vo=class{constructor(t){this.scopeName=t}toKey(){return this.scopeName}},p1=class{constructor(t,e){this.scopeName=t,this.ruleName=e}toKey(){return`${this.scopeName}#${this.ruleName}`}},m1=class{_references=[];_seenReferenceKeys=new Set;get references(){return this._references}visitedRule=new Set;add(t){const e=t.toKey();this._seenReferenceKeys.has(e)||(this._seenReferenceKeys.add(e),this._references.push(t))}},y1=class{constructor(t,e){this.repo=t,this.initialScopeName=e,this.seenFullScopeRequests.add(this.initialScopeName),this.Q=[new vo(this.initialScopeName)]}seenFullScopeRequests=new Set;seenPartialScopeRequests=new Set;Q;processQueue(){const t=this.Q;this.Q=[];const e=new m1;for(const n of t)v1(n,this.initialScopeName,this.repo,e);for(const n of e.references)if(n instanceof vo){if(this.seenFullScopeRequests.has(n.scopeName))continue;this.seenFullScopeRequests.add(n.scopeName),this.Q.push(n)}else{if(this.seenFullScopeRequests.has(n.scopeName)||this.seenPartialScopeRequests.has(n.toKey()))continue;this.seenPartialScopeRequests.add(n.toKey()),this.Q.push(n)}}};function v1(t,e,n,i){const r=n.lookup(t.scopeName);if(!r){if(t.scopeName===e)throw new Error(`No grammar provided for <${e}>`);return}const o=n.lookup(e);t instanceof vo?ys({baseGrammar:o,selfGrammar:r},i):lc(t.ruleName,{baseGrammar:o,selfGrammar:r,repository:r.repository},i);const s=n.injections(t.scopeName);if(s)for(const a of s)i.add(new vo(a))}function lc(t,e,n){if(e.repository&&e.repository[t]){const i=e.repository[t];Os([i],e,n)}}function ys(t,e){t.selfGrammar.patterns&&Array.isArray(t.selfGrammar.patterns)&&Os(t.selfGrammar.patterns,{...t,repository:t.selfGrammar.repository},e),t.selfGrammar.injections&&Os(Object.values(t.selfGrammar.injections),{...t,repository:t.selfGrammar.repository},e)}function Os(t,e,n){for(const i of t){if(n.visitedRule.has(i))continue;n.visitedRule.add(i);const r=i.repository?$p({},e.repository,i.repository):e.repository;Array.isArray(i.patterns)&&Os(i.patterns,{...e,repository:r},n);const o=i.include;if(!o)continue;const s=Kp(o);switch(s.kind){case 0:ys({...e,selfGrammar:e.baseGrammar},n);break;case 1:ys(e,n);break;case 2:lc(s.ruleName,{...e,repository:r},n);break;case 3:case 4:const a=s.scopeName===e.selfGrammar.scopeName?e.selfGrammar:s.scopeName===e.baseGrammar.scopeName?e.baseGrammar:void 0;if(a){const l={baseGrammar:e.baseGrammar,selfGrammar:a,repository:r};s.kind===4?lc(s.ruleName,l,n):ys(l,n)}else s.kind===4?n.add(new p1(s.scopeName,s.ruleName)):n.add(new vo(s.scopeName));break}}}var b1=class{kind=0},_1=class{kind=1},w1=class{constructor(t){this.ruleName=t}kind=2},x1=class{constructor(t){this.scopeName=t}kind=3},k1=class{constructor(t,e){this.scopeName=t,this.ruleName=e}kind=4};function Kp(t){if(t==="$base")return new b1;if(t==="$self")return new _1;const e=t.indexOf("#");if(e===-1)return new x1(t);if(e===0)return new w1(t.substring(1));{const n=t.substring(0,e),i=t.substring(e+1);return new k1(n,i)}}var E1=/\\(\d+)/,dh=/\\(\d+)/g,A1=-1,Xp=-2;var Po=class{$location;id;_nameIsCapturing;_name;_contentNameIsCapturing;_contentName;constructor(t,e,n,i){this.$location=t,this.id=e,this._name=n||null,this._nameIsCapturing=Ho.hasCaptures(this._name),this._contentName=i||null,this._contentNameIsCapturing=Ho.hasCaptures(this._contentName)}get debugName(){const t=this.$location?`${zp(this.$location.filename)}:${this.$location.line}`:"unknown";return`${this.constructor.name}#${this.id} @ ${t}`}getName(t,e){return!this._nameIsCapturing||this._name===null||t===null||e===null?this._name:Ho.replaceCaptures(this._name,t,e)}getContentName(t,e){return!this._contentNameIsCapturing||this._contentName===null?this._contentName:Ho.replaceCaptures(this._contentName,t,e)}},C1=class extends Po{retokenizeCapturedWithRuleId;constructor(t,e,n,i,r){super(t,e,n,i),this.retokenizeCapturedWithRuleId=r}dispose(){}collectPatterns(t,e){throw new Error("Not supported!")}compile(t,e){throw new Error("Not supported!")}compileAG(t,e,n,i){throw new Error("Not supported!")}},S1=class extends Po{_match;captures;_cachedCompiledPatterns;constructor(t,e,n,i,r){super(t,e,n,null),this._match=new bo(i,this.id),this.captures=r,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}get debugMatchRegExp(){return`${this._match.source}`}collectPatterns(t,e){e.push(this._match)}compile(t,e){return this._getCachedCompiledPatterns(t).compile(t)}compileAG(t,e,n,i){return this._getCachedCompiledPatterns(t).compileAG(t,n,i)}_getCachedCompiledPatterns(t){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new _o,this.collectPatterns(t,this._cachedCompiledPatterns)),this._cachedCompiledPatterns}},uh=class extends Po{hasMissingPatterns;patterns;_cachedCompiledPatterns;constructor(t,e,n,i,r){super(t,e,n,i),this.patterns=r.patterns,this.hasMissingPatterns=r.hasMissingPatterns,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}collectPatterns(t,e){for(const n of this.patterns)t.getRule(n).collectPatterns(t,e)}compile(t,e){return this._getCachedCompiledPatterns(t).compile(t)}compileAG(t,e,n,i){return this._getCachedCompiledPatterns(t).compileAG(t,n,i)}_getCachedCompiledPatterns(t){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new _o,this.collectPatterns(t,this._cachedCompiledPatterns)),this._cachedCompiledPatterns}},cc=class extends Po{_begin;beginCaptures;_end;endHasBackReferences;endCaptures;applyEndPatternLast;hasMissingPatterns;patterns;_cachedCompiledPatterns;constructor(t,e,n,i,r,o,s,a,l,c){super(t,e,n,i),this._begin=new bo(r,this.id),this.beginCaptures=o,this._end=new bo(s||"",-1),this.endHasBackReferences=this._end.hasBackReferences,this.endCaptures=a,this.applyEndPatternLast=l||!1,this.patterns=c.patterns,this.hasMissingPatterns=c.hasMissingPatterns,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}get debugBeginRegExp(){return`${this._begin.source}`}get debugEndRegExp(){return`${this._end.source}`}getEndWithResolvedBackReferences(t,e){return this._end.resolveBackReferences(t,e)}collectPatterns(t,e){e.push(this._begin)}compile(t,e){return this._getCachedCompiledPatterns(t,e).compile(t)}compileAG(t,e,n,i){return this._getCachedCompiledPatterns(t,e).compileAG(t,n,i)}_getCachedCompiledPatterns(t,e){if(!this._cachedCompiledPatterns){this._cachedCompiledPatterns=new _o;for(const n of this.patterns)t.getRule(n).collectPatterns(t,this._cachedCompiledPatterns);this.applyEndPatternLast?this._cachedCompiledPatterns.push(this._end.hasBackReferences?this._end.clone():this._end):this._cachedCompiledPatterns.unshift(this._end.hasBackReferences?this._end.clone():this._end)}return this._end.hasBackReferences&&(this.applyEndPatternLast?this._cachedCompiledPatterns.setSource(this._cachedCompiledPatterns.length()-1,e):this._cachedCompiledPatterns.setSource(0,e)),this._cachedCompiledPatterns}},Gs=class extends Po{_begin;beginCaptures;whileCaptures;_while;whileHasBackReferences;hasMissingPatterns;patterns;_cachedCompiledPatterns;_cachedCompiledWhilePatterns;constructor(t,e,n,i,r,o,s,a,l){super(t,e,n,i),this._begin=new bo(r,this.id),this.beginCaptures=o,this.whileCaptures=a,this._while=new bo(s,Xp),this.whileHasBackReferences=this._while.hasBackReferences,this.patterns=l.patterns,this.hasMissingPatterns=l.hasMissingPatterns,this._cachedCompiledPatterns=null,this._cachedCompiledWhilePatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null),this._cachedCompiledWhilePatterns&&(this._cachedCompiledWhilePatterns.dispose(),this._cachedCompiledWhilePatterns=null)}get debugBeginRegExp(){return`${this._begin.source}`}get debugWhileRegExp(){return`${this._while.source}`}getWhileWithResolvedBackReferences(t,e){return this._while.resolveBackReferences(t,e)}collectPatterns(t,e){e.push(this._begin)}compile(t,e){return this._getCachedCompiledPatterns(t).compile(t)}compileAG(t,e,n,i){return this._getCachedCompiledPatterns(t).compileAG(t,n,i)}_getCachedCompiledPatterns(t){if(!this._cachedCompiledPatterns){this._cachedCompiledPatterns=new _o;for(const e of this.patterns)t.getRule(e).collectPatterns(t,this._cachedCompiledPatterns)}return this._cachedCompiledPatterns}compileWhile(t,e){return this._getCachedCompiledWhilePatterns(t,e).compile(t)}compileWhileAG(t,e,n,i){return this._getCachedCompiledWhilePatterns(t,e).compileAG(t,n,i)}_getCachedCompiledWhilePatterns(t,e){return this._cachedCompiledWhilePatterns||(this._cachedCompiledWhilePatterns=new _o,this._cachedCompiledWhilePatterns.push(this._while.hasBackReferences?this._while.clone():this._while)),this._while.hasBackReferences&&this._cachedCompiledWhilePatterns.setSource(0,e||""),this._cachedCompiledWhilePatterns}},Zp=class mt{static createCaptureRule(e,n,i,r,o){return e.registerRule(s=>new C1(n,s,i,r,o))}static getCompiledRuleId(e,n,i){return e.id||n.registerRule(r=>{if(e.id=r,e.match)return new S1(e.$vscodeTextmateLocation,e.id,e.name,e.match,mt._compileCaptures(e.captures,n,i));if(typeof e.begin>"u"){e.repository&&(i=$p({},i,e.repository));let o=e.patterns;return typeof o>"u"&&e.include&&(o=[{include:e.include}]),new uh(e.$vscodeTextmateLocation,e.id,e.name,e.contentName,mt._compilePatterns(o,n,i))}return e.while?new Gs(e.$vscodeTextmateLocation,e.id,e.name,e.contentName,e.begin,mt._compileCaptures(e.beginCaptures||e.captures,n,i),e.while,mt._compileCaptures(e.whileCaptures||e.captures,n,i),mt._compilePatterns(e.patterns,n,i)):new cc(e.$vscodeTextmateLocation,e.id,e.name,e.contentName,e.begin,mt._compileCaptures(e.beginCaptures||e.captures,n,i),e.end,mt._compileCaptures(e.endCaptures||e.captures,n,i),e.applyEndPatternLast,mt._compilePatterns(e.patterns,n,i))}),e.id}static _compileCaptures(e,n,i){let r=[];if(e){let o=0;for(const s in e){if(s==="$vscodeTextmateLocation")continue;const a=parseInt(s,10);a>o&&(o=a)}for(let s=0;s<=o;s++)r[s]=null;for(const s in e){if(s==="$vscodeTextmateLocation")continue;const a=parseInt(s,10);let l=0;e[s].patterns&&(l=mt.getCompiledRuleId(e[s],n,i)),r[a]=mt.createCaptureRule(n,e[s].$vscodeTextmateLocation,e[s].name,e[s].contentName,l)}}return r}static _compilePatterns(e,n,i){let r=[];if(e)for(let o=0,s=e.length;o<s;o++){const a=e[o];let l=-1;if(a.include){const c=Kp(a.include);switch(c.kind){case 0:case 1:l=mt.getCompiledRuleId(i[a.include],n,i);break;case 2:let d=i[c.ruleName];d&&(l=mt.getCompiledRuleId(d,n,i));break;case 3:case 4:const u=c.scopeName,h=c.kind===4?c.ruleName:null,f=n.getExternalGrammar(u,i);if(f)if(h){let p=f.repository[h];p&&(l=mt.getCompiledRuleId(p,n,f.repository))}else l=mt.getCompiledRuleId(f.repository.$self,n,f.repository);break}}else l=mt.getCompiledRuleId(a,n,i);if(l!==-1){const c=n.getRule(l);let d=!1;if((c instanceof uh||c instanceof cc||c instanceof Gs)&&c.hasMissingPatterns&&c.patterns.length===0&&(d=!0),d)continue;r.push(l)}}return{patterns:r,hasMissingPatterns:(e?e.length:0)!==r.length}}},bo=class Yp{source;ruleId;hasAnchor;hasBackReferences;_anchorCache;constructor(e,n){if(e&&typeof e=="string"){const i=e.length;let r=0,o=[],s=!1;for(let a=0;a<i;a++)if(e.charAt(a)==="\\"&&a+1<i){const c=e.charAt(a+1);c==="z"?(o.push(e.substring(r,a)),o.push("$(?!\\n)(?<!\\n)"),r=a+2):(c==="A"||c==="G")&&(s=!0),a++}this.hasAnchor=s,r===0?this.source=e:(o.push(e.substring(r,i)),this.source=o.join(""))}else this.hasAnchor=!1,this.source=e;this.hasAnchor?this._anchorCache=this._buildAnchorCache():this._anchorCache=null,this.ruleId=n,typeof this.source=="string"?this.hasBackReferences=E1.test(this.source):this.hasBackReferences=!1}clone(){return new Yp(this.source,this.ruleId)}setSource(e){this.source!==e&&(this.source=e,this.hasAnchor&&(this._anchorCache=this._buildAnchorCache()))}resolveBackReferences(e,n){if(typeof this.source!="string")throw new Error("This method should only be called if the source is a string");let i=n.map(r=>e.substring(r.start,r.end));return dh.lastIndex=0,this.source.replace(dh,(r,o)=>Up(i[parseInt(o,10)]||""))}_buildAnchorCache(){if(typeof this.source!="string")throw new Error("This method should only be called if the source is a string");let e=[],n=[],i=[],r=[],o,s,a,l;for(o=0,s=this.source.length;o<s;o++)a=this.source.charAt(o),e[o]=a,n[o]=a,i[o]=a,r[o]=a,a==="\\"&&o+1<s&&(l=this.source.charAt(o+1),l==="A"?(e[o+1]="",n[o+1]="",i[o+1]="A",r[o+1]="A"):l==="G"?(e[o+1]="",n[o+1]="G",i[o+1]="",r[o+1]="G"):(e[o+1]=l,n[o+1]=l,i[o+1]=l,r[o+1]=l),o++);return{A0_G0:e.join(""),A0_G1:n.join(""),A1_G0:i.join(""),A1_G1:r.join("")}}resolveAnchors(e,n){return!this.hasAnchor||!this._anchorCache||typeof this.source!="string"?this.source:e?n?this._anchorCache.A1_G1:this._anchorCache.A1_G0:n?this._anchorCache.A0_G1:this._anchorCache.A0_G0}},_o=class{_items;_hasAnchors;_cached;_anchorCache;constructor(){this._items=[],this._hasAnchors=!1,this._cached=null,this._anchorCache={A0_G0:null,A0_G1:null,A1_G0:null,A1_G1:null}}dispose(){this._disposeCaches()}_disposeCaches(){this._cached&&(this._cached.dispose(),this._cached=null),this._anchorCache.A0_G0&&(this._anchorCache.A0_G0.dispose(),this._anchorCache.A0_G0=null),this._anchorCache.A0_G1&&(this._anchorCache.A0_G1.dispose(),this._anchorCache.A0_G1=null),this._anchorCache.A1_G0&&(this._anchorCache.A1_G0.dispose(),this._anchorCache.A1_G0=null),this._anchorCache.A1_G1&&(this._anchorCache.A1_G1.dispose(),this._anchorCache.A1_G1=null)}push(t){this._items.push(t),this._hasAnchors=this._hasAnchors||t.hasAnchor}unshift(t){this._items.unshift(t),this._hasAnchors=this._hasAnchors||t.hasAnchor}length(){return this._items.length}setSource(t,e){this._items[t].source!==e&&(this._disposeCaches(),this._items[t].setSource(e))}compile(t){if(!this._cached){let e=this._items.map(n=>n.source);this._cached=new hh(t,e,this._items.map(n=>n.ruleId))}return this._cached}compileAG(t,e,n){return this._hasAnchors?e?n?(this._anchorCache.A1_G1||(this._anchorCache.A1_G1=this._resolveAnchors(t,e,n)),this._anchorCache.A1_G1):(this._anchorCache.A1_G0||(this._anchorCache.A1_G0=this._resolveAnchors(t,e,n)),this._anchorCache.A1_G0):n?(this._anchorCache.A0_G1||(this._anchorCache.A0_G1=this._resolveAnchors(t,e,n)),this._anchorCache.A0_G1):(this._anchorCache.A0_G0||(this._anchorCache.A0_G0=this._resolveAnchors(t,e,n)),this._anchorCache.A0_G0):this.compile(t)}_resolveAnchors(t,e,n){let i=this._items.map(r=>r.resolveAnchors(e,n));return new hh(t,i,this._items.map(r=>r.ruleId))}},hh=class{constructor(t,e,n){this.regExps=e,this.rules=n,this.scanner=t.createOnigScanner(e)}scanner;dispose(){typeof this.scanner.dispose=="function"&&this.scanner.dispose()}toString(){const t=[];for(let e=0,n=this.rules.length;e<n;e++)t.push("   - "+this.rules[e]+": "+this.regExps[e]);return t.join(`
`)}findNextMatchSync(t,e,n){const i=this.scanner.findNextMatchSync(t,e,n);return i?{ruleId:this.rules[i.index],captureIndices:i.captureIndices}:null}},al=class{constructor(t,e){this.languageId=t,this.tokenType=e}},T1=class dc{_defaultAttributes;_embeddedLanguagesMatcher;constructor(e,n){this._defaultAttributes=new al(e,8),this._embeddedLanguagesMatcher=new N1(Object.entries(n||{}))}getDefaultAttributes(){return this._defaultAttributes}getBasicScopeAttributes(e){return e===null?dc._NULL_SCOPE_METADATA:this._getBasicScopeAttributes.get(e)}static _NULL_SCOPE_METADATA=new al(0,0);_getBasicScopeAttributes=new jp(e=>{const n=this._scopeToLanguage(e),i=this._toStandardTokenType(e);return new al(n,i)});_scopeToLanguage(e){return this._embeddedLanguagesMatcher.match(e)||0}_toStandardTokenType(e){const n=e.match(dc.STANDARD_TOKEN_TYPE_REGEXP);if(!n)return 8;switch(n[1]){case"comment":return 1;case"string":return 2;case"regex":return 3;case"meta.embedded":return 0}throw new Error("Unexpected match for standard token type!")}static STANDARD_TOKEN_TYPE_REGEXP=/\b(comment|string|regex|meta\.embedded)\b/},N1=class{values;scopesRegExp;constructor(t){if(t.length===0)this.values=null,this.scopesRegExp=null;else{this.values=new Map(t);const e=t.map(([n,i])=>Up(n));e.sort(),e.reverse(),this.scopesRegExp=new RegExp(`^((${e.join(")|(")}))($|\\.)`,"")}}match(t){if(!this.scopesRegExp)return;const e=t.match(this.scopesRegExp);if(e)return this.values.get(e[1])}},fh=class{constructor(t,e){this.stack=t,this.stoppedEarly=e}};function Jp(t,e,n,i,r,o,s,a){const l=e.content.length;let c=!1,d=-1;if(s){const f=R1(t,e,n,i,r,o);r=f.stack,i=f.linePos,n=f.isFirstLine,d=f.anchorPosition}const u=Date.now();for(;!c;){if(a!==0&&Date.now()-u>a)return new fh(r,!0);h()}return new fh(r,!1);function h(){const f=L1(t,e,n,i,r,d);if(!f){o.produce(r,l),c=!0;return}const p=f.captureIndices,m=f.matchedRuleId,w=p&&p.length>0?p[0].end>i:!1;if(m===A1){const _=r.getRule(t);o.produce(r,p[0].start),r=r.withContentNameScopesList(r.nameScopesList),Kr(t,e,n,r,o,_.endCaptures,p),o.produce(r,p[0].end);const x=r;if(r=r.parent,d=x.getAnchorPos(),!w&&x.getEnterPos()===i){r=x,o.produce(r,l),c=!0;return}}else{const _=t.getRule(m);o.produce(r,p[0].start);const x=r,k=_.getName(e.content,p),v=r.contentNameScopesList.pushAttributed(k,t);if(r=r.push(m,i,d,p[0].end===l,null,v,v),_ instanceof cc){const C=_;Kr(t,e,n,r,o,C.beginCaptures,p),o.produce(r,p[0].end),d=p[0].end;const A=C.getContentName(e.content,p),S=v.pushAttributed(A,t);if(r=r.withContentNameScopesList(S),C.endHasBackReferences&&(r=r.withEndRule(C.getEndWithResolvedBackReferences(e.content,p))),!w&&x.hasSameRuleAs(r)){r=r.pop(),o.produce(r,l),c=!0;return}}else if(_ instanceof Gs){const C=_;Kr(t,e,n,r,o,C.beginCaptures,p),o.produce(r,p[0].end),d=p[0].end;const A=C.getContentName(e.content,p),S=v.pushAttributed(A,t);if(r=r.withContentNameScopesList(S),C.whileHasBackReferences&&(r=r.withEndRule(C.getWhileWithResolvedBackReferences(e.content,p))),!w&&x.hasSameRuleAs(r)){r=r.pop(),o.produce(r,l),c=!0;return}}else if(Kr(t,e,n,r,o,_.captures,p),o.produce(r,p[0].end),r=r.pop(),!w){r=r.safePop(),o.produce(r,l),c=!0;return}}p[0].end>i&&(i=p[0].end,n=!1)}}function R1(t,e,n,i,r,o){let s=r.beginRuleCapturedEOL?0:-1;const a=[];for(let l=r;l;l=l.pop()){const c=l.getRule(t);c instanceof Gs&&a.push({rule:c,stack:l})}for(let l=a.pop();l;l=a.pop()){const{ruleScanner:c,findOptions:d}=D1(l.rule,t,l.stack.endRule,n,i===s),u=c.findNextMatchSync(e,i,d);if(u){if(u.ruleId!==Xp){r=l.stack.pop();break}u.captureIndices&&u.captureIndices.length&&(o.produce(l.stack,u.captureIndices[0].start),Kr(t,e,n,l.stack,o,l.rule.whileCaptures,u.captureIndices),o.produce(l.stack,u.captureIndices[0].end),s=u.captureIndices[0].end,u.captureIndices[0].end>i&&(i=u.captureIndices[0].end,n=!1))}else{r=l.stack.pop();break}}return{stack:r,linePos:i,anchorPosition:s,isFirstLine:n}}function L1(t,e,n,i,r,o){const s=I1(t,e,n,i,r,o),a=t.getInjections();if(a.length===0)return s;const l=P1(a,t,e,n,i,r,o);if(!l)return s;if(!s)return l;const c=s.captureIndices[0].start,d=l.captureIndices[0].start;return d<c||l.priorityMatch&&d===c?l:s}function I1(t,e,n,i,r,o){const s=r.getRule(t),{ruleScanner:a,findOptions:l}=Qp(s,t,r.endRule,n,i===o),c=a.findNextMatchSync(e,i,l);return c?{captureIndices:c.captureIndices,matchedRuleId:c.ruleId}:null}function P1(t,e,n,i,r,o,s){let a=Number.MAX_VALUE,l=null,c,d=0;const u=o.contentNameScopesList.getScopeNames();for(let h=0,f=t.length;h<f;h++){const p=t[h];if(!p.matcher(u))continue;const m=e.getRule(p.ruleId),{ruleScanner:w,findOptions:_}=Qp(m,e,null,i,r===s),x=w.findNextMatchSync(n,r,_);if(!x)continue;const k=x.captureIndices[0].start;if(!(k>=a)&&(a=k,l=x.captureIndices,c=x.ruleId,d=p.priority,a===r))break}return l?{priorityMatch:d===-1,captureIndices:l,matchedRuleId:c}:null}function Qp(t,e,n,i,r){return{ruleScanner:t.compileAG(e,n,i,r),findOptions:0}}function D1(t,e,n,i,r){return{ruleScanner:t.compileWhileAG(e,n,i,r),findOptions:0}}function Kr(t,e,n,i,r,o,s){if(o.length===0)return;const a=e.content,l=Math.min(o.length,s.length),c=[],d=s[0].end;for(let u=0;u<l;u++){const h=o[u];if(h===null)continue;const f=s[u];if(f.length===0)continue;if(f.start>d)break;for(;c.length>0&&c[c.length-1].endPos<=f.start;)r.produceFromScopes(c[c.length-1].scopes,c[c.length-1].endPos),c.pop();if(c.length>0?r.produceFromScopes(c[c.length-1].scopes,f.start):r.produce(i,f.start),h.retokenizeCapturedWithRuleId){const m=h.getName(a,s),w=i.contentNameScopesList.pushAttributed(m,t),_=h.getContentName(a,s),x=w.pushAttributed(_,t),k=i.push(h.retokenizeCapturedWithRuleId,f.start,-1,!1,null,w,x),v=t.createOnigString(a.substring(0,f.end));Jp(t,v,n&&f.start===0,f.start,k,r,!1,0),qp(v);continue}const p=h.getName(a,s);if(p!==null){const w=(c.length>0?c[c.length-1].scopes:i.contentNameScopesList).pushAttributed(p,t);c.push(new M1(w,f.end))}}for(;c.length>0;)r.produceFromScopes(c[c.length-1].scopes,c[c.length-1].endPos),c.pop()}var M1=class{scopes;endPos;constructor(t,e){this.scopes=t,this.endPos=e}};function O1(t,e,n,i,r,o,s,a){return new F1(t,e,n,i,r,o,s,a)}function gh(t,e,n,i,r){const o=Ms(e,Fs),s=Zp.getCompiledRuleId(n,i,r.repository);for(const a of o)t.push({debugSelector:e,matcher:a.matcher,ruleId:s,grammar:r,priority:a.priority})}function Fs(t,e){if(e.length<t.length)return!1;let n=0;return t.every(i=>{for(let r=n;r<e.length;r++)if(G1(e[r],i))return n=r+1,!0;return!1})}function G1(t,e){if(!t)return!1;if(t===e)return!0;const n=e.length;return t.length>n&&t.substr(0,n)===e&&t[n]==="."}var F1=class{constructor(t,e,n,i,r,o,s,a){if(this._rootScopeName=t,this.balancedBracketSelectors=o,this._onigLib=a,this._basicScopeAttributesProvider=new T1(n,i),this._rootId=-1,this._lastRuleId=0,this._ruleId2desc=[null],this._includedGrammars={},this._grammarRepository=s,this._grammar=ph(e,null),this._injections=null,this._tokenTypeMatchers=[],r)for(const l of Object.keys(r)){const c=Ms(l,Fs);for(const d of c)this._tokenTypeMatchers.push({matcher:d.matcher,type:r[l]})}}_rootId;_lastRuleId;_ruleId2desc;_includedGrammars;_grammarRepository;_grammar;_injections;_basicScopeAttributesProvider;_tokenTypeMatchers;get themeProvider(){return this._grammarRepository}dispose(){for(const t of this._ruleId2desc)t&&t.dispose()}createOnigScanner(t){return this._onigLib.createOnigScanner(t)}createOnigString(t){return this._onigLib.createOnigString(t)}getMetadataForScope(t){return this._basicScopeAttributesProvider.getBasicScopeAttributes(t)}_collectInjections(){const t={lookup:r=>r===this._rootScopeName?this._grammar:this.getExternalGrammar(r),injections:r=>this._grammarRepository.injections(r)},e=[],n=this._rootScopeName,i=t.lookup(n);if(i){const r=i.injections;if(r)for(let s in r)gh(e,s,r[s],this,i);const o=this._grammarRepository.injections(n);o&&o.forEach(s=>{const a=this.getExternalGrammar(s);if(a){const l=a.injectionSelector;l&&gh(e,l,a,this,a)}})}return e.sort((r,o)=>r.priority-o.priority),e}getInjections(){return this._injections===null&&(this._injections=this._collectInjections()),this._injections}registerRule(t){const e=++this._lastRuleId,n=t(e);return this._ruleId2desc[e]=n,n}getRule(t){return this._ruleId2desc[t]}getExternalGrammar(t,e){if(this._includedGrammars[t])return this._includedGrammars[t];if(this._grammarRepository){const n=this._grammarRepository.lookup(t);if(n)return this._includedGrammars[t]=ph(n,e&&e.$base),this._includedGrammars[t]}}tokenizeLine(t,e,n=0){const i=this._tokenize(t,e,!1,n);return{tokens:i.lineTokens.getResult(i.ruleStack,i.lineLength),ruleStack:i.ruleStack,stoppedEarly:i.stoppedEarly}}tokenizeLine2(t,e,n=0){const i=this._tokenize(t,e,!0,n);return{tokens:i.lineTokens.getBinaryResult(i.ruleStack,i.lineLength),ruleStack:i.ruleStack,stoppedEarly:i.stoppedEarly}}_tokenize(t,e,n,i){this._rootId===-1&&(this._rootId=Zp.getCompiledRuleId(this._grammar.repository.$self,this,this._grammar.repository),this.getInjections());let r;if(!e||e===uc.NULL){r=!0;const c=this._basicScopeAttributesProvider.getDefaultAttributes(),d=this.themeProvider.getDefaults(),u=_r.set(0,c.languageId,c.tokenType,null,d.fontStyle,d.foregroundId,d.backgroundId),h=this.getRule(this._rootId).getName(null,null);let f;h?f=oo.createRootAndLookUpScopeName(h,u,this):f=oo.createRoot("unknown",u),e=new uc(null,this._rootId,-1,-1,!1,null,f,f)}else r=!1,e.reset();t=t+`
`;const o=this.createOnigString(t),s=o.content.length,a=new z1(n,t,this._tokenTypeMatchers,this.balancedBracketSelectors),l=Jp(this,o,r,0,e,a,!0,i);return qp(o),{lineLength:s,lineTokens:a,ruleStack:l.stack,stoppedEarly:l.stoppedEarly}}};function ph(t,e){return t=i1(t),t.repository=t.repository||{},t.repository.$self={$vscodeTextmateLocation:t.$vscodeTextmateLocation,patterns:t.patterns,name:t.scopeName},t.repository.$base=e||t.repository.$self,t}var oo=class yn{constructor(e,n,i){this.parent=e,this.scopePath=n,this.tokenAttributes=i}static fromExtension(e,n){let i=e,r=e?.scopePath??null;for(const o of n)r=sl.push(r,o.scopeNames),i=new yn(i,r,o.encodedTokenAttributes);return i}static createRoot(e,n){return new yn(null,new sl(null,e),n)}static createRootAndLookUpScopeName(e,n,i){const r=i.getMetadataForScope(e),o=new sl(null,e),s=i.themeProvider.themeMatch(o),a=yn.mergeAttributes(n,r,s);return new yn(null,o,a)}get scopeName(){return this.scopePath.scopeName}toString(){return this.getScopeNames().join(" ")}equals(e){return yn.equals(this,e)}static equals(e,n){do{if(e===n||!e&&!n)return!0;if(!e||!n||e.scopeName!==n.scopeName||e.tokenAttributes!==n.tokenAttributes)return!1;e=e.parent,n=n.parent}while(!0)}static mergeAttributes(e,n,i){let r=-1,o=0,s=0;return i!==null&&(r=i.fontStyle,o=i.foregroundId,s=i.backgroundId),_r.set(e,n.languageId,n.tokenType,null,r,o,s)}pushAttributed(e,n){if(e===null)return this;if(e.indexOf(" ")===-1)return yn._pushAttributed(this,e,n);const i=e.split(/ /g);let r=this;for(const o of i)r=yn._pushAttributed(r,o,n);return r}static _pushAttributed(e,n,i){const r=i.getMetadataForScope(n),o=e.scopePath.push(n),s=i.themeProvider.themeMatch(o),a=yn.mergeAttributes(e.tokenAttributes,r,s);return new yn(e,o,a)}getScopeNames(){return this.scopePath.getSegments()}getExtensionIfDefined(e){const n=[];let i=this;for(;i&&i!==e;)n.push({encodedTokenAttributes:i.tokenAttributes,scopeNames:i.scopePath.getExtensionIfDefined(i.parent?.scopePath??null)}),i=i.parent;return i===e?n.reverse():void 0}},uc=class Ci{constructor(e,n,i,r,o,s,a,l){this.parent=e,this.ruleId=n,this.beginRuleCapturedEOL=o,this.endRule=s,this.nameScopesList=a,this.contentNameScopesList=l,this.depth=this.parent?this.parent.depth+1:1,this._enterPos=i,this._anchorPos=r}_stackElementBrand=void 0;static NULL=new Ci(null,0,0,0,!1,null,null,null);_enterPos;_anchorPos;depth;equals(e){return e===null?!1:Ci._equals(this,e)}static _equals(e,n){return e===n?!0:this._structuralEquals(e,n)?oo.equals(e.contentNameScopesList,n.contentNameScopesList):!1}static _structuralEquals(e,n){do{if(e===n||!e&&!n)return!0;if(!e||!n||e.depth!==n.depth||e.ruleId!==n.ruleId||e.endRule!==n.endRule)return!1;e=e.parent,n=n.parent}while(!0)}clone(){return this}static _reset(e){for(;e;)e._enterPos=-1,e._anchorPos=-1,e=e.parent}reset(){Ci._reset(this)}pop(){return this.parent}safePop(){return this.parent?this.parent:this}push(e,n,i,r,o,s,a){return new Ci(this,e,n,i,r,o,s,a)}getEnterPos(){return this._enterPos}getAnchorPos(){return this._anchorPos}getRule(e){return e.getRule(this.ruleId)}toString(){const e=[];return this._writeString(e,0),"["+e.join(",")+"]"}_writeString(e,n){return this.parent&&(n=this.parent._writeString(e,n)),e[n++]=`(${this.ruleId}, ${this.nameScopesList?.toString()}, ${this.contentNameScopesList?.toString()})`,n}withContentNameScopesList(e){return this.contentNameScopesList===e?this:this.parent.push(this.ruleId,this._enterPos,this._anchorPos,this.beginRuleCapturedEOL,this.endRule,this.nameScopesList,e)}withEndRule(e){return this.endRule===e?this:new Ci(this.parent,this.ruleId,this._enterPos,this._anchorPos,this.beginRuleCapturedEOL,e,this.nameScopesList,this.contentNameScopesList)}hasSameRuleAs(e){let n=this;for(;n&&n._enterPos===e._enterPos;){if(n.ruleId===e.ruleId)return!0;n=n.parent}return!1}toStateStackFrame(){return{ruleId:this.ruleId,beginRuleCapturedEOL:this.beginRuleCapturedEOL,endRule:this.endRule,nameScopesList:this.nameScopesList?.getExtensionIfDefined(this.parent?.nameScopesList??null)??[],contentNameScopesList:this.contentNameScopesList?.getExtensionIfDefined(this.nameScopesList)??[]}}static pushFrame(e,n){const i=oo.fromExtension(e?.nameScopesList??null,n.nameScopesList);return new Ci(e,n.ruleId,n.enterPos??-1,n.anchorPos??-1,n.beginRuleCapturedEOL,n.endRule,i,oo.fromExtension(i,n.contentNameScopesList))}},$1=class{balancedBracketScopes;unbalancedBracketScopes;allowAny=!1;constructor(t,e){this.balancedBracketScopes=t.flatMap(n=>n==="*"?(this.allowAny=!0,[]):Ms(n,Fs).map(i=>i.matcher)),this.unbalancedBracketScopes=e.flatMap(n=>Ms(n,Fs).map(i=>i.matcher))}get matchesAlways(){return this.allowAny&&this.unbalancedBracketScopes.length===0}get matchesNever(){return this.balancedBracketScopes.length===0&&!this.allowAny}match(t){for(const e of this.unbalancedBracketScopes)if(e(t))return!1;for(const e of this.balancedBracketScopes)if(e(t))return!0;return this.allowAny}},z1=class{constructor(t,e,n,i){this.balancedBracketSelectors=i,this._emitBinaryTokens=t,this._tokenTypeOverrides=n,this._lineText=null,this._tokens=[],this._binaryTokens=[],this._lastTokenEndIndex=0}_emitBinaryTokens;_lineText;_tokens;_binaryTokens;_lastTokenEndIndex;_tokenTypeOverrides;produce(t,e){this.produceFromScopes(t.contentNameScopesList,e)}produceFromScopes(t,e){if(this._lastTokenEndIndex>=e)return;if(this._emitBinaryTokens){let i=t?.tokenAttributes??0,r=!1;if(this.balancedBracketSelectors?.matchesAlways&&(r=!0),this._tokenTypeOverrides.length>0||this.balancedBracketSelectors&&!this.balancedBracketSelectors.matchesAlways&&!this.balancedBracketSelectors.matchesNever){const o=t?.getScopeNames()??[];for(const s of this._tokenTypeOverrides)s.matcher(o)&&(i=_r.set(i,0,s.type,null,-1,0,0));this.balancedBracketSelectors&&(r=this.balancedBracketSelectors.match(o))}if(r&&(i=_r.set(i,0,8,r,-1,0,0)),this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-1]===i){this._lastTokenEndIndex=e;return}this._binaryTokens.push(this._lastTokenEndIndex),this._binaryTokens.push(i),this._lastTokenEndIndex=e;return}const n=t?.getScopeNames()??[];this._tokens.push({startIndex:this._lastTokenEndIndex,endIndex:e,scopes:n}),this._lastTokenEndIndex=e}getResult(t,e){return this._tokens.length>0&&this._tokens[this._tokens.length-1].startIndex===e-1&&this._tokens.pop(),this._tokens.length===0&&(this._lastTokenEndIndex=-1,this.produce(t,e),this._tokens[this._tokens.length-1].startIndex=0),this._tokens}getBinaryResult(t,e){this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-2]===e-1&&(this._binaryTokens.pop(),this._binaryTokens.pop()),this._binaryTokens.length===0&&(this._lastTokenEndIndex=-1,this.produce(t,e),this._binaryTokens[this._binaryTokens.length-2]=0);const n=new Uint32Array(this._binaryTokens.length);for(let i=0,r=this._binaryTokens.length;i<r;i++)n[i]=this._binaryTokens[i];return n}},B1=class{constructor(t,e){this._onigLib=e,this._theme=t}_grammars=new Map;_rawGrammars=new Map;_injectionGrammars=new Map;_theme;dispose(){for(const t of this._grammars.values())t.dispose()}setTheme(t){this._theme=t}getColorMap(){return this._theme.getColorMap()}addGrammar(t,e){this._rawGrammars.set(t.scopeName,t),e&&this._injectionGrammars.set(t.scopeName,e)}lookup(t){return this._rawGrammars.get(t)}injections(t){return this._injectionGrammars.get(t)}getDefaults(){return this._theme.getDefaults()}themeMatch(t){return this._theme.match(t)}grammarForScopeName(t,e,n,i,r){if(!this._grammars.has(t)){let o=this._rawGrammars.get(t);if(!o)return null;this._grammars.set(t,O1(t,o,e,n,i,r,this,this._onigLib))}return this._grammars.get(t)}},V1=class{_options;_syncRegistry;_ensureGrammarCache;constructor(e){this._options=e,this._syncRegistry=new B1(Ds.createFromRawTheme(e.theme,e.colorMap),e.onigLib),this._ensureGrammarCache=new Map}dispose(){this._syncRegistry.dispose()}setTheme(e,n){this._syncRegistry.setTheme(Ds.createFromRawTheme(e,n))}getColorMap(){return this._syncRegistry.getColorMap()}loadGrammarWithEmbeddedLanguages(e,n,i){return this.loadGrammarWithConfiguration(e,n,{embeddedLanguages:i})}loadGrammarWithConfiguration(e,n,i){return this._loadGrammar(e,n,i.embeddedLanguages,i.tokenTypes,new $1(i.balancedBracketSelectors||[],i.unbalancedBracketSelectors||[]))}loadGrammar(e){return this._loadGrammar(e,0,null,null,null)}_loadGrammar(e,n,i,r,o){const s=new y1(this._syncRegistry,e);for(;s.Q.length>0;)s.Q.map(a=>this._loadSingleGrammar(a.scopeName)),s.processQueue();return this._grammarForScopeName(e,n,i,r,o)}_loadSingleGrammar(e){this._ensureGrammarCache.has(e)||(this._doLoadSingleGrammar(e),this._ensureGrammarCache.set(e,!0))}_doLoadSingleGrammar(e){const n=this._options.loadGrammar(e);if(n){const i=typeof this._options.getInjections=="function"?this._options.getInjections(e):void 0;this._syncRegistry.addGrammar(n,i)}}addGrammar(e,n=[],i=0,r=null){return this._syncRegistry.addGrammar(e,n),this._grammarForScopeName(e.scopeName,i,r)}_grammarForScopeName(e,n=0,i=null,r=null,o=null){return this._syncRegistry.grammarForScopeName(e,n,i,r,o)}},hc=uc.NULL;const U1=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"];class Do{constructor(e,n,i){this.normal=n,this.property=e,i&&(this.space=i)}}Do.prototype.normal={};Do.prototype.property={};Do.prototype.space=void 0;function em(t,e){const n={},i={};for(const r of t)Object.assign(n,r.property),Object.assign(i,r.normal);return new Do(n,i,e)}function fc(t){return t.toLowerCase()}class Gt{constructor(e,n){this.attribute=n,this.property=e}}Gt.prototype.attribute="";Gt.prototype.booleanish=!1;Gt.prototype.boolean=!1;Gt.prototype.commaOrSpaceSeparated=!1;Gt.prototype.commaSeparated=!1;Gt.prototype.defined=!1;Gt.prototype.mustUseProperty=!1;Gt.prototype.number=!1;Gt.prototype.overloadedBoolean=!1;Gt.prototype.property="";Gt.prototype.spaceSeparated=!1;Gt.prototype.space=void 0;let j1=0;const Pe=Vi(),tt=Vi(),gc=Vi(),de=Vi(),He=Vi(),cr=Vi(),zt=Vi();function Vi(){return 2**++j1}const pc=Object.freeze(Object.defineProperty({__proto__:null,boolean:Pe,booleanish:tt,commaOrSpaceSeparated:zt,commaSeparated:cr,number:de,overloadedBoolean:gc,spaceSeparated:He},Symbol.toStringTag,{value:"Module"})),ll=Object.keys(pc);class _d extends Gt{constructor(e,n,i,r){let o=-1;if(super(e,n),mh(this,"space",r),typeof i=="number")for(;++o<ll.length;){const s=ll[o];mh(this,ll[o],(i&pc[s])===pc[s])}}}_d.prototype.defined=!0;function mh(t,e,n){n&&(t[e]=n)}function Sr(t){const e={},n={};for(const[i,r]of Object.entries(t.properties)){const o=new _d(i,t.transform(t.attributes||{},i),r,t.space);t.mustUseProperty&&t.mustUseProperty.includes(i)&&(o.mustUseProperty=!0),e[i]=o,n[fc(i)]=i,n[fc(o.attribute)]=i}return new Do(e,n,t.space)}const tm=Sr({properties:{ariaActiveDescendant:null,ariaAtomic:tt,ariaAutoComplete:null,ariaBusy:tt,ariaChecked:tt,ariaColCount:de,ariaColIndex:de,ariaColSpan:de,ariaControls:He,ariaCurrent:null,ariaDescribedBy:He,ariaDetails:null,ariaDisabled:tt,ariaDropEffect:He,ariaErrorMessage:null,ariaExpanded:tt,ariaFlowTo:He,ariaGrabbed:tt,ariaHasPopup:null,ariaHidden:tt,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:He,ariaLevel:de,ariaLive:null,ariaModal:tt,ariaMultiLine:tt,ariaMultiSelectable:tt,ariaOrientation:null,ariaOwns:He,ariaPlaceholder:null,ariaPosInSet:de,ariaPressed:tt,ariaReadOnly:tt,ariaRelevant:null,ariaRequired:tt,ariaRoleDescription:He,ariaRowCount:de,ariaRowIndex:de,ariaRowSpan:de,ariaSelected:tt,ariaSetSize:de,ariaSort:null,ariaValueMax:de,ariaValueMin:de,ariaValueNow:de,ariaValueText:null,role:null},transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function nm(t,e){return e in t?t[e]:e}function im(t,e){return nm(t,e.toLowerCase())}const H1=Sr({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:cr,acceptCharset:He,accessKey:He,action:null,allow:null,allowFullScreen:Pe,allowPaymentRequest:Pe,allowUserMedia:Pe,alt:null,as:null,async:Pe,autoCapitalize:null,autoComplete:He,autoFocus:Pe,autoPlay:Pe,blocking:He,capture:null,charSet:null,checked:Pe,cite:null,className:He,cols:de,colSpan:null,content:null,contentEditable:tt,controls:Pe,controlsList:He,coords:de|cr,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Pe,defer:Pe,dir:null,dirName:null,disabled:Pe,download:gc,draggable:tt,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Pe,formTarget:null,headers:He,height:de,hidden:gc,high:de,href:null,hrefLang:null,htmlFor:He,httpEquiv:He,id:null,imageSizes:null,imageSrcSet:null,inert:Pe,inputMode:null,integrity:null,is:null,isMap:Pe,itemId:null,itemProp:He,itemRef:He,itemScope:Pe,itemType:He,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Pe,low:de,manifest:null,max:null,maxLength:de,media:null,method:null,min:null,minLength:de,multiple:Pe,muted:Pe,name:null,nonce:null,noModule:Pe,noValidate:Pe,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Pe,optimum:de,pattern:null,ping:He,placeholder:null,playsInline:Pe,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Pe,referrerPolicy:null,rel:He,required:Pe,reversed:Pe,rows:de,rowSpan:de,sandbox:He,scope:null,scoped:Pe,seamless:Pe,selected:Pe,shadowRootClonable:Pe,shadowRootDelegatesFocus:Pe,shadowRootMode:null,shape:null,size:de,sizes:null,slot:null,span:de,spellCheck:tt,src:null,srcDoc:null,srcLang:null,srcSet:null,start:de,step:null,style:null,tabIndex:de,target:null,title:null,translate:null,type:null,typeMustMatch:Pe,useMap:null,value:tt,width:de,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:He,axis:null,background:null,bgColor:null,border:de,borderColor:null,bottomMargin:de,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Pe,declare:Pe,event:null,face:null,frame:null,frameBorder:null,hSpace:de,leftMargin:de,link:null,longDesc:null,lowSrc:null,marginHeight:de,marginWidth:de,noResize:Pe,noHref:Pe,noShade:Pe,noWrap:Pe,object:null,profile:null,prompt:null,rev:null,rightMargin:de,rules:null,scheme:null,scrolling:tt,standby:null,summary:null,text:null,topMargin:de,valueType:null,version:null,vAlign:null,vLink:null,vSpace:de,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Pe,disableRemotePlayback:Pe,prefix:null,property:null,results:de,security:null,unselectable:null},space:"html",transform:im}),W1=Sr({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:zt,accentHeight:de,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:de,amplitude:de,arabicForm:null,ascent:de,attributeName:null,attributeType:null,azimuth:de,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:de,by:null,calcMode:null,capHeight:de,className:He,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:de,diffuseConstant:de,direction:null,display:null,dur:null,divisor:de,dominantBaseline:null,download:Pe,dx:null,dy:null,edgeMode:null,editable:null,elevation:de,enableBackground:null,end:null,event:null,exponent:de,externalResourcesRequired:null,fill:null,fillOpacity:de,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:cr,g2:cr,glyphName:cr,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:de,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:de,horizOriginX:de,horizOriginY:de,id:null,ideographic:de,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:de,k:de,k1:de,k2:de,k3:de,k4:de,kernelMatrix:zt,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:de,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:de,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:de,overlineThickness:de,paintOrder:null,panose1:null,path:null,pathLength:de,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:He,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:de,pointsAtY:de,pointsAtZ:de,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:zt,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:zt,rev:zt,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:zt,requiredFeatures:zt,requiredFonts:zt,requiredFormats:zt,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:de,specularExponent:de,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:de,strikethroughThickness:de,string:null,stroke:null,strokeDashArray:zt,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:de,strokeOpacity:de,strokeWidth:null,style:null,surfaceScale:de,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:zt,tabIndex:de,tableValues:null,target:null,targetX:de,targetY:de,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:zt,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:de,underlineThickness:de,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:de,values:null,vAlphabetic:de,vMathematical:de,vectorEffect:null,vHanging:de,vIdeographic:de,version:null,vertAdvY:de,vertOriginX:de,vertOriginY:de,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:de,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:nm}),rm=Sr({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()}}),om=Sr({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:im}),sm=Sr({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()}}),q1=/[A-Z]/g,yh=/-[a-z]/g,K1=/^data[-\w.:]+$/i;function X1(t,e){const n=fc(e);let i=e,r=Gt;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&K1.test(e)){if(e.charAt(4)==="-"){const o=e.slice(5).replace(yh,Y1);i="data"+o.charAt(0).toUpperCase()+o.slice(1)}else{const o=e.slice(4);if(!yh.test(o)){let s=o.replace(q1,Z1);s.charAt(0)!=="-"&&(s="-"+s),e="data"+s}}r=_d}return new r(i,e)}function Z1(t){return"-"+t.toLowerCase()}function Y1(t){return t.charAt(1).toUpperCase()}const J1=em([tm,H1,rm,om,sm],"html"),am=em([tm,W1,rm,om,sm],"svg"),vh={}.hasOwnProperty;function Q1(t,e){const n=e||{};function i(r,...o){let s=i.invalid;const a=i.handlers;if(r&&vh.call(r,t)){const l=String(r[t]);s=vh.call(a,l)?a[l]:i.unknown}if(s)return s.call(this,r,...o)}return i.handlers=n.handlers||{},i.invalid=n.invalid,i.unknown=n.unknown,i}const ex=/["&'<>`]/g,tx=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,nx=/[\x01-\t\v\f\x0E-\x1F\x7F\x81\x8D\x8F\x90\x9D\xA0-\uFFFF]/g,ix=/[|\\{}()[\]^$+*?.]/g,bh=new WeakMap;function rx(t,e){if(t=t.replace(e.subset?ox(e.subset):ex,i),e.subset||e.escapeOnly)return t;return t.replace(tx,n).replace(nx,i);function n(r,o,s){return e.format((r.charCodeAt(0)-55296)*1024+r.charCodeAt(1)-56320+65536,s.charCodeAt(o+2),e)}function i(r,o,s){return e.format(r.charCodeAt(0),s.charCodeAt(o+1),e)}}function ox(t){let e=bh.get(t);return e||(e=sx(t),bh.set(t,e)),e}function sx(t){const e=[];let n=-1;for(;++n<t.length;)e.push(t[n].replace(ix,"\\$&"));return new RegExp("(?:"+e.join("|")+")","g")}const ax=/[\dA-Fa-f]/;function lx(t,e,n){const i="&#x"+t.toString(16).toUpperCase();return n&&e&&!ax.test(String.fromCharCode(e))?i:i+";"}const cx=/\d/;function dx(t,e,n){const i="&#"+String(t);return n&&e&&!cx.test(String.fromCharCode(e))?i:i+";"}const ux=["AElig","AMP","Aacute","Acirc","Agrave","Aring","Atilde","Auml","COPY","Ccedil","ETH","Eacute","Ecirc","Egrave","Euml","GT","Iacute","Icirc","Igrave","Iuml","LT","Ntilde","Oacute","Ocirc","Ograve","Oslash","Otilde","Ouml","QUOT","REG","THORN","Uacute","Ucirc","Ugrave","Uuml","Yacute","aacute","acirc","acute","aelig","agrave","amp","aring","atilde","auml","brvbar","ccedil","cedil","cent","copy","curren","deg","divide","eacute","ecirc","egrave","eth","euml","frac12","frac14","frac34","gt","iacute","icirc","iexcl","igrave","iquest","iuml","laquo","lt","macr","micro","middot","nbsp","not","ntilde","oacute","ocirc","ograve","ordf","ordm","oslash","otilde","ouml","para","plusmn","pound","quot","raquo","reg","sect","shy","sup1","sup2","sup3","szlig","thorn","times","uacute","ucirc","ugrave","uml","uuml","yacute","yen","yuml"],cl={nbsp:"",iexcl:"",cent:"",pound:"",curren:"",yen:"",brvbar:"",sect:"",uml:"",copy:"",ordf:"",laquo:"",not:"",shy:"",reg:"",macr:"",deg:"",plusmn:"",sup2:"",sup3:"",acute:"",micro:"",para:"",middot:"",cedil:"",sup1:"",ordm:"",raquo:"",frac14:"",frac12:"",frac34:"",iquest:"",Agrave:"",Aacute:"",Acirc:"",Atilde:"",Auml:"",Aring:"",AElig:"",Ccedil:"",Egrave:"",Eacute:"",Ecirc:"",Euml:"",Igrave:"",Iacute:"",Icirc:"",Iuml:"",ETH:"",Ntilde:"",Ograve:"",Oacute:"",Ocirc:"",Otilde:"",Ouml:"",times:"",Oslash:"",Ugrave:"",Uacute:"",Ucirc:"",Uuml:"",Yacute:"",THORN:"",szlig:"",agrave:"",aacute:"",acirc:"",atilde:"",auml:"",aring:"",aelig:"",ccedil:"",egrave:"",eacute:"",ecirc:"",euml:"",igrave:"",iacute:"",icirc:"",iuml:"",eth:"",ntilde:"",ograve:"",oacute:"",ocirc:"",otilde:"",ouml:"",divide:"",oslash:"",ugrave:"",uacute:"",ucirc:"",uuml:"",yacute:"",thorn:"",yuml:"",fnof:"",Alpha:"",Beta:"",Gamma:"",Delta:"",Epsilon:"",Zeta:"",Eta:"",Theta:"",Iota:"",Kappa:"",Lambda:"",Mu:"",Nu:"",Xi:"",Omicron:"",Pi:"",Rho:"",Sigma:"",Tau:"",Upsilon:"",Phi:"",Chi:"",Psi:"",Omega:"",alpha:"",beta:"",gamma:"",delta:"",epsilon:"",zeta:"",eta:"",theta:"",iota:"",kappa:"",lambda:"",mu:"",nu:"",xi:"",omicron:"",pi:"",rho:"",sigmaf:"",sigma:"",tau:"",upsilon:"",phi:"",chi:"",psi:"",omega:"",thetasym:"",upsih:"",piv:"",bull:"",hellip:"",prime:"",Prime:"",oline:"",frasl:"",weierp:"",image:"",real:"",trade:"",alefsym:"",larr:"",uarr:"",rarr:"",darr:"",harr:"",crarr:"",lArr:"",uArr:"",rArr:"",dArr:"",hArr:"",forall:"",part:"",exist:"",empty:"",nabla:"",isin:"",notin:"",ni:"",prod:"",sum:"",minus:"",lowast:"",radic:"",prop:"",infin:"",ang:"",and:"",or:"",cap:"",cup:"",int:"",there4:"",sim:"",cong:"",asymp:"",ne:"",equiv:"",le:"",ge:"",sub:"",sup:"",nsub:"",sube:"",supe:"",oplus:"",otimes:"",perp:"",sdot:"",lceil:"",rceil:"",lfloor:"",rfloor:"",lang:"",rang:"",loz:"",spades:"",clubs:"",hearts:"",diams:"",quot:'"',amp:"&",lt:"<",gt:">",OElig:"",oelig:"",Scaron:"",scaron:"",Yuml:"",circ:"",tilde:"",ensp:"",emsp:"",thinsp:"",zwnj:"",zwj:"",lrm:"",rlm:"",ndash:"",mdash:"",lsquo:"",rsquo:"",sbquo:"",ldquo:"",rdquo:"",bdquo:"",dagger:"",Dagger:"",permil:"",lsaquo:"",rsaquo:"",euro:""},hx=["cent","copy","divide","gt","lt","not","para","times"],lm={}.hasOwnProperty,mc={};let Wo;for(Wo in cl)lm.call(cl,Wo)&&(mc[cl[Wo]]=Wo);const fx=/[^\dA-Za-z]/;function gx(t,e,n,i){const r=String.fromCharCode(t);if(lm.call(mc,r)){const o=mc[r],s="&"+o;return n&&ux.includes(o)&&!hx.includes(o)&&(!i||e&&e!==61&&fx.test(String.fromCharCode(e)))?s:s+";"}return""}function px(t,e,n){let i=lx(t,e,n.omitOptionalSemicolons),r;if((n.useNamedReferences||n.useShortestReferences)&&(r=gx(t,e,n.omitOptionalSemicolons,n.attribute)),(n.useShortestReferences||!r)&&n.useShortestReferences){const o=dx(t,e,n.omitOptionalSemicolons);o.length<i.length&&(i=o)}return r&&(!n.useShortestReferences||r.length<i.length)?r:i}function dr(t,e){return rx(t,Object.assign({format:px},e))}const mx=/^>|^->|<!--|-->|--!>|<!-$/g,yx=[">"],vx=["<",">"];function bx(t,e,n,i){return i.settings.bogusComments?"<?"+dr(t.value,Object.assign({},i.settings.characterReferences,{subset:yx}))+">":"<!--"+t.value.replace(mx,r)+"-->";function r(o){return dr(o,Object.assign({},i.settings.characterReferences,{subset:vx}))}}function _x(t,e,n,i){return"<!"+(i.settings.upperDoctype?"DOCTYPE":"doctype")+(i.settings.tightDoctype?"":" ")+"html>"}function _h(t,e){const n=String(t);if(typeof e!="string")throw new TypeError("Expected character");let i=0,r=n.indexOf(e);for(;r!==-1;)i++,r=n.indexOf(e,r+e.length);return i}function wx(t,e){const n=e||{};return(t[t.length-1]===""?[...t,""]:t).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}function xx(t){return t.join(" ").trim()}const kx=/[ \t\n\f\r]/g;function wd(t){return typeof t=="object"?t.type==="text"?wh(t.value):!1:wh(t)}function wh(t){return t.replace(kx,"")===""}const at=dm(1),cm=dm(-1),Ex=[];function dm(t){return e;function e(n,i,r){const o=n?n.children:Ex;let s=(i||0)+t,a=o[s];if(!r)for(;a&&wd(a);)s+=t,a=o[s];return a}}const Ax={}.hasOwnProperty;function um(t){return e;function e(n,i,r){return Ax.call(t,n.tagName)&&t[n.tagName](n,i,r)}}const xd=um({body:Sx,caption:dl,colgroup:dl,dd:Lx,dt:Rx,head:dl,html:Cx,li:Nx,optgroup:Ix,option:Px,p:Tx,rp:xh,rt:xh,tbody:Mx,td:kh,tfoot:Ox,th:kh,thead:Dx,tr:Gx});function dl(t,e,n){const i=at(n,e,!0);return!i||i.type!=="comment"&&!(i.type==="text"&&wd(i.value.charAt(0)))}function Cx(t,e,n){const i=at(n,e);return!i||i.type!=="comment"}function Sx(t,e,n){const i=at(n,e);return!i||i.type!=="comment"}function Tx(t,e,n){const i=at(n,e);return i?i.type==="element"&&(i.tagName==="address"||i.tagName==="article"||i.tagName==="aside"||i.tagName==="blockquote"||i.tagName==="details"||i.tagName==="div"||i.tagName==="dl"||i.tagName==="fieldset"||i.tagName==="figcaption"||i.tagName==="figure"||i.tagName==="footer"||i.tagName==="form"||i.tagName==="h1"||i.tagName==="h2"||i.tagName==="h3"||i.tagName==="h4"||i.tagName==="h5"||i.tagName==="h6"||i.tagName==="header"||i.tagName==="hgroup"||i.tagName==="hr"||i.tagName==="main"||i.tagName==="menu"||i.tagName==="nav"||i.tagName==="ol"||i.tagName==="p"||i.tagName==="pre"||i.tagName==="section"||i.tagName==="table"||i.tagName==="ul"):!n||!(n.type==="element"&&(n.tagName==="a"||n.tagName==="audio"||n.tagName==="del"||n.tagName==="ins"||n.tagName==="map"||n.tagName==="noscript"||n.tagName==="video"))}function Nx(t,e,n){const i=at(n,e);return!i||i.type==="element"&&i.tagName==="li"}function Rx(t,e,n){const i=at(n,e);return!!(i&&i.type==="element"&&(i.tagName==="dt"||i.tagName==="dd"))}function Lx(t,e,n){const i=at(n,e);return!i||i.type==="element"&&(i.tagName==="dt"||i.tagName==="dd")}function xh(t,e,n){const i=at(n,e);return!i||i.type==="element"&&(i.tagName==="rp"||i.tagName==="rt")}function Ix(t,e,n){const i=at(n,e);return!i||i.type==="element"&&i.tagName==="optgroup"}function Px(t,e,n){const i=at(n,e);return!i||i.type==="element"&&(i.tagName==="option"||i.tagName==="optgroup")}function Dx(t,e,n){const i=at(n,e);return!!(i&&i.type==="element"&&(i.tagName==="tbody"||i.tagName==="tfoot"))}function Mx(t,e,n){const i=at(n,e);return!i||i.type==="element"&&(i.tagName==="tbody"||i.tagName==="tfoot")}function Ox(t,e,n){return!at(n,e)}function Gx(t,e,n){const i=at(n,e);return!i||i.type==="element"&&i.tagName==="tr"}function kh(t,e,n){const i=at(n,e);return!i||i.type==="element"&&(i.tagName==="td"||i.tagName==="th")}const Fx=um({body:Bx,colgroup:Vx,head:zx,html:$x,tbody:Ux});function $x(t){const e=at(t,-1);return!e||e.type!=="comment"}function zx(t){const e=new Set;for(const i of t.children)if(i.type==="element"&&(i.tagName==="base"||i.tagName==="title")){if(e.has(i.tagName))return!1;e.add(i.tagName)}const n=t.children[0];return!n||n.type==="element"}function Bx(t){const e=at(t,-1,!0);return!e||e.type!=="comment"&&!(e.type==="text"&&wd(e.value.charAt(0)))&&!(e.type==="element"&&(e.tagName==="meta"||e.tagName==="link"||e.tagName==="script"||e.tagName==="style"||e.tagName==="template"))}function Vx(t,e,n){const i=cm(n,e),r=at(t,-1,!0);return n&&i&&i.type==="element"&&i.tagName==="colgroup"&&xd(i,n.children.indexOf(i),n)?!1:!!(r&&r.type==="element"&&r.tagName==="col")}function Ux(t,e,n){const i=cm(n,e),r=at(t,-1);return n&&i&&i.type==="element"&&(i.tagName==="thead"||i.tagName==="tbody")&&xd(i,n.children.indexOf(i),n)?!1:!!(r&&r.type==="element"&&r.tagName==="tr")}const qo={name:[[`	
\f\r &/=>`.split(""),`	
\f\r "&'/=>\``.split("")],[`\0	
\f\r "&'/<=>`.split(""),`\0	
\f\r "&'/<=>\``.split("")]],unquoted:[[`	
\f\r &>`.split(""),`\0	
\f\r "&'<=>\``.split("")],[`\0	
\f\r "&'<=>\``.split(""),`\0	
\f\r "&'<=>\``.split("")]],single:[["&'".split(""),"\"&'`".split("")],["\0&'".split(""),"\0\"&'`".split("")]],double:[['"&'.split(""),"\"&'`".split("")],['\0"&'.split(""),"\0\"&'`".split("")]]};function jx(t,e,n,i){const r=i.schema,o=r.space==="svg"?!1:i.settings.omitOptionalTags;let s=r.space==="svg"?i.settings.closeEmptyElements:i.settings.voids.includes(t.tagName.toLowerCase());const a=[];let l;r.space==="html"&&t.tagName==="svg"&&(i.schema=am);const c=Hx(i,t.properties),d=i.all(r.space==="html"&&t.tagName==="template"?t.content:t);return i.schema=r,d&&(s=!1),(c||!o||!Fx(t,e,n))&&(a.push("<",t.tagName,c?" "+c:""),s&&(r.space==="svg"||i.settings.closeSelfClosing)&&(l=c.charAt(c.length-1),(!i.settings.tightSelfClosing||l==="/"||l&&l!=='"'&&l!=="'")&&a.push(" "),a.push("/")),a.push(">")),a.push(d),!s&&(!o||!xd(t,e,n))&&a.push("</"+t.tagName+">"),a.join("")}function Hx(t,e){const n=[];let i=-1,r;if(e){for(r in e)if(e[r]!==null&&e[r]!==void 0){const o=Wx(t,r,e[r]);o&&n.push(o)}}for(;++i<n.length;){const o=t.settings.tightAttributes?n[i].charAt(n[i].length-1):void 0;i!==n.length-1&&o!=='"'&&o!=="'"&&(n[i]+=" ")}return n.join("")}function Wx(t,e,n){const i=X1(t.schema,e),r=t.settings.allowParseErrors&&t.schema.space==="html"?0:1,o=t.settings.allowDangerousCharacters?0:1;let s=t.quote,a;if(i.overloadedBoolean&&(n===i.attribute||n==="")?n=!0:(i.boolean||i.overloadedBoolean)&&(typeof n!="string"||n===i.attribute||n==="")&&(n=!!n),n==null||n===!1||typeof n=="number"&&Number.isNaN(n))return"";const l=dr(i.attribute,Object.assign({},t.settings.characterReferences,{subset:qo.name[r][o]}));return n===!0||(n=Array.isArray(n)?(i.commaSeparated?wx:xx)(n,{padLeft:!t.settings.tightCommaSeparatedLists}):String(n),t.settings.collapseEmptyAttributes&&!n)?l:(t.settings.preferUnquoted&&(a=dr(n,Object.assign({},t.settings.characterReferences,{attribute:!0,subset:qo.unquoted[r][o]}))),a!==n&&(t.settings.quoteSmart&&_h(n,s)>_h(n,t.alternative)&&(s=t.alternative),a=s+dr(n,Object.assign({},t.settings.characterReferences,{subset:(s==="'"?qo.single:qo.double)[r][o],attribute:!0}))+s),l+(a&&"="+a))}const qx=["<","&"];function hm(t,e,n,i){return n&&n.type==="element"&&(n.tagName==="script"||n.tagName==="style")?t.value:dr(t.value,Object.assign({},i.settings.characterReferences,{subset:qx}))}function Kx(t,e,n,i){return i.settings.allowDangerousHtml?t.value:hm(t,e,n,i)}function Xx(t,e,n,i){return i.all(t)}const Zx=Q1("type",{invalid:Yx,unknown:Jx,handlers:{comment:bx,doctype:_x,element:jx,raw:Kx,root:Xx,text:hm}});function Yx(t){throw new Error("Expected node, not `"+t+"`")}function Jx(t){const e=t;throw new Error("Cannot compile unknown node `"+e.type+"`")}const Qx={},ek={},tk=[];function nk(t,e){const n=e||Qx,i=n.quote||'"',r=i==='"'?"'":'"';if(i!=='"'&&i!=="'")throw new Error("Invalid quote `"+i+"`, expected `'` or `\"`");return{one:ik,all:rk,settings:{omitOptionalTags:n.omitOptionalTags||!1,allowParseErrors:n.allowParseErrors||!1,allowDangerousCharacters:n.allowDangerousCharacters||!1,quoteSmart:n.quoteSmart||!1,preferUnquoted:n.preferUnquoted||!1,tightAttributes:n.tightAttributes||!1,upperDoctype:n.upperDoctype||!1,tightDoctype:n.tightDoctype||!1,bogusComments:n.bogusComments||!1,tightCommaSeparatedLists:n.tightCommaSeparatedLists||!1,tightSelfClosing:n.tightSelfClosing||!1,collapseEmptyAttributes:n.collapseEmptyAttributes||!1,allowDangerousHtml:n.allowDangerousHtml||!1,voids:n.voids||U1,characterReferences:n.characterReferences||ek,closeSelfClosing:n.closeSelfClosing||!1,closeEmptyElements:n.closeEmptyElements||!1},schema:n.space==="svg"?am:J1,quote:i,alternative:r}.one(Array.isArray(t)?{type:"root",children:t}:t,void 0,void 0)}function ik(t,e,n){return Zx(t,e,n,this)}function rk(t){const e=[],n=t&&t.children||tk;let i=-1;for(;++i<n.length;)e[i]=this.one(n[i],i,t);return e.join("")}function $s(t,e){const n=typeof t=="string"?{}:{...t.colorReplacements},i=typeof t=="string"?t:t.name;for(const[r,o]of Object.entries(e?.colorReplacements||{}))typeof o=="string"?n[r]=o:r===i&&Object.assign(n,o);return n}function hi(t,e){return t&&(e?.[t?.toLowerCase()]||t)}function ok(t){return Array.isArray(t)?t:[t]}async function fm(t){return Promise.resolve(typeof t=="function"?t():t).then(e=>e.default||e)}function kd(t){return!t||["plaintext","txt","text","plain"].includes(t)}function gm(t){return t==="ansi"||kd(t)}function Ed(t){return t==="none"}function pm(t){return Ed(t)}function mm(t,e){if(!e)return t;t.properties||={},t.properties.class||=[],typeof t.properties.class=="string"&&(t.properties.class=t.properties.class.split(/\s+/g)),Array.isArray(t.properties.class)||(t.properties.class=[]);const n=Array.isArray(e)?e:e.split(/\s+/g);for(const i of n)i&&!t.properties.class.includes(i)&&t.properties.class.push(i);return t}function ba(t,e=!1){if(t.length===0)return[["",0]];const n=t.split(/(\r?\n)/g);let i=0;const r=[];for(let o=0;o<n.length;o+=2){const s=e?n[o]+(n[o+1]||""):n[o];r.push([s,i]),i+=n[o].length,i+=n[o+1]?.length||0}return r}function sk(t){const e=ba(t,!0).map(([r])=>r);function n(r){if(r===t.length)return{line:e.length-1,character:e[e.length-1].length};let o=r,s=0;for(const a of e){if(o<a.length)break;o-=a.length,s++}return{line:s,character:o}}function i(r,o){let s=0;for(let a=0;a<r;a++)s+=e[a].length;return s+=o,s}return{lines:e,indexToPos:n,posToIndex:i}}const Ad="light-dark()",ak=["color","background-color"];function lk(t,e){let n=0;const i=[];for(const r of e)r>n&&i.push({...t,content:t.content.slice(n,r),offset:t.offset+n}),n=r;return n<t.content.length&&i.push({...t,content:t.content.slice(n),offset:t.offset+n}),i}function ck(t,e){const n=Array.from(e instanceof Set?e:new Set(e)).sort((i,r)=>i-r);return n.length?t.map(i=>i.flatMap(r=>{const o=n.filter(s=>r.offset<s&&s<r.offset+r.content.length).map(s=>s-r.offset).sort((s,a)=>s-a);return o.length?lk(r,o):r})):t}function dk(t,e,n,i,r="css-vars"){const o={content:t.content,explanation:t.explanation,offset:t.offset},s=e.map(d=>zs(t.variants[d])),a=new Set(s.flatMap(d=>Object.keys(d))),l={},c=(d,u)=>{const h=u==="color"?"":u==="background-color"?"-bg":`-${u}`;return n+e[d]+(u==="color"?"":h)};return s.forEach((d,u)=>{for(const h of a){const f=d[h]||"inherit";if(u===0&&i&&ak.includes(h))if(i===Ad&&s.length>1){const p=e.findIndex(x=>x==="light"),m=e.findIndex(x=>x==="dark");if(p===-1||m===-1)throw new nt('When using `defaultColor: "light-dark()"`, you must provide both `light` and `dark` themes');const w=s[p][h]||"inherit",_=s[m][h]||"inherit";l[h]=`light-dark(${w}, ${_})`,r==="css-vars"&&(l[c(u,h)]=f)}else l[h]=f;else r==="css-vars"&&(l[c(u,h)]=f)}}),o.htmlStyle=l,o}function zs(t){const e={};if(t.color&&(e.color=t.color),t.bgColor&&(e["background-color"]=t.bgColor),t.fontStyle){t.fontStyle&xt.Italic&&(e["font-style"]="italic"),t.fontStyle&xt.Bold&&(e["font-weight"]="bold");const n=[];t.fontStyle&xt.Underline&&n.push("underline"),t.fontStyle&xt.Strikethrough&&n.push("line-through"),n.length&&(e["text-decoration"]=n.join(" "))}return e}function yc(t){return typeof t=="string"?t:Object.entries(t).map(([e,n])=>`${e}:${n}`).join(";")}const ym=new WeakMap;function _a(t,e){ym.set(t,e)}function wo(t){return ym.get(t)}class Tr{_stacks={};lang;get themes(){return Object.keys(this._stacks)}get theme(){return this.themes[0]}get _stack(){return this._stacks[this.theme]}static initial(e,n){return new Tr(Object.fromEntries(ok(n).map(i=>[i,hc])),e)}constructor(...e){if(e.length===2){const[n,i]=e;this.lang=i,this._stacks=n}else{const[n,i,r]=e;this.lang=i,this._stacks={[r]:n}}}getInternalStack(e=this.theme){return this._stacks[e]}getScopes(e=this.theme){return uk(this._stacks[e])}toJSON(){return{lang:this.lang,theme:this.theme,themes:this.themes,scopes:this.getScopes()}}}function uk(t){const e=[],n=new Set;function i(r){if(n.has(r))return;n.add(r);const o=r?.nameScopesList?.scopeName;o&&e.push(o),r.parent&&i(r.parent)}return i(t),e}function hk(t,e){if(!(t instanceof Tr))throw new nt("Invalid grammar state");return t.getInternalStack(e)}function fk(){const t=new WeakMap;function e(n){if(!t.has(n.meta)){let i=function(s){if(typeof s=="number"){if(s<0||s>n.source.length)throw new nt(`Invalid decoration offset: ${s}. Code length: ${n.source.length}`);return{...r.indexToPos(s),offset:s}}else{const a=r.lines[s.line];if(a===void 0)throw new nt(`Invalid decoration position ${JSON.stringify(s)}. Lines length: ${r.lines.length}`);let l=s.character;if(l<0&&(l=a.length+l),l<0||l>a.length)throw new nt(`Invalid decoration position ${JSON.stringify(s)}. Line ${s.line} length: ${a.length}`);return{...s,character:l,offset:r.posToIndex(s.line,l)}}};const r=sk(n.source),o=(n.options.decorations||[]).map(s=>({...s,start:i(s.start),end:i(s.end)}));gk(o),t.set(n.meta,{decorations:o,converter:r,source:n.source})}return t.get(n.meta)}return{name:"shiki:decorations",tokens(n){if(!this.options.decorations?.length)return;const r=e(this).decorations.flatMap(s=>[s.start.offset,s.end.offset]);return ck(n,r)},code(n){if(!this.options.decorations?.length)return;const i=e(this),r=Array.from(n.children).filter(d=>d.type==="element"&&d.tagName==="span");if(r.length!==i.converter.lines.length)throw new nt(`Number of lines in code element (${r.length}) does not match the number of lines in the source (${i.converter.lines.length}). Failed to apply decorations.`);function o(d,u,h,f){const p=r[d];let m="",w=-1,_=-1;if(u===0&&(w=0),h===0&&(_=0),h===Number.POSITIVE_INFINITY&&(_=p.children.length),w===-1||_===-1)for(let k=0;k<p.children.length;k++)m+=vm(p.children[k]),w===-1&&m.length===u&&(w=k+1),_===-1&&m.length===h&&(_=k+1);if(w===-1)throw new nt(`Failed to find start index for decoration ${JSON.stringify(f.start)}`);if(_===-1)throw new nt(`Failed to find end index for decoration ${JSON.stringify(f.end)}`);const x=p.children.slice(w,_);if(!f.alwaysWrap&&x.length===p.children.length)a(p,f,"line");else if(!f.alwaysWrap&&x.length===1&&x[0].type==="element")a(x[0],f,"token");else{const k={type:"element",tagName:"span",properties:{},children:x};a(k,f,"wrapper"),p.children.splice(w,x.length,k)}}function s(d,u){r[d]=a(r[d],u,"line")}function a(d,u,h){const f=u.properties||{},p=u.transform||(m=>m);return d.tagName=u.tagName||"span",d.properties={...d.properties,...f,class:d.properties.class},u.properties?.class&&mm(d,u.properties.class),d=p(d,h)||d,d}const l=[],c=i.decorations.sort((d,u)=>u.start.offset-d.start.offset||d.end.offset-u.end.offset);for(const d of c){const{start:u,end:h}=d;if(u.line===h.line)o(u.line,u.character,h.character,d);else if(u.line<h.line){o(u.line,u.character,Number.POSITIVE_INFINITY,d);for(let f=u.line+1;f<h.line;f++)l.unshift(()=>s(f,d));o(h.line,0,h.character,d)}}l.forEach(d=>d())}}}function gk(t){for(let e=0;e<t.length;e++){const n=t[e];if(n.start.offset>n.end.offset)throw new nt(`Invalid decoration range: ${JSON.stringify(n.start)} - ${JSON.stringify(n.end)}`);for(let i=e+1;i<t.length;i++){const r=t[i],o=n.start.offset<=r.start.offset&&r.start.offset<n.end.offset,s=n.start.offset<r.end.offset&&r.end.offset<=n.end.offset,a=r.start.offset<=n.start.offset&&n.start.offset<r.end.offset,l=r.start.offset<n.end.offset&&n.end.offset<=r.end.offset;if(o||s||a||l){if(o&&s||a&&l||a&&n.start.offset===n.end.offset||s&&r.start.offset===r.end.offset)continue;throw new nt(`Decorations ${JSON.stringify(n.start)} and ${JSON.stringify(r.start)} intersect.`)}}}}function vm(t){return t.type==="text"?t.value:t.type==="element"?t.children.map(vm).join(""):""}const pk=[fk()];function Bs(t){const e=mk(t.transformers||[]);return[...e.pre,...e.normal,...e.post,...pk]}function mk(t){const e=[],n=[],i=[];for(const r of t)switch(r.enforce){case"pre":e.push(r);break;case"post":n.push(r);break;default:i.push(r)}return{pre:e,post:n,normal:i}}var Li=["black","red","green","yellow","blue","magenta","cyan","white","brightBlack","brightRed","brightGreen","brightYellow","brightBlue","brightMagenta","brightCyan","brightWhite"],ul={1:"bold",2:"dim",3:"italic",4:"underline",7:"reverse",8:"hidden",9:"strikethrough"};function yk(t,e){const n=t.indexOf("\x1B",e);if(n!==-1&&t[n+1]==="["){const i=t.indexOf("m",n);if(i!==-1)return{sequence:t.substring(n+2,i).split(";"),startPosition:n,position:i+1}}return{position:t.length}}function Eh(t){const e=t.shift();if(e==="2"){const n=t.splice(0,3).map(i=>Number.parseInt(i));return n.length!==3||n.some(i=>Number.isNaN(i))?void 0:{type:"rgb",rgb:n}}else if(e==="5"){const n=t.shift();if(n)return{type:"table",index:Number(n)}}}function vk(t){const e=[];for(;t.length>0;){const n=t.shift();if(!n)continue;const i=Number.parseInt(n);if(!Number.isNaN(i))if(i===0)e.push({type:"resetAll"});else if(i<=9)ul[i]&&e.push({type:"setDecoration",value:ul[i]});else if(i<=29){const r=ul[i-20];r&&(e.push({type:"resetDecoration",value:r}),r==="dim"&&e.push({type:"resetDecoration",value:"bold"}))}else if(i<=37)e.push({type:"setForegroundColor",value:{type:"named",name:Li[i-30]}});else if(i===38){const r=Eh(t);r&&e.push({type:"setForegroundColor",value:r})}else if(i===39)e.push({type:"resetForegroundColor"});else if(i<=47)e.push({type:"setBackgroundColor",value:{type:"named",name:Li[i-40]}});else if(i===48){const r=Eh(t);r&&e.push({type:"setBackgroundColor",value:r})}else i===49?e.push({type:"resetBackgroundColor"}):i===53?e.push({type:"setDecoration",value:"overline"}):i===55?e.push({type:"resetDecoration",value:"overline"}):i>=90&&i<=97?e.push({type:"setForegroundColor",value:{type:"named",name:Li[i-90+8]}}):i>=100&&i<=107&&e.push({type:"setBackgroundColor",value:{type:"named",name:Li[i-100+8]}})}return e}function bk(){let t=null,e=null,n=new Set;return{parse(i){const r=[];let o=0;do{const s=yk(i,o),a=s.sequence?i.substring(o,s.startPosition):i.substring(o);if(a.length>0&&r.push({value:a,foreground:t,background:e,decorations:new Set(n)}),s.sequence){const l=vk(s.sequence);for(const c of l)c.type==="resetAll"?(t=null,e=null,n.clear()):c.type==="resetForegroundColor"?t=null:c.type==="resetBackgroundColor"?e=null:c.type==="resetDecoration"&&n.delete(c.value);for(const c of l)c.type==="setForegroundColor"?t=c.value:c.type==="setBackgroundColor"?e=c.value:c.type==="setDecoration"&&n.add(c.value)}o=s.position}while(o<i.length);return r}}}var _k={black:"#000000",red:"#bb0000",green:"#00bb00",yellow:"#bbbb00",blue:"#0000bb",magenta:"#ff00ff",cyan:"#00bbbb",white:"#eeeeee",brightBlack:"#555555",brightRed:"#ff5555",brightGreen:"#00ff00",brightYellow:"#ffff55",brightBlue:"#5555ff",brightMagenta:"#ff55ff",brightCyan:"#55ffff",brightWhite:"#ffffff"};function wk(t=_k){function e(a){return t[a]}function n(a){return`#${a.map(l=>Math.max(0,Math.min(l,255)).toString(16).padStart(2,"0")).join("")}`}let i;function r(){if(i)return i;i=[];for(let c=0;c<Li.length;c++)i.push(e(Li[c]));let a=[0,95,135,175,215,255];for(let c=0;c<6;c++)for(let d=0;d<6;d++)for(let u=0;u<6;u++)i.push(n([a[c],a[d],a[u]]));let l=8;for(let c=0;c<24;c++,l+=10)i.push(n([l,l,l]));return i}function o(a){return r()[a]}function s(a){switch(a.type){case"named":return e(a.name);case"rgb":return n(a.rgb);case"table":return o(a.index)}}return{value:s}}const xk={black:"#000000",red:"#cd3131",green:"#0DBC79",yellow:"#E5E510",blue:"#2472C8",magenta:"#BC3FBC",cyan:"#11A8CD",white:"#E5E5E5",brightBlack:"#666666",brightRed:"#F14C4C",brightGreen:"#23D18B",brightYellow:"#F5F543",brightBlue:"#3B8EEA",brightMagenta:"#D670D6",brightCyan:"#29B8DB",brightWhite:"#FFFFFF"};function kk(t,e,n){const i=$s(t,n),r=ba(e),o=Object.fromEntries(Li.map(l=>{const c=`terminal.ansi${l[0].toUpperCase()}${l.substring(1)}`,d=t.colors?.[c];return[l,d||xk[l]]})),s=wk(o),a=bk();return r.map(l=>a.parse(l[0]).map(c=>{let d,u;c.decorations.has("reverse")?(d=c.background?s.value(c.background):t.bg,u=c.foreground?s.value(c.foreground):t.fg):(d=c.foreground?s.value(c.foreground):t.fg,u=c.background?s.value(c.background):void 0),d=hi(d,i),u=hi(u,i),c.decorations.has("dim")&&(d=Ek(d));let h=xt.None;return c.decorations.has("bold")&&(h|=xt.Bold),c.decorations.has("italic")&&(h|=xt.Italic),c.decorations.has("underline")&&(h|=xt.Underline),c.decorations.has("strikethrough")&&(h|=xt.Strikethrough),{content:c.value,offset:l[1],color:d,bgColor:u,fontStyle:h}}))}function Ek(t){const e=t.match(/#([0-9a-f]{3,8})/i);if(e){const i=e[1];if(i.length===8){const r=Math.round(Number.parseInt(i.slice(6,8),16)/2).toString(16).padStart(2,"0");return`#${i.slice(0,6)}${r}`}else{if(i.length===6)return`#${i}80`;if(i.length===4){const r=i[0],o=i[1],s=i[2],a=i[3],l=Math.round(Number.parseInt(`${a}${a}`,16)/2).toString(16).padStart(2,"0");return`#${r}${r}${o}${o}${s}${s}${l}`}else if(i.length===3){const r=i[0],o=i[1],s=i[2];return`#${r}${r}${o}${o}${s}${s}80`}}}const n=t.match(/var\((--[\w-]+-ansi-[\w-]+)\)/);return n?`var(${n[1]}-dim)`:t}function Cd(t,e,n={}){const{theme:i=t.getLoadedThemes()[0]}=n,r=t.resolveLangAlias(n.lang||"text");if(kd(r)||Ed(i))return ba(e).map(l=>[{content:l[0],offset:l[1]}]);const{theme:o,colorMap:s}=t.setTheme(i);if(r==="ansi")return kk(o,e,n);const a=t.getLanguage(n.lang||"text");if(n.grammarState){if(n.grammarState.lang!==a.name)throw new nt(`Grammar state language "${n.grammarState.lang}" does not match highlight language "${a.name}"`);if(!n.grammarState.themes.includes(o.name))throw new nt(`Grammar state themes "${n.grammarState.themes}" do not contain highlight theme "${o.name}"`)}return Ck(e,a,o,s,n)}function Ak(...t){if(t.length===2)return wo(t[1]);const[e,n,i={}]=t,{lang:r="text",theme:o=e.getLoadedThemes()[0]}=i;if(kd(r)||Ed(o))throw new nt("Plain language does not have grammar state");if(r==="ansi")throw new nt("ANSI language does not have grammar state");const{theme:s,colorMap:a}=e.setTheme(o),l=e.getLanguage(r);return new Tr(Vs(n,l,s,a,i).stateStack,l.name,s.name)}function Ck(t,e,n,i,r){const o=Vs(t,e,n,i,r),s=new Tr(Vs(t,e,n,i,r).stateStack,e.name,n.name);return _a(o.tokens,s),o.tokens}function Vs(t,e,n,i,r){const o=$s(n,r),{tokenizeMaxLineLength:s=0,tokenizeTimeLimit:a=500}=r,l=ba(t);let c=r.grammarState?hk(r.grammarState,n.name)??hc:r.grammarContextCode!=null?Vs(r.grammarContextCode,e,n,i,{...r,grammarState:void 0,grammarContextCode:void 0}).stateStack:hc,d=[];const u=[];for(let h=0,f=l.length;h<f;h++){const[p,m]=l[h];if(p===""){d=[],u.push([]);continue}if(s>0&&p.length>=s){d=[],u.push([{content:p,offset:m,color:"",fontStyle:0}]);continue}let w,_,x;r.includeExplanation&&(w=e.tokenizeLine(p,c,a),_=w.tokens,x=0);const k=e.tokenizeLine2(p,c,a),v=k.tokens.length/2;for(let C=0;C<v;C++){const A=k.tokens[2*C],S=C+1<v?k.tokens[2*C+2]:p.length;if(A===S)continue;const M=k.tokens[2*C+1],I=hi(i[_r.getForeground(M)],o),D=_r.getFontStyle(M),O={content:p.substring(A,S),offset:m+A,color:I,fontStyle:D};if(r.includeExplanation){const $=[];if(r.includeExplanation!=="scopeName")for(const E of n.settings){let R;switch(typeof E.scope){case"string":R=E.scope.split(/,/).map(L=>L.trim());break;case"object":R=E.scope;break;default:continue}$.push({settings:E,selectors:R.map(L=>L.split(/ /))})}O.explanation=[];let j=0;for(;A+j<S;){const E=_[x],R=p.substring(E.startIndex,E.endIndex);j+=R.length,O.explanation.push({content:R,scopes:r.includeExplanation==="scopeName"?Sk(E.scopes):Tk($,E.scopes)}),x+=1}}d.push(O)}u.push(d),d=[],c=k.ruleStack}return{tokens:u,stateStack:c}}function Sk(t){return t.map(e=>({scopeName:e}))}function Tk(t,e){const n=[];for(let i=0,r=e.length;i<r;i++){const o=e[i];n[i]={scopeName:o,themeMatches:Rk(t,o,e.slice(0,i))}}return n}function Ah(t,e){return t===e||e.substring(0,t.length)===t&&e[t.length]==="."}function Nk(t,e,n){if(!Ah(t[t.length-1],e))return!1;let i=t.length-2,r=n.length-1;for(;i>=0&&r>=0;)Ah(t[i],n[r])&&(i-=1),r-=1;return i===-1}function Rk(t,e,n){const i=[];for(const{selectors:r,settings:o}of t)for(const s of r)if(Nk(s,e,n)){i.push(o);break}return i}function bm(t,e,n){const i=Object.entries(n.themes).filter(l=>l[1]).map(l=>({color:l[0],theme:l[1]})),r=i.map(l=>{const c=Cd(t,e,{...n,theme:l.theme}),d=wo(c),u=typeof l.theme=="string"?l.theme:l.theme.name;return{tokens:c,state:d,theme:u}}),o=Lk(...r.map(l=>l.tokens)),s=o[0].map((l,c)=>l.map((d,u)=>{const h={content:d.content,variants:{},offset:d.offset};return"includeExplanation"in n&&n.includeExplanation&&(h.explanation=d.explanation),o.forEach((f,p)=>{const{content:m,explanation:w,offset:_,...x}=f[c][u];h.variants[i[p].color]=x}),h})),a=r[0].state?new Tr(Object.fromEntries(r.map(l=>[l.theme,l.state?.getInternalStack(l.theme)])),r[0].state.lang):void 0;return a&&_a(s,a),s}function Lk(...t){const e=t.map(()=>[]),n=t.length;for(let i=0;i<t[0].length;i++){const r=t.map(l=>l[i]),o=e.map(()=>[]);e.forEach((l,c)=>l.push(o[c]));const s=r.map(()=>0),a=r.map(l=>l[0]);for(;a.every(l=>l);){const l=Math.min(...a.map(c=>c.content.length));for(let c=0;c<n;c++){const d=a[c];d.content.length===l?(o[c].push(d),s[c]+=1,a[c]=r[c][s[c]]):(o[c].push({...d,content:d.content.slice(0,l)}),a[c]={...d,content:d.content.slice(l),offset:d.offset+l})}}}return e}function Us(t,e,n){let i,r,o,s,a,l;if("themes"in n){const{defaultColor:c="light",cssVariablePrefix:d="--shiki-",colorsRendering:u="css-vars"}=n,h=Object.entries(n.themes).filter(_=>_[1]).map(_=>({color:_[0],theme:_[1]})).sort((_,x)=>_.color===c?-1:x.color===c?1:0);if(h.length===0)throw new nt("`themes` option must not be empty");const f=bm(t,e,n);if(l=wo(f),c&&Ad!==c&&!h.find(_=>_.color===c))throw new nt(`\`themes\` option must contain the defaultColor key \`${c}\``);const p=h.map(_=>t.getTheme(_.theme)),m=h.map(_=>_.color);o=f.map(_=>_.map(x=>dk(x,m,d,c,u))),l&&_a(o,l);const w=h.map(_=>$s(_.theme,n));r=Ch(h,p,w,d,c,"fg",u),i=Ch(h,p,w,d,c,"bg",u),s=`shiki-themes ${p.map(_=>_.name).join(" ")}`,a=c?void 0:[r,i].join(";")}else if("theme"in n){const c=$s(n.theme,n);o=Cd(t,e,n);const d=t.getTheme(n.theme);i=hi(d.bg,c),r=hi(d.fg,c),s=d.name,l=wo(o)}else throw new nt("Invalid options, either `theme` or `themes` must be provided");return{tokens:o,fg:r,bg:i,themeName:s,rootStyle:a,grammarState:l}}function Ch(t,e,n,i,r,o,s){return t.map((a,l)=>{const c=hi(e[l][o],n[l])||"inherit",d=`${i+a.color}${o==="bg"?"-bg":""}:${c}`;if(l===0&&r){if(r===Ad&&t.length>1){const u=t.findIndex(m=>m.color==="light"),h=t.findIndex(m=>m.color==="dark");if(u===-1||h===-1)throw new nt('When using `defaultColor: "light-dark()"`, you must provide both `light` and `dark` themes');const f=hi(e[u][o],n[u])||"inherit",p=hi(e[h][o],n[h])||"inherit";return`light-dark(${f}, ${p});${d}`}return c}return s==="css-vars"?d:null}).filter(a=>!!a).join(";")}function js(t,e,n,i={meta:{},options:n,codeToHast:(r,o)=>js(t,r,o),codeToTokens:(r,o)=>Us(t,r,o)}){let r=e;for(const p of Bs(n))r=p.preprocess?.call(i,r,n)||r;let{tokens:o,fg:s,bg:a,themeName:l,rootStyle:c,grammarState:d}=Us(t,r,n);const{mergeWhitespaces:u=!0,mergeSameStyleTokens:h=!1}=n;u===!0?o=Pk(o):u==="never"&&(o=Dk(o)),h&&(o=Mk(o));const f={...i,get source(){return r}};for(const p of Bs(n))o=p.tokens?.call(f,o)||o;return Ik(o,{...n,fg:s,bg:a,themeName:l,rootStyle:n.rootStyle===!1?!1:n.rootStyle??c},f,d)}function Ik(t,e,n,i=wo(t)){const r=Bs(e),o=[],s={type:"root",children:[]},{structure:a="classic",tabindex:l="0"}=e,c={class:`shiki ${e.themeName||""}`};e.rootStyle!==!1&&(e.rootStyle!=null?c.style=e.rootStyle:c.style=`background-color:${e.bg};color:${e.fg}`),l!==!1&&l!=null&&(c.tabindex=l.toString());for(const[m,w]of Object.entries(e.meta||{}))m.startsWith("_")||(c[m]=w);let d={type:"element",tagName:"pre",properties:c,children:[]},u={type:"element",tagName:"code",properties:{},children:o};const h=[],f={...n,structure:a,addClassToHast:mm,get source(){return n.source},get tokens(){return t},get options(){return e},get root(){return s},get pre(){return d},get code(){return u},get lines(){return h}};if(t.forEach((m,w)=>{w&&(a==="inline"?s.children.push({type:"element",tagName:"br",properties:{},children:[]}):a==="classic"&&o.push({type:"text",value:`
`}));let _={type:"element",tagName:"span",properties:{class:"line"},children:[]},x=0;for(const k of m){let v={type:"element",tagName:"span",properties:{...k.htmlAttrs},children:[{type:"text",value:k.content}]};const C=yc(k.htmlStyle||zs(k));C&&(v.properties.style=C);for(const A of r)v=A?.span?.call(f,v,w+1,x,_,k)||v;a==="inline"?s.children.push(v):a==="classic"&&_.children.push(v),x+=k.content.length}if(a==="classic"){for(const k of r)_=k?.line?.call(f,_,w+1)||_;h.push(_),o.push(_)}else a==="inline"&&h.push(_)}),a==="classic"){for(const m of r)u=m?.code?.call(f,u)||u;d.children.push(u);for(const m of r)d=m?.pre?.call(f,d)||d;s.children.push(d)}else if(a==="inline"){const m=[];let w={type:"element",tagName:"span",properties:{class:"line"},children:[]};for(const k of s.children)k.type==="element"&&k.tagName==="br"?(m.push(w),w={type:"element",tagName:"span",properties:{class:"line"},children:[]}):(k.type==="element"||k.type==="text")&&w.children.push(k);m.push(w);let x={type:"element",tagName:"code",properties:{},children:m};for(const k of r)x=k?.code?.call(f,x)||x;s.children=[];for(let k=0;k<x.children.length;k++){k>0&&s.children.push({type:"element",tagName:"br",properties:{},children:[]});const v=x.children[k];v.type==="element"&&s.children.push(...v.children)}}let p=s;for(const m of r)p=m?.root?.call(f,p)||p;return i&&_a(p,i),p}function Pk(t){return t.map(e=>{const n=[];let i="",r;return e.forEach((o,s)=>{const l=!(o.fontStyle&&(o.fontStyle&xt.Underline||o.fontStyle&xt.Strikethrough));l&&o.content.match(/^\s+$/)&&e[s+1]?(r===void 0&&(r=o.offset),i+=o.content):i?(l?n.push({...o,offset:r,content:i+o.content}):n.push({content:i,offset:r},o),r=void 0,i=""):n.push(o)}),n})}function Dk(t){return t.map(e=>e.flatMap(n=>{if(n.content.match(/^\s+$/))return n;const i=n.content.match(/^(\s*)(.*?)(\s*)$/);if(!i)return n;const[,r,o,s]=i;if(!r&&!s)return n;const a=[{...n,offset:n.offset+r.length,content:o}];return r&&a.unshift({content:r,offset:n.offset}),s&&a.push({content:s,offset:n.offset+r.length+o.length}),a}))}function Mk(t){return t.map(e=>{const n=[];for(const i of e){if(n.length===0){n.push({...i});continue}const r=n[n.length-1],o=yc(r.htmlStyle||zs(r)),s=yc(i.htmlStyle||zs(i)),a=r.fontStyle&&(r.fontStyle&xt.Underline||r.fontStyle&xt.Strikethrough),l=i.fontStyle&&(i.fontStyle&xt.Underline||i.fontStyle&xt.Strikethrough);!a&&!l&&o===s?r.content+=i.content:n.push({...i})}return n})}const Ok=nk;function Gk(t,e,n){const i={meta:{},options:n,codeToHast:(o,s)=>js(t,o,s),codeToTokens:(o,s)=>Us(t,o,s)};let r=Ok(js(t,e,n,i));for(const o of Bs(n))r=o.postprocess?.call(i,r,n)||r;return r}const Sh={light:"#333333",dark:"#bbbbbb"},Th={light:"#fffffe",dark:"#1e1e1e"},Nh="__shiki_resolved";function Sd(t){if(t?.[Nh])return t;const e={...t};e.tokenColors&&!e.settings&&(e.settings=e.tokenColors,delete e.tokenColors),e.type||="dark",e.colorReplacements={...e.colorReplacements},e.settings||=[];let{bg:n,fg:i}=e;if(!n||!i){const a=e.settings?e.settings.find(l=>!l.name&&!l.scope):void 0;a?.settings?.foreground&&(i=a.settings.foreground),a?.settings?.background&&(n=a.settings.background),!i&&e?.colors?.["editor.foreground"]&&(i=e.colors["editor.foreground"]),!n&&e?.colors?.["editor.background"]&&(n=e.colors["editor.background"]),i||(i=e.type==="light"?Sh.light:Sh.dark),n||(n=e.type==="light"?Th.light:Th.dark),e.fg=i,e.bg=n}e.settings[0]&&e.settings[0].settings&&!e.settings[0].scope||e.settings.unshift({settings:{foreground:e.fg,background:e.bg}});let r=0;const o=new Map;function s(a){if(o.has(a))return o.get(a);r+=1;const l=`#${r.toString(16).padStart(8,"0").toLowerCase()}`;return e.colorReplacements?.[`#${l}`]?s(a):(o.set(a,l),l)}e.settings=e.settings.map(a=>{const l=a.settings?.foreground&&!a.settings.foreground.startsWith("#"),c=a.settings?.background&&!a.settings.background.startsWith("#");if(!l&&!c)return a;const d={...a,settings:{...a.settings}};if(l){const u=s(a.settings.foreground);e.colorReplacements[u]=a.settings.foreground,d.settings.foreground=u}if(c){const u=s(a.settings.background);e.colorReplacements[u]=a.settings.background,d.settings.background=u}return d});for(const a of Object.keys(e.colors||{}))if((a==="editor.foreground"||a==="editor.background"||a.startsWith("terminal.ansi"))&&!e.colors[a]?.startsWith("#")){const l=s(e.colors[a]);e.colorReplacements[l]=e.colors[a],e.colors[a]=l}return Object.defineProperty(e,Nh,{enumerable:!1,writable:!1,value:!0}),e}async function _m(t){return Array.from(new Set((await Promise.all(t.filter(e=>!gm(e)).map(async e=>await fm(e).then(n=>Array.isArray(n)?n:[n])))).flat()))}async function wm(t){return(await Promise.all(t.map(async n=>pm(n)?null:Sd(await fm(n))))).filter(n=>!!n)}let Fk=3;function $k(t,e=3){e>Fk||console.trace(`[SHIKI DEPRECATE]: ${t}`)}let er=class extends Error{constructor(e){super(e),this.name="ShikiError"}};function xm(t,e){if(!e)return t;if(e[t]){const n=new Set([t]);for(;e[t];){if(t=e[t],n.has(t))throw new er(`Circular alias \`${Array.from(n).join(" -> ")} -> ${t}\``);n.add(t)}}return t}class zk extends V1{constructor(e,n,i,r={}){super(e),this._resolver=e,this._themes=n,this._langs=i,this._alias=r,this._themes.map(o=>this.loadTheme(o)),this.loadLanguages(this._langs)}_resolvedThemes=new Map;_resolvedGrammars=new Map;_langMap=new Map;_langGraph=new Map;_textmateThemeCache=new WeakMap;_loadedThemesCache=null;_loadedLanguagesCache=null;getTheme(e){return typeof e=="string"?this._resolvedThemes.get(e):this.loadTheme(e)}loadTheme(e){const n=Sd(e);return n.name&&(this._resolvedThemes.set(n.name,n),this._loadedThemesCache=null),n}getLoadedThemes(){return this._loadedThemesCache||(this._loadedThemesCache=[...this._resolvedThemes.keys()]),this._loadedThemesCache}setTheme(e){let n=this._textmateThemeCache.get(e);n||(n=Ds.createFromRawTheme(e),this._textmateThemeCache.set(e,n)),this._syncRegistry.setTheme(n)}getGrammar(e){return e=xm(e,this._alias),this._resolvedGrammars.get(e)}loadLanguage(e){if(this.getGrammar(e.name))return;const n=new Set([...this._langMap.values()].filter(o=>o.embeddedLangsLazy?.includes(e.name)));this._resolver.addLanguage(e);const i={balancedBracketSelectors:e.balancedBracketSelectors||["*"],unbalancedBracketSelectors:e.unbalancedBracketSelectors||[]};this._syncRegistry._rawGrammars.set(e.scopeName,e);const r=this.loadGrammarWithConfiguration(e.scopeName,1,i);if(r.name=e.name,this._resolvedGrammars.set(e.name,r),e.aliases&&e.aliases.forEach(o=>{this._alias[o]=e.name}),this._loadedLanguagesCache=null,n.size)for(const o of n)this._resolvedGrammars.delete(o.name),this._loadedLanguagesCache=null,this._syncRegistry?._injectionGrammars?.delete(o.scopeName),this._syncRegistry?._grammars?.delete(o.scopeName),this.loadLanguage(this._langMap.get(o.name))}dispose(){super.dispose(),this._resolvedThemes.clear(),this._resolvedGrammars.clear(),this._langMap.clear(),this._langGraph.clear(),this._loadedThemesCache=null}loadLanguages(e){for(const r of e)this.resolveEmbeddedLanguages(r);const n=Array.from(this._langGraph.entries()),i=n.filter(([r,o])=>!o);if(i.length){const r=n.filter(([o,s])=>s?(s.embeddedLanguages||s.embeddedLangs)?.some(l=>i.map(([c])=>c).includes(l)):!1).filter(o=>!i.includes(o));throw new er(`Missing languages ${i.map(([o])=>`\`${o}\``).join(", ")}, required by ${r.map(([o])=>`\`${o}\``).join(", ")}`)}for(const[r,o]of n)this._resolver.addLanguage(o);for(const[r,o]of n)this.loadLanguage(o)}getLoadedLanguages(){return this._loadedLanguagesCache||(this._loadedLanguagesCache=[...new Set([...this._resolvedGrammars.keys(),...Object.keys(this._alias)])]),this._loadedLanguagesCache}resolveEmbeddedLanguages(e){this._langMap.set(e.name,e),this._langGraph.set(e.name,e);const n=e.embeddedLanguages??e.embeddedLangs;if(n)for(const i of n)this._langGraph.set(i,this._langMap.get(i))}}class Bk{_langs=new Map;_scopeToLang=new Map;_injections=new Map;_onigLib;constructor(e,n){this._onigLib={createOnigScanner:i=>e.createScanner(i),createOnigString:i=>e.createString(i)},n.forEach(i=>this.addLanguage(i))}get onigLib(){return this._onigLib}getLangRegistration(e){return this._langs.get(e)}loadGrammar(e){return this._scopeToLang.get(e)}addLanguage(e){this._langs.set(e.name,e),e.aliases&&e.aliases.forEach(n=>{this._langs.set(n,e)}),this._scopeToLang.set(e.scopeName,e),e.injectTo&&e.injectTo.forEach(n=>{this._injections.get(n)||this._injections.set(n,[]),this._injections.get(n).push(e.scopeName)})}getInjections(e){const n=e.split(".");let i=[];for(let r=1;r<=n.length;r++){const o=n.slice(0,r).join(".");i=[...i,...this._injections.get(o)||[]]}return i}}let Gr=0;function Vk(t){Gr+=1,t.warnings!==!1&&Gr>=10&&Gr%10===0&&console.warn(`[Shiki] ${Gr} instances have been created. Shiki is supposed to be used as a singleton, consider refactoring your code to cache your highlighter instance; Or call \`highlighter.dispose()\` to release unused instances.`);let e=!1;if(!t.engine)throw new er("`engine` option is required for synchronous mode");const n=(t.langs||[]).flat(1),i=(t.themes||[]).flat(1).map(Sd),r=new Bk(t.engine,n),o=new zk(r,i,n,t.langAlias);let s;function a(k){return xm(k,t.langAlias)}function l(k){_();const v=o.getGrammar(typeof k=="string"?k:k.name);if(!v)throw new er(`Language \`${k}\` not found, you may need to load it first`);return v}function c(k){if(k==="none")return{bg:"",fg:"",name:"none",settings:[],type:"dark"};_();const v=o.getTheme(k);if(!v)throw new er(`Theme \`${k}\` not found, you may need to load it first`);return v}function d(k){_();const v=c(k);s!==k&&(o.setTheme(v),s=k);const C=o.getColorMap();return{theme:v,colorMap:C}}function u(){return _(),o.getLoadedThemes()}function h(){return _(),o.getLoadedLanguages()}function f(...k){_(),o.loadLanguages(k.flat(1))}async function p(...k){return f(await _m(k))}function m(...k){_();for(const v of k.flat(1))o.loadTheme(v)}async function w(...k){return _(),m(await wm(k))}function _(){if(e)throw new er("Shiki instance has been disposed")}function x(){e||(e=!0,o.dispose(),Gr-=1)}return{setTheme:d,getTheme:c,getLanguage:l,getLoadedThemes:u,getLoadedLanguages:h,resolveLangAlias:a,loadLanguage:p,loadLanguageSync:f,loadTheme:w,loadThemeSync:m,dispose:x,[Symbol.dispose]:x}}async function Uk(t){t.engine||$k("`engine` option is required. Use `createOnigurumaEngine` or `createJavaScriptRegexEngine` to create an engine.");const[e,n,i]=await Promise.all([wm(t.themes||[]),_m(t.langs||[]),t.engine]);return Vk({...t,themes:e,langs:n,engine:i})}async function jk(t){const e=await Uk(t);return{getLastGrammarState:(...n)=>Ak(e,...n),codeToTokensBase:(n,i)=>Cd(e,n,i),codeToTokensWithThemes:(n,i)=>bm(e,n,i),codeToTokens:(n,i)=>Us(e,n,i),codeToHast:(n,i)=>js(e,n,i),codeToHtml:(n,i)=>Gk(e,n,i),getBundledLanguages:()=>({}),getBundledThemes:()=>({}),...e,getInternalContext:()=>e}}function Hk(t){const e=t.langs,n=t.themes,i=t.engine;async function r(o){function s(u){if(typeof u=="string"){if(u=o.langAlias?.[u]||u,gm(u))return[];const h=e[u];if(!h)throw new nt(`Language \`${u}\` is not included in this bundle. You may want to load it from external source.`);return h}return u}function a(u){if(pm(u))return"none";if(typeof u=="string"){const h=n[u];if(!h)throw new nt(`Theme \`${u}\` is not included in this bundle. You may want to load it from external source.`);return h}return u}const l=(o.themes??[]).map(u=>a(u)),c=(o.langs??[]).map(u=>s(u)),d=await jk({engine:o.engine??i(),...o,themes:l,langs:c});return{...d,loadLanguage(...u){return d.loadLanguage(...u.map(s))},loadTheme(...u){return d.loadTheme(...u.map(a))},getBundledLanguages(){return e},getBundledThemes(){return n}}}return r}const km=[{id:"abap",name:"ABAP",import:(()=>T(()=>import("./abap-BdImnpbu.js"),[]))},{id:"actionscript-3",name:"ActionScript",import:(()=>T(()=>import("./actionscript-3-CfeIJUat.js"),[]))},{id:"ada",name:"Ada",import:(()=>T(()=>import("./ada-bCR0ucgS.js"),[]))},{id:"angular-html",name:"Angular HTML",import:(()=>T(()=>import("./angular-html-CU67Zn6k.js").then(t=>t.f),__vite__mapDeps([0,1,2,3])))},{id:"angular-ts",name:"Angular TypeScript",import:(()=>T(()=>import("./angular-ts-BwZT4LLn.js"),__vite__mapDeps([4,0,1,2,3,5])))},{id:"apache",name:"Apache Conf",import:(()=>T(()=>import("./apache-Pmp26Uib.js"),[]))},{id:"apex",name:"Apex",import:(()=>T(()=>import("./apex-DDbsPZ6N.js"),[]))},{id:"apl",name:"APL",import:(()=>T(()=>import("./apl-dKokRX4l.js"),__vite__mapDeps([6,1,2,3,7,8,9])))},{id:"applescript",name:"AppleScript",import:(()=>T(()=>import("./applescript-Co6uUVPk.js"),[]))},{id:"ara",name:"Ara",import:(()=>T(()=>import("./ara-BRHolxvo.js"),[]))},{id:"asciidoc",name:"AsciiDoc",aliases:["adoc"],import:(()=>T(()=>import("./asciidoc-Dv7Oe6Be.js"),[]))},{id:"asm",name:"Assembly",import:(()=>T(()=>import("./asm-D_Q5rh1f.js"),[]))},{id:"astro",name:"Astro",import:(()=>T(()=>import("./astro-CbQHKStN.js"),__vite__mapDeps([10,9,2,11,3,12,13])))},{id:"awk",name:"AWK",import:(()=>T(()=>import("./awk-DMzUqQB5.js"),[]))},{id:"ballerina",name:"Ballerina",import:(()=>T(()=>import("./ballerina-BFfxhgS-.js"),[]))},{id:"bat",name:"Batch File",aliases:["batch"],import:(()=>T(()=>import("./bat-BkioyH1T.js"),[]))},{id:"beancount",name:"Beancount",import:(()=>T(()=>import("./beancount-k_qm7-4y.js"),[]))},{id:"berry",name:"Berry",aliases:["be"],import:(()=>T(()=>import("./berry-uYugtg8r.js"),[]))},{id:"bibtex",name:"BibTeX",import:(()=>T(()=>import("./bibtex-CHM0blh-.js"),[]))},{id:"bicep",name:"Bicep",import:(()=>T(()=>import("./bicep-Bmn6On1c.js"),[]))},{id:"blade",name:"Blade",import:(()=>T(()=>import("./blade-DVc8C-J4.js"),__vite__mapDeps([14,15,1,2,3,7,8,16,9])))},{id:"bsl",name:"1C (Enterprise)",aliases:["1c"],import:(()=>T(()=>import("./bsl-BO_Y6i37.js"),__vite__mapDeps([17,18])))},{id:"c",name:"C",import:(()=>T(()=>import("./c-BIGW1oBm.js"),[]))},{id:"cadence",name:"Cadence",aliases:["cdc"],import:(()=>T(()=>import("./cadence-Bv_4Rxtq.js"),[]))},{id:"cairo",name:"Cairo",import:(()=>T(()=>import("./cairo-KRGpt6FW.js"),__vite__mapDeps([19,20])))},{id:"clarity",name:"Clarity",import:(()=>T(()=>import("./clarity-D53aC0YG.js"),[]))},{id:"clojure",name:"Clojure",aliases:["clj"],import:(()=>T(()=>import("./clojure-P80f7IUj.js"),[]))},{id:"cmake",name:"CMake",import:(()=>T(()=>import("./cmake-D1j8_8rp.js"),[]))},{id:"cobol",name:"COBOL",import:(()=>T(()=>import("./cobol-nwyudZeR.js"),__vite__mapDeps([21,1,2,3,8])))},{id:"codeowners",name:"CODEOWNERS",import:(()=>T(()=>import("./codeowners-Bp6g37R7.js"),[]))},{id:"codeql",name:"CodeQL",aliases:["ql"],import:(()=>T(()=>import("./codeql-DsOJ9woJ.js"),[]))},{id:"coffee",name:"CoffeeScript",aliases:["coffeescript"],import:(()=>T(()=>import("./coffee-Ch7k5sss.js"),__vite__mapDeps([22,2])))},{id:"common-lisp",name:"Common Lisp",aliases:["lisp"],import:(()=>T(()=>import("./common-lisp-Cg-RD9OK.js"),[]))},{id:"coq",name:"Coq",import:(()=>T(()=>import("./coq-DkFqJrB1.js"),[]))},{id:"cpp",name:"C++",aliases:["c++"],import:(()=>T(()=>import("./cpp-CofmeUqb.js"),__vite__mapDeps([23,24,25,26,16])))},{id:"crystal",name:"Crystal",import:(()=>T(()=>import("./crystal-tKQVLTB8.js"),__vite__mapDeps([27,1,2,3,16,26,28])))},{id:"csharp",name:"C#",aliases:["c#","cs"],import:(()=>T(()=>import("./csharp-K5feNrxe.js"),[]))},{id:"css",name:"CSS",import:(()=>T(()=>import("./css-DPfMkruS.js"),[]))},{id:"csv",name:"CSV",import:(()=>T(()=>import("./csv-fuZLfV_i.js"),[]))},{id:"cue",name:"CUE",import:(()=>T(()=>import("./cue-D82EKSYY.js"),[]))},{id:"cypher",name:"Cypher",aliases:["cql"],import:(()=>T(()=>import("./cypher-COkxafJQ.js"),[]))},{id:"d",name:"D",import:(()=>T(()=>import("./d-85-TOEBH.js"),[]))},{id:"dart",name:"Dart",import:(()=>T(()=>import("./dart-CF10PKvl.js"),[]))},{id:"dax",name:"DAX",import:(()=>T(()=>import("./dax-CEL-wOlO.js"),[]))},{id:"desktop",name:"Desktop",import:(()=>T(()=>import("./desktop-BmXAJ9_W.js"),[]))},{id:"diff",name:"Diff",import:(()=>T(()=>import("./diff-D97Zzqfu.js"),[]))},{id:"docker",name:"Dockerfile",aliases:["dockerfile"],import:(()=>T(()=>import("./docker-BcOcwvcX.js"),[]))},{id:"dotenv",name:"dotEnv",import:(()=>T(()=>import("./dotenv-Da5cRb03.js"),[]))},{id:"dream-maker",name:"Dream Maker",import:(()=>T(()=>import("./dream-maker-BtqSS_iP.js"),[]))},{id:"edge",name:"Edge",import:(()=>T(()=>import("./edge-BkV0erSs.js"),__vite__mapDeps([29,11,1,2,3,15])))},{id:"elixir",name:"Elixir",import:(()=>T(()=>import("./elixir-CDX3lj18.js"),__vite__mapDeps([30,1,2,3])))},{id:"elm",name:"Elm",import:(()=>T(()=>import("./elm-DbKCFpqz.js"),__vite__mapDeps([31,25,26])))},{id:"emacs-lisp",name:"Emacs Lisp",aliases:["elisp"],import:(()=>T(()=>import("./emacs-lisp-C9XAeP06.js"),[]))},{id:"erb",name:"ERB",import:(()=>T(()=>import("./erb-BOJIQeun.js"),__vite__mapDeps([32,1,2,3,33,34,7,8,16,35,11,36,13,23,24,25,26,28,37,38])))},{id:"erlang",name:"Erlang",aliases:["erl"],import:(()=>T(()=>import("./erlang-DsQrWhSR.js"),__vite__mapDeps([39,40])))},{id:"fennel",name:"Fennel",import:(()=>T(()=>import("./fennel-BYunw83y.js"),[]))},{id:"fish",name:"Fish",import:(()=>T(()=>import("./fish-BvzEVeQv.js"),[]))},{id:"fluent",name:"Fluent",aliases:["ftl"],import:(()=>T(()=>import("./fluent-C4IJs8-o.js"),[]))},{id:"fortran-fixed-form",name:"Fortran (Fixed Form)",aliases:["f","for","f77"],import:(()=>T(()=>import("./fortran-fixed-form-BZjJHVRy.js"),__vite__mapDeps([41,42])))},{id:"fortran-free-form",name:"Fortran (Free Form)",aliases:["f90","f95","f03","f08","f18"],import:(()=>T(()=>import("./fortran-free-form-D22FLkUw.js"),[]))},{id:"fsharp",name:"F#",aliases:["f#","fs"],import:(()=>T(()=>import("./fsharp-CXgrBDvD.js"),__vite__mapDeps([43,40])))},{id:"gdresource",name:"GDResource",import:(()=>T(()=>import("./gdresource-B7Tvp0Sc.js"),__vite__mapDeps([44,45,46])))},{id:"gdscript",name:"GDScript",import:(()=>T(()=>import("./gdscript-DTMYz4Jt.js"),[]))},{id:"gdshader",name:"GDShader",import:(()=>T(()=>import("./gdshader-DkwncUOv.js"),[]))},{id:"genie",name:"Genie",import:(()=>T(()=>import("./genie-D0YGMca9.js"),[]))},{id:"gherkin",name:"Gherkin",import:(()=>T(()=>import("./gherkin-DyxjwDmM.js"),[]))},{id:"git-commit",name:"Git Commit Message",import:(()=>T(()=>import("./git-commit-F4YmCXRG.js"),__vite__mapDeps([47,48])))},{id:"git-rebase",name:"Git Rebase Message",import:(()=>T(()=>import("./git-rebase-r7XF79zn.js"),__vite__mapDeps([49,28])))},{id:"gleam",name:"Gleam",import:(()=>T(()=>import("./gleam-BspZqrRM.js"),[]))},{id:"glimmer-js",name:"Glimmer JS",aliases:["gjs"],import:(()=>T(()=>import("./glimmer-js-Rg0-pVw9.js"),__vite__mapDeps([50,2,11,3,1])))},{id:"glimmer-ts",name:"Glimmer TS",aliases:["gts"],import:(()=>T(()=>import("./glimmer-ts-U6CK756n.js"),__vite__mapDeps([51,11,3,2,1])))},{id:"glsl",name:"GLSL",import:(()=>T(()=>import("./glsl-DplSGwfg.js"),__vite__mapDeps([25,26])))},{id:"gnuplot",name:"Gnuplot",import:(()=>T(()=>import("./gnuplot-DdkO51Og.js"),[]))},{id:"go",name:"Go",import:(()=>T(()=>import("./go-Dn2_MT6a.js"),[]))},{id:"graphql",name:"GraphQL",aliases:["gql"],import:(()=>T(()=>import("./graphql-ChdNCCLP.js"),__vite__mapDeps([35,2,11,36,13])))},{id:"groovy",name:"Groovy",import:(()=>T(()=>import("./groovy-gcz8RCvz.js"),[]))},{id:"hack",name:"Hack",import:(()=>T(()=>import("./hack-CaT9iCJl.js"),__vite__mapDeps([52,1,2,3,16])))},{id:"haml",name:"Ruby Haml",import:(()=>T(()=>import("./haml-B8DHNrY2.js"),__vite__mapDeps([34,2,3])))},{id:"handlebars",name:"Handlebars",aliases:["hbs"],import:(()=>T(()=>import("./handlebars-BL8al0AC.js"),__vite__mapDeps([53,1,2,3,38])))},{id:"haskell",name:"Haskell",aliases:["hs"],import:(()=>T(()=>import("./haskell-Df6bDoY_.js"),[]))},{id:"haxe",name:"Haxe",import:(()=>T(()=>import("./haxe-CzTSHFRz.js"),[]))},{id:"hcl",name:"HashiCorp HCL",import:(()=>T(()=>import("./hcl-BWvSN4gD.js"),[]))},{id:"hjson",name:"Hjson",import:(()=>T(()=>import("./hjson-D5-asLiD.js"),[]))},{id:"hlsl",name:"HLSL",import:(()=>T(()=>import("./hlsl-D3lLCCz7.js"),[]))},{id:"html",name:"HTML",import:(()=>T(()=>import("./html-GMplVEZG.js"),__vite__mapDeps([1,2,3])))},{id:"html-derivative",name:"HTML (Derivative)",import:(()=>T(()=>import("./html-derivative-BFtXZ54Q.js"),__vite__mapDeps([15,1,2,3])))},{id:"http",name:"HTTP",import:(()=>T(()=>import("./http-jrhK8wxY.js"),__vite__mapDeps([54,28,9,7,8,35,2,11,36,13])))},{id:"hurl",name:"Hurl",import:(()=>T(()=>import("./hurl-irOxFIW8.js"),__vite__mapDeps([55,35,2,11,36,13,7,8,56])))},{id:"hxml",name:"HXML",import:(()=>T(()=>import("./hxml-Bvhsp5Yf.js"),__vite__mapDeps([57,58])))},{id:"hy",name:"Hy",import:(()=>T(()=>import("./hy-DFXneXwc.js"),[]))},{id:"imba",name:"Imba",import:(()=>T(()=>import("./imba-DGztddWO.js"),[]))},{id:"ini",name:"INI",aliases:["properties"],import:(()=>T(()=>import("./ini-BEwlwnbL.js"),[]))},{id:"java",name:"Java",import:(()=>T(()=>import("./java-CylS5w8V.js"),[]))},{id:"javascript",name:"JavaScript",aliases:["js","cjs","mjs"],import:(()=>T(()=>import("./javascript-wDzz0qaB.js"),[]))},{id:"jinja",name:"Jinja",import:(()=>T(()=>import("./jinja-4LBKfQ-Z.js"),__vite__mapDeps([59,1,2,3])))},{id:"jison",name:"Jison",import:(()=>T(()=>import("./jison-wvAkD_A8.js"),__vite__mapDeps([60,2])))},{id:"json",name:"JSON",import:(()=>T(()=>import("./json-Cp-IABpG.js"),[]))},{id:"json5",name:"JSON5",import:(()=>T(()=>import("./json5-C9tS-k6U.js"),[]))},{id:"jsonc",name:"JSON with Comments",import:(()=>T(()=>import("./jsonc-Des-eS-w.js"),[]))},{id:"jsonl",name:"JSON Lines",import:(()=>T(()=>import("./jsonl-DcaNXYhu.js"),[]))},{id:"jsonnet",name:"Jsonnet",import:(()=>T(()=>import("./jsonnet-DFQXde-d.js"),[]))},{id:"jssm",name:"JSSM",aliases:["fsl"],import:(()=>T(()=>import("./jssm-C2t-YnRu.js"),[]))},{id:"jsx",name:"JSX",import:(()=>T(()=>import("./jsx-g9-lgVsj.js"),[]))},{id:"julia",name:"Julia",aliases:["jl"],import:(()=>T(()=>import("./julia-C8NyazO9.js"),__vite__mapDeps([61,23,24,25,26,16,20,2,62])))},{id:"kdl",name:"KDL",import:(()=>T(()=>import("./kdl-DV7GczEv.js"),[]))},{id:"kotlin",name:"Kotlin",aliases:["kt","kts"],import:(()=>T(()=>import("./kotlin-BdnUsdx6.js"),[]))},{id:"kusto",name:"Kusto",aliases:["kql"],import:(()=>T(()=>import("./kusto-BvAqAH-y.js"),[]))},{id:"latex",name:"LaTeX",import:(()=>T(()=>import("./latex-BdAV_C_H.js"),__vite__mapDeps([63,64,62])))},{id:"lean",name:"Lean 4",aliases:["lean4"],import:(()=>T(()=>import("./lean-Bc6EcWN3.js"),[]))},{id:"less",name:"Less",import:(()=>T(()=>import("./less-B1dDrJ26.js"),[]))},{id:"liquid",name:"Liquid",import:(()=>T(()=>import("./liquid-DYVedYrR.js"),__vite__mapDeps([65,1,2,3,9])))},{id:"llvm",name:"LLVM IR",import:(()=>T(()=>import("./llvm-BtvRca6l.js"),[]))},{id:"log",name:"Log file",import:(()=>T(()=>import("./log-2UxHyX5q.js"),[]))},{id:"logo",name:"Logo",import:(()=>T(()=>import("./logo-BtOb2qkB.js"),[]))},{id:"lua",name:"Lua",import:(()=>T(()=>import("./lua-BbnMAYS6.js"),__vite__mapDeps([37,26])))},{id:"luau",name:"Luau",import:(()=>T(()=>import("./luau-CXu1NL6O.js"),[]))},{id:"make",name:"Makefile",aliases:["makefile"],import:(()=>T(()=>import("./make-CHLpvVh8.js"),[]))},{id:"markdown",name:"Markdown",aliases:["md"],import:(()=>T(()=>import("./markdown-Cvjx9yec.js"),[]))},{id:"marko",name:"Marko",import:(()=>T(()=>import("./marko-CPi9NSCl.js"),__vite__mapDeps([66,3,67,5,11])))},{id:"matlab",name:"MATLAB",import:(()=>T(()=>import("./matlab-D7o27uSR.js"),[]))},{id:"mdc",name:"MDC",import:(()=>T(()=>import("./mdc-DUICxH0z.js"),__vite__mapDeps([68,40,38,15,1,2,3])))},{id:"mdx",name:"MDX",import:(()=>T(()=>import("./mdx-Cmh6b_Ma.js"),[]))},{id:"mermaid",name:"Mermaid",aliases:["mmd"],import:(()=>T(()=>import("./mermaid-DKYwYmdq.js"),[]))},{id:"mipsasm",name:"MIPS Assembly",aliases:["mips"],import:(()=>T(()=>import("./mipsasm-CKIfxQSi.js"),[]))},{id:"mojo",name:"Mojo",import:(()=>T(()=>import("./mojo-1DNp92w6.js"),[]))},{id:"move",name:"Move",import:(()=>T(()=>import("./move-Bu9oaDYs.js"),[]))},{id:"narrat",name:"Narrat Language",aliases:["nar"],import:(()=>T(()=>import("./narrat-DRg8JJMk.js"),[]))},{id:"nextflow",name:"Nextflow",aliases:["nf"],import:(()=>T(()=>import("./nextflow-BrzmwbiE.js"),[]))},{id:"nginx",name:"Nginx",import:(()=>T(()=>import("./nginx-DknmC5AR.js"),__vite__mapDeps([69,37,26])))},{id:"nim",name:"Nim",import:(()=>T(()=>import("./nim-CVrawwO9.js"),__vite__mapDeps([70,26,1,2,3,7,8,25,40])))},{id:"nix",name:"Nix",import:(()=>T(()=>import("./nix-c8nO5XWb.js"),[]))},{id:"nushell",name:"nushell",aliases:["nu"],import:(()=>T(()=>import("./nushell-C-sUppwS.js"),[]))},{id:"objective-c",name:"Objective-C",aliases:["objc"],import:(()=>T(()=>import("./objective-c-DXmwc3jG.js"),[]))},{id:"objective-cpp",name:"Objective-C++",import:(()=>T(()=>import("./objective-cpp-CLxacb5B.js"),[]))},{id:"ocaml",name:"OCaml",import:(()=>T(()=>import("./ocaml-C0hk2d4L.js"),[]))},{id:"openscad",name:"OpenSCAD",aliases:["scad"],import:(()=>T(()=>import("./openscad-C4EeE6gA.js"),[]))},{id:"pascal",name:"Pascal",import:(()=>T(()=>import("./pascal-D93ZcfNL.js"),[]))},{id:"perl",name:"Perl",import:(()=>T(()=>import("./perl-C0TMdlhV.js"),__vite__mapDeps([71,1,2,3,7,8,16])))},{id:"php",name:"PHP",import:(()=>T(()=>import("./php-CDn_0X-4.js"),__vite__mapDeps([72,1,2,3,7,8,16,9])))},{id:"pkl",name:"Pkl",import:(()=>T(()=>import("./pkl-u5AG7uiY.js"),[]))},{id:"plsql",name:"PL/SQL",import:(()=>T(()=>import("./plsql-ChMvpjG-.js"),[]))},{id:"po",name:"Gettext PO",aliases:["pot","potx"],import:(()=>T(()=>import("./po-BTJTHyun.js"),[]))},{id:"polar",name:"Polar",import:(()=>T(()=>import("./polar-C0HS_06l.js"),[]))},{id:"postcss",name:"PostCSS",import:(()=>T(()=>import("./postcss-CXtECtnM.js"),[]))},{id:"powerquery",name:"PowerQuery",import:(()=>T(()=>import("./powerquery-CEu0bR-o.js"),[]))},{id:"powershell",name:"PowerShell",aliases:["ps","ps1"],import:(()=>T(()=>import("./powershell-Dpen1YoG.js"),[]))},{id:"prisma",name:"Prisma",import:(()=>T(()=>import("./prisma-Dd19v3D-.js"),[]))},{id:"prolog",name:"Prolog",import:(()=>T(()=>import("./prolog-CbFg5uaA.js"),[]))},{id:"proto",name:"Protocol Buffer 3",aliases:["protobuf"],import:(()=>T(()=>import("./proto-DyJlTyXw.js"),[]))},{id:"pug",name:"Pug",aliases:["jade"],import:(()=>T(()=>import("./pug-CGlum2m_.js"),__vite__mapDeps([73,2,3,1])))},{id:"puppet",name:"Puppet",import:(()=>T(()=>import("./puppet-BMWR74SV.js"),[]))},{id:"purescript",name:"PureScript",import:(()=>T(()=>import("./purescript-CklMAg4u.js"),[]))},{id:"python",name:"Python",aliases:["py"],import:(()=>T(()=>import("./python-B6aJPvgy.js"),[]))},{id:"qml",name:"QML",import:(()=>T(()=>import("./qml-3beO22l8.js"),__vite__mapDeps([74,2])))},{id:"qmldir",name:"QML Directory",import:(()=>T(()=>import("./qmldir-C8lEn-DE.js"),[]))},{id:"qss",name:"Qt Style Sheets",import:(()=>T(()=>import("./qss-IeuSbFQv.js"),[]))},{id:"r",name:"R",import:(()=>T(()=>import("./r-DiinP2Uv.js"),[]))},{id:"racket",name:"Racket",import:(()=>T(()=>import("./racket-BqYA7rlc.js"),[]))},{id:"raku",name:"Raku",aliases:["perl6"],import:(()=>T(()=>import("./raku-DXvB9xmW.js"),[]))},{id:"razor",name:"ASP.NET Razor",import:(()=>T(()=>import("./razor-CE9lU5zL.js"),__vite__mapDeps([75,1,2,3,76])))},{id:"reg",name:"Windows Registry Script",import:(()=>T(()=>import("./reg-C-SQnVFl.js"),[]))},{id:"regexp",name:"RegExp",aliases:["regex"],import:(()=>T(()=>import("./regexp-CDVJQ6XC.js"),[]))},{id:"rel",name:"Rel",import:(()=>T(()=>import("./rel-C3B-1QV4.js"),[]))},{id:"riscv",name:"RISC-V",import:(()=>T(()=>import("./riscv-BM1_JUlF.js"),[]))},{id:"rosmsg",name:"ROS Interface",import:(()=>T(()=>import("./rosmsg-BJDFO7_C.js"),[]))},{id:"rst",name:"reStructuredText",import:(()=>T(()=>import("./rst-B0xPkSld.js"),__vite__mapDeps([77,15,1,2,3,23,24,25,26,16,20,28,38,78,33,34,7,8,35,11,36,13,37])))},{id:"ruby",name:"Ruby",aliases:["rb"],import:(()=>T(()=>import("./ruby-BvKwtOVI.js"),__vite__mapDeps([33,1,2,3,34,7,8,16,35,11,36,13,23,24,25,26,28,37,38])))},{id:"rust",name:"Rust",aliases:["rs"],import:(()=>T(()=>import("./rust-B1yitclQ.js"),[]))},{id:"sas",name:"SAS",import:(()=>T(()=>import("./sas-cz2c8ADy.js"),__vite__mapDeps([79,16])))},{id:"sass",name:"Sass",import:(()=>T(()=>import("./sass-Cj5Yp3dK.js"),[]))},{id:"scala",name:"Scala",import:(()=>T(()=>import("./scala-C151Ov-r.js"),[]))},{id:"scheme",name:"Scheme",import:(()=>T(()=>import("./scheme-C98Dy4si.js"),[]))},{id:"scss",name:"SCSS",import:(()=>T(()=>import("./scss-OYdSNvt2.js"),__vite__mapDeps([5,3])))},{id:"sdbl",name:"1C (Query)",aliases:["1c-query"],import:(()=>T(()=>import("./sdbl-DVxCFoDh.js"),[]))},{id:"shaderlab",name:"ShaderLab",aliases:["shader"],import:(()=>T(()=>import("./shaderlab-Dg9Lc6iA.js"),__vite__mapDeps([80,81])))},{id:"shellscript",name:"Shell",aliases:["bash","sh","shell","zsh"],import:(()=>T(()=>import("./shellscript-Yzrsuije.js"),[]))},{id:"shellsession",name:"Shell Session",aliases:["console"],import:(()=>T(()=>import("./shellsession-BADoaaVG.js"),__vite__mapDeps([82,28])))},{id:"smalltalk",name:"Smalltalk",import:(()=>T(()=>import("./smalltalk-BERRCDM3.js"),[]))},{id:"solidity",name:"Solidity",import:(()=>T(()=>import("./solidity-rGO070M0.js"),[]))},{id:"soy",name:"Closure Templates",aliases:["closure-templates"],import:(()=>T(()=>import("./soy-Brmx7dQM.js"),__vite__mapDeps([83,1,2,3])))},{id:"sparql",name:"SPARQL",import:(()=>T(()=>import("./sparql-rVzFXLq3.js"),__vite__mapDeps([84,85])))},{id:"splunk",name:"Splunk Query Language",aliases:["spl"],import:(()=>T(()=>import("./splunk-BtCnVYZw.js"),[]))},{id:"sql",name:"SQL",import:(()=>T(()=>import("./sql-BLtJtn59.js"),[]))},{id:"ssh-config",name:"SSH Config",import:(()=>T(()=>import("./ssh-config-_ykCGR6B.js"),[]))},{id:"stata",name:"Stata",import:(()=>T(()=>import("./stata-BH5u7GGu.js"),__vite__mapDeps([86,16])))},{id:"stylus",name:"Stylus",aliases:["styl"],import:(()=>T(()=>import("./stylus-BEDo0Tqx.js"),[]))},{id:"svelte",name:"Svelte",import:(()=>T(()=>import("./svelte-3Dk4HxPD.js"),__vite__mapDeps([87,2,11,3,12])))},{id:"swift",name:"Swift",import:(()=>T(()=>import("./swift-Dg5xB15N.js"),[]))},{id:"system-verilog",name:"SystemVerilog",import:(()=>T(()=>import("./system-verilog-CnnmHF94.js"),[]))},{id:"systemd",name:"Systemd Units",import:(()=>T(()=>import("./systemd-4A_iFExJ.js"),[]))},{id:"talonscript",name:"TalonScript",aliases:["talon"],import:(()=>T(()=>import("./talonscript-CkByrt1z.js"),[]))},{id:"tasl",name:"Tasl",import:(()=>T(()=>import("./tasl-QIJgUcNo.js"),[]))},{id:"tcl",name:"Tcl",import:(()=>T(()=>import("./tcl-dwOrl1Do.js"),[]))},{id:"templ",name:"Templ",import:(()=>T(()=>import("./templ-W15q3VgB.js"),__vite__mapDeps([88,89,2,3])))},{id:"terraform",name:"Terraform",aliases:["tf","tfvars"],import:(()=>T(()=>import("./terraform-BETggiCN.js"),[]))},{id:"tex",name:"TeX",import:(()=>T(()=>import("./tex-CxkMU7Pf.js"),__vite__mapDeps([64,62])))},{id:"toml",name:"TOML",import:(()=>T(()=>import("./toml-vGWfd6FD.js"),[]))},{id:"ts-tags",name:"TypeScript with Tags",aliases:["lit"],import:(()=>T(()=>import("./ts-tags-zn1MmPIZ.js"),__vite__mapDeps([90,11,3,2,25,26,1,16,7,8])))},{id:"tsv",name:"TSV",import:(()=>T(()=>import("./tsv-B_m7g4N7.js"),[]))},{id:"tsx",name:"TSX",import:(()=>T(()=>import("./tsx-COt5Ahok.js"),[]))},{id:"turtle",name:"Turtle",import:(()=>T(()=>import("./turtle-BsS91CYL.js"),[]))},{id:"twig",name:"Twig",import:(()=>T(()=>import("./twig-CO9l9SDP.js"),__vite__mapDeps([91,3,2,5,72,1,7,8,16,9,20,33,34,35,11,36,13,23,24,25,26,28,37,38])))},{id:"typescript",name:"TypeScript",aliases:["ts","cts","mts"],import:(()=>T(()=>import("./typescript-BPQ3VLAy.js"),[]))},{id:"typespec",name:"TypeSpec",aliases:["tsp"],import:(()=>T(()=>import("./typespec-BGHnOYBU.js"),[]))},{id:"typst",name:"Typst",aliases:["typ"],import:(()=>T(()=>import("./typst-DHCkPAjA.js"),[]))},{id:"v",name:"V",import:(()=>T(()=>import("./v-BcVCzyr7.js"),[]))},{id:"vala",name:"Vala",import:(()=>T(()=>import("./vala-CsfeWuGM.js"),[]))},{id:"vb",name:"Visual Basic",aliases:["cmd"],import:(()=>T(()=>import("./vb-D17OF-Vu.js"),[]))},{id:"verilog",name:"Verilog",import:(()=>T(()=>import("./verilog-BQ8w6xss.js"),[]))},{id:"vhdl",name:"VHDL",import:(()=>T(()=>import("./vhdl-CeAyd5Ju.js"),[]))},{id:"viml",name:"Vim Script",aliases:["vim","vimscript"],import:(()=>T(()=>import("./viml-CJc9bBzg.js"),[]))},{id:"vue",name:"Vue",import:(()=>T(()=>import("./vue-DnHKYNfI.js"),__vite__mapDeps([92,3,2,11,9,15,1])))},{id:"vue-html",name:"Vue HTML",import:(()=>T(()=>import("./vue-html-CChd_i61.js"),__vite__mapDeps([93,92,3,2,11,9,15,1])))},{id:"vue-vine",name:"Vue Vine",import:(()=>T(()=>import("./vue-vine-8moa0y9V.js"),__vite__mapDeps([94,3,5,67,95,12,92,2,11,9,15,1])))},{id:"vyper",name:"Vyper",aliases:["vy"],import:(()=>T(()=>import("./vyper-CDx5xZoG.js"),[]))},{id:"wasm",name:"WebAssembly",import:(()=>T(()=>import("./wasm-MzD3tlZU.js"),[]))},{id:"wenyan",name:"Wenyan",aliases:[""],import:(()=>T(()=>import("./wenyan-BV7otONQ.js"),[]))},{id:"wgsl",name:"WGSL",import:(()=>T(()=>import("./wgsl-Dx-B1_4e.js"),[]))},{id:"wikitext",name:"Wikitext",aliases:["mediawiki","wiki"],import:(()=>T(()=>import("./wikitext-BhOHFoWU.js"),[]))},{id:"wit",name:"WebAssembly Interface Types",import:(()=>T(()=>import("./wit-5i3qLPDT.js"),[]))},{id:"wolfram",name:"Wolfram",aliases:["wl"],import:(()=>T(()=>import("./wolfram-lXgVvXCa.js"),[]))},{id:"xml",name:"XML",import:(()=>T(()=>import("./xml-sdJ4AIDG.js"),__vite__mapDeps([7,8])))},{id:"xsl",name:"XSL",import:(()=>T(()=>import("./xsl-CtQFsRM5.js"),__vite__mapDeps([96,7,8])))},{id:"yaml",name:"YAML",aliases:["yml"],import:(()=>T(()=>import("./yaml-Buea-lGh.js"),[]))},{id:"zenscript",name:"ZenScript",import:(()=>T(()=>import("./zenscript-DVFEvuxE.js"),[]))},{id:"zig",name:"Zig",import:(()=>T(()=>import("./zig-VOosw3JB.js"),[]))}],Wk=Object.fromEntries(km.map(t=>[t.id,t.import])),qk=Object.fromEntries(km.flatMap(t=>t.aliases?.map(e=>[e,t.import])||[])),Kk={...Wk,...qk},Xk=[{id:"andromeeda",displayName:"Andromeeda",type:"dark",import:(()=>T(()=>import("./andromeeda-C-Jbm3Hp.js"),[]))},{id:"aurora-x",displayName:"Aurora X",type:"dark",import:(()=>T(()=>import("./aurora-x-D-2ljcwZ.js"),[]))},{id:"ayu-dark",displayName:"Ayu Dark",type:"dark",import:(()=>T(()=>import("./ayu-dark-Cv9koXgw.js"),[]))},{id:"catppuccin-frappe",displayName:"Catppuccin Frapp",type:"dark",import:(()=>T(()=>import("./catppuccin-frappe-DFWUc33u.js"),[]))},{id:"catppuccin-latte",displayName:"Catppuccin Latte",type:"light",import:(()=>T(()=>import("./catppuccin-latte-C9dUb6Cb.js"),[]))},{id:"catppuccin-macchiato",displayName:"Catppuccin Macchiato",type:"dark",import:(()=>T(()=>import("./catppuccin-macchiato-DQyhUUbL.js"),[]))},{id:"catppuccin-mocha",displayName:"Catppuccin Mocha",type:"dark",import:(()=>T(()=>import("./catppuccin-mocha-D87Tk5Gz.js"),[]))},{id:"dark-plus",displayName:"Dark Plus",type:"dark",import:(()=>T(()=>import("./dark-plus-C3mMm8J8.js"),[]))},{id:"dracula",displayName:"Dracula Theme",type:"dark",import:(()=>T(()=>import("./dracula-BzJJZx-M.js"),[]))},{id:"dracula-soft",displayName:"Dracula Theme Soft",type:"dark",import:(()=>T(()=>import("./dracula-soft-BXkSAIEj.js"),[]))},{id:"everforest-dark",displayName:"Everforest Dark",type:"dark",import:(()=>T(()=>import("./everforest-dark-BgDCqdQA.js"),[]))},{id:"everforest-light",displayName:"Everforest Light",type:"light",import:(()=>T(()=>import("./everforest-light-C8M2exoo.js"),[]))},{id:"github-dark",displayName:"GitHub Dark",type:"dark",import:(()=>T(()=>import("./github-dark-DHJKELXO.js"),[]))},{id:"github-dark-default",displayName:"GitHub Dark Default",type:"dark",import:(()=>T(()=>import("./github-dark-default-Cuk6v7N8.js"),[]))},{id:"github-dark-dimmed",displayName:"GitHub Dark Dimmed",type:"dark",import:(()=>T(()=>import("./github-dark-dimmed-DH5Ifo-i.js"),[]))},{id:"github-dark-high-contrast",displayName:"GitHub Dark High Contrast",type:"dark",import:(()=>T(()=>import("./github-dark-high-contrast-E3gJ1_iC.js"),[]))},{id:"github-light",displayName:"GitHub Light",type:"light",import:(()=>T(()=>import("./github-light-DAi9KRSo.js"),[]))},{id:"github-light-default",displayName:"GitHub Light Default",type:"light",import:(()=>T(()=>import("./github-light-default-D7oLnXFd.js"),[]))},{id:"github-light-high-contrast",displayName:"GitHub Light High Contrast",type:"light",import:(()=>T(()=>import("./github-light-high-contrast-BfjtVDDH.js"),[]))},{id:"gruvbox-dark-hard",displayName:"Gruvbox Dark Hard",type:"dark",import:(()=>T(()=>import("./gruvbox-dark-hard-CFHQjOhq.js"),[]))},{id:"gruvbox-dark-medium",displayName:"Gruvbox Dark Medium",type:"dark",import:(()=>T(()=>import("./gruvbox-dark-medium-GsRaNv29.js"),[]))},{id:"gruvbox-dark-soft",displayName:"Gruvbox Dark Soft",type:"dark",import:(()=>T(()=>import("./gruvbox-dark-soft-CVdnzihN.js"),[]))},{id:"gruvbox-light-hard",displayName:"Gruvbox Light Hard",type:"light",import:(()=>T(()=>import("./gruvbox-light-hard-CH1njM8p.js"),[]))},{id:"gruvbox-light-medium",displayName:"Gruvbox Light Medium",type:"light",import:(()=>T(()=>import("./gruvbox-light-medium-DRw_LuNl.js"),[]))},{id:"gruvbox-light-soft",displayName:"Gruvbox Light Soft",type:"light",import:(()=>T(()=>import("./gruvbox-light-soft-hJgmCMqR.js"),[]))},{id:"houston",displayName:"Houston",type:"dark",import:(()=>T(()=>import("./houston-DnULxvSX.js"),[]))},{id:"kanagawa-dragon",displayName:"Kanagawa Dragon",type:"dark",import:(()=>T(()=>import("./kanagawa-dragon-CkXjmgJE.js"),[]))},{id:"kanagawa-lotus",displayName:"Kanagawa Lotus",type:"light",import:(()=>T(()=>import("./kanagawa-lotus-CfQXZHmo.js"),[]))},{id:"kanagawa-wave",displayName:"Kanagawa Wave",type:"dark",import:(()=>T(()=>import("./kanagawa-wave-DWedfzmr.js"),[]))},{id:"laserwave",displayName:"LaserWave",type:"dark",import:(()=>T(()=>import("./laserwave-DUszq2jm.js"),[]))},{id:"light-plus",displayName:"Light Plus",type:"light",import:(()=>T(()=>import("./light-plus-B7mTdjB0.js"),[]))},{id:"material-theme",displayName:"Material Theme",type:"dark",import:(()=>T(()=>import("./material-theme-D5KoaKCx.js"),[]))},{id:"material-theme-darker",displayName:"Material Theme Darker",type:"dark",import:(()=>T(()=>import("./material-theme-darker-BfHTSMKl.js"),[]))},{id:"material-theme-lighter",displayName:"Material Theme Lighter",type:"light",import:(()=>T(()=>import("./material-theme-lighter-B0m2ddpp.js"),[]))},{id:"material-theme-ocean",displayName:"Material Theme Ocean",type:"dark",import:(()=>T(()=>import("./material-theme-ocean-CyktbL80.js"),[]))},{id:"material-theme-palenight",displayName:"Material Theme Palenight",type:"dark",import:(()=>T(()=>import("./material-theme-palenight-Csfq5Kiy.js"),[]))},{id:"min-dark",displayName:"Min Dark",type:"dark",import:(()=>T(()=>import("./min-dark-CafNBF8u.js"),[]))},{id:"min-light",displayName:"Min Light",type:"light",import:(()=>T(()=>import("./min-light-CTRr51gU.js"),[]))},{id:"monokai",displayName:"Monokai",type:"dark",import:(()=>T(()=>import("./monokai-D4h5O-jR.js"),[]))},{id:"night-owl",displayName:"Night Owl",type:"dark",import:(()=>T(()=>import("./night-owl-C39BiMTA.js"),[]))},{id:"nord",displayName:"Nord",type:"dark",import:(()=>T(()=>import("./nord-Ddv68eIx.js"),[]))},{id:"one-dark-pro",displayName:"One Dark Pro",type:"dark",import:(()=>T(()=>import("./one-dark-pro-DVMEJ2y_.js"),[]))},{id:"one-light",displayName:"One Light",type:"light",import:(()=>T(()=>import("./one-light-PoHY5YXO.js"),[]))},{id:"plastic",displayName:"Plastic",type:"dark",import:(()=>T(()=>import("./plastic-3e1v2bzS.js"),[]))},{id:"poimandres",displayName:"Poimandres",type:"dark",import:(()=>T(()=>import("./poimandres-CS3Unz2-.js"),[]))},{id:"red",displayName:"Red",type:"dark",import:(()=>T(()=>import("./red-bN70gL4F.js"),[]))},{id:"rose-pine",displayName:"Ros Pine",type:"dark",import:(()=>T(()=>import("./rose-pine-qdsjHGoJ.js"),[]))},{id:"rose-pine-dawn",displayName:"Ros Pine Dawn",type:"light",import:(()=>T(()=>import("./rose-pine-dawn-DHQR4-dF.js"),[]))},{id:"rose-pine-moon",displayName:"Ros Pine Moon",type:"dark",import:(()=>T(()=>import("./rose-pine-moon-D4_iv3hh.js"),[]))},{id:"slack-dark",displayName:"Slack Dark",type:"dark",import:(()=>T(()=>import("./slack-dark-BthQWCQV.js"),[]))},{id:"slack-ochin",displayName:"Slack Ochin",type:"light",import:(()=>T(()=>import("./slack-ochin-DqwNpetd.js"),[]))},{id:"snazzy-light",displayName:"Snazzy Light",type:"light",import:(()=>T(()=>import("./snazzy-light-Bw305WKR.js"),[]))},{id:"solarized-dark",displayName:"Solarized Dark",type:"dark",import:(()=>T(()=>import("./solarized-dark-DXbdFlpD.js"),[]))},{id:"solarized-light",displayName:"Solarized Light",type:"light",import:(()=>T(()=>import("./solarized-light-L9t79GZl.js"),[]))},{id:"synthwave-84",displayName:"Synthwave '84",type:"dark",import:(()=>T(()=>import("./synthwave-84-CbfX1IO0.js"),[]))},{id:"tokyo-night",displayName:"Tokyo Night",type:"dark",import:(()=>T(()=>import("./tokyo-night-hegEt444.js"),[]))},{id:"vesper",displayName:"Vesper",type:"dark",import:(()=>T(()=>import("./vesper-DU1UobuO.js"),[]))},{id:"vitesse-black",displayName:"Vitesse Black",type:"dark",import:(()=>T(()=>import("./vitesse-black-Bkuqu6BP.js"),[]))},{id:"vitesse-dark",displayName:"Vitesse Dark",type:"dark",import:(()=>T(()=>import("./vitesse-dark-D0r3Knsf.js"),[]))},{id:"vitesse-light",displayName:"Vitesse Light",type:"light",import:(()=>T(()=>import("./vitesse-light-CVO1_9PV.js"),[]))}],Zk=Object.fromEntries(Xk.map(t=>[t.id,t.import]));class Td extends Error{constructor(e){super(e),this.name="ShikiError"}}function Yk(){return 2147483648}function Jk(){return typeof performance<"u"?performance.now():Date.now()}const Qk=(t,e)=>t+(e-t%e)%e;async function eE(t){let e,n;const i={};function r(f){n=f,i.HEAPU8=new Uint8Array(f),i.HEAPU32=new Uint32Array(f)}function o(f,p,m){i.HEAPU8.copyWithin(f,p,p+m)}function s(f){try{return e.grow(f-n.byteLength+65535>>>16),r(e.buffer),1}catch{}}function a(f){const p=i.HEAPU8.length;f=f>>>0;const m=Yk();if(f>m)return!1;for(let w=1;w<=4;w*=2){let _=p*(1+.2/w);_=Math.min(_,f+100663296);const x=Math.min(m,Qk(Math.max(f,_),65536));if(s(x))return!0}return!1}const l=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function c(f,p,m=1024){const w=p+m;let _=p;for(;f[_]&&!(_>=w);)++_;if(_-p>16&&f.buffer&&l)return l.decode(f.subarray(p,_));let x="";for(;p<_;){let k=f[p++];if(!(k&128)){x+=String.fromCharCode(k);continue}const v=f[p++]&63;if((k&224)===192){x+=String.fromCharCode((k&31)<<6|v);continue}const C=f[p++]&63;if((k&240)===224?k=(k&15)<<12|v<<6|C:k=(k&7)<<18|v<<12|C<<6|f[p++]&63,k<65536)x+=String.fromCharCode(k);else{const A=k-65536;x+=String.fromCharCode(55296|A>>10,56320|A&1023)}}return x}function d(f,p){return f?c(i.HEAPU8,f,p):""}const u={emscripten_get_now:Jk,emscripten_memcpy_big:o,emscripten_resize_heap:a,fd_write:()=>0};async function h(){const p=await t({env:u,wasi_snapshot_preview1:u});e=p.memory,r(e.buffer),Object.assign(i,p),i.UTF8ToString=d}return await h(),i}var tE=Object.defineProperty,nE=(t,e,n)=>e in t?tE(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ot=(t,e,n)=>nE(t,typeof e!="symbol"?e+"":e,n);let ct=null;function iE(t){throw new Td(t.UTF8ToString(t.getLastOnigError()))}class wa{constructor(e){ot(this,"utf16Length"),ot(this,"utf8Length"),ot(this,"utf16Value"),ot(this,"utf8Value"),ot(this,"utf16OffsetToUtf8"),ot(this,"utf8OffsetToUtf16");const n=e.length,i=wa._utf8ByteLength(e),r=i!==n,o=r?new Uint32Array(n+1):null;r&&(o[n]=i);const s=r?new Uint32Array(i+1):null;r&&(s[i]=n);const a=new Uint8Array(i);let l=0;for(let c=0;c<n;c++){const d=e.charCodeAt(c);let u=d,h=!1;if(d>=55296&&d<=56319&&c+1<n){const f=e.charCodeAt(c+1);f>=56320&&f<=57343&&(u=(d-55296<<10)+65536|f-56320,h=!0)}r&&(o[c]=l,h&&(o[c+1]=l),u<=127?s[l+0]=c:u<=2047?(s[l+0]=c,s[l+1]=c):u<=65535?(s[l+0]=c,s[l+1]=c,s[l+2]=c):(s[l+0]=c,s[l+1]=c,s[l+2]=c,s[l+3]=c)),u<=127?a[l++]=u:u<=2047?(a[l++]=192|(u&1984)>>>6,a[l++]=128|(u&63)>>>0):u<=65535?(a[l++]=224|(u&61440)>>>12,a[l++]=128|(u&4032)>>>6,a[l++]=128|(u&63)>>>0):(a[l++]=240|(u&1835008)>>>18,a[l++]=128|(u&258048)>>>12,a[l++]=128|(u&4032)>>>6,a[l++]=128|(u&63)>>>0),h&&c++}this.utf16Length=n,this.utf8Length=i,this.utf16Value=e,this.utf8Value=a,this.utf16OffsetToUtf8=o,this.utf8OffsetToUtf16=s}static _utf8ByteLength(e){let n=0;for(let i=0,r=e.length;i<r;i++){const o=e.charCodeAt(i);let s=o,a=!1;if(o>=55296&&o<=56319&&i+1<r){const l=e.charCodeAt(i+1);l>=56320&&l<=57343&&(s=(o-55296<<10)+65536|l-56320,a=!0)}s<=127?n+=1:s<=2047?n+=2:s<=65535?n+=3:n+=4,a&&i++}return n}createString(e){const n=e.omalloc(this.utf8Length);return e.HEAPU8.set(this.utf8Value,n),n}}const xa=class vn{constructor(e){if(ot(this,"id",++vn.LAST_ID),ot(this,"_onigBinding"),ot(this,"content"),ot(this,"utf16Length"),ot(this,"utf8Length"),ot(this,"utf16OffsetToUtf8"),ot(this,"utf8OffsetToUtf16"),ot(this,"ptr"),!ct)throw new Td("Must invoke loadWasm first.");this._onigBinding=ct,this.content=e;const n=new wa(e);this.utf16Length=n.utf16Length,this.utf8Length=n.utf8Length,this.utf16OffsetToUtf8=n.utf16OffsetToUtf8,this.utf8OffsetToUtf16=n.utf8OffsetToUtf16,this.utf8Length<1e4&&!vn._sharedPtrInUse?(vn._sharedPtr||(vn._sharedPtr=ct.omalloc(1e4)),vn._sharedPtrInUse=!0,ct.HEAPU8.set(n.utf8Value,vn._sharedPtr),this.ptr=vn._sharedPtr):this.ptr=n.createString(ct)}convertUtf8OffsetToUtf16(e){return this.utf8OffsetToUtf16?e<0?0:e>this.utf8Length?this.utf16Length:this.utf8OffsetToUtf16[e]:e}convertUtf16OffsetToUtf8(e){return this.utf16OffsetToUtf8?e<0?0:e>this.utf16Length?this.utf8Length:this.utf16OffsetToUtf8[e]:e}dispose(){this.ptr===vn._sharedPtr?vn._sharedPtrInUse=!1:this._onigBinding.ofree(this.ptr)}};ot(xa,"LAST_ID",0);ot(xa,"_sharedPtr",0);ot(xa,"_sharedPtrInUse",!1);let Em=xa;class rE{constructor(e){if(ot(this,"_onigBinding"),ot(this,"_ptr"),!ct)throw new Td("Must invoke loadWasm first.");const n=[],i=[];for(let a=0,l=e.length;a<l;a++){const c=new wa(e[a]);n[a]=c.createString(ct),i[a]=c.utf8Length}const r=ct.omalloc(4*e.length);ct.HEAPU32.set(n,r/4);const o=ct.omalloc(4*e.length);ct.HEAPU32.set(i,o/4);const s=ct.createOnigScanner(r,o,e.length);for(let a=0,l=e.length;a<l;a++)ct.ofree(n[a]);ct.ofree(o),ct.ofree(r),s===0&&iE(ct),this._onigBinding=ct,this._ptr=s}dispose(){this._onigBinding.freeOnigScanner(this._ptr)}findNextMatchSync(e,n,i){let r=0;if(typeof i=="number"&&(r=i),typeof e=="string"){e=new Em(e);const o=this._findNextMatchSync(e,n,!1,r);return e.dispose(),o}return this._findNextMatchSync(e,n,!1,r)}_findNextMatchSync(e,n,i,r){const o=this._onigBinding,s=o.findNextOnigScannerMatch(this._ptr,e.id,e.ptr,e.utf8Length,e.convertUtf16OffsetToUtf8(n),r);if(s===0)return null;const a=o.HEAPU32;let l=s/4;const c=a[l++],d=a[l++],u=[];for(let h=0;h<d;h++){const f=e.convertUtf8OffsetToUtf16(a[l++]),p=e.convertUtf8OffsetToUtf16(a[l++]);u[h]={start:f,end:p,length:p-f}}return{index:c,captureIndices:u}}}function oE(t){return typeof t.instantiator=="function"}function sE(t){return typeof t.default=="function"}function aE(t){return typeof t.data<"u"}function lE(t){return typeof Response<"u"&&t instanceof Response}function cE(t){return typeof ArrayBuffer<"u"&&(t instanceof ArrayBuffer||ArrayBuffer.isView(t))||typeof Buffer<"u"&&Buffer.isBuffer?.(t)||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer||typeof Uint32Array<"u"&&t instanceof Uint32Array}let Ko;function dE(t){if(Ko)return Ko;async function e(){ct=await eE(async n=>{let i=t;return i=await i,typeof i=="function"&&(i=await i(n)),typeof i=="function"&&(i=await i(n)),oE(i)?i=await i.instantiator(n):sE(i)?i=await i.default(n):(aE(i)&&(i=i.data),lE(i)?typeof WebAssembly.instantiateStreaming=="function"?i=await uE(i)(n):i=await hE(i)(n):cE(i)?i=await hl(i)(n):i instanceof WebAssembly.Module?i=await hl(i)(n):"default"in i&&i.default instanceof WebAssembly.Module&&(i=await hl(i.default)(n))),"instance"in i&&(i=i.instance),"exports"in i&&(i=i.exports),i})}return Ko=e(),Ko}function hl(t){return e=>WebAssembly.instantiate(t,e)}function uE(t){return e=>WebAssembly.instantiateStreaming(t,e)}function hE(t){return async e=>{const n=await t.arrayBuffer();return WebAssembly.instantiate(n,e)}}async function fE(t){return t&&await dE(t),{createScanner(e){return new rE(e.map(n=>typeof n=="string"?n:n.source))},createString(e){return new Em(e)}}}const gE=Hk({langs:Kk,themes:Zk,engine:()=>fE(T(()=>import("./wasm-CG6Dc4jp.js"),[]))});let Xo=null,fl=null;function pE(){const t=oe(!1);async function e(){return Xo?(t.value=!0,Xo):(fl||(fl=gE({themes:["github-dark","github-light"],langs:["javascript","typescript","python","bash","json","css","html"]})),Xo=await fl,t.value=!0,Xo)}async function n(i,r="javascript",o="github-dark"){return(await e()).codeToHtml(i,{lang:r,theme:o})}return Jt(()=>{e()}),{isReady:t,highlight:n,initHighlighter:e}}const mE={class:"code-block-wrapper"},yE={key:0,class:"bg-gray-900 dark:bg-gray-950 rounded-lg p-4"},vE=["innerHTML"],bE={__name:"CodeBlock",props:{code:{type:String,required:!0},language:{type:String,default:"javascript"},customClass:{type:String,default:""}},setup(t){const e=t,{highlight:n}=pE(),{darkMode:i}=Gp(),r=oe(""),o=oe(!0),s=Je(()=>i.value?"github-dark":"github-light");async function a(){o.value=!0;try{r.value=await n(e.code,e.language,s.value)}catch(l){console.error("Failed to highlight code:",l),r.value=`<pre class="bg-gray-900 rounded-lg p-4"><code>${e.code}</code></pre>`}finally{o.value=!1}}return dt([()=>e.code,()=>e.language,s],a),Jt(a),(l,c)=>(H(),K("div",mE,[o.value?(H(),K("div",yE,[...c[0]||(c[0]=[g("div",{class:"animate-pulse"},[g("div",{class:"h-4 bg-gray-700 rounded w-3/4 mb-2"}),g("div",{class:"h-4 bg-gray-700 rounded w-1/2"})],-1)])])):(H(),K("div",{key:1,innerHTML:r.value,class:Xe(["code-block rounded-lg overflow-x-auto",t.customClass])},null,10,vE))]))}},yt=Cn(bE,[["__scopeId","data-v-fdf7ed14"]]),_E={class:"relative"},wE={class:"hero-section"},xE={class:"hero-container"},kE={class:"hero-title"},EE={class:"hero-subtitle"},AE={class:"hero-description"},CE={class:"hero-cta"},SE={href:"https://github.com/guinetik/graph-js",target:"_blank",class:"btn-secondary"},TE={class:"features-section"},NE={class:"features-grid"},RE={class:"feature-icon"},LE={class:"feature-title"},IE={class:"feature-description"},PE={class:"code-example-section"},DE={class:"code-example-container"},ME={class:"code-example-card"},OE={class:"code-example-header"},GE={class:"code-example-title"},FE=`npm install @guinetik/graph-js

import NetworkStats from '@guinetik/graph-js';

const network = [
  { source: 'Alice', target: 'Bob', weight: 1 },
  { source: 'Bob', target: 'Carol', weight: 2 },
  { source: 'Carol', target: 'Alice', weight: 1 }
];

const analyzer = new NetworkStats({ verbose: true });
const results = await analyzer.analyze(network, ['degree', 'eigenvector']);

console.log(results);
// Analysis runs in workers for optimal performance!`,$E={__name:"HomePage",setup(t){const{t:e}=fn();return(n,i)=>{const r=Hl("router-link");return H(),K("div",_E,[g("div",wE,[g("div",xE,[g("h1",kE,b(y(e)("home.hero.title")),1),g("p",EE,b(y(e)("home.hero.subtitle")),1),g("p",AE,b(y(e)("home.hero.description")),1),g("div",CE,[we(r,{to:"/showcase",class:"btn-primary"},{default:Ue(()=>[Ce("  "+b(y(e)("home.hero.cta")),1)]),_:1}),g("a",SE,"  "+b(y(e)("home.hero.github")),1)])])]),g("div",TE,[g("div",NE,[(H(!0),K(qe,null,ln(y(e)("home.features"),(o,s)=>(H(),K("div",{key:s,class:"feature-card"},[g("div",RE,b(o.icon),1),g("h3",LE,b(o.title),1),g("p",IE,b(o.description),1)]))),128))])]),g("div",PE,[g("div",DE,[g("div",ME,[g("div",OE,[g("span",GE,b(y(e)("home.code.title")),1),i[0]||(i[0]=g("div",{class:"code-example-dots"},[g("div",{class:"code-dot-red"}),g("div",{class:"code-dot-yellow"}),g("div",{class:"code-dot-green"})],-1))]),we(yt,{code:FE,language:"javascript"})])])])])}}},zE={class:"demo-layout"},BE={class:"demo-controls-content"},VE={class:"demo-graph"},UE=["aria-label"],jE={key:0,class:"text-2xl"},HE={key:1,class:"text-2xl"},ka={__name:"DemoLayout",setup(t,{expose:e}){const n=oe(!1),i=()=>{n.value=!n.value};return e({toggleControls:i,controlsVisible:n}),(r,o)=>(H(),K("div",zE,[g("aside",{class:Xe(["demo-controls",n.value?"mobile-visible":"mobile-hidden"])},[g("div",BE,[Wl(r.$slots,"controls")])],2),g("main",VE,[Wl(r.$slots,"graph")]),g("button",{onClick:i,class:"demo-controls-toggle lg:hidden","aria-label":n.value?"Close controls":"Open controls"},[n.value?(H(),K("span",HE,"")):(H(),K("span",jE,""))],8,UE)]))}},WE={class:"layout-picker"},qE={class:"space-y-2"},KE={class:"block text-sm font-medium text-secondary"},XE=["disabled"],ZE={key:0},YE={key:1},JE={key:0,class:"info-box-yellow mt-3"},QE={class:"text-xs text-yellow-800 dark:text-yellow-200"},eA={__name:"LayoutPicker",props:{modelValue:{type:String,required:!0},availableLayouts:{type:Array,required:!0},loading:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},emits:["update:modelValue","apply"],setup(t,{emit:e}){const{t:n}=fn(),i=t,r=Je(()=>i.availableLayouts.find(o=>o.id===i.modelValue));return(o,s)=>(H(),K("div",WE,[g("div",qE,[g("label",KE,b(y(n)("showcase.layoutPicker.chooseLayout")),1),we(Fi,{"model-value":t.modelValue,"onUpdate:modelValue":s[0]||(s[0]=a=>o.$emit("update:modelValue",a)),options:t.availableLayouts.map(a=>({value:a.id,label:a.name})),disabled:t.disabled,placeholder:y(n)("showcase.layoutPicker.chooseLayout")},null,8,["model-value","options","disabled","placeholder"])]),g("button",{onClick:s[1]||(s[1]=a=>o.$emit("apply")),disabled:t.disabled||t.loading,class:"w-full bg-purple-600 hover:bg-purple-700 disabled:bg-gray-400 text-white px-4 py-3 rounded-md font-semibold transition-colors mt-3"},[t.loading?(H(),K("span",YE,b(y(n)("showcase.layoutPicker.applyingButton")),1)):(H(),K("span",ZE,b(y(n)("showcase.layoutPicker.applyButton")),1))],8,XE),t.modelValue!=="none"&&r.value?(H(),K("div",JE,[g("p",QE,[g("strong",null,b(r.value.name)+":",1),Ce(" "+b(r.value.description),1)])])):Me("",!0)]))}},Ea=Cn(eA,[["__scopeId","data-v-90a2a591"]]),tA={class:"community-picker"},nA={class:"space-y-2"},iA={class:"block text-sm font-medium text-secondary"},rA=["disabled"],oA={key:0},sA={key:1},aA={__name:"CommunityPicker",props:{modelValue:{type:String,required:!0},availableAlgorithms:{type:Array,required:!0},detecting:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},label:{type:String,default:""}},emits:["update:modelValue","detect"],setup(t,{emit:e}){const{t:n}=fn();return(i,r)=>(H(),K("div",tA,[g("div",nA,[g("label",iA,b(t.label||y(n)("showcase.communityPicker.chooseAlgorithm")),1),we(Fi,{"model-value":t.modelValue,"onUpdate:modelValue":r[0]||(r[0]=o=>i.$emit("update:modelValue",o)),options:t.availableAlgorithms.map(o=>({value:o.id,label:o.name})),disabled:t.disabled,placeholder:t.label||y(n)("showcase.communityPicker.chooseAlgorithm")},null,8,["model-value","options","disabled","placeholder"])]),g("button",{onClick:r[1]||(r[1]=o=>i.$emit("detect")),disabled:t.disabled||t.detecting,class:"w-full bg-orange-600 hover:bg-orange-700 disabled:bg-gray-400 text-white px-4 py-3 rounded-md font-semibold transition-colors mt-3"},[t.detecting?(H(),K("span",sA,b(y(n)("showcase.communityPicker.detectingButton")),1)):(H(),K("span",oA,b(y(n)("showcase.communityPicker.detectButton")),1))],8,rA),Wl(i.$slots,"results",{},void 0,!0)]))}},Am=Cn(aA,[["__scopeId","data-v-cf313cf9"]]),lA={class:"network-analysis"},cA={class:"bg-[var(--color-bg-secondary)] rounded-md p-4 space-y-2 mb-3"},dA={class:"flex items-center justify-between mb-2"},uA={class:"text-sm font-semibold text-primary"},hA={class:"space-y-2"},fA=["checked"],gA={class:"text-secondary"},pA=["checked"],mA={class:"text-secondary"},yA=["checked"],vA={class:"text-secondary"},bA=["checked"],_A={class:"text-secondary"},wA=["checked"],xA={class:"text-secondary"},kA=["checked"],EA={class:"text-secondary"},AA=["checked"],CA={class:"text-secondary"},SA=["checked"],TA={class:"text-secondary"},NA=["checked"],RA={class:"text-secondary"},LA={class:"space-y-2 mb-3"},IA={class:"block text-sm font-medium text-secondary"},PA=["disabled"],DA={key:0},MA={key:1},OA={key:0,class:"mt-3 pt-3 border-t border-[var(--color-border)]"},GA={class:"flex items-center gap-2 text-sm cursor-pointer"},FA=["checked"],$A={class:"text-secondary"},zA={class:"text-xs text-secondary mt-1 ml-6"},BA={key:1,class:"mt-2"},VA={class:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2"},UA={class:"text-xs text-secondary mt-1 text-center"},jA={__name:"NetworkAnalysis",props:{selectedMetrics:{type:Array,required:!0},sizeMetric:{type:String,default:""},analyzing:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},progress:{type:Number,default:0},showSpectralMetric:{type:Boolean,default:!1},hasCliques:{type:Boolean,default:!1},showCliqueEdges:{type:Boolean,default:!1}},emits:["update:selectedMetrics","update:sizeMetric","update:showCliqueEdges","analyze"],setup(t,{emit:e}){const{t:n}=fn(),{showTooltipAt:i,hideTooltip:r}=Fp(),o=t,s=e,a=Je(()=>{const h=["degree","betweenness","clustering","eigenvector","pagerank","cliques","closeness","ego-density"];return o.showSpectralMetric&&h.push("eigenvector-laplacian"),h}),l=Je(()=>a.value.every(h=>o.selectedMetrics.includes(h))),c=()=>{l.value?s("update:selectedMetrics",[]):s("update:selectedMetrics",[...a.value])},d=Je(()=>{const h=[],f={degree:n("showcase.networkAnalysis.degreeName"),betweenness:n("showcase.networkAnalysis.betweennessName"),clustering:n("showcase.networkAnalysis.clusteringName"),eigenvector:n("showcase.networkAnalysis.eigenvectorName"),pagerank:n("showcase.networkAnalysis.pageRankName"),cliques:n("showcase.networkAnalysis.cliquesName"),closeness:n("showcase.networkAnalysis.closenessName"),"ego-density":n("showcase.networkAnalysis.egoDensityName")};return Object.keys(f).forEach(p=>{o.selectedMetrics.includes(p)&&h.push({value:p,label:f[p]})}),h}),u=(h,f)=>{let p=[...o.selectedMetrics];f?p.includes(h)||p.push(h):p=p.filter(m=>m!==h),s("update:selectedMetrics",p)};return(h,f)=>(H(),K("div",lA,[g("div",cA,[g("div",dA,[g("h3",uA,b(y(n)("showcase.networkAnalysis.metricsTitle")),1),g("button",{onClick:c,class:"text-xs text-purple-600 dark:text-purple-400 hover:text-purple-700 dark:hover:text-purple-300 font-medium transition-colors"},b(l.value?y(n)("showcase.networkAnalysis.unselectAll"):y(n)("showcase.networkAnalysis.selectAll")),1)]),g("div",hA,[g("label",{class:"metric-checkbox-label",onMouseenter:f[1]||(f[1]=p=>y(i)(p,y(n)("showcase.networkAnalysis.degreeDescription"))),onMouseleave:f[2]||(f[2]=(...p)=>y(r)&&y(r)(...p))},[g("input",{type:"checkbox",checked:t.selectedMetrics.includes("degree"),onChange:f[0]||(f[0]=p=>u("degree",p.target.checked)),class:"metric-checkbox"},null,40,fA),f[30]||(f[30]=g("span",{class:"metric-checkbox-custom"},null,-1)),g("span",gA,b(y(n)("showcase.networkAnalysis.degreeCentrality")),1)],32),g("label",{class:"metric-checkbox-label tooltip-container",onMouseenter:f[4]||(f[4]=p=>y(i)(p,y(n)("showcase.networkAnalysis.betweennessDescription"))),onMouseleave:f[5]||(f[5]=(...p)=>y(r)&&y(r)(...p))},[g("input",{type:"checkbox",checked:t.selectedMetrics.includes("betweenness"),onChange:f[3]||(f[3]=p=>u("betweenness",p.target.checked)),class:"metric-checkbox"},null,40,pA),f[31]||(f[31]=g("span",{class:"metric-checkbox-custom"},null,-1)),g("span",mA,b(y(n)("showcase.networkAnalysis.betweennessCentrality")),1)],32),g("label",{class:"metric-checkbox-label",onMouseenter:f[7]||(f[7]=p=>y(i)(p,y(n)("showcase.networkAnalysis.clusteringDescription"))),onMouseleave:f[8]||(f[8]=(...p)=>y(r)&&y(r)(...p))},[g("input",{type:"checkbox",checked:t.selectedMetrics.includes("clustering"),onChange:f[6]||(f[6]=p=>u("clustering",p.target.checked)),class:"metric-checkbox"},null,40,yA),f[32]||(f[32]=g("span",{class:"metric-checkbox-custom"},null,-1)),g("span",vA,b(y(n)("showcase.networkAnalysis.clusteringCoefficient")),1)],32),g("label",{class:"metric-checkbox-label",onMouseenter:f[10]||(f[10]=p=>y(i)(p,y(n)("showcase.networkAnalysis.eigenvectorDescription"))),onMouseleave:f[11]||(f[11]=(...p)=>y(r)&&y(r)(...p))},[g("input",{type:"checkbox",checked:t.selectedMetrics.includes("eigenvector"),onChange:f[9]||(f[9]=p=>u("eigenvector",p.target.checked)),class:"metric-checkbox"},null,40,bA),f[33]||(f[33]=g("span",{class:"metric-checkbox-custom"},null,-1)),g("span",_A,b(y(n)("showcase.networkAnalysis.eigenvectorCentrality")),1)],32),g("label",{class:"metric-checkbox-label",onMouseenter:f[13]||(f[13]=p=>y(i)(p,y(n)("showcase.networkAnalysis.pagerankDescription"))),onMouseleave:f[14]||(f[14]=(...p)=>y(r)&&y(r)(...p))},[g("input",{type:"checkbox",checked:t.selectedMetrics.includes("pagerank"),onChange:f[12]||(f[12]=p=>u("pagerank",p.target.checked)),class:"metric-checkbox"},null,40,wA),f[34]||(f[34]=g("span",{class:"metric-checkbox-custom"},null,-1)),g("span",xA,b(y(n)("showcase.networkAnalysis.pageRankCentrality")),1)],32),g("label",{class:"metric-checkbox-label",onMouseenter:f[16]||(f[16]=p=>y(i)(p,y(n)("showcase.networkAnalysis.cliquesDescription"))),onMouseleave:f[17]||(f[17]=(...p)=>y(r)&&y(r)(...p))},[g("input",{type:"checkbox",checked:t.selectedMetrics.includes("cliques"),onChange:f[15]||(f[15]=p=>u("cliques",p.target.checked)),class:"metric-checkbox"},null,40,kA),f[35]||(f[35]=g("span",{class:"metric-checkbox-custom"},null,-1)),g("span",EA,b(y(n)("showcase.networkAnalysis.cliqueCount")),1)],32),g("label",{class:"metric-checkbox-label",onMouseenter:f[19]||(f[19]=p=>y(i)(p,y(n)("showcase.networkAnalysis.closenessDescription"))),onMouseleave:f[20]||(f[20]=(...p)=>y(r)&&y(r)(...p))},[g("input",{type:"checkbox",checked:t.selectedMetrics.includes("closeness"),onChange:f[18]||(f[18]=p=>u("closeness",p.target.checked)),class:"metric-checkbox"},null,40,AA),f[36]||(f[36]=g("span",{class:"metric-checkbox-custom"},null,-1)),g("span",CA,b(y(n)("showcase.networkAnalysis.closenessCentrality")),1)],32),g("label",{class:"metric-checkbox-label",onMouseenter:f[22]||(f[22]=p=>y(i)(p,y(n)("showcase.networkAnalysis.egoDensityDescription"))),onMouseleave:f[23]||(f[23]=(...p)=>y(r)&&y(r)(...p))},[g("input",{type:"checkbox",checked:t.selectedMetrics.includes("ego-density"),onChange:f[21]||(f[21]=p=>u("ego-density",p.target.checked)),class:"metric-checkbox"},null,40,SA),f[37]||(f[37]=g("span",{class:"metric-checkbox-custom"},null,-1)),g("span",TA,b(y(n)("showcase.networkAnalysis.egoDensity")),1)],32),t.showSpectralMetric?(H(),K("label",{key:0,class:"metric-checkbox-label",onMouseenter:f[25]||(f[25]=p=>y(i)(p,y(n)("showcase.networkAnalysis.eigenvectorLaplacianDescription"))),onMouseleave:f[26]||(f[26]=(...p)=>y(r)&&y(r)(...p))},[g("input",{type:"checkbox",checked:t.selectedMetrics.includes("eigenvector-laplacian"),onChange:f[24]||(f[24]=p=>u("eigenvector-laplacian",p.target.checked)),class:"metric-checkbox"},null,40,NA),f[38]||(f[38]=g("span",{class:"metric-checkbox-custom"},null,-1)),g("span",RA,b(y(n)("showcase.networkAnalysis.eigenvectorLaplacian")),1)],32)):Me("",!0)])]),g("div",LA,[g("label",IA,b(y(n)("showcase.networkAnalysis.nodeSizeLabel")),1),we(Fi,{"model-value":t.sizeMetric,"onUpdate:modelValue":f[27]||(f[27]=p=>h.$emit("update:sizeMetric",p)),options:d.value,disabled:t.disabled||t.selectedMetrics.length===0,placeholder:y(n)("showcase.networkAnalysis.selectMetric")},null,8,["model-value","options","disabled","placeholder"])]),g("button",{onClick:f[28]||(f[28]=p=>h.$emit("analyze")),disabled:t.disabled||t.analyzing||t.selectedMetrics.length===0,class:"w-full bg-purple-600 hover:bg-purple-700 disabled:bg-gray-400 text-white px-4 py-3 rounded-md font-semibold transition-colors"},[t.analyzing?(H(),K("span",MA,b(y(n)("showcase.networkAnalysis.analyzingButton")),1)):(H(),K("span",DA,b(y(n)("showcase.networkAnalysis.analyzeButton")),1))],8,PA),t.hasCliques?(H(),K("div",OA,[g("label",GA,[g("input",{type:"checkbox",checked:t.showCliqueEdges,onChange:f[29]||(f[29]=p=>h.$emit("update:showCliqueEdges",p.target.checked)),class:"rounded"},null,40,FA),g("span",$A,b(y(n)("showcase.networkAnalysis.highlightCliqueEdges")),1)]),g("p",zA,b(y(n)("showcase.networkAnalysis.cliqueEdgesDescription")),1)])):Me("",!0),t.analyzing&&t.progress>0?(H(),K("div",BA,[g("div",VA,[g("div",{class:"bg-purple-600 h-2 rounded-full transition-all duration-300",style:No({width:`${t.progress*100}%`})},null,4)]),g("p",UA,b(Math.round(t.progress*100))+"% ",1)])):Me("",!0)]))}},Aa=Cn(jA,[["__scopeId","data-v-439c0ceb"]]);function vs(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function HA(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Cm(t){let e,n,i;t.length!==2?(e=vs,n=(a,l)=>vs(t(a),l),i=(a,l)=>t(a)-l):(e=t===vs||t===HA?t:WA,n=t,i=t);function r(a,l,c=0,d=a.length){if(c<d){if(e(l,l)!==0)return d;do{const u=c+d>>>1;n(a[u],l)<0?c=u+1:d=u}while(c<d)}return c}function o(a,l,c=0,d=a.length){if(c<d){if(e(l,l)!==0)return d;do{const u=c+d>>>1;n(a[u],l)<=0?c=u+1:d=u}while(c<d)}return c}function s(a,l,c=0,d=a.length){const u=r(a,l,c,d-1);return u>c&&i(a[u-1],l)>-i(a[u],l)?u-1:u}return{left:r,center:s,right:o}}function WA(){return 0}function qA(t){return t===null?NaN:+t}const KA=Cm(vs),XA=KA.right;Cm(qA).center;class Rh extends Map{constructor(e,n=JA){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[i,r]of e)this.set(i,r)}get(e){return super.get(Lh(this,e))}has(e){return super.has(Lh(this,e))}set(e,n){return super.set(ZA(this,e),n)}delete(e){return super.delete(YA(this,e))}}function Lh({_intern:t,_key:e},n){const i=e(n);return t.has(i)?t.get(i):n}function ZA({_intern:t,_key:e},n){const i=e(n);return t.has(i)?t.get(i):(t.set(i,n),n)}function YA({_intern:t,_key:e},n){const i=e(n);return t.has(i)&&(n=t.get(i),t.delete(i)),n}function JA(t){return t!==null&&typeof t=="object"?t.valueOf():t}const QA=Math.sqrt(50),eC=Math.sqrt(10),tC=Math.sqrt(2);function Hs(t,e,n){const i=(e-t)/Math.max(0,n),r=Math.floor(Math.log10(i)),o=i/Math.pow(10,r),s=o>=QA?10:o>=eC?5:o>=tC?2:1;let a,l,c;return r<0?(c=Math.pow(10,-r)/s,a=Math.round(t*c),l=Math.round(e*c),a/c<t&&++a,l/c>e&&--l,c=-c):(c=Math.pow(10,r)*s,a=Math.round(t/c),l=Math.round(e/c),a*c<t&&++a,l*c>e&&--l),l<a&&.5<=n&&n<2?Hs(t,e,n*2):[a,l,c]}function nC(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const i=e<t,[r,o,s]=i?Hs(e,t,n):Hs(t,e,n);if(!(o>=r))return[];const a=o-r+1,l=new Array(a);if(i)if(s<0)for(let c=0;c<a;++c)l[c]=(o-c)/-s;else for(let c=0;c<a;++c)l[c]=(o-c)*s;else if(s<0)for(let c=0;c<a;++c)l[c]=(r+c)/-s;else for(let c=0;c<a;++c)l[c]=(r+c)*s;return l}function vc(t,e,n){return e=+e,t=+t,n=+n,Hs(t,e,n)[2]}function iC(t,e,n){e=+e,t=+t,n=+n;const i=e<t,r=i?vc(e,t,n):vc(t,e,n);return(i?-1:1)*(r<0?1/-r:r)}var rC={value:()=>{}};function Mo(){for(var t=0,e=arguments.length,n={},i;t<e;++t){if(!(i=arguments[t]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new bs(n)}function bs(t){this._=t}function oC(t,e){return t.trim().split(/^|\s+/).map(function(n){var i="",r=n.indexOf(".");if(r>=0&&(i=n.slice(r+1),n=n.slice(0,r)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}bs.prototype=Mo.prototype={constructor:bs,on:function(t,e){var n=this._,i=oC(t+"",n),r,o=-1,s=i.length;if(arguments.length<2){for(;++o<s;)if((r=(t=i[o]).type)&&(r=sC(n[r],t.name)))return r;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++o<s;)if(r=(t=i[o]).type)n[r]=Ih(n[r],t.name,e);else if(e==null)for(r in n)n[r]=Ih(n[r],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new bs(t)},call:function(t,e){if((r=arguments.length-2)>0)for(var n=new Array(r),i=0,r,o;i<r;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=this._[t],i=0,r=o.length;i<r;++i)o[i].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],r=0,o=i.length;r<o;++r)i[r].value.apply(e,n)}};function sC(t,e){for(var n=0,i=t.length,r;n<i;++n)if((r=t[n]).name===e)return r.value}function Ih(t,e,n){for(var i=0,r=t.length;i<r;++i)if(t[i].name===e){t[i]=rC,t=t.slice(0,i).concat(t.slice(i+1));break}return n!=null&&t.push({name:e,value:n}),t}var bc="http://www.w3.org/1999/xhtml";const Ph={svg:"http://www.w3.org/2000/svg",xhtml:bc,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ca(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),Ph.hasOwnProperty(e)?{space:Ph[e],local:t}:t}function aC(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===bc&&e.documentElement.namespaceURI===bc?e.createElement(t):e.createElementNS(n,t)}}function lC(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Sm(t){var e=Ca(t);return(e.local?lC:aC)(e)}function cC(){}function Nd(t){return t==null?cC:function(){return this.querySelector(t)}}function dC(t){typeof t!="function"&&(t=Nd(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var o=e[r],s=o.length,a=i[r]=new Array(s),l,c,d=0;d<s;++d)(l=o[d])&&(c=t.call(l,l.__data__,d,o))&&("__data__"in l&&(c.__data__=l.__data__),a[d]=c);return new Vt(i,this._parents)}function uC(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function hC(){return[]}function Tm(t){return t==null?hC:function(){return this.querySelectorAll(t)}}function fC(t){return function(){return uC(t.apply(this,arguments))}}function gC(t){typeof t=="function"?t=fC(t):t=Tm(t);for(var e=this._groups,n=e.length,i=[],r=[],o=0;o<n;++o)for(var s=e[o],a=s.length,l,c=0;c<a;++c)(l=s[c])&&(i.push(t.call(l,l.__data__,c,s)),r.push(l));return new Vt(i,r)}function Nm(t){return function(){return this.matches(t)}}function Rm(t){return function(e){return e.matches(t)}}var pC=Array.prototype.find;function mC(t){return function(){return pC.call(this.children,t)}}function yC(){return this.firstElementChild}function vC(t){return this.select(t==null?yC:mC(typeof t=="function"?t:Rm(t)))}var bC=Array.prototype.filter;function _C(){return Array.from(this.children)}function wC(t){return function(){return bC.call(this.children,t)}}function xC(t){return this.selectAll(t==null?_C:wC(typeof t=="function"?t:Rm(t)))}function kC(t){typeof t!="function"&&(t=Nm(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var o=e[r],s=o.length,a=i[r]=[],l,c=0;c<s;++c)(l=o[c])&&t.call(l,l.__data__,c,o)&&a.push(l);return new Vt(i,this._parents)}function Lm(t){return new Array(t.length)}function EC(){return new Vt(this._enter||this._groups.map(Lm),this._parents)}function Ws(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}Ws.prototype={constructor:Ws,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function AC(t){return function(){return t}}function CC(t,e,n,i,r,o){for(var s=0,a,l=e.length,c=o.length;s<c;++s)(a=e[s])?(a.__data__=o[s],i[s]=a):n[s]=new Ws(t,o[s]);for(;s<l;++s)(a=e[s])&&(r[s]=a)}function SC(t,e,n,i,r,o,s){var a,l,c=new Map,d=e.length,u=o.length,h=new Array(d),f;for(a=0;a<d;++a)(l=e[a])&&(h[a]=f=s.call(l,l.__data__,a,e)+"",c.has(f)?r[a]=l:c.set(f,l));for(a=0;a<u;++a)f=s.call(t,o[a],a,o)+"",(l=c.get(f))?(i[a]=l,l.__data__=o[a],c.delete(f)):n[a]=new Ws(t,o[a]);for(a=0;a<d;++a)(l=e[a])&&c.get(h[a])===l&&(r[a]=l)}function TC(t){return t.__data__}function NC(t,e){if(!arguments.length)return Array.from(this,TC);var n=e?SC:CC,i=this._parents,r=this._groups;typeof t!="function"&&(t=AC(t));for(var o=r.length,s=new Array(o),a=new Array(o),l=new Array(o),c=0;c<o;++c){var d=i[c],u=r[c],h=u.length,f=RC(t.call(d,d&&d.__data__,c,i)),p=f.length,m=a[c]=new Array(p),w=s[c]=new Array(p),_=l[c]=new Array(h);n(d,u,m,w,_,f,e);for(var x=0,k=0,v,C;x<p;++x)if(v=m[x]){for(x>=k&&(k=x+1);!(C=w[k])&&++k<p;);v._next=C||null}}return s=new Vt(s,i),s._enter=a,s._exit=l,s}function RC(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function LC(){return new Vt(this._exit||this._groups.map(Lm),this._parents)}function IC(t,e,n){var i=this.enter(),r=this,o=this.exit();return typeof t=="function"?(i=t(i),i&&(i=i.selection())):i=i.append(t+""),e!=null&&(r=e(r),r&&(r=r.selection())),n==null?o.remove():n(o),i&&r?i.merge(r).order():r}function PC(t){for(var e=t.selection?t.selection():t,n=this._groups,i=e._groups,r=n.length,o=i.length,s=Math.min(r,o),a=new Array(r),l=0;l<s;++l)for(var c=n[l],d=i[l],u=c.length,h=a[l]=new Array(u),f,p=0;p<u;++p)(f=c[p]||d[p])&&(h[p]=f);for(;l<r;++l)a[l]=n[l];return new Vt(a,this._parents)}function DC(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var i=t[e],r=i.length-1,o=i[r],s;--r>=0;)(s=i[r])&&(o&&s.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(s,o),o=s);return this}function MC(t){t||(t=OC);function e(u,h){return u&&h?t(u.__data__,h.__data__):!u-!h}for(var n=this._groups,i=n.length,r=new Array(i),o=0;o<i;++o){for(var s=n[o],a=s.length,l=r[o]=new Array(a),c,d=0;d<a;++d)(c=s[d])&&(l[d]=c);l.sort(e)}return new Vt(r,this._parents).order()}function OC(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function GC(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function FC(){return Array.from(this)}function $C(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],r=0,o=i.length;r<o;++r){var s=i[r];if(s)return s}return null}function zC(){let t=0;for(const e of this)++t;return t}function BC(){return!this.node()}function VC(t){for(var e=this._groups,n=0,i=e.length;n<i;++n)for(var r=e[n],o=0,s=r.length,a;o<s;++o)(a=r[o])&&t.call(a,a.__data__,o,r);return this}function UC(t){return function(){this.removeAttribute(t)}}function jC(t){return function(){this.removeAttributeNS(t.space,t.local)}}function HC(t,e){return function(){this.setAttribute(t,e)}}function WC(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function qC(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function KC(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function XC(t,e){var n=Ca(t);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((e==null?n.local?jC:UC:typeof e=="function"?n.local?KC:qC:n.local?WC:HC)(n,e))}function Im(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function ZC(t){return function(){this.style.removeProperty(t)}}function YC(t,e,n){return function(){this.style.setProperty(t,e,n)}}function JC(t,e,n){return function(){var i=e.apply(this,arguments);i==null?this.style.removeProperty(t):this.style.setProperty(t,i,n)}}function QC(t,e,n){return arguments.length>1?this.each((e==null?ZC:typeof e=="function"?JC:YC)(t,e,n??"")):wr(this.node(),t)}function wr(t,e){return t.style.getPropertyValue(e)||Im(t).getComputedStyle(t,null).getPropertyValue(e)}function eS(t){return function(){delete this[t]}}function tS(t,e){return function(){this[t]=e}}function nS(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function iS(t,e){return arguments.length>1?this.each((e==null?eS:typeof e=="function"?nS:tS)(t,e)):this.node()[t]}function Pm(t){return t.trim().split(/^|\s+/)}function Rd(t){return t.classList||new Dm(t)}function Dm(t){this._node=t,this._names=Pm(t.getAttribute("class")||"")}Dm.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Mm(t,e){for(var n=Rd(t),i=-1,r=e.length;++i<r;)n.add(e[i])}function Om(t,e){for(var n=Rd(t),i=-1,r=e.length;++i<r;)n.remove(e[i])}function rS(t){return function(){Mm(this,t)}}function oS(t){return function(){Om(this,t)}}function sS(t,e){return function(){(e.apply(this,arguments)?Mm:Om)(this,t)}}function aS(t,e){var n=Pm(t+"");if(arguments.length<2){for(var i=Rd(this.node()),r=-1,o=n.length;++r<o;)if(!i.contains(n[r]))return!1;return!0}return this.each((typeof e=="function"?sS:e?rS:oS)(n,e))}function lS(){this.textContent=""}function cS(t){return function(){this.textContent=t}}function dS(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function uS(t){return arguments.length?this.each(t==null?lS:(typeof t=="function"?dS:cS)(t)):this.node().textContent}function hS(){this.innerHTML=""}function fS(t){return function(){this.innerHTML=t}}function gS(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function pS(t){return arguments.length?this.each(t==null?hS:(typeof t=="function"?gS:fS)(t)):this.node().innerHTML}function mS(){this.nextSibling&&this.parentNode.appendChild(this)}function yS(){return this.each(mS)}function vS(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function bS(){return this.each(vS)}function _S(t){var e=typeof t=="function"?t:Sm(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function wS(){return null}function xS(t,e){var n=typeof t=="function"?t:Sm(t),i=e==null?wS:typeof e=="function"?e:Nd(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})}function kS(){var t=this.parentNode;t&&t.removeChild(this)}function ES(){return this.each(kS)}function AS(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function CS(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function SS(t){return this.select(t?CS:AS)}function TS(t){return arguments.length?this.property("__data__",t):this.node().__data__}function NS(t){return function(e){t.call(this,e,this.__data__)}}function RS(t){return t.trim().split(/^|\s+/).map(function(e){var n="",i=e.indexOf(".");return i>=0&&(n=e.slice(i+1),e=e.slice(0,i)),{type:e,name:n}})}function LS(t){return function(){var e=this.__on;if(e){for(var n=0,i=-1,r=e.length,o;n<r;++n)o=e[n],(!t.type||o.type===t.type)&&o.name===t.name?this.removeEventListener(o.type,o.listener,o.options):e[++i]=o;++i?e.length=i:delete this.__on}}}function IS(t,e,n){return function(){var i=this.__on,r,o=NS(e);if(i){for(var s=0,a=i.length;s<a;++s)if((r=i[s]).type===t.type&&r.name===t.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=o,r.options=n),r.value=e;return}}this.addEventListener(t.type,o,n),r={type:t.type,name:t.name,value:e,listener:o,options:n},i?i.push(r):this.__on=[r]}}function PS(t,e,n){var i=RS(t+""),r,o=i.length,s;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,c=a.length,d;l<c;++l)for(r=0,d=a[l];r<o;++r)if((s=i[r]).type===d.type&&s.name===d.name)return d.value}return}for(a=e?IS:LS,r=0;r<o;++r)this.each(a(i[r],e,n));return this}function Gm(t,e,n){var i=Im(t),r=i.CustomEvent;typeof r=="function"?r=new r(e,n):(r=i.document.createEvent("Event"),n?(r.initEvent(e,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(e,!1,!1)),t.dispatchEvent(r)}function DS(t,e){return function(){return Gm(this,t,e)}}function MS(t,e){return function(){return Gm(this,t,e.apply(this,arguments))}}function OS(t,e){return this.each((typeof e=="function"?MS:DS)(t,e))}function*GS(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],r=0,o=i.length,s;r<o;++r)(s=i[r])&&(yield s)}var Fm=[null];function Vt(t,e){this._groups=t,this._parents=e}function Oo(){return new Vt([[document.documentElement]],Fm)}function FS(){return this}Vt.prototype=Oo.prototype={constructor:Vt,select:dC,selectAll:gC,selectChild:vC,selectChildren:xC,filter:kC,data:NC,enter:EC,exit:LC,join:IC,merge:PC,selection:FS,order:DC,sort:MC,call:GC,nodes:FC,node:$C,size:zC,empty:BC,each:VC,attr:XC,style:QC,property:iS,classed:aS,text:uS,html:pS,raise:yS,lower:bS,append:_S,insert:xS,remove:ES,clone:SS,datum:TS,on:PS,dispatch:OS,[Symbol.iterator]:GS};function Mt(t){return typeof t=="string"?new Vt([[document.querySelector(t)]],[document.documentElement]):new Vt([[t]],Fm)}function $S(t){let e;for(;e=t.sourceEvent;)t=e;return t}function On(t,e){if(t=$S(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=t.clientX,i.y=t.clientY,i=i.matrixTransform(e.getScreenCTM().inverse()),[i.x,i.y]}if(e.getBoundingClientRect){var r=e.getBoundingClientRect();return[t.clientX-r.left-e.clientLeft,t.clientY-r.top-e.clientTop]}}return[t.pageX,t.pageY]}const zS={passive:!1},xo={capture:!0,passive:!1};function gl(t){t.stopImmediatePropagation()}function ur(t){t.preventDefault(),t.stopImmediatePropagation()}function $m(t){var e=t.document.documentElement,n=Mt(t).on("dragstart.drag",ur,xo);"onselectstart"in e?n.on("selectstart.drag",ur,xo):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function zm(t,e){var n=t.document.documentElement,i=Mt(t).on("dragstart.drag",null);e&&(i.on("click.drag",ur,xo),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Zo=t=>()=>t;function _c(t,{sourceEvent:e,subject:n,target:i,identifier:r,active:o,x:s,y:a,dx:l,dy:c,dispatch:d}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:r,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:d}})}_c.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function BS(t){return!t.ctrlKey&&!t.button}function VS(){return this.parentNode}function US(t,e){return e??{x:t.x,y:t.y}}function jS(){return navigator.maxTouchPoints||"ontouchstart"in this}function HS(){var t=BS,e=VS,n=US,i=jS,r={},o=Mo("start","drag","end"),s=0,a,l,c,d,u=0;function h(v){v.on("mousedown.drag",f).filter(i).on("touchstart.drag",w).on("touchmove.drag",_,zS).on("touchend.drag touchcancel.drag",x).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function f(v,C){if(!(d||!t.call(this,v,C))){var A=k(this,e.call(this,v,C),v,C,"mouse");A&&(Mt(v.view).on("mousemove.drag",p,xo).on("mouseup.drag",m,xo),$m(v.view),gl(v),c=!1,a=v.clientX,l=v.clientY,A("start",v))}}function p(v){if(ur(v),!c){var C=v.clientX-a,A=v.clientY-l;c=C*C+A*A>u}r.mouse("drag",v)}function m(v){Mt(v.view).on("mousemove.drag mouseup.drag",null),zm(v.view,c),ur(v),r.mouse("end",v)}function w(v,C){if(t.call(this,v,C)){var A=v.changedTouches,S=e.call(this,v,C),M=A.length,I,D;for(I=0;I<M;++I)(D=k(this,S,v,C,A[I].identifier,A[I]))&&(gl(v),D("start",v,A[I]))}}function _(v){var C=v.changedTouches,A=C.length,S,M;for(S=0;S<A;++S)(M=r[C[S].identifier])&&(ur(v),M("drag",v,C[S]))}function x(v){var C=v.changedTouches,A=C.length,S,M;for(d&&clearTimeout(d),d=setTimeout(function(){d=null},500),S=0;S<A;++S)(M=r[C[S].identifier])&&(gl(v),M("end",v,C[S]))}function k(v,C,A,S,M,I){var D=o.copy(),O=On(I||A,C),$,j,E;if((E=n.call(v,new _c("beforestart",{sourceEvent:A,target:h,identifier:M,active:s,x:O[0],y:O[1],dx:0,dy:0,dispatch:D}),S))!=null)return $=E.x-O[0]||0,j=E.y-O[1]||0,function R(L,G,B){var q=O,ee;switch(L){case"start":r[M]=R,ee=s++;break;case"end":delete r[M],--s;case"drag":O=On(B||G,C),ee=s;break}D.call(L,v,new _c(L,{sourceEvent:G,subject:E,target:h,identifier:M,active:ee,x:O[0]+$,y:O[1]+j,dx:O[0]-q[0],dy:O[1]-q[1],dispatch:D}),S)}}return h.filter=function(v){return arguments.length?(t=typeof v=="function"?v:Zo(!!v),h):t},h.container=function(v){return arguments.length?(e=typeof v=="function"?v:Zo(v),h):e},h.subject=function(v){return arguments.length?(n=typeof v=="function"?v:Zo(v),h):n},h.touchable=function(v){return arguments.length?(i=typeof v=="function"?v:Zo(!!v),h):i},h.on=function(){var v=o.on.apply(o,arguments);return v===o?h:v},h.clickDistance=function(v){return arguments.length?(u=(v=+v)*v,h):Math.sqrt(u)},h}function Ld(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Bm(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function Go(){}var ko=.7,qs=1/ko,hr="\\s*([+-]?\\d+)\\s*",Eo="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",En="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",WS=/^#([0-9a-f]{3,8})$/,qS=new RegExp(`^rgb\\(${hr},${hr},${hr}\\)$`),KS=new RegExp(`^rgb\\(${En},${En},${En}\\)$`),XS=new RegExp(`^rgba\\(${hr},${hr},${hr},${Eo}\\)$`),ZS=new RegExp(`^rgba\\(${En},${En},${En},${Eo}\\)$`),YS=new RegExp(`^hsl\\(${Eo},${En},${En}\\)$`),JS=new RegExp(`^hsla\\(${Eo},${En},${En},${Eo}\\)$`),Dh={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Ld(Go,$i,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Mh,formatHex:Mh,formatHex8:QS,formatHsl:eT,formatRgb:Oh,toString:Oh});function Mh(){return this.rgb().formatHex()}function QS(){return this.rgb().formatHex8()}function eT(){return Vm(this).formatHsl()}function Oh(){return this.rgb().formatRgb()}function $i(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=WS.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?Gh(e):n===3?new Ot(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Yo(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Yo(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=qS.exec(t))?new Ot(e[1],e[2],e[3],1):(e=KS.exec(t))?new Ot(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=XS.exec(t))?Yo(e[1],e[2],e[3],e[4]):(e=ZS.exec(t))?Yo(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=YS.exec(t))?zh(e[1],e[2]/100,e[3]/100,1):(e=JS.exec(t))?zh(e[1],e[2]/100,e[3]/100,e[4]):Dh.hasOwnProperty(t)?Gh(Dh[t]):t==="transparent"?new Ot(NaN,NaN,NaN,0):null}function Gh(t){return new Ot(t>>16&255,t>>8&255,t&255,1)}function Yo(t,e,n,i){return i<=0&&(t=e=n=NaN),new Ot(t,e,n,i)}function tT(t){return t instanceof Go||(t=$i(t)),t?(t=t.rgb(),new Ot(t.r,t.g,t.b,t.opacity)):new Ot}function wc(t,e,n,i){return arguments.length===1?tT(t):new Ot(t,e,n,i??1)}function Ot(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}Ld(Ot,wc,Bm(Go,{brighter(t){return t=t==null?qs:Math.pow(qs,t),new Ot(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?ko:Math.pow(ko,t),new Ot(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Ot(Mi(this.r),Mi(this.g),Mi(this.b),Ks(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Fh,formatHex:Fh,formatHex8:nT,formatRgb:$h,toString:$h}));function Fh(){return`#${Ii(this.r)}${Ii(this.g)}${Ii(this.b)}`}function nT(){return`#${Ii(this.r)}${Ii(this.g)}${Ii(this.b)}${Ii((isNaN(this.opacity)?1:this.opacity)*255)}`}function $h(){const t=Ks(this.opacity);return`${t===1?"rgb(":"rgba("}${Mi(this.r)}, ${Mi(this.g)}, ${Mi(this.b)}${t===1?")":`, ${t})`}`}function Ks(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Mi(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Ii(t){return t=Mi(t),(t<16?"0":"")+t.toString(16)}function zh(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new on(t,e,n,i)}function Vm(t){if(t instanceof on)return new on(t.h,t.s,t.l,t.opacity);if(t instanceof Go||(t=$i(t)),!t)return new on;if(t instanceof on)return t;t=t.rgb();var e=t.r/255,n=t.g/255,i=t.b/255,r=Math.min(e,n,i),o=Math.max(e,n,i),s=NaN,a=o-r,l=(o+r)/2;return a?(e===o?s=(n-i)/a+(n<i)*6:n===o?s=(i-e)/a+2:s=(e-n)/a+4,a/=l<.5?o+r:2-o-r,s*=60):a=l>0&&l<1?0:s,new on(s,a,l,t.opacity)}function iT(t,e,n,i){return arguments.length===1?Vm(t):new on(t,e,n,i??1)}function on(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}Ld(on,iT,Bm(Go,{brighter(t){return t=t==null?qs:Math.pow(qs,t),new on(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?ko:Math.pow(ko,t),new on(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,r=2*n-i;return new Ot(pl(t>=240?t-240:t+120,r,i),pl(t,r,i),pl(t<120?t+240:t-120,r,i),this.opacity)},clamp(){return new on(Bh(this.h),Jo(this.s),Jo(this.l),Ks(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Ks(this.opacity);return`${t===1?"hsl(":"hsla("}${Bh(this.h)}, ${Jo(this.s)*100}%, ${Jo(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Bh(t){return t=(t||0)%360,t<0?t+360:t}function Jo(t){return Math.max(0,Math.min(1,t||0))}function pl(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const Id=t=>()=>t;function rT(t,e){return function(n){return t+n*e}}function oT(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}function sT(t){return(t=+t)==1?Um:function(e,n){return n-e?oT(e,n,t):Id(isNaN(e)?n:e)}}function Um(t,e){var n=e-t;return n?rT(t,n):Id(isNaN(t)?e:t)}const Xs=(function t(e){var n=sT(e);function i(r,o){var s=n((r=wc(r)).r,(o=wc(o)).r),a=n(r.g,o.g),l=n(r.b,o.b),c=Um(r.opacity,o.opacity);return function(d){return r.r=s(d),r.g=a(d),r.b=l(d),r.opacity=c(d),r+""}}return i.gamma=t,i})(1);function aT(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,i=e.slice(),r;return function(o){for(r=0;r<n;++r)i[r]=t[r]*(1-o)+e[r]*o;return i}}function lT(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function cT(t,e){var n=e?e.length:0,i=t?Math.min(n,t.length):0,r=new Array(i),o=new Array(n),s;for(s=0;s<i;++s)r[s]=Sa(t[s],e[s]);for(;s<n;++s)o[s]=e[s];return function(a){for(s=0;s<i;++s)o[s]=r[s](a);return o}}function dT(t,e){var n=new Date;return t=+t,e=+e,function(i){return n.setTime(t*(1-i)+e*i),n}}function rn(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function uT(t,e){var n={},i={},r;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(r in e)r in t?n[r]=Sa(t[r],e[r]):i[r]=e[r];return function(o){for(r in n)i[r]=n[r](o);return i}}var xc=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ml=new RegExp(xc.source,"g");function hT(t){return function(){return t}}function fT(t){return function(e){return t(e)+""}}function jm(t,e){var n=xc.lastIndex=ml.lastIndex=0,i,r,o,s=-1,a=[],l=[];for(t=t+"",e=e+"";(i=xc.exec(t))&&(r=ml.exec(e));)(o=r.index)>n&&(o=e.slice(n,o),a[s]?a[s]+=o:a[++s]=o),(i=i[0])===(r=r[0])?a[s]?a[s]+=r:a[++s]=r:(a[++s]=null,l.push({i:s,x:rn(i,r)})),n=ml.lastIndex;return n<e.length&&(o=e.slice(n),a[s]?a[s]+=o:a[++s]=o),a.length<2?l[0]?fT(l[0].x):hT(e):(e=l.length,function(c){for(var d=0,u;d<e;++d)a[(u=l[d]).i]=u.x(c);return a.join("")})}function Sa(t,e){var n=typeof e,i;return e==null||n==="boolean"?Id(e):(n==="number"?rn:n==="string"?(i=$i(e))?(e=i,Xs):jm:e instanceof $i?Xs:e instanceof Date?dT:lT(e)?aT:Array.isArray(e)?cT:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?uT:rn)(t,e)}function Hm(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var Vh=180/Math.PI,kc={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Wm(t,e,n,i,r,o){var s,a,l;return(s=Math.sqrt(t*t+e*e))&&(t/=s,e/=s),(l=t*n+e*i)&&(n-=t*l,i-=e*l),(a=Math.sqrt(n*n+i*i))&&(n/=a,i/=a,l/=a),t*i<e*n&&(t=-t,e=-e,l=-l,s=-s),{translateX:r,translateY:o,rotate:Math.atan2(e,t)*Vh,skewX:Math.atan(l)*Vh,scaleX:s,scaleY:a}}var Qo;function gT(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?kc:Wm(e.a,e.b,e.c,e.d,e.e,e.f)}function pT(t){return t==null||(Qo||(Qo=document.createElementNS("http://www.w3.org/2000/svg","g")),Qo.setAttribute("transform",t),!(t=Qo.transform.baseVal.consolidate()))?kc:(t=t.matrix,Wm(t.a,t.b,t.c,t.d,t.e,t.f))}function qm(t,e,n,i){function r(c){return c.length?c.pop()+" ":""}function o(c,d,u,h,f,p){if(c!==u||d!==h){var m=f.push("translate(",null,e,null,n);p.push({i:m-4,x:rn(c,u)},{i:m-2,x:rn(d,h)})}else(u||h)&&f.push("translate("+u+e+h+n)}function s(c,d,u,h){c!==d?(c-d>180?d+=360:d-c>180&&(c+=360),h.push({i:u.push(r(u)+"rotate(",null,i)-2,x:rn(c,d)})):d&&u.push(r(u)+"rotate("+d+i)}function a(c,d,u,h){c!==d?h.push({i:u.push(r(u)+"skewX(",null,i)-2,x:rn(c,d)}):d&&u.push(r(u)+"skewX("+d+i)}function l(c,d,u,h,f,p){if(c!==u||d!==h){var m=f.push(r(f)+"scale(",null,",",null,")");p.push({i:m-4,x:rn(c,u)},{i:m-2,x:rn(d,h)})}else(u!==1||h!==1)&&f.push(r(f)+"scale("+u+","+h+")")}return function(c,d){var u=[],h=[];return c=t(c),d=t(d),o(c.translateX,c.translateY,d.translateX,d.translateY,u,h),s(c.rotate,d.rotate,u,h),a(c.skewX,d.skewX,u,h),l(c.scaleX,c.scaleY,d.scaleX,d.scaleY,u,h),c=d=null,function(f){for(var p=-1,m=h.length,w;++p<m;)u[(w=h[p]).i]=w.x(f);return u.join("")}}}var mT=qm(gT,"px, ","px)","deg)"),yT=qm(pT,", ",")",")"),vT=1e-12;function Uh(t){return((t=Math.exp(t))+1/t)/2}function bT(t){return((t=Math.exp(t))-1/t)/2}function _T(t){return((t=Math.exp(2*t))-1)/(t+1)}const wT=(function t(e,n,i){function r(o,s){var a=o[0],l=o[1],c=o[2],d=s[0],u=s[1],h=s[2],f=d-a,p=u-l,m=f*f+p*p,w,_;if(m<vT)_=Math.log(h/c)/e,w=function(S){return[a+S*f,l+S*p,c*Math.exp(e*S*_)]};else{var x=Math.sqrt(m),k=(h*h-c*c+i*m)/(2*c*n*x),v=(h*h-c*c-i*m)/(2*h*n*x),C=Math.log(Math.sqrt(k*k+1)-k),A=Math.log(Math.sqrt(v*v+1)-v);_=(A-C)/e,w=function(S){var M=S*_,I=Uh(C),D=c/(n*x)*(I*_T(e*M+C)-bT(C));return[a+D*f,l+D*p,c*I/Uh(e*M+C)]}}return w.duration=_*1e3*e/Math.SQRT2,w}return r.rho=function(o){var s=Math.max(.001,+o),a=s*s,l=a*a;return t(s,a,l)},r})(Math.SQRT2,2,4);var xr=0,Xr=0,Fr=0,Km=1e3,Zs,Zr,Ys=0,zi=0,Ta=0,Ao=typeof performance=="object"&&performance.now?performance:Date,Xm=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Pd(){return zi||(Xm(xT),zi=Ao.now()+Ta)}function xT(){zi=0}function Js(){this._call=this._time=this._next=null}Js.prototype=Dd.prototype={constructor:Js,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?Pd():+n)+(e==null?0:+e),!this._next&&Zr!==this&&(Zr?Zr._next=this:Zs=this,Zr=this),this._call=t,this._time=n,Ec()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ec())}};function Dd(t,e,n){var i=new Js;return i.restart(t,e,n),i}function kT(){Pd(),++xr;for(var t=Zs,e;t;)(e=zi-t._time)>=0&&t._call.call(void 0,e),t=t._next;--xr}function jh(){zi=(Ys=Ao.now())+Ta,xr=Xr=0;try{kT()}finally{xr=0,AT(),zi=0}}function ET(){var t=Ao.now(),e=t-Ys;e>Km&&(Ta-=e,Ys=t)}function AT(){for(var t,e=Zs,n,i=1/0;e;)e._call?(i>e._time&&(i=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:Zs=n);Zr=t,Ec(i)}function Ec(t){if(!xr){Xr&&(Xr=clearTimeout(Xr));var e=t-zi;e>24?(t<1/0&&(Xr=setTimeout(jh,t-Ao.now()-Ta)),Fr&&(Fr=clearInterval(Fr))):(Fr||(Ys=Ao.now(),Fr=setInterval(ET,Km)),xr=1,Xm(jh))}}function Hh(t,e,n){var i=new Js;return e=e==null?0:+e,i.restart(r=>{i.stop(),t(r+e)},e,n),i}var CT=Mo("start","end","cancel","interrupt"),ST=[],Zm=0,Wh=1,Ac=2,_s=3,qh=4,Cc=5,ws=6;function Na(t,e,n,i,r,o){var s=t.__transition;if(!s)t.__transition={};else if(n in s)return;TT(t,n,{name:e,index:i,group:r,on:CT,tween:ST,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:Zm})}function Md(t,e){var n=gn(t,e);if(n.state>Zm)throw new Error("too late; already scheduled");return n}function Sn(t,e){var n=gn(t,e);if(n.state>_s)throw new Error("too late; already running");return n}function gn(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function TT(t,e,n){var i=t.__transition,r;i[e]=n,n.timer=Dd(o,0,n.time);function o(c){n.state=Wh,n.timer.restart(s,n.delay,n.time),n.delay<=c&&s(c-n.delay)}function s(c){var d,u,h,f;if(n.state!==Wh)return l();for(d in i)if(f=i[d],f.name===n.name){if(f.state===_s)return Hh(s);f.state===qh?(f.state=ws,f.timer.stop(),f.on.call("interrupt",t,t.__data__,f.index,f.group),delete i[d]):+d<e&&(f.state=ws,f.timer.stop(),f.on.call("cancel",t,t.__data__,f.index,f.group),delete i[d])}if(Hh(function(){n.state===_s&&(n.state=qh,n.timer.restart(a,n.delay,n.time),a(c))}),n.state=Ac,n.on.call("start",t,t.__data__,n.index,n.group),n.state===Ac){for(n.state=_s,r=new Array(h=n.tween.length),d=0,u=-1;d<h;++d)(f=n.tween[d].value.call(t,t.__data__,n.index,n.group))&&(r[++u]=f);r.length=u+1}}function a(c){for(var d=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(l),n.state=Cc,1),u=-1,h=r.length;++u<h;)r[u].call(t,d);n.state===Cc&&(n.on.call("end",t,t.__data__,n.index,n.group),l())}function l(){n.state=ws,n.timer.stop(),delete i[e];for(var c in i)return;delete t.__transition}}function xs(t,e){var n=t.__transition,i,r,o=!0,s;if(n){e=e==null?null:e+"";for(s in n){if((i=n[s]).name!==e){o=!1;continue}r=i.state>Ac&&i.state<Cc,i.state=ws,i.timer.stop(),i.on.call(r?"interrupt":"cancel",t,t.__data__,i.index,i.group),delete n[s]}o&&delete t.__transition}}function NT(t){return this.each(function(){xs(this,t)})}function RT(t,e){var n,i;return function(){var r=Sn(this,t),o=r.tween;if(o!==n){i=n=o;for(var s=0,a=i.length;s<a;++s)if(i[s].name===e){i=i.slice(),i.splice(s,1);break}}r.tween=i}}function LT(t,e,n){var i,r;if(typeof n!="function")throw new Error;return function(){var o=Sn(this,t),s=o.tween;if(s!==i){r=(i=s).slice();for(var a={name:e,value:n},l=0,c=r.length;l<c;++l)if(r[l].name===e){r[l]=a;break}l===c&&r.push(a)}o.tween=r}}function IT(t,e){var n=this._id;if(t+="",arguments.length<2){for(var i=gn(this.node(),n).tween,r=0,o=i.length,s;r<o;++r)if((s=i[r]).name===t)return s.value;return null}return this.each((e==null?RT:LT)(n,t,e))}function Od(t,e,n){var i=t._id;return t.each(function(){var r=Sn(this,i);(r.value||(r.value={}))[e]=n.apply(this,arguments)}),function(r){return gn(r,i).value[e]}}function Ym(t,e){var n;return(typeof e=="number"?rn:e instanceof $i?Xs:(n=$i(e))?(e=n,Xs):jm)(t,e)}function PT(t){return function(){this.removeAttribute(t)}}function DT(t){return function(){this.removeAttributeNS(t.space,t.local)}}function MT(t,e,n){var i,r=n+"",o;return function(){var s=this.getAttribute(t);return s===r?null:s===i?o:o=e(i=s,n)}}function OT(t,e,n){var i,r=n+"",o;return function(){var s=this.getAttributeNS(t.space,t.local);return s===r?null:s===i?o:o=e(i=s,n)}}function GT(t,e,n){var i,r,o;return function(){var s,a=n(this),l;return a==null?void this.removeAttribute(t):(s=this.getAttribute(t),l=a+"",s===l?null:s===i&&l===r?o:(r=l,o=e(i=s,a)))}}function FT(t,e,n){var i,r,o;return function(){var s,a=n(this),l;return a==null?void this.removeAttributeNS(t.space,t.local):(s=this.getAttributeNS(t.space,t.local),l=a+"",s===l?null:s===i&&l===r?o:(r=l,o=e(i=s,a)))}}function $T(t,e){var n=Ca(t),i=n==="transform"?yT:Ym;return this.attrTween(t,typeof e=="function"?(n.local?FT:GT)(n,i,Od(this,"attr."+t,e)):e==null?(n.local?DT:PT)(n):(n.local?OT:MT)(n,i,e))}function zT(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function BT(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function VT(t,e){var n,i;function r(){var o=e.apply(this,arguments);return o!==i&&(n=(i=o)&&BT(t,o)),n}return r._value=e,r}function UT(t,e){var n,i;function r(){var o=e.apply(this,arguments);return o!==i&&(n=(i=o)&&zT(t,o)),n}return r._value=e,r}function jT(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var i=Ca(t);return this.tween(n,(i.local?VT:UT)(i,e))}function HT(t,e){return function(){Md(this,t).delay=+e.apply(this,arguments)}}function WT(t,e){return e=+e,function(){Md(this,t).delay=e}}function qT(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?HT:WT)(e,t)):gn(this.node(),e).delay}function KT(t,e){return function(){Sn(this,t).duration=+e.apply(this,arguments)}}function XT(t,e){return e=+e,function(){Sn(this,t).duration=e}}function ZT(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?KT:XT)(e,t)):gn(this.node(),e).duration}function YT(t,e){if(typeof e!="function")throw new Error;return function(){Sn(this,t).ease=e}}function JT(t){var e=this._id;return arguments.length?this.each(YT(e,t)):gn(this.node(),e).ease}function QT(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;Sn(this,t).ease=n}}function eN(t){if(typeof t!="function")throw new Error;return this.each(QT(this._id,t))}function tN(t){typeof t!="function"&&(t=Nm(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var o=e[r],s=o.length,a=i[r]=[],l,c=0;c<s;++c)(l=o[c])&&t.call(l,l.__data__,c,o)&&a.push(l);return new Zn(i,this._parents,this._name,this._id)}function nN(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,i=e.length,r=n.length,o=Math.min(i,r),s=new Array(i),a=0;a<o;++a)for(var l=e[a],c=n[a],d=l.length,u=s[a]=new Array(d),h,f=0;f<d;++f)(h=l[f]||c[f])&&(u[f]=h);for(;a<i;++a)s[a]=e[a];return new Zn(s,this._parents,this._name,this._id)}function iN(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function rN(t,e,n){var i,r,o=iN(e)?Md:Sn;return function(){var s=o(this,t),a=s.on;a!==i&&(r=(i=a).copy()).on(e,n),s.on=r}}function oN(t,e){var n=this._id;return arguments.length<2?gn(this.node(),n).on.on(t):this.each(rN(n,t,e))}function sN(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function aN(){return this.on("end.remove",sN(this._id))}function lN(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Nd(t));for(var i=this._groups,r=i.length,o=new Array(r),s=0;s<r;++s)for(var a=i[s],l=a.length,c=o[s]=new Array(l),d,u,h=0;h<l;++h)(d=a[h])&&(u=t.call(d,d.__data__,h,a))&&("__data__"in d&&(u.__data__=d.__data__),c[h]=u,Na(c[h],e,n,h,c,gn(d,n)));return new Zn(o,this._parents,e,n)}function cN(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Tm(t));for(var i=this._groups,r=i.length,o=[],s=[],a=0;a<r;++a)for(var l=i[a],c=l.length,d,u=0;u<c;++u)if(d=l[u]){for(var h=t.call(d,d.__data__,u,l),f,p=gn(d,n),m=0,w=h.length;m<w;++m)(f=h[m])&&Na(f,e,n,m,h,p);o.push(h),s.push(d)}return new Zn(o,s,e,n)}var dN=Oo.prototype.constructor;function uN(){return new dN(this._groups,this._parents)}function hN(t,e){var n,i,r;return function(){var o=wr(this,t),s=(this.style.removeProperty(t),wr(this,t));return o===s?null:o===n&&s===i?r:r=e(n=o,i=s)}}function Jm(t){return function(){this.style.removeProperty(t)}}function fN(t,e,n){var i,r=n+"",o;return function(){var s=wr(this,t);return s===r?null:s===i?o:o=e(i=s,n)}}function gN(t,e,n){var i,r,o;return function(){var s=wr(this,t),a=n(this),l=a+"";return a==null&&(l=a=(this.style.removeProperty(t),wr(this,t))),s===l?null:s===i&&l===r?o:(r=l,o=e(i=s,a))}}function pN(t,e){var n,i,r,o="style."+e,s="end."+o,a;return function(){var l=Sn(this,t),c=l.on,d=l.value[o]==null?a||(a=Jm(e)):void 0;(c!==n||r!==d)&&(i=(n=c).copy()).on(s,r=d),l.on=i}}function mN(t,e,n){var i=(t+="")=="transform"?mT:Ym;return e==null?this.styleTween(t,hN(t,i)).on("end.style."+t,Jm(t)):typeof e=="function"?this.styleTween(t,gN(t,i,Od(this,"style."+t,e))).each(pN(this._id,t)):this.styleTween(t,fN(t,i,e),n).on("end.style."+t,null)}function yN(t,e,n){return function(i){this.style.setProperty(t,e.call(this,i),n)}}function vN(t,e,n){var i,r;function o(){var s=e.apply(this,arguments);return s!==r&&(i=(r=s)&&yN(t,s,n)),i}return o._value=e,o}function bN(t,e,n){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!="function")throw new Error;return this.tween(i,vN(t,e,n??""))}function _N(t){return function(){this.textContent=t}}function wN(t){return function(){var e=t(this);this.textContent=e??""}}function xN(t){return this.tween("text",typeof t=="function"?wN(Od(this,"text",t)):_N(t==null?"":t+""))}function kN(t){return function(e){this.textContent=t.call(this,e)}}function EN(t){var e,n;function i(){var r=t.apply(this,arguments);return r!==n&&(e=(n=r)&&kN(r)),e}return i._value=t,i}function AN(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,EN(t))}function CN(){for(var t=this._name,e=this._id,n=Qm(),i=this._groups,r=i.length,o=0;o<r;++o)for(var s=i[o],a=s.length,l,c=0;c<a;++c)if(l=s[c]){var d=gn(l,e);Na(l,t,n,c,s,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new Zn(i,this._parents,t,n)}function SN(){var t,e,n=this,i=n._id,r=n.size();return new Promise(function(o,s){var a={value:s},l={value:function(){--r===0&&o()}};n.each(function(){var c=Sn(this,i),d=c.on;d!==t&&(e=(t=d).copy(),e._.cancel.push(a),e._.interrupt.push(a),e._.end.push(l)),c.on=e}),r===0&&o()})}var TN=0;function Zn(t,e,n,i){this._groups=t,this._parents=e,this._name=n,this._id=i}function Qm(){return++TN}var In=Oo.prototype;Zn.prototype={constructor:Zn,select:lN,selectAll:cN,selectChild:In.selectChild,selectChildren:In.selectChildren,filter:tN,merge:nN,selection:uN,transition:CN,call:In.call,nodes:In.nodes,node:In.node,size:In.size,empty:In.empty,each:In.each,on:oN,attr:$T,attrTween:jT,style:mN,styleTween:bN,text:xN,textTween:AN,remove:aN,tween:IT,delay:qT,duration:ZT,ease:JT,easeVarying:eN,end:SN,[Symbol.iterator]:In[Symbol.iterator]};function NN(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var RN={time:null,delay:0,duration:250,ease:NN};function LN(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function IN(t){var e,n;t instanceof Zn?(e=t._id,t=t._name):(e=Qm(),(n=RN).time=Pd(),t=t==null?null:t+"");for(var i=this._groups,r=i.length,o=0;o<r;++o)for(var s=i[o],a=s.length,l,c=0;c<a;++c)(l=s[c])&&Na(l,t,e,c,s,n||LN(l,e));return new Zn(i,this._parents,t,e)}Oo.prototype.interrupt=NT;Oo.prototype.transition=IN;function Sc(t,e){var n,i=1;t==null&&(t=0),e==null&&(e=0);function r(){var o,s=n.length,a,l=0,c=0;for(o=0;o<s;++o)a=n[o],l+=a.x,c+=a.y;for(l=(l/s-t)*i,c=(c/s-e)*i,o=0;o<s;++o)a=n[o],a.x-=l,a.y-=c}return r.initialize=function(o){n=o},r.x=function(o){return arguments.length?(t=+o,r):t},r.y=function(o){return arguments.length?(e=+o,r):e},r.strength=function(o){return arguments.length?(i=+o,r):i},r}function PN(t){const e=+this._x.call(null,t),n=+this._y.call(null,t);return ey(this.cover(e,n),e,n,t)}function ey(t,e,n,i){if(isNaN(e)||isNaN(n))return t;var r,o=t._root,s={data:i},a=t._x0,l=t._y0,c=t._x1,d=t._y1,u,h,f,p,m,w,_,x;if(!o)return t._root=s,t;for(;o.length;)if((m=e>=(u=(a+c)/2))?a=u:c=u,(w=n>=(h=(l+d)/2))?l=h:d=h,r=o,!(o=o[_=w<<1|m]))return r[_]=s,t;if(f=+t._x.call(null,o.data),p=+t._y.call(null,o.data),e===f&&n===p)return s.next=o,r?r[_]=s:t._root=s,t;do r=r?r[_]=new Array(4):t._root=new Array(4),(m=e>=(u=(a+c)/2))?a=u:c=u,(w=n>=(h=(l+d)/2))?l=h:d=h;while((_=w<<1|m)===(x=(p>=h)<<1|f>=u));return r[x]=o,r[_]=s,t}function DN(t){var e,n,i=t.length,r,o,s=new Array(i),a=new Array(i),l=1/0,c=1/0,d=-1/0,u=-1/0;for(n=0;n<i;++n)isNaN(r=+this._x.call(null,e=t[n]))||isNaN(o=+this._y.call(null,e))||(s[n]=r,a[n]=o,r<l&&(l=r),r>d&&(d=r),o<c&&(c=o),o>u&&(u=o));if(l>d||c>u)return this;for(this.cover(l,c).cover(d,u),n=0;n<i;++n)ey(this,s[n],a[n],t[n]);return this}function MN(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,i=this._y0,r=this._x1,o=this._y1;if(isNaN(n))r=(n=Math.floor(t))+1,o=(i=Math.floor(e))+1;else{for(var s=r-n||1,a=this._root,l,c;n>t||t>=r||i>e||e>=o;)switch(c=(e<i)<<1|t<n,l=new Array(4),l[c]=a,a=l,s*=2,c){case 0:r=n+s,o=i+s;break;case 1:n=r-s,o=i+s;break;case 2:r=n+s,i=o-s;break;case 3:n=r-s,i=o-s;break}this._root&&this._root.length&&(this._root=a)}return this._x0=n,this._y0=i,this._x1=r,this._y1=o,this}function ON(){var t=[];return this.visit(function(e){if(!e.length)do t.push(e.data);while(e=e.next)}),t}function GN(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Lt(t,e,n,i,r){this.node=t,this.x0=e,this.y0=n,this.x1=i,this.y1=r}function FN(t,e,n){var i,r=this._x0,o=this._y0,s,a,l,c,d=this._x1,u=this._y1,h=[],f=this._root,p,m;for(f&&h.push(new Lt(f,r,o,d,u)),n==null?n=1/0:(r=t-n,o=e-n,d=t+n,u=e+n,n*=n);p=h.pop();)if(!(!(f=p.node)||(s=p.x0)>d||(a=p.y0)>u||(l=p.x1)<r||(c=p.y1)<o))if(f.length){var w=(s+l)/2,_=(a+c)/2;h.push(new Lt(f[3],w,_,l,c),new Lt(f[2],s,_,w,c),new Lt(f[1],w,a,l,_),new Lt(f[0],s,a,w,_)),(m=(e>=_)<<1|t>=w)&&(p=h[h.length-1],h[h.length-1]=h[h.length-1-m],h[h.length-1-m]=p)}else{var x=t-+this._x.call(null,f.data),k=e-+this._y.call(null,f.data),v=x*x+k*k;if(v<n){var C=Math.sqrt(n=v);r=t-C,o=e-C,d=t+C,u=e+C,i=f.data}}return i}function $N(t){if(isNaN(d=+this._x.call(null,t))||isNaN(u=+this._y.call(null,t)))return this;var e,n=this._root,i,r,o,s=this._x0,a=this._y0,l=this._x1,c=this._y1,d,u,h,f,p,m,w,_;if(!n)return this;if(n.length)for(;;){if((p=d>=(h=(s+l)/2))?s=h:l=h,(m=u>=(f=(a+c)/2))?a=f:c=f,e=n,!(n=n[w=m<<1|p]))return this;if(!n.length)break;(e[w+1&3]||e[w+2&3]||e[w+3&3])&&(i=e,_=w)}for(;n.data!==t;)if(r=n,!(n=n.next))return this;return(o=n.next)&&delete n.next,r?(o?r.next=o:delete r.next,this):e?(o?e[w]=o:delete e[w],(n=e[0]||e[1]||e[2]||e[3])&&n===(e[3]||e[2]||e[1]||e[0])&&!n.length&&(i?i[_]=n:this._root=n),this):(this._root=o,this)}function zN(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this}function BN(){return this._root}function VN(){var t=0;return this.visit(function(e){if(!e.length)do++t;while(e=e.next)}),t}function UN(t){var e=[],n,i=this._root,r,o,s,a,l;for(i&&e.push(new Lt(i,this._x0,this._y0,this._x1,this._y1));n=e.pop();)if(!t(i=n.node,o=n.x0,s=n.y0,a=n.x1,l=n.y1)&&i.length){var c=(o+a)/2,d=(s+l)/2;(r=i[3])&&e.push(new Lt(r,c,d,a,l)),(r=i[2])&&e.push(new Lt(r,o,d,c,l)),(r=i[1])&&e.push(new Lt(r,c,s,a,d)),(r=i[0])&&e.push(new Lt(r,o,s,c,d))}return this}function jN(t){var e=[],n=[],i;for(this._root&&e.push(new Lt(this._root,this._x0,this._y0,this._x1,this._y1));i=e.pop();){var r=i.node;if(r.length){var o,s=i.x0,a=i.y0,l=i.x1,c=i.y1,d=(s+l)/2,u=(a+c)/2;(o=r[0])&&e.push(new Lt(o,s,a,d,u)),(o=r[1])&&e.push(new Lt(o,d,a,l,u)),(o=r[2])&&e.push(new Lt(o,s,u,d,c)),(o=r[3])&&e.push(new Lt(o,d,u,l,c))}n.push(i)}for(;i=n.pop();)t(i.node,i.x0,i.y0,i.x1,i.y1);return this}function HN(t){return t[0]}function WN(t){return arguments.length?(this._x=t,this):this._x}function qN(t){return t[1]}function KN(t){return arguments.length?(this._y=t,this):this._y}function Gd(t,e,n){var i=new Fd(e??HN,n??qN,NaN,NaN,NaN,NaN);return t==null?i:i.addAll(t)}function Fd(t,e,n,i,r,o){this._x=t,this._y=e,this._x0=n,this._y0=i,this._x1=r,this._y1=o,this._root=void 0}function Kh(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var It=Gd.prototype=Fd.prototype;It.copy=function(){var t=new Fd(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root,n,i;if(!e)return t;if(!e.length)return t._root=Kh(e),t;for(n=[{source:e,target:t._root=new Array(4)}];e=n.pop();)for(var r=0;r<4;++r)(i=e.source[r])&&(i.length?n.push({source:i,target:e.target[r]=new Array(4)}):e.target[r]=Kh(i));return t};It.add=PN;It.addAll=DN;It.cover=MN;It.data=ON;It.extent=GN;It.find=FN;It.remove=$N;It.removeAll=zN;It.root=BN;It.size=VN;It.visit=UN;It.visitAfter=jN;It.x=WN;It.y=KN;function Oi(t){return function(){return t}}function ci(t){return(t()-.5)*1e-6}function XN(t){return t.x+t.vx}function ZN(t){return t.y+t.vy}function ty(t){var e,n,i,r=1,o=1;typeof t!="function"&&(t=Oi(t==null?1:+t));function s(){for(var c,d=e.length,u,h,f,p,m,w,_=0;_<o;++_)for(u=Gd(e,XN,ZN).visitAfter(a),c=0;c<d;++c)h=e[c],m=n[h.index],w=m*m,f=h.x+h.vx,p=h.y+h.vy,u.visit(x);function x(k,v,C,A,S){var M=k.data,I=k.r,D=m+I;if(M){if(M.index>h.index){var O=f-M.x-M.vx,$=p-M.y-M.vy,j=O*O+$*$;j<D*D&&(O===0&&(O=ci(i),j+=O*O),$===0&&($=ci(i),j+=$*$),j=(D-(j=Math.sqrt(j)))/j*r,h.vx+=(O*=j)*(D=(I*=I)/(w+I)),h.vy+=($*=j)*D,M.vx-=O*(D=1-D),M.vy-=$*D)}return}return v>f+D||A<f-D||C>p+D||S<p-D}}function a(c){if(c.data)return c.r=n[c.data.index];for(var d=c.r=0;d<4;++d)c[d]&&c[d].r>c.r&&(c.r=c[d].r)}function l(){if(e){var c,d=e.length,u;for(n=new Array(d),c=0;c<d;++c)u=e[c],n[u.index]=+t(u,c,e)}}return s.initialize=function(c,d){e=c,i=d,l()},s.iterations=function(c){return arguments.length?(o=+c,s):o},s.strength=function(c){return arguments.length?(r=+c,s):r},s.radius=function(c){return arguments.length?(t=typeof c=="function"?c:Oi(+c),l(),s):t},s}function YN(t){return t.index}function Xh(t,e){var n=t.get(e);if(!n)throw new Error("node not found: "+e);return n}function ny(t){var e=YN,n=u,i,r=Oi(30),o,s,a,l,c,d=1;t==null&&(t=[]);function u(w){return 1/Math.min(a[w.source.index],a[w.target.index])}function h(w){for(var _=0,x=t.length;_<d;++_)for(var k=0,v,C,A,S,M,I,D;k<x;++k)v=t[k],C=v.source,A=v.target,S=A.x+A.vx-C.x-C.vx||ci(c),M=A.y+A.vy-C.y-C.vy||ci(c),I=Math.sqrt(S*S+M*M),I=(I-o[k])/I*w*i[k],S*=I,M*=I,A.vx-=S*(D=l[k]),A.vy-=M*D,C.vx+=S*(D=1-D),C.vy+=M*D}function f(){if(s){var w,_=s.length,x=t.length,k=new Map(s.map((C,A)=>[e(C,A,s),C])),v;for(w=0,a=new Array(_);w<x;++w)v=t[w],v.index=w,typeof v.source!="object"&&(v.source=Xh(k,v.source)),typeof v.target!="object"&&(v.target=Xh(k,v.target)),a[v.source.index]=(a[v.source.index]||0)+1,a[v.target.index]=(a[v.target.index]||0)+1;for(w=0,l=new Array(x);w<x;++w)v=t[w],l[w]=a[v.source.index]/(a[v.source.index]+a[v.target.index]);i=new Array(x),p(),o=new Array(x),m()}}function p(){if(s)for(var w=0,_=t.length;w<_;++w)i[w]=+n(t[w],w,t)}function m(){if(s)for(var w=0,_=t.length;w<_;++w)o[w]=+r(t[w],w,t)}return h.initialize=function(w,_){s=w,c=_,f()},h.links=function(w){return arguments.length?(t=w,f(),h):t},h.id=function(w){return arguments.length?(e=w,h):e},h.iterations=function(w){return arguments.length?(d=+w,h):d},h.strength=function(w){return arguments.length?(n=typeof w=="function"?w:Oi(+w),p(),h):n},h.distance=function(w){return arguments.length?(r=typeof w=="function"?w:Oi(+w),m(),h):r},h}const JN=1664525,QN=1013904223,Zh=4294967296;function eR(){let t=1;return()=>(t=(JN*t+QN)%Zh)/Zh}function tR(t){return t.x}function nR(t){return t.y}var iR=10,rR=Math.PI*(3-Math.sqrt(5));function iy(t){var e,n=1,i=.001,r=1-Math.pow(i,1/300),o=0,s=.6,a=new Map,l=Dd(u),c=Mo("tick","end"),d=eR();t==null&&(t=[]);function u(){h(),c.call("tick",e),n<i&&(l.stop(),c.call("end",e))}function h(m){var w,_=t.length,x;m===void 0&&(m=1);for(var k=0;k<m;++k)for(n+=(o-n)*r,a.forEach(function(v){v(n)}),w=0;w<_;++w)x=t[w],x.fx==null?x.x+=x.vx*=s:(x.x=x.fx,x.vx=0),x.fy==null?x.y+=x.vy*=s:(x.y=x.fy,x.vy=0);return e}function f(){for(var m=0,w=t.length,_;m<w;++m){if(_=t[m],_.index=m,_.fx!=null&&(_.x=_.fx),_.fy!=null&&(_.y=_.fy),isNaN(_.x)||isNaN(_.y)){var x=iR*Math.sqrt(.5+m),k=m*rR;_.x=x*Math.cos(k),_.y=x*Math.sin(k)}(isNaN(_.vx)||isNaN(_.vy))&&(_.vx=_.vy=0)}}function p(m){return m.initialize&&m.initialize(t,d),m}return f(),e={tick:h,restart:function(){return l.restart(u),e},stop:function(){return l.stop(),e},nodes:function(m){return arguments.length?(t=m,f(),a.forEach(p),e):t},alpha:function(m){return arguments.length?(n=+m,e):n},alphaMin:function(m){return arguments.length?(i=+m,e):i},alphaDecay:function(m){return arguments.length?(r=+m,e):+r},alphaTarget:function(m){return arguments.length?(o=+m,e):o},velocityDecay:function(m){return arguments.length?(s=1-m,e):1-s},randomSource:function(m){return arguments.length?(d=m,a.forEach(p),e):d},force:function(m,w){return arguments.length>1?(w==null?a.delete(m):a.set(m,p(w)),e):a.get(m)},find:function(m,w,_){var x=0,k=t.length,v,C,A,S,M;for(_==null?_=1/0:_*=_,x=0;x<k;++x)S=t[x],v=m-S.x,C=w-S.y,A=v*v+C*C,A<_&&(M=S,_=A);return M},on:function(m,w){return arguments.length>1?(c.on(m,w),e):c.on(m)}}}function ry(){var t,e,n,i,r=Oi(-30),o,s=1,a=1/0,l=.81;function c(f){var p,m=t.length,w=Gd(t,tR,nR).visitAfter(u);for(i=f,p=0;p<m;++p)e=t[p],w.visit(h)}function d(){if(t){var f,p=t.length,m;for(o=new Array(p),f=0;f<p;++f)m=t[f],o[m.index]=+r(m,f,t)}}function u(f){var p=0,m,w,_=0,x,k,v;if(f.length){for(x=k=v=0;v<4;++v)(m=f[v])&&(w=Math.abs(m.value))&&(p+=m.value,_+=w,x+=w*m.x,k+=w*m.y);f.x=x/_,f.y=k/_}else{m=f,m.x=m.data.x,m.y=m.data.y;do p+=o[m.data.index];while(m=m.next)}f.value=p}function h(f,p,m,w){if(!f.value)return!0;var _=f.x-e.x,x=f.y-e.y,k=w-p,v=_*_+x*x;if(k*k/l<v)return v<a&&(_===0&&(_=ci(n),v+=_*_),x===0&&(x=ci(n),v+=x*x),v<s&&(v=Math.sqrt(s*v)),e.vx+=_*f.value*i/v,e.vy+=x*f.value*i/v),!0;if(f.length||v>=a)return;(f.data!==e||f.next)&&(_===0&&(_=ci(n),v+=_*_),x===0&&(x=ci(n),v+=x*x),v<s&&(v=Math.sqrt(s*v)));do f.data!==e&&(k=o[f.data.index]*i/v,e.vx+=_*k,e.vy+=x*k);while(f=f.next)}return c.initialize=function(f,p){t=f,n=p,d()},c.strength=function(f){return arguments.length?(r=typeof f=="function"?f:Oi(+f),d(),c):r},c.distanceMin=function(f){return arguments.length?(s=f*f,c):Math.sqrt(s)},c.distanceMax=function(f){return arguments.length?(a=f*f,c):Math.sqrt(a)},c.theta=function(f){return arguments.length?(l=f*f,c):Math.sqrt(l)},c}function oR(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Qs(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,i=t.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+t.slice(n+1)]}function kr(t){return t=Qs(Math.abs(t)),t?t[1]:NaN}function sR(t,e){return function(n,i){for(var r=n.length,o=[],s=0,a=t[0],l=0;r>0&&a>0&&(l+a+1>i&&(a=Math.max(1,i-l)),o.push(n.substring(r-=a,r+a)),!((l+=a+1)>i));)a=t[s=(s+1)%t.length];return o.reverse().join(e)}}function aR(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var lR=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ea(t){if(!(e=lR.exec(t)))throw new Error("invalid format: "+t);var e;return new $d({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}ea.prototype=$d.prototype;function $d(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}$d.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function cR(t){e:for(var e=t.length,n=1,i=-1,r;n<e;++n)switch(t[n]){case".":i=r=n;break;case"0":i===0&&(i=n),r=n;break;default:if(!+t[n])break e;i>0&&(i=0);break}return i>0?t.slice(0,i)+t.slice(r+1):t}var oy;function dR(t,e){var n=Qs(t,e);if(!n)return t+"";var i=n[0],r=n[1],o=r-(oy=Math.max(-8,Math.min(8,Math.floor(r/3)))*3)+1,s=i.length;return o===s?i:o>s?i+new Array(o-s+1).join("0"):o>0?i.slice(0,o)+"."+i.slice(o):"0."+new Array(1-o).join("0")+Qs(t,Math.max(0,e+o-1))[0]}function Yh(t,e){var n=Qs(t,e);if(!n)return t+"";var i=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}const Jh={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:oR,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>Yh(t*100,e),r:Yh,s:dR,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Qh(t){return t}var ef=Array.prototype.map,tf=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function uR(t){var e=t.grouping===void 0||t.thousands===void 0?Qh:sR(ef.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",i=t.currency===void 0?"":t.currency[1]+"",r=t.decimal===void 0?".":t.decimal+"",o=t.numerals===void 0?Qh:aR(ef.call(t.numerals,String)),s=t.percent===void 0?"%":t.percent+"",a=t.minus===void 0?"":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function c(u){u=ea(u);var h=u.fill,f=u.align,p=u.sign,m=u.symbol,w=u.zero,_=u.width,x=u.comma,k=u.precision,v=u.trim,C=u.type;C==="n"?(x=!0,C="g"):Jh[C]||(k===void 0&&(k=12),v=!0,C="g"),(w||h==="0"&&f==="=")&&(w=!0,h="0",f="=");var A=m==="$"?n:m==="#"&&/[boxX]/.test(C)?"0"+C.toLowerCase():"",S=m==="$"?i:/[%p]/.test(C)?s:"",M=Jh[C],I=/[defgprs%]/.test(C);k=k===void 0?6:/[gprs]/.test(C)?Math.max(1,Math.min(21,k)):Math.max(0,Math.min(20,k));function D(O){var $=A,j=S,E,R,L;if(C==="c")j=M(O)+j,O="";else{O=+O;var G=O<0||1/O<0;if(O=isNaN(O)?l:M(Math.abs(O),k),v&&(O=cR(O)),G&&+O==0&&p!=="+"&&(G=!1),$=(G?p==="("?p:a:p==="-"||p==="("?"":p)+$,j=(C==="s"?tf[8+oy/3]:"")+j+(G&&p==="("?")":""),I){for(E=-1,R=O.length;++E<R;)if(L=O.charCodeAt(E),48>L||L>57){j=(L===46?r+O.slice(E+1):O.slice(E))+j,O=O.slice(0,E);break}}}x&&!w&&(O=e(O,1/0));var B=$.length+O.length+j.length,q=B<_?new Array(_-B+1).join(h):"";switch(x&&w&&(O=e(q+O,q.length?_-j.length:1/0),q=""),f){case"<":O=$+O+j+q;break;case"=":O=$+q+O+j;break;case"^":O=q.slice(0,B=q.length>>1)+$+O+j+q.slice(B);break;default:O=q+$+O+j;break}return o(O)}return D.toString=function(){return u+""},D}function d(u,h){var f=c((u=ea(u),u.type="f",u)),p=Math.max(-8,Math.min(8,Math.floor(kr(h)/3)))*3,m=Math.pow(10,-p),w=tf[8+p/3];return function(_){return f(m*_)+w}}return{format:c,formatPrefix:d}}var es,sy,ay;hR({thousands:",",grouping:[3],currency:["$",""]});function hR(t){return es=uR(t),sy=es.format,ay=es.formatPrefix,es}function fR(t){return Math.max(0,-kr(Math.abs(t)))}function gR(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(kr(e)/3)))*3-kr(Math.abs(t)))}function pR(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,kr(e)-kr(t))+1}function ly(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function mR(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const nf=Symbol("implicit");function cy(){var t=new Rh,e=[],n=[],i=nf;function r(o){let s=t.get(o);if(s===void 0){if(i!==nf)return i;t.set(o,s=e.push(o)-1)}return n[s%n.length]}return r.domain=function(o){if(!arguments.length)return e.slice();e=[],t=new Rh;for(const s of o)t.has(s)||t.set(s,e.push(s)-1);return r},r.range=function(o){return arguments.length?(n=Array.from(o),r):n.slice()},r.unknown=function(o){return arguments.length?(i=o,r):i},r.copy=function(){return cy(e,n).unknown(i)},ly.apply(r,arguments),r}function yR(t){return function(){return t}}function vR(t){return+t}var rf=[0,1];function wn(t){return t}function Tc(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:yR(isNaN(e)?NaN:.5)}function bR(t,e){var n;return t>e&&(n=t,t=e,e=n),function(i){return Math.max(t,Math.min(e,i))}}function _R(t,e,n){var i=t[0],r=t[1],o=e[0],s=e[1];return r<i?(i=Tc(r,i),o=n(s,o)):(i=Tc(i,r),o=n(o,s)),function(a){return o(i(a))}}function wR(t,e,n){var i=Math.min(t.length,e.length)-1,r=new Array(i),o=new Array(i),s=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<i;)r[s]=Tc(t[s],t[s+1]),o[s]=n(e[s],e[s+1]);return function(a){var l=XA(t,a,1,i)-1;return o[l](r[l](a))}}function xR(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function kR(){var t=rf,e=rf,n=Sa,i,r,o,s=wn,a,l,c;function d(){var h=Math.min(t.length,e.length);return s!==wn&&(s=bR(t[0],t[h-1])),a=h>2?wR:_R,l=c=null,u}function u(h){return h==null||isNaN(h=+h)?o:(l||(l=a(t.map(i),e,n)))(i(s(h)))}return u.invert=function(h){return s(r((c||(c=a(e,t.map(i),rn)))(h)))},u.domain=function(h){return arguments.length?(t=Array.from(h,vR),d()):t.slice()},u.range=function(h){return arguments.length?(e=Array.from(h),d()):e.slice()},u.rangeRound=function(h){return e=Array.from(h),n=Hm,d()},u.clamp=function(h){return arguments.length?(s=h?!0:wn,d()):s!==wn},u.interpolate=function(h){return arguments.length?(n=h,d()):n},u.unknown=function(h){return arguments.length?(o=h,u):o},function(h,f){return i=h,r=f,d()}}function ER(t,e,n,i){var r=iC(t,e,n),o;switch(i=ea(i??",f"),i.type){case"s":{var s=Math.max(Math.abs(t),Math.abs(e));return i.precision==null&&!isNaN(o=gR(r,s))&&(i.precision=o),ay(i,s)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(o=pR(r,Math.max(Math.abs(t),Math.abs(e))))&&(i.precision=o-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(o=fR(r))&&(i.precision=o-(i.type==="%")*2);break}}return sy(i)}function dy(t){var e=t.domain;return t.ticks=function(n){var i=e();return nC(i[0],i[i.length-1],n??10)},t.tickFormat=function(n,i){var r=e();return ER(r[0],r[r.length-1],n??10,i)},t.nice=function(n){n==null&&(n=10);var i=e(),r=0,o=i.length-1,s=i[r],a=i[o],l,c,d=10;for(a<s&&(c=s,s=a,a=c,c=r,r=o,o=c);d-- >0;){if(c=vc(s,a,n),c===l)return i[r]=s,i[o]=a,e(i);if(c>0)s=Math.floor(s/c)*c,a=Math.ceil(a/c)*c;else if(c<0)s=Math.ceil(s*c)/c,a=Math.floor(a*c)/c;else break;l=c}return t},t}function of(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function AR(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function CR(t){return t<0?-t*t:t*t}function SR(t){var e=t(wn,wn),n=1;function i(){return n===1?t(wn,wn):n===.5?t(AR,CR):t(of(n),of(1/n))}return e.exponent=function(r){return arguments.length?(n=+r,i()):n},dy(e)}function uy(){var t=SR(kR());return t.copy=function(){return xR(t,uy()).exponent(t.exponent())},ly.apply(t,arguments),t}function TR(){var t=0,e=1,n,i,r,o,s=wn,a=!1,l;function c(u){return u==null||isNaN(u=+u)?l:s(r===0?.5:(u=(o(u)-n)*r,a?Math.max(0,Math.min(1,u)):u))}c.domain=function(u){return arguments.length?([t,e]=u,n=o(t=+t),i=o(e=+e),r=n===i?0:1/(i-n),c):[t,e]},c.clamp=function(u){return arguments.length?(a=!!u,c):a},c.interpolator=function(u){return arguments.length?(s=u,c):s};function d(u){return function(h){var f,p;return arguments.length?([f,p]=h,s=u(f,p),c):[s(0),s(1)]}}return c.range=d(Sa),c.rangeRound=d(Hm),c.unknown=function(u){return arguments.length?(l=u,c):l},function(u){return o=u,n=u(t),i=u(e),r=n===i?0:1/(i-n),c}}function NR(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function hy(){var t=dy(TR()(wn));return t.copy=function(){return NR(t,hy())},mR.apply(t,arguments)}function Ra(t){for(var e=t.length/6|0,n=new Array(e),i=0;i<e;)n[i]="#"+t.slice(i*6,++i*6);return n}function La(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}const RR=La(Ra("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));La(Ra("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf"));La(Ra("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4"));La(Ra("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));const ts=t=>()=>t;function LR(t,{sourceEvent:e,target:n,transform:i,dispatch:r}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:r}})}function Un(t,e,n){this.k=t,this.x=e,this.y=n}Un.prototype={constructor:Un,scale:function(t){return t===1?this:new Un(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new Un(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Ia=new Un(1,0,0);fy.prototype=Un.prototype;function fy(t){for(;!t.__zoom;)if(!(t=t.parentNode))return Ia;return t.__zoom}function yl(t){t.stopImmediatePropagation()}function $r(t){t.preventDefault(),t.stopImmediatePropagation()}function IR(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function PR(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function sf(){return this.__zoom||Ia}function DR(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function MR(){return navigator.maxTouchPoints||"ontouchstart"in this}function OR(t,e,n){var i=t.invertX(e[0][0])-n[0][0],r=t.invertX(e[1][0])-n[1][0],o=t.invertY(e[0][1])-n[0][1],s=t.invertY(e[1][1])-n[1][1];return t.translate(r>i?(i+r)/2:Math.min(0,i)||Math.max(0,r),s>o?(o+s)/2:Math.min(0,o)||Math.max(0,s))}function GR(){var t=IR,e=PR,n=OR,i=DR,r=MR,o=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],a=250,l=wT,c=Mo("start","zoom","end"),d,u,h,f=500,p=150,m=0,w=10;function _(E){E.property("__zoom",sf).on("wheel.zoom",M,{passive:!1}).on("mousedown.zoom",I).on("dblclick.zoom",D).filter(r).on("touchstart.zoom",O).on("touchmove.zoom",$).on("touchend.zoom touchcancel.zoom",j).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}_.transform=function(E,R,L,G){var B=E.selection?E.selection():E;B.property("__zoom",sf),E!==B?C(E,R,L,G):B.interrupt().each(function(){A(this,arguments).event(G).start().zoom(null,typeof R=="function"?R.apply(this,arguments):R).end()})},_.scaleBy=function(E,R,L,G){_.scaleTo(E,function(){var B=this.__zoom.k,q=typeof R=="function"?R.apply(this,arguments):R;return B*q},L,G)},_.scaleTo=function(E,R,L,G){_.transform(E,function(){var B=e.apply(this,arguments),q=this.__zoom,ee=L==null?v(B):typeof L=="function"?L.apply(this,arguments):L,fe=q.invert(ee),_e=typeof R=="function"?R.apply(this,arguments):R;return n(k(x(q,_e),ee,fe),B,s)},L,G)},_.translateBy=function(E,R,L,G){_.transform(E,function(){return n(this.__zoom.translate(typeof R=="function"?R.apply(this,arguments):R,typeof L=="function"?L.apply(this,arguments):L),e.apply(this,arguments),s)},null,G)},_.translateTo=function(E,R,L,G,B){_.transform(E,function(){var q=e.apply(this,arguments),ee=this.__zoom,fe=G==null?v(q):typeof G=="function"?G.apply(this,arguments):G;return n(Ia.translate(fe[0],fe[1]).scale(ee.k).translate(typeof R=="function"?-R.apply(this,arguments):-R,typeof L=="function"?-L.apply(this,arguments):-L),q,s)},G,B)};function x(E,R){return R=Math.max(o[0],Math.min(o[1],R)),R===E.k?E:new Un(R,E.x,E.y)}function k(E,R,L){var G=R[0]-L[0]*E.k,B=R[1]-L[1]*E.k;return G===E.x&&B===E.y?E:new Un(E.k,G,B)}function v(E){return[(+E[0][0]+ +E[1][0])/2,(+E[0][1]+ +E[1][1])/2]}function C(E,R,L,G){E.on("start.zoom",function(){A(this,arguments).event(G).start()}).on("interrupt.zoom end.zoom",function(){A(this,arguments).event(G).end()}).tween("zoom",function(){var B=this,q=arguments,ee=A(B,q).event(G),fe=e.apply(B,q),_e=L==null?v(fe):typeof L=="function"?L.apply(B,q):L,ke=Math.max(fe[1][0]-fe[0][0],fe[1][1]-fe[0][1]),V=B.__zoom,le=typeof R=="function"?R.apply(B,q):R,pe=l(V.invert(_e).concat(ke/V.k),le.invert(_e).concat(ke/le.k));return function(U){if(U===1)U=le;else{var te=pe(U),z=ke/te[2];U=new Un(z,_e[0]-te[0]*z,_e[1]-te[1]*z)}ee.zoom(null,U)}})}function A(E,R,L){return!L&&E.__zooming||new S(E,R)}function S(E,R){this.that=E,this.args=R,this.active=0,this.sourceEvent=null,this.extent=e.apply(E,R),this.taps=0}S.prototype={event:function(E){return E&&(this.sourceEvent=E),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(E,R){return this.mouse&&E!=="mouse"&&(this.mouse[1]=R.invert(this.mouse[0])),this.touch0&&E!=="touch"&&(this.touch0[1]=R.invert(this.touch0[0])),this.touch1&&E!=="touch"&&(this.touch1[1]=R.invert(this.touch1[0])),this.that.__zoom=R,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(E){var R=Mt(this.that).datum();c.call(E,this.that,new LR(E,{sourceEvent:this.sourceEvent,target:_,transform:this.that.__zoom,dispatch:c}),R)}};function M(E,...R){if(!t.apply(this,arguments))return;var L=A(this,R).event(E),G=this.__zoom,B=Math.max(o[0],Math.min(o[1],G.k*Math.pow(2,i.apply(this,arguments)))),q=On(E);if(L.wheel)(L.mouse[0][0]!==q[0]||L.mouse[0][1]!==q[1])&&(L.mouse[1]=G.invert(L.mouse[0]=q)),clearTimeout(L.wheel);else{if(G.k===B)return;L.mouse=[q,G.invert(q)],xs(this),L.start()}$r(E),L.wheel=setTimeout(ee,p),L.zoom("mouse",n(k(x(G,B),L.mouse[0],L.mouse[1]),L.extent,s));function ee(){L.wheel=null,L.end()}}function I(E,...R){if(h||!t.apply(this,arguments))return;var L=E.currentTarget,G=A(this,R,!0).event(E),B=Mt(E.view).on("mousemove.zoom",_e,!0).on("mouseup.zoom",ke,!0),q=On(E,L),ee=E.clientX,fe=E.clientY;$m(E.view),yl(E),G.mouse=[q,this.__zoom.invert(q)],xs(this),G.start();function _e(V){if($r(V),!G.moved){var le=V.clientX-ee,pe=V.clientY-fe;G.moved=le*le+pe*pe>m}G.event(V).zoom("mouse",n(k(G.that.__zoom,G.mouse[0]=On(V,L),G.mouse[1]),G.extent,s))}function ke(V){B.on("mousemove.zoom mouseup.zoom",null),zm(V.view,G.moved),$r(V),G.event(V).end()}}function D(E,...R){if(t.apply(this,arguments)){var L=this.__zoom,G=On(E.changedTouches?E.changedTouches[0]:E,this),B=L.invert(G),q=L.k*(E.shiftKey?.5:2),ee=n(k(x(L,q),G,B),e.apply(this,R),s);$r(E),a>0?Mt(this).transition().duration(a).call(C,ee,G,E):Mt(this).call(_.transform,ee,G,E)}}function O(E,...R){if(t.apply(this,arguments)){var L=E.touches,G=L.length,B=A(this,R,E.changedTouches.length===G).event(E),q,ee,fe,_e;for(yl(E),ee=0;ee<G;++ee)fe=L[ee],_e=On(fe,this),_e=[_e,this.__zoom.invert(_e),fe.identifier],B.touch0?!B.touch1&&B.touch0[2]!==_e[2]&&(B.touch1=_e,B.taps=0):(B.touch0=_e,q=!0,B.taps=1+!!d);d&&(d=clearTimeout(d)),q&&(B.taps<2&&(u=_e[0],d=setTimeout(function(){d=null},f)),xs(this),B.start())}}function $(E,...R){if(this.__zooming){var L=A(this,R).event(E),G=E.changedTouches,B=G.length,q,ee,fe,_e;for($r(E),q=0;q<B;++q)ee=G[q],fe=On(ee,this),L.touch0&&L.touch0[2]===ee.identifier?L.touch0[0]=fe:L.touch1&&L.touch1[2]===ee.identifier&&(L.touch1[0]=fe);if(ee=L.that.__zoom,L.touch1){var ke=L.touch0[0],V=L.touch0[1],le=L.touch1[0],pe=L.touch1[1],U=(U=le[0]-ke[0])*U+(U=le[1]-ke[1])*U,te=(te=pe[0]-V[0])*te+(te=pe[1]-V[1])*te;ee=x(ee,Math.sqrt(U/te)),fe=[(ke[0]+le[0])/2,(ke[1]+le[1])/2],_e=[(V[0]+pe[0])/2,(V[1]+pe[1])/2]}else if(L.touch0)fe=L.touch0[0],_e=L.touch0[1];else return;L.zoom("touch",n(k(ee,fe,_e),L.extent,s))}}function j(E,...R){if(this.__zooming){var L=A(this,R).event(E),G=E.changedTouches,B=G.length,q,ee;for(yl(E),h&&clearTimeout(h),h=setTimeout(function(){h=null},f),q=0;q<B;++q)ee=G[q],L.touch0&&L.touch0[2]===ee.identifier?delete L.touch0:L.touch1&&L.touch1[2]===ee.identifier&&delete L.touch1;if(L.touch1&&!L.touch0&&(L.touch0=L.touch1,delete L.touch1),L.touch0)L.touch0[1]=this.__zoom.invert(L.touch0[0]);else if(L.end(),L.taps===2&&(ee=On(ee,this),Math.hypot(u[0]-ee[0],u[1]-ee[1])<w)){var fe=Mt(this).on("dblclick.zoom");fe&&fe.apply(this,arguments)}}}return _.wheelDelta=function(E){return arguments.length?(i=typeof E=="function"?E:ts(+E),_):i},_.filter=function(E){return arguments.length?(t=typeof E=="function"?E:ts(!!E),_):t},_.touchable=function(E){return arguments.length?(r=typeof E=="function"?E:ts(!!E),_):r},_.extent=function(E){return arguments.length?(e=typeof E=="function"?E:ts([[+E[0][0],+E[0][1]],[+E[1][0],+E[1][1]]]),_):e},_.scaleExtent=function(E){return arguments.length?(o[0]=+E[0],o[1]=+E[1],_):[o[0],o[1]]},_.translateExtent=function(E){return arguments.length?(s[0][0]=+E[0][0],s[1][0]=+E[1][0],s[0][1]=+E[0][1],s[1][1]=+E[1][1],_):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},_.constrain=function(E){return arguments.length?(n=E,_):n},_.duration=function(E){return arguments.length?(a=+E,_):a},_.interpolate=function(E){return arguments.length?(l=E,_):l},_.on=function(){var E=c.on.apply(c,arguments);return E===c?_:E},_.clickDistance=function(E){return arguments.length?(m=(E=+E)*E,_):Math.sqrt(m)},_.tapDistance=function(E){return arguments.length?(w=+E,_):w},_}const Fe={WIDTH:800,HEIGHT:600,NODE_RADIUS:8,LINK_DISTANCE:100,CHARGE_STRENGTH:-300,MIN_RADIUS:5,MAX_RADIUS:20,COLLISION_PADDING:2,COLLISION_STRENGTH:.7,LINK_STRENGTH:.5,ZOOM_MIN:.1,ZOOM_MAX:4,RESIZE_DEBOUNCE_MS:150,TOOLTIP_PADDING:12,TOOLTIP_DURATION:150,TOOLTIP_MAX_WIDTH:280,DRAG_ALPHA_TARGET:.3,SIMULATION_ALPHA:1,SIMULATION_RESTART_ALPHA:.3,LABEL_VISIBILITY_THRESHOLD:.5};function lt(t){return typeof t=="string"?t:t?.id||String(t)}function ti(t){const e=lt(t.source),n=lt(t.target);return e<n?`${e}-${n}`:`${n}-${e}`}function FR(t,e){let n;return function(...r){const o=()=>{clearTimeout(n),t(...r)};clearTimeout(n),n=setTimeout(o,e)}}class af{constructor(e,n={}){if(this.container=typeof e=="string"?document.querySelector(e):e,!this.container)throw new Error("NetworkGraphD3: Container not found");this.log=Et({prefix:"NetworkGraphD3",level:"info"}),this.options={width:n.width||Fe.WIDTH,height:n.height||Fe.HEIGHT,nodeRadius:n.nodeRadius||Fe.NODE_RADIUS,linkDistance:n.linkDistance||Fe.LINK_DISTANCE,chargeStrength:n.chargeStrength||Fe.CHARGE_STRENGTH,sizeBy:n.sizeBy||null,minRadius:n.minRadius||Fe.MIN_RADIUS,maxRadius:n.maxRadius||Fe.MAX_RADIUS,colorBy:n.colorBy||"group",colorScheme:n.colorScheme||"categorical",showLabels:n.showLabels!==!1,tooltipBuilder:n.tooltipBuilder||null,renderMode:n.renderMode||"colors",...n},this.options.minRadius>=this.options.maxRadius&&(this.log.warn("minRadius should be less than maxRadius, adjusting..."),this.options.minRadius=Math.min(this.options.minRadius,this.options.maxRadius-1)),this.data={nodes:[],links:[]},this.svg=null,this.simulation=null,this.isDestroyed=!1,this.isReady=!1,this.isRendering=!1,this.selectedNode=null,this.sizeScale=null,this.colorScale=null,this.resizeHandler=null,this.darkModeQuery=null,this.darkModeHandler=null,this.tooltip=null,this.currentTooltipNode=null,this.linkKeyCache=new Map,this.stabilizationCheckFrame=null,this.lastAlpha=1,this.stableTickCount=0,this.requiredStableTicks=10,this.stabilizationThreshold=.01,this.init()}init(){this.log.debug("Initializing graph",{width:this.options.width,height:this.options.height}),this.svg=Mt(this.container).append("svg").attr("width",this.options.width).attr("height",this.options.height).attr("viewBox",`0 0 ${this.options.width} ${this.options.height}`).attr("preserveAspectRatio","xMidYMid meet").attr("role","img").attr("aria-label","Network graph visualization").style("background","transparent").style("opacity",0).style("visibility","hidden").attr("class","network-graph-svg"),this.g=this.svg.append("g").attr("class","main-group"),this.linkGroup=this.g.append("g").attr("class","links").attr("aria-label","Graph links"),this.nodeGroup=this.g.append("g").attr("class","nodes").attr("aria-label","Graph nodes"),this.options.showLabels&&(this.labelGroup=this.g.append("g").attr("class","labels").attr("aria-label","Node labels")),this.createTooltip(),this.zoomBehavior=GR().scaleExtent([Fe.ZOOM_MIN,Fe.ZOOM_MAX]).on("zoom",e=>{this.g.attr("transform",e.transform),this.currentZoom=e.transform.k,this.updateLabelVisibility()}),this.svg.call(this.zoomBehavior),this.currentZoom=1,this.svg.on("click",e=>{e.target===this.svg.node()&&this.deselectNode()}),this.simulation=iy().force("link",ny().id(e=>e.id).distance(this.options.linkDistance).strength(Fe.LINK_STRENGTH)).force("charge",ry().strength(this.options.chargeStrength)).force("center",Sc(this.options.width/2,this.options.height/2)).force("collision",ty().radius(e=>this.getNodeRadius(e)+Fe.COLLISION_PADDING).strength(Fe.COLLISION_STRENGTH)).on("tick",()=>this.onTick()).on("end",()=>this.onSimulationEnd()),this.resizeHandler=FR(()=>this.handleResize(),Fe.RESIZE_DEBOUNCE_MS),window.addEventListener("resize",this.resizeHandler)}setData(e,n){if(this.isDestroyed){this.log.warn("Cannot set data on destroyed instance");return}if(!Array.isArray(e))throw new Error("NetworkGraphD3: nodes must be an array");if(!Array.isArray(n))throw new Error("NetworkGraphD3: links must be an array");const i=e.filter(r=>!r||!r.id);i.length>0&&this.log.warn(`Found ${i.length} nodes without id property`),this.log.debug("Setting graph data",{nodeCount:e.length,linkCount:n.length}),this.data.nodes=e,this.data.links=n.map(r=>({...r,source:lt(r.source),target:lt(r.target)})),this.linkKeyCache.clear(),this.selectedNode=null,this.computeScales(),this.updateGraph()}computeScales(){if(!this.data.nodes||this.data.nodes.length===0){this.sizeScale=null,this.colorScale=null;return}if(this.options.sizeBy){const i=this.data.nodes.map(r=>r[this.options.sizeBy]).filter(r=>r!=null);if(i.length>0){let r=Math.min(...i),o=Math.max(...i);r===o&&(o=r+1);const s=this.options.sizeExponent||.4;this.sizeScale=uy().exponent(s).domain([r,o]).range([this.options.minRadius,this.options.maxRadius]).clamp(!0)}else this.sizeScale=null}else this.sizeScale=null;const e=this.options.colorBy;if(!e){this.colorScale=null;return}const n=this.data.nodes.map(i=>i[e]).filter(i=>i!=null);if(n.length>0){const i=n.every(s=>typeof s=="number"),r=["group","community"].includes(e);if(this.options.colorScheme==="sequential"||i&&!r){const s=Math.min(...n),a=Math.max(...n);this.colorScale=hy(RR).domain([s,a])}else{const s=[...new Set(n)].sort((l,c)=>typeof l=="number"&&typeof c=="number"?l-c:String(l).localeCompare(String(c))),a=["#3b82f6","#10b981","#f59e0b","#ef4444","#6366f1","#ec4899","#06b6d4","#f97316","#14b8a6","#a855f7"];this.colorScale=cy().domain(s).range(a).unknown(a[0])}}else this.colorScale=null}updateVisualEncoding(e={}){e.sizeBy!==void 0&&(this.options.sizeBy=e.sizeBy),e.minRadius!==void 0&&(this.options.minRadius=e.minRadius),e.maxRadius!==void 0&&(this.options.maxRadius=e.maxRadius),e.colorBy!==void 0&&(this.options.colorBy=e.colorBy),e.colorScheme!==void 0&&(this.options.colorScheme=e.colorScheme);const n=e.preserveZoom!==!1;let i=null;n&&this.g&&(i=fy(this.svg.node())),this.computeScales(),this.svg&&this.isReady&&this.svg.style("opacity",1).style("visibility","visible"),this.node&&this.node.attr("r",r=>this.getNodeRadius(r)).attr("fill",r=>this.getNodeColor(r)),this.simulation&&this.simulation.force("collision").radius(r=>this.getNodeRadius(r)+Fe.COLLISION_PADDING),n&&i&&this.zoomBehavior&&this.svg&&(this.svg.call(this.zoomBehavior.transform,i),this.g.attr("transform",i),this.currentZoom=i.k)}setRenderMode(e){if(e!=="colors"&&e!=="avatars"){this.log.warn(`Invalid render mode: ${e}. Must be 'colors' or 'avatars'`);return}this.options.renderMode=e,this.log.debug(`Render mode changed to: ${e}`),this.nodeGroup&&(this.nodeGroup.selectAll("circle").remove(),this.nodeGroup.selectAll("text").remove(),this.node=null),this.labelGroup&&(this.labelGroup.selectAll("text").remove(),this.label=null),this.updateGraph()}updateNodeStatistics(e,n="eigenvector",i=!0){if(!e||!Array.isArray(e)){this.log.warn("updateNodeStatistics: enrichedNodes must be an array");return}this.svg&&this.isReady&&this.svg.style("opacity",1).style("visibility","visible");const r=new Map;e.forEach(s=>{r.set(s.id,s)});let o=!1;this.data.nodes.forEach(s=>{const a=r.get(s.id);a&&(Object.keys(a).forEach(l=>{l!=="x"&&l!=="y"&&l!=="vx"&&l!=="vy"&&l!=="fx"&&l!=="fy"&&(s[l]=a[l])}),a.eigenvector!==void 0&&(o=!0))}),o&&n==="eigenvector"?this.updateVisualEncoding({sizeBy:"eigenvector",preserveZoom:i}):(this.computeScales(),this.node&&this.node.attr("r",s=>this.getNodeRadius(s)).attr("fill",s=>this.getNodeColor(s)),this.simulation&&this.simulation.force("collision").radius(s=>this.getNodeRadius(s)+Fe.COLLISION_PADDING)),this.log.debug("Node statistics updated",{nodeCount:e.length,sizingBy:o?n:"none"})}updateCliqueEdgeColors(e){if(!this.data||!this.data.nodes||!this.data.links)return;const n="#ef4444",i="var(--color-border)",r=new Map;this.data.nodes.forEach(s=>{const a=String(s.id);r.set(a,new Set)}),this.data.links.forEach(s=>{const a=lt(s.source),l=lt(s.target);r.has(a)&&r.get(a).add(l),r.has(l)&&r.get(l).add(a)});const o=(s,a)=>{const l=r.get(s)||new Set,c=r.get(a)||new Set;for(const d of l)if(d!==a&&c.has(d))return!0;return!1};if(this.linkGroup){const s=this.linkGroup.selectAll("line");s.size()>0?(s.attr("stroke",a=>{const l=lt(a.source),c=lt(a.target);return e&&o(l,c)?n:i}),this.log.debug("Updated clique edge colors",{enabled:e,linkCount:s.size()})):this.log.warn("No links found to update colors",{linkGroupExists:!!this.linkGroup})}else this.log.warn("Link group not initialized, cannot update clique edge colors")}updateGraph(){if(!this.data.nodes||!this.data.links)return;this.isReady=!1,this.isRendering=!1,this.stableTickCount=0,this.lastAlpha=1,this.svg&&this.svg.style("opacity",0).style("visibility","hidden"),this.link=this.linkGroup.selectAll("line").data(this.data.links,r=>ti(r)),this.link.exit().remove();const e=this.link.enter().append("line").attr("stroke","var(--color-border)").attr("stroke-width",2).attr("stroke-opacity",.6).attr("aria-label",r=>`Link from ${lt(r.source)} to ${lt(r.target)}`);this.link=e.merge(this.link);const n=this.options.renderMode==="avatars"?"text":"circle";this.node=this.nodeGroup.selectAll(n).data(this.data.nodes,r=>r.id),this.node.exit().remove();const i=this.node.enter().append(n);if(this.options.renderMode==="avatars"?i.attr("text-anchor","middle").attr("dominant-baseline","central").attr("font-size",r=>`${this.getNodeRadius(r)*2}px`).attr("cursor","pointer").attr("role","button").attr("tabindex",0).attr("aria-label",r=>`Node ${r.id}`).text(r=>r.avatar||"").attr("stroke",r=>this.getNodeStrokeColor(r)).attr("stroke-width",r=>this.getNodeStrokeWidth(r)*.5).attr("paint-order","stroke").call(this.createDragBehavior()).on("mouseover",(r,o)=>this.onNodeMouseOver(r,o)).on("mouseout",(r,o)=>this.onNodeMouseOut(r,o)).on("click",(r,o)=>{r.stopPropagation(),this.toggleNodeSelection(o),this.emit("nodeClick",o)}).on("keydown",(r,o)=>{(r.key==="Enter"||r.key===" ")&&(r.preventDefault(),this.toggleNodeSelection(o),this.emit("nodeClick",o))}):i.attr("r",r=>this.getNodeRadius(r)).attr("fill",r=>this.getNodeColor(r)).attr("stroke","#fff").attr("stroke-width",2).attr("cursor","pointer").attr("role","button").attr("tabindex",0).attr("aria-label",r=>`Node ${r.id}`).call(this.createDragBehavior()).on("mouseover",(r,o)=>this.onNodeMouseOver(r,o)).on("mouseout",(r,o)=>this.onNodeMouseOut(r,o)).on("click",(r,o)=>{r.stopPropagation(),this.toggleNodeSelection(o),this.emit("nodeClick",o)}).on("keydown",(r,o)=>{(r.key==="Enter"||r.key===" ")&&(r.preventDefault(),this.toggleNodeSelection(o),this.emit("nodeClick",o))}),this.node=i.merge(this.node),this.options.renderMode==="avatars"?this.node.attr("font-size",r=>`${this.getNodeRadius(r)*2}px`).text(r=>r.avatar||"").attr("stroke",r=>this.getNodeStrokeColor(r)).attr("stroke-width",r=>this.getNodeStrokeWidth(r)*.5):this.node.attr("r",r=>this.getNodeRadius(r)).attr("fill",r=>this.getNodeColor(r)).attr("stroke",r=>this.getNodeStrokeColor(r)).attr("stroke-width",r=>this.getNodeStrokeWidth(r)),this.simulation.force("collision").radius(r=>this.getNodeRadius(r)+Fe.COLLISION_PADDING),this.options.showLabels&&this.labelGroup){this.label=this.labelGroup.selectAll("text").data(this.data.nodes,o=>o.id),this.label.exit().remove();const r=this.label.enter().append("text").text(o=>o.id).attr("font-size","12px").attr("text-anchor","middle").attr("dx",0).attr("dy",o=>this.getNodeRadius(o)+15).attr("fill","var(--color-text-primary)").style("pointer-events","none").style("user-select","none").attr("aria-hidden","true");this.label=r.merge(this.label),this.label.attr("dy",o=>this.getNodeRadius(o)+15),this.updateLabelVisibility()}this.simulation.nodes(this.data.nodes),this.simulation.force("link").links(this.data.links),requestAnimationFrame(()=>{this.isRendering=!0,this.simulation.alpha(Fe.SIMULATION_ALPHA).restart()})}onTick(){this.isDestroyed||!this.isRendering&&!this.isReady||(this.link&&this.link.attr("x1",e=>e.source.x).attr("y1",e=>e.source.y).attr("x2",e=>e.target.x).attr("y2",e=>e.target.y),this.node&&(this.options.renderMode==="avatars"?this.node.attr("x",e=>e.x).attr("y",e=>e.y):this.node.attr("cx",e=>e.x).attr("cy",e=>e.y)),this.label&&this.label.attr("x",e=>e.x).attr("y",e=>e.y),!this.isReady&&this.simulation&&this.checkStabilization())}checkStabilization(){if(!this.simulation||this.isDestroyed)return;const e=this.simulation.alpha();e<this.stabilizationThreshold?this.stableTickCount++:this.stableTickCount=0,this.stableTickCount>=this.requiredStableTicks?this.markAsReady():this.stabilizationCheckFrame||(this.stabilizationCheckFrame=requestAnimationFrame(()=>{this.stabilizationCheckFrame=null})),this.lastAlpha=e}onSimulationEnd(){this.isDestroyed||this.markAsReady()}markAsReady(){this.isReady||this.isDestroyed||(this.log.debug("Graph marked as ready"),this.isReady=!0,this.isRendering=!0,this.svg&&this.svg.style("opacity",1).style("visibility","visible"),this.stabilizationCheckFrame&&(cancelAnimationFrame(this.stabilizationCheckFrame),this.stabilizationCheckFrame=null),requestAnimationFrame(()=>{requestAnimationFrame(()=>{this.fitToView(),this.emit("ready")})}))}createDragBehavior(){return HS().on("start",(e,n)=>{e.active||this.simulation.alphaTarget(Fe.DRAG_ALPHA_TARGET).restart(),n.fx=n.x,n.fy=n.y,this.emit("nodeDragStart",n)}).on("drag",(e,n)=>{n.fx=e.x,n.fy=e.y,this.emit("nodeDrag",n)}).on("end",(e,n)=>{e.active||this.simulation.alphaTarget(0),this.emit("nodeDragEnd",n)})}isDarkMode(){return document.documentElement.classList.contains("dark")||window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches}updateTooltipStyles(e){this.tooltip&&this.tooltip.style("background",e?"rgba(17, 24, 39, 0.95)":"rgba(0, 0, 0, 0.9)").style("color",e?"#f9fafb":"#fff").style("box-shadow",e?"0 4px 12px rgba(0, 0, 0, 0.5)":"0 4px 12px rgba(0, 0, 0, 0.3)").style("border",e?"1px solid rgba(255, 255, 255, 0.1)":"1px solid rgba(255, 255, 255, 0.2)")}createTooltip(){this.tooltip&&this.tooltip.remove(),this.darkModeQuery&&this.darkModeHandler&&this.darkModeQuery.removeEventListener("change",this.darkModeHandler);const e=this.isDarkMode();this.tooltip=Mt("body").append("div").attr("class","network-graph-tooltip").attr("role","tooltip").attr("aria-hidden","true").style("position","absolute").style("padding","10px 14px").style("border-radius","8px").style("font-size","12px").style("font-family","system-ui, -apple-system, sans-serif").style("pointer-events","none").style("opacity",0).style("visibility","hidden").style("z-index",1e3).style("max-width",`${Fe.TOOLTIP_MAX_WIDTH}px`).style("line-height","1.6").style("backdrop-filter","blur(8px)"),this.updateTooltipStyles(e),window.matchMedia&&(this.darkModeQuery=window.matchMedia("(prefers-color-scheme: dark)"),this.darkModeHandler=n=>{!this.isDestroyed&&this.tooltip&&this.updateTooltipStyles(n.matches)},this.darkModeQuery.addEventListener("change",this.darkModeHandler))}showTooltip(e,n){if(!this.tooltip||this.isDestroyed)return;const i=this.options.tooltipBuilder?this.options.tooltipBuilder(n):this.buildTooltipContent(n);this.tooltip.html(i);const r=e.clientX||e.pageX,o=e.clientY||e.pageY;this.tooltip.style("opacity",0).style("visibility","visible").attr("aria-hidden","false");const s=this.tooltip.node();if(!s)return;const a=s.offsetWidth||200,l=s.offsetHeight||100,c=Fe.TOOLTIP_PADDING;let d=r+c,u=o-l-c;const h=window.innerWidth,f=window.innerHeight;d+a>h-c&&(d=r-a-c),d<c&&(d=r+c),u<c&&(u=o+c),u+l>f-c&&(u=o-l-c),this.tooltip.style("left",`${d}px`).style("top",`${u}px`).transition().duration(Fe.TOOLTIP_DURATION).style("opacity",1),this.currentTooltipNode=n}hideTooltip(){this.tooltip&&(this.tooltip.transition().duration(Fe.TOOLTIP_DURATION).style("opacity",0).on("end",function(){Mt(this).style("visibility","hidden").attr("aria-hidden","true")}),this.currentTooltipNode=null)}updateLabelVisibility(){if(!this.label||!this.options.showLabels)return;const e=this.currentZoom>=Fe.LABEL_VISIBILITY_THRESHOLD;this.label.style("opacity",e?1:0).style("visibility",e?"visible":"hidden")}buildTooltipContent(e){if(!e)return"";const n=[];n.push(`<div style="font-weight: 600; margin-bottom: 6px; font-size: 13px;"> ${e.id}</div>`);const i=new Set(["id","x","y","fx","fy","vx","vy","index","__data__","__transition__"]),r=["relationship","gender","avatar","group","community"],o=["degree","eigenvector","betweenness","clustering","closeness","centrality"];r.forEach(l=>{if(e[l]!==void 0&&e[l]!==null&&!i.has(l)){const c=e[l];let d=l.charAt(0).toUpperCase()+l.slice(1).replace(/_/g," ");if(l==="relationship")n.push(`<div style="margin-bottom: 3px;"><strong> Relationship:</strong> ${this.escapeHtml(c)}</div>`);else if(l==="gender"){const h={male:{emoji:"",text:"Male"},female:{emoji:"",text:"Female"},other:{emoji:"",text:"Other"}}[c]||{emoji:"",text:c};n.push(`<div style="margin-bottom: 3px;"><strong>Gender:</strong> ${h.emoji} ${h.text}</div>`)}else l==="avatar"?n.push(`<div style="margin-bottom: 3px;"><strong>Avatar:</strong> ${c}</div>`):l==="group"?n.push(`<div style="margin-bottom: 3px;"><strong>Group:</strong> ${c}</div>`):l==="community"?n.push(`<div style="margin-bottom: 3px;"><strong> Community:</strong> ${c}</div>`):n.push(`<div style="margin-bottom: 3px;"><strong>${d}:</strong> ${this.escapeHtml(String(c))}</div>`)}}),o.forEach(l=>{if(e[l]!==void 0&&e[l]!==null&&!i.has(l)){const c=e[l],d=l.charAt(0).toUpperCase()+l.slice(1).replace(/_/g," ");if(l==="centrality"&&e.eigenvector!==void 0)return;typeof c=="number"?n.push(`<div style="margin-bottom: 2px;"><strong>${d}:</strong> ${c.toFixed(4)}</div>`):n.push(`<div style="margin-bottom: 2px;"><strong>${d}:</strong> ${this.escapeHtml(String(c))}</div>`)}});const s=new Set([...r,...o,"x","y"]),a=Object.keys(e).filter(l=>!i.has(l)&&!s.has(l)&&e[l]!==void 0&&e[l]!==null&&typeof e[l]!="function"&&!l.startsWith("__")).sort();return a.length>0&&(n.push(`<div style="margin-top: 6px; padding-top: 6px; border-top: 1px solid ${this.isDarkMode()?"rgba(255,255,255,0.15)":"rgba(0,0,0,0.1)"}; font-size: 11px;">`),n.push(`<div style="margin-bottom: 4px; font-weight: 600; color: ${this.isDarkMode()?"rgba(249,250,251,0.8)":"rgba(0,0,0,0.7)"};">Other Properties:</div>`),a.forEach(l=>{const c=e[l];let d;typeof c=="object"&&c!==null?Array.isArray(c)?d=`[${c.length} items]`:d=`{${Object.keys(c).length} keys}`:d=String(c);const u=l.charAt(0).toUpperCase()+l.slice(1).replace(/_/g," ");n.push(`<div style="margin-bottom: 2px; font-family: monospace; font-size: 10px;"><strong>${u}:</strong> ${this.escapeHtml(d)}</div>`)}),n.push("</div>")),e.x!==void 0&&e.y,n.join("")}escapeHtml(e){const n=document.createElement("div");return n.textContent=e,n.innerHTML}onNodeMouseOver(e,n){Mt(e.currentTarget).attr("stroke-width",4).attr("stroke","#fbbf24"),this.showTooltip(e,n),this.emit("nodeHover",n)}onNodeMouseOut(e,n){Mt(e.currentTarget).attr("stroke-width",this.getNodeStrokeWidth(n)).attr("stroke",this.getNodeStrokeColor(n)),this.hideTooltip(),this.emit("nodeLeave",n)}getNodeRadius(e){if(this.options.sizeBy&&this.sizeScale){const n=e[this.options.sizeBy];if(n!=null)return this.sizeScale(n)}return this.options.nodeRadius}getNodeColor(e){if(this.options.customColorFunction){const o=this.options.customColorFunction(e);if(o)return o}const n=this.options.colorBy;if(this.colorScale){const o=e[n];if(o!=null)return this.colorScale(o)}const i=e.group||0,r=["#3b82f6","#10b981","#f59e0b","#ef4444","#6366f1","#ec4899","#06b6d4","#f97316","#14b8a6","#a855f7"];return r[(i-1)%r.length]}getNodeStrokeColor(e){return this.selectedNode&&this.selectedNode.id===e.id?"#fb923c":"#fff"}getNodeStrokeWidth(e){return this.selectedNode&&this.selectedNode.id===e.id?3:2}toggleNodeSelection(e){this.selectedNode&&this.selectedNode.id===e.id?this.deselectNode():this.selectNode(e)}selectNode(e){if(!e)return;const n=this.selectedNode;n&&(n.fx=null,n.fy=null),this.selectedNode=e,this.node&&this.node.attr("stroke",i=>this.getNodeStrokeColor(i)).attr("stroke-width",i=>this.getNodeStrokeWidth(i)),this.log.debug("Node selected",{nodeId:e.id}),this.emit("nodeSelected",{node:e,previousSelection:n})}deselectNode(){if(!this.selectedNode)return;const e=this.selectedNode;e.fx=null,e.fy=null,this.selectedNode=null,this.node&&this.node.attr("stroke",n=>this.getNodeStrokeColor(n)).attr("stroke-width",n=>this.getNodeStrokeWidth(n)),this.simulation&&this.simulation.alpha(.3).restart(),this.log.debug("Node deselected",{nodeId:e.id}),this.emit("nodeDeselected",{previousSelection:e})}getSelectedNode(){return this.selectedNode}handleResize(){if(this.isDestroyed||!this.container)return;const e=this.container.getBoundingClientRect(),n=e.width||this.options.width,i=e.height||this.options.height;n===this.options.width&&i===this.options.height||(this.options.width=n,this.options.height=i,this.svg&&this.svg.attr("width",n).attr("height",i).attr("viewBox",`0 0 ${n} ${i}`),this.simulation&&this.simulation.force("center",Sc(n/2,i/2)).alpha(Fe.SIMULATION_RESTART_ALPHA).restart(),this.emit("resize",{width:n,height:i}))}emit(e,n){this.eventHandlers&&this.eventHandlers[e]&&this.eventHandlers[e].forEach(i=>i(n))}on(e,n){this.eventHandlers||(this.eventHandlers={}),this.eventHandlers[e]||(this.eventHandlers[e]=[]),this.eventHandlers[e].push(n)}off(e,n){this.eventHandlers&&this.eventHandlers[e]&&(this.eventHandlers[e]=this.eventHandlers[e].filter(i=>i!==n))}addNodeIncremental(e=[],n=null,i=null){const r=n||`Node${this.data.nodes.length+1}`,o=i!==null?i:this.data.nodes.length>0?this.data.nodes[Math.floor(Math.random()*this.data.nodes.length)].group:1;let s=this.options.width/2,a=this.options.height/2;if(e.length>0){const d=this.data.nodes.filter(u=>e.includes(u.id));if(d.length>0){s=d.reduce((f,p)=>f+p.x,0)/d.length,a=d.reduce((f,p)=>f+p.y,0)/d.length;const u=Math.random()*2*Math.PI,h=50+Math.random()*50;s+=Math.cos(u)*h,a+=Math.sin(u)*h}}const l={id:r,group:o,centrality:.5,x:s,y:a,fx:s,fy:a};this.data.nodes.push(l);const c=[];if(e.forEach(d=>{if(this.data.nodes.find(u=>u.id===d)){const u={source:r,target:d};this.data.links.push(u),c.push(u)}}),this.computeScales(),this.nodeGroup){const d=this.options.renderMode==="avatars"?"text":"circle";this.node=this.nodeGroup.selectAll(d).data(this.data.nodes,h=>h.id);const u=this.node.enter().append(d);this.options.renderMode==="avatars"?u.attr("text-anchor","middle").attr("dominant-baseline","central").attr("font-size",h=>`${this.getNodeRadius(h)*2}px`).attr("cursor","pointer").attr("role","button").attr("tabindex",0).attr("aria-label",h=>`Node ${h.id}`).attr("x",h=>h.x).attr("y",h=>h.y).text(h=>h.avatar||"").attr("stroke",h=>this.getNodeStrokeColor(h)).attr("stroke-width",h=>this.getNodeStrokeWidth(h)*.5).attr("paint-order","stroke").call(this.createDragBehavior()).on("mouseover",(h,f)=>this.onNodeMouseOver(h,f)).on("mouseout",(h,f)=>this.onNodeMouseOut(h,f)).on("click",(h,f)=>{h.stopPropagation(),this.toggleNodeSelection(f),this.emit("nodeClick",f)}).on("keydown",(h,f)=>{(h.key==="Enter"||h.key===" ")&&(h.preventDefault(),this.toggleNodeSelection(f),this.emit("nodeClick",f))}):u.attr("r",h=>this.getNodeRadius(h)).attr("fill",h=>this.getNodeColor(h)).attr("stroke","#fff").attr("stroke-width",2).attr("cursor","pointer").attr("role","button").attr("tabindex",0).attr("aria-label",h=>`Node ${h.id}`).attr("cx",h=>h.x).attr("cy",h=>h.y).call(this.createDragBehavior()).on("mouseover",(h,f)=>this.onNodeMouseOver(h,f)).on("mouseout",(h,f)=>this.onNodeMouseOut(h,f)).on("click",(h,f)=>{h.stopPropagation(),this.toggleNodeSelection(f),this.emit("nodeClick",f)}).on("keydown",(h,f)=>{(h.key==="Enter"||h.key===" ")&&(h.preventDefault(),this.toggleNodeSelection(f),this.emit("nodeClick",f))}),this.node=u.merge(this.node),this.options.renderMode==="avatars"?this.node.attr("font-size",h=>`${this.getNodeRadius(h)*2}px`).text(h=>h.avatar||"").attr("stroke",h=>this.getNodeStrokeColor(h)).attr("stroke-width",h=>this.getNodeStrokeWidth(h)*.5):this.node.attr("r",h=>this.getNodeRadius(h)).attr("fill",h=>this.getNodeColor(h)).attr("stroke",h=>this.getNodeStrokeColor(h)).attr("stroke-width",h=>this.getNodeStrokeWidth(h))}if(this.linkGroup&&c.length>0){this.link=this.linkGroup.selectAll("line").data(this.data.links,u=>ti(u));const d=this.link.enter().append("line").attr("stroke","var(--color-border)").attr("stroke-width",2).attr("stroke-opacity",.6).attr("x1",u=>(typeof u.source=="object"?u.source:this.data.nodes.find(f=>f.id===u.source))?.x||0).attr("y1",u=>(typeof u.source=="object"?u.source:this.data.nodes.find(f=>f.id===u.source))?.y||0).attr("x2",u=>(typeof u.target=="object"?u.target:this.data.nodes.find(f=>f.id===u.target))?.x||0).attr("y2",u=>(typeof u.target=="object"?u.target:this.data.nodes.find(f=>f.id===u.target))?.y||0).attr("aria-label",u=>`Link from ${lt(u.source)} to ${lt(u.target)}`);this.link=d.merge(this.link)}if(this.options.showLabels&&this.labelGroup){this.label=this.labelGroup.selectAll("text").data(this.data.nodes,u=>u.id);const d=this.label.enter().append("text").text(u=>u.id).attr("font-size","12px").attr("text-anchor","middle").attr("dx",0).attr("dy",u=>this.getNodeRadius(u)+15).attr("fill","var(--color-text-primary)").attr("x",u=>u.x).attr("y",u=>u.y).style("pointer-events","none").style("user-select","none").attr("aria-hidden","true");this.label=d.merge(this.label),this.label.attr("dy",u=>this.getNodeRadius(u)+15),this.updateLabelVisibility()}return this.simulation.nodes(this.data.nodes),this.simulation.force("link").links(this.data.links),this.simulation.force("collision").radius(d=>this.getNodeRadius(d)+Fe.COLLISION_PADDING),this.isReady?this.simulation.alpha(.3).restart():(this.isRendering=!0,requestAnimationFrame(()=>{this.simulation.alpha(Fe.SIMULATION_ALPHA).restart()})),setTimeout(()=>{const d=this.data.nodes.find(u=>u.id===r);d&&(d.fx=null,d.fy=null,this.simulation.alpha(.3).restart())},1e3),l}addNode(e=[],n=null,i=null){const r=n||`Node${this.data.nodes.length+1}`,o=i!==null?i:this.data.nodes.length>0?this.data.nodes[Math.floor(Math.random()*this.data.nodes.length)].group:1;let s=this.options.width/2,a=this.options.height/2;if(e.length>0){const c=this.data.nodes.filter(d=>e.includes(d.id));if(c.length>0){s=c.reduce((h,f)=>h+f.x,0)/c.length,a=c.reduce((h,f)=>h+f.y,0)/c.length;const d=Math.random()*2*Math.PI,u=50+Math.random()*50;s+=Math.cos(d)*u,a+=Math.sin(d)*u}}const l={id:r,group:o,centrality:.5,x:s,y:a,fx:s,fy:a};return this.data.nodes.push(l),e.forEach(c=>{this.data.nodes.find(d=>d.id===c)&&this.data.links.push({source:r,target:c})}),this.updateGraph(),setTimeout(()=>{const c=this.data.nodes.find(d=>d.id===r);c&&(c.fx=null,c.fy=null,this.simulation.alpha(.3).restart())},1e3),l}removeNode(e){if(!e)if(this.data.nodes.length>0)e=this.data.nodes[Math.floor(Math.random()*this.data.nodes.length)].id;else return!1;const n=this.data.nodes.findIndex(i=>i.id===e);return n===-1?!1:(this.data.nodes.splice(n,1),this.data.links=this.data.links.filter(i=>{const r=lt(i.source),o=lt(i.target);return r!==e&&o!==e}),this.linkKeyCache.clear(),this.updateGraph(),this.emit("nodeRemoved",e),!0)}removeNodeIncremental(e){if(!e)if(this.data.nodes.length>0)e=this.data.nodes[Math.floor(Math.random()*this.data.nodes.length)].id;else return!1;const n=this.data.nodes.findIndex(i=>i.id===e);return n===-1?!1:(this.data.nodes.splice(n,1),this.data.links=this.data.links.filter(i=>{const r=lt(i.source),o=lt(i.target);return r!==e&&o!==e}),this.linkKeyCache.clear(),this.computeScales(),this.nodeGroup&&(this.node=this.nodeGroup.selectAll("circle").data(this.data.nodes,i=>i.id),this.node.exit().remove()),this.linkGroup&&(this.link=this.linkGroup.selectAll("line").data(this.data.links,i=>ti(i)),this.link.exit().remove()),this.options.showLabels&&this.labelGroup&&(this.label=this.labelGroup.selectAll("text").data(this.data.nodes,i=>i.id),this.label.exit().remove()),this.simulation.nodes(this.data.nodes),this.simulation.force("link").links(this.data.links),this.simulation.force("collision").radius(i=>this.getNodeRadius(i)+Fe.COLLISION_PADDING),this.isReady?this.simulation.alpha(.3).restart():(this.isRendering=!0,requestAnimationFrame(()=>{this.simulation.alpha(Fe.SIMULATION_ALPHA).restart()})),this.emit("nodeRemoved",e),!0)}addLinkIncremental(e,n){if(!e||!n)return!1;const i=this.data.nodes.find(l=>l.id===e),r=this.data.nodes.find(l=>l.id===n);if(!i||!r)return this.log.warn(`Cannot add link: nodes ${e} or ${n} not found`),!1;if(e===n)return this.log.warn("Cannot add self-loop"),!1;const o={source:e,target:n},s=ti(o);if(this.data.links.some(l=>ti(l)===s))return this.log.debug(`Link already exists: ${e} -> ${n}`),!1;if(this.data.links.push(o),this.linkGroup){this.link=this.linkGroup.selectAll("line").data(this.data.links,c=>ti(c));const l=this.link.enter().append("line").attr("stroke","var(--color-border)").attr("stroke-width",2).attr("stroke-opacity",.6).attr("x1",c=>(typeof c.source=="object"?c.source:this.data.nodes.find(u=>u.id===c.source))?.x||0).attr("y1",c=>(typeof c.source=="object"?c.source:this.data.nodes.find(u=>u.id===c.source))?.y||0).attr("x2",c=>(typeof c.target=="object"?c.target:this.data.nodes.find(u=>u.id===c.target))?.x||0).attr("y2",c=>(typeof c.target=="object"?c.target:this.data.nodes.find(u=>u.id===c.target))?.y||0).attr("aria-label",c=>`Link from ${lt(c.source)} to ${lt(c.target)}`);this.link=l.merge(this.link)}return this.simulation.force("link").links(this.data.links),this.isReady?this.simulation.alpha(.3).restart():(this.isRendering=!0,requestAnimationFrame(()=>{this.simulation.alpha(Fe.SIMULATION_ALPHA).restart()})),this.emit("linkAdded",{source:e,target:n}),!0}addLink(e,n){if(!e||!n)return!1;const i=this.data.nodes.some(l=>l.id===e),r=this.data.nodes.some(l=>l.id===n);if(!i||!r)return this.log.warn(`Cannot add link: nodes ${e} or ${n} not found`),!1;if(e===n)return this.log.warn("Cannot add self-loop"),!1;const o={source:e,target:n},s=ti(o);return this.data.links.some(l=>ti(l)===s)?(this.log.debug(`Link already exists: ${e} -> ${n}`),!1):(this.data.links.push(o),this.updateGraph(),this.emit("linkAdded",{source:e,target:n}),!0)}getNodeIds(){return this.data.nodes.map(e=>e.id)}hasNode(e){return this.data.nodes.some(n=>n.id===e)}fitToView(){if(!this.data.nodes||this.data.nodes.length===0||!this.svg)return;let e=1/0,n=1/0,i=-1/0,r=-1/0;if(this.data.nodes.forEach(x=>{if(x.x!==void 0&&x.y!==void 0){const k=this.getNodeRadius(x);e=Math.min(e,x.x-k),n=Math.min(n,x.y-k),i=Math.max(i,x.x+k),r=Math.max(r,x.y+k)}}),e===1/0||n===1/0)return;const o=50;e-=o,n-=o,i+=o,r+=o;const s=i-e,a=r-n,l=(e+i)/2,c=(n+r)/2,d=this.options.width,u=this.options.height,h=d/s,f=u/a,p=Math.min(h,f,Fe.ZOOM_MAX)*.9,m=d/2-l*p,w=u/2-c*p,_=Ia.translate(m,w).scale(p);this.zoomBehavior&&this.svg&&this.svg.call(this.zoomBehavior.transform,_),this.g.attr("transform",_),this.currentZoom=p,this.updateLabelVisibility(),this.log.debug("Fitted graph to view",{scale:p,translateX:m,translateY:w})}lockPositions(){if(!this.data.nodes||this.data.nodes.length===0){this.log.warn("No nodes to lock");return}this.data.nodes.forEach(e=>{e.x!==void 0&&e.y!==void 0&&(e.fx=e.x,e.fy=e.y)}),this.simulation&&this.simulation.alpha(0).alphaTarget(0),this.log.debug("Node positions locked"),this.emit("positionsLocked")}unlockPositions(){if(!this.data.nodes||this.data.nodes.length===0){this.log.warn("No nodes to unlock");return}this.data.nodes.forEach(e=>{e.fx=null,e.fy=null}),this.simulation&&this.simulation.alpha(.3).alphaTarget(0).restart(),this.log.debug("Node positions unlocked"),this.emit("positionsUnlocked")}saveAsPNG(e="network-graph.png"){if(!this.svg||this.isDestroyed){this.log.warn("Cannot save PNG - graph not available");return}try{const n=this.svg.node();if(!n){this.log.warn("SVG element not found");return}const i=new XMLSerializer().serializeToString(n),r=new Image,o=new Blob([i],{type:"image/svg+xml;charset=utf-8"}),s=URL.createObjectURL(o);r.onload=()=>{const a=document.createElement("canvas");a.width=this.options.width,a.height=this.options.height;const l=a.getContext("2d");l.fillStyle="white",l.fillRect(0,0,a.width,a.height),l.drawImage(r,0,0),a.toBlob(c=>{if(c){const d=URL.createObjectURL(c),u=document.createElement("a");u.href=d,u.download=e,document.body.appendChild(u),u.click(),document.body.removeChild(u),URL.revokeObjectURL(d),this.log.info("PNG exported successfully",{filename:e})}},"image/png"),URL.revokeObjectURL(s)},r.onerror=()=>{this.log.error("Failed to load SVG for PNG export"),URL.revokeObjectURL(s)},r.src=s}catch(n){this.log.error("Failed to export PNG",{error:n.message,stack:n.stack})}}destroy(){this.isDestroyed||(this.log.debug("Destroying graph instance"),this.isDestroyed=!0,this.stabilizationCheckFrame&&(cancelAnimationFrame(this.stabilizationCheckFrame),this.stabilizationCheckFrame=null),this.simulation&&(this.simulation.stop(),this.simulation=null),this.resizeHandler&&(window.removeEventListener("resize",this.resizeHandler),this.resizeHandler=null),this.darkModeQuery&&this.darkModeHandler&&(this.darkModeQuery.removeEventListener("change",this.darkModeHandler),this.darkModeQuery=null,this.darkModeHandler=null),this.svg&&(this.svg.remove(),this.svg=null),this.tooltip&&(this.tooltip.remove(),this.tooltip=null),this.data={nodes:[],links:[]},this.linkKeyCache.clear(),this.eventHandlers={},this.log.info("Graph destroyed"))}}function $R(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function so(t){var e=$R(t,"string");return typeof e=="symbol"?e:e+""}function At(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function lf(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,so(i.key),i)}}function Ct(t,e,n){return e&&lf(t.prototype,e),n&&lf(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Er(t){return Er=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Er(t)}function gy(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(gy=function(){return!!t})()}function zR(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function BR(t,e){if(e&&(typeof e=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return zR(t)}function Qt(t,e,n){return e=Er(e),BR(t,gy()?Reflect.construct(e,n||[],Er(t).constructor):e.apply(t,n))}function Nc(t,e){return Nc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},Nc(t,e)}function en(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Nc(t,e)}function VR(t){if(Array.isArray(t))return t}function UR(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var i,r,o,s,a=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(i=o.call(n)).done)&&(a.push(i.value),a.length!==e);l=!0);}catch(d){c=!0,r=d}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw r}}return a}}function Rc(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}function py(t,e){if(t){if(typeof t=="string")return Rc(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Rc(t,e):void 0}}function jR(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ar(t,e){return VR(t)||UR(t,e)||py(t,e)||jR()}var vl={black:"#000000",silver:"#C0C0C0",gray:"#808080",grey:"#808080",white:"#FFFFFF",maroon:"#800000",red:"#FF0000",purple:"#800080",fuchsia:"#FF00FF",green:"#008000",lime:"#00FF00",olive:"#808000",yellow:"#FFFF00",navy:"#000080",blue:"#0000FF",teal:"#008080",aqua:"#00FFFF",darkblue:"#00008B",mediumblue:"#0000CD",darkgreen:"#006400",darkcyan:"#008B8B",deepskyblue:"#00BFFF",darkturquoise:"#00CED1",mediumspringgreen:"#00FA9A",springgreen:"#00FF7F",cyan:"#00FFFF",midnightblue:"#191970",dodgerblue:"#1E90FF",lightseagreen:"#20B2AA",forestgreen:"#228B22",seagreen:"#2E8B57",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",limegreen:"#32CD32",mediumseagreen:"#3CB371",turquoise:"#40E0D0",royalblue:"#4169E1",steelblue:"#4682B4",darkslateblue:"#483D8B",mediumturquoise:"#48D1CC",indigo:"#4B0082",darkolivegreen:"#556B2F",cadetblue:"#5F9EA0",cornflowerblue:"#6495ED",rebeccapurple:"#663399",mediumaquamarine:"#66CDAA",dimgray:"#696969",dimgrey:"#696969",slateblue:"#6A5ACD",olivedrab:"#6B8E23",slategray:"#708090",slategrey:"#708090",lightslategray:"#778899",lightslategrey:"#778899",mediumslateblue:"#7B68EE",lawngreen:"#7CFC00",chartreuse:"#7FFF00",aquamarine:"#7FFFD4",skyblue:"#87CEEB",lightskyblue:"#87CEFA",blueviolet:"#8A2BE2",darkred:"#8B0000",darkmagenta:"#8B008B",saddlebrown:"#8B4513",darkseagreen:"#8FBC8F",lightgreen:"#90EE90",mediumpurple:"#9370DB",darkviolet:"#9400D3",palegreen:"#98FB98",darkorchid:"#9932CC",yellowgreen:"#9ACD32",sienna:"#A0522D",brown:"#A52A2A",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",lightblue:"#ADD8E6",greenyellow:"#ADFF2F",paleturquoise:"#AFEEEE",lightsteelblue:"#B0C4DE",powderblue:"#B0E0E6",firebrick:"#B22222",darkgoldenrod:"#B8860B",mediumorchid:"#BA55D3",rosybrown:"#BC8F8F",darkkhaki:"#BDB76B",mediumvioletred:"#C71585",indianred:"#CD5C5C",peru:"#CD853F",chocolate:"#D2691E",tan:"#D2B48C",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",thistle:"#D8BFD8",orchid:"#DA70D6",goldenrod:"#DAA520",palevioletred:"#DB7093",crimson:"#DC143C",gainsboro:"#DCDCDC",plum:"#DDA0DD",burlywood:"#DEB887",lightcyan:"#E0FFFF",lavender:"#E6E6FA",darksalmon:"#E9967A",violet:"#EE82EE",palegoldenrod:"#EEE8AA",lightcoral:"#F08080",khaki:"#F0E68C",aliceblue:"#F0F8FF",honeydew:"#F0FFF0",azure:"#F0FFFF",sandybrown:"#F4A460",wheat:"#F5DEB3",beige:"#F5F5DC",whitesmoke:"#F5F5F5",mintcream:"#F5FFFA",ghostwhite:"#F8F8FF",salmon:"#FA8072",antiquewhite:"#FAEBD7",linen:"#FAF0E6",lightgoldenrodyellow:"#FAFAD2",oldlace:"#FDF5E6",magenta:"#FF00FF",deeppink:"#FF1493",orangered:"#FF4500",tomato:"#FF6347",hotpink:"#FF69B4",coral:"#FF7F50",darkorange:"#FF8C00",lightsalmon:"#FFA07A",orange:"#FFA500",lightpink:"#FFB6C1",pink:"#FFC0CB",gold:"#FFD700",peachpuff:"#FFDAB9",navajowhite:"#FFDEAD",moccasin:"#FFE4B5",bisque:"#FFE4C4",mistyrose:"#FFE4E1",blanchedalmond:"#FFEBCD",papayawhip:"#FFEFD5",lavenderblush:"#FFF0F5",seashell:"#FFF5EE",cornsilk:"#FFF8DC",lemonchiffon:"#FFFACD",floralwhite:"#FFFAF0",snow:"#FFFAFA",lightyellow:"#FFFFE0",ivory:"#FFFFF0"},my=new Int8Array(4),ks=new Int32Array(my.buffer,0,1),yy=new Float32Array(my.buffer,0,1),HR=/^\s*rgba?\s*\(/,WR=/^\s*rgba?\s*\(\s*([0-9]*)\s*,\s*([0-9]*)\s*,\s*([0-9]*)(?:\s*,\s*(.*)?)?\)\s*$/;function qR(t){var e=0,n=0,i=0,r=1;if(t[0]==="#")t.length===4?(e=parseInt(t.charAt(1)+t.charAt(1),16),n=parseInt(t.charAt(2)+t.charAt(2),16),i=parseInt(t.charAt(3)+t.charAt(3),16)):(e=parseInt(t.charAt(1)+t.charAt(2),16),n=parseInt(t.charAt(3)+t.charAt(4),16),i=parseInt(t.charAt(5)+t.charAt(6),16)),t.length===9&&(r=parseInt(t.charAt(7)+t.charAt(8),16)/255);else if(HR.test(t)){var o=t.match(WR);o&&(e=+o[1],n=+o[2],i=+o[3],o[4]&&(r=+o[4]))}return{r:e,g:n,b:i,a:r}}var fr={};for(var ns in vl)fr[ns]=mi(vl[ns]),fr[vl[ns]]=fr[ns];function vy(t,e,n,i,r){return ks[0]=i<<24|n<<16|e<<8|t,ks[0]=ks[0]&4278190079,yy[0]}function mi(t){if(t=t.toLowerCase(),typeof fr[t]<"u")return fr[t];var e=qR(t),n=e.r,i=e.g,r=e.b,o=e.a;o=o*255|0;var s=vy(n,i,r,o);return fr[t]=s,s}function KR(t,e){yy[0]=mi(t);var n=ks[0],i=n&255,r=n>>8&255,o=n>>16&255,s=n>>24&255;return[i,r,o,s]}var bl={};function by(t){if(typeof bl[t]<"u")return bl[t];var e=(t&16711680)>>>16,n=(t&65280)>>>8,i=t&255,r=255,o=vy(e,n,i,r);return bl[t]=o,o}function cf(t,e,n,i){return n+(e<<8)+(t<<16)}function df(t,e,n,i,r,o){var s=Math.floor(n/o*r),a=Math.floor(t.drawingBufferHeight/o-i/o*r),l=new Uint8Array(4);t.bindFramebuffer(t.FRAMEBUFFER,e),t.readPixels(s,a,1,1,t.RGBA,t.UNSIGNED_BYTE,l);var c=Ar(l,4),d=c[0],u=c[1],h=c[2],f=c[3];return[d,u,h,f]}function re(t,e,n){return(e=so(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function uf(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function xe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?uf(Object(n),!0).forEach(function(i){re(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):uf(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function XR(t,e){for(;!{}.hasOwnProperty.call(t,e)&&(t=Er(t))!==null;);return t}function Lc(){return Lc=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(t,e,n){var i=XR(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}},Lc.apply(null,arguments)}function _y(t,e,n,i){var r=Lc(Er(t.prototype),e,n);return typeof r=="function"?function(o){return r.apply(n,o)}:r}function ZR(t){return t.normalized?1:t.size}function _l(t){var e=0;return t.forEach(function(n){return e+=ZR(n)}),e}function wy(t,e,n){var i=t==="VERTEX"?e.VERTEX_SHADER:e.FRAGMENT_SHADER,r=e.createShader(i);if(r===null)throw new Error("loadShader: error while creating the shader");e.shaderSource(r,n),e.compileShader(r);var o=e.getShaderParameter(r,e.COMPILE_STATUS);if(!o){var s=e.getShaderInfoLog(r);throw e.deleteShader(r),new Error(`loadShader: error while compiling the shader:
`.concat(s,`
`).concat(n))}return r}function YR(t,e){return wy("VERTEX",t,e)}function JR(t,e){return wy("FRAGMENT",t,e)}function QR(t,e){var n=t.createProgram();if(n===null)throw new Error("loadProgram: error while creating the program.");var i,r;for(i=0,r=e.length;i<r;i++)t.attachShader(n,e[i]);t.linkProgram(n);var o=t.getProgramParameter(n,t.LINK_STATUS);if(!o)throw t.deleteProgram(n),new Error("loadProgram: error while linking the program.");return n}function hf(t){var e=t.gl,n=t.buffer,i=t.program,r=t.vertexShader,o=t.fragmentShader;e.deleteShader(r),e.deleteShader(o),e.deleteProgram(i),e.deleteBuffer(n)}function ff(t){return t%1===0?t.toFixed(1):t.toString()}var gf=`#define PICKING_MODE
`,eL=re(re(re(re(re(re(re(re({},WebGL2RenderingContext.BOOL,1),WebGL2RenderingContext.BYTE,1),WebGL2RenderingContext.UNSIGNED_BYTE,1),WebGL2RenderingContext.SHORT,2),WebGL2RenderingContext.UNSIGNED_SHORT,2),WebGL2RenderingContext.INT,4),WebGL2RenderingContext.UNSIGNED_INT,4),WebGL2RenderingContext.FLOAT,4),xy=(function(){function t(e,n,i){At(this,t),re(this,"array",new Float32Array),re(this,"constantArray",new Float32Array),re(this,"capacity",0),re(this,"verticesCount",0);var r=this.getDefinition();if(this.VERTICES=r.VERTICES,this.VERTEX_SHADER_SOURCE=r.VERTEX_SHADER_SOURCE,this.FRAGMENT_SHADER_SOURCE=r.FRAGMENT_SHADER_SOURCE,this.UNIFORMS=r.UNIFORMS,this.ATTRIBUTES=r.ATTRIBUTES,this.METHOD=r.METHOD,this.CONSTANT_ATTRIBUTES="CONSTANT_ATTRIBUTES"in r?r.CONSTANT_ATTRIBUTES:[],this.CONSTANT_DATA="CONSTANT_DATA"in r?r.CONSTANT_DATA:[],this.isInstanced="CONSTANT_ATTRIBUTES"in r,this.ATTRIBUTES_ITEMS_COUNT=_l(this.ATTRIBUTES),this.STRIDE=this.VERTICES*this.ATTRIBUTES_ITEMS_COUNT,this.renderer=i,this.normalProgram=this.getProgramInfo("normal",e,r.VERTEX_SHADER_SOURCE,r.FRAGMENT_SHADER_SOURCE,null),this.pickProgram=n?this.getProgramInfo("pick",e,gf+r.VERTEX_SHADER_SOURCE,gf+r.FRAGMENT_SHADER_SOURCE,n):null,this.isInstanced){var o=_l(this.CONSTANT_ATTRIBUTES);if(this.CONSTANT_DATA.length!==this.VERTICES)throw new Error("Program: error while getting constant data (expected ".concat(this.VERTICES," items, received ").concat(this.CONSTANT_DATA.length," instead)"));this.constantArray=new Float32Array(this.CONSTANT_DATA.length*o);for(var s=0;s<this.CONSTANT_DATA.length;s++){var a=this.CONSTANT_DATA[s];if(a.length!==o)throw new Error("Program: error while getting constant data (one vector has ".concat(a.length," items instead of ").concat(o,")"));for(var l=0;l<a.length;l++)this.constantArray[s*o+l]=a[l]}this.STRIDE=this.ATTRIBUTES_ITEMS_COUNT}}return Ct(t,[{key:"kill",value:function(){hf(this.normalProgram),this.pickProgram&&(hf(this.pickProgram),this.pickProgram=null)}},{key:"getProgramInfo",value:function(n,i,r,o,s){var a=this.getDefinition(),l=i.createBuffer();if(l===null)throw new Error("Program: error while creating the WebGL buffer.");var c=YR(i,r),d=JR(i,o),u=QR(i,[c,d]),h={};a.UNIFORMS.forEach(function(m){var w=i.getUniformLocation(u,m);w&&(h[m]=w)});var f={};a.ATTRIBUTES.forEach(function(m){f[m.name]=i.getAttribLocation(u,m.name)});var p;if("CONSTANT_ATTRIBUTES"in a&&(a.CONSTANT_ATTRIBUTES.forEach(function(m){f[m.name]=i.getAttribLocation(u,m.name)}),p=i.createBuffer(),p===null))throw new Error("Program: error while creating the WebGL constant buffer.");return{name:n,program:u,gl:i,frameBuffer:s,buffer:l,constantBuffer:p||{},uniformLocations:h,attributeLocations:f,isPicking:n==="pick",vertexShader:c,fragmentShader:d}}},{key:"bindProgram",value:function(n){var i=this,r=0,o=n.gl,s=n.buffer;this.isInstanced?(o.bindBuffer(o.ARRAY_BUFFER,n.constantBuffer),r=0,this.CONSTANT_ATTRIBUTES.forEach(function(a){return r+=i.bindAttribute(a,n,r,!1)}),o.bufferData(o.ARRAY_BUFFER,this.constantArray,o.STATIC_DRAW),o.bindBuffer(o.ARRAY_BUFFER,n.buffer),r=0,this.ATTRIBUTES.forEach(function(a){return r+=i.bindAttribute(a,n,r,!0)}),o.bufferData(o.ARRAY_BUFFER,this.array,o.DYNAMIC_DRAW)):(o.bindBuffer(o.ARRAY_BUFFER,s),r=0,this.ATTRIBUTES.forEach(function(a){return r+=i.bindAttribute(a,n,r)}),o.bufferData(o.ARRAY_BUFFER,this.array,o.DYNAMIC_DRAW)),o.bindBuffer(o.ARRAY_BUFFER,null)}},{key:"unbindProgram",value:function(n){var i=this;this.isInstanced?(this.CONSTANT_ATTRIBUTES.forEach(function(r){return i.unbindAttribute(r,n,!1)}),this.ATTRIBUTES.forEach(function(r){return i.unbindAttribute(r,n,!0)})):this.ATTRIBUTES.forEach(function(r){return i.unbindAttribute(r,n)})}},{key:"bindAttribute",value:function(n,i,r,o){var s=eL[n.type];if(typeof s!="number")throw new Error('Program.bind: yet unsupported attribute type "'.concat(n.type,'"'));var a=i.attributeLocations[n.name],l=i.gl;if(a!==-1){l.enableVertexAttribArray(a);var c=this.isInstanced?(o?this.ATTRIBUTES_ITEMS_COUNT:_l(this.CONSTANT_ATTRIBUTES))*Float32Array.BYTES_PER_ELEMENT:this.ATTRIBUTES_ITEMS_COUNT*Float32Array.BYTES_PER_ELEMENT;if(l.vertexAttribPointer(a,n.size,n.type,n.normalized||!1,c,r),this.isInstanced&&o)if(l instanceof WebGL2RenderingContext)l.vertexAttribDivisor(a,1);else{var d=l.getExtension("ANGLE_instanced_arrays");d&&d.vertexAttribDivisorANGLE(a,1)}}return n.size*s}},{key:"unbindAttribute",value:function(n,i,r){var o=i.attributeLocations[n.name],s=i.gl;if(o!==-1&&(s.disableVertexAttribArray(o),this.isInstanced&&r))if(s instanceof WebGL2RenderingContext)s.vertexAttribDivisor(o,0);else{var a=s.getExtension("ANGLE_instanced_arrays");a&&a.vertexAttribDivisorANGLE(o,0)}}},{key:"reallocate",value:function(n){n!==this.capacity&&(this.capacity=n,this.verticesCount=this.VERTICES*n,this.array=new Float32Array(this.isInstanced?this.capacity*this.ATTRIBUTES_ITEMS_COUNT:this.verticesCount*this.ATTRIBUTES_ITEMS_COUNT))}},{key:"hasNothingToRender",value:function(){return this.verticesCount===0}},{key:"renderProgram",value:function(n,i){var r=i.gl,o=i.program;r.enable(r.BLEND),r.useProgram(o),this.setUniforms(n,i),this.drawWebGL(this.METHOD,i)}},{key:"render",value:function(n){this.hasNothingToRender()||(this.pickProgram&&(this.pickProgram.gl.viewport(0,0,n.width*n.pixelRatio/n.downSizingRatio,n.height*n.pixelRatio/n.downSizingRatio),this.bindProgram(this.pickProgram),this.renderProgram(xe(xe({},n),{},{pixelRatio:n.pixelRatio/n.downSizingRatio}),this.pickProgram),this.unbindProgram(this.pickProgram)),this.normalProgram.gl.viewport(0,0,n.width*n.pixelRatio,n.height*n.pixelRatio),this.bindProgram(this.normalProgram),this.renderProgram(n,this.normalProgram),this.unbindProgram(this.normalProgram))}},{key:"drawWebGL",value:function(n,i){var r=i.gl,o=i.frameBuffer;if(r.bindFramebuffer(r.FRAMEBUFFER,o),!this.isInstanced)r.drawArrays(n,0,this.verticesCount);else if(r instanceof WebGL2RenderingContext)r.drawArraysInstanced(n,0,this.VERTICES,this.capacity);else{var s=r.getExtension("ANGLE_instanced_arrays");s&&s.drawArraysInstancedANGLE(n,0,this.VERTICES,this.capacity)}}}])})(),ky=(function(t){function e(){return At(this,e),Qt(this,e,arguments)}return en(e,t),Ct(e,[{key:"kill",value:function(){_y(e,"kill",this)([])}},{key:"process",value:function(i,r,o){var s=r*this.STRIDE;if(o.hidden){for(var a=s+this.STRIDE;s<a;s++)this.array[s]=0;return}return this.processVisibleItem(by(i),s,o)}}])})(xy),Pa=(function(t){function e(){var n;At(this,e);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return n=Qt(this,e,[].concat(r)),re(n,"drawLabel",void 0),n}return en(e,t),Ct(e,[{key:"kill",value:function(){_y(e,"kill",this)([])}},{key:"process",value:function(i,r,o,s,a){var l=r*this.STRIDE;if(a.hidden||o.hidden||s.hidden){for(var c=l+this.STRIDE;l<c;l++)this.array[l]=0;return}return this.processVisibleItem(by(i),l,o,s,a)}}])})(xy);function tL(t,e){return(function(){function n(i,r,o){At(this,n),re(this,"drawLabel",e),this.programs=t.map(function(s){return new s(i,r,o)})}return Ct(n,[{key:"reallocate",value:function(r){this.programs.forEach(function(o){return o.reallocate(r)})}},{key:"process",value:function(r,o,s,a,l){this.programs.forEach(function(c){return c.process(r,o,s,a,l)})}},{key:"render",value:function(r){this.programs.forEach(function(o){return o.render(r)})}},{key:"kill",value:function(){this.programs.forEach(function(r){return r.kill()})}}])})()}function nL(t,e,n,i,r){var o=r.edgeLabelSize,s=r.edgeLabelFont,a=r.edgeLabelWeight,l=r.edgeLabelColor.attribute?e[r.edgeLabelColor.attribute]||r.edgeLabelColor.color||"#000":r.edgeLabelColor.color,c=e.label;if(c){t.fillStyle=l,t.font="".concat(a," ").concat(o,"px ").concat(s);var d=n.size,u=i.size,h=n.x,f=n.y,p=i.x,m=i.y,w=(h+p)/2,_=(f+m)/2,x=p-h,k=m-f,v=Math.sqrt(x*x+k*k);if(!(v<d+u)){h+=x*d/v,f+=k*d/v,p-=x*u/v,m-=k*u/v,w=(h+p)/2,_=(f+m)/2,x=p-h,k=m-f,v=Math.sqrt(x*x+k*k);var C=t.measureText(c).width;if(C>v){var A="";for(c=c+A,C=t.measureText(c).width;C>v&&c.length>1;)c=c.slice(0,-2)+A,C=t.measureText(c).width;if(c.length<4)return}var S;x>0?k>0?S=Math.acos(x/v):S=Math.asin(k/v):k>0?S=Math.acos(x/v)+Math.PI:S=Math.asin(x/v)+Math.PI/2,t.save(),t.translate(w,_),t.rotate(S),t.fillText(c,-C/2,e.size/2+o),t.restore()}}}function Ey(t,e,n){if(e.label){var i=n.labelSize,r=n.labelFont,o=n.labelWeight,s=n.labelColor.attribute?e[n.labelColor.attribute]||n.labelColor.color||"#000":n.labelColor.color;t.fillStyle=s,t.font="".concat(o," ").concat(i,"px ").concat(r),t.fillText(e.label,e.x+e.size+3,e.y+i/3)}}function iL(t,e,n){var i=n.labelSize,r=n.labelFont,o=n.labelWeight;t.font="".concat(o," ").concat(i,"px ").concat(r),t.fillStyle="#FFF",t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=8,t.shadowColor="#000";var s=2;if(typeof e.label=="string"){var a=t.measureText(e.label).width,l=Math.round(a+5),c=Math.round(i+2*s),d=Math.max(e.size,i/2)+s,u=Math.asin(c/2/d),h=Math.sqrt(Math.abs(Math.pow(d,2)-Math.pow(c/2,2)));t.beginPath(),t.moveTo(e.x+h,e.y+c/2),t.lineTo(e.x+d+l,e.y+c/2),t.lineTo(e.x+d+l,e.y-c/2),t.lineTo(e.x+h,e.y-c/2),t.arc(e.x,e.y,d,u,-u),t.closePath(),t.fill()}else t.beginPath(),t.arc(e.x,e.y,e.size+s,0,Math.PI*2),t.closePath(),t.fill();t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0,Ey(t,e,n)}var rL=`
precision highp float;

varying vec4 v_color;
varying vec2 v_diffVector;
varying float v_radius;

uniform float u_correctionRatio;

const vec4 transparent = vec4(0.0, 0.0, 0.0, 0.0);

void main(void) {
  float border = u_correctionRatio * 2.0;
  float dist = length(v_diffVector) - v_radius + border;

  // No antialiasing for picking mode:
  #ifdef PICKING_MODE
  if (dist > border)
    gl_FragColor = transparent;
  else
    gl_FragColor = v_color;

  #else
  float t = 0.0;
  if (dist > border)
    t = 1.0;
  else if (dist > 0.0)
    t = dist / border;

  gl_FragColor = mix(v_color, transparent, t);
  #endif
}
`,oL=rL,sL=`
attribute vec4 a_id;
attribute vec4 a_color;
attribute vec2 a_position;
attribute float a_size;
attribute float a_angle;

uniform mat3 u_matrix;
uniform float u_sizeRatio;
uniform float u_correctionRatio;

varying vec4 v_color;
varying vec2 v_diffVector;
varying float v_radius;
varying float v_border;

const float bias = 255.0 / 254.0;

void main() {
  float size = a_size * u_correctionRatio / u_sizeRatio * 4.0;
  vec2 diffVector = size * vec2(cos(a_angle), sin(a_angle));
  vec2 position = a_position + diffVector;
  gl_Position = vec4(
    (u_matrix * vec3(position, 1)).xy,
    0,
    1
  );

  v_diffVector = diffVector;
  v_radius = size / 2.0;

  #ifdef PICKING_MODE
  // For picking mode, we use the ID as the color:
  v_color = a_id;
  #else
  // For normal mode, we use the color:
  v_color = a_color;
  #endif

  v_color.a *= bias;
}
`,aL=sL,Ay=WebGLRenderingContext,pf=Ay.UNSIGNED_BYTE,wl=Ay.FLOAT,lL=["u_sizeRatio","u_correctionRatio","u_matrix"],Da=(function(t){function e(){return At(this,e),Qt(this,e,arguments)}return en(e,t),Ct(e,[{key:"getDefinition",value:function(){return{VERTICES:3,VERTEX_SHADER_SOURCE:aL,FRAGMENT_SHADER_SOURCE:oL,METHOD:WebGLRenderingContext.TRIANGLES,UNIFORMS:lL,ATTRIBUTES:[{name:"a_position",size:2,type:wl},{name:"a_size",size:1,type:wl},{name:"a_color",size:4,type:pf,normalized:!0},{name:"a_id",size:4,type:pf,normalized:!0}],CONSTANT_ATTRIBUTES:[{name:"a_angle",size:1,type:wl}],CONSTANT_DATA:[[e.ANGLE_1],[e.ANGLE_2],[e.ANGLE_3]]}}},{key:"processVisibleItem",value:function(i,r,o){var s=this.array,a=mi(o.color);s[r++]=o.x,s[r++]=o.y,s[r++]=o.size,s[r++]=a,s[r++]=i}},{key:"setUniforms",value:function(i,r){var o=r.gl,s=r.uniformLocations,a=s.u_sizeRatio,l=s.u_correctionRatio,c=s.u_matrix;o.uniform1f(l,i.correctionRatio),o.uniform1f(a,i.sizeRatio),o.uniformMatrix3fv(c,!1,i.matrix)}}])})(ky);re(Da,"ANGLE_1",0);re(Da,"ANGLE_2",2*Math.PI/3);re(Da,"ANGLE_3",4*Math.PI/3);var cL=`
precision mediump float;

varying vec4 v_color;

void main(void) {
  gl_FragColor = v_color;
}
`,dL=cL,uL=`
attribute vec2 a_position;
attribute vec2 a_normal;
attribute float a_radius;
attribute vec3 a_barycentric;

#ifdef PICKING_MODE
attribute vec4 a_id;
#else
attribute vec4 a_color;
#endif

uniform mat3 u_matrix;
uniform float u_sizeRatio;
uniform float u_correctionRatio;
uniform float u_minEdgeThickness;
uniform float u_lengthToThicknessRatio;
uniform float u_widenessToThicknessRatio;

varying vec4 v_color;

const float bias = 255.0 / 254.0;

void main() {
  float minThickness = u_minEdgeThickness;

  float normalLength = length(a_normal);
  vec2 unitNormal = a_normal / normalLength;

  // These first computations are taken from edge.vert.glsl and
  // edge.clamped.vert.glsl. Please read it to get better comments on what's
  // happening:
  float pixelsThickness = max(normalLength / u_sizeRatio, minThickness);
  float webGLThickness = pixelsThickness * u_correctionRatio;
  float webGLNodeRadius = a_radius * 2.0 * u_correctionRatio / u_sizeRatio;
  float webGLArrowHeadLength = webGLThickness * u_lengthToThicknessRatio * 2.0;
  float webGLArrowHeadThickness = webGLThickness * u_widenessToThicknessRatio;

  float da = a_barycentric.x;
  float db = a_barycentric.y;
  float dc = a_barycentric.z;

  vec2 delta = vec2(
      da * (webGLNodeRadius * unitNormal.y)
    + db * ((webGLNodeRadius + webGLArrowHeadLength) * unitNormal.y + webGLArrowHeadThickness * unitNormal.x)
    + dc * ((webGLNodeRadius + webGLArrowHeadLength) * unitNormal.y - webGLArrowHeadThickness * unitNormal.x),

      da * (-webGLNodeRadius * unitNormal.x)
    + db * (-(webGLNodeRadius + webGLArrowHeadLength) * unitNormal.x + webGLArrowHeadThickness * unitNormal.y)
    + dc * (-(webGLNodeRadius + webGLArrowHeadLength) * unitNormal.x - webGLArrowHeadThickness * unitNormal.y)
  );

  vec2 position = (u_matrix * vec3(a_position + delta, 1)).xy;

  gl_Position = vec4(position, 0, 1);

  #ifdef PICKING_MODE
  // For picking mode, we use the ID as the color:
  v_color = a_id;
  #else
  // For normal mode, we use the color:
  v_color = a_color;
  #endif

  v_color.a *= bias;
}
`,hL=uL,Cy=WebGLRenderingContext,mf=Cy.UNSIGNED_BYTE,is=Cy.FLOAT,fL=["u_matrix","u_sizeRatio","u_correctionRatio","u_minEdgeThickness","u_lengthToThicknessRatio","u_widenessToThicknessRatio"],Ma={extremity:"target",lengthToThicknessRatio:2.5,widenessToThicknessRatio:2};function Sy(t){var e=xe(xe({},Ma),{});return(function(n){function i(){return At(this,i),Qt(this,i,arguments)}return en(i,n),Ct(i,[{key:"getDefinition",value:function(){return{VERTICES:3,VERTEX_SHADER_SOURCE:hL,FRAGMENT_SHADER_SOURCE:dL,METHOD:WebGLRenderingContext.TRIANGLES,UNIFORMS:fL,ATTRIBUTES:[{name:"a_position",size:2,type:is},{name:"a_normal",size:2,type:is},{name:"a_radius",size:1,type:is},{name:"a_color",size:4,type:mf,normalized:!0},{name:"a_id",size:4,type:mf,normalized:!0}],CONSTANT_ATTRIBUTES:[{name:"a_barycentric",size:3,type:is}],CONSTANT_DATA:[[1,0,0],[0,1,0],[0,0,1]]}}},{key:"processVisibleItem",value:function(o,s,a,l,c){if(e.extremity==="source"){var d=[l,a];a=d[0],l=d[1]}var u=c.size||1,h=l.size||1,f=a.x,p=a.y,m=l.x,w=l.y,_=mi(c.color),x=m-f,k=w-p,v=x*x+k*k,C=0,A=0;v&&(v=1/Math.sqrt(v),C=-k*v*u,A=x*v*u);var S=this.array;S[s++]=m,S[s++]=w,S[s++]=-C,S[s++]=-A,S[s++]=h,S[s++]=_,S[s++]=o}},{key:"setUniforms",value:function(o,s){var a=s.gl,l=s.uniformLocations,c=l.u_matrix,d=l.u_sizeRatio,u=l.u_correctionRatio,h=l.u_minEdgeThickness,f=l.u_lengthToThicknessRatio,p=l.u_widenessToThicknessRatio;a.uniformMatrix3fv(c,!1,o.matrix),a.uniform1f(d,o.sizeRatio),a.uniform1f(u,o.correctionRatio),a.uniform1f(h,o.minEdgeThickness),a.uniform1f(f,e.lengthToThicknessRatio),a.uniform1f(p,e.widenessToThicknessRatio)}}])})(Pa)}Sy();var gL=`
precision mediump float;

varying vec4 v_color;
varying vec2 v_normal;
varying float v_thickness;
varying float v_feather;

const vec4 transparent = vec4(0.0, 0.0, 0.0, 0.0);

void main(void) {
  // We only handle antialiasing for normal mode:
  #ifdef PICKING_MODE
  gl_FragColor = v_color;
  #else
  float dist = length(v_normal) * v_thickness;

  float t = smoothstep(
    v_thickness - v_feather,
    v_thickness,
    dist
  );

  gl_FragColor = mix(v_color, transparent, t);
  #endif
}
`,Ty=gL,pL=`
attribute vec4 a_id;
attribute vec4 a_color;
attribute vec2 a_normal;
attribute float a_normalCoef;
attribute vec2 a_positionStart;
attribute vec2 a_positionEnd;
attribute float a_positionCoef;
attribute float a_radius;
attribute float a_radiusCoef;

uniform mat3 u_matrix;
uniform float u_zoomRatio;
uniform float u_sizeRatio;
uniform float u_pixelRatio;
uniform float u_correctionRatio;
uniform float u_minEdgeThickness;
uniform float u_lengthToThicknessRatio;
uniform float u_feather;

varying vec4 v_color;
varying vec2 v_normal;
varying float v_thickness;
varying float v_feather;

const float bias = 255.0 / 254.0;

void main() {
  float minThickness = u_minEdgeThickness;

  float radius = a_radius * a_radiusCoef;
  vec2 normal = a_normal * a_normalCoef;
  vec2 position = a_positionStart * (1.0 - a_positionCoef) + a_positionEnd * a_positionCoef;

  float normalLength = length(normal);
  vec2 unitNormal = normal / normalLength;

  // These first computations are taken from edge.vert.glsl. Please read it to
  // get better comments on what's happening:
  float pixelsThickness = max(normalLength, minThickness * u_sizeRatio);
  float webGLThickness = pixelsThickness * u_correctionRatio / u_sizeRatio;

  // Here, we move the point to leave space for the arrow head:
  float direction = sign(radius);
  float webGLNodeRadius = direction * radius * 2.0 * u_correctionRatio / u_sizeRatio;
  float webGLArrowHeadLength = webGLThickness * u_lengthToThicknessRatio * 2.0;

  vec2 compensationVector = vec2(-direction * unitNormal.y, direction * unitNormal.x) * (webGLNodeRadius + webGLArrowHeadLength);

  // Here is the proper position of the vertex
  gl_Position = vec4((u_matrix * vec3(position + unitNormal * webGLThickness + compensationVector, 1)).xy, 0, 1);

  v_thickness = webGLThickness / u_zoomRatio;

  v_normal = unitNormal;

  v_feather = u_feather * u_correctionRatio / u_zoomRatio / u_pixelRatio * 2.0;

  #ifdef PICKING_MODE
  // For picking mode, we use the ID as the color:
  v_color = a_id;
  #else
  // For normal mode, we use the color:
  v_color = a_color;
  #endif

  v_color.a *= bias;
}
`,mL=pL,Ny=WebGLRenderingContext,yf=Ny.UNSIGNED_BYTE,xi=Ny.FLOAT,yL=["u_matrix","u_zoomRatio","u_sizeRatio","u_correctionRatio","u_pixelRatio","u_feather","u_minEdgeThickness","u_lengthToThicknessRatio"],vL={lengthToThicknessRatio:Ma.lengthToThicknessRatio};function Ry(t){var e=xe(xe({},vL),{});return(function(n){function i(){return At(this,i),Qt(this,i,arguments)}return en(i,n),Ct(i,[{key:"getDefinition",value:function(){return{VERTICES:6,VERTEX_SHADER_SOURCE:mL,FRAGMENT_SHADER_SOURCE:Ty,METHOD:WebGLRenderingContext.TRIANGLES,UNIFORMS:yL,ATTRIBUTES:[{name:"a_positionStart",size:2,type:xi},{name:"a_positionEnd",size:2,type:xi},{name:"a_normal",size:2,type:xi},{name:"a_color",size:4,type:yf,normalized:!0},{name:"a_id",size:4,type:yf,normalized:!0},{name:"a_radius",size:1,type:xi}],CONSTANT_ATTRIBUTES:[{name:"a_positionCoef",size:1,type:xi},{name:"a_normalCoef",size:1,type:xi},{name:"a_radiusCoef",size:1,type:xi}],CONSTANT_DATA:[[0,1,0],[0,-1,0],[1,1,1],[1,1,1],[0,-1,0],[1,-1,-1]]}}},{key:"processVisibleItem",value:function(o,s,a,l,c){var d=c.size||1,u=a.x,h=a.y,f=l.x,p=l.y,m=mi(c.color),w=f-u,_=p-h,x=l.size||1,k=w*w+_*_,v=0,C=0;k&&(k=1/Math.sqrt(k),v=-_*k*d,C=w*k*d);var A=this.array;A[s++]=u,A[s++]=h,A[s++]=f,A[s++]=p,A[s++]=v,A[s++]=C,A[s++]=m,A[s++]=o,A[s++]=x}},{key:"setUniforms",value:function(o,s){var a=s.gl,l=s.uniformLocations,c=l.u_matrix,d=l.u_zoomRatio,u=l.u_feather,h=l.u_pixelRatio,f=l.u_correctionRatio,p=l.u_sizeRatio,m=l.u_minEdgeThickness,w=l.u_lengthToThicknessRatio;a.uniformMatrix3fv(c,!1,o.matrix),a.uniform1f(d,o.zoomRatio),a.uniform1f(p,o.sizeRatio),a.uniform1f(f,o.correctionRatio),a.uniform1f(h,o.pixelRatio),a.uniform1f(u,o.antiAliasingFeather),a.uniform1f(m,o.minEdgeThickness),a.uniform1f(w,e.lengthToThicknessRatio)}}])})(Pa)}Ry();function bL(t){return tL([Ry(),Sy()])}var _L=bL(),wL=_L,xL=`
attribute vec4 a_id;
attribute vec4 a_color;
attribute vec2 a_normal;
attribute float a_normalCoef;
attribute vec2 a_positionStart;
attribute vec2 a_positionEnd;
attribute float a_positionCoef;

uniform mat3 u_matrix;
uniform float u_sizeRatio;
uniform float u_zoomRatio;
uniform float u_pixelRatio;
uniform float u_correctionRatio;
uniform float u_minEdgeThickness;
uniform float u_feather;

varying vec4 v_color;
varying vec2 v_normal;
varying float v_thickness;
varying float v_feather;

const float bias = 255.0 / 254.0;

void main() {
  float minThickness = u_minEdgeThickness;

  vec2 normal = a_normal * a_normalCoef;
  vec2 position = a_positionStart * (1.0 - a_positionCoef) + a_positionEnd * a_positionCoef;

  float normalLength = length(normal);
  vec2 unitNormal = normal / normalLength;

  // We require edges to be at least "minThickness" pixels thick *on screen*
  // (so we need to compensate the size ratio):
  float pixelsThickness = max(normalLength, minThickness * u_sizeRatio);

  // Then, we need to retrieve the normalized thickness of the edge in the WebGL
  // referential (in a ([0, 1], [0, 1]) space), using our "magic" correction
  // ratio:
  float webGLThickness = pixelsThickness * u_correctionRatio / u_sizeRatio;

  // Here is the proper position of the vertex
  gl_Position = vec4((u_matrix * vec3(position + unitNormal * webGLThickness, 1)).xy, 0, 1);

  // For the fragment shader though, we need a thickness that takes the "magic"
  // correction ratio into account (as in webGLThickness), but so that the
  // antialiasing effect does not depend on the zoom level. So here's yet
  // another thickness version:
  v_thickness = webGLThickness / u_zoomRatio;

  v_normal = unitNormal;

  v_feather = u_feather * u_correctionRatio / u_zoomRatio / u_pixelRatio * 2.0;

  #ifdef PICKING_MODE
  // For picking mode, we use the ID as the color:
  v_color = a_id;
  #else
  // For normal mode, we use the color:
  v_color = a_color;
  #endif

  v_color.a *= bias;
}
`,kL=xL,Ly=WebGLRenderingContext,vf=Ly.UNSIGNED_BYTE,zr=Ly.FLOAT,EL=["u_matrix","u_zoomRatio","u_sizeRatio","u_correctionRatio","u_pixelRatio","u_feather","u_minEdgeThickness"],AL=(function(t){function e(){return At(this,e),Qt(this,e,arguments)}return en(e,t),Ct(e,[{key:"getDefinition",value:function(){return{VERTICES:6,VERTEX_SHADER_SOURCE:kL,FRAGMENT_SHADER_SOURCE:Ty,METHOD:WebGLRenderingContext.TRIANGLES,UNIFORMS:EL,ATTRIBUTES:[{name:"a_positionStart",size:2,type:zr},{name:"a_positionEnd",size:2,type:zr},{name:"a_normal",size:2,type:zr},{name:"a_color",size:4,type:vf,normalized:!0},{name:"a_id",size:4,type:vf,normalized:!0}],CONSTANT_ATTRIBUTES:[{name:"a_positionCoef",size:1,type:zr},{name:"a_normalCoef",size:1,type:zr}],CONSTANT_DATA:[[0,1],[0,-1],[1,1],[1,1],[0,-1],[1,-1]]}}},{key:"processVisibleItem",value:function(i,r,o,s,a){var l=a.size||1,c=o.x,d=o.y,u=s.x,h=s.y,f=mi(a.color),p=u-c,m=h-d,w=p*p+m*m,_=0,x=0;w&&(w=1/Math.sqrt(w),_=-m*w*l,x=p*w*l);var k=this.array;k[r++]=c,k[r++]=d,k[r++]=u,k[r++]=h,k[r++]=_,k[r++]=x,k[r++]=f,k[r++]=i}},{key:"setUniforms",value:function(i,r){var o=r.gl,s=r.uniformLocations,a=s.u_matrix,l=s.u_zoomRatio,c=s.u_feather,d=s.u_pixelRatio,u=s.u_correctionRatio,h=s.u_sizeRatio,f=s.u_minEdgeThickness;o.uniformMatrix3fv(a,!1,i.matrix),o.uniform1f(l,i.zoomRatio),o.uniform1f(h,i.sizeRatio),o.uniform1f(u,i.correctionRatio),o.uniform1f(d,i.pixelRatio),o.uniform1f(c,i.antiAliasingFeather),o.uniform1f(f,i.minEdgeThickness)}}])})(Pa);function Oa(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var rs={exports:{}},bf;function CL(){if(bf)return rs.exports;bf=1;var t=typeof Reflect=="object"?Reflect:null,e=t&&typeof t.apply=="function"?t.apply:function(C,A,S){return Function.prototype.apply.call(C,A,S)},n;t&&typeof t.ownKeys=="function"?n=t.ownKeys:Object.getOwnPropertySymbols?n=function(C){return Object.getOwnPropertyNames(C).concat(Object.getOwnPropertySymbols(C))}:n=function(C){return Object.getOwnPropertyNames(C)};function i(v){console&&console.warn&&console.warn(v)}var r=Number.isNaN||function(C){return C!==C};function o(){o.init.call(this)}rs.exports=o,rs.exports.once=_,o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var s=10;function a(v){if(typeof v!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof v)}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(v){if(typeof v!="number"||v<0||r(v))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+v+".");s=v}}),o.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(C){if(typeof C!="number"||C<0||r(C))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+C+".");return this._maxListeners=C,this};function l(v){return v._maxListeners===void 0?o.defaultMaxListeners:v._maxListeners}o.prototype.getMaxListeners=function(){return l(this)},o.prototype.emit=function(C){for(var A=[],S=1;S<arguments.length;S++)A.push(arguments[S]);var M=C==="error",I=this._events;if(I!==void 0)M=M&&I.error===void 0;else if(!M)return!1;if(M){var D;if(A.length>0&&(D=A[0]),D instanceof Error)throw D;var O=new Error("Unhandled error."+(D?" ("+D.message+")":""));throw O.context=D,O}var $=I[C];if($===void 0)return!1;if(typeof $=="function")e($,this,A);else for(var j=$.length,E=p($,j),S=0;S<j;++S)e(E[S],this,A);return!0};function c(v,C,A,S){var M,I,D;if(a(A),I=v._events,I===void 0?(I=v._events=Object.create(null),v._eventsCount=0):(I.newListener!==void 0&&(v.emit("newListener",C,A.listener?A.listener:A),I=v._events),D=I[C]),D===void 0)D=I[C]=A,++v._eventsCount;else if(typeof D=="function"?D=I[C]=S?[A,D]:[D,A]:S?D.unshift(A):D.push(A),M=l(v),M>0&&D.length>M&&!D.warned){D.warned=!0;var O=new Error("Possible EventEmitter memory leak detected. "+D.length+" "+String(C)+" listeners added. Use emitter.setMaxListeners() to increase limit");O.name="MaxListenersExceededWarning",O.emitter=v,O.type=C,O.count=D.length,i(O)}return v}o.prototype.addListener=function(C,A){return c(this,C,A,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(C,A){return c(this,C,A,!0)};function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function u(v,C,A){var S={fired:!1,wrapFn:void 0,target:v,type:C,listener:A},M=d.bind(S);return M.listener=A,S.wrapFn=M,M}o.prototype.once=function(C,A){return a(A),this.on(C,u(this,C,A)),this},o.prototype.prependOnceListener=function(C,A){return a(A),this.prependListener(C,u(this,C,A)),this},o.prototype.removeListener=function(C,A){var S,M,I,D,O;if(a(A),M=this._events,M===void 0)return this;if(S=M[C],S===void 0)return this;if(S===A||S.listener===A)--this._eventsCount===0?this._events=Object.create(null):(delete M[C],M.removeListener&&this.emit("removeListener",C,S.listener||A));else if(typeof S!="function"){for(I=-1,D=S.length-1;D>=0;D--)if(S[D]===A||S[D].listener===A){O=S[D].listener,I=D;break}if(I<0)return this;I===0?S.shift():m(S,I),S.length===1&&(M[C]=S[0]),M.removeListener!==void 0&&this.emit("removeListener",C,O||A)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(C){var A,S,M;if(S=this._events,S===void 0)return this;if(S.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):S[C]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete S[C]),this;if(arguments.length===0){var I=Object.keys(S),D;for(M=0;M<I.length;++M)D=I[M],D!=="removeListener"&&this.removeAllListeners(D);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(A=S[C],typeof A=="function")this.removeListener(C,A);else if(A!==void 0)for(M=A.length-1;M>=0;M--)this.removeListener(C,A[M]);return this};function h(v,C,A){var S=v._events;if(S===void 0)return[];var M=S[C];return M===void 0?[]:typeof M=="function"?A?[M.listener||M]:[M]:A?w(M):p(M,M.length)}o.prototype.listeners=function(C){return h(this,C,!0)},o.prototype.rawListeners=function(C){return h(this,C,!1)},o.listenerCount=function(v,C){return typeof v.listenerCount=="function"?v.listenerCount(C):f.call(v,C)},o.prototype.listenerCount=f;function f(v){var C=this._events;if(C!==void 0){var A=C[v];if(typeof A=="function")return 1;if(A!==void 0)return A.length}return 0}o.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]};function p(v,C){for(var A=new Array(C),S=0;S<C;++S)A[S]=v[S];return A}function m(v,C){for(;C+1<v.length;C++)v[C]=v[C+1];v.pop()}function w(v){for(var C=new Array(v.length),A=0;A<C.length;++A)C[A]=v[A].listener||v[A];return C}function _(v,C){return new Promise(function(A,S){function M(D){v.removeListener(C,I),S(D)}function I(){typeof v.removeListener=="function"&&v.removeListener("error",M),A([].slice.call(arguments))}k(v,C,I,{once:!0}),C!=="error"&&x(v,M,{once:!0})})}function x(v,C,A){typeof v.on=="function"&&k(v,"error",C,A)}function k(v,C,A,S){if(typeof v.on=="function")S.once?v.once(C,A):v.on(C,A);else if(typeof v.addEventListener=="function")v.addEventListener(C,function M(I){S.once&&v.removeEventListener(C,M),A(I)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof v)}return rs.exports}var Iy=CL(),zd=(function(t){function e(){var n;return At(this,e),n=Qt(this,e),n.rawEmitter=n,n}return en(e,t),Ct(e)})(Iy.EventEmitter),xl,_f;function SL(){return _f||(_f=1,xl=function(e){return e!==null&&typeof e=="object"&&typeof e.addUndirectedEdgeWithKey=="function"&&typeof e.dropNode=="function"&&typeof e.multi=="boolean"}),xl}var TL=SL();const NL=Oa(TL);var RL=function(e){return e},LL=function(e){return e*e},IL=function(e){return e*(2-e)},PL=function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)},DL=function(e){return e*e*e},ML=function(e){return--e*e*e+1},OL=function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)},GL={linear:RL,quadraticIn:LL,quadraticOut:IL,quadraticInOut:PL,cubicIn:DL,cubicOut:ML,cubicInOut:OL},FL={easing:"quadraticInOut",duration:150};function nn(){return Float32Array.of(1,0,0,0,1,0,0,0,1)}function os(t,e,n){return t[0]=e,t[4]=typeof n=="number"?n:e,t}function wf(t,e){var n=Math.sin(e),i=Math.cos(e);return t[0]=i,t[1]=n,t[3]=-n,t[4]=i,t}function xf(t,e,n){return t[6]=e,t[7]=n,t}function ni(t,e){var n=t[0],i=t[1],r=t[2],o=t[3],s=t[4],a=t[5],l=t[6],c=t[7],d=t[8],u=e[0],h=e[1],f=e[2],p=e[3],m=e[4],w=e[5],_=e[6],x=e[7],k=e[8];return t[0]=u*n+h*o+f*l,t[1]=u*i+h*s+f*c,t[2]=u*r+h*a+f*d,t[3]=p*n+m*o+w*l,t[4]=p*i+m*s+w*c,t[5]=p*r+m*a+w*d,t[6]=_*n+x*o+k*l,t[7]=_*i+x*s+k*c,t[8]=_*r+x*a+k*d,t}function Ic(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,i=t[0],r=t[1],o=t[3],s=t[4],a=t[6],l=t[7],c=e.x,d=e.y;return{x:c*i+d*o+a*n,y:c*r+d*s+l*n}}function $L(t,e){var n=t.height/t.width,i=e.height/e.width;return n<1&&i>1||n>1&&i<1?1:Math.min(Math.max(i,1/i),Math.max(1/n,n))}function Br(t,e,n,i,r){var o=t.angle,s=t.ratio,a=t.x,l=t.y,c=e.width,d=e.height,u=nn(),h=Math.min(c,d)-2*i,f=$L(e,n);return r?(ni(u,xf(nn(),a,l)),ni(u,os(nn(),s)),ni(u,wf(nn(),o)),ni(u,os(nn(),c/h/2/f,d/h/2/f))):(ni(u,os(nn(),2*(h/c)*f,2*(h/d)*f)),ni(u,wf(nn(),-o)),ni(u,os(nn(),1/s)),ni(u,xf(nn(),-a,-l))),u}function zL(t,e,n){var i=Ic(t,{x:Math.cos(e.angle),y:Math.sin(e.angle)},0),r=i.x,o=i.y;return 1/Math.sqrt(Math.pow(r,2)+Math.pow(o,2))/n.width}function BL(t){if(!t.order)return{x:[0,1],y:[0,1]};var e=1/0,n=-1/0,i=1/0,r=-1/0;return t.forEachNode(function(o,s){var a=s.x,l=s.y;a<e&&(e=a),a>n&&(n=a),l<i&&(i=l),l>r&&(r=l)}),{x:[e,n],y:[i,r]}}function VL(t){if(!NL(t))throw new Error("Sigma: invalid graph instance.");t.forEachNode(function(e,n){if(!Number.isFinite(n.x)||!Number.isFinite(n.y))throw new Error("Sigma: Coordinates of node ".concat(e," are invalid. A node must have a numeric 'x' and 'y' attribute."))})}function UL(t,e,n){var i=document.createElement(t);if(e)for(var r in e)i.style[r]=e[r];if(n)for(var o in n)i.setAttribute(o,n[o]);return i}function kf(){return typeof window.devicePixelRatio<"u"?window.devicePixelRatio:1}function Ef(t,e,n){return n.sort(function(i,r){var o=e(i)||0,s=e(r)||0;return o<s?-1:o>s?1:0})}function Af(t){var e=Ar(t.x,2),n=e[0],i=e[1],r=Ar(t.y,2),o=r[0],s=r[1],a=Math.max(i-n,s-o),l=(i+n)/2,c=(s+o)/2;(a===0||Math.abs(a)===1/0||isNaN(a))&&(a=1),isNaN(l)&&(l=0),isNaN(c)&&(c=0);var d=function(h){return{x:.5+(h.x-l)/a,y:.5+(h.y-c)/a}};return d.applyTo=function(u){u.x=.5+(u.x-l)/a,u.y=.5+(u.y-c)/a},d.inverse=function(u){return{x:l+a*(u.x-.5),y:c+a*(u.y-.5)}},d.ratio=a,d}function Pc(t){"@babel/helpers - typeof";return Pc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pc(t)}function Cf(t,e){var n=e.size;if(n!==0){var i=t.length;t.length+=n;var r=0;e.forEach(function(o){t[i+r]=o,r++})}}function kl(t){t=t||{};for(var e=0,n=arguments.length<=1?0:arguments.length-1;e<n;e++){var i=e+1<1||arguments.length<=e+1?void 0:arguments[e+1];i&&Object.assign(t,i)}return t}var Bd={hideEdgesOnMove:!1,hideLabelsOnMove:!1,renderLabels:!0,renderEdgeLabels:!1,enableEdgeEvents:!1,defaultNodeColor:"#999",defaultNodeType:"circle",defaultEdgeColor:"#ccc",defaultEdgeType:"line",labelFont:"Arial",labelSize:14,labelWeight:"normal",labelColor:{color:"#000"},edgeLabelFont:"Arial",edgeLabelSize:14,edgeLabelWeight:"normal",edgeLabelColor:{attribute:"color"},stagePadding:30,defaultDrawEdgeLabel:nL,defaultDrawNodeLabel:Ey,defaultDrawNodeHover:iL,minEdgeThickness:1.7,antiAliasingFeather:1,dragTimeout:100,draggedEventsTolerance:3,inertiaDuration:200,inertiaRatio:3,zoomDuration:250,zoomingRatio:1.7,doubleClickTimeout:300,doubleClickZoomingRatio:2.2,doubleClickZoomingDuration:200,tapMoveTolerance:10,zoomToSizeRatioFunction:Math.sqrt,itemSizesReference:"screen",autoRescale:!0,autoCenter:!0,labelDensity:1,labelGridCellSize:100,labelRenderedSizeThreshold:6,nodeReducer:null,edgeReducer:null,zIndex:!1,minCameraRatio:null,maxCameraRatio:null,enableCameraZooming:!0,enableCameraPanning:!0,enableCameraRotation:!0,cameraPanBoundaries:null,allowInvalidContainer:!1,nodeProgramClasses:{},nodeHoverProgramClasses:{},edgeProgramClasses:{}},jL={circle:Da},HL={arrow:wL,line:AL};function El(t){if(typeof t.labelDensity!="number"||t.labelDensity<0)throw new Error("Settings: invalid `labelDensity`. Expecting a positive number.");var e=t.minCameraRatio,n=t.maxCameraRatio;if(typeof e=="number"&&typeof n=="number"&&n<e)throw new Error("Settings: invalid camera ratio boundaries. Expecting `maxCameraRatio` to be greater than `minCameraRatio`.")}function WL(t){var e=kl({},Bd,t);return e.nodeProgramClasses=kl({},jL,e.nodeProgramClasses),e.edgeProgramClasses=kl({},HL,e.edgeProgramClasses),e}var ss=1.5,Sf=(function(t){function e(){var n;return At(this,e),n=Qt(this,e),re(n,"x",.5),re(n,"y",.5),re(n,"angle",0),re(n,"ratio",1),re(n,"minRatio",null),re(n,"maxRatio",null),re(n,"enabledZooming",!0),re(n,"enabledPanning",!0),re(n,"enabledRotation",!0),re(n,"clean",null),re(n,"nextFrame",null),re(n,"previousState",null),re(n,"enabled",!0),n.previousState=n.getState(),n}return en(e,t),Ct(e,[{key:"enable",value:function(){return this.enabled=!0,this}},{key:"disable",value:function(){return this.enabled=!1,this}},{key:"getState",value:function(){return{x:this.x,y:this.y,angle:this.angle,ratio:this.ratio}}},{key:"hasState",value:function(i){return this.x===i.x&&this.y===i.y&&this.ratio===i.ratio&&this.angle===i.angle}},{key:"getPreviousState",value:function(){var i=this.previousState;return i?{x:i.x,y:i.y,angle:i.angle,ratio:i.ratio}:null}},{key:"getBoundedRatio",value:function(i){var r=i;return typeof this.minRatio=="number"&&(r=Math.max(r,this.minRatio)),typeof this.maxRatio=="number"&&(r=Math.min(r,this.maxRatio)),r}},{key:"validateState",value:function(i){var r={};return this.enabledPanning&&typeof i.x=="number"&&(r.x=i.x),this.enabledPanning&&typeof i.y=="number"&&(r.y=i.y),this.enabledZooming&&typeof i.ratio=="number"&&(r.ratio=this.getBoundedRatio(i.ratio)),this.enabledRotation&&typeof i.angle=="number"&&(r.angle=i.angle),this.clean?this.clean(xe(xe({},this.getState()),r)):r}},{key:"isAnimated",value:function(){return!!this.nextFrame}},{key:"setState",value:function(i){if(!this.enabled)return this;this.previousState=this.getState();var r=this.validateState(i);return typeof r.x=="number"&&(this.x=r.x),typeof r.y=="number"&&(this.y=r.y),typeof r.ratio=="number"&&(this.ratio=r.ratio),typeof r.angle=="number"&&(this.angle=r.angle),this.hasState(this.previousState)||this.emit("updated",this.getState()),this}},{key:"updateState",value:function(i){return this.setState(i(this.getState())),this}},{key:"animate",value:function(i){var r=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2?arguments[2]:void 0;if(!s)return new Promise(function(f){return r.animate(i,o,f)});if(this.enabled){var a=xe(xe({},FL),o),l=this.validateState(i),c=typeof a.easing=="function"?a.easing:GL[a.easing],d=Date.now(),u=this.getState(),h=function(){var p=(Date.now()-d)/a.duration;if(p>=1){r.nextFrame=null,r.setState(l),r.animationCallback&&(r.animationCallback.call(null),r.animationCallback=void 0);return}var m=c(p),w={};typeof l.x=="number"&&(w.x=u.x+(l.x-u.x)*m),typeof l.y=="number"&&(w.y=u.y+(l.y-u.y)*m),r.enabledRotation&&typeof l.angle=="number"&&(w.angle=u.angle+(l.angle-u.angle)*m),typeof l.ratio=="number"&&(w.ratio=u.ratio+(l.ratio-u.ratio)*m),r.setState(w),r.nextFrame=requestAnimationFrame(h)};this.nextFrame?(cancelAnimationFrame(this.nextFrame),this.animationCallback&&this.animationCallback.call(null),this.nextFrame=requestAnimationFrame(h)):h(),this.animationCallback=s}}},{key:"animatedZoom",value:function(i){return i?typeof i=="number"?this.animate({ratio:this.ratio/i}):this.animate({ratio:this.ratio/(i.factor||ss)},i):this.animate({ratio:this.ratio/ss})}},{key:"animatedUnzoom",value:function(i){return i?typeof i=="number"?this.animate({ratio:this.ratio*i}):this.animate({ratio:this.ratio*(i.factor||ss)},i):this.animate({ratio:this.ratio*ss})}},{key:"animatedReset",value:function(i){return this.animate({x:.5,y:.5,ratio:1,angle:0},i)}},{key:"copy",value:function(){return e.from(this.getState())}}],[{key:"from",value:function(i){var r=new e;return r.setState(i)}}])})(zd);function sn(t,e){var n=e.getBoundingClientRect();return{x:t.clientX-n.left,y:t.clientY-n.top}}function Dn(t,e){var n=xe(xe({},sn(t,e)),{},{sigmaDefaultPrevented:!1,preventSigmaDefault:function(){n.sigmaDefaultPrevented=!0},original:t});return n}function Vr(t){var e="x"in t?t:xe(xe({},t.touches[0]||t.previousTouches[0]),{},{original:t.original,sigmaDefaultPrevented:t.sigmaDefaultPrevented,preventSigmaDefault:function(){t.sigmaDefaultPrevented=!0,e.sigmaDefaultPrevented=!0}});return e}function qL(t,e){return xe(xe({},Dn(t,e)),{},{delta:Py(t)})}var KL=2;function Es(t){for(var e=[],n=0,i=Math.min(t.length,KL);n<i;n++)e.push(t[n]);return e}function Ur(t,e,n){var i={touches:Es(t.touches).map(function(r){return sn(r,n)}),previousTouches:e.map(function(r){return sn(r,n)}),sigmaDefaultPrevented:!1,preventSigmaDefault:function(){i.sigmaDefaultPrevented=!0},original:t};return i}function Py(t){if(typeof t.deltaY<"u")return t.deltaY*-3/360;if(typeof t.detail<"u")return t.detail/-9;throw new Error("Captor: could not extract delta from event.")}var Dy=(function(t){function e(n,i){var r;return At(this,e),r=Qt(this,e),r.container=n,r.renderer=i,r}return en(e,t),Ct(e)})(zd),XL=["doubleClickTimeout","doubleClickZoomingDuration","doubleClickZoomingRatio","dragTimeout","draggedEventsTolerance","inertiaDuration","inertiaRatio","zoomDuration","zoomingRatio"],ZL=XL.reduce(function(t,e){return xe(xe({},t),{},re({},e,Bd[e]))},{}),YL=(function(t){function e(n,i){var r;return At(this,e),r=Qt(this,e,[n,i]),re(r,"enabled",!0),re(r,"draggedEvents",0),re(r,"downStartTime",null),re(r,"lastMouseX",null),re(r,"lastMouseY",null),re(r,"isMouseDown",!1),re(r,"isMoving",!1),re(r,"movingTimeout",null),re(r,"startCameraState",null),re(r,"clicks",0),re(r,"doubleClickTimeout",null),re(r,"currentWheelDirection",0),re(r,"settings",ZL),r.handleClick=r.handleClick.bind(r),r.handleRightClick=r.handleRightClick.bind(r),r.handleDown=r.handleDown.bind(r),r.handleUp=r.handleUp.bind(r),r.handleMove=r.handleMove.bind(r),r.handleWheel=r.handleWheel.bind(r),r.handleLeave=r.handleLeave.bind(r),r.handleEnter=r.handleEnter.bind(r),n.addEventListener("click",r.handleClick,{capture:!1}),n.addEventListener("contextmenu",r.handleRightClick,{capture:!1}),n.addEventListener("mousedown",r.handleDown,{capture:!1}),n.addEventListener("wheel",r.handleWheel,{capture:!1}),n.addEventListener("mouseleave",r.handleLeave,{capture:!1}),n.addEventListener("mouseenter",r.handleEnter,{capture:!1}),document.addEventListener("mousemove",r.handleMove,{capture:!1}),document.addEventListener("mouseup",r.handleUp,{capture:!1}),r}return en(e,t),Ct(e,[{key:"kill",value:function(){var i=this.container;i.removeEventListener("click",this.handleClick),i.removeEventListener("contextmenu",this.handleRightClick),i.removeEventListener("mousedown",this.handleDown),i.removeEventListener("wheel",this.handleWheel),i.removeEventListener("mouseleave",this.handleLeave),i.removeEventListener("mouseenter",this.handleEnter),document.removeEventListener("mousemove",this.handleMove),document.removeEventListener("mouseup",this.handleUp)}},{key:"handleClick",value:function(i){var r=this;if(this.enabled){if(this.clicks++,this.clicks===2)return this.clicks=0,typeof this.doubleClickTimeout=="number"&&(clearTimeout(this.doubleClickTimeout),this.doubleClickTimeout=null),this.handleDoubleClick(i);setTimeout(function(){r.clicks=0,r.doubleClickTimeout=null},this.settings.doubleClickTimeout),this.draggedEvents<this.settings.draggedEventsTolerance&&this.emit("click",Dn(i,this.container))}}},{key:"handleRightClick",value:function(i){this.enabled&&this.emit("rightClick",Dn(i,this.container))}},{key:"handleDoubleClick",value:function(i){if(this.enabled){i.preventDefault(),i.stopPropagation();var r=Dn(i,this.container);if(this.emit("doubleClick",r),!r.sigmaDefaultPrevented){var o=this.renderer.getCamera(),s=o.getBoundedRatio(o.getState().ratio/this.settings.doubleClickZoomingRatio);o.animate(this.renderer.getViewportZoomedState(sn(i,this.container),s),{easing:"quadraticInOut",duration:this.settings.doubleClickZoomingDuration})}}}},{key:"handleDown",value:function(i){if(this.enabled){if(i.button===0){this.startCameraState=this.renderer.getCamera().getState();var r=sn(i,this.container),o=r.x,s=r.y;this.lastMouseX=o,this.lastMouseY=s,this.draggedEvents=0,this.downStartTime=Date.now(),this.isMouseDown=!0}this.emit("mousedown",Dn(i,this.container))}}},{key:"handleUp",value:function(i){var r=this;if(!(!this.enabled||!this.isMouseDown)){var o=this.renderer.getCamera();this.isMouseDown=!1,typeof this.movingTimeout=="number"&&(clearTimeout(this.movingTimeout),this.movingTimeout=null);var s=sn(i,this.container),a=s.x,l=s.y,c=o.getState(),d=o.getPreviousState()||{x:0,y:0};this.isMoving?o.animate({x:c.x+this.settings.inertiaRatio*(c.x-d.x),y:c.y+this.settings.inertiaRatio*(c.y-d.y)},{duration:this.settings.inertiaDuration,easing:"quadraticOut"}):(this.lastMouseX!==a||this.lastMouseY!==l)&&o.setState({x:c.x,y:c.y}),this.isMoving=!1,setTimeout(function(){var u=r.draggedEvents>0;r.draggedEvents=0,u&&r.renderer.getSetting("hideEdgesOnMove")&&r.renderer.refresh()},0),this.emit("mouseup",Dn(i,this.container))}}},{key:"handleMove",value:function(i){var r=this;if(this.enabled){var o=Dn(i,this.container);if(this.emit("mousemovebody",o),(i.target===this.container||i.composedPath()[0]===this.container)&&this.emit("mousemove",o),!o.sigmaDefaultPrevented&&this.isMouseDown){this.isMoving=!0,this.draggedEvents++,typeof this.movingTimeout=="number"&&clearTimeout(this.movingTimeout),this.movingTimeout=window.setTimeout(function(){r.movingTimeout=null,r.isMoving=!1},this.settings.dragTimeout);var s=this.renderer.getCamera(),a=sn(i,this.container),l=a.x,c=a.y,d=this.renderer.viewportToFramedGraph({x:this.lastMouseX,y:this.lastMouseY}),u=this.renderer.viewportToFramedGraph({x:l,y:c}),h=d.x-u.x,f=d.y-u.y,p=s.getState(),m=p.x+h,w=p.y+f;s.setState({x:m,y:w}),this.lastMouseX=l,this.lastMouseY=c,i.preventDefault(),i.stopPropagation()}}}},{key:"handleLeave",value:function(i){this.emit("mouseleave",Dn(i,this.container))}},{key:"handleEnter",value:function(i){this.emit("mouseenter",Dn(i,this.container))}},{key:"handleWheel",value:function(i){var r=this,o=this.renderer.getCamera();if(!(!this.enabled||!o.enabledZooming)){var s=Py(i);if(s){var a=qL(i,this.container);if(this.emit("wheel",a),a.sigmaDefaultPrevented){i.preventDefault(),i.stopPropagation();return}var l=o.getState().ratio,c=s>0?1/this.settings.zoomingRatio:this.settings.zoomingRatio,d=o.getBoundedRatio(l*c),u=s>0?1:-1,h=Date.now();l!==d&&(i.preventDefault(),i.stopPropagation(),!(this.currentWheelDirection===u&&this.lastWheelTriggerTime&&h-this.lastWheelTriggerTime<this.settings.zoomDuration/5)&&(o.animate(this.renderer.getViewportZoomedState(sn(i,this.container),d),{easing:"quadraticOut",duration:this.settings.zoomDuration},function(){r.currentWheelDirection=0}),this.currentWheelDirection=u,this.lastWheelTriggerTime=h))}}}},{key:"setSettings",value:function(i){this.settings=i}}])})(Dy),JL=["dragTimeout","inertiaDuration","inertiaRatio","doubleClickTimeout","doubleClickZoomingRatio","doubleClickZoomingDuration","tapMoveTolerance"],QL=JL.reduce(function(t,e){return xe(xe({},t),{},re({},e,Bd[e]))},{}),e2=(function(t){function e(n,i){var r;return At(this,e),r=Qt(this,e,[n,i]),re(r,"enabled",!0),re(r,"isMoving",!1),re(r,"hasMoved",!1),re(r,"touchMode",0),re(r,"startTouchesPositions",[]),re(r,"lastTouches",[]),re(r,"lastTap",null),re(r,"settings",QL),r.handleStart=r.handleStart.bind(r),r.handleLeave=r.handleLeave.bind(r),r.handleMove=r.handleMove.bind(r),n.addEventListener("touchstart",r.handleStart,{capture:!1}),n.addEventListener("touchcancel",r.handleLeave,{capture:!1}),document.addEventListener("touchend",r.handleLeave,{capture:!1,passive:!1}),document.addEventListener("touchmove",r.handleMove,{capture:!1,passive:!1}),r}return en(e,t),Ct(e,[{key:"kill",value:function(){var i=this.container;i.removeEventListener("touchstart",this.handleStart),i.removeEventListener("touchcancel",this.handleLeave),document.removeEventListener("touchend",this.handleLeave),document.removeEventListener("touchmove",this.handleMove)}},{key:"getDimensions",value:function(){return{width:this.container.offsetWidth,height:this.container.offsetHeight}}},{key:"handleStart",value:function(i){var r=this;if(this.enabled){i.preventDefault();var o=Es(i.touches);if(this.touchMode=o.length,this.startCameraState=this.renderer.getCamera().getState(),this.startTouchesPositions=o.map(function(f){return sn(f,r.container)}),this.touchMode===2){var s=Ar(this.startTouchesPositions,2),a=s[0],l=a.x,c=a.y,d=s[1],u=d.x,h=d.y;this.startTouchesAngle=Math.atan2(h-c,u-l),this.startTouchesDistance=Math.sqrt(Math.pow(u-l,2)+Math.pow(h-c,2))}this.emit("touchdown",Ur(i,this.lastTouches,this.container)),this.lastTouches=o,this.lastTouchesPositions=this.startTouchesPositions}}},{key:"handleLeave",value:function(i){if(!(!this.enabled||!this.startTouchesPositions.length)){switch(i.cancelable&&i.preventDefault(),this.movingTimeout&&(this.isMoving=!1,clearTimeout(this.movingTimeout)),this.touchMode){case 2:if(i.touches.length===1){this.handleStart(i),i.preventDefault();break}case 1:if(this.isMoving){var r=this.renderer.getCamera(),o=r.getState(),s=r.getPreviousState()||{x:0,y:0};r.animate({x:o.x+this.settings.inertiaRatio*(o.x-s.x),y:o.y+this.settings.inertiaRatio*(o.y-s.y)},{duration:this.settings.inertiaDuration,easing:"quadraticOut"})}this.hasMoved=!1,this.isMoving=!1,this.touchMode=0;break}if(this.emit("touchup",Ur(i,this.lastTouches,this.container)),!i.touches.length){var a=sn(this.lastTouches[0],this.container),l=this.startTouchesPositions[0],c=Math.pow(a.x-l.x,2)+Math.pow(a.y-l.y,2);if(!i.touches.length&&c<Math.pow(this.settings.tapMoveTolerance,2))if(this.lastTap&&Date.now()-this.lastTap.time<this.settings.doubleClickTimeout){var d=Ur(i,this.lastTouches,this.container);if(this.emit("doubletap",d),this.lastTap=null,!d.sigmaDefaultPrevented){var u=this.renderer.getCamera(),h=u.getBoundedRatio(u.getState().ratio/this.settings.doubleClickZoomingRatio);u.animate(this.renderer.getViewportZoomedState(a,h),{easing:"quadraticInOut",duration:this.settings.doubleClickZoomingDuration})}}else{var f=Ur(i,this.lastTouches,this.container);this.emit("tap",f),this.lastTap={time:Date.now(),position:f.touches[0]||f.previousTouches[0]}}}this.lastTouches=Es(i.touches),this.startTouchesPositions=[]}}},{key:"handleMove",value:function(i){var r=this;if(!(!this.enabled||!this.startTouchesPositions.length)){i.preventDefault();var o=Es(i.touches),s=o.map(function(fe){return sn(fe,r.container)}),a=this.lastTouches;this.lastTouches=o,this.lastTouchesPositions=s;var l=Ur(i,a,this.container);if(this.emit("touchmove",l),!l.sigmaDefaultPrevented&&(this.hasMoved||(this.hasMoved=s.some(function(fe,_e){var ke=r.startTouchesPositions[_e];return ke&&(fe.x!==ke.x||fe.y!==ke.y)})),!!this.hasMoved)){this.isMoving=!0,this.movingTimeout&&clearTimeout(this.movingTimeout),this.movingTimeout=window.setTimeout(function(){r.isMoving=!1},this.settings.dragTimeout);var c=this.renderer.getCamera(),d=this.startCameraState,u=this.renderer.getSetting("stagePadding");switch(this.touchMode){case 1:{var h=this.renderer.viewportToFramedGraph((this.startTouchesPositions||[])[0]),f=h.x,p=h.y,m=this.renderer.viewportToFramedGraph(s[0]),w=m.x,_=m.y;c.setState({x:d.x+f-w,y:d.y+p-_});break}case 2:{var x={x:.5,y:.5,angle:0,ratio:1},k=s[0],v=k.x,C=k.y,A=s[1],S=A.x,M=A.y,I=Math.atan2(M-C,S-v)-this.startTouchesAngle,D=Math.hypot(M-C,S-v)/this.startTouchesDistance,O=c.getBoundedRatio(d.ratio/D);x.ratio=O,x.angle=d.angle+I;var $=this.getDimensions(),j=this.renderer.viewportToFramedGraph((this.startTouchesPositions||[])[0],{cameraState:d}),E=Math.min($.width,$.height)-2*u,R=E/$.width,L=E/$.height,G=O/E,B=v-E/2/R,q=C-E/2/L,ee=[B*Math.cos(-x.angle)-q*Math.sin(-x.angle),q*Math.cos(-x.angle)+B*Math.sin(-x.angle)];B=ee[0],q=ee[1],x.x=j.x-B*G,x.y=j.y+q*G,c.setState(x);break}}}}}},{key:"setSettings",value:function(i){this.settings=i}}])})(Dy);function t2(t){if(Array.isArray(t))return Rc(t)}function n2(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function i2(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Tf(t){return t2(t)||n2(t)||py(t)||i2()}function r2(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}function Al(t,e){if(t==null)return{};var n,i,r=r2(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}var Nf=(function(){function t(e,n){At(this,t),this.key=e,this.size=n}return Ct(t,null,[{key:"compare",value:function(n,i){return n.size>i.size?-1:n.size<i.size||n.key>i.key?1:-1}}])})(),Rf=(function(){function t(){At(this,t),re(this,"width",0),re(this,"height",0),re(this,"cellSize",0),re(this,"columns",0),re(this,"rows",0),re(this,"cells",{})}return Ct(t,[{key:"resizeAndClear",value:function(n,i){this.width=n.width,this.height=n.height,this.cellSize=i,this.columns=Math.ceil(n.width/i),this.rows=Math.ceil(n.height/i),this.cells={}}},{key:"getIndex",value:function(n){var i=Math.floor(n.x/this.cellSize),r=Math.floor(n.y/this.cellSize);return r*this.columns+i}},{key:"add",value:function(n,i,r){var o=new Nf(n,i),s=this.getIndex(r),a=this.cells[s];a||(a=[],this.cells[s]=a),a.push(o)}},{key:"organize",value:function(){for(var n in this.cells){var i=this.cells[n];i.sort(Nf.compare)}}},{key:"getLabelsToDisplay",value:function(n,i){var r=this.cellSize*this.cellSize,o=r/n/n,s=o*i/r,a=Math.ceil(s),l=[];for(var c in this.cells)for(var d=this.cells[c],u=0;u<Math.min(a,d.length);u++)l.push(d[u].key);return l}}])})();function o2(t){var e=t.graph,n=t.hoveredNode,i=t.highlightedNodes,r=t.displayedNodeLabels,o=[];return e.forEachEdge(function(s,a,l,c){(l===n||c===n||i.has(l)||i.has(c)||r.has(l)&&r.has(c))&&o.push(s)}),o}var Lf=150,If=50,Vn=Object.prototype.hasOwnProperty;function s2(t,e,n){if(!Vn.call(n,"x")||!Vn.call(n,"y"))throw new Error('Sigma: could not find a valid position (x, y) for node "'.concat(e,'". All your nodes must have a number "x" and "y". Maybe your forgot to apply a layout or your "nodeReducer" is not returning the correct data?'));return n.color||(n.color=t.defaultNodeColor),!n.label&&n.label!==""&&(n.label=null),n.label!==void 0&&n.label!==null?n.label=""+n.label:n.label=null,n.size||(n.size=2),Vn.call(n,"hidden")||(n.hidden=!1),Vn.call(n,"highlighted")||(n.highlighted=!1),Vn.call(n,"forceLabel")||(n.forceLabel=!1),(!n.type||n.type==="")&&(n.type=t.defaultNodeType),n.zIndex||(n.zIndex=0),n}function a2(t,e,n){return n.color||(n.color=t.defaultEdgeColor),n.label||(n.label=""),n.size||(n.size=.5),Vn.call(n,"hidden")||(n.hidden=!1),Vn.call(n,"forceLabel")||(n.forceLabel=!1),(!n.type||n.type==="")&&(n.type=t.defaultEdgeType),n.zIndex||(n.zIndex=0),n}var l2=(function(t){function e(n,i){var r,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(At(this,e),r=Qt(this,e),re(r,"elements",{}),re(r,"canvasContexts",{}),re(r,"webGLContexts",{}),re(r,"pickingLayers",new Set),re(r,"textures",{}),re(r,"frameBuffers",{}),re(r,"activeListeners",{}),re(r,"labelGrid",new Rf),re(r,"nodeDataCache",{}),re(r,"edgeDataCache",{}),re(r,"nodeProgramIndex",{}),re(r,"edgeProgramIndex",{}),re(r,"nodesWithForcedLabels",new Set),re(r,"edgesWithForcedLabels",new Set),re(r,"nodeExtent",{x:[0,1],y:[0,1]}),re(r,"nodeZExtent",[1/0,-1/0]),re(r,"edgeZExtent",[1/0,-1/0]),re(r,"matrix",nn()),re(r,"invMatrix",nn()),re(r,"correctionRatio",1),re(r,"customBBox",null),re(r,"normalizationFunction",Af({x:[0,1],y:[0,1]})),re(r,"graphToViewportRatio",1),re(r,"itemIDsIndex",{}),re(r,"nodeIndices",{}),re(r,"edgeIndices",{}),re(r,"width",0),re(r,"height",0),re(r,"pixelRatio",kf()),re(r,"pickingDownSizingRatio",2*r.pixelRatio),re(r,"displayedNodeLabels",new Set),re(r,"displayedEdgeLabels",new Set),re(r,"highlightedNodes",new Set),re(r,"hoveredNode",null),re(r,"hoveredEdge",null),re(r,"renderFrame",null),re(r,"renderHighlightedNodesFrame",null),re(r,"needToProcess",!1),re(r,"checkEdgesEventsFrame",null),re(r,"nodePrograms",{}),re(r,"nodeHoverPrograms",{}),re(r,"edgePrograms",{}),r.settings=WL(o),El(r.settings),VL(n),!(i instanceof HTMLElement))throw new Error("Sigma: container should be an html element.");r.graph=n,r.container=i,r.createWebGLContext("edges",{picking:o.enableEdgeEvents}),r.createCanvasContext("edgeLabels"),r.createWebGLContext("nodes",{picking:!0}),r.createCanvasContext("labels"),r.createCanvasContext("hovers"),r.createWebGLContext("hoverNodes"),r.createCanvasContext("mouse",{style:{touchAction:"none",userSelect:"none"}}),r.resize();for(var s in r.settings.nodeProgramClasses)r.registerNodeProgram(s,r.settings.nodeProgramClasses[s],r.settings.nodeHoverProgramClasses[s]);for(var a in r.settings.edgeProgramClasses)r.registerEdgeProgram(a,r.settings.edgeProgramClasses[a]);return r.camera=new Sf,r.bindCameraHandlers(),r.mouseCaptor=new YL(r.elements.mouse,r),r.mouseCaptor.setSettings(r.settings),r.touchCaptor=new e2(r.elements.mouse,r),r.touchCaptor.setSettings(r.settings),r.bindEventHandlers(),r.bindGraphHandlers(),r.handleSettingsUpdate(),r.refresh(),r}return en(e,t),Ct(e,[{key:"registerNodeProgram",value:function(i,r,o){return this.nodePrograms[i]&&this.nodePrograms[i].kill(),this.nodeHoverPrograms[i]&&this.nodeHoverPrograms[i].kill(),this.nodePrograms[i]=new r(this.webGLContexts.nodes,this.frameBuffers.nodes,this),this.nodeHoverPrograms[i]=new(o||r)(this.webGLContexts.hoverNodes,null,this),this}},{key:"registerEdgeProgram",value:function(i,r){return this.edgePrograms[i]&&this.edgePrograms[i].kill(),this.edgePrograms[i]=new r(this.webGLContexts.edges,this.frameBuffers.edges,this),this}},{key:"unregisterNodeProgram",value:function(i){if(this.nodePrograms[i]){var r=this.nodePrograms,o=r[i],s=Al(r,[i].map(so));o.kill(),this.nodePrograms=s}if(this.nodeHoverPrograms[i]){var a=this.nodeHoverPrograms,l=a[i],c=Al(a,[i].map(so));l.kill(),this.nodePrograms=c}return this}},{key:"unregisterEdgeProgram",value:function(i){if(this.edgePrograms[i]){var r=this.edgePrograms,o=r[i],s=Al(r,[i].map(so));o.kill(),this.edgePrograms=s}return this}},{key:"resetWebGLTexture",value:function(i){var r=this.webGLContexts[i],o=this.frameBuffers[i],s=this.textures[i];s&&r.deleteTexture(s);var a=r.createTexture();return r.bindFramebuffer(r.FRAMEBUFFER,o),r.bindTexture(r.TEXTURE_2D,a),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,this.width,this.height,0,r.RGBA,r.UNSIGNED_BYTE,null),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,a,0),this.textures[i]=a,this}},{key:"bindCameraHandlers",value:function(){var i=this;return this.activeListeners.camera=function(){i.scheduleRender()},this.camera.on("updated",this.activeListeners.camera),this}},{key:"unbindCameraHandlers",value:function(){return this.camera.removeListener("updated",this.activeListeners.camera),this}},{key:"getNodeAtPosition",value:function(i){var r=i.x,o=i.y,s=df(this.webGLContexts.nodes,this.frameBuffers.nodes,r,o,this.pixelRatio,this.pickingDownSizingRatio),a=cf.apply(void 0,Tf(s)),l=this.itemIDsIndex[a];return l&&l.type==="node"?l.id:null}},{key:"bindEventHandlers",value:function(){var i=this;this.activeListeners.handleResize=function(){i.scheduleRefresh()},window.addEventListener("resize",this.activeListeners.handleResize),this.activeListeners.handleMove=function(o){var s=Vr(o),a={event:s,preventSigmaDefault:function(){s.preventSigmaDefault()}},l=i.getNodeAtPosition(s);if(l&&i.hoveredNode!==l&&!i.nodeDataCache[l].hidden){i.hoveredNode&&i.emit("leaveNode",xe(xe({},a),{},{node:i.hoveredNode})),i.hoveredNode=l,i.emit("enterNode",xe(xe({},a),{},{node:l})),i.scheduleHighlightedNodesRender();return}if(i.hoveredNode&&i.getNodeAtPosition(s)!==i.hoveredNode){var c=i.hoveredNode;i.hoveredNode=null,i.emit("leaveNode",xe(xe({},a),{},{node:c})),i.scheduleHighlightedNodesRender();return}if(i.settings.enableEdgeEvents){var d=i.hoveredNode?null:i.getEdgeAtPoint(a.event.x,a.event.y);d!==i.hoveredEdge&&(i.hoveredEdge&&i.emit("leaveEdge",xe(xe({},a),{},{edge:i.hoveredEdge})),d&&i.emit("enterEdge",xe(xe({},a),{},{edge:d})),i.hoveredEdge=d)}},this.activeListeners.handleMoveBody=function(o){var s=Vr(o);i.emit("moveBody",{event:s,preventSigmaDefault:function(){s.preventSigmaDefault()}})},this.activeListeners.handleLeave=function(o){var s=Vr(o),a={event:s,preventSigmaDefault:function(){s.preventSigmaDefault()}};i.hoveredNode&&(i.emit("leaveNode",xe(xe({},a),{},{node:i.hoveredNode})),i.scheduleHighlightedNodesRender()),i.settings.enableEdgeEvents&&i.hoveredEdge&&(i.emit("leaveEdge",xe(xe({},a),{},{edge:i.hoveredEdge})),i.scheduleHighlightedNodesRender()),i.emit("leaveStage",xe({},a))},this.activeListeners.handleEnter=function(o){var s=Vr(o),a={event:s,preventSigmaDefault:function(){s.preventSigmaDefault()}};i.emit("enterStage",xe({},a))};var r=function(s){return function(a){var l=Vr(a),c={event:l,preventSigmaDefault:function(){l.preventSigmaDefault()}},d=i.getNodeAtPosition(l);if(d)return i.emit("".concat(s,"Node"),xe(xe({},c),{},{node:d}));if(i.settings.enableEdgeEvents){var u=i.getEdgeAtPoint(l.x,l.y);if(u)return i.emit("".concat(s,"Edge"),xe(xe({},c),{},{edge:u}))}return i.emit("".concat(s,"Stage"),c)}};return this.activeListeners.handleClick=r("click"),this.activeListeners.handleRightClick=r("rightClick"),this.activeListeners.handleDoubleClick=r("doubleClick"),this.activeListeners.handleWheel=r("wheel"),this.activeListeners.handleDown=r("down"),this.activeListeners.handleUp=r("up"),this.mouseCaptor.on("mousemove",this.activeListeners.handleMove),this.mouseCaptor.on("mousemovebody",this.activeListeners.handleMoveBody),this.mouseCaptor.on("click",this.activeListeners.handleClick),this.mouseCaptor.on("rightClick",this.activeListeners.handleRightClick),this.mouseCaptor.on("doubleClick",this.activeListeners.handleDoubleClick),this.mouseCaptor.on("wheel",this.activeListeners.handleWheel),this.mouseCaptor.on("mousedown",this.activeListeners.handleDown),this.mouseCaptor.on("mouseup",this.activeListeners.handleUp),this.mouseCaptor.on("mouseleave",this.activeListeners.handleLeave),this.mouseCaptor.on("mouseenter",this.activeListeners.handleEnter),this.touchCaptor.on("touchdown",this.activeListeners.handleDown),this.touchCaptor.on("touchdown",this.activeListeners.handleMove),this.touchCaptor.on("touchup",this.activeListeners.handleUp),this.touchCaptor.on("touchmove",this.activeListeners.handleMove),this.touchCaptor.on("tap",this.activeListeners.handleClick),this.touchCaptor.on("doubletap",this.activeListeners.handleDoubleClick),this.touchCaptor.on("touchmove",this.activeListeners.handleMoveBody),this}},{key:"bindGraphHandlers",value:function(){var i=this,r=this.graph,o=new Set(["x","y","zIndex","type"]);return this.activeListeners.eachNodeAttributesUpdatedGraphUpdate=function(s){var a,l=(a=s.hints)===null||a===void 0?void 0:a.attributes;i.graph.forEachNode(function(d){return i.updateNode(d)});var c=!l||l.some(function(d){return o.has(d)});i.refresh({partialGraph:{nodes:r.nodes()},skipIndexation:!c,schedule:!0})},this.activeListeners.eachEdgeAttributesUpdatedGraphUpdate=function(s){var a,l=(a=s.hints)===null||a===void 0?void 0:a.attributes;i.graph.forEachEdge(function(d){return i.updateEdge(d)});var c=l&&["zIndex","type"].some(function(d){return l?.includes(d)});i.refresh({partialGraph:{edges:r.edges()},skipIndexation:!c,schedule:!0})},this.activeListeners.addNodeGraphUpdate=function(s){var a=s.key;i.addNode(a),i.refresh({partialGraph:{nodes:[a]},skipIndexation:!1,schedule:!0})},this.activeListeners.updateNodeGraphUpdate=function(s){var a=s.key;i.refresh({partialGraph:{nodes:[a]},skipIndexation:!1,schedule:!0})},this.activeListeners.dropNodeGraphUpdate=function(s){var a=s.key;i.removeNode(a),i.refresh({schedule:!0})},this.activeListeners.addEdgeGraphUpdate=function(s){var a=s.key;i.addEdge(a),i.refresh({partialGraph:{edges:[a]},schedule:!0})},this.activeListeners.updateEdgeGraphUpdate=function(s){var a=s.key;i.refresh({partialGraph:{edges:[a]},skipIndexation:!1,schedule:!0})},this.activeListeners.dropEdgeGraphUpdate=function(s){var a=s.key;i.removeEdge(a),i.refresh({schedule:!0})},this.activeListeners.clearEdgesGraphUpdate=function(){i.clearEdgeState(),i.clearEdgeIndices(),i.refresh({schedule:!0})},this.activeListeners.clearGraphUpdate=function(){i.clearEdgeState(),i.clearNodeState(),i.clearEdgeIndices(),i.clearNodeIndices(),i.refresh({schedule:!0})},r.on("nodeAdded",this.activeListeners.addNodeGraphUpdate),r.on("nodeDropped",this.activeListeners.dropNodeGraphUpdate),r.on("nodeAttributesUpdated",this.activeListeners.updateNodeGraphUpdate),r.on("eachNodeAttributesUpdated",this.activeListeners.eachNodeAttributesUpdatedGraphUpdate),r.on("edgeAdded",this.activeListeners.addEdgeGraphUpdate),r.on("edgeDropped",this.activeListeners.dropEdgeGraphUpdate),r.on("edgeAttributesUpdated",this.activeListeners.updateEdgeGraphUpdate),r.on("eachEdgeAttributesUpdated",this.activeListeners.eachEdgeAttributesUpdatedGraphUpdate),r.on("edgesCleared",this.activeListeners.clearEdgesGraphUpdate),r.on("cleared",this.activeListeners.clearGraphUpdate),this}},{key:"unbindGraphHandlers",value:function(){var i=this.graph;i.removeListener("nodeAdded",this.activeListeners.addNodeGraphUpdate),i.removeListener("nodeDropped",this.activeListeners.dropNodeGraphUpdate),i.removeListener("nodeAttributesUpdated",this.activeListeners.updateNodeGraphUpdate),i.removeListener("eachNodeAttributesUpdated",this.activeListeners.eachNodeAttributesUpdatedGraphUpdate),i.removeListener("edgeAdded",this.activeListeners.addEdgeGraphUpdate),i.removeListener("edgeDropped",this.activeListeners.dropEdgeGraphUpdate),i.removeListener("edgeAttributesUpdated",this.activeListeners.updateEdgeGraphUpdate),i.removeListener("eachEdgeAttributesUpdated",this.activeListeners.eachEdgeAttributesUpdatedGraphUpdate),i.removeListener("edgesCleared",this.activeListeners.clearEdgesGraphUpdate),i.removeListener("cleared",this.activeListeners.clearGraphUpdate)}},{key:"getEdgeAtPoint",value:function(i,r){var o=df(this.webGLContexts.edges,this.frameBuffers.edges,i,r,this.pixelRatio,this.pickingDownSizingRatio),s=cf.apply(void 0,Tf(o)),a=this.itemIDsIndex[s];return a&&a.type==="edge"?a.id:null}},{key:"process",value:function(){var i=this;this.emit("beforeProcess");var r=this.graph,o=this.settings,s=this.getDimensions();if(this.nodeExtent=BL(this.graph),!this.settings.autoRescale){var a=s.width,l=s.height,c=this.nodeExtent,d=c.x,u=c.y;this.nodeExtent={x:[(d[0]+d[1])/2-a/2,(d[0]+d[1])/2+a/2],y:[(u[0]+u[1])/2-l/2,(u[0]+u[1])/2+l/2]}}this.normalizationFunction=Af(this.customBBox||this.nodeExtent);var h=new Sf,f=Br(h.getState(),s,this.getGraphDimensions(),this.getStagePadding());this.labelGrid.resizeAndClear(s,o.labelGridCellSize);for(var p={},m={},w={},_={},x=1,k=r.nodes(),v=0,C=k.length;v<C;v++){var A=k[v],S=this.nodeDataCache[A],M=r.getNodeAttributes(A);S.x=M.x,S.y=M.y,this.normalizationFunction.applyTo(S),typeof S.label=="string"&&!S.hidden&&this.labelGrid.add(A,S.size,this.framedGraphToViewport(S,{matrix:f})),p[S.type]=(p[S.type]||0)+1}this.labelGrid.organize();for(var I in this.nodePrograms){if(!Vn.call(this.nodePrograms,I))throw new Error('Sigma: could not find a suitable program for node type "'.concat(I,'"!'));this.nodePrograms[I].reallocate(p[I]||0),p[I]=0}this.settings.zIndex&&this.nodeZExtent[0]!==this.nodeZExtent[1]&&(k=Ef(this.nodeZExtent,function(le){return i.nodeDataCache[le].zIndex},k));for(var D=0,O=k.length;D<O;D++){var $=k[D];m[$]=x,_[m[$]]={type:"node",id:$},x++;var j=this.nodeDataCache[$];this.addNodeToProgram($,m[$],p[j.type]++)}for(var E={},R=r.edges(),L=0,G=R.length;L<G;L++){var B=R[L],q=this.edgeDataCache[B];E[q.type]=(E[q.type]||0)+1}this.settings.zIndex&&this.edgeZExtent[0]!==this.edgeZExtent[1]&&(R=Ef(this.edgeZExtent,function(le){return i.edgeDataCache[le].zIndex},R));for(var ee in this.edgePrograms){if(!Vn.call(this.edgePrograms,ee))throw new Error('Sigma: could not find a suitable program for edge type "'.concat(ee,'"!'));this.edgePrograms[ee].reallocate(E[ee]||0),E[ee]=0}for(var fe=0,_e=R.length;fe<_e;fe++){var ke=R[fe];w[ke]=x,_[w[ke]]={type:"edge",id:ke},x++;var V=this.edgeDataCache[ke];this.addEdgeToProgram(ke,w[ke],E[V.type]++)}return this.itemIDsIndex=_,this.nodeIndices=m,this.edgeIndices=w,this.emit("afterProcess"),this}},{key:"handleSettingsUpdate",value:function(i){var r=this,o=this.settings;if(this.camera.minRatio=o.minCameraRatio,this.camera.maxRatio=o.maxCameraRatio,this.camera.enabledZooming=o.enableCameraZooming,this.camera.enabledPanning=o.enableCameraPanning,this.camera.enabledRotation=o.enableCameraRotation,o.cameraPanBoundaries?this.camera.clean=function(d){return r.cleanCameraState(d,o.cameraPanBoundaries&&Pc(o.cameraPanBoundaries)==="object"?o.cameraPanBoundaries:{})}:this.camera.clean=null,this.camera.setState(this.camera.validateState(this.camera.getState())),i){if(i.edgeProgramClasses!==o.edgeProgramClasses){for(var s in o.edgeProgramClasses)o.edgeProgramClasses[s]!==i.edgeProgramClasses[s]&&this.registerEdgeProgram(s,o.edgeProgramClasses[s]);for(var a in i.edgeProgramClasses)o.edgeProgramClasses[a]||this.unregisterEdgeProgram(a)}if(i.nodeProgramClasses!==o.nodeProgramClasses||i.nodeHoverProgramClasses!==o.nodeHoverProgramClasses){for(var l in o.nodeProgramClasses)(o.nodeProgramClasses[l]!==i.nodeProgramClasses[l]||o.nodeHoverProgramClasses[l]!==i.nodeHoverProgramClasses[l])&&this.registerNodeProgram(l,o.nodeProgramClasses[l],o.nodeHoverProgramClasses[l]);for(var c in i.nodeProgramClasses)o.nodeProgramClasses[c]||this.unregisterNodeProgram(c)}}return this.mouseCaptor.setSettings(this.settings),this.touchCaptor.setSettings(this.settings),this}},{key:"cleanCameraState",value:function(i){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=r.tolerance,s=o===void 0?0:o,a=r.boundaries,l=xe({},i),c=a||this.nodeExtent,d=Ar(c.x,2),u=d[0],h=d[1],f=Ar(c.y,2),p=f[0],m=f[1],w=[this.graphToViewport({x:u,y:p},{cameraState:i}),this.graphToViewport({x:h,y:p},{cameraState:i}),this.graphToViewport({x:u,y:m},{cameraState:i}),this.graphToViewport({x:h,y:m},{cameraState:i})],_=1/0,x=-1/0,k=1/0,v=-1/0;w.forEach(function(E){var R=E.x,L=E.y;_=Math.min(_,R),x=Math.max(x,R),k=Math.min(k,L),v=Math.max(v,L)});var C=x-_,A=v-k,S=this.getDimensions(),M=S.width,I=S.height,D=0,O=0;if(C>=M?x<M-s?D=x-(M-s):_>s&&(D=_-s):x>M+s?D=x-(M+s):_<-s&&(D=_+s),A>=I?v<I-s?O=v-(I-s):k>s&&(O=k-s):v>I+s?O=v-(I+s):k<-s&&(O=k+s),D||O){var $=this.viewportToFramedGraph({x:0,y:0},{cameraState:i}),j=this.viewportToFramedGraph({x:D,y:O},{cameraState:i});D=j.x-$.x,O=j.y-$.y,l.x+=D,l.y+=O}return l}},{key:"renderLabels",value:function(){if(!this.settings.renderLabels)return this;var i=this.camera.getState(),r=this.labelGrid.getLabelsToDisplay(i.ratio,this.settings.labelDensity);Cf(r,this.nodesWithForcedLabels),this.displayedNodeLabels=new Set;for(var o=this.canvasContexts.labels,s=0,a=r.length;s<a;s++){var l=r[s],c=this.nodeDataCache[l];if(!this.displayedNodeLabels.has(l)&&!c.hidden){var d=this.framedGraphToViewport(c),u=d.x,h=d.y,f=this.scaleSize(c.size);if(!(!c.forceLabel&&f<this.settings.labelRenderedSizeThreshold)&&!(u<-Lf||u>this.width+Lf||h<-If||h>this.height+If)){this.displayedNodeLabels.add(l);var p=this.settings.defaultDrawNodeLabel,m=this.nodePrograms[c.type],w=m?.drawLabel||p;w(o,xe(xe({key:l},c),{},{size:f,x:u,y:h}),this.settings)}}}return this}},{key:"renderEdgeLabels",value:function(){if(!this.settings.renderEdgeLabels)return this;var i=this.canvasContexts.edgeLabels;i.clearRect(0,0,this.width,this.height);var r=o2({graph:this.graph,hoveredNode:this.hoveredNode,displayedNodeLabels:this.displayedNodeLabels,highlightedNodes:this.highlightedNodes});Cf(r,this.edgesWithForcedLabels);for(var o=new Set,s=0,a=r.length;s<a;s++){var l=r[s],c=this.graph.extremities(l),d=this.nodeDataCache[c[0]],u=this.nodeDataCache[c[1]],h=this.edgeDataCache[l];if(!o.has(l)&&!(h.hidden||d.hidden||u.hidden)){var f=this.settings.defaultDrawEdgeLabel,p=this.edgePrograms[h.type],m=p?.drawLabel||f;m(i,xe(xe({key:l},h),{},{size:this.scaleSize(h.size)}),xe(xe(xe({key:c[0]},d),this.framedGraphToViewport(d)),{},{size:this.scaleSize(d.size)}),xe(xe(xe({key:c[1]},u),this.framedGraphToViewport(u)),{},{size:this.scaleSize(u.size)}),this.settings),o.add(l)}}return this.displayedEdgeLabels=o,this}},{key:"renderHighlightedNodes",value:function(){var i=this,r=this.canvasContexts.hovers;r.clearRect(0,0,this.width,this.height);var o=function(f){var p=i.nodeDataCache[f],m=i.framedGraphToViewport(p),w=m.x,_=m.y,x=i.scaleSize(p.size),k=i.settings.defaultDrawNodeHover,v=i.nodePrograms[p.type],C=v?.drawHover||k;C(r,xe(xe({key:f},p),{},{size:x,x:w,y:_}),i.settings)},s=[];this.hoveredNode&&!this.nodeDataCache[this.hoveredNode].hidden&&s.push(this.hoveredNode),this.highlightedNodes.forEach(function(h){h!==i.hoveredNode&&s.push(h)}),s.forEach(function(h){return o(h)});var a={};s.forEach(function(h){var f=i.nodeDataCache[h].type;a[f]=(a[f]||0)+1});for(var l in this.nodeHoverPrograms)this.nodeHoverPrograms[l].reallocate(a[l]||0),a[l]=0;s.forEach(function(h){var f=i.nodeDataCache[h];i.nodeHoverPrograms[f.type].process(0,a[f.type]++,f)}),this.webGLContexts.hoverNodes.clear(this.webGLContexts.hoverNodes.COLOR_BUFFER_BIT);var c=this.getRenderParams();for(var d in this.nodeHoverPrograms){var u=this.nodeHoverPrograms[d];u.render(c)}}},{key:"scheduleHighlightedNodesRender",value:function(){var i=this;this.renderHighlightedNodesFrame||this.renderFrame||(this.renderHighlightedNodesFrame=requestAnimationFrame(function(){i.renderHighlightedNodesFrame=null,i.renderHighlightedNodes(),i.renderEdgeLabels()}))}},{key:"render",value:function(){var i=this;this.emit("beforeRender");var r=function(){return i.emit("afterRender"),i};if(this.renderFrame&&(cancelAnimationFrame(this.renderFrame),this.renderFrame=null),this.resize(),this.needToProcess&&this.process(),this.needToProcess=!1,this.clear(),this.pickingLayers.forEach(function(w){return i.resetWebGLTexture(w)}),!this.graph.order)return r();var o=this.mouseCaptor,s=this.camera.isAnimated()||o.isMoving||o.draggedEvents||o.currentWheelDirection,a=this.camera.getState(),l=this.getDimensions(),c=this.getGraphDimensions(),d=this.getStagePadding();this.matrix=Br(a,l,c,d),this.invMatrix=Br(a,l,c,d,!0),this.correctionRatio=zL(this.matrix,a,l),this.graphToViewportRatio=this.getGraphToViewportRatio();var u=this.getRenderParams();for(var h in this.nodePrograms){var f=this.nodePrograms[h];f.render(u)}if(!this.settings.hideEdgesOnMove||!s)for(var p in this.edgePrograms){var m=this.edgePrograms[p];m.render(u)}return this.settings.hideLabelsOnMove&&s||(this.renderLabels(),this.renderEdgeLabels(),this.renderHighlightedNodes()),r()}},{key:"addNode",value:function(i){var r=Object.assign({},this.graph.getNodeAttributes(i));this.settings.nodeReducer&&(r=this.settings.nodeReducer(i,r));var o=s2(this.settings,i,r);this.nodeDataCache[i]=o,this.nodesWithForcedLabels.delete(i),o.forceLabel&&!o.hidden&&this.nodesWithForcedLabels.add(i),this.highlightedNodes.delete(i),o.highlighted&&!o.hidden&&this.highlightedNodes.add(i),this.settings.zIndex&&(o.zIndex<this.nodeZExtent[0]&&(this.nodeZExtent[0]=o.zIndex),o.zIndex>this.nodeZExtent[1]&&(this.nodeZExtent[1]=o.zIndex))}},{key:"updateNode",value:function(i){this.addNode(i);var r=this.nodeDataCache[i];this.normalizationFunction.applyTo(r)}},{key:"removeNode",value:function(i){delete this.nodeDataCache[i],delete this.nodeProgramIndex[i],this.highlightedNodes.delete(i),this.hoveredNode===i&&(this.hoveredNode=null),this.nodesWithForcedLabels.delete(i)}},{key:"addEdge",value:function(i){var r=Object.assign({},this.graph.getEdgeAttributes(i));this.settings.edgeReducer&&(r=this.settings.edgeReducer(i,r));var o=a2(this.settings,i,r);this.edgeDataCache[i]=o,this.edgesWithForcedLabels.delete(i),o.forceLabel&&!o.hidden&&this.edgesWithForcedLabels.add(i),this.settings.zIndex&&(o.zIndex<this.edgeZExtent[0]&&(this.edgeZExtent[0]=o.zIndex),o.zIndex>this.edgeZExtent[1]&&(this.edgeZExtent[1]=o.zIndex))}},{key:"updateEdge",value:function(i){this.addEdge(i)}},{key:"removeEdge",value:function(i){delete this.edgeDataCache[i],delete this.edgeProgramIndex[i],this.hoveredEdge===i&&(this.hoveredEdge=null),this.edgesWithForcedLabels.delete(i)}},{key:"clearNodeIndices",value:function(){this.labelGrid=new Rf,this.nodeExtent={x:[0,1],y:[0,1]},this.nodeDataCache={},this.edgeProgramIndex={},this.nodesWithForcedLabels=new Set,this.nodeZExtent=[1/0,-1/0],this.highlightedNodes=new Set}},{key:"clearEdgeIndices",value:function(){this.edgeDataCache={},this.edgeProgramIndex={},this.edgesWithForcedLabels=new Set,this.edgeZExtent=[1/0,-1/0]}},{key:"clearIndices",value:function(){this.clearEdgeIndices(),this.clearNodeIndices()}},{key:"clearNodeState",value:function(){this.displayedNodeLabels=new Set,this.highlightedNodes=new Set,this.hoveredNode=null}},{key:"clearEdgeState",value:function(){this.displayedEdgeLabels=new Set,this.highlightedNodes=new Set,this.hoveredEdge=null}},{key:"clearState",value:function(){this.clearEdgeState(),this.clearNodeState()}},{key:"addNodeToProgram",value:function(i,r,o){var s=this.nodeDataCache[i],a=this.nodePrograms[s.type];if(!a)throw new Error('Sigma: could not find a suitable program for node type "'.concat(s.type,'"!'));a.process(r,o,s),this.nodeProgramIndex[i]=o}},{key:"addEdgeToProgram",value:function(i,r,o){var s=this.edgeDataCache[i],a=this.edgePrograms[s.type];if(!a)throw new Error('Sigma: could not find a suitable program for edge type "'.concat(s.type,'"!'));var l=this.graph.extremities(i),c=this.nodeDataCache[l[0]],d=this.nodeDataCache[l[1]];a.process(r,o,c,d,s),this.edgeProgramIndex[i]=o}},{key:"getRenderParams",value:function(){return{matrix:this.matrix,invMatrix:this.invMatrix,width:this.width,height:this.height,pixelRatio:this.pixelRatio,zoomRatio:this.camera.ratio,cameraAngle:this.camera.angle,sizeRatio:1/this.scaleSize(),correctionRatio:this.correctionRatio,downSizingRatio:this.pickingDownSizingRatio,minEdgeThickness:this.settings.minEdgeThickness,antiAliasingFeather:this.settings.antiAliasingFeather}}},{key:"getStagePadding",value:function(){var i=this.settings,r=i.stagePadding,o=i.autoRescale;return o&&r||0}},{key:"createLayer",value:function(i,r){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(this.elements[i])throw new Error('Sigma: a layer named "'.concat(i,'" already exists'));var s=UL(r,{position:"absolute"},{class:"sigma-".concat(i)});return o.style&&Object.assign(s.style,o.style),this.elements[i]=s,"beforeLayer"in o&&o.beforeLayer?this.elements[o.beforeLayer].before(s):"afterLayer"in o&&o.afterLayer?this.elements[o.afterLayer].after(s):this.container.appendChild(s),s}},{key:"createCanvas",value:function(i){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.createLayer(i,"canvas",r)}},{key:"createCanvasContext",value:function(i){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=this.createCanvas(i,r),s={preserveDrawingBuffer:!1,antialias:!1};return this.canvasContexts[i]=o.getContext("2d",s),this}},{key:"createWebGLContext",value:function(i){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=r?.canvas||this.createCanvas(i,r);r.hidden&&o.remove();var s=xe({preserveDrawingBuffer:!1,antialias:!1},r),a;a=o.getContext("webgl2",s),a||(a=o.getContext("webgl",s)),a||(a=o.getContext("experimental-webgl",s));var l=a;if(this.webGLContexts[i]=l,l.blendFunc(l.ONE,l.ONE_MINUS_SRC_ALPHA),r.picking){this.pickingLayers.add(i);var c=l.createFramebuffer();if(!c)throw new Error("Sigma: cannot create a new frame buffer for layer ".concat(i));this.frameBuffers[i]=c}return l}},{key:"killLayer",value:function(i){var r=this.elements[i];if(!r)throw new Error("Sigma: cannot kill layer ".concat(i,", which does not exist"));if(this.webGLContexts[i]){var o,s=this.webGLContexts[i];(o=s.getExtension("WEBGL_lose_context"))===null||o===void 0||o.loseContext(),delete this.webGLContexts[i]}else this.canvasContexts[i]&&delete this.canvasContexts[i];return r.remove(),delete this.elements[i],this}},{key:"getCamera",value:function(){return this.camera}},{key:"setCamera",value:function(i){this.unbindCameraHandlers(),this.camera=i,this.bindCameraHandlers()}},{key:"getContainer",value:function(){return this.container}},{key:"getGraph",value:function(){return this.graph}},{key:"setGraph",value:function(i){i!==this.graph&&(this.hoveredNode&&!i.hasNode(this.hoveredNode)&&(this.hoveredNode=null),this.hoveredEdge&&!i.hasEdge(this.hoveredEdge)&&(this.hoveredEdge=null),this.unbindGraphHandlers(),this.checkEdgesEventsFrame!==null&&(cancelAnimationFrame(this.checkEdgesEventsFrame),this.checkEdgesEventsFrame=null),this.graph=i,this.bindGraphHandlers(),this.refresh())}},{key:"getMouseCaptor",value:function(){return this.mouseCaptor}},{key:"getTouchCaptor",value:function(){return this.touchCaptor}},{key:"getDimensions",value:function(){return{width:this.width,height:this.height}}},{key:"getGraphDimensions",value:function(){var i=this.customBBox||this.nodeExtent;return{width:i.x[1]-i.x[0]||1,height:i.y[1]-i.y[0]||1}}},{key:"getNodeDisplayData",value:function(i){var r=this.nodeDataCache[i];return r?Object.assign({},r):void 0}},{key:"getEdgeDisplayData",value:function(i){var r=this.edgeDataCache[i];return r?Object.assign({},r):void 0}},{key:"getNodeDisplayedLabels",value:function(){return new Set(this.displayedNodeLabels)}},{key:"getEdgeDisplayedLabels",value:function(){return new Set(this.displayedEdgeLabels)}},{key:"getSettings",value:function(){return xe({},this.settings)}},{key:"getSetting",value:function(i){return this.settings[i]}},{key:"setSetting",value:function(i,r){var o=xe({},this.settings);return this.settings[i]=r,El(this.settings),this.handleSettingsUpdate(o),this.scheduleRefresh(),this}},{key:"updateSetting",value:function(i,r){return this.setSetting(i,r(this.settings[i])),this}},{key:"setSettings",value:function(i){var r=xe({},this.settings);return this.settings=xe(xe({},this.settings),i),El(this.settings),this.handleSettingsUpdate(r),this.scheduleRefresh(),this}},{key:"resize",value:function(i){var r=this.width,o=this.height;if(this.width=this.container.offsetWidth,this.height=this.container.offsetHeight,this.pixelRatio=kf(),this.width===0)if(this.settings.allowInvalidContainer)this.width=1;else throw new Error("Sigma: Container has no width. You can set the allowInvalidContainer setting to true to stop seeing this error.");if(this.height===0)if(this.settings.allowInvalidContainer)this.height=1;else throw new Error("Sigma: Container has no height. You can set the allowInvalidContainer setting to true to stop seeing this error.");if(!i&&r===this.width&&o===this.height)return this;for(var s in this.elements){var a=this.elements[s];a.style.width=this.width+"px",a.style.height=this.height+"px"}for(var l in this.canvasContexts)this.elements[l].setAttribute("width",this.width*this.pixelRatio+"px"),this.elements[l].setAttribute("height",this.height*this.pixelRatio+"px"),this.pixelRatio!==1&&this.canvasContexts[l].scale(this.pixelRatio,this.pixelRatio);for(var c in this.webGLContexts){this.elements[c].setAttribute("width",this.width*this.pixelRatio+"px"),this.elements[c].setAttribute("height",this.height*this.pixelRatio+"px");var d=this.webGLContexts[c];if(d.viewport(0,0,this.width*this.pixelRatio,this.height*this.pixelRatio),this.pickingLayers.has(c)){var u=this.textures[c];u&&d.deleteTexture(u)}}return this.emit("resize"),this}},{key:"clear",value:function(){return this.emit("beforeClear"),this.webGLContexts.nodes.bindFramebuffer(WebGLRenderingContext.FRAMEBUFFER,null),this.webGLContexts.nodes.clear(WebGLRenderingContext.COLOR_BUFFER_BIT),this.webGLContexts.edges.bindFramebuffer(WebGLRenderingContext.FRAMEBUFFER,null),this.webGLContexts.edges.clear(WebGLRenderingContext.COLOR_BUFFER_BIT),this.webGLContexts.hoverNodes.clear(WebGLRenderingContext.COLOR_BUFFER_BIT),this.canvasContexts.labels.clearRect(0,0,this.width,this.height),this.canvasContexts.hovers.clearRect(0,0,this.width,this.height),this.canvasContexts.edgeLabels.clearRect(0,0,this.width,this.height),this.emit("afterClear"),this}},{key:"refresh",value:function(i){var r=this,o=i?.skipIndexation!==void 0?i?.skipIndexation:!1,s=i?.schedule!==void 0?i.schedule:!1,a=!i||!i.partialGraph;if(a)this.clearEdgeIndices(),this.clearNodeIndices(),this.graph.forEachNode(function(v){return r.addNode(v)}),this.graph.forEachEdge(function(v){return r.addEdge(v)});else{for(var l,c,d=((l=i.partialGraph)===null||l===void 0?void 0:l.nodes)||[],u=0,h=d?.length||0;u<h;u++){var f=d[u];if(this.updateNode(f),o){var p=this.nodeProgramIndex[f];if(p===void 0)throw new Error('Sigma: node "'.concat(f,`" can't be repaint`));this.addNodeToProgram(f,this.nodeIndices[f],p)}}for(var m=(i==null||(c=i.partialGraph)===null||c===void 0?void 0:c.edges)||[],w=0,_=m.length;w<_;w++){var x=m[w];if(this.updateEdge(x),o){var k=this.edgeProgramIndex[x];if(k===void 0)throw new Error('Sigma: edge "'.concat(x,`" can't be repaint`));this.addEdgeToProgram(x,this.edgeIndices[x],k)}}}return(a||!o)&&(this.needToProcess=!0),s?this.scheduleRender():this.render(),this}},{key:"scheduleRender",value:function(){var i=this;return this.renderFrame||(this.renderFrame=requestAnimationFrame(function(){i.render()})),this}},{key:"scheduleRefresh",value:function(i){return this.refresh(xe(xe({},i),{},{schedule:!0}))}},{key:"getViewportZoomedState",value:function(i,r){var o=this.camera.getState(),s=o.ratio,a=o.angle,l=o.x,c=o.y,d=this.settings,u=d.minCameraRatio,h=d.maxCameraRatio;typeof h=="number"&&(r=Math.min(r,h)),typeof u=="number"&&(r=Math.max(r,u));var f=r/s,p={x:this.width/2,y:this.height/2},m=this.viewportToFramedGraph(i),w=this.viewportToFramedGraph(p);return{angle:a,x:(m.x-w.x)*(1-f)+l,y:(m.y-w.y)*(1-f)+c,ratio:r}}},{key:"viewRectangle",value:function(){var i=this.viewportToFramedGraph({x:0,y:0}),r=this.viewportToFramedGraph({x:this.width,y:0}),o=this.viewportToFramedGraph({x:0,y:this.height});return{x1:i.x,y1:i.y,x2:r.x,y2:r.y,height:r.y-o.y}}},{key:"framedGraphToViewport",value:function(i){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=!!r.cameraState||!!r.viewportDimensions||!!r.graphDimensions,s=r.matrix?r.matrix:o?Br(r.cameraState||this.camera.getState(),r.viewportDimensions||this.getDimensions(),r.graphDimensions||this.getGraphDimensions(),r.padding||this.getStagePadding()):this.matrix,a=Ic(s,i);return{x:(1+a.x)*this.width/2,y:(1-a.y)*this.height/2}}},{key:"viewportToFramedGraph",value:function(i){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=!!r.cameraState||!!r.viewportDimensions||!r.graphDimensions,s=r.matrix?r.matrix:o?Br(r.cameraState||this.camera.getState(),r.viewportDimensions||this.getDimensions(),r.graphDimensions||this.getGraphDimensions(),r.padding||this.getStagePadding(),!0):this.invMatrix,a=Ic(s,{x:i.x/this.width*2-1,y:1-i.y/this.height*2});return isNaN(a.x)&&(a.x=0),isNaN(a.y)&&(a.y=0),a}},{key:"viewportToGraph",value:function(i){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.normalizationFunction.inverse(this.viewportToFramedGraph(i,r))}},{key:"graphToViewport",value:function(i){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.framedGraphToViewport(this.normalizationFunction(i),r)}},{key:"getGraphToViewportRatio",value:function(){var i={x:0,y:0},r={x:1,y:1},o=Math.sqrt(Math.pow(i.x-r.x,2)+Math.pow(i.y-r.y,2)),s=this.graphToViewport(i),a=this.graphToViewport(r),l=Math.sqrt(Math.pow(s.x-a.x,2)+Math.pow(s.y-a.y,2));return l/o}},{key:"getBBox",value:function(){return this.nodeExtent}},{key:"getCustomBBox",value:function(){return this.customBBox}},{key:"setCustomBBox",value:function(i){return this.customBBox=i,this.scheduleRender(),this}},{key:"kill",value:function(){this.emit("kill"),this.removeAllListeners(),this.unbindCameraHandlers(),window.removeEventListener("resize",this.activeListeners.handleResize),this.mouseCaptor.kill(),this.touchCaptor.kill(),this.unbindGraphHandlers(),this.clearIndices(),this.clearState(),this.nodeDataCache={},this.edgeDataCache={},this.highlightedNodes.clear(),this.renderFrame&&(cancelAnimationFrame(this.renderFrame),this.renderFrame=null),this.renderHighlightedNodesFrame&&(cancelAnimationFrame(this.renderHighlightedNodesFrame),this.renderHighlightedNodesFrame=null);for(var i=this.container;i.firstChild;)i.removeChild(i.firstChild);for(var r in this.nodePrograms)this.nodePrograms[r].kill();for(var o in this.nodeHoverPrograms)this.nodeHoverPrograms[o].kill();for(var s in this.edgePrograms)this.edgePrograms[s].kill();this.nodePrograms={},this.nodeHoverPrograms={},this.edgePrograms={};for(var a in this.elements)this.killLayer(a);this.canvasContexts={},this.webGLContexts={},this.elements={}}},{key:"scaleSize",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.camera.ratio;return i/this.settings.zoomToSizeRatioFunction(r)*(this.getSetting("itemSizesReference")==="positions"?r*this.graphToViewportRatio:1)}},{key:"getCanvases",value:function(){var i={};for(var r in this.elements)this.elements[r]instanceof HTMLCanvasElement&&(i[r]=this.elements[r]);return i}}])})(zd),c2=l2,Cl,Pf;function Vd(){if(Pf)return Cl;Pf=1;function t(e){if(typeof e!="function")throw new Error("obliterator/iterator: expecting a function!");this.next=e}return typeof Symbol<"u"&&(t.prototype[Symbol.iterator]=function(){return this}),t.of=function(){var e=arguments,n=e.length,i=0;return new t(function(){return i>=n?{done:!0}:{done:!1,value:e[i++]}})},t.empty=function(){var e=new t(function(){return{done:!0}});return e},t.fromSequence=function(e){var n=0,i=e.length;return new t(function(){return n>=i?{done:!0}:{done:!1,value:e[n++]}})},t.is=function(e){return e instanceof t?!0:typeof e=="object"&&e!==null&&typeof e.next=="function"},Cl=t,Cl}var d2=Vd();const Yt=Oa(d2);var as={},Df;function u2(){return Df||(Df=1,as.ARRAY_BUFFER_SUPPORT=typeof ArrayBuffer<"u",as.SYMBOL_SUPPORT=typeof Symbol<"u"),as}var Sl,Mf;function My(){if(Mf)return Sl;Mf=1;var t=Vd(),e=u2(),n=e.ARRAY_BUFFER_SUPPORT,i=e.SYMBOL_SUPPORT;function r(o){return typeof o=="string"||Array.isArray(o)||n&&ArrayBuffer.isView(o)?t.fromSequence(o):typeof o!="object"||o===null?null:i&&typeof o[Symbol.iterator]=="function"?o[Symbol.iterator]():typeof o.next=="function"?o:null}return Sl=function(s){var a=r(s);if(!a)throw new Error("obliterator: target is not iterable nor a valid iterator.");return a},Sl}var Tl,Of;function h2(){if(Of)return Tl;Of=1;var t=My();return Tl=function(n,i){for(var r=arguments.length>1?i:1/0,o=r!==1/0?new Array(r):[],s,a=0,l=t(n);;){if(a===r)return o;if(s=l.next(),s.done)return a!==i&&(o.length=a),o;o[a++]=s.value}},Tl}var f2=h2();const Oy=Oa(f2);var Nl,Gf;function g2(){if(Gf)return Nl;Gf=1;var t=Vd(),e=My();return Nl=function(){var i=arguments,r=null,o=-1;return new t(function(){var a=null;do{if(r===null){if(o++,o>=i.length)return{done:!0};r=e(i[o])}if(a=r.next(),a.done===!0){r=null;continue}break}while(!0);return a})},Nl}var p2=g2();const Hn=Oa(p2);function m2(){const t=arguments[0];for(let e=1,n=arguments.length;e<n;e++)if(arguments[e])for(const i in arguments[e])t[i]=arguments[e][i];return t}let st=m2;typeof Object.assign=="function"&&(st=Object.assign);function Xt(t,e,n,i){const r=t._nodes.get(e);let o=null;return r&&(i==="mixed"?o=r.out&&r.out[n]||r.undirected&&r.undirected[n]:i==="directed"?o=r.out&&r.out[n]:o=r.undirected&&r.undirected[n]),o}function ht(t){return typeof t=="object"&&t!==null}function Gy(t){let e;for(e in t)return!1;return!0}function Ht(t,e,n){Object.defineProperty(t,e,{enumerable:!1,configurable:!1,writable:!0,value:n})}function tn(t,e,n){const i={enumerable:!0,configurable:!0};typeof n=="function"?i.get=n:(i.value=n,i.writable=!1),Object.defineProperty(t,e,i)}function Ff(t){return!(!ht(t)||t.attributes&&!Array.isArray(t.attributes))}function y2(){let t=Math.floor(Math.random()*256)&255;return()=>t++}class Ud extends Error{constructor(e){super(),this.name="GraphError",this.message=e}}class be extends Ud{constructor(e){super(e),this.name="InvalidArgumentsGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,be.prototype.constructor)}}class he extends Ud{constructor(e){super(e),this.name="NotFoundGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,he.prototype.constructor)}}class Se extends Ud{constructor(e){super(e),this.name="UsageGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,Se.prototype.constructor)}}function Fy(t,e){this.key=t,this.attributes=e,this.clear()}Fy.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.undirectedDegree=0,this.undirectedLoops=0,this.directedLoops=0,this.in={},this.out={},this.undirected={}};function $y(t,e){this.key=t,this.attributes=e,this.clear()}$y.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.directedLoops=0,this.in={},this.out={}};function zy(t,e){this.key=t,this.attributes=e,this.clear()}zy.prototype.clear=function(){this.undirectedDegree=0,this.undirectedLoops=0,this.undirected={}};function Nr(t,e,n,i,r){this.key=e,this.attributes=r,this.undirected=t,this.source=n,this.target=i}Nr.prototype.attach=function(){let t="out",e="in";this.undirected&&(t=e="undirected");const n=this.source.key,i=this.target.key;this.source[t][i]=this,!(this.undirected&&n===i)&&(this.target[e][n]=this)};Nr.prototype.attachMulti=function(){let t="out",e="in";const n=this.source.key,i=this.target.key;this.undirected&&(t=e="undirected");const r=this.source[t],o=r[i];if(typeof o>"u"){r[i]=this,this.undirected&&n===i||(this.target[e][n]=this);return}o.previous=this,this.next=o,r[i]=this,this.target[e][n]=this};Nr.prototype.detach=function(){const t=this.source.key,e=this.target.key;let n="out",i="in";this.undirected&&(n=i="undirected"),delete this.source[n][e],delete this.target[i][t]};Nr.prototype.detachMulti=function(){const t=this.source.key,e=this.target.key;let n="out",i="in";this.undirected&&(n=i="undirected"),this.previous===void 0?this.next===void 0?(delete this.source[n][e],delete this.target[i][t]):(this.next.previous=void 0,this.source[n][e]=this.next,this.target[i][t]=this.next):(this.previous.next=this.next,this.next!==void 0&&(this.next.previous=this.previous))};const By=0,Vy=1,v2=2,Uy=3;function Jn(t,e,n,i,r,o,s){let a,l,c,d;if(i=""+i,n===By){if(a=t._nodes.get(i),!a)throw new he(`Graph.${e}: could not find the "${i}" node in the graph.`);c=r,d=o}else if(n===Uy){if(r=""+r,l=t._edges.get(r),!l)throw new he(`Graph.${e}: could not find the "${r}" edge in the graph.`);const u=l.source.key,h=l.target.key;if(i===u)a=l.target;else if(i===h)a=l.source;else throw new he(`Graph.${e}: the "${i}" node is not attached to the "${r}" edge (${u}, ${h}).`);c=o,d=s}else{if(l=t._edges.get(i),!l)throw new he(`Graph.${e}: could not find the "${i}" edge in the graph.`);n===Vy?a=l.source:a=l.target,c=r,d=o}return[a,c,d]}function b2(t,e,n){t.prototype[e]=function(i,r,o){const[s,a]=Jn(this,e,n,i,r,o);return s.attributes[a]}}function _2(t,e,n){t.prototype[e]=function(i,r){const[o]=Jn(this,e,n,i,r);return o.attributes}}function w2(t,e,n){t.prototype[e]=function(i,r,o){const[s,a]=Jn(this,e,n,i,r,o);return s.attributes.hasOwnProperty(a)}}function x2(t,e,n){t.prototype[e]=function(i,r,o,s){const[a,l,c]=Jn(this,e,n,i,r,o,s);return a.attributes[l]=c,this.emit("nodeAttributesUpdated",{key:a.key,type:"set",attributes:a.attributes,name:l}),this}}function k2(t,e,n){t.prototype[e]=function(i,r,o,s){const[a,l,c]=Jn(this,e,n,i,r,o,s);if(typeof c!="function")throw new be(`Graph.${e}: updater should be a function.`);const d=a.attributes,u=c(d[l]);return d[l]=u,this.emit("nodeAttributesUpdated",{key:a.key,type:"set",attributes:a.attributes,name:l}),this}}function E2(t,e,n){t.prototype[e]=function(i,r,o){const[s,a]=Jn(this,e,n,i,r,o);return delete s.attributes[a],this.emit("nodeAttributesUpdated",{key:s.key,type:"remove",attributes:s.attributes,name:a}),this}}function A2(t,e,n){t.prototype[e]=function(i,r,o){const[s,a]=Jn(this,e,n,i,r,o);if(!ht(a))throw new be(`Graph.${e}: provided attributes are not a plain object.`);return s.attributes=a,this.emit("nodeAttributesUpdated",{key:s.key,type:"replace",attributes:s.attributes}),this}}function C2(t,e,n){t.prototype[e]=function(i,r,o){const[s,a]=Jn(this,e,n,i,r,o);if(!ht(a))throw new be(`Graph.${e}: provided attributes are not a plain object.`);return st(s.attributes,a),this.emit("nodeAttributesUpdated",{key:s.key,type:"merge",attributes:s.attributes,data:a}),this}}function S2(t,e,n){t.prototype[e]=function(i,r,o){const[s,a]=Jn(this,e,n,i,r,o);if(typeof a!="function")throw new be(`Graph.${e}: provided updater is not a function.`);return s.attributes=a(s.attributes),this.emit("nodeAttributesUpdated",{key:s.key,type:"update",attributes:s.attributes}),this}}const T2=[{name:t=>`get${t}Attribute`,attacher:b2},{name:t=>`get${t}Attributes`,attacher:_2},{name:t=>`has${t}Attribute`,attacher:w2},{name:t=>`set${t}Attribute`,attacher:x2},{name:t=>`update${t}Attribute`,attacher:k2},{name:t=>`remove${t}Attribute`,attacher:E2},{name:t=>`replace${t}Attributes`,attacher:A2},{name:t=>`merge${t}Attributes`,attacher:C2},{name:t=>`update${t}Attributes`,attacher:S2}];function N2(t){T2.forEach(function({name:e,attacher:n}){n(t,e("Node"),By),n(t,e("Source"),Vy),n(t,e("Target"),v2),n(t,e("Opposite"),Uy)})}function R2(t,e,n){t.prototype[e]=function(i,r){let o;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Se(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Se(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+i,a=""+r;if(r=arguments[2],o=Xt(this,s,a,n),!o)throw new he(`Graph.${e}: could not find an edge for the given path ("${s}" - "${a}").`)}else{if(n!=="mixed")throw new Se(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,o=this._edges.get(i),!o)throw new he(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return o.attributes[r]}}function L2(t,e,n){t.prototype[e]=function(i){let r;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Se(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>1){if(this.multi)throw new Se(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,s=""+arguments[1];if(r=Xt(this,o,s,n),!r)throw new he(`Graph.${e}: could not find an edge for the given path ("${o}" - "${s}").`)}else{if(n!=="mixed")throw new Se(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,r=this._edges.get(i),!r)throw new he(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return r.attributes}}function I2(t,e,n){t.prototype[e]=function(i,r){let o;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Se(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Se(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+i,a=""+r;if(r=arguments[2],o=Xt(this,s,a,n),!o)throw new he(`Graph.${e}: could not find an edge for the given path ("${s}" - "${a}").`)}else{if(n!=="mixed")throw new Se(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,o=this._edges.get(i),!o)throw new he(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return o.attributes.hasOwnProperty(r)}}function P2(t,e,n){t.prototype[e]=function(i,r,o){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Se(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new Se(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+i,l=""+r;if(r=arguments[2],o=arguments[3],s=Xt(this,a,l,n),!s)throw new he(`Graph.${e}: could not find an edge for the given path ("${a}" - "${l}").`)}else{if(n!=="mixed")throw new Se(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new he(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return s.attributes[r]=o,this.emit("edgeAttributesUpdated",{key:s.key,type:"set",attributes:s.attributes,name:r}),this}}function D2(t,e,n){t.prototype[e]=function(i,r,o){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Se(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new Se(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+i,l=""+r;if(r=arguments[2],o=arguments[3],s=Xt(this,a,l,n),!s)throw new he(`Graph.${e}: could not find an edge for the given path ("${a}" - "${l}").`)}else{if(n!=="mixed")throw new Se(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new he(`Graph.${e}: could not find the "${i}" edge in the graph.`)}if(typeof o!="function")throw new be(`Graph.${e}: updater should be a function.`);return s.attributes[r]=o(s.attributes[r]),this.emit("edgeAttributesUpdated",{key:s.key,type:"set",attributes:s.attributes,name:r}),this}}function M2(t,e,n){t.prototype[e]=function(i,r){let o;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Se(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Se(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+i,a=""+r;if(r=arguments[2],o=Xt(this,s,a,n),!o)throw new he(`Graph.${e}: could not find an edge for the given path ("${s}" - "${a}").`)}else{if(n!=="mixed")throw new Se(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,o=this._edges.get(i),!o)throw new he(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return delete o.attributes[r],this.emit("edgeAttributesUpdated",{key:o.key,type:"remove",attributes:o.attributes,name:r}),this}}function O2(t,e,n){t.prototype[e]=function(i,r){let o;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Se(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Se(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+i,a=""+r;if(r=arguments[2],o=Xt(this,s,a,n),!o)throw new he(`Graph.${e}: could not find an edge for the given path ("${s}" - "${a}").`)}else{if(n!=="mixed")throw new Se(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,o=this._edges.get(i),!o)throw new he(`Graph.${e}: could not find the "${i}" edge in the graph.`)}if(!ht(r))throw new be(`Graph.${e}: provided attributes are not a plain object.`);return o.attributes=r,this.emit("edgeAttributesUpdated",{key:o.key,type:"replace",attributes:o.attributes}),this}}function G2(t,e,n){t.prototype[e]=function(i,r){let o;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Se(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Se(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+i,a=""+r;if(r=arguments[2],o=Xt(this,s,a,n),!o)throw new he(`Graph.${e}: could not find an edge for the given path ("${s}" - "${a}").`)}else{if(n!=="mixed")throw new Se(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,o=this._edges.get(i),!o)throw new he(`Graph.${e}: could not find the "${i}" edge in the graph.`)}if(!ht(r))throw new be(`Graph.${e}: provided attributes are not a plain object.`);return st(o.attributes,r),this.emit("edgeAttributesUpdated",{key:o.key,type:"merge",attributes:o.attributes,data:r}),this}}function F2(t,e,n){t.prototype[e]=function(i,r){let o;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Se(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Se(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+i,a=""+r;if(r=arguments[2],o=Xt(this,s,a,n),!o)throw new he(`Graph.${e}: could not find an edge for the given path ("${s}" - "${a}").`)}else{if(n!=="mixed")throw new Se(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,o=this._edges.get(i),!o)throw new he(`Graph.${e}: could not find the "${i}" edge in the graph.`)}if(typeof r!="function")throw new be(`Graph.${e}: provided updater is not a function.`);return o.attributes=r(o.attributes),this.emit("edgeAttributesUpdated",{key:o.key,type:"update",attributes:o.attributes}),this}}const $2=[{name:t=>`get${t}Attribute`,attacher:R2},{name:t=>`get${t}Attributes`,attacher:L2},{name:t=>`has${t}Attribute`,attacher:I2},{name:t=>`set${t}Attribute`,attacher:P2},{name:t=>`update${t}Attribute`,attacher:D2},{name:t=>`remove${t}Attribute`,attacher:M2},{name:t=>`replace${t}Attributes`,attacher:O2},{name:t=>`merge${t}Attributes`,attacher:G2},{name:t=>`update${t}Attributes`,attacher:F2}];function z2(t){$2.forEach(function({name:e,attacher:n}){n(t,e("Edge"),"mixed"),n(t,e("DirectedEdge"),"directed"),n(t,e("UndirectedEdge"),"undirected")})}const B2=[{name:"edges",type:"mixed"},{name:"inEdges",type:"directed",direction:"in"},{name:"outEdges",type:"directed",direction:"out"},{name:"inboundEdges",type:"mixed",direction:"in"},{name:"outboundEdges",type:"mixed",direction:"out"},{name:"directedEdges",type:"directed"},{name:"undirectedEdges",type:"undirected"}];function V2(t,e,n,i){let r=!1;for(const o in e){if(o===i)continue;const s=e[o];if(r=n(s.key,s.attributes,s.source.key,s.target.key,s.source.attributes,s.target.attributes,s.undirected),t&&r)return s.key}}function U2(t,e,n,i){let r,o,s,a=!1;for(const l in e)if(l!==i){r=e[l];do{if(o=r.source,s=r.target,a=n(r.key,r.attributes,o.key,s.key,o.attributes,s.attributes,r.undirected),t&&a)return r.key;r=r.next}while(r!==void 0)}}function Rl(t,e){const n=Object.keys(t),i=n.length;let r,o=0;return new Yt(function(){do if(r)r=r.next;else{if(o>=i)return{done:!0};const a=n[o++];if(a===e){r=void 0;continue}r=t[a]}while(!r);return{done:!1,value:{edge:r.key,attributes:r.attributes,source:r.source.key,target:r.target.key,sourceAttributes:r.source.attributes,targetAttributes:r.target.attributes,undirected:r.undirected}}})}function j2(t,e,n,i){const r=e[n];if(!r)return;const o=r.source,s=r.target;if(i(r.key,r.attributes,o.key,s.key,o.attributes,s.attributes,r.undirected)&&t)return r.key}function H2(t,e,n,i){let r=e[n];if(!r)return;let o=!1;do{if(o=i(r.key,r.attributes,r.source.key,r.target.key,r.source.attributes,r.target.attributes,r.undirected),t&&o)return r.key;r=r.next}while(r!==void 0)}function Ll(t,e){let n=t[e];return n.next!==void 0?new Yt(function(){if(!n)return{done:!0};const i={edge:n.key,attributes:n.attributes,source:n.source.key,target:n.target.key,sourceAttributes:n.source.attributes,targetAttributes:n.target.attributes,undirected:n.undirected};return n=n.next,{done:!1,value:i}}):Yt.of({edge:n.key,attributes:n.attributes,source:n.source.key,target:n.target.key,sourceAttributes:n.source.attributes,targetAttributes:n.target.attributes,undirected:n.undirected})}function W2(t,e){if(t.size===0)return[];if(e==="mixed"||e===t.type)return typeof Array.from=="function"?Array.from(t._edges.keys()):Oy(t._edges.keys(),t._edges.size);const n=e==="undirected"?t.undirectedSize:t.directedSize,i=new Array(n),r=e==="undirected",o=t._edges.values();let s=0,a,l;for(;a=o.next(),a.done!==!0;)l=a.value,l.undirected===r&&(i[s++]=l.key);return i}function jy(t,e,n,i){if(e.size===0)return;const r=n!=="mixed"&&n!==e.type,o=n==="undirected";let s,a,l=!1;const c=e._edges.values();for(;s=c.next(),s.done!==!0;){if(a=s.value,r&&a.undirected!==o)continue;const{key:d,attributes:u,source:h,target:f}=a;if(l=i(d,u,h.key,f.key,h.attributes,f.attributes,a.undirected),t&&l)return d}}function q2(t,e){if(t.size===0)return Yt.empty();const n=e!=="mixed"&&e!==t.type,i=e==="undirected",r=t._edges.values();return new Yt(function(){let s,a;for(;;){if(s=r.next(),s.done)return s;if(a=s.value,!(n&&a.undirected!==i))break}return{value:{edge:a.key,attributes:a.attributes,source:a.source.key,target:a.target.key,sourceAttributes:a.source.attributes,targetAttributes:a.target.attributes,undirected:a.undirected},done:!1}})}function jd(t,e,n,i,r,o){const s=e?U2:V2;let a;if(n!=="undirected"&&(i!=="out"&&(a=s(t,r.in,o),t&&a)||i!=="in"&&(a=s(t,r.out,o,i?void 0:r.key),t&&a))||n!=="directed"&&(a=s(t,r.undirected,o),t&&a))return a}function K2(t,e,n,i){const r=[];return jd(!1,t,e,n,i,function(o){r.push(o)}),r}function X2(t,e,n){let i=Yt.empty();return t!=="undirected"&&(e!=="out"&&typeof n.in<"u"&&(i=Hn(i,Rl(n.in))),e!=="in"&&typeof n.out<"u"&&(i=Hn(i,Rl(n.out,e?void 0:n.key)))),t!=="directed"&&typeof n.undirected<"u"&&(i=Hn(i,Rl(n.undirected))),i}function Hd(t,e,n,i,r,o,s){const a=n?H2:j2;let l;if(e!=="undirected"&&(typeof r.in<"u"&&i!=="out"&&(l=a(t,r.in,o,s),t&&l)||typeof r.out<"u"&&i!=="in"&&(i||r.key!==o)&&(l=a(t,r.out,o,s),t&&l))||e!=="directed"&&typeof r.undirected<"u"&&(l=a(t,r.undirected,o,s),t&&l))return l}function Z2(t,e,n,i,r){const o=[];return Hd(!1,t,e,n,i,r,function(s){o.push(s)}),o}function Y2(t,e,n,i){let r=Yt.empty();return t!=="undirected"&&(typeof n.in<"u"&&e!=="out"&&i in n.in&&(r=Hn(r,Ll(n.in,i))),typeof n.out<"u"&&e!=="in"&&i in n.out&&(e||n.key!==i)&&(r=Hn(r,Ll(n.out,i)))),t!=="directed"&&typeof n.undirected<"u"&&i in n.undirected&&(r=Hn(r,Ll(n.undirected,i))),r}function J2(t,e){const{name:n,type:i,direction:r}=e;t.prototype[n]=function(o,s){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return[];if(!arguments.length)return W2(this,i);if(arguments.length===1){o=""+o;const a=this._nodes.get(o);if(typeof a>"u")throw new he(`Graph.${n}: could not find the "${o}" node in the graph.`);return K2(this.multi,i==="mixed"?this.type:i,r,a)}if(arguments.length===2){o=""+o,s=""+s;const a=this._nodes.get(o);if(!a)throw new he(`Graph.${n}:  could not find the "${o}" source node in the graph.`);if(!this._nodes.has(s))throw new he(`Graph.${n}:  could not find the "${s}" target node in the graph.`);return Z2(i,this.multi,r,a,s)}throw new be(`Graph.${n}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function Q2(t,e){const{name:n,type:i,direction:r}=e,o="forEach"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[o]=function(c,d,u){if(!(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)){if(arguments.length===1)return u=c,jy(!1,this,i,u);if(arguments.length===2){c=""+c,u=d;const h=this._nodes.get(c);if(typeof h>"u")throw new he(`Graph.${o}: could not find the "${c}" node in the graph.`);return jd(!1,this.multi,i==="mixed"?this.type:i,r,h,u)}if(arguments.length===3){c=""+c,d=""+d;const h=this._nodes.get(c);if(!h)throw new he(`Graph.${o}:  could not find the "${c}" source node in the graph.`);if(!this._nodes.has(d))throw new he(`Graph.${o}:  could not find the "${d}" target node in the graph.`);return Hd(!1,i,this.multi,r,h,d,u)}throw new be(`Graph.${o}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)}};const s="map"+n[0].toUpperCase()+n.slice(1);t.prototype[s]=function(){const c=Array.prototype.slice.call(arguments),d=c.pop();let u;if(c.length===0){let h=0;i!=="directed"&&(h+=this.undirectedSize),i!=="undirected"&&(h+=this.directedSize),u=new Array(h);let f=0;c.push((p,m,w,_,x,k,v)=>{u[f++]=d(p,m,w,_,x,k,v)})}else u=[],c.push((h,f,p,m,w,_,x)=>{u.push(d(h,f,p,m,w,_,x))});return this[o].apply(this,c),u};const a="filter"+n[0].toUpperCase()+n.slice(1);t.prototype[a]=function(){const c=Array.prototype.slice.call(arguments),d=c.pop(),u=[];return c.push((h,f,p,m,w,_,x)=>{d(h,f,p,m,w,_,x)&&u.push(h)}),this[o].apply(this,c),u};const l="reduce"+n[0].toUpperCase()+n.slice(1);t.prototype[l]=function(){let c=Array.prototype.slice.call(arguments);if(c.length<2||c.length>4)throw new be(`Graph.${l}: invalid number of arguments (expecting 2, 3 or 4 and got ${c.length}).`);if(typeof c[c.length-1]=="function"&&typeof c[c.length-2]!="function")throw new be(`Graph.${l}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let d,u;c.length===2?(d=c[0],u=c[1],c=[]):c.length===3?(d=c[1],u=c[2],c=[c[0]]):c.length===4&&(d=c[2],u=c[3],c=[c[0],c[1]]);let h=u;return c.push((f,p,m,w,_,x,k)=>{h=d(h,f,p,m,w,_,x,k)}),this[o].apply(this,c),h}}function eI(t,e){const{name:n,type:i,direction:r}=e,o="find"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[o]=function(l,c,d){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return!1;if(arguments.length===1)return d=l,jy(!0,this,i,d);if(arguments.length===2){l=""+l,d=c;const u=this._nodes.get(l);if(typeof u>"u")throw new he(`Graph.${o}: could not find the "${l}" node in the graph.`);return jd(!0,this.multi,i==="mixed"?this.type:i,r,u,d)}if(arguments.length===3){l=""+l,c=""+c;const u=this._nodes.get(l);if(!u)throw new he(`Graph.${o}:  could not find the "${l}" source node in the graph.`);if(!this._nodes.has(c))throw new he(`Graph.${o}:  could not find the "${c}" target node in the graph.`);return Hd(!0,i,this.multi,r,u,c,d)}throw new be(`Graph.${o}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)};const s="some"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[s]=function(){const l=Array.prototype.slice.call(arguments),c=l.pop();return l.push((u,h,f,p,m,w,_)=>c(u,h,f,p,m,w,_)),!!this[o].apply(this,l)};const a="every"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[a]=function(){const l=Array.prototype.slice.call(arguments),c=l.pop();return l.push((u,h,f,p,m,w,_)=>!c(u,h,f,p,m,w,_)),!this[o].apply(this,l)}}function tI(t,e){const{name:n,type:i,direction:r}=e,o=n.slice(0,-1)+"Entries";t.prototype[o]=function(s,a){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return Yt.empty();if(!arguments.length)return q2(this,i);if(arguments.length===1){s=""+s;const l=this._nodes.get(s);if(!l)throw new he(`Graph.${o}: could not find the "${s}" node in the graph.`);return X2(i,r,l)}if(arguments.length===2){s=""+s,a=""+a;const l=this._nodes.get(s);if(!l)throw new he(`Graph.${o}:  could not find the "${s}" source node in the graph.`);if(!this._nodes.has(a))throw new he(`Graph.${o}:  could not find the "${a}" target node in the graph.`);return Y2(i,r,l,a)}throw new be(`Graph.${o}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function nI(t){B2.forEach(e=>{J2(t,e),Q2(t,e),eI(t,e),tI(t,e)})}const iI=[{name:"neighbors",type:"mixed"},{name:"inNeighbors",type:"directed",direction:"in"},{name:"outNeighbors",type:"directed",direction:"out"},{name:"inboundNeighbors",type:"mixed",direction:"in"},{name:"outboundNeighbors",type:"mixed",direction:"out"},{name:"directedNeighbors",type:"directed"},{name:"undirectedNeighbors",type:"undirected"}];function Ga(){this.A=null,this.B=null}Ga.prototype.wrap=function(t){this.A===null?this.A=t:this.B===null&&(this.B=t)};Ga.prototype.has=function(t){return this.A!==null&&t in this.A||this.B!==null&&t in this.B};function jr(t,e,n,i,r){for(const o in i){const s=i[o],a=s.source,l=s.target,c=a===n?l:a;if(e&&e.has(c.key))continue;const d=r(c.key,c.attributes);if(t&&d)return c.key}}function Wd(t,e,n,i,r){if(e!=="mixed"){if(e==="undirected")return jr(t,null,i,i.undirected,r);if(typeof n=="string")return jr(t,null,i,i[n],r)}const o=new Ga;let s;if(e!=="undirected"){if(n!=="out"){if(s=jr(t,null,i,i.in,r),t&&s)return s;o.wrap(i.in)}if(n!=="in"){if(s=jr(t,o,i,i.out,r),t&&s)return s;o.wrap(i.out)}}if(e!=="directed"&&(s=jr(t,o,i,i.undirected,r),t&&s))return s}function rI(t,e,n){if(t!=="mixed"){if(t==="undirected")return Object.keys(n.undirected);if(typeof e=="string")return Object.keys(n[e])}const i=[];return Wd(!1,t,e,n,function(r){i.push(r)}),i}function Hr(t,e,n){const i=Object.keys(n),r=i.length;let o=0;return new Yt(function(){let a=null;do{if(o>=r)return t&&t.wrap(n),{done:!0};const l=n[i[o++]],c=l.source,d=l.target;if(a=c===e?d:c,t&&t.has(a.key)){a=null;continue}}while(a===null);return{done:!1,value:{neighbor:a.key,attributes:a.attributes}}})}function oI(t,e,n){if(t!=="mixed"){if(t==="undirected")return Hr(null,n,n.undirected);if(typeof e=="string")return Hr(null,n,n[e])}let i=Yt.empty();const r=new Ga;return t!=="undirected"&&(e!=="out"&&(i=Hn(i,Hr(r,n,n.in))),e!=="in"&&(i=Hn(i,Hr(r,n,n.out)))),t!=="directed"&&(i=Hn(i,Hr(r,n,n.undirected))),i}function sI(t,e){const{name:n,type:i,direction:r}=e;t.prototype[n]=function(o){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return[];o=""+o;const s=this._nodes.get(o);if(typeof s>"u")throw new he(`Graph.${n}: could not find the "${o}" node in the graph.`);return rI(i==="mixed"?this.type:i,r,s)}}function aI(t,e){const{name:n,type:i,direction:r}=e,o="forEach"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[o]=function(c,d){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return;c=""+c;const u=this._nodes.get(c);if(typeof u>"u")throw new he(`Graph.${o}: could not find the "${c}" node in the graph.`);Wd(!1,i==="mixed"?this.type:i,r,u,d)};const s="map"+n[0].toUpperCase()+n.slice(1);t.prototype[s]=function(c,d){const u=[];return this[o](c,(h,f)=>{u.push(d(h,f))}),u};const a="filter"+n[0].toUpperCase()+n.slice(1);t.prototype[a]=function(c,d){const u=[];return this[o](c,(h,f)=>{d(h,f)&&u.push(h)}),u};const l="reduce"+n[0].toUpperCase()+n.slice(1);t.prototype[l]=function(c,d,u){if(arguments.length<3)throw new be(`Graph.${l}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let h=u;return this[o](c,(f,p)=>{h=d(h,f,p)}),h}}function lI(t,e){const{name:n,type:i,direction:r}=e,o=n[0].toUpperCase()+n.slice(1,-1),s="find"+o;t.prototype[s]=function(c,d){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return;c=""+c;const u=this._nodes.get(c);if(typeof u>"u")throw new he(`Graph.${s}: could not find the "${c}" node in the graph.`);return Wd(!0,i==="mixed"?this.type:i,r,u,d)};const a="some"+o;t.prototype[a]=function(c,d){return!!this[s](c,d)};const l="every"+o;t.prototype[l]=function(c,d){return!this[s](c,(h,f)=>!d(h,f))}}function cI(t,e){const{name:n,type:i,direction:r}=e,o=n.slice(0,-1)+"Entries";t.prototype[o]=function(s){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return Yt.empty();s=""+s;const a=this._nodes.get(s);if(typeof a>"u")throw new he(`Graph.${o}: could not find the "${s}" node in the graph.`);return oI(i==="mixed"?this.type:i,r,a)}}function dI(t){iI.forEach(e=>{sI(t,e),aI(t,e),lI(t,e),cI(t,e)})}function ls(t,e,n,i,r){const o=i._nodes.values(),s=i.type;let a,l,c,d,u,h;for(;a=o.next(),a.done!==!0;){let f=!1;if(l=a.value,s!=="undirected"){d=l.out;for(c in d){u=d[c];do h=u.target,f=!0,r(l.key,h.key,l.attributes,h.attributes,u.key,u.attributes,u.undirected),u=u.next;while(u)}}if(s!=="directed"){d=l.undirected;for(c in d)if(!(e&&l.key>c)){u=d[c];do h=u.target,h.key!==c&&(h=u.source),f=!0,r(l.key,h.key,l.attributes,h.attributes,u.key,u.attributes,u.undirected),u=u.next;while(u)}}n&&!f&&r(l.key,null,l.attributes,null,null,null,null)}}function uI(t,e){const n={key:t};return Gy(e.attributes)||(n.attributes=st({},e.attributes)),n}function hI(t,e,n){const i={key:e,source:n.source.key,target:n.target.key};return Gy(n.attributes)||(i.attributes=st({},n.attributes)),t==="mixed"&&n.undirected&&(i.undirected=!0),i}function fI(t){if(!ht(t))throw new be('Graph.import: invalid serialized node. A serialized node should be a plain object with at least a "key" property.');if(!("key"in t))throw new be("Graph.import: serialized node is missing its key.");if("attributes"in t&&(!ht(t.attributes)||t.attributes===null))throw new be("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.")}function gI(t){if(!ht(t))throw new be('Graph.import: invalid serialized edge. A serialized edge should be a plain object with at least a "source" & "target" property.');if(!("source"in t))throw new be("Graph.import: serialized edge is missing its source.");if(!("target"in t))throw new be("Graph.import: serialized edge is missing its target.");if("attributes"in t&&(!ht(t.attributes)||t.attributes===null))throw new be("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.");if("undirected"in t&&typeof t.undirected!="boolean")throw new be("Graph.import: invalid undirectedness information. Undirected should be boolean or omitted.")}const pI=y2(),mI=new Set(["directed","undirected","mixed"]),$f=new Set(["domain","_events","_eventsCount","_maxListeners"]),yI=[{name:t=>`${t}Edge`,generateKey:!0},{name:t=>`${t}DirectedEdge`,generateKey:!0,type:"directed"},{name:t=>`${t}UndirectedEdge`,generateKey:!0,type:"undirected"},{name:t=>`${t}EdgeWithKey`},{name:t=>`${t}DirectedEdgeWithKey`,type:"directed"},{name:t=>`${t}UndirectedEdgeWithKey`,type:"undirected"}],vI={allowSelfLoops:!0,multi:!1,type:"mixed"};function bI(t,e,n){if(n&&!ht(n))throw new be(`Graph.addNode: invalid attributes. Expecting an object but got "${n}"`);if(e=""+e,n=n||{},t._nodes.has(e))throw new Se(`Graph.addNode: the "${e}" node already exist in the graph.`);const i=new t.NodeDataClass(e,n);return t._nodes.set(e,i),t.emit("nodeAdded",{key:e,attributes:n}),i}function zf(t,e,n){const i=new t.NodeDataClass(e,n);return t._nodes.set(e,i),t.emit("nodeAdded",{key:e,attributes:n}),i}function Hy(t,e,n,i,r,o,s,a){if(!i&&t.type==="undirected")throw new Se(`Graph.${e}: you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead.`);if(i&&t.type==="directed")throw new Se(`Graph.${e}: you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead.`);if(a&&!ht(a))throw new be(`Graph.${e}: invalid attributes. Expecting an object but got "${a}"`);if(o=""+o,s=""+s,a=a||{},!t.allowSelfLoops&&o===s)throw new Se(`Graph.${e}: source & target are the same ("${o}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);const l=t._nodes.get(o),c=t._nodes.get(s);if(!l)throw new he(`Graph.${e}: source node "${o}" not found.`);if(!c)throw new he(`Graph.${e}: target node "${s}" not found.`);const d={key:null,undirected:i,source:o,target:s,attributes:a};if(n)r=t._edgeKeyGenerator();else if(r=""+r,t._edges.has(r))throw new Se(`Graph.${e}: the "${r}" edge already exists in the graph.`);if(!t.multi&&(i?typeof l.undirected[s]<"u":typeof l.out[s]<"u"))throw new Se(`Graph.${e}: an edge linking "${o}" to "${s}" already exists. If you really want to add multiple edges linking those nodes, you should create a multi graph by using the 'multi' option.`);const u=new Nr(i,r,l,c,a);t._edges.set(r,u);const h=o===s;return i?(l.undirectedDegree++,c.undirectedDegree++,h&&(l.undirectedLoops++,t._undirectedSelfLoopCount++)):(l.outDegree++,c.inDegree++,h&&(l.directedLoops++,t._directedSelfLoopCount++)),t.multi?u.attachMulti():u.attach(),i?t._undirectedSize++:t._directedSize++,d.key=r,t.emit("edgeAdded",d),r}function _I(t,e,n,i,r,o,s,a,l){if(!i&&t.type==="undirected")throw new Se(`Graph.${e}: you cannot merge/update a directed edge to an undirected graph. Use the #.mergeEdge/#.updateEdge or #.addUndirectedEdge instead.`);if(i&&t.type==="directed")throw new Se(`Graph.${e}: you cannot merge/update an undirected edge to a directed graph. Use the #.mergeEdge/#.updateEdge or #.addDirectedEdge instead.`);if(a){if(l){if(typeof a!="function")throw new be(`Graph.${e}: invalid updater function. Expecting a function but got "${a}"`)}else if(!ht(a))throw new be(`Graph.${e}: invalid attributes. Expecting an object but got "${a}"`)}o=""+o,s=""+s;let c;if(l&&(c=a,a=void 0),!t.allowSelfLoops&&o===s)throw new Se(`Graph.${e}: source & target are the same ("${o}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);let d=t._nodes.get(o),u=t._nodes.get(s),h,f;if(!n&&(h=t._edges.get(r),h)){if((h.source.key!==o||h.target.key!==s)&&(!i||h.source.key!==s||h.target.key!==o))throw new Se(`Graph.${e}: inconsistency detected when attempting to merge the "${r}" edge with "${o}" source & "${s}" target vs. ("${h.source.key}", "${h.target.key}").`);f=h}if(!f&&!t.multi&&d&&(f=i?d.undirected[s]:d.out[s]),f){const x=[f.key,!1,!1,!1];if(l?!c:!a)return x;if(l){const k=f.attributes;f.attributes=c(k),t.emit("edgeAttributesUpdated",{type:"replace",key:f.key,attributes:f.attributes})}else st(f.attributes,a),t.emit("edgeAttributesUpdated",{type:"merge",key:f.key,attributes:f.attributes,data:a});return x}a=a||{},l&&c&&(a=c(a));const p={key:null,undirected:i,source:o,target:s,attributes:a};if(n)r=t._edgeKeyGenerator();else if(r=""+r,t._edges.has(r))throw new Se(`Graph.${e}: the "${r}" edge already exists in the graph.`);let m=!1,w=!1;d||(d=zf(t,o,{}),m=!0,o===s&&(u=d,w=!0)),u||(u=zf(t,s,{}),w=!0),h=new Nr(i,r,d,u,a),t._edges.set(r,h);const _=o===s;return i?(d.undirectedDegree++,u.undirectedDegree++,_&&(d.undirectedLoops++,t._undirectedSelfLoopCount++)):(d.outDegree++,u.inDegree++,_&&(d.directedLoops++,t._directedSelfLoopCount++)),t.multi?h.attachMulti():h.attach(),i?t._undirectedSize++:t._directedSize++,p.key=r,t.emit("edgeAdded",p),[r,!0,m,w]}function Wi(t,e){t._edges.delete(e.key);const{source:n,target:i,attributes:r}=e,o=e.undirected,s=n===i;o?(n.undirectedDegree--,i.undirectedDegree--,s&&(n.undirectedLoops--,t._undirectedSelfLoopCount--)):(n.outDegree--,i.inDegree--,s&&(n.directedLoops--,t._directedSelfLoopCount--)),t.multi?e.detachMulti():e.detach(),o?t._undirectedSize--:t._directedSize--,t.emit("edgeDropped",{key:e.key,attributes:r,source:n.key,target:i.key,undirected:o})}class Ve extends Iy.EventEmitter{constructor(e){if(super(),e=st({},vI,e),typeof e.multi!="boolean")throw new be(`Graph.constructor: invalid 'multi' option. Expecting a boolean but got "${e.multi}".`);if(!mI.has(e.type))throw new be(`Graph.constructor: invalid 'type' option. Should be one of "mixed", "directed" or "undirected" but got "${e.type}".`);if(typeof e.allowSelfLoops!="boolean")throw new be(`Graph.constructor: invalid 'allowSelfLoops' option. Expecting a boolean but got "${e.allowSelfLoops}".`);const n=e.type==="mixed"?Fy:e.type==="directed"?$y:zy;Ht(this,"NodeDataClass",n);const i="geid_"+pI()+"_";let r=0;const o=()=>{let s;do s=i+r++;while(this._edges.has(s));return s};Ht(this,"_attributes",{}),Ht(this,"_nodes",new Map),Ht(this,"_edges",new Map),Ht(this,"_directedSize",0),Ht(this,"_undirectedSize",0),Ht(this,"_directedSelfLoopCount",0),Ht(this,"_undirectedSelfLoopCount",0),Ht(this,"_edgeKeyGenerator",o),Ht(this,"_options",e),$f.forEach(s=>Ht(this,s,this[s])),tn(this,"order",()=>this._nodes.size),tn(this,"size",()=>this._edges.size),tn(this,"directedSize",()=>this._directedSize),tn(this,"undirectedSize",()=>this._undirectedSize),tn(this,"selfLoopCount",()=>this._directedSelfLoopCount+this._undirectedSelfLoopCount),tn(this,"directedSelfLoopCount",()=>this._directedSelfLoopCount),tn(this,"undirectedSelfLoopCount",()=>this._undirectedSelfLoopCount),tn(this,"multi",this._options.multi),tn(this,"type",this._options.type),tn(this,"allowSelfLoops",this._options.allowSelfLoops),tn(this,"implementation",()=>"graphology")}_resetInstanceCounters(){this._directedSize=0,this._undirectedSize=0,this._directedSelfLoopCount=0,this._undirectedSelfLoopCount=0}hasNode(e){return this._nodes.has(""+e)}hasDirectedEdge(e,n){if(this.type==="undirected")return!1;if(arguments.length===1){const i=""+e,r=this._edges.get(i);return!!r&&!r.undirected}else if(arguments.length===2){e=""+e,n=""+n;const i=this._nodes.get(e);return i?i.out.hasOwnProperty(n):!1}throw new be(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasUndirectedEdge(e,n){if(this.type==="directed")return!1;if(arguments.length===1){const i=""+e,r=this._edges.get(i);return!!r&&r.undirected}else if(arguments.length===2){e=""+e,n=""+n;const i=this._nodes.get(e);return i?i.undirected.hasOwnProperty(n):!1}throw new be(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasEdge(e,n){if(arguments.length===1){const i=""+e;return this._edges.has(i)}else if(arguments.length===2){e=""+e,n=""+n;const i=this._nodes.get(e);return i?typeof i.out<"u"&&i.out.hasOwnProperty(n)||typeof i.undirected<"u"&&i.undirected.hasOwnProperty(n):!1}throw new be(`Graph.hasEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}directedEdge(e,n){if(this.type==="undirected")return;if(e=""+e,n=""+n,this.multi)throw new Se("Graph.directedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.directedEdges instead.");const i=this._nodes.get(e);if(!i)throw new he(`Graph.directedEdge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(n))throw new he(`Graph.directedEdge: could not find the "${n}" target node in the graph.`);const r=i.out&&i.out[n]||void 0;if(r)return r.key}undirectedEdge(e,n){if(this.type==="directed")return;if(e=""+e,n=""+n,this.multi)throw new Se("Graph.undirectedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.undirectedEdges instead.");const i=this._nodes.get(e);if(!i)throw new he(`Graph.undirectedEdge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(n))throw new he(`Graph.undirectedEdge: could not find the "${n}" target node in the graph.`);const r=i.undirected&&i.undirected[n]||void 0;if(r)return r.key}edge(e,n){if(this.multi)throw new Se("Graph.edge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.edges instead.");e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new he(`Graph.edge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(n))throw new he(`Graph.edge: could not find the "${n}" target node in the graph.`);const r=i.out&&i.out[n]||i.undirected&&i.undirected[n]||void 0;if(r)return r.key}areDirectedNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new he(`Graph.areDirectedNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:n in i.in||n in i.out}areOutNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new he(`Graph.areOutNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:n in i.out}areInNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new he(`Graph.areInNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:n in i.in}areUndirectedNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new he(`Graph.areUndirectedNeighbors: could not find the "${e}" node in the graph.`);return this.type==="directed"?!1:n in i.undirected}areNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new he(`Graph.areNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&(n in i.in||n in i.out)||this.type!=="directed"&&n in i.undirected}areInboundNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new he(`Graph.areInboundNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&n in i.in||this.type!=="directed"&&n in i.undirected}areOutboundNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new he(`Graph.areOutboundNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&n in i.out||this.type!=="directed"&&n in i.undirected}inDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new he(`Graph.inDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree}outDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new he(`Graph.outDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.outDegree}directedDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new he(`Graph.directedDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree+n.outDegree}undirectedDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new he(`Graph.undirectedDegree: could not find the "${e}" node in the graph.`);return this.type==="directed"?0:n.undirectedDegree}inboundDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new he(`Graph.inboundDegree: could not find the "${e}" node in the graph.`);let i=0;return this.type!=="directed"&&(i+=n.undirectedDegree),this.type!=="undirected"&&(i+=n.inDegree),i}outboundDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new he(`Graph.outboundDegree: could not find the "${e}" node in the graph.`);let i=0;return this.type!=="directed"&&(i+=n.undirectedDegree),this.type!=="undirected"&&(i+=n.outDegree),i}degree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new he(`Graph.degree: could not find the "${e}" node in the graph.`);let i=0;return this.type!=="directed"&&(i+=n.undirectedDegree),this.type!=="undirected"&&(i+=n.inDegree+n.outDegree),i}inDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new he(`Graph.inDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree-n.directedLoops}outDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new he(`Graph.outDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.outDegree-n.directedLoops}directedDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new he(`Graph.directedDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree+n.outDegree-n.directedLoops*2}undirectedDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new he(`Graph.undirectedDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="directed"?0:n.undirectedDegree-n.undirectedLoops*2}inboundDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new he(`Graph.inboundDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let i=0,r=0;return this.type!=="directed"&&(i+=n.undirectedDegree,r+=n.undirectedLoops*2),this.type!=="undirected"&&(i+=n.inDegree,r+=n.directedLoops),i-r}outboundDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new he(`Graph.outboundDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let i=0,r=0;return this.type!=="directed"&&(i+=n.undirectedDegree,r+=n.undirectedLoops*2),this.type!=="undirected"&&(i+=n.outDegree,r+=n.directedLoops),i-r}degreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new he(`Graph.degreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let i=0,r=0;return this.type!=="directed"&&(i+=n.undirectedDegree,r+=n.undirectedLoops*2),this.type!=="undirected"&&(i+=n.inDegree+n.outDegree,r+=n.directedLoops*2),i-r}source(e){e=""+e;const n=this._edges.get(e);if(!n)throw new he(`Graph.source: could not find the "${e}" edge in the graph.`);return n.source.key}target(e){e=""+e;const n=this._edges.get(e);if(!n)throw new he(`Graph.target: could not find the "${e}" edge in the graph.`);return n.target.key}extremities(e){e=""+e;const n=this._edges.get(e);if(!n)throw new he(`Graph.extremities: could not find the "${e}" edge in the graph.`);return[n.source.key,n.target.key]}opposite(e,n){e=""+e,n=""+n;const i=this._edges.get(n);if(!i)throw new he(`Graph.opposite: could not find the "${n}" edge in the graph.`);const r=i.source.key,o=i.target.key;if(e===r)return o;if(e===o)return r;throw new he(`Graph.opposite: the "${e}" node is not attached to the "${n}" edge (${r}, ${o}).`)}hasExtremity(e,n){e=""+e,n=""+n;const i=this._edges.get(e);if(!i)throw new he(`Graph.hasExtremity: could not find the "${e}" edge in the graph.`);return i.source.key===n||i.target.key===n}isUndirected(e){e=""+e;const n=this._edges.get(e);if(!n)throw new he(`Graph.isUndirected: could not find the "${e}" edge in the graph.`);return n.undirected}isDirected(e){e=""+e;const n=this._edges.get(e);if(!n)throw new he(`Graph.isDirected: could not find the "${e}" edge in the graph.`);return!n.undirected}isSelfLoop(e){e=""+e;const n=this._edges.get(e);if(!n)throw new he(`Graph.isSelfLoop: could not find the "${e}" edge in the graph.`);return n.source===n.target}addNode(e,n){return bI(this,e,n).key}mergeNode(e,n){if(n&&!ht(n))throw new be(`Graph.mergeNode: invalid attributes. Expecting an object but got "${n}"`);e=""+e,n=n||{};let i=this._nodes.get(e);return i?(n&&(st(i.attributes,n),this.emit("nodeAttributesUpdated",{type:"merge",key:e,attributes:i.attributes,data:n})),[e,!1]):(i=new this.NodeDataClass(e,n),this._nodes.set(e,i),this.emit("nodeAdded",{key:e,attributes:n}),[e,!0])}updateNode(e,n){if(n&&typeof n!="function")throw new be(`Graph.updateNode: invalid updater function. Expecting a function but got "${n}"`);e=""+e;let i=this._nodes.get(e);if(i){if(n){const o=i.attributes;i.attributes=n(o),this.emit("nodeAttributesUpdated",{type:"replace",key:e,attributes:i.attributes})}return[e,!1]}const r=n?n({}):{};return i=new this.NodeDataClass(e,r),this._nodes.set(e,i),this.emit("nodeAdded",{key:e,attributes:r}),[e,!0]}dropNode(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new he(`Graph.dropNode: could not find the "${e}" node in the graph.`);let i;if(this.type!=="undirected"){for(const r in n.out){i=n.out[r];do Wi(this,i),i=i.next;while(i)}for(const r in n.in){i=n.in[r];do Wi(this,i),i=i.next;while(i)}}if(this.type!=="directed")for(const r in n.undirected){i=n.undirected[r];do Wi(this,i),i=i.next;while(i)}this._nodes.delete(e),this.emit("nodeDropped",{key:e,attributes:n.attributes})}dropEdge(e){let n;if(arguments.length>1){const i=""+arguments[0],r=""+arguments[1];if(n=Xt(this,i,r,this.type),!n)throw new he(`Graph.dropEdge: could not find the "${i}" -> "${r}" edge in the graph.`)}else if(e=""+e,n=this._edges.get(e),!n)throw new he(`Graph.dropEdge: could not find the "${e}" edge in the graph.`);return Wi(this,n),this}dropDirectedEdge(e,n){if(arguments.length<2)throw new Se("Graph.dropDirectedEdge: it does not make sense to try and drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new Se("Graph.dropDirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");e=""+e,n=""+n;const i=Xt(this,e,n,"directed");if(!i)throw new he(`Graph.dropDirectedEdge: could not find a "${e}" -> "${n}" edge in the graph.`);return Wi(this,i),this}dropUndirectedEdge(e,n){if(arguments.length<2)throw new Se("Graph.dropUndirectedEdge: it does not make sense to drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new Se("Graph.dropUndirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");const i=Xt(this,e,n,"undirected");if(!i)throw new he(`Graph.dropUndirectedEdge: could not find a "${e}" -> "${n}" edge in the graph.`);return Wi(this,i),this}clear(){this._edges.clear(),this._nodes.clear(),this._resetInstanceCounters(),this.emit("cleared")}clearEdges(){const e=this._nodes.values();let n;for(;n=e.next(),n.done!==!0;)n.value.clear();this._edges.clear(),this._resetInstanceCounters(),this.emit("edgesCleared")}getAttribute(e){return this._attributes[e]}getAttributes(){return this._attributes}hasAttribute(e){return this._attributes.hasOwnProperty(e)}setAttribute(e,n){return this._attributes[e]=n,this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:e}),this}updateAttribute(e,n){if(typeof n!="function")throw new be("Graph.updateAttribute: updater should be a function.");const i=this._attributes[e];return this._attributes[e]=n(i),this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:e}),this}removeAttribute(e){return delete this._attributes[e],this.emit("attributesUpdated",{type:"remove",attributes:this._attributes,name:e}),this}replaceAttributes(e){if(!ht(e))throw new be("Graph.replaceAttributes: provided attributes are not a plain object.");return this._attributes=e,this.emit("attributesUpdated",{type:"replace",attributes:this._attributes}),this}mergeAttributes(e){if(!ht(e))throw new be("Graph.mergeAttributes: provided attributes are not a plain object.");return st(this._attributes,e),this.emit("attributesUpdated",{type:"merge",attributes:this._attributes,data:e}),this}updateAttributes(e){if(typeof e!="function")throw new be("Graph.updateAttributes: provided updater is not a function.");return this._attributes=e(this._attributes),this.emit("attributesUpdated",{type:"update",attributes:this._attributes}),this}updateEachNodeAttributes(e,n){if(typeof e!="function")throw new be("Graph.updateEachNodeAttributes: expecting an updater function.");if(n&&!Ff(n))throw new be("Graph.updateEachNodeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const i=this._nodes.values();let r,o;for(;r=i.next(),r.done!==!0;)o=r.value,o.attributes=e(o.key,o.attributes);this.emit("eachNodeAttributesUpdated",{hints:n||null})}updateEachEdgeAttributes(e,n){if(typeof e!="function")throw new be("Graph.updateEachEdgeAttributes: expecting an updater function.");if(n&&!Ff(n))throw new be("Graph.updateEachEdgeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const i=this._edges.values();let r,o,s,a;for(;r=i.next(),r.done!==!0;)o=r.value,s=o.source,a=o.target,o.attributes=e(o.key,o.attributes,s.key,a.key,s.attributes,a.attributes,o.undirected);this.emit("eachEdgeAttributesUpdated",{hints:n||null})}forEachAdjacencyEntry(e){if(typeof e!="function")throw new be("Graph.forEachAdjacencyEntry: expecting a callback.");ls(!1,!1,!1,this,e)}forEachAdjacencyEntryWithOrphans(e){if(typeof e!="function")throw new be("Graph.forEachAdjacencyEntryWithOrphans: expecting a callback.");ls(!1,!1,!0,this,e)}forEachAssymetricAdjacencyEntry(e){if(typeof e!="function")throw new be("Graph.forEachAssymetricAdjacencyEntry: expecting a callback.");ls(!1,!0,!1,this,e)}forEachAssymetricAdjacencyEntryWithOrphans(e){if(typeof e!="function")throw new be("Graph.forEachAssymetricAdjacencyEntryWithOrphans: expecting a callback.");ls(!1,!0,!0,this,e)}nodes(){return typeof Array.from=="function"?Array.from(this._nodes.keys()):Oy(this._nodes.keys(),this._nodes.size)}forEachNode(e){if(typeof e!="function")throw new be("Graph.forEachNode: expecting a callback.");const n=this._nodes.values();let i,r;for(;i=n.next(),i.done!==!0;)r=i.value,e(r.key,r.attributes)}findNode(e){if(typeof e!="function")throw new be("Graph.findNode: expecting a callback.");const n=this._nodes.values();let i,r;for(;i=n.next(),i.done!==!0;)if(r=i.value,e(r.key,r.attributes))return r.key}mapNodes(e){if(typeof e!="function")throw new be("Graph.mapNode: expecting a callback.");const n=this._nodes.values();let i,r;const o=new Array(this.order);let s=0;for(;i=n.next(),i.done!==!0;)r=i.value,o[s++]=e(r.key,r.attributes);return o}someNode(e){if(typeof e!="function")throw new be("Graph.someNode: expecting a callback.");const n=this._nodes.values();let i,r;for(;i=n.next(),i.done!==!0;)if(r=i.value,e(r.key,r.attributes))return!0;return!1}everyNode(e){if(typeof e!="function")throw new be("Graph.everyNode: expecting a callback.");const n=this._nodes.values();let i,r;for(;i=n.next(),i.done!==!0;)if(r=i.value,!e(r.key,r.attributes))return!1;return!0}filterNodes(e){if(typeof e!="function")throw new be("Graph.filterNodes: expecting a callback.");const n=this._nodes.values();let i,r;const o=[];for(;i=n.next(),i.done!==!0;)r=i.value,e(r.key,r.attributes)&&o.push(r.key);return o}reduceNodes(e,n){if(typeof e!="function")throw new be("Graph.reduceNodes: expecting a callback.");if(arguments.length<2)throw new be("Graph.reduceNodes: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.");let i=n;const r=this._nodes.values();let o,s;for(;o=r.next(),o.done!==!0;)s=o.value,i=e(i,s.key,s.attributes);return i}nodeEntries(){const e=this._nodes.values();return new Yt(()=>{const n=e.next();if(n.done)return n;const i=n.value;return{value:{node:i.key,attributes:i.attributes},done:!1}})}export(){const e=new Array(this._nodes.size);let n=0;this._nodes.forEach((r,o)=>{e[n++]=uI(o,r)});const i=new Array(this._edges.size);return n=0,this._edges.forEach((r,o)=>{i[n++]=hI(this.type,o,r)}),{options:{type:this.type,multi:this.multi,allowSelfLoops:this.allowSelfLoops},attributes:this.getAttributes(),nodes:e,edges:i}}import(e,n=!1){if(e instanceof Ve)return e.forEachNode((l,c)=>{n?this.mergeNode(l,c):this.addNode(l,c)}),e.forEachEdge((l,c,d,u,h,f,p)=>{n?p?this.mergeUndirectedEdgeWithKey(l,d,u,c):this.mergeDirectedEdgeWithKey(l,d,u,c):p?this.addUndirectedEdgeWithKey(l,d,u,c):this.addDirectedEdgeWithKey(l,d,u,c)}),this;if(!ht(e))throw new be("Graph.import: invalid argument. Expecting a serialized graph or, alternatively, a Graph instance.");if(e.attributes){if(!ht(e.attributes))throw new be("Graph.import: invalid attributes. Expecting a plain object.");n?this.mergeAttributes(e.attributes):this.replaceAttributes(e.attributes)}let i,r,o,s,a;if(e.nodes){if(o=e.nodes,!Array.isArray(o))throw new be("Graph.import: invalid nodes. Expecting an array.");for(i=0,r=o.length;i<r;i++){s=o[i],fI(s);const{key:l,attributes:c}=s;n?this.mergeNode(l,c):this.addNode(l,c)}}if(e.edges){let l=!1;if(this.type==="undirected"&&(l=!0),o=e.edges,!Array.isArray(o))throw new be("Graph.import: invalid edges. Expecting an array.");for(i=0,r=o.length;i<r;i++){a=o[i],gI(a);const{source:c,target:d,attributes:u,undirected:h=l}=a;let f;"key"in a?(f=n?h?this.mergeUndirectedEdgeWithKey:this.mergeDirectedEdgeWithKey:h?this.addUndirectedEdgeWithKey:this.addDirectedEdgeWithKey,f.call(this,a.key,c,d,u)):(f=n?h?this.mergeUndirectedEdge:this.mergeDirectedEdge:h?this.addUndirectedEdge:this.addDirectedEdge,f.call(this,c,d,u))}}return this}nullCopy(e){const n=new Ve(st({},this._options,e));return n.replaceAttributes(st({},this.getAttributes())),n}emptyCopy(e){const n=this.nullCopy(e);return this._nodes.forEach((i,r)=>{const o=st({},i.attributes);i=new n.NodeDataClass(r,o),n._nodes.set(r,i)}),n}copy(e){if(e=e||{},typeof e.type=="string"&&e.type!==this.type&&e.type!=="mixed")throw new Se(`Graph.copy: cannot create an incompatible copy from "${this.type}" type to "${e.type}" because this would mean losing information about the current graph.`);if(typeof e.multi=="boolean"&&e.multi!==this.multi&&e.multi!==!0)throw new Se("Graph.copy: cannot create an incompatible copy by downgrading a multi graph to a simple one because this would mean losing information about the current graph.");if(typeof e.allowSelfLoops=="boolean"&&e.allowSelfLoops!==this.allowSelfLoops&&e.allowSelfLoops!==!0)throw new Se("Graph.copy: cannot create an incompatible copy from a graph allowing self loops to one that does not because this would mean losing information about the current graph.");const n=this.emptyCopy(e),i=this._edges.values();let r,o;for(;r=i.next(),r.done!==!0;)o=r.value,Hy(n,"copy",!1,o.undirected,o.key,o.source.key,o.target.key,st({},o.attributes));return n}toJSON(){return this.export()}toString(){return"[object Graph]"}inspect(){const e={};this._nodes.forEach((o,s)=>{e[s]=o.attributes});const n={},i={};this._edges.forEach((o,s)=>{const a=o.undirected?"--":"->";let l="",c=o.source.key,d=o.target.key,u;o.undirected&&c>d&&(u=c,c=d,d=u);const h=`(${c})${a}(${d})`;s.startsWith("geid_")?this.multi&&(typeof i[h]>"u"?i[h]=0:i[h]++,l+=`${i[h]}. `):l+=`[${s}]: `,l+=h,n[l]=o.attributes});const r={};for(const o in this)this.hasOwnProperty(o)&&!$f.has(o)&&typeof this[o]!="function"&&typeof o!="symbol"&&(r[o]=this[o]);return r.attributes=this._attributes,r.nodes=e,r.edges=n,Ht(r,"constructor",this.constructor),r}}typeof Symbol<"u"&&(Ve.prototype[Symbol.for("nodejs.util.inspect.custom")]=Ve.prototype.inspect);yI.forEach(t=>{["add","merge","update"].forEach(e=>{const n=t.name(e),i=e==="add"?Hy:_I;t.generateKey?Ve.prototype[n]=function(r,o,s){return i(this,n,!0,(t.type||this.type)==="undirected",null,r,o,s,e==="update")}:Ve.prototype[n]=function(r,o,s,a){return i(this,n,!1,(t.type||this.type)==="undirected",r,o,s,a,e==="update")}})});N2(Ve);z2(Ve);nI(Ve);dI(Ve);class Wy extends Ve{constructor(e){const n=st({type:"directed"},e);if("multi"in n&&n.multi!==!1)throw new be("DirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(n.type!=="directed")throw new be('DirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class qy extends Ve{constructor(e){const n=st({type:"undirected"},e);if("multi"in n&&n.multi!==!1)throw new be("UndirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(n.type!=="undirected")throw new be('UndirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class Ky extends Ve{constructor(e){const n=st({multi:!0},e);if("multi"in n&&n.multi!==!0)throw new be("MultiGraph.from: inconsistent indication that the graph should be simple in given options!");super(n)}}class Xy extends Ve{constructor(e){const n=st({type:"directed",multi:!0},e);if("multi"in n&&n.multi!==!0)throw new be("MultiDirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(n.type!=="directed")throw new be('MultiDirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class Zy extends Ve{constructor(e){const n=st({type:"undirected",multi:!0},e);if("multi"in n&&n.multi!==!0)throw new be("MultiUndirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(n.type!=="undirected")throw new be('MultiUndirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}function Rr(t){t.from=function(e,n){const i=st({},e.options,n),r=new t(i);return r.import(e),r}}Rr(Ve);Rr(Wy);Rr(qy);Rr(Ky);Rr(Xy);Rr(Zy);Ve.Graph=Ve;Ve.DirectedGraph=Wy;Ve.UndirectedGraph=qy;Ve.MultiGraph=Ky;Ve.MultiDirectedGraph=Xy;Ve.MultiUndirectedGraph=Zy;Ve.InvalidArgumentsGraphError=be;Ve.NotFoundGraphError=he;Ve.UsageGraphError=Se;function wI(t){if(Array.isArray(t))return t}function xI(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var i,r,o,s,a=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(l=(i=o.call(n)).done)&&(a.push(i.value),a.length!==e);l=!0);}catch(d){c=!0,r=d}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw r}}return a}}function Dc(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}function Yy(t,e){if(t){if(typeof t=="string")return Dc(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Dc(t,e):void 0}}function kI(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function EI(t,e){return wI(t)||xI(t,e)||Yy(t,e)||kI()}function AI(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function CI(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Jy(t){var e=CI(t,"string");return typeof e=="symbol"?e:e+""}function SI(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,Jy(i.key),i)}}function TI(t,e,n){return e&&SI(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function ta(t){return ta=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ta(t)}function Qy(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Qy=function(){return!!t})()}function Mc(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function NI(t,e){if(e&&(typeof e=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Mc(t)}function RI(t,e,n){return e=ta(e),NI(t,Qy()?Reflect.construct(e,n||[],ta(t).constructor):e.apply(t,n))}function Oc(t,e){return Oc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},Oc(t,e)}function LI(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Oc(t,e)}function Ji(t,e,n){return(e=Jy(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function II(t){if(Array.isArray(t))return Dc(t)}function PI(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function DI(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Il(t){return II(t)||PI(t)||Yy(t)||DI()}function Bf(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function Vf(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Bf(Object(n),!0).forEach(function(i){Ji(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Bf(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}var MI="relative",OI={drawLabel:void 0,drawHover:void 0,borders:[{size:{value:.1},color:{attribute:"borderColor"}},{size:{fill:!0},color:{attribute:"color"}}]},GI="#000000";function FI(t){var e=t.borders,n=ff(e.filter(function(r){var o=r.size;return"fill"in o}).length),i=`
precision highp float;

varying vec2 v_diffVector;
varying float v_radius;

#ifdef PICKING_MODE
varying vec4 v_color;
#else
// For normal mode, we use the border colors defined in the program:
`.concat(e.flatMap(function(r,o){var s=r.size;return"attribute"in s?["varying float v_borderSize_".concat(o+1,";")]:[]}).join(`
`),`
`).concat(e.flatMap(function(r,o){var s=r.color;return"attribute"in s?["varying vec4 v_borderColor_".concat(o+1,";")]:"value"in s?["uniform vec4 u_borderColor_".concat(o+1,";")]:[]}).join(`
`),`
#endif

uniform float u_correctionRatio;

const float bias = 255.0 / 254.0;
const vec4 transparent = vec4(0.0, 0.0, 0.0, 0.0);

void main(void) {
  float dist = length(v_diffVector);
  float aaBorder = 2.0 * u_correctionRatio;
  float v_borderSize_0 = v_radius;
  vec4 v_borderColor_0 = transparent;

  // No antialiasing for picking mode:
  #ifdef PICKING_MODE
  if (dist > v_radius)
    gl_FragColor = transparent;
  else {
    gl_FragColor = v_color;
    gl_FragColor.a *= bias;
  }
  #else
  // Sizes:
`).concat(e.flatMap(function(r,o){var s=r.size;if("fill"in s)return[];s=s;var a="attribute"in s?"v_borderSize_".concat(o+1):ff(s.value),l=(s.mode||MI)==="pixels"?"u_correctionRatio":"v_radius";return["  float borderSize_".concat(o+1," = ").concat(l," * ").concat(a,";")]}).join(`
`),`
  // Now, let's split the remaining space between "fill" borders:
  float fillBorderSize = (v_radius - (`).concat(e.flatMap(function(r,o){var s=r.size;return"fill"in s?[]:["borderSize_".concat(o+1)]}).join(" + "),") ) / ").concat(n,`;
`).concat(e.flatMap(function(r,o){var s=r.size;return"fill"in s?["  float borderSize_".concat(o+1," = fillBorderSize;")]:[]}).join(`
`),`

  // Finally, normalize all border sizes, to start from the full size and to end with the smallest:
  float adjustedBorderSize_0 = v_radius;
`).concat(e.map(function(r,o){return"  float adjustedBorderSize_".concat(o+1," = adjustedBorderSize_").concat(o," - borderSize_").concat(o+1,";")}).join(`
`),`

  // Colors:
  vec4 borderColor_0 = transparent;
`).concat(e.map(function(r,o){var s=r.color,a=[];return"attribute"in s?a.push("  vec4 borderColor_".concat(o+1," = v_borderColor_").concat(o+1,";")):"transparent"in s?a.push("  vec4 borderColor_".concat(o+1," = vec4(0.0, 0.0, 0.0, 0.0);")):a.push("  vec4 borderColor_".concat(o+1," = u_borderColor_").concat(o+1,";")),a.push("  borderColor_".concat(o+1,".a *= bias;")),a.push("  if (borderSize_".concat(o+1," <= 1.0 * u_correctionRatio) { borderColor_").concat(o+1," = borderColor_").concat(o,"; }")),a.join(`
`)}).join(`
`),`
  if (dist > adjustedBorderSize_0) {
    gl_FragColor = borderColor_0;
  } else `).concat(e.map(function(r,o){return"if (dist > adjustedBorderSize_".concat(o,` - aaBorder) {
    gl_FragColor = mix(borderColor_`).concat(o+1,", borderColor_").concat(o,", (dist - adjustedBorderSize_").concat(o,` + aaBorder) / aaBorder);
  } else if (dist > adjustedBorderSize_`).concat(o+1,`) {
    gl_FragColor = borderColor_`).concat(o+1,`;
  } else `)}).join(""),` { /* Nothing to add here */ }
  #endif
}
`);return i}function $I(t){var e=t.borders,n=`
attribute vec2 a_position;
attribute float a_size;
attribute float a_angle;

uniform mat3 u_matrix;
uniform float u_sizeRatio;
uniform float u_correctionRatio;

varying vec2 v_diffVector;
varying float v_radius;

#ifdef PICKING_MODE
attribute vec4 a_id;
varying vec4 v_color;
#else
`.concat(e.flatMap(function(i,r){var o=i.size;return"attribute"in o?["attribute float a_borderSize_".concat(r+1,";"),"varying float v_borderSize_".concat(r+1,";")]:[]}).join(`
`),`
`).concat(e.flatMap(function(i,r){var o=i.color;return"attribute"in o?["attribute vec4 a_borderColor_".concat(r+1,";"),"varying vec4 v_borderColor_".concat(r+1,";")]:[]}).join(`
`),`
#endif

const float bias = 255.0 / 254.0;
const vec4 transparent = vec4(0.0, 0.0, 0.0, 0.0);

void main() {
  float size = a_size * u_correctionRatio / u_sizeRatio * 4.0;
  vec2 diffVector = size * vec2(cos(a_angle), sin(a_angle));
  vec2 position = a_position + diffVector;
  gl_Position = vec4(
    (u_matrix * vec3(position, 1)).xy,
    0,
    1
  );

  v_radius = size / 2.0;
  v_diffVector = diffVector;

  #ifdef PICKING_MODE
  v_color = a_id;
  #else
`).concat(e.flatMap(function(i,r){var o=i.size;return"attribute"in o?["  v_borderSize_".concat(r+1," = a_borderSize_").concat(r+1,";")]:[]}).join(`
`),`
`).concat(e.flatMap(function(i,r){var o=i.color;return"attribute"in o?["  v_borderColor_".concat(r+1," = a_borderColor_").concat(r+1,";")]:[]}).join(`
`),`
  #endif
}
`);return n}var ev=WebGLRenderingContext,Uf=ev.UNSIGNED_BYTE,cs=ev.FLOAT;function tv(t){var e,n=Vf(Vf({},OI),t||{}),i=n.borders,r=n.drawLabel,o=n.drawHover,s=["u_sizeRatio","u_correctionRatio","u_matrix"].concat(Il(i.flatMap(function(a,l){var c=a.color;return"value"in c?["u_borderColor_".concat(l+1)]:[]})));return e=(function(a){LI(l,a);function l(){var c;AI(this,l);for(var d=arguments.length,u=new Array(d),h=0;h<d;h++)u[h]=arguments[h];return c=RI(this,l,[].concat(u)),Ji(Mc(c),"drawLabel",r),Ji(Mc(c),"drawHover",o),c}return TI(l,[{key:"getDefinition",value:function(){return{VERTICES:3,VERTEX_SHADER_SOURCE:$I(n),FRAGMENT_SHADER_SOURCE:FI(n),METHOD:WebGLRenderingContext.TRIANGLES,UNIFORMS:s,ATTRIBUTES:[{name:"a_position",size:2,type:cs},{name:"a_id",size:4,type:Uf,normalized:!0},{name:"a_size",size:1,type:cs}].concat(Il(i.flatMap(function(d,u){var h=d.color;return"attribute"in h?[{name:"a_borderColor_".concat(u+1),size:4,type:Uf,normalized:!0}]:[]})),Il(i.flatMap(function(d,u){var h=d.size;return"attribute"in h?[{name:"a_borderSize_".concat(u+1),size:1,type:cs}]:[]}))),CONSTANT_ATTRIBUTES:[{name:"a_angle",size:1,type:cs}],CONSTANT_DATA:[[l.ANGLE_1],[l.ANGLE_2],[l.ANGLE_3]]}}},{key:"processVisibleItem",value:function(d,u,h){var f=this.array;f[u++]=h.x,f[u++]=h.y,f[u++]=d,f[u++]=h.size,i.forEach(function(p){var m=p.color;"attribute"in m&&(f[u++]=mi(h[m.attribute]||m.defaultValue||GI))}),i.forEach(function(p){var m=p.size;"attribute"in m&&(f[u++]=h[m.attribute]||m.defaultValue)})}},{key:"setUniforms",value:function(d,u){var h=u.gl,f=u.uniformLocations,p=f.u_sizeRatio,m=f.u_correctionRatio,w=f.u_matrix;h.uniform1f(m,d.correctionRatio),h.uniform1f(p,d.sizeRatio),h.uniformMatrix3fv(w,!1,d.matrix),i.forEach(function(_,x){var k=_.color;if("value"in k){var v=f["u_borderColor_".concat(x+1)],C=KR(k.value),A=EI(C,4),S=A[0],M=A[1],I=A[2],D=A[3];h.uniform4f(v,S/255,M/255,I/255,D/255)}})}}]),l})(ky),Ji(e,"ANGLE_1",0),Ji(e,"ANGLE_2",2*Math.PI/3),Ji(e,"ANGLE_3",4*Math.PI/3),e}tv();function zI(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function nv(t){var e=zI(t,"string");return typeof e=="symbol"?e:e+""}function iv(t,e,n){return(e=nv(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jf(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function na(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?jf(Object(n),!0).forEach(function(i){iv(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):jf(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function BI(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function VI(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,nv(i.key),i)}}function UI(t,e,n){return e&&VI(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function ia(t){return ia=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ia(t)}function rv(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(rv=function(){return!!t})()}function ov(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function jI(t,e){if(e&&(typeof e=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ov(t)}function HI(t,e,n){return e=ia(e),jI(t,rv()?Reflect.construct(e,n||[],ia(t).constructor):e.apply(t,n))}function Gc(t,e){return Gc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},Gc(t,e)}function WI(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Gc(t,e)}function Fc(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}function qI(t){if(Array.isArray(t))return Fc(t)}function KI(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function XI(t,e){if(t){if(typeof t=="string")return Fc(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Fc(t,e):void 0}}function ZI(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Pl(t){return qI(t)||KI(t)||XI(t)||ZI()}function sv(t,e,n,i){var r=Math.pow(1-t,2)*e.x+2*(1-t)*t*n.x+Math.pow(t,2)*i.x,o=Math.pow(1-t,2)*e.y+2*(1-t)*t*n.y+Math.pow(t,2)*i.y;return{x:r,y:o}}function YI(t,e,n){for(var i=20,r=0,o=t,s=0;s<i;s++){var a=sv((s+1)/i,t,e,n);r+=Math.sqrt(Math.pow(o.x-a.x,2)+Math.pow(o.y-a.y,2)),o=a}return r}function JI(t){var e=t.curvatureAttribute,n=t.defaultCurvature,i=t.keepLabelUpright,r=i===void 0?!0:i;return function(o,s,a,l,c){var d=c.edgeLabelSize,u=s[e]||n,h=c.edgeLabelFont,f=c.edgeLabelWeight,p=c.edgeLabelColor.attribute?s[c.edgeLabelColor.attribute]||c.edgeLabelColor.color||"#000":c.edgeLabelColor.color,m=s.label;if(m){o.fillStyle=p,o.font="".concat(f," ").concat(d,"px ").concat(h);var w=!r||a.x<l.x,_=w?a.x:l.x,x=w?a.y:l.y,k=w?l.x:a.x,v=w?l.y:a.y,C=(_+k)/2,A=(x+v)/2,S=k-_,M=v-x,I=Math.sqrt(Math.pow(S,2)+Math.pow(M,2)),D=w?1:-1,O=C+M*u*D,$=A-S*u*D,j=s.size*.7+5,E={x:$-x,y:-(O-_)},R=Math.sqrt(Math.pow(E.x,2)+Math.pow(E.y,2)),L={x:v-$,y:-(k-O)},G=Math.sqrt(Math.pow(L.x,2)+Math.pow(L.y,2));_+=j*E.x/R,x+=j*E.y/R,k+=j*L.x/G,v+=j*L.y/G,O+=j*M/I,$-=j*S/I;var B={x:O,y:$},q={x:_,y:x},ee={x:k,y:v},fe=YI(q,B,ee);if(!(fe<a.size+l.size)){var _e=o.measureText(m).width,ke=fe-a.size-l.size;if(_e>ke){var V="";for(m=m+V,_e=o.measureText(m).width;_e>ke&&m.length>1;)m=m.slice(0,-2)+V,_e=o.measureText(m).width;if(m.length<4)return}for(var le={},pe=0,U=m.length;pe<U;pe++){var te=m[pe];le[te]||(le[te]=o.measureText(te).width*(1+u*.35))}for(var z=.5-_e/fe/2,ie=0,ce=m.length;ie<ce;ie++){var N=m[ie],P=sv(z,q,B,ee),F=2*(1-z)*(O-_)+2*z*(k-O),W=2*(1-z)*($-x)+2*z*(v-$),Y=Math.atan2(W,F);o.save(),o.translate(P.x,P.y),o.rotate(Y),o.fillText(N,0,0),o.restore(),z+=le[N]/fe}}}}}function QI(t){var e=t.arrowHead,n=e?.extremity==="target"||e?.extremity==="both",i=e?.extremity==="source"||e?.extremity==="both",r=`
precision highp float;

varying vec4 v_color;
varying float v_thickness;
varying float v_feather;
varying vec2 v_cpA;
varying vec2 v_cpB;
varying vec2 v_cpC;
`.concat(n?`
varying float v_targetSize;
varying vec2 v_targetPoint;`:"",`
`).concat(i?`
varying float v_sourceSize;
varying vec2 v_sourcePoint;`:"",`
`).concat(e?`
uniform float u_lengthToThicknessRatio;
uniform float u_widenessToThicknessRatio;`:"",`

float det(vec2 a, vec2 b) {
  return a.x * b.y - b.x * a.y;
}

vec2 getDistanceVector(vec2 b0, vec2 b1, vec2 b2) {
  float a = det(b0, b2), b = 2.0 * det(b1, b0), d = 2.0 * det(b2, b1);
  float f = b * d - a * a;
  vec2 d21 = b2 - b1, d10 = b1 - b0, d20 = b2 - b0;
  vec2 gf = 2.0 * (b * d21 + d * d10 + a * d20);
  gf = vec2(gf.y, -gf.x);
  vec2 pp = -f * gf / dot(gf, gf);
  vec2 d0p = b0 - pp;
  float ap = det(d0p, d20), bp = 2.0 * det(d10, d0p);
  float t = clamp((ap + bp) / (2.0 * a + b + d), 0.0, 1.0);
  return mix(mix(b0, b1, t), mix(b1, b2, t), t);
}

float distToQuadraticBezierCurve(vec2 p, vec2 b0, vec2 b1, vec2 b2) {
  return length(getDistanceVector(b0 - p, b1 - p, b2 - p));
}

const vec4 transparent = vec4(0.0, 0.0, 0.0, 0.0);

void main(void) {
  float dist = distToQuadraticBezierCurve(gl_FragCoord.xy, v_cpA, v_cpB, v_cpC);
  float thickness = v_thickness;
`).concat(n?`
  float distToTarget = length(gl_FragCoord.xy - v_targetPoint);
  float targetArrowLength = v_targetSize + thickness * u_lengthToThicknessRatio;
  if (distToTarget < targetArrowLength) {
    thickness = (distToTarget - v_targetSize) / (targetArrowLength - v_targetSize) * u_widenessToThicknessRatio * thickness;
  }`:"",`
`).concat(i?`
  float distToSource = length(gl_FragCoord.xy - v_sourcePoint);
  float sourceArrowLength = v_sourceSize + thickness * u_lengthToThicknessRatio;
  if (distToSource < sourceArrowLength) {
    thickness = (distToSource - v_sourceSize) / (sourceArrowLength - v_sourceSize) * u_widenessToThicknessRatio * thickness;
  }`:"",`

  float halfThickness = thickness / 2.0;
  if (dist < halfThickness) {
    #ifdef PICKING_MODE
    gl_FragColor = v_color;
    #else
    float t = smoothstep(
      halfThickness - v_feather,
      halfThickness,
      dist
    );

    gl_FragColor = mix(v_color, transparent, t);
    #endif
  } else {
    gl_FragColor = transparent;
  }
}
`);return r}function eP(t){var e=t.arrowHead,n=e?.extremity==="target"||e?.extremity==="both",i=e?.extremity==="source"||e?.extremity==="both",r=`
attribute vec4 a_id;
attribute vec4 a_color;
attribute float a_direction;
attribute float a_thickness;
attribute vec2 a_source;
attribute vec2 a_target;
attribute float a_current;
attribute float a_curvature;
`.concat(n?`attribute float a_targetSize;
`:"",`
`).concat(i?`attribute float a_sourceSize;
`:"",`

uniform mat3 u_matrix;
uniform float u_sizeRatio;
uniform float u_pixelRatio;
uniform vec2 u_dimensions;
uniform float u_minEdgeThickness;
uniform float u_feather;

varying vec4 v_color;
varying float v_thickness;
varying float v_feather;
varying vec2 v_cpA;
varying vec2 v_cpB;
varying vec2 v_cpC;
`).concat(n?`
varying float v_targetSize;
varying vec2 v_targetPoint;`:"",`
`).concat(i?`
varying float v_sourceSize;
varying vec2 v_sourcePoint;`:"",`
`).concat(e?`
uniform float u_widenessToThicknessRatio;`:"",`

const float bias = 255.0 / 254.0;
const float epsilon = 0.7;

vec2 clipspaceToViewport(vec2 pos, vec2 dimensions) {
  return vec2(
    (pos.x + 1.0) * dimensions.x / 2.0,
    (pos.y + 1.0) * dimensions.y / 2.0
  );
}

vec2 viewportToClipspace(vec2 pos, vec2 dimensions) {
  return vec2(
    pos.x / dimensions.x * 2.0 - 1.0,
    pos.y / dimensions.y * 2.0 - 1.0
  );
}

void main() {
  float minThickness = u_minEdgeThickness;

  // Selecting the correct position
  // Branchless "position = a_source if a_current == 1.0 else a_target"
  vec2 position = a_source * max(0.0, a_current) + a_target * max(0.0, 1.0 - a_current);
  position = (u_matrix * vec3(position, 1)).xy;

  vec2 source = (u_matrix * vec3(a_source, 1)).xy;
  vec2 target = (u_matrix * vec3(a_target, 1)).xy;

  vec2 viewportPosition = clipspaceToViewport(position, u_dimensions);
  vec2 viewportSource = clipspaceToViewport(source, u_dimensions);
  vec2 viewportTarget = clipspaceToViewport(target, u_dimensions);

  vec2 delta = viewportTarget.xy - viewportSource.xy;
  float len = length(delta);
  vec2 normal = vec2(-delta.y, delta.x) * a_direction;
  vec2 unitNormal = normal / len;
  float boundingBoxThickness = len * a_curvature;

  float curveThickness = max(minThickness, a_thickness / u_sizeRatio);
  v_thickness = curveThickness * u_pixelRatio;
  v_feather = u_feather;

  v_cpA = viewportSource;
  v_cpB = 0.5 * (viewportSource + viewportTarget) + unitNormal * a_direction * boundingBoxThickness;
  v_cpC = viewportTarget;

  vec2 viewportOffsetPosition = (
    viewportPosition +
    unitNormal * (boundingBoxThickness / 2.0 + sign(boundingBoxThickness) * (`).concat(e?"curveThickness * u_widenessToThicknessRatio":"curveThickness",` + epsilon)) *
    max(0.0, a_direction) // NOTE: cutting the bounding box in half to avoid overdraw
  );

  position = viewportToClipspace(viewportOffsetPosition, u_dimensions);
  gl_Position = vec4(position, 0, 1);
    
`).concat(n?`
  v_targetSize = a_targetSize * u_pixelRatio / u_sizeRatio;
  v_targetPoint = viewportTarget;
`:"",`
`).concat(i?`
  v_sourceSize = a_sourceSize * u_pixelRatio / u_sizeRatio;
  v_sourcePoint = viewportSource;
`:"",`

  #ifdef PICKING_MODE
  // For picking mode, we use the ID as the color:
  v_color = a_id;
  #else
  // For normal mode, we use the color:
  v_color = a_color;
  #endif

  v_color.a *= bias;
}
`);return r}var av=.25,tP={arrowHead:null,curvatureAttribute:"curvature",defaultCurvature:av},lv=WebGLRenderingContext,Hf=lv.UNSIGNED_BYTE,ii=lv.FLOAT;function qd(t){var e=na(na({},tP),t||{}),n=e,i=n.arrowHead,r=n.curvatureAttribute,o=n.drawLabel,s=i?.extremity==="target"||i?.extremity==="both",a=i?.extremity==="source"||i?.extremity==="both",l=["u_matrix","u_sizeRatio","u_dimensions","u_pixelRatio","u_feather","u_minEdgeThickness"].concat(Pl(i?["u_lengthToThicknessRatio","u_widenessToThicknessRatio"]:[]));return(function(c){WI(d,c);function d(){var u;BI(this,d);for(var h=arguments.length,f=new Array(h),p=0;p<h;p++)f[p]=arguments[p];return u=HI(this,d,[].concat(f)),iv(ov(u),"drawLabel",o||JI(e)),u}return UI(d,[{key:"getDefinition",value:function(){return{VERTICES:6,VERTEX_SHADER_SOURCE:eP(e),FRAGMENT_SHADER_SOURCE:QI(e),METHOD:WebGLRenderingContext.TRIANGLES,UNIFORMS:l,ATTRIBUTES:[{name:"a_source",size:2,type:ii},{name:"a_target",size:2,type:ii}].concat(Pl(s?[{name:"a_targetSize",size:1,type:ii}]:[]),Pl(a?[{name:"a_sourceSize",size:1,type:ii}]:[]),[{name:"a_thickness",size:1,type:ii},{name:"a_curvature",size:1,type:ii},{name:"a_color",size:4,type:Hf,normalized:!0},{name:"a_id",size:4,type:Hf,normalized:!0}]),CONSTANT_ATTRIBUTES:[{name:"a_current",size:1,type:ii},{name:"a_direction",size:1,type:ii}],CONSTANT_DATA:[[0,1],[0,-1],[1,1],[0,-1],[1,1],[1,-1]]}}},{key:"processVisibleItem",value:function(h,f,p,m,w){var _,x=w.size||1,k=p.x,v=p.y,C=m.x,A=m.y,S=mi(w.color),M=(_=w[r])!==null&&_!==void 0?_:av,I=this.array;I[f++]=k,I[f++]=v,I[f++]=C,I[f++]=A,s&&(I[f++]=m.size),a&&(I[f++]=p.size),I[f++]=x,I[f++]=M,I[f++]=S,I[f++]=h}},{key:"setUniforms",value:function(h,f){var p=f.gl,m=f.uniformLocations,w=m.u_matrix,_=m.u_pixelRatio,x=m.u_feather,k=m.u_sizeRatio,v=m.u_dimensions,C=m.u_minEdgeThickness;if(p.uniformMatrix3fv(w,!1,h.matrix),p.uniform1f(_,h.pixelRatio),p.uniform1f(k,h.sizeRatio),p.uniform1f(x,h.antiAliasingFeather),p.uniform2f(v,h.width*h.pixelRatio,h.height*h.pixelRatio),p.uniform1f(C,h.minEdgeThickness),i){var A=m.u_lengthToThicknessRatio,S=m.u_widenessToThicknessRatio;p.uniform1f(A,i.lengthToThicknessRatio),p.uniform1f(S,i.widenessToThicknessRatio)}}}]),d})(Pa)}var nP=qd();qd({arrowHead:Ma});qd({arrowHead:na(na({},Ma),{},{extremity:"both"})});const Wf=Et({prefix:"GraphTooltip",level:"info"}),ds={MAX_WIDTH:300,PADDING:15,ANIMATION_DURATION:150,Z_INDEX:1e4};class iP{constructor(e={}){this.options={maxWidth:e.maxWidth||ds.MAX_WIDTH,padding:e.padding||ds.PADDING,animationDuration:e.animationDuration||ds.ANIMATION_DURATION,contentBuilder:e.contentBuilder||null,zIndex:e.zIndex||ds.Z_INDEX},this.element=null,this.currentNode=null,this.isDestroyed=!1,this.darkModeQuery=null,this.darkModeHandler=null,this._createTooltip()}isDarkMode(){return document.documentElement.classList.contains("dark")||document.body.classList.contains("dark")?!0:window.matchMedia?.("(prefers-color-scheme: dark)").matches||!1}_createTooltip(){this.element&&this.element.remove(),this.darkModeQuery&&this.darkModeHandler&&this.darkModeQuery.removeEventListener("change",this.darkModeHandler);const e=this.isDarkMode();this.element=document.createElement("div"),this.element.className="graph-tooltip",this.element.setAttribute("role","tooltip"),this.element.setAttribute("aria-hidden","true"),Object.assign(this.element.style,{position:"absolute",padding:"10px 14px",borderRadius:"8px",fontSize:"12px",fontFamily:"system-ui, -apple-system, sans-serif",pointerEvents:"none",opacity:"0",visibility:"hidden",zIndex:this.options.zIndex,maxWidth:`${this.options.maxWidth}px`,lineHeight:"1.6",backdropFilter:"blur(8px)",transition:`opacity ${this.options.animationDuration}ms ease, visibility ${this.options.animationDuration}ms ease`}),this._updateStyles(e),document.body.appendChild(this.element),window.matchMedia&&(this.darkModeQuery=window.matchMedia("(prefers-color-scheme: dark)"),this.darkModeHandler=n=>{!this.isDestroyed&&this.element&&this._updateStyles(this.isDarkMode())},this.darkModeQuery.addEventListener("change",this.darkModeHandler)),Wf.debug("Tooltip created")}_updateStyles(e){this.element&&(e?Object.assign(this.element.style,{background:"rgba(30, 30, 35, 0.95)",color:"#f9fafb",border:"1px solid rgba(255, 255, 255, 0.1)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4), 0 2px 8px rgba(0, 0, 0, 0.3)"}):Object.assign(this.element.style,{background:"rgba(255, 255, 255, 0.98)",color:"#1a1a1a",border:"1px solid rgba(0, 0, 0, 0.08)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.12), 0 2px 8px rgba(0, 0, 0, 0.08)"}))}escapeHtml(e){if(typeof e!="string")return String(e);const n=document.createElement("div");return n.textContent=e,n.innerHTML}buildContent(e){if(!e)return"";if(this.options.contentBuilder)return this.options.contentBuilder(e);const n=[],i=this.isDarkMode();n.push(`<div style="font-weight: 600; margin-bottom: 6px; font-size: 13px;"> ${this.escapeHtml(String(e.id))}</div>`);const r=new Set(["id","x","y","fx","fy","vx","vy","index","__data__","__transition__","label","size","color","hidden","forceLabel","type","highlighted","zIndex"]),o=["relationship","gender","avatar","group","community"],s=["degree","eigenvector","betweenness","clustering","closeness","centrality","pagerank"];o.forEach(c=>{if(e[c]!==void 0&&e[c]!==null&&!r.has(c)){const d=e[c];if(c==="relationship")n.push(`<div style="margin-bottom: 3px;"><strong> Relationship:</strong> ${this.escapeHtml(d)}</div>`);else if(c==="gender"){const h={male:{emoji:"",text:"Male"},female:{emoji:"",text:"Female"},other:{emoji:"",text:"Other"}}[d]||{emoji:"",text:d};n.push(`<div style="margin-bottom: 3px;"><strong>Gender:</strong> ${h.emoji} ${h.text}</div>`)}else if(c==="avatar")n.push(`<div style="margin-bottom: 3px;"><strong>Avatar:</strong> ${d}</div>`);else if(c==="group")n.push(`<div style="margin-bottom: 3px;"><strong>Group:</strong> ${d}</div>`);else if(c==="community")n.push(`<div style="margin-bottom: 3px;"><strong> Community:</strong> ${d}</div>`);else{const u=c.charAt(0).toUpperCase()+c.slice(1).replace(/_/g," ");n.push(`<div style="margin-bottom: 3px;"><strong>${u}:</strong> ${this.escapeHtml(String(d))}</div>`)}}}),s.forEach(c=>{if(e[c]!==void 0&&e[c]!==null&&!r.has(c)){const d=e[c],u=c.charAt(0).toUpperCase()+c.slice(1).replace(/_/g," ");if(c==="centrality"&&e.eigenvector!==void 0)return;typeof d=="number"?n.push(`<div style="margin-bottom: 2px;"><strong>${u}:</strong> ${d.toFixed(4)}</div>`):n.push(`<div style="margin-bottom: 2px;"><strong>${u}:</strong> ${this.escapeHtml(String(d))}</div>`)}});const a=new Set([...o,...s]),l=Object.keys(e).filter(c=>!r.has(c)&&!a.has(c)&&e[c]!==void 0&&e[c]!==null&&typeof e[c]!="function"&&!c.startsWith("__")).sort();if(l.length>0){const c=i?"rgba(255,255,255,0.15)":"rgba(0,0,0,0.1)",d=i?"rgba(249,250,251,0.8)":"rgba(0,0,0,0.7)";n.push(`<div style="margin-top: 6px; padding-top: 6px; border-top: 1px solid ${c}; font-size: 11px;">`),n.push(`<div style="margin-bottom: 4px; font-weight: 600; color: ${d};">Other Properties:</div>`),l.forEach(u=>{const h=e[u];let f;typeof h=="object"&&h!==null?Array.isArray(h)?f=`[${h.length} items]`:f=`{${Object.keys(h).length} keys}`:f=String(h);const p=u.charAt(0).toUpperCase()+u.slice(1).replace(/_/g," ");n.push(`<div style="margin-bottom: 2px; font-family: monospace; font-size: 10px;"><strong>${p}:</strong> ${this.escapeHtml(f)}</div>`)}),n.push("</div>")}return n.join("")}show(e,n){if(!this.element||this.isDestroyed)return;const i=this.buildContent(n);this.element.innerHTML=i;const r=e.clientX??e.x??0,o=e.clientY??e.y??0;this.element.style.opacity="0",this.element.style.visibility="visible",this.element.setAttribute("aria-hidden","false");const s=this.element.offsetWidth||200,a=this.element.offsetHeight||100,l=this.options.padding;let c=r+l,d=o-a-l;const u=window.innerWidth,h=window.innerHeight;c+s>u-l&&(c=r-s-l),c<l&&(c=r+l),d<l&&(d=o+l),d+a>h-l&&(d=o-a-l),this.element.style.left=`${c}px`,this.element.style.top=`${d}px`,this.element.style.opacity="1",this.currentNode=n}updatePosition(e){!this.element||!this.currentNode||this.isDestroyed||this.show(e,this.currentNode)}hide(){this.element&&(this.element.style.opacity="0",this.element.style.visibility="hidden",this.element.setAttribute("aria-hidden","true"),this.currentNode=null)}destroy(){this.isDestroyed||(Wf.debug("Destroying tooltip"),this.darkModeQuery&&this.darkModeHandler&&(this.darkModeQuery.removeEventListener("change",this.darkModeHandler),this.darkModeQuery=null,this.darkModeHandler=null),this.element&&(this.element.remove(),this.element=null),this.currentNode=null,this.isDestroyed=!0)}}const rP=Et({prefix:"NetworkGraphSigma",level:"info"}),Pt={WIDTH:800,HEIGHT:600,NODE_SIZE:8,MIN_SIZE:5,MAX_SIZE:20,SIZE_EXPONENT:.4,EDGE_COLOR:"#d0d0d0",NODE_COLOR:"#6366f1",HOVER_COLOR:"#ef4444",SELECTED_COLOR:"#f97316"},qf={category10:["#3b82f6","#10b981","#f59e0b","#ef4444","#6366f1","#ec4899","#06b6d4","#f97316","#14b8a6","#a855f7"],pastel:["#a6cee3","#b2df8a","#fb9a99","#fdbf6f","#cab2d6","#ffff99","#b15928","#66c2a5","#fc8d62","#8da0cb"]};function Kf(t){return typeof t=="string"?t:t?.id||String(t)}class Xf{constructor(e,n={}){if(this.container=typeof e=="string"?document.querySelector(e):e,!this.container)throw new Error("NetworkGraphSigma: Container not found");this.options={width:n.width||this.container.clientWidth||Pt.WIDTH,height:n.height||this.container.clientHeight||Pt.HEIGHT,nodeSize:n.nodeRadius||Pt.NODE_SIZE,minSize:n.minRadius||Pt.MIN_SIZE,maxSize:n.maxRadius||Pt.MAX_SIZE,sizeExponent:n.sizeExponent||Pt.SIZE_EXPONENT,sizeBy:n.sizeBy||null,colorBy:n.colorBy||"group",colorScheme:n.colorScheme||"category10",showLabels:n.showLabels!==!1,chargeStrength:n.chargeStrength||-300,linkDistance:n.linkDistance||100,linkStrength:n.linkStrength||.5,collisionPadding:n.collisionPadding||2,collisionStrength:n.collisionStrength||.7,centerStrength:n.centerStrength||1,curvedEdges:n.curvedEdges||!1,edgeCurvature:n.edgeCurvature||.25,...n},this.graph=null,this.sigma=null,this.data={nodes:[],links:[]},this.isReady=!1,this.isDestroyed=!1,this.selectedNode=null,this.hoveredNode=null,this.draggedNode=null,this.isDragging=!1,this.eventHandlers=new Map,this.interactionDisabled=!1,this.sizeScale=null,this.colorMap=null,this.tooltip=new iP({contentBuilder:n.tooltipBuilder||null}),this.lastMouseEvent=null,this.simulation=null,this.simulationRunning=!1,this.simulationNodes=[],this.simulationLinks=[],this.resizeObserver=null,this._resizeTimeout=null,this.log=rP,this._initContainer(),this._initGraph(),this.log.info("NetworkGraphSigma initialized",{width:this.options.width,height:this.options.height})}_initContainer(){this.container.style.width||(this.container.style.width=`${this.options.width}px`),this.container.style.height||(this.container.style.height=`${this.options.height}px`),this.container.style.position="relative",this._setupResizeObserver()}_setupResizeObserver(){if(typeof ResizeObserver>"u"){this.log.warn("ResizeObserver not supported, canvas will not auto-resize");return}this.resizeObserver=new ResizeObserver(e=>{this._resizeTimeout&&clearTimeout(this._resizeTimeout),this._resizeTimeout=setTimeout(()=>{if(this.isDestroyed||!this.sigma)return;const n=e[0];if(!n)return;const{width:i,height:r}=n.contentRect;(Math.abs(i-this.options.width)>1||Math.abs(r-this.options.height)>1)&&(this.log.debug("Container resized",{width:i,height:r}),this.options.width=i,this.options.height=r,this.sigma.resize(),this.sigma.refresh(),this.emit("resize",{width:i,height:r}))},100)}),this.resizeObserver.observe(this.container)}_initGraph(){this.graph=new Ve({type:"undirected",allowSelfLoops:!1})}_initSigma(){this.sigma&&(this.sigma.kill(),this.sigma=null);const e=tv({borders:[{size:{value:.06},color:{value:"#ffffff"}},{size:{fill:!0},color:{attribute:"color"}}]}),i=this.graph.order>5e3,r=this.options.showLabels&&!i;this.sigma=new c2(this.graph,this.container,{allowInvalidContainer:!0,renderLabels:r,labelRenderedSizeThreshold:i?20:4,labelFont:"Inter, system-ui, Arial, sans-serif",labelSize:11,labelWeight:"500",labelColor:{color:"#333"},defaultNodeColor:Pt.NODE_COLOR,defaultEdgeColor:"#d0d0d0",defaultNodeType:"bordered",nodeProgramClasses:{bordered:e},edgeProgramClasses:{curved:nP},defaultEdgeType:this.options.curvedEdges?"curved":"line",minCameraRatio:.1,maxCameraRatio:10,stagePadding:50,renderEdgeLabels:!1,enableEdgeEvents:!1,zIndex:!0,...i&&{nodeReducer:(s,a)=>({...a,label:r?a.label:void 0})}});const o=this.container.getBoundingClientRect();o.width>0&&o.height>0&&(this.options.width=o.width,this.options.height=o.height,this.sigma.resize()),this._setupEventHandlers()}_setupEventHandlers(){this.sigma&&(this.sigma.on("clickNode",({node:e})=>{this.interactionDisabled||(this._selectNode(e),this.emit("nodeClick",{node:this.graph.getNodeAttributes(e),id:e}))}),this.sigma.on("enterNode",({node:e})=>{if(this.interactionDisabled)return;this.hoveredNode=e,this._updateNodeHighlight();const n=this.graph.getNodeAttributes(e),r={...this.data.nodes.find(o=>String(o.id)===String(e))||{},...n,id:e};this.lastMouseEvent&&this.tooltip.show(this.lastMouseEvent,r),this.emit("nodeHover",{node:r,id:e})}),this.sigma.on("leaveNode",({node:e})=>{this.interactionDisabled||(this.hoveredNode=null,this._updateNodeHighlight(),this.tooltip.hide(),this.emit("nodeLeave",{node:this.graph.getNodeAttributes(e),id:e}))}),this._mouseMoveHandler=e=>{this.lastMouseEvent={clientX:e.clientX,clientY:e.clientY},this.hoveredNode&&!this.isDragging&&this.tooltip.updatePosition(this.lastMouseEvent)},this.container.addEventListener("mousemove",this._mouseMoveHandler),this.sigma.on("downNode",({node:e,event:n})=>{if(this.interactionDisabled)return;this.draggedNode=e,this.isDragging=!0,n.x,n.y,this.tooltip.hide();const i=this.graph.getNodeAttributes(e);this.graph.setNodeAttribute(e,"fx",i.x),this.graph.setNodeAttribute(e,"fy",i.y),this.sigma.getCamera().disable(),this.emit("nodeDragStart",{node:i,id:e})}),this.sigma.getMouseCaptor().on("mousemovebody",e=>{if(this.interactionDisabled||!this.isDragging||!this.draggedNode)return;const n=this.sigma.viewportToGraph({x:e.x,y:e.y});this.graph.setNodeAttribute(this.draggedNode,"x",n.x),this.graph.setNodeAttribute(this.draggedNode,"y",n.y),this.graph.setNodeAttribute(this.draggedNode,"fx",n.x),this.graph.setNodeAttribute(this.draggedNode,"fy",n.y),this.emit("nodeDrag",{node:this.graph.getNodeAttributes(this.draggedNode),id:this.draggedNode})}),this.sigma.getMouseCaptor().on("mouseup",()=>{this.isDragging&&this.draggedNode&&this.emit("nodeDragEnd",{node:this.graph.getNodeAttributes(this.draggedNode),id:this.draggedNode}),this.isDragging=!1,this.draggedNode=null,this.sigma.getCamera().enable()}),this.sigma.on("clickStage",()=>{if(this.selectedNode){const e=this.selectedNode;this._deselectNode(),this.emit("nodeDeselected",{id:e})}}))}_updateNodeHighlight(){this.sigma&&(this.sigma.setSetting("nodeReducer",(e,n)=>{const i={...n};return e===this.selectedNode?(i.color=Pt.SELECTED_COLOR,i.highlighted=!0):e===this.hoveredNode&&(i.color=Pt.HOVER_COLOR,i.highlighted=!0),i}),this.sigma.refresh())}_selectNode(e){const n=this.selectedNode;this.selectedNode=e,n&&this.emit("nodeDeselected",{id:n}),this._updateNodeHighlight(),this.emit("nodeSelected",{node:this.graph.getNodeAttributes(e),id:e})}_deselectNode(){this.selectedNode=null,this._updateNodeHighlight()}startSimulation(){if(this.simulationRunning||!this.graph||this.graph.order===0){this.log.debug("Simulation not started",{running:this.simulationRunning,hasGraph:!!this.graph,order:this.graph?.order});return}this.simulation&&this.simulation.stop(),this.simulationNodes=[],this.simulationLinks=[];const e={};this.graph.forEachNode((r,o)=>{const s={id:r,x:o.x,y:o.y,size:o.size||8,...o};e[r]=s,this.simulationNodes.push(s)}),this.graph.forEachEdge((r,o,s,a)=>{this.simulationLinks.push({source:e[s],target:e[a],...o})});const n=this.simulationNodes.length;this.log.info("Starting D3 force simulation",{nodeCount:n});const i=this.options;this.simulation=iy(this.simulationNodes).force("link",ny(this.simulationLinks).id(r=>r.id).distance(i.linkDistance).strength(i.linkStrength)).force("charge",ry().strength(i.chargeStrength)).force("center",Sc(0,0).strength(i.centerStrength)).force("collision",ty().radius(r=>(r.size||8)+i.collisionPadding).strength(i.collisionStrength)).on("tick",()=>this._onSimulationTick()).on("end",()=>this._onSimulationEnd()),this.log.debug("Force settings",{chargeStrength:i.chargeStrength,linkDistance:i.linkDistance,linkStrength:i.linkStrength,collisionPadding:i.collisionPadding}),this.simulationRunning=!0,this.emit("simulationStart")}_onSimulationTick(){for(const e of this.simulationNodes)e.x!==void 0&&e.y!==void 0&&(this.graph.setNodeAttribute(e.id,"x",e.x),this.graph.setNodeAttribute(e.id,"y",e.y))}_onSimulationEnd(){this.simulationRunning=!1,this.fitView(),this.log.info("D3 simulation ended"),this.emit("simulationEnd")}stopSimulation(){this._stopSimulationInternal(!1)}_stopSimulationInternal(e=!1){this.simulation&&(this.simulation.stop(),this.simulationRunning=!1,e||this.fitView(),this.log.info("Stopped D3 simulation",{skipFit:e}),this.emit("simulationEnd"))}restartSimulation(){this.stopSimulation();const e=this.graph.order,n=Math.sqrt(e)*300;this.graph.forEachNode(i=>{this.graph.removeNodeAttribute(i,"fx"),this.graph.removeNodeAttribute(i,"fy"),this.graph.setNodeAttribute(i,"x",(Math.random()-.5)*n),this.graph.setNodeAttribute(i,"y",(Math.random()-.5)*n)}),this.data.nodes.forEach(i=>{i.fx=null,i.fy=null}),this.log.info("Restarting simulation with spread",{nodeCount:e,spread:n}),this.startSimulation()}toggleSimulation(){return this.simulationRunning?this.stopSimulation():this.startSimulation(),this.simulationRunning}isSimulationRunning(){return this.simulationRunning}setData(e,n,i={}){if(this.isDestroyed){this.log.warn("Cannot set data on destroyed instance");return}if(!Array.isArray(e))throw new Error("NetworkGraphSigma: nodes must be an array");if(!Array.isArray(n))throw new Error("NetworkGraphSigma: links must be an array");this.log.debug("Setting graph data",{nodeCount:e.length,linkCount:n.length}),this.data.nodes=e,this.data.links=n.map(r=>({...r,source:Kf(r.source),target:Kf(r.target)})),this.selectedNode=null,this._buildGraph(),this.sigma||this._initSigma(),this.isReady=!0,i?.skipSimulation||this.startSimulation(),this.emit("ready")}_buildGraph(){this.graph.clear(),this._computeScales();const e=this.data.nodes.length,n=Math.sqrt(e)*500;for(let i=0;i<this.data.nodes.length;i++){const r=this.data.nodes[i],o=String(r.id),s=r.x!==void 0?r.x:(Math.random()-.5)*n,a=r.y!==void 0?r.y:(Math.random()-.5)*n;let l=this.options.nodeSize;this.sizeScale&&r[this.options.sizeBy]!==void 0&&(l=this.sizeScale(r[this.options.sizeBy]));let c=Pt.NODE_COLOR;this.colorMap&&r[this.options.colorBy]!==void 0&&(c=this.colorMap(r[this.options.colorBy])),this.graph.addNode(o,{x:s,y:a,size:l,color:c,label:String(r.label||r.id),...r})}for(const i of this.data.links){const r=String(i.source),o=String(i.target);if(!(!this.graph.hasNode(r)||!this.graph.hasNode(o))&&r!==o&&!this.graph.hasEdge(r,o))try{const s={weight:i.weight||1,size:.5,color:Pt.EDGE_COLOR};this.options.curvedEdges&&(s.type="curved",s.curvature=this.options.edgeCurvature),this.graph.addEdge(r,o,s)}catch{}}this.log.info("Graph built",{nodes:this.graph.order,edges:this.graph.size})}_computeScales(){if(!this.data.nodes||this.data.nodes.length===0)return;if(this.options.sizeBy){const n=this.data.nodes.map(i=>i[this.options.sizeBy]).filter(i=>i!=null&&!isNaN(i));if(n.length>0){let i=Math.min(...n),r=Math.max(...n);i===r&&(r=i+1);const o=r-i,s=this.options.sizeExponent||Pt.SIZE_EXPONENT;this.sizeScale=a=>{const l=(a-i)/o,c=Math.pow(l,s);return this.options.minSize+c*(this.options.maxSize-this.options.minSize)}}}const e=this.options.colorBy;if(e){const n=this.data.nodes.map(s=>s[e]).filter(s=>s!=null),i=[...new Set(n)],r=qf[this.options.colorScheme]||qf.category10,o=new Map;i.forEach((s,a)=>{o.set(s,r[a%r.length])}),this.colorMap=s=>o.get(s)||Pt.NODE_COLOR}}updateVisualEncoding(e={}){e.sizeBy!==void 0&&(this.options.sizeBy=e.sizeBy),e.minRadius!==void 0&&(this.options.minSize=e.minRadius),e.maxRadius!==void 0&&(this.options.maxSize=e.maxRadius),e.minSize!==void 0&&(this.options.minSize=e.minSize),e.maxSize!==void 0&&(this.options.maxSize=e.maxSize),e.sizeExponent!==void 0&&(this.options.sizeExponent=e.sizeExponent),e.colorBy!==void 0&&(this.options.colorBy=e.colorBy),e.colorScheme!==void 0&&(this.options.colorScheme=e.colorScheme),this._computeScales(),this.graph.forEachNode((n,i)=>{const r=this.data.nodes.find(o=>String(o.id)===n);r&&(this.sizeScale&&r[this.options.sizeBy]!==void 0&&!i.lockedSize&&this.graph.setNodeAttribute(n,"size",this.sizeScale(r[this.options.sizeBy])),this.colorMap&&r[this.options.colorBy]!==void 0&&!i.lockedColor&&this.graph.setNodeAttribute(n,"color",this.colorMap(r[this.options.colorBy])))}),this.sigma&&this.sigma.refresh()}updateCliqueEdgeColors(e){if(!this.graph)return;const n="#ef4444",i=Pt.EDGE_COLOR,r=(o,s)=>{const a=this.graph.neighbors(o),l=this.graph.neighbors(s);for(const c of a)if(c!==s&&l.includes(c))return!0;return!1};this.graph.forEachEdge((o,s,a,l)=>{const c=e&&r(a,l)?n:i;this.graph.setEdgeAttribute(o,"color",c)}),this.sigma&&this.sigma.refresh(),this.log.debug("Updated clique edge colors",{enabled:e})}setCurvedEdges(e,n=.25){this.graph&&(this.options.curvedEdges=e,this.options.edgeCurvature=n,this.graph.forEachEdge(i=>{e?(this.graph.setEdgeAttribute(i,"type","curved"),this.graph.setEdgeAttribute(i,"curvature",n)):(this.graph.setEdgeAttribute(i,"type","line"),this.graph.removeEdgeAttribute(i,"curvature"))}),this.sigma&&this.sigma.refresh(),this.log.debug("Curved edges toggled",{enabled:e,curvature:n}))}updateNodeStatistics(e,n="eigenvector",i=!0){for(const r of e){const o=String(r.id),s=this.data.nodes.find(a=>String(a.id)===o);if(s&&Object.assign(s,r),this.graph.hasNode(o))for(const[a,l]of Object.entries(r))a!=="id"&&this.graph.setNodeAttribute(o,a,l)}this.updateVisualEncoding({sizeBy:n})}updateGraph(e={}){if(!(!this.graph||!this.sigma)){this._stopSimulationInternal(e.skipFit);for(const n of this.data.nodes){const i=String(n.id);this.graph.hasNode(i)&&(n.x!==void 0&&this.graph.setNodeAttribute(i,"x",n.x),n.y!==void 0&&this.graph.setNodeAttribute(i,"y",n.y),n.fx!==void 0&&this.graph.setNodeAttribute(i,"x",n.fx),n.fy!==void 0&&this.graph.setNodeAttribute(i,"y",n.fy))}this.sigma.refresh(),e.zoomRatio!==void 0?this.sigma.getCamera().animate({ratio:e.zoomRatio},{duration:300}):e.skipFit||this.fitView(),this.emit("ready")}}lockPositions(){if(!this.data.nodes||this.data.nodes.length===0){this.log.warn("No nodes to lock");return}this.data.nodes.forEach(e=>{const n=String(e.id);if(this.graph.hasNode(n)){const i=this.graph.getNodeAttribute(n,"x"),r=this.graph.getNodeAttribute(n,"y");e.fx=i,e.fy=r,e.x=i,e.y=r}}),this.log.debug("Locked all node positions")}unlockPositions(){if(!this.data.nodes||this.data.nodes.length===0){this.log.warn("No nodes to unlock");return}this.data.nodes.forEach(e=>{e.fx=null,e.fy=null}),this.log.debug("Unlocked all node positions")}getNodeIds(){return this.data.nodes.map(e=>e.id)}hasNode(e){return this.data.nodes.some(n=>String(n.id)===String(e))}getSelectedNode(){return this.selectedNode&&this.graph.hasNode(this.selectedNode)?{id:this.selectedNode,...this.graph.getNodeAttributes(this.selectedNode)}:null}fitView(){if(!this.sigma)return;this.sigma.getCamera().animatedReset({duration:300})}getCamera(){return this.sigma?.getCamera()}getGraph(){return this.graph}on(e,n){this.eventHandlers.has(e)||this.eventHandlers.set(e,new Set),this.eventHandlers.get(e).add(n)}off(e,n){this.eventHandlers.has(e)&&this.eventHandlers.get(e).delete(n)}emit(e,n){if(this.eventHandlers.has(e))for(const i of this.eventHandlers.get(e))try{i(n)}catch(r){this.log.error("Event handler error",{eventName:e,error:r.message})}}destroy(){this.isDestroyed||(this.log.info("Destroying NetworkGraphSigma instance"),this.simulation&&(this.simulation.stop(),this.simulation=null),this.simulationRunning=!1,this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=null),this._resizeTimeout&&(clearTimeout(this._resizeTimeout),this._resizeTimeout=null),this._mouseMoveHandler&&this.container&&(this.container.removeEventListener("mousemove",this._mouseMoveHandler),this._mouseMoveHandler=null),this.tooltip&&(this.tooltip.destroy(),this.tooltip=null),this.sigma&&(this.sigma.kill(),this.sigma=null),this.graph&&(this.graph.clear(),this.graph=null),this.data={nodes:[],links:[]},this.eventHandlers.clear(),this.isReady=!1,this.isDestroyed=!0)}}const qi={ERROR:1,WARN:2,INFO:3,DEBUG:4,TRACE:5},oP="info",Zf="sandbox_logging_filters",Yf=["themeswitcher","codemirroreditor","editoradapter"];class sP{constructor(e={}){this.enabled=e.enabled!==!1,this.level=e.level||oP,this.prefix=e.prefix||"",this.component=this.prefix,this.redactSecrets=e.redactSecrets||!1,this.showTimestamp=e.showTimestamp!==!1,this.format=e.format||"[{timestamp}] [{prefix}] {message}",this.currentLevel=qi[this.level.toUpperCase()]??qi.INFO,this.loggingManager=e.loggingManager,this.console=e.console||console,this.component&&this.loggingManager&&this.loggingManager.registerComponent(this.component)}shouldLog(e){if(e.toUpperCase()==="ERROR")return this.enabled&&qi[e.toUpperCase()]<=this.currentLevel;const n=!this.component||!this.loggingManager||this.loggingManager.isComponentEnabled(this.component);return this.enabled&&n&&qi[e.toUpperCase()]<=this.currentLevel}redactArgs(e){return this.redactSecrets?e.map(n=>this.redactValue(n)):e}redactValue(e){if(typeof e=="string")return e.replace(/\b[a-zA-Z0-9_-]{20,}\b/g,"[REDACTED]");if(Array.isArray(e))return e.map(n=>this.redactValue(n));if(e&&typeof e=="object"&&e.constructor===Object){const n={};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=this.redactValue(e[i]));return n}return e}getTimestamp(){return new Date().toISOString()}formatMessage(e,...n){const i=this.showTimestamp?this.getTimestamp():"",r=this.prefix;let o=this.format.replace("{timestamp}",i).replace("{prefix}",r).replace("{message}",e);this.showTimestamp||(o=o.replace(/\s*\[?\]\s*/g," ").replace(/\s+/g," ").trim());const s=this.redactArgs(n);return[o,...s]}error(e,...n){this.shouldLog("error")&&this.console.error(...this.formatMessage(e,...n))}warn(e,...n){this.shouldLog("warn")&&this.console.warn(...this.formatMessage(e,...n))}info(e,...n){this.shouldLog("info")&&this.console.info(...this.formatMessage(e,...n))}log(e,...n){this.shouldLog("info")&&this.console.log(...this.formatMessage(e,...n))}debug(e,...n){this.shouldLog("debug")&&this.console.debug(...this.formatMessage(e,...n))}trace(e,...n){if(this.shouldLog("trace")){const i=this.redactSecrets;this.redactSecrets=!0;const r=this.formatMessage(e,...n);this.redactSecrets=i,this.console.trace(...r)}}table(e,n){if(this.shouldLog("info")){const i=this.prefix?`[${this.prefix}]`:"";i&&this.console.log(i),this.console.table(e,n)}}group(e){this.shouldLog("info")&&this.console.group(...this.formatMessage(e))}groupCollapsed(e){this.shouldLog("info")&&this.console.groupCollapsed(...this.formatMessage(e))}groupEnd(){this.shouldLog("info")&&this.console.groupEnd()}time(e){this.shouldLog("debug")&&this.console.time(this.prefix?`[${this.prefix}] ${e}`:e)}timeEnd(e){this.shouldLog("debug")&&this.console.timeEnd(this.prefix?`[${this.prefix}] ${e}`:e)}setLevel(e){this.level=e,this.currentLevel=qi[e.toUpperCase()]??qi.INFO}enable(){this.enabled=!0}disable(){this.enabled=!1}isEnabled(){return this.enabled}}class aP{constructor(e={}){this.storage=e.storage,this.console=e.console||console,this.allowedComponents=new Set,this.globalEnabled=!0,this.allowAll=!1,this.registeredComponents=new Set,this.storage&&this.loadFromStorage()}enable(...e){e.forEach(n=>this.allowedComponents.add(n.toLowerCase())),this.saveToStorage(),this.console.log(" Logging enabled for:",e.join(", "))}disable(...e){e.forEach(n=>this.allowedComponents.delete(n.toLowerCase())),this.saveToStorage(),this.console.log(" Logging disabled for:",e.join(", "))}enableAll(){this.allowAll=!0,this.saveToStorage(),this.console.log(" Logging enabled for ALL components")}disableAll(){this.allowAll=!1,this.allowedComponents.clear(),this.saveToStorage(),this.console.log(" Logging disabled for ALL components (errors still show)")}status(){this.console.log(" Logging Status:"),this.console.log("  Global enabled:",this.globalEnabled),this.console.log("  Allow all:",this.allowAll),this.console.log("  Enabled components:",Array.from(this.allowedComponents).join(", ")||"none")}listComponents(){this.console.log(" Available components to filter:"),Array.from(this.registeredComponents).sort().forEach(e=>{const n=this.isComponentEnabled(e);this.console.log(`  ${n?"":""} ${e}`)})}isComponentEnabled(e){return this.globalEnabled?this.allowAll?!0:this.allowedComponents.has(e.toLowerCase()):!1}registerComponent(e){this.registeredComponents.add(e)}saveToStorage(){if(this.storage)try{const e={allowedComponents:Array.from(this.allowedComponents),allowAll:this.allowAll,globalEnabled:this.globalEnabled};this.storage.setItem(Zf,JSON.stringify(e))}catch{}}loadFromStorage(){if(this.storage)try{const e=this.storage.getItem(Zf),n=JSON.parse(e||"{}");this.allowedComponents=new Set(n.allowedComponents||[]),this.allowAll=n.allowAll||!1,this.globalEnabled=n.globalEnabled!==!1,e||(this.allowedComponents=new Set(Yf))}catch{this.allowedComponents=new Set(Yf)}}}class cv{getItem(e){throw new Error("StorageAdapter.getItem must be implemented")}setItem(e,n){throw new Error("StorageAdapter.setItem must be implemented")}removeItem(e){throw new Error("StorageAdapter.removeItem must be implemented")}}class lP extends cv{constructor(){super(),this.storage=new Map}getItem(e){return this.storage.get(e)??null}setItem(e,n){this.storage.set(e,n)}removeItem(e){this.storage.delete(e)}}class cP extends cv{getItem(e){try{return localStorage.getItem(e)}catch{return null}}setItem(e,n){try{localStorage.setItem(e,n)}catch{}}removeItem(e){try{localStorage.removeItem(e)}catch{}}}function dP(){return typeof localStorage<"u"?new cP:new lP}class dv{getGlobal(){throw new Error("GlobalAdapter.getGlobal must be implemented")}setGlobalProperty(e,n){throw new Error("GlobalAdapter.setGlobalProperty must be implemented")}hasGlobalProperty(e){throw new Error("GlobalAdapter.hasGlobalProperty must be implemented")}}class uP extends dv{getGlobal(){return window}setGlobalProperty(e,n){window[e]=n}hasGlobalProperty(e){return e in window}}class hP extends dv{getGlobal(){return globalThis}setGlobalProperty(e,n){globalThis[e]=n}hasGlobalProperty(e){return e in globalThis}}function fP(){return typeof window<"u"?new uP:new hP}const gP=dP(),Jf=fP(),Si=new aP({storage:gP,console});if(typeof window<"u"){const t={enable:(...e)=>Si.enable(...e),disable:(...e)=>Si.disable(...e),enableAll:()=>Si.enableAll(),disableAll:()=>Si.disableAll(),status:()=>Si.status(),list:()=>Si.listComponents()};Jf.setGlobalProperty("logFilter",t),Jf.setGlobalProperty("loggerjs",t)}function Ui(t={}){return new sP({...t,loggingManager:Si})}class Fa{constructor(){this.nodes=new Set,this.edges=[],this.adjacencyMap=new Map}addNode(e){return this.nodes.add(e),this}addNodesFrom(e){return e.forEach(n=>this.nodes.add(n)),this}removeNode(e){if(!this.nodes.has(e))throw new Error(`Node '${e}' does not exist in the graph`);return this.nodes.delete(e),this.edges=this.edges.filter(n=>n.u!==e&&n.v!==e),this.adjacencyMap.has(e)&&(Array.from(this.adjacencyMap.get(e).keys()).forEach(n=>{this.adjacencyMap.has(n)&&this.adjacencyMap.get(n).delete(e)}),this.adjacencyMap.delete(e)),this}hasNode(e){return this.nodes.has(e)}addEdgesFrom(e){return e.forEach(([n,i,r=1])=>{this.addEdge(n,i,r)}),this}addEdge(e,n,i=1){this.nodes.add(e),this.nodes.add(n);const r={u:e,v:n,weight:i};return this.edges.push(r),this.adjacencyMap.has(e)||this.adjacencyMap.set(e,new Map),this.adjacencyMap.has(n)||this.adjacencyMap.set(n,new Map),this.adjacencyMap.get(e).set(n,i),this.adjacencyMap.get(n).set(e,i),this}getNeighbors(e){return this.adjacencyMap.has(e)?Array.from(this.adjacencyMap.get(e).keys()):[]}getAllEdges(){return this.edges}getNodeList(){return Array.from(this.nodes)}numberOfNodes(){return this.nodes.size}numberOfEdges(){return this.edges.length}removeEdge(e,n){const i=this.edges.findIndex(r=>r.u===e&&r.v===n||r.u===n&&r.v===e);if(i===-1)throw new Error(`Edge between '${e}' and '${n}' does not exist`);return this.edges.splice(i,1),this.adjacencyMap.has(e)&&this.adjacencyMap.get(e).delete(n),this.adjacencyMap.has(n)&&this.adjacencyMap.get(n).delete(e),this}hasEdge(e,n){return this.adjacencyMap.has(e)&&this.adjacencyMap.get(e).has(n)}getEdgeWeight(e,n){return this.hasEdge(e,n)?this.adjacencyMap.get(e).get(n):null}updateEdgeWeight(e,n,i){if(!this.hasEdge(e,n))throw new Error(`Edge between '${e}' and '${n}' does not exist`);this.adjacencyMap.get(e).set(n,i),this.adjacencyMap.get(n).set(e,i);const r=this.edges.find(o=>o.u===e&&o.v===n||o.u===n&&o.v===e);return r&&(r.weight=i),this}degree(e){return this.adjacencyMap.has(e)?this.adjacencyMap.get(e).size:0}clear(){return this.nodes.clear(),this.edges=[],this.adjacencyMap.clear(),this}}class Cr{constructor(e){this.workerScript=e,this.worker=null}static create(e){if(typeof globalThis<"u"&&globalThis.__USE_MOCK_WORKERS__)return new mP(e);if(typeof Worker<"u")return new Kd(e);if(typeof require<"u")try{return require.resolve("worker_threads"),new pP(e)}catch{throw new Error("Worker Threads not available in this Node.js version")}else throw new Error("No worker support available in this environment")}static isSupported(){if(typeof Worker<"u")return!0;if(typeof require<"u")try{return require.resolve("worker_threads"),!0}catch{return!1}return!1}postMessage(e,n=[]){throw new Error("Must implement postMessage")}onMessage(e){throw new Error("Must implement onMessage")}onError(e){throw new Error("Must implement onError")}terminate(){throw new Error("Must implement terminate")}}class Kd extends Cr{constructor(e){super(e),this.worker=new Worker(e,{type:"module"})}static fromCode(e){const n=new Blob([e],{type:"application/javascript"}),i=URL.createObjectURL(n);return new Kd(i)}postMessage(e,n=[]){this.worker.postMessage(e,n)}onMessage(e){this.worker.onmessage=n=>e(n.data)}onError(e){this.worker.onerror=n=>{e(new Error(n.message||"Worker error"))}}terminate(){this.worker&&(this.worker.terminate(),this.worker=null)}}class pP extends Cr{constructor(e){super(e);const{Worker:n}=require("worker_threads");this.worker=new n(e)}postMessage(e,n=[]){this.worker.postMessage(e,n)}onMessage(e){this.worker.on("message",e)}onError(e){this.worker.on("error",n=>{e(n)}),this.worker.on("exit",n=>{n!==0&&e(new Error(`Worker stopped with exit code ${n}`))})}terminate(){this.worker&&(this.worker.terminate(),this.worker=null)}}class mP extends Cr{constructor(e){super(e),this.messageHandler=null}postMessage(e,n=[]){setTimeout(async()=>{if(this.messageHandler)try{const i=await this.executeSync(e);this.messageHandler({id:e.id,status:"complete",result:i})}catch(i){this.errorHandler?this.errorHandler(i):this.messageHandler({id:e.id,status:"error",error:i.message||"Unknown error",stack:i.stack})}},0)}onMessage(e){this.messageHandler=e}onError(e){this.errorHandler=e}terminate(){this.messageHandler=null,this.errorHandler=null}async executeSync(e){const{executeTask:n}=await T(async()=>{const{executeTask:i}=await import("./module-registry-KqLv1uKd-DHlvGTWV.js");return{executeTask:i}},[]);return n(e)}}class yP{constructor(e={}){this.maxWorkers=e.maxWorkers||this.detectCPUCount(),this.workerScript=e.workerScript||this.getDefaultWorkerScript(),this.taskTimeout=e.taskTimeout||3e5,this.verbose=e.verbose||!1,this.affinityCacheLimit=e.affinityCacheLimit||50,this.enableAffinity=e.enableAffinity!==!1,this.workers=[],this.availableWorkers=[],this.taskQueue=[],this.activeTasks=new Map,this.taskIdCounter=0,this.initialized=!1,this.affinityMetrics={hits:0,misses:0},this.log=Ui({prefix:"WorkerPool",level:this.verbose?"debug":"info"})}detectCPUCount(){if(typeof navigator<"u"&&navigator.hardwareConcurrency)return navigator.hardwareConcurrency;if(typeof require<"u")try{return require("os").cpus().length}catch{}return 4}getDefaultWorkerScript(){return typeof window<"u"?new URL("data:text/javascript;base64,LyoqCiAqIE5ldHdvcmsgV29ya2VyIC0gRXhlY3V0ZXMgY29tcHV0ZSBmdW5jdGlvbnMgZnJvbSBhbGdvcml0aG0gbW9kdWxlcwogKgogKiAqKkJ1bmRsZXItRnJpZW5kbHkgQXJjaGl0ZWN0dXJlOioqCiAqIC0gU3RhdGljYWxseSBpbXBvcnRzIGFsbCBhbGdvcml0aG0gbW9kdWxlcyB1cGZyb250CiAqIC0gQ3JlYXRlcyBhIHJlZ2lzdHJ5IHRoYXQgbWFwcyBtb2R1bGUgcGF0aHMgdG8gdGhlaXIgZXhwb3J0cwogKiAtIE1haW4gdGhyZWFkIHNlbmRzOiB7IGlkLCBtb2R1bGUsIGZ1bmN0aW9uTmFtZSwgYXJncyB9CiAqIC0gV29ya2VyIGxvb2tzIHVwIG1vZHVsZSBmcm9tIHJlZ2lzdHJ5IGFuZCBleGVjdXRlcyBmdW5jdGlvbgogKgogKiBUaGlzIGFwcHJvYWNoIHdvcmtzIHdpdGggYWxsIGJ1bmRsZXJzIChWaXRlLCBXZWJwYWNrLCBSb2xsdXApIGJlY2F1c2UKICogaW1wb3J0cyBhcmUga25vd24gYXQgYnVpbGQgdGltZS4KICoKICogQG1vZHVsZSBuZXR3b3JrLXdvcmtlcgogKi8KCmltcG9ydCB7IGNyZWF0ZUxvZ2dlciB9IGZyb20gJ0BndWluZXRpay9sb2dnZXInOwoKLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQovLyBTVEFUSUMgSU1QT1JUUyAtIEFsbCBhbGdvcml0aG0gbW9kdWxlcyBpbXBvcnRlZCB1cGZyb250Ci8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KCi8vIENyZWF0ZSBsb2dnZXIgZm9yIHdvcmtlciAocnVucyBpbiBzZXBhcmF0ZSBjb250ZXh0LCBubyB3aW5kb3cubG9nRmlsdGVyKQpjb25zdCBsb2cgPSBjcmVhdGVMb2dnZXIoewogIHByZWZpeDogJ25ldHdvcmstd29ya2VyJywKICBsZXZlbDogJ2luZm8nIC8vIFdvcmtlcnMgZGVmYXVsdCB0byBpbmZvIGxldmVsCn0pOwoKLy8gU3RhdGlzdGljcyBhbGdvcml0aG1zIChub2RlLWxldmVsIGFuZCBncmFwaC1sZXZlbCkKaW1wb3J0ICogYXMgbm9kZVN0YXRzQ29tcHV0ZSBmcm9tICcuLi9zdGF0aXN0aWNzL2FsZ29yaXRobXMvbm9kZS1zdGF0cy5qcyc7CmltcG9ydCAqIGFzIGdyYXBoU3RhdHNDb21wdXRlIGZyb20gJy4uL3N0YXRpc3RpY3MvYWxnb3JpdGhtcy9ncmFwaC1zdGF0cy5qcyc7CgovLyBDb21tdW5pdHkgZGV0ZWN0aW9uIGFsZ29yaXRobXMKaW1wb3J0ICogYXMgbG91dmFpbkNvbXB1dGUgZnJvbSAnLi4vY29tbXVuaXR5L2FsZ29yaXRobXMvbG91dmFpbi5qcyc7CgovLyBMYXlvdXQgYWxnb3JpdGhtcwppbXBvcnQgKiBhcyByYW5kb21Db21wdXRlIGZyb20gJy4uL2xheW91dHMvcmFuZG9tLmpzJzsKaW1wb3J0ICogYXMgY2lyY3VsYXJDb21wdXRlIGZyb20gJy4uL2xheW91dHMvY2lyY3VsYXIuanMnOwppbXBvcnQgKiBhcyBzcGlyYWxDb21wdXRlIGZyb20gJy4uL2xheW91dHMvc3BpcmFsLmpzJzsKaW1wb3J0ICogYXMgc2hlbGxDb21wdXRlIGZyb20gJy4uL2xheW91dHMvc2hlbGwuanMnOwppbXBvcnQgKiBhcyBzcGVjdHJhbENvbXB1dGUgZnJvbSAnLi4vbGF5b3V0cy9zcGVjdHJhbC5qcyc7CmltcG9ydCAqIGFzIGZvcmNlRGlyZWN0ZWRDb21wdXRlIGZyb20gJy4uL2xheW91dHMvZm9yY2UtZGlyZWN0ZWQuanMnOwppbXBvcnQgKiBhcyBrYW1hZGFLYXdhaUNvbXB1dGUgZnJvbSAnLi4vbGF5b3V0cy9rYW1hZGEta2F3YWkuanMnOwppbXBvcnQgKiBhcyBiaXBhcnRpdGVDb21wdXRlIGZyb20gJy4uL2xheW91dHMvYmlwYXJ0aXRlLmpzJzsKaW1wb3J0ICogYXMgbXVsdGlwYXJ0aXRlQ29tcHV0ZSBmcm9tICcuLi9sYXlvdXRzL211bHRpcGFydGl0ZS5qcyc7CmltcG9ydCAqIGFzIGJmc0NvbXB1dGUgZnJvbSAnLi4vbGF5b3V0cy9iZnMuanMnOwppbXBvcnQgKiBhcyBkZnNDb21wdXRlIGZyb20gJy4uL2xheW91dHMvZGZzLmpzJzsKaW1wb3J0ICogYXMgcmFkaWFsQ29tcHV0ZSBmcm9tICcuLi9sYXlvdXRzL3JhZGlhbC5qcyc7CmltcG9ydCAqIGFzIGZvcmNlRGlyZWN0ZWQzRENvbXB1dGUgZnJvbSAnLi4vbGF5b3V0cy9mb3JjZS1kaXJlY3RlZC0zZC5qcyc7CgovLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ci8vIE1PRFVMRSBSRUdJU1RSWSAtIE1hcHMgbW9kdWxlIHBhdGhzIHRvIHRoZWlyIGV4cG9ydHMKLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQoKY29uc3QgTU9EVUxFX1JFR0lTVFJZID0gewogIC8vIE5vZGUtbGV2ZWwgc3RhdGlzdGljcyAoYWxsIGluIG9uZSBmaWxlKQogICcuLi9zdGF0aXN0aWNzL2FsZ29yaXRobXMvbm9kZS1zdGF0cy5qcyc6IG5vZGVTdGF0c0NvbXB1dGUsCgogIC8vIEdyYXBoLWxldmVsIHN0YXRpc3RpY3MKICAnLi4vc3RhdGlzdGljcy9hbGdvcml0aG1zL2dyYXBoLXN0YXRzLmpzJzogZ3JhcGhTdGF0c0NvbXB1dGUsCgogIC8vIENvbW11bml0eQogICcuLi9jb21tdW5pdHkvYWxnb3JpdGhtcy9sb3V2YWluLmpzJzogbG91dmFpbkNvbXB1dGUsCgogIC8vIExheW91dHMKICAnLi4vbGF5b3V0cy9yYW5kb20uanMnOiByYW5kb21Db21wdXRlLAogICcuLi9sYXlvdXRzL2NpcmN1bGFyLmpzJzogY2lyY3VsYXJDb21wdXRlLAogICcuLi9sYXlvdXRzL3NwaXJhbC5qcyc6IHNwaXJhbENvbXB1dGUsCiAgJy4uL2xheW91dHMvc2hlbGwuanMnOiBzaGVsbENvbXB1dGUsCiAgJy4uL2xheW91dHMvc3BlY3RyYWwuanMnOiBzcGVjdHJhbENvbXB1dGUsCiAgJy4uL2xheW91dHMvZm9yY2UtZGlyZWN0ZWQuanMnOiBmb3JjZURpcmVjdGVkQ29tcHV0ZSwKICAnLi4vbGF5b3V0cy9rYW1hZGEta2F3YWkuanMnOiBrYW1hZGFLYXdhaUNvbXB1dGUsCiAgJy4uL2xheW91dHMvYmlwYXJ0aXRlLmpzJzogYmlwYXJ0aXRlQ29tcHV0ZSwKICAnLi4vbGF5b3V0cy9tdWx0aXBhcnRpdGUuanMnOiBtdWx0aXBhcnRpdGVDb21wdXRlLAogICcuLi9sYXlvdXRzL2Jmcy5qcyc6IGJmc0NvbXB1dGUsCiAgJy4uL2xheW91dHMvZGZzLmpzJzogZGZzQ29tcHV0ZSwKICAnLi4vbGF5b3V0cy9yYWRpYWwuanMnOiByYWRpYWxDb21wdXRlLAogICcuLi9sYXlvdXRzL2ZvcmNlLWRpcmVjdGVkLTNkLmpzJzogZm9yY2VEaXJlY3RlZDNEQ29tcHV0ZQp9OwoKLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQovLyBXT1JLRVIgTUVTU0FHRSBIQU5ETEVSCi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KCi8qKgogKiBNYWluIG1lc3NhZ2UgaGFuZGxlciAtIHJlY2VpdmVzIHRhc2tzIGFuZCBkZWxlZ2F0ZXMgdG8gYWxnb3JpdGhtIG1vZHVsZXMKICovCnNlbGYub25tZXNzYWdlID0gYXN5bmMgZnVuY3Rpb24oZXZlbnQpIHsKICBjb25zdCB7IGlkLCBtb2R1bGUsIGZ1bmN0aW9uTmFtZSwgYXJncyA9IFtdIH0gPSBldmVudC5kYXRhOwoKICB0cnkgewogICAgLy8gVmFsaWRhdGUgbWVzc2FnZSBmb3JtYXQKICAgIGlmICghbW9kdWxlIHx8ICFmdW5jdGlvbk5hbWUpIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIHRhc2s6IG1vZHVsZSBhbmQgZnVuY3Rpb25OYW1lIGFyZSByZXF1aXJlZCcpOwogICAgfQoKICAgIGxvZy5kZWJ1ZygnUHJvY2Vzc2luZyB0YXNrJywgewogICAgICBpZCwKICAgICAgbW9kdWxlLAogICAgICBmdW5jdGlvbk5hbWUsCiAgICAgIGFyZ3NMZW5ndGg6IGFyZ3M/Lmxlbmd0aCB8fCAwCiAgICB9KTsKCiAgICAvLyBDcmVhdGUgcHJvZ3Jlc3MgY2FsbGJhY2sgdGhhdCByZXBvcnRzIGJhY2sgdG8gbWFpbiB0aHJlYWQKICAgIGNvbnN0IHByb2dyZXNzQ2FsbGJhY2sgPSAocHJvZ3Jlc3MpID0+IHsKICAgICAgc2VsZi5wb3N0TWVzc2FnZSh7CiAgICAgICAgaWQsCiAgICAgICAgc3RhdHVzOiAncHJvZ3Jlc3MnLAogICAgICAgIHByb2dyZXNzOiBNYXRoLm1pbihNYXRoLm1heChwcm9ncmVzcywgMCksIDEpIC8vIENsYW1wIHRvIFswLCAxXQogICAgICB9KTsKICAgIH07CgogICAgLy8gTG9vayB1cCBhbGdvcml0aG0gbW9kdWxlIGZyb20gcmVnaXN0cnkKICAgIGNvbnN0IGFsZ29yaXRobU1vZHVsZSA9IE1PRFVMRV9SRUdJU1RSWVttb2R1bGVdOwoKICAgIGlmICghYWxnb3JpdGhtTW9kdWxlKSB7CiAgICAgIHRocm93IG5ldyBFcnJvcigKICAgICAgICBgTW9kdWxlICcke21vZHVsZX0nIG5vdCBmb3VuZCBpbiByZWdpc3RyeS4gYCArCiAgICAgICAgYEF2YWlsYWJsZSBtb2R1bGVzOiAke09iamVjdC5rZXlzKE1PRFVMRV9SRUdJU1RSWSkuam9pbignLCAnKX1gCiAgICAgICk7CiAgICB9CgogICAgLy8gR2V0IHRoZSBjb21wdXRlIGZ1bmN0aW9uCiAgICBjb25zdCBjb21wdXRlRnVuY3Rpb24gPSBhbGdvcml0aG1Nb2R1bGVbZnVuY3Rpb25OYW1lXTsKCiAgICBpZiAoIWNvbXB1dGVGdW5jdGlvbiB8fCB0eXBlb2YgY29tcHV0ZUZ1bmN0aW9uICE9PSAnZnVuY3Rpb24nKSB7CiAgICAgIHRocm93IG5ldyBFcnJvcigKICAgICAgICBgRnVuY3Rpb24gJyR7ZnVuY3Rpb25OYW1lfScgbm90IGZvdW5kIGluIG1vZHVsZSAnJHttb2R1bGV9Jy4gYCArCiAgICAgICAgYEF2YWlsYWJsZSBmdW5jdGlvbnM6ICR7T2JqZWN0LmtleXMoYWxnb3JpdGhtTW9kdWxlKS5qb2luKCcsICcpfWAKICAgICAgKTsKICAgIH0KCiAgICAvLyBFeGVjdXRlIHRoZSBjb21wdXRlIGZ1bmN0aW9uCiAgICAvLyBMYXN0IGFyZyBpcyBhbHdheXMgdGhlIHByb2dyZXNzIGNhbGxiYWNrCiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjb21wdXRlRnVuY3Rpb24oLi4uYXJncywgcHJvZ3Jlc3NDYWxsYmFjayk7CgogICAgLy8gU2VuZCBzdWNjZXNzZnVsIHJlc3VsdAogICAgc2VsZi5wb3N0TWVzc2FnZSh7CiAgICAgIGlkLAogICAgICBzdGF0dXM6ICdjb21wbGV0ZScsCiAgICAgIHJlc3VsdAogICAgfSk7CgogIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAvLyBTZW5kIGVycm9yCiAgICBsb2cuZXJyb3IoJ1Rhc2sgZmFpbGVkJywgewogICAgICBpZCwKICAgICAgZXJyb3I6IGVycm9yLm1lc3NhZ2UsCiAgICAgIHN0YWNrOiBlcnJvci5zdGFjawogICAgfSk7CiAgICBzZWxmLnBvc3RNZXNzYWdlKHsKICAgICAgaWQsCiAgICAgIHN0YXR1czogJ2Vycm9yJywKICAgICAgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfHwgJ1Vua25vd24gZXJyb3InLAogICAgICBzdGFjazogZXJyb3Iuc3RhY2sKICAgIH0pOwogIH0KfTsKCi8qKgogKiBIYW5kbGUgd29ya2VyIGVycm9ycwogKi8Kc2VsZi5vbmVycm9yID0gZnVuY3Rpb24oZXJyb3IpIHsKICBsb2cuZXJyb3IoJ1dvcmtlciBlcnJvcicsIHsKICAgIGVycm9yOiBlcnJvci5tZXNzYWdlIHx8ICdXb3JrZXIgZXJyb3Igb2NjdXJyZWQnLAogICAgc3RhY2s6IGVycm9yLnN0YWNrCiAgfSk7CiAgc2VsZi5wb3N0TWVzc2FnZSh7CiAgICBzdGF0dXM6ICdlcnJvcicsCiAgICBlcnJvcjogZXJyb3IubWVzc2FnZSB8fCAnV29ya2VyIGVycm9yIG9jY3VycmVkJwogIH0pOwp9OwoKLy8gTG9nIHdvcmtlciBpbml0aWFsaXphdGlvbgpsb2cuaW5mbygnSW5pdGlhbGl6ZWQnLCB7IG1vZHVsZUNvdW50OiBPYmplY3Qua2V5cyhNT0RVTEVfUkVHSVNUUlkpLmxlbmd0aCB9KTsK",import.meta.url).href:typeof require<"u"?require("path").join(__dirname,"network-worker.js"):"./network-worker.js"}async initialize(){if(!this.initialized){if(!Cr.isSupported())throw new Error("Workers not supported in this environment");this.log.debug("Initializing worker pool",{maxWorkers:this.maxWorkers});try{for(let e=0;e<this.maxWorkers;e++){const n=await this.createWorker(e);this.workers.push(n),this.availableWorkers.push(n)}this.initialized=!0,this.log.info("Worker pool initialized successfully",{workerCount:this.maxWorkers})}catch(e){throw this.log.error("Failed to initialize worker pool",{error:e.message,stack:e.stack}),await this.terminate(),e}}}async createWorker(e){const n=Cr.create(this.workerScript);return n.id=e,n.currentTaskId=null,n.cachedFunctions=new Set,n.tasksExecuted=0,n.lastTaskTime=0,n.onMessage(i=>{this.handleWorkerMessage(n,i)}),n.onError(i=>{this.handleWorkerError(n,i)}),this.log.debug("Worker created",{workerId:e}),n}async execute(e,n={}){if(!this.initialized)throw new Error("Worker pool not initialized. Call initialize() first.");return new Promise((i,r)=>{const o=`task_${this.taskIdCounter++}`,s={id:o,...e},a=n.timeout||this.taskTimeout,l=setTimeout(()=>{this.handleTaskTimeout(o)},a);this.activeTasks.set(o,{resolve:i,reject:r,onProgress:n.onProgress,timeoutId:l,startTime:Date.now(),task:s});const c=this._selectWorker(s);c?this.assignTask(c,s):(this.taskQueue.push(s),this.log.debug("Task queued",{taskId:o,queueLength:this.taskQueue.length}))})}assignTask(e,n){e.currentTaskId=n.id,e.postMessage(n)}_getAffinityKey(e){return e&&e.module&&e.functionName?`${e.module}:${e.functionName}`:null}_selectWorker(e){if(this.availableWorkers.length===0)return null;if(!this.enableAffinity){const r=this.availableWorkers.pop();return this.log.debug("Worker selected (affinity disabled)",{workerId:r.id,taskId:e.id}),r}const n=this._getAffinityKey(e);if(n){const r=this.availableWorkers.find(o=>o.cachedFunctions.has(n));if(r)return this._recordAffinityHit(),this.log.info(" Worker selected via affinity",{workerId:r.id,taskId:e.id,affinityKey:n,cachedFunctions:Array.from(r.cachedFunctions)}),this.log.debug("Worker selected via affinity (detailed)",{workerId:r.id,taskId:e.id,affinityKey:n,cachedFunctions:Array.from(r.cachedFunctions),tasksExecuted:r.tasksExecuted}),this._removeFromAvailable(r);this._recordAffinityMiss(),this.log.debug("No affinity match found",{taskId:e.id,affinityKey:n,availableWorkers:this.availableWorkers.length})}const i=this.availableWorkers.reduce((r,o)=>o.tasksExecuted<r.tasksExecuted?o:r);return this.log.debug("Worker selected (least loaded)",{workerId:i.id,taskId:e.id,tasksExecuted:i.tasksExecuted,affinityKey:n||"none"}),this._removeFromAvailable(i)}_removeFromAvailable(e){const n=this.availableWorkers.indexOf(e);return n>-1&&this.availableWorkers.splice(n,1),e}_recordAffinityHit(){this.affinityMetrics.hits++}_recordAffinityMiss(){this.affinityMetrics.misses++}_updateWorkerAffinity(e,n){const i=this._getAffinityKey(n);if(!i)return;const r=!e.cachedFunctions.has(i);if(e.cachedFunctions.add(i),e.tasksExecuted++,e.lastTaskTime=Date.now(),r&&(this.log.info(" Worker affinity cache updated",{workerId:e.id,affinityKey:i,cacheSize:e.cachedFunctions.size,tasksExecuted:e.tasksExecuted}),this.log.debug("Worker affinity cache updated (detailed)",{workerId:e.id,affinityKey:i,cacheSize:e.cachedFunctions.size,tasksExecuted:e.tasksExecuted,allCachedFunctions:Array.from(e.cachedFunctions)})),e.cachedFunctions.size>this.affinityCacheLimit){const o=e.cachedFunctions.size;this._evictAffinityEntries(e),this.log.debug("Worker affinity cache evicted",{workerId:e.id,beforeSize:o,afterSize:e.cachedFunctions.size,limit:this.affinityCacheLimit})}}_evictAffinityEntries(e){const n=Array.from(e.cachedFunctions),i=n.slice(0,Math.floor(n.length/2));i.forEach(r=>e.cachedFunctions.delete(r)),this.log.debug("Evicted affinity entries",{workerId:e.id,evicted:i.length,remaining:e.cachedFunctions.size})}handleWorkerMessage(e,n){const{id:i,status:r,result:o,progress:s,error:a}=n,l=this.activeTasks.get(i);if(!l){this.log.warn("Received message for unknown task",{taskId:i});return}if(r==="progress")l.onProgress&&l.onProgress(s),this.log.debug("Task progress",{taskId:i,progress:Math.round(s*100)});else if(r==="complete"){const c=Date.now()-l.startTime;this.log.debug("Task completed",{taskId:i,duration:c}),clearTimeout(l.timeoutId),l.resolve(o),l.task&&this._updateWorkerAffinity(e,l.task),this.activeTasks.delete(i),this.freeWorker(e)}else r==="error"&&(this.log.error("Task failed",{taskId:i,error:a}),clearTimeout(l.timeoutId),l.reject(new Error(a)),this.activeTasks.delete(i),this.freeWorker(e))}handleWorkerError(e,n){if(this.log.error("Worker error",{workerId:e.id,error:n.message,stack:n.stack}),e.currentTaskId){const i=this.activeTasks.get(e.currentTaskId);i&&(clearTimeout(i.timeoutId),i.reject(n),this.activeTasks.delete(e.currentTaskId))}this.restartWorker(e)}handleTaskTimeout(e){const n=this.activeTasks.get(e);if(!n)return;this.log.warn("Task timed out",{taskId:e,timeout:this.taskTimeout}),n.reject(new Error(`Task timed out after ${this.taskTimeout}ms`)),this.activeTasks.delete(e);const i=this.workers.find(r=>r.currentTaskId===e);i&&this.restartWorker(i)}freeWorker(e){if(e.currentTaskId=null,this.taskQueue.length>0){const n=this.taskQueue.shift();this.assignTask(e,n),this.log.debug("Task assigned from queue",{taskId:n.id,workerId:e.id})}else this.availableWorkers.push(e)}async restartWorker(e){const n=this.workers.indexOf(e);if(n!==-1){this.log.debug("Restarting worker",{workerId:e.id});try{e.terminate();const i=await this.createWorker(e.id);this.workers[n]=i,this.availableWorkers.push(i),this.log.info("Worker restarted successfully",{workerId:e.id,lostAffinityEntries:e.cachedFunctions?.size||0})}catch(i){this.log.error("Failed to restart worker",{workerId:e.id,error:i.message,stack:i.stack}),this.workers.splice(n,1)}}}async waitForActiveTasks(e=5e3){if(this.activeTasks.size!==0)return this.log.debug("Waiting for active tasks",{taskCount:this.activeTasks.size,timeout:e}),new Promise(n=>{const i=Date.now(),r=setInterval(()=>{(this.activeTasks.size===0||Date.now()-i>e)&&(clearInterval(r),this.log.debug("Wait complete",{remainingTasks:this.activeTasks.size}),n())},100)})}async terminate(e=!1){this.initialized&&(this.log.info("Terminating worker pool",{force:e}),e||await this.waitForActiveTasks(5e3),this.activeTasks.forEach((n,i)=>{clearTimeout(n.timeoutId),n.reject(new Error("Worker pool terminated"))}),this.activeTasks.clear(),this.workers.forEach(n=>{try{n.terminate()}catch(i){this.log.error("Error terminating worker",{workerId:n.id,error:i.message})}}),this.workers=[],this.availableWorkers=[],this.taskQueue=[],this.initialized=!1,this.log.info("Worker pool terminated"))}getStatus(){const e=this.getAffinityStats();return{initialized:this.initialized,totalWorkers:this.workers.length,availableWorkers:this.availableWorkers.length,busyWorkers:this.workers.length-this.availableWorkers.length,activeTasks:this.activeTasks.size,queuedTasks:this.taskQueue.length,affinity:{enabled:this.enableAffinity,cacheLimit:this.affinityCacheLimit,hitRate:e.hitRate}}}getAffinityStats(){const e=this.affinityMetrics.hits+this.affinityMetrics.misses;return{hits:this.affinityMetrics.hits,misses:this.affinityMetrics.misses,hitRate:e>0?this.affinityMetrics.hits/e:0,workerCaches:this.workers.map(n=>({workerId:n.id,cachedFunctions:Array.from(n.cachedFunctions||[]),tasksExecuted:n.tasksExecuted||0}))}}}class Fn{constructor(){if(Fn.instance)return Fn.instance;this.workerPool=null,this.initialized=!1,this.initPromise=null,this.log=Ui({prefix:"WorkerManager",level:"info"}),Fn.instance=this}async initialize(e={}){if(this.initPromise)return this.initPromise;if(this.initialized&&this.workerPool)return Promise.resolve();this.initPromise=this._doInitialize(e);try{await this.initPromise}finally{this.initPromise=null}}async _doInitialize(e){const{maxWorkers:n,workerScript:i,taskTimeout:r=3e5,verbose:o=!1,enableAffinity:s=!0,affinityCacheLimit:a=50}=e;this.log.setLevel(o?"debug":"info");let l=i;if(!l)try{l=new URL("data:text/javascript;base64,LyoqCiAqIE5ldHdvcmsgV29ya2VyIC0gRXhlY3V0ZXMgY29tcHV0ZSBmdW5jdGlvbnMgZnJvbSBhbGdvcml0aG0gbW9kdWxlcwogKgogKiAqKkJ1bmRsZXItRnJpZW5kbHkgQXJjaGl0ZWN0dXJlOioqCiAqIC0gU3RhdGljYWxseSBpbXBvcnRzIGFsbCBhbGdvcml0aG0gbW9kdWxlcyB1cGZyb250CiAqIC0gQ3JlYXRlcyBhIHJlZ2lzdHJ5IHRoYXQgbWFwcyBtb2R1bGUgcGF0aHMgdG8gdGhlaXIgZXhwb3J0cwogKiAtIE1haW4gdGhyZWFkIHNlbmRzOiB7IGlkLCBtb2R1bGUsIGZ1bmN0aW9uTmFtZSwgYXJncyB9CiAqIC0gV29ya2VyIGxvb2tzIHVwIG1vZHVsZSBmcm9tIHJlZ2lzdHJ5IGFuZCBleGVjdXRlcyBmdW5jdGlvbgogKgogKiBUaGlzIGFwcHJvYWNoIHdvcmtzIHdpdGggYWxsIGJ1bmRsZXJzIChWaXRlLCBXZWJwYWNrLCBSb2xsdXApIGJlY2F1c2UKICogaW1wb3J0cyBhcmUga25vd24gYXQgYnVpbGQgdGltZS4KICoKICogQG1vZHVsZSBuZXR3b3JrLXdvcmtlcgogKi8KCmltcG9ydCB7IGNyZWF0ZUxvZ2dlciB9IGZyb20gJ0BndWluZXRpay9sb2dnZXInOwoKLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQovLyBTVEFUSUMgSU1QT1JUUyAtIEFsbCBhbGdvcml0aG0gbW9kdWxlcyBpbXBvcnRlZCB1cGZyb250Ci8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KCi8vIENyZWF0ZSBsb2dnZXIgZm9yIHdvcmtlciAocnVucyBpbiBzZXBhcmF0ZSBjb250ZXh0LCBubyB3aW5kb3cubG9nRmlsdGVyKQpjb25zdCBsb2cgPSBjcmVhdGVMb2dnZXIoewogIHByZWZpeDogJ25ldHdvcmstd29ya2VyJywKICBsZXZlbDogJ2luZm8nIC8vIFdvcmtlcnMgZGVmYXVsdCB0byBpbmZvIGxldmVsCn0pOwoKLy8gU3RhdGlzdGljcyBhbGdvcml0aG1zIChub2RlLWxldmVsIGFuZCBncmFwaC1sZXZlbCkKaW1wb3J0ICogYXMgbm9kZVN0YXRzQ29tcHV0ZSBmcm9tICcuLi9zdGF0aXN0aWNzL2FsZ29yaXRobXMvbm9kZS1zdGF0cy5qcyc7CmltcG9ydCAqIGFzIGdyYXBoU3RhdHNDb21wdXRlIGZyb20gJy4uL3N0YXRpc3RpY3MvYWxnb3JpdGhtcy9ncmFwaC1zdGF0cy5qcyc7CgovLyBDb21tdW5pdHkgZGV0ZWN0aW9uIGFsZ29yaXRobXMKaW1wb3J0ICogYXMgbG91dmFpbkNvbXB1dGUgZnJvbSAnLi4vY29tbXVuaXR5L2FsZ29yaXRobXMvbG91dmFpbi5qcyc7CgovLyBMYXlvdXQgYWxnb3JpdGhtcwppbXBvcnQgKiBhcyByYW5kb21Db21wdXRlIGZyb20gJy4uL2xheW91dHMvcmFuZG9tLmpzJzsKaW1wb3J0ICogYXMgY2lyY3VsYXJDb21wdXRlIGZyb20gJy4uL2xheW91dHMvY2lyY3VsYXIuanMnOwppbXBvcnQgKiBhcyBzcGlyYWxDb21wdXRlIGZyb20gJy4uL2xheW91dHMvc3BpcmFsLmpzJzsKaW1wb3J0ICogYXMgc2hlbGxDb21wdXRlIGZyb20gJy4uL2xheW91dHMvc2hlbGwuanMnOwppbXBvcnQgKiBhcyBzcGVjdHJhbENvbXB1dGUgZnJvbSAnLi4vbGF5b3V0cy9zcGVjdHJhbC5qcyc7CmltcG9ydCAqIGFzIGZvcmNlRGlyZWN0ZWRDb21wdXRlIGZyb20gJy4uL2xheW91dHMvZm9yY2UtZGlyZWN0ZWQuanMnOwppbXBvcnQgKiBhcyBrYW1hZGFLYXdhaUNvbXB1dGUgZnJvbSAnLi4vbGF5b3V0cy9rYW1hZGEta2F3YWkuanMnOwppbXBvcnQgKiBhcyBiaXBhcnRpdGVDb21wdXRlIGZyb20gJy4uL2xheW91dHMvYmlwYXJ0aXRlLmpzJzsKaW1wb3J0ICogYXMgbXVsdGlwYXJ0aXRlQ29tcHV0ZSBmcm9tICcuLi9sYXlvdXRzL211bHRpcGFydGl0ZS5qcyc7CmltcG9ydCAqIGFzIGJmc0NvbXB1dGUgZnJvbSAnLi4vbGF5b3V0cy9iZnMuanMnOwppbXBvcnQgKiBhcyBkZnNDb21wdXRlIGZyb20gJy4uL2xheW91dHMvZGZzLmpzJzsKaW1wb3J0ICogYXMgcmFkaWFsQ29tcHV0ZSBmcm9tICcuLi9sYXlvdXRzL3JhZGlhbC5qcyc7CmltcG9ydCAqIGFzIGZvcmNlRGlyZWN0ZWQzRENvbXB1dGUgZnJvbSAnLi4vbGF5b3V0cy9mb3JjZS1kaXJlY3RlZC0zZC5qcyc7CgovLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ci8vIE1PRFVMRSBSRUdJU1RSWSAtIE1hcHMgbW9kdWxlIHBhdGhzIHRvIHRoZWlyIGV4cG9ydHMKLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQoKY29uc3QgTU9EVUxFX1JFR0lTVFJZID0gewogIC8vIE5vZGUtbGV2ZWwgc3RhdGlzdGljcyAoYWxsIGluIG9uZSBmaWxlKQogICcuLi9zdGF0aXN0aWNzL2FsZ29yaXRobXMvbm9kZS1zdGF0cy5qcyc6IG5vZGVTdGF0c0NvbXB1dGUsCgogIC8vIEdyYXBoLWxldmVsIHN0YXRpc3RpY3MKICAnLi4vc3RhdGlzdGljcy9hbGdvcml0aG1zL2dyYXBoLXN0YXRzLmpzJzogZ3JhcGhTdGF0c0NvbXB1dGUsCgogIC8vIENvbW11bml0eQogICcuLi9jb21tdW5pdHkvYWxnb3JpdGhtcy9sb3V2YWluLmpzJzogbG91dmFpbkNvbXB1dGUsCgogIC8vIExheW91dHMKICAnLi4vbGF5b3V0cy9yYW5kb20uanMnOiByYW5kb21Db21wdXRlLAogICcuLi9sYXlvdXRzL2NpcmN1bGFyLmpzJzogY2lyY3VsYXJDb21wdXRlLAogICcuLi9sYXlvdXRzL3NwaXJhbC5qcyc6IHNwaXJhbENvbXB1dGUsCiAgJy4uL2xheW91dHMvc2hlbGwuanMnOiBzaGVsbENvbXB1dGUsCiAgJy4uL2xheW91dHMvc3BlY3RyYWwuanMnOiBzcGVjdHJhbENvbXB1dGUsCiAgJy4uL2xheW91dHMvZm9yY2UtZGlyZWN0ZWQuanMnOiBmb3JjZURpcmVjdGVkQ29tcHV0ZSwKICAnLi4vbGF5b3V0cy9rYW1hZGEta2F3YWkuanMnOiBrYW1hZGFLYXdhaUNvbXB1dGUsCiAgJy4uL2xheW91dHMvYmlwYXJ0aXRlLmpzJzogYmlwYXJ0aXRlQ29tcHV0ZSwKICAnLi4vbGF5b3V0cy9tdWx0aXBhcnRpdGUuanMnOiBtdWx0aXBhcnRpdGVDb21wdXRlLAogICcuLi9sYXlvdXRzL2Jmcy5qcyc6IGJmc0NvbXB1dGUsCiAgJy4uL2xheW91dHMvZGZzLmpzJzogZGZzQ29tcHV0ZSwKICAnLi4vbGF5b3V0cy9yYWRpYWwuanMnOiByYWRpYWxDb21wdXRlLAogICcuLi9sYXlvdXRzL2ZvcmNlLWRpcmVjdGVkLTNkLmpzJzogZm9yY2VEaXJlY3RlZDNEQ29tcHV0ZQp9OwoKLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQovLyBXT1JLRVIgTUVTU0FHRSBIQU5ETEVSCi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KCi8qKgogKiBNYWluIG1lc3NhZ2UgaGFuZGxlciAtIHJlY2VpdmVzIHRhc2tzIGFuZCBkZWxlZ2F0ZXMgdG8gYWxnb3JpdGhtIG1vZHVsZXMKICovCnNlbGYub25tZXNzYWdlID0gYXN5bmMgZnVuY3Rpb24oZXZlbnQpIHsKICBjb25zdCB7IGlkLCBtb2R1bGUsIGZ1bmN0aW9uTmFtZSwgYXJncyA9IFtdIH0gPSBldmVudC5kYXRhOwoKICB0cnkgewogICAgLy8gVmFsaWRhdGUgbWVzc2FnZSBmb3JtYXQKICAgIGlmICghbW9kdWxlIHx8ICFmdW5jdGlvbk5hbWUpIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIHRhc2s6IG1vZHVsZSBhbmQgZnVuY3Rpb25OYW1lIGFyZSByZXF1aXJlZCcpOwogICAgfQoKICAgIGxvZy5kZWJ1ZygnUHJvY2Vzc2luZyB0YXNrJywgewogICAgICBpZCwKICAgICAgbW9kdWxlLAogICAgICBmdW5jdGlvbk5hbWUsCiAgICAgIGFyZ3NMZW5ndGg6IGFyZ3M/Lmxlbmd0aCB8fCAwCiAgICB9KTsKCiAgICAvLyBDcmVhdGUgcHJvZ3Jlc3MgY2FsbGJhY2sgdGhhdCByZXBvcnRzIGJhY2sgdG8gbWFpbiB0aHJlYWQKICAgIGNvbnN0IHByb2dyZXNzQ2FsbGJhY2sgPSAocHJvZ3Jlc3MpID0+IHsKICAgICAgc2VsZi5wb3N0TWVzc2FnZSh7CiAgICAgICAgaWQsCiAgICAgICAgc3RhdHVzOiAncHJvZ3Jlc3MnLAogICAgICAgIHByb2dyZXNzOiBNYXRoLm1pbihNYXRoLm1heChwcm9ncmVzcywgMCksIDEpIC8vIENsYW1wIHRvIFswLCAxXQogICAgICB9KTsKICAgIH07CgogICAgLy8gTG9vayB1cCBhbGdvcml0aG0gbW9kdWxlIGZyb20gcmVnaXN0cnkKICAgIGNvbnN0IGFsZ29yaXRobU1vZHVsZSA9IE1PRFVMRV9SRUdJU1RSWVttb2R1bGVdOwoKICAgIGlmICghYWxnb3JpdGhtTW9kdWxlKSB7CiAgICAgIHRocm93IG5ldyBFcnJvcigKICAgICAgICBgTW9kdWxlICcke21vZHVsZX0nIG5vdCBmb3VuZCBpbiByZWdpc3RyeS4gYCArCiAgICAgICAgYEF2YWlsYWJsZSBtb2R1bGVzOiAke09iamVjdC5rZXlzKE1PRFVMRV9SRUdJU1RSWSkuam9pbignLCAnKX1gCiAgICAgICk7CiAgICB9CgogICAgLy8gR2V0IHRoZSBjb21wdXRlIGZ1bmN0aW9uCiAgICBjb25zdCBjb21wdXRlRnVuY3Rpb24gPSBhbGdvcml0aG1Nb2R1bGVbZnVuY3Rpb25OYW1lXTsKCiAgICBpZiAoIWNvbXB1dGVGdW5jdGlvbiB8fCB0eXBlb2YgY29tcHV0ZUZ1bmN0aW9uICE9PSAnZnVuY3Rpb24nKSB7CiAgICAgIHRocm93IG5ldyBFcnJvcigKICAgICAgICBgRnVuY3Rpb24gJyR7ZnVuY3Rpb25OYW1lfScgbm90IGZvdW5kIGluIG1vZHVsZSAnJHttb2R1bGV9Jy4gYCArCiAgICAgICAgYEF2YWlsYWJsZSBmdW5jdGlvbnM6ICR7T2JqZWN0LmtleXMoYWxnb3JpdGhtTW9kdWxlKS5qb2luKCcsICcpfWAKICAgICAgKTsKICAgIH0KCiAgICAvLyBFeGVjdXRlIHRoZSBjb21wdXRlIGZ1bmN0aW9uCiAgICAvLyBMYXN0IGFyZyBpcyBhbHdheXMgdGhlIHByb2dyZXNzIGNhbGxiYWNrCiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjb21wdXRlRnVuY3Rpb24oLi4uYXJncywgcHJvZ3Jlc3NDYWxsYmFjayk7CgogICAgLy8gU2VuZCBzdWNjZXNzZnVsIHJlc3VsdAogICAgc2VsZi5wb3N0TWVzc2FnZSh7CiAgICAgIGlkLAogICAgICBzdGF0dXM6ICdjb21wbGV0ZScsCiAgICAgIHJlc3VsdAogICAgfSk7CgogIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAvLyBTZW5kIGVycm9yCiAgICBsb2cuZXJyb3IoJ1Rhc2sgZmFpbGVkJywgewogICAgICBpZCwKICAgICAgZXJyb3I6IGVycm9yLm1lc3NhZ2UsCiAgICAgIHN0YWNrOiBlcnJvci5zdGFjawogICAgfSk7CiAgICBzZWxmLnBvc3RNZXNzYWdlKHsKICAgICAgaWQsCiAgICAgIHN0YXR1czogJ2Vycm9yJywKICAgICAgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfHwgJ1Vua25vd24gZXJyb3InLAogICAgICBzdGFjazogZXJyb3Iuc3RhY2sKICAgIH0pOwogIH0KfTsKCi8qKgogKiBIYW5kbGUgd29ya2VyIGVycm9ycwogKi8Kc2VsZi5vbmVycm9yID0gZnVuY3Rpb24oZXJyb3IpIHsKICBsb2cuZXJyb3IoJ1dvcmtlciBlcnJvcicsIHsKICAgIGVycm9yOiBlcnJvci5tZXNzYWdlIHx8ICdXb3JrZXIgZXJyb3Igb2NjdXJyZWQnLAogICAgc3RhY2s6IGVycm9yLnN0YWNrCiAgfSk7CiAgc2VsZi5wb3N0TWVzc2FnZSh7CiAgICBzdGF0dXM6ICdlcnJvcicsCiAgICBlcnJvcjogZXJyb3IubWVzc2FnZSB8fCAnV29ya2VyIGVycm9yIG9jY3VycmVkJwogIH0pOwp9OwoKLy8gTG9nIHdvcmtlciBpbml0aWFsaXphdGlvbgpsb2cuaW5mbygnSW5pdGlhbGl6ZWQnLCB7IG1vZHVsZUNvdW50OiBPYmplY3Qua2V5cyhNT0RVTEVfUkVHSVNUUlkpLmxlbmd0aCB9KTsK",import.meta.url).href}catch{l="/graph-js/src/compute/network-worker.js",this.log.warn("Could not resolve worker path from import.meta.url, using fallback",{workerPath:l})}if(!Cr.isSupported())throw new Error("Web Workers are not supported in this environment. This library requires Web Worker support (browser) or Worker Threads (Node.js).");this.workerPool=new yP({maxWorkers:n||this._getDefaultWorkerCount(),workerScript:l,taskTimeout:r,verbose:o,enableAffinity:s,affinityCacheLimit:a}),await this.workerPool.initialize(),this.initialized=!0,this.log.info("Initialized successfully",{workerCount:this.workerPool.maxWorkers})}_getDefaultWorkerCount(){if(typeof navigator<"u"&&navigator.hardwareConcurrency)return navigator.hardwareConcurrency;try{return require("os").cpus().length}catch{return 4}}async execute(e,n={}){return this.initialized||await this.initialize(),this.workerPool.execute(e,n)}serializeGraph(e){return{nodes:Array.from(e.nodes),edges:e.edges.map(n=>({source:n.u,target:n.v,weight:n.weight}))}}getStatus(){return this.workerPool?this.workerPool.getStatus():null}getAffinityStats(){return this.workerPool?this.workerPool.getAffinityStats():null}async terminate(e=!1){this.workerPool&&(await this.workerPool.terminate(e),this.workerPool=null,this.initialized=!1)}static reset(){Fn.instance&&(Fn.instance.terminate(!0),Fn.instance=null)}}Fn.instance=null;const An=new Fn,$t=Ui({prefix:"compute-utils",level:"info"});function Ke(t){$t.debug("Starting reconstruction",{isObject:t&&typeof t=="object",hasNodes:t&&"nodes"in t,hasEdges:t&&"edges"in t,graphDataKeys:t?Object.keys(t):"N/A"});const e=new Fa;if(!t||typeof t!="object")return $t.error("Invalid graphData passed to reconstructGraph",{graphData:t}),e;if(t.nodes!==void 0&&t.nodes!==null){$t.debug("Processing nodes",{type:typeof t.nodes,isArray:Array.isArray(t.nodes),length:Array.isArray(t.nodes)?t.nodes.length:"N/A"});try{let n;if(Array.isArray(t.nodes))n=t.nodes;else if(t.nodes[Symbol.iterator])n=Array.from(t.nodes);else throw new Error(`nodes is not iterable: ${typeof t.nodes}`);$t.debug("Node array created",{length:n.length}),n.forEach(i=>{e.addNode(i)}),$t.debug("Nodes added successfully",{type:typeof e.nodes,size:e.nodes.size})}catch(n){throw $t.error("Error adding nodes",{error:n.message,stack:n.stack,nodesValue:t.nodes,nodesType:typeof t.nodes,nodesConstructor:t.nodes?.constructor?.name}),new Error(`Failed to reconstruct nodes: ${n.message}`)}}else $t.warn("No nodes found in graphData");if(t.edges!==void 0&&t.edges!==null){$t.debug("Processing edges",{type:typeof t.edges,isArray:Array.isArray(t.edges),length:Array.isArray(t.edges)?t.edges.length:"N/A"});try{let n;if(Array.isArray(t.edges))n=t.edges;else if(t.edges[Symbol.iterator])n=Array.from(t.edges);else throw new Error(`edges is not iterable: ${typeof t.edges}`);$t.debug("Edge array created",{length:n.length}),n.forEach(i=>{const r=i.source!==void 0?i.source:i.u,o=i.target!==void 0?i.target:i.v,s=i.weight||1;r!==void 0&&o!==void 0&&e.addEdge(r,o,s)}),$t.debug("Edges added successfully")}catch(n){throw $t.error("Error adding edges",{error:n.message,stack:n.stack,edgesValue:t.edges,edgesType:typeof t.edges}),new Error(`Failed to reconstruct edges: ${n.message}`)}}else $t.warn("No edges found in graphData");return $t.debug("Reconstruction complete",{nodes:e.nodes.size,edges:e.edges.length}),e}function J(t,e){t&&typeof t=="function"&&t(Math.min(Math.max(e,0),1))}function vP(t,e){const n=new Map([[e,0]]),i=new Map([[e,1]]),r=new Map,o=[e],s=[];for(;o.length>0;){const a=o.shift();s.push(a);const l=t.getNeighbors(a),c=n.get(a);l.forEach(d=>{n.has(d)||(n.set(d,c+1),o.push(d)),n.get(d)===c+1&&(i.set(d,(i.get(d)||0)+i.get(a)),r.has(d)||r.set(d,[]),r.get(d).push(a))})}return{distance:n,pathCount:i,predecessors:r,stack:s}}function uv(t,e){const n=new Map,i=[e],r=new Set([e]);for(n.set(e,0);i.length>0;){const o=i.shift(),s=n.get(o);for(const a of t.getNeighbors(o))r.has(a)||(r.add(a),i.push(a),n.set(a,s+1))}return n}function hv(t,e){const n=t.getNeighbors(e),i=n.length;if(i<2)return 0;let r=0;for(let o=0;o<n.length;o++)for(let s=o+1;s<n.length;s++)t.hasEdge(n[o],n[s])&&r++;return 2*r/(i*(i-1))}function bP(t,e){const n=t.getNeighbors(e);let i=0;for(let r=0;r<n.length;r++)for(let o=r+1;o<n.length;o++)t.hasEdge(n[r],n[o])&&i++;return i}function Ti(t){const e=Math.sqrt(Object.values(t).reduce((n,i)=>n+i*i,0));return e>0&&Object.keys(t).forEach(n=>{t[n]/=e}),t}function fv(t,e){const n=Object.keys(t);let i=0;for(const r of n)i+=Math.abs((t[r]||0)-(e[r]||0));return i}class gt{constructor(e,n="",i="node",r=null){if(new.target===gt)throw new Error("StatisticAlgorithm is abstract and cannot be instantiated directly");if(i!=="node"&&i!=="graph")throw new Error(`Scope must be 'node' or 'graph', got: ${i}`);if(!r||!r.module||!r.functionName)throw new Error("computeConfig with module and functionName is required");this.name=e,this.description=n,this.scope=i,this.computeConfig=r,this.options={}}async calculate(e,n=null,i={}){const r=An.serializeGraph(e),o={module:this.computeConfig.module,functionName:this.computeConfig.functionName,args:[r,n,this.options]};return await An.execute(o,i)}getInfo(){return{name:this.name,description:this.description,scope:this.scope}}isNodeLevel(){return this.scope==="node"}isGraphLevel(){return this.scope==="graph"}}class gv extends gt{constructor(){super("degree","Number of connections per node","node",{module:"../statistics/algorithms/node-stats.js",functionName:"degreeCompute"})}}class pv extends gt{constructor(e={}){super("closeness","Average distance to all other nodes (inverted)","node",{module:"../statistics/algorithms/node-stats.js",functionName:"closenessCompute"}),this.options={normalized:e.normalized!==!1}}}class mv extends gt{constructor(e={}){super("ego-density","Density of connections among neighbors","node",{module:"../statistics/algorithms/node-stats.js",functionName:"egoDensityCompute"}),this.options={radius:e.radius||1}}}class yv extends gt{constructor(){super("betweenness","Frequency on shortest paths between other nodes","node",{module:"../statistics/algorithms/node-stats.js",functionName:"betweennessCompute"})}}class vv extends gt{constructor(){super("clustering","Local clustering coefficient","node",{module:"../statistics/algorithms/node-stats.js",functionName:"clusteringCompute"})}}class bv extends gt{constructor(e={}){super("eigenvector","Importance based on neighbor importance","node",{module:"../statistics/algorithms/node-stats.js",functionName:"eigenvectorCompute"}),this.options={maxIter:e.maxIter||100,tolerance:e.tolerance||1e-6}}}class _v extends gt{constructor(e={}){super("pagerank","PageRank importance score with damping","node",{module:"../statistics/algorithms/node-stats.js",functionName:"pageRankCompute"}),this.options={dampingFactor:e.dampingFactor??.85,maxIter:e.maxIter??100,tolerance:e.tolerance??1e-6}}}class wv extends gt{constructor(e={}){super("eigenvector-laplacian","X,Y coordinates from Laplacian eigenvectors","node",{module:"../statistics/algorithms/node-stats.js",functionName:"eigenvectorLaplacianCompute"}),this.options={maxIter:e.maxIter||100,tolerance:e.tolerance||1e-6}}}class xv extends gt{constructor(){super("cliques","Number of maximal cliques per node","node",{module:"../statistics/algorithms/node-stats.js",functionName:"cliquesCompute"})}}async function _P(t,e,n,i){const r=Ke(t),o=e||Array.from(r.nodes),s={};return o.forEach((a,l)=>{s[a]=r.degree(a),l%100===0&&J(i,l/o.length)}),J(i,1),s}async function wP(t,e,n,i){const r=Ke(t),o=e||Array.from(r.nodes),s=Array.from(r.nodes),a={};s.forEach(d=>{a[d]=0}),o.forEach((d,u)=>{const h=vP(r,d);xP(a,h,s,d),u%Math.max(1,Math.floor(o.length/10))===0&&J(i,u/o.length)});const l=s.length,c=l>2?2/((l-1)*(l-2)):1;return s.forEach(d=>{a[d]*=c}),J(i,1),a}function xP(t,e,n,i){const{pathCount:r,predecessors:o,stack:s}=e,a=new Map;for(n.forEach(l=>{a.set(l,0)});s.length>0;){const l=s.pop();(o.get(l)||[]).forEach(c=>{const d=r.get(c)/r.get(l)*(1+a.get(l));a.set(c,a.get(c)+d)}),l!==i&&(t[l]+=a.get(l))}}async function kP(t,e,n,i){const r=Ke(t),o=e||Array.from(r.nodes),s={};return o.forEach((a,l)=>{s[a]=hv(r,a),l%100===0&&J(i,l/o.length)}),J(i,1),s}async function EP(t,e,n,i){const r=Ke(t),{maxIter:o=100,tolerance:s=1e-6}=n||{},a=Array.from(r.nodes),l=a.length;let c={};a.forEach(d=>{c[d]=1/l});for(let d=0;d<o;d++){const u={};a.forEach(f=>{u[f]=0}),a.forEach(f=>{r.getNeighbors(f).forEach(p=>{const m=r.adjacencyMap.get(f).get(p);u[p]+=c[f]*m})}),Ti(u);const h=fv(u,c);if(c=u,d%10===0&&J(i,d/o),h<s)break}return J(i,1),c}async function AP(t,e,n,i){const r=Ke(t),{dampingFactor:o=.85,maxIter:s=100,tolerance:a=1e-6}=n||{},l=Array.from(r.nodes),c=l.length;if(c===0)return J(i,1),{};let d={};l.forEach(m=>{d[m]=1/c});const u={};l.forEach(m=>{u[m]=r.getNeighbors(m).length});const h=l.filter(m=>u[m]===0),f=(1-o)/c;for(let m=0;m<s;m++){const w={};let _=0;h.forEach(v=>{_+=d[v]});const x=o*_/c;l.forEach(v=>{w[v]=f+x}),l.forEach(v=>{const C=r.getNeighbors(v);if(C.length>0){const A=o*d[v]/C.length;C.forEach(S=>{w[S]+=A})}});const k=fv(w,d);if(d=w,m%10===0&&J(i,m/s),k<a)break}const p=Object.values(d).reduce((m,w)=>m+w,0);return p>0&&l.forEach(m=>{d[m]/=p}),J(i,1),d}async function CP(t,e,n,i){const r=Ke(t),o=e||Array.from(r.nodes),s={};return o.forEach((a,l)=>{s[a]=bP(r,a),l%100===0&&J(i,l/o.length)}),J(i,1),s}async function SP(t,e,n,i){const r=Ke(t),o=e||Array.from(r.nodes),s=Array.from(r.nodes).length,a={},l=n?.normalized!==!1;return o.forEach((c,d)=>{const u=new Map,h=[c],f=new Set([c]);for(u.set(c,0);h.length>0;){const m=h.shift(),w=u.get(m);for(const _ of r.getNeighbors(m))f.has(_)||(f.add(_),h.push(_),u.set(_,w+1))}const p=u.size-1;if(p===0)a[c]=0;else{const m=Array.from(u.values()).reduce((w,_)=>w+_,0);if(m===0)a[c]=0;else{const w=p/m;a[c]=l?w*(p/(s-1)):w}}d%100===0&&J(i,d/o.length)}),J(i,1),a}async function TP(t,e,n,i){const r=Ke(t),o=e||Array.from(r.nodes),s={};return o.forEach((a,l)=>{const c=r.getNeighbors(a),d=c.length;if(d<2)s[a]=0;else{let u=0;for(let f=0;f<d;f++)for(let p=f+1;p<d;p++)r.hasEdge(c[f],c[p])&&u++;const h=d*(d-1)/2;s[a]=u/h}l%100===0&&J(i,l/o.length)}),J(i,1),s}async function NP(t,e,n,i){const r=Ke(t),o=Array.from(r.nodes),s=o.length;if(s<3){const p={};return o.forEach(m=>{p[m]={laplacian_x:Math.random()*2-1,laplacian_y:Math.random()*2-1}}),J(i,1),p}const{maxIter:a=100,tolerance:l=1e-6}=n||{},c=Array(s).fill(null).map(()=>Array(s).fill(0)),d=new Map;o.forEach((p,m)=>d.set(p,m));for(let p=0;p<s;p++){const m=o[p],w=r.getNeighbors(m);c[p][p]=w.length,w.forEach(_=>{const x=d.get(_);x!==void 0&&(c[p][x]=-1)})}J(i,.2);const u=Array(s).fill(0).map(()=>Math.random()),h=Array(s).fill(0).map(()=>Math.random());Ti(u),Ti(h);for(let p=0;p<a;p++){const m=Qf(c,u);Ti(m);let w=0;for(let _=0;_<s;_++)w+=Math.abs(m[_]-u[_]);if(w<l)break;for(let _=0;_<s;_++)u[_]=m[_];p%20===0&&J(i,.2+p/a*.4)}J(i,.6),Dl(h,u),Ti(h);for(let p=0;p<a;p++){const m=Qf(c,h);Ti(m),Dl(m,u),Dl(m,h),Ti(m);let w=0;for(let _=0;_<s;_++)w+=Math.abs(m[_]-h[_]);if(w<l)break;for(let _=0;_<s;_++)h[_]=m[_];p%20===0&&J(i,.6+p/a*.39)}J(i,.99);const f={};return o.forEach((p,m)=>{f[p]={laplacian_x:u[m],laplacian_y:h[m]}}),J(i,1),f}function Qf(t,e){const n=t.length,i=Array(n).fill(0);for(let r=0;r<n;r++)for(let o=0;o<n;o++)i[r]+=t[r][o]*e[o];return i}function Dl(t,e){let n=0;for(let i=0;i<t.length;i++)n+=t[i]*e[i];for(let i=0;i<t.length;i++)t[i]-=n*e[i]}const T6=Object.freeze(Object.defineProperty({__proto__:null,BetweennessStatistic:yv,CliquesStatistic:xv,ClosenessStatistic:pv,ClusteringStatistic:vv,DegreeStatistic:gv,EgoDensityStatistic:mv,EigenvectorLaplacianStatistic:wv,EigenvectorStatistic:bv,PageRankStatistic:_v,betweennessCompute:wP,cliquesCompute:CP,closenessCompute:SP,clusteringCompute:kP,degreeCompute:_P,egoDensityCompute:TP,eigenvectorCompute:EP,eigenvectorLaplacianCompute:NP,pageRankCompute:AP},Symbol.toStringTag,{value:"Module"}));class kv extends gt{constructor(){super("density","Ratio of actual edges to possible edges","graph",{module:"../statistics/algorithms/graph-stats.js",functionName:"densityCompute"})}}class Ev extends gt{constructor(){super("diameter","Longest shortest path in the graph","graph",{module:"../statistics/algorithms/graph-stats.js",functionName:"diameterCompute"})}}class Av extends gt{constructor(){super("average_clustering","Mean clustering coefficient across all nodes","graph",{module:"../statistics/algorithms/graph-stats.js",functionName:"averageClusteringCompute"})}}class Cv extends gt{constructor(){super("average_shortest_path","Mean distance between all node pairs","graph",{module:"../statistics/algorithms/graph-stats.js",functionName:"averageShortestPathCompute"})}}class Sv extends gt{constructor(){super("connected_components","Number of disconnected subgraphs","graph",{module:"../statistics/algorithms/graph-stats.js",functionName:"connectedComponentsCompute"})}}class Tv extends gt{constructor(){super("average_degree","Mean number of connections per node","graph",{module:"../statistics/algorithms/graph-stats.js",functionName:"averageDegreeCompute"})}}async function RP(t,e,n,i){const r=Ke(t),o=r.nodes.size,s=r.edges.length;if(o<2)return 0;const a=o*(o-1)/2,l=s/a;return J(i,1),l}async function LP(t,e,n,i){const r=Ke(t),o=Array.from(r.nodes);let s=0;return o.forEach((a,l)=>{const c=uv(r,a);for(const d of c.values())d>s&&(s=d);l%Math.max(1,Math.floor(o.length/10))===0&&J(i,l/o.length)}),J(i,1),s}async function IP(t,e,n,i){const r=Ke(t),o=Array.from(r.nodes);let s=0;return o.forEach((a,l)=>{s+=hv(r,a),l%100===0&&J(i,l/o.length)}),J(i,1),o.length>0?s/o.length:0}async function PP(t,e,n,i){const r=Ke(t),o=Array.from(r.nodes);let s=0,a=0;return o.forEach((l,c)=>{uv(r,l).forEach((d,u)=>{u!==l&&(a+=d,s++)}),c%Math.max(1,Math.floor(o.length/10))===0&&J(i,c/o.length)}),J(i,1),s>0?a/s:0}async function DP(t,e,n,i){const r=Ke(t),o=Array.from(r.nodes),s=new Set,a={};let l=0;return o.forEach(c=>{if(!s.has(c)){const d=[c];for(s.add(c),a[c]=l;d.length>0;){const u=d.shift();for(const h of r.getNeighbors(u))s.has(h)||(s.add(h),d.push(h),a[h]=l)}l++}}),J(i,1),{count:l,components:a}}async function MP(t,e,n,i){const r=Ke(t),o=Array.from(r.nodes);let s=0;return o.forEach(a=>{s+=r.getNeighbors(a).length}),J(i,1),o.length>0?s/o.length:0}const N6=Object.freeze(Object.defineProperty({__proto__:null,AverageClusteringStatistic:Av,AverageDegreeStatistic:Tv,AverageShortestPathStatistic:Cv,ConnectedComponentsStatistic:Sv,DensityStatistic:kv,DiameterStatistic:Ev,averageClusteringCompute:IP,averageDegreeCompute:MP,averageShortestPathCompute:PP,connectedComponentsCompute:DP,densityCompute:RP,diameterCompute:LP},Symbol.toStringTag,{value:"Module"}));class $a{constructor(e,n="",i=null){if(new.target===$a)throw new Error("CommunityAlgorithm is abstract and cannot be instantiated directly");if(!i||!i.module||!i.functionName)throw new Error("computeConfig with module and functionName is required");this.name=e,this.description=n,this.computeConfig=i,this.options={}}async detect(e,n={}){const i=An.serializeGraph(e),r={module:this.computeConfig.module,functionName:this.computeConfig.functionName,args:[i,this.options]};return{...await An.execute(r,n),algorithm:this.name}}getInfo(){return{name:this.name,description:this.description}}}class Co extends $a{constructor(e={}){super("louvain","Louvain method for community detection using modularity optimization",{module:"../community/algorithms/louvain.js",functionName:"louvainCompute"}),this.options={resolution:e.resolution||1,maxIterations:e.maxIterations||100}}}async function OP(t,e,n){const i=Ke(t),{resolution:r=1,maxIterations:o=100}=e||{},s=Array.from(i.nodes),a=_=>{const x=i.getNeighbors(_);let k=0;return x.forEach(v=>{k+=i.getEdgeWeight(_,v)}),k};let l=0;i.edges.forEach(_=>{l+=_.weight});const c=2*l,d={};s.forEach(_=>{d[_]=_});let u=!0,h=0;for(;u&&h<o;){u=!1,h++;for(const _ of s){const x=d[_],k=i.getNeighbors(_),v=new Set;k.forEach(M=>{v.add(d[M])});const C=a(_);let A=x,S=0;v.forEach(M=>{if(M===x)return;const I=GP(i,_,x,M,d,c,r,C,a);I>S&&(S=I,A=M)}),A!==x&&(d[_]=A,u=!0)}if(J(n,Math.min(h/o,.9)),!u)break}const f=Array.from(new Set(Object.values(d))),p={};f.forEach((_,x)=>{p[_]=x});const m={};Object.keys(d).forEach(_=>{m[_]=p[d[_]]});const w=FP(i,m,l,a);return J(n,1),{communities:m,modularity:w,numCommunities:f.length,iterations:h}}function GP(t,e,n,i,r,o,s,a,l){const c=t.getNeighbors(e);let d=0,u=0;c.forEach(m=>{const w=t.getEdgeWeight(e,m);r[m]===i&&(d+=w),r[m]===n&&m!==e&&(u+=w)});const h=Array.from(t.nodes);let f=0,p=0;return h.forEach(m=>{r[m]===i&&(f+=l(m)),r[m]===n&&(p+=l(m))}),d/o-s*(f*a)/(o*o)-(u/o-s*(p*a)/(o*o))}function FP(t,e,n,i){if(n===0)return 0;const r=2*n,o=new Set(Object.values(e));let s=0;return o.forEach(a=>{let l=0,c=0;Object.keys(e).filter(d=>e[d]===a).forEach(d=>{c+=i(d)}),t.edges.forEach(d=>{const u=d.u,h=d.v,f=d.weight;e[u]===a&&e[h]===a&&(l+=f)}),s+=l/r-Math.pow(c/r,2)}),s}const R6=Object.freeze(Object.defineProperty({__proto__:null,LouvainAlgorithm:Co,default:Co,louvainCompute:OP},Symbol.toStringTag,{value:"Module"}));class za{constructor(e=null){this.graph=e}setGraph(e){return this.graph=e,this}async detectCommunities(e="louvain",n={}){if(!this.graph)throw new Error("No graph set. Use setGraph() or provide graph in constructor.");let i;if(e instanceof $a)i=e;else if(typeof e=="string")i=this._createAlgorithmFromName(e,n);else throw new Error("Algorithm must be a CommunityAlgorithm instance or a string name");return await i.detect(this.graph,{onProgress:n.onProgress})}_createAlgorithmFromName(e,n={}){switch(e.toLowerCase()){case"louvain":return new Co(n);default:throw new Error(`Unknown community detection algorithm: ${e}`)}}calculateModularity(e){if(!this.graph)throw new Error("No graph set");const n=this.graph.numberOfEdges();if(n===0)return 0;let i=0;const r=Array.from(this.graph.nodes.keys());for(const o of r)for(const s of r)if(e[o]===e[s]){const a=this.graph.hasEdge(o,s)?this.graph.getEdgeWeight(o,s):0,l=this.graph.degree(o),c=this.graph.degree(s);i+=a-l*c/(2*n)}return i/(2*n)}static getNodesInCommunity(e,n){return Object.keys(e).filter(i=>e[i]===n)}static getCommunityGroups(e){const n={};for(const[i,r]of Object.entries(e))n[r]||(n[r]=[]),n[r].push(i);return n}static graphFromData(e){const n=new Fa;for(const i of e.nodes)n.addNode(i.id);for(const i of e.edges)n.addEdge(i.source,i.target,i.weight||1);return n}static async detect(e,n="louvain",i={}){const r=this.graphFromData(e);return await new za(r).detectCommunities(n,i)}}const eg={algorithms:[{id:"louvain",name:"Louvain Method",description:"Fast greedy algorithm that optimizes modularity",category:"modularity",complexity:"O(n log n)",bestFor:["General graphs","Large networks","Hierarchical communities"],supportsWeighted:!0,supportsDirected:!1,defaultOptions:{resolution:1,maxIterations:100}}],getAll(){return[...this.algorithms]},get(t){return this.algorithms.find(e=>e.id===t)||null},filter(t){return this.algorithms.filter(t)},getIds(){return this.algorithms.map(t=>t.id)}};class Ut{constructor(e,n={},i=null){if(!e)throw new Error("Graph is required for layout computation");if(!i||!i.module||!i.functionName)throw new Error("computeConfig with module and functionName is required");this.graph=e,this.options=n,this.computeConfig=i,this._positions=null}async computePositions(e={}){const n={...this.options,...e},{onProgress:i,timeout:r,...o}=n,s=An.serializeGraph(this.graph),a={module:this.computeConfig.module,functionName:this.computeConfig.functionName,args:[s,o]};return await An.execute(a,{onProgress:i,timeout:r})}async getPositions(e={},n=!1){return(!this._positions||n)&&(this._positions=await this.computePositions(e)),this._positions}async updateLayout(e=1){return this.getPositions({},!0)}reset(){this._positions=null}getNodes(){return this.graph.getNodeList()}getNodeCount(){return this.graph.numberOfNodes()}}class $c extends Ut{constructor(e,n={}){super(e,{scale:100,center:{x:0,y:0},seed:null,...n},{module:"../layouts/random.js",functionName:"randomCompute"})}}async function $P(t,e,n){const i=Array.from(t.nodes||[]),{scale:r=1,center:o={x:0,y:0},seed:s=null}=e||{},a={};let l;return s!==null?l=(function(c){return function(){let d=c+=1831565813;return d=Math.imul(d^d>>>15,d|1),d^=d+Math.imul(d^d>>>7,d|61),((d^d>>>14)>>>0)/4294967296}})(s):l=Math.random,i.forEach(c=>{const d=(l()*2-1)*r+o.x,u=(l()*2-1)*r+o.y;a[c]={x:d,y:u}}),J(n,1),a}const L6=Object.freeze(Object.defineProperty({__proto__:null,RandomLayout:$c,default:$c,randomCompute:$P},Symbol.toStringTag,{value:"Module"}));class zc extends Ut{constructor(e,n={}){super(e,{scale:100,center:{x:0,y:0},sortBy:null,...n},{module:"../layouts/circular.js",functionName:"circularCompute"})}}async function zP(t,e,n){const i=Ke(t),{scale:r=1,center:o={x:0,y:0},sortBy:s=null}=e||{};let a=Array.from(i.nodes);const l=a.length;if(l===0)return J(n,1),{};if(l===1){const d={[a[0]]:{x:o.x,y:o.y}};return J(n,1),d}s&&typeof s=="function"&&(a=a.sort(s));const c={};return a.forEach((d,u)=>{const h=2*Math.PI*u/l;c[d]={x:Math.cos(h)*r+o.x,y:Math.sin(h)*r+o.y}}),J(n,1),c}const I6=Object.freeze(Object.defineProperty({__proto__:null,CircularLayout:zc,circularCompute:zP,default:zc},Symbol.toStringTag,{value:"Module"}));class Bc extends Ut{constructor(e,n={}){super(e,{scale:100,center:{x:0,y:0},resolution:.35,equidistant:!1,...n},{module:"../layouts/spiral.js",functionName:"spiralCompute"})}}function BP(t,e=1){if(t.length===0)return t;let n=1/0,i=-1/0,r=1/0,o=-1/0;for(const[d,u]of t)n=Math.min(n,d),i=Math.max(i,d),r=Math.min(r,u),o=Math.max(o,u);const s=i-n||1,a=o-r||1,l=Math.max(s,a),c=2*e/l;return t.map(([d,u])=>[(d-n-s/2)*c+e,(u-r-a/2)*c+e])}async function VP(t,e,n){const i=Array.from(t.nodes||[]),r=i.length,{scale:o=1,center:s={x:0,y:0},resolution:a=.35,equidistant:l=!1}=e||{};if(r===0)return J(n,1),{};if(r===1){const u={[i[0]]:{x:s.x,y:s.y}};return J(n,1),u}let c=[];if(l){let u=.5,h=a;h+=1/(u*h);for(let f=0;f<r;f++){const p=u*h;h+=1/p,c.push([Math.cos(h)*p,Math.sin(h)*p])}}else for(let u=0;u<r;u++){const h=a*u,f=u;c.push([Math.cos(h)*f,Math.sin(h)*f])}c=BP(c,o);const d={};return i.forEach((u,h)=>{d[u]={x:c[h][0]+s.x,y:c[h][1]+s.y}}),J(n,1),d}const P6=Object.freeze(Object.defineProperty({__proto__:null,SpiralLayout:Bc,default:Bc,spiralCompute:VP},Symbol.toStringTag,{value:"Module"}));class Vc extends Ut{constructor(e,n={}){super(e,{scale:100,center:{x:0,y:0},nlist:null,rotate:null,nodeProperties:null,...n},{module:"../layouts/shell.js",functionName:"shellCompute"})}}async function UP(t,e,n){const i=Array.from(t.nodes||[]),r=i.length,{scale:o=1,center:s={x:0,y:0},nlist:a=null,rotate:l=null,nodeProperties:c=null}=e||{},d=c instanceof Map,u=c&&typeof c=="object"&&!d,h=d?c.size>0:u?Object.keys(c).length>0:!1,f=v=>d?c.get(v):u?c[v]:null;if(r===0)return J(n,1),{};if(r===1){const v={[i[0]]:{x:s.x,y:s.y}};return J(n,1),v}let p;if(a&&Array.isArray(a))p=a;else{let v=new Map;if(h)i.forEach(A=>{const S=f(A),M=S&&typeof S=="object"&&S.degree||0;v.set(A,M)});else if(i.forEach(A=>{v.set(A,0)}),t.edges)for(const A of t.edges){const S=A.u!==void 0?A.u:A.source!==void 0?A.source:A[0],M=A.v!==void 0?A.v:A.target!==void 0?A.target:A[1];v.has(S)&&v.set(S,v.get(S)+1),v.has(M)&&v.set(M,v.get(M)+1)}const C=new Map;i.forEach(A=>{const S=v.get(A)||0;C.has(S)||C.set(S,[]),C.get(S).push(A)}),p=Array.from(C.keys()).sort((A,S)=>S-A).map(A=>C.get(A))}const m=o/p.length;let w;p[0].length===1?w=0:w=m;let _;l===null?_=Math.PI/p.length:_=l;const x={};let k=_;for(const v of p){const C=v.length;if(C===0)continue;const A=[];for(let S=0;S<C;S++)A.push(2*Math.PI*S/C+k);v.forEach((S,M)=>{const I=A[M],D=w*Math.cos(I)+s.x,O=w*Math.sin(I)+s.y;x[S]={x:D,y:O}}),w+=m,k+=_}return J(n,1),x}const D6=Object.freeze(Object.defineProperty({__proto__:null,ShellLayout:Vc,default:Vc,shellCompute:UP},Symbol.toStringTag,{value:"Module"}));class Uc extends Ut{constructor(e,n={}){super(e,{scale:100,center:{x:0,y:0},...n},{module:"../layouts/spectral.js",functionName:"spectralCompute"})}}async function jP(t,e,n){const i=Array.from(t.nodes||[]),r=i.length;console.log("[spectralCompute] Starting with",r,"nodes"),console.log("[spectralCompute] Raw options:",e),console.log("[spectralCompute] Raw options keys:",e?Object.keys(e):"null"),console.log("[spectralCompute] nodeProperties in options:",e?.nodeProperties);const{scale:o=1,center:s={x:0,y:0},nodeProperties:a=null}=e||{},l=a instanceof Map,c=a&&typeof a=="object"&&!l,d=l?a.size>0:c?Object.keys(a).length>0:!1;if(console.log("[spectralCompute] nodeProperties:",l?`Map with ${a.size} entries`:c?`Object with ${Object.keys(a).length} entries`:"null"),r===0)return J(n,1),{};if(r===1){const w={[i[0]]:{x:s.x,y:s.y}};return J(n,1),w}const u={},h=[],f=w=>l?a.get(w):c?a[w]:null;console.log("[spectralCompute] Processing",r,"nodes for eigenvector extraction");const p=[];for(const w of i){let _,x;if(d){const k=f(w);k&&k.laplacian_x!==void 0&&k.laplacian_y!==void 0?(_=k.laplacian_x,x=k.laplacian_y):(p.push(w),_=(Math.random()-.5)*.1,x=(Math.random()-.5)*.1,console.log(`[spectralCompute] Node "${w}" missing laplacian data, using fallback position`))}else throw new Error("Spectral layout requires eigenvector-laplacian stat. Include 'eigenvector-laplacian' in analyze() features.");h.push([_,x])}p.length>0&&console.log(`[spectralCompute] ${p.length} nodes missing laplacian data, used fallback positions`),console.log("[spectralCompute] Extracted",h.length,"coordinates. Sample:",h[0]),J(n,.5),console.log("[spectralCompute] Starting rescaleLayout...");const m=HP(h,o);return console.log("[spectralCompute] Rescaled. Sample:",m[0]),J(n,.99),i.forEach((w,_)=>{u[w]={x:m[_][0]+s.x,y:m[_][1]+s.y}}),console.log("[spectralCompute] Created positions for",Object.keys(u).length,"nodes"),J(n,1),console.log("[spectralCompute] Completed successfully"),u}function HP(t,e=1){if(t.length===0)return t;let n=1/0,i=-1/0,r=1/0,o=-1/0;for(const[d,u]of t)n=Math.min(n,d),i=Math.max(i,d),r=Math.min(r,u),o=Math.max(o,u);const s=i-n||1,a=o-r||1,l=Math.max(s,a),c=2*e/l;return t.map(([d,u])=>[(d-n-s/2)*c+e,(u-r-a/2)*c+e])}const M6=Object.freeze(Object.defineProperty({__proto__:null,SpectralLayout:Uc,default:Uc,spectralCompute:jP},Symbol.toStringTag,{value:"Module"}));function Lr(t,e,n=1,i={x:0,y:0}){if(e.length===0)return t;let r=0,o=0;e.forEach(u=>{r+=t[u].x,o+=t[u].y});const s=r/e.length,a=o/e.length,l={};e.forEach(u=>{l[u]={x:t[u].x-s,y:t[u].y-a}});let c=0;e.forEach(u=>{const h=Math.abs(l[u].x),f=Math.abs(l[u].y);c=Math.max(c,h,f)});const d={};if(c>0){const u=n/c;e.forEach(h=>{d[h]={x:l[h].x*u+i.x,y:l[h].y*u+i.y}})}else e.forEach(u=>{d[u]={x:i.x,y:i.y}});return d}function WP(t){const e={};return t.forEach(n=>{e[n]={x:Math.random(),y:Math.random(),z:Math.random()}}),e}function qP(t,e,n=1,i={x:0,y:0,z:0}){if(e.length===0)return t;let r=0,o=0,s=0;e.forEach(f=>{r+=t[f].x,o+=t[f].y,s+=t[f].z});const a=r/e.length,l=o/e.length,c=s/e.length,d={};e.forEach(f=>{d[f]={x:t[f].x-a,y:t[f].y-l,z:t[f].z-c}});let u=0;e.forEach(f=>{const p=Math.abs(d[f].x),m=Math.abs(d[f].y),w=Math.abs(d[f].z);u=Math.max(u,p,m,w)});const h={};if(u>0){const f=n/u;e.forEach(p=>{h[p]={x:d[p].x*f+i.x,y:d[p].y*f+i.y,z:d[p].z*f+i.z}})}else e.forEach(f=>{h[f]={x:i.x,y:i.y,z:i.z}});return h}class jc extends Ut{constructor(e,n={}){super(e,{iterations:50,k:null,scale:1,center:{x:0,y:0},initialPositions:null,threshold:1e-4,...n},{module:"../layouts/force-directed.js",functionName:"forceDirectedCompute"})}}async function KP(t,e,n){const i=Ke(t),{iterations:r=50,k:o=null,scale:s=1,center:a={x:0,y:0},initialPositions:l=null,threshold:c=1e-4}=e||{},d=Array.from(i.nodes),u=d.length;if(u===0)return J(n,1),{};if(u===1){const A={[d[0]]:{x:a.x,y:a.y}};return J(n,1),A}let h={};l?h={...l}:d.forEach(A=>{h[A]={x:Math.random(),y:Math.random()}});const f=o!==null?o:Math.sqrt(1/u);let p=1/0,m=-1/0,w=1/0,_=-1/0;d.forEach(A=>{const S=h[A];p=Math.min(p,S.x),m=Math.max(m,S.x),w=Math.min(w,S.y),_=Math.max(_,S.y)});let x=Math.max(m-p,_-w)*.1;const k=x/(r+1),v=new Map;d.forEach(A=>{const S=new Set(i.getNeighbors(A));v.set(A,S)});for(let A=0;A<r;A++){const S={};d.forEach(I=>{S[I]={x:0,y:0}}),d.forEach(I=>{const D=h[I];let O=0,$=0;d.forEach(j=>{if(j!==I){const E=h[j],R=D.x-E.x,L=D.y-E.y;let G=Math.sqrt(R*R+L*L);G<.01&&(G=.01);const B=v.get(I).has(j),q=f*f/(G*G),ee=B?G/f:0,fe=q-ee;O+=R/G*fe,$+=L/G*fe}}),S[I]={x:O,y:$}});let M=0;if(d.forEach(I=>{const D=S[I],O=Math.sqrt(D.x*D.x+D.y*D.y);if(O>0){const $=Math.max(O,.01),j=x/$;h[I].x+=D.x*j,h[I].y+=D.y*j,M+=O}}),x-=k,M/u<c){J(n,1);break}A%10===0&&J(n,A/r)}const C=Lr(h,d,s,a);return J(n,1),C}const O6=Object.freeze(Object.defineProperty({__proto__:null,ForceDirectedLayout:jc,default:jc,forceDirectedCompute:KP},Symbol.toStringTag,{value:"Module"}));class Hc extends Ut{constructor(e,n={}){super(e,{iterations:1e3,scale:1,center:{x:0,y:0},initialPositions:null,threshold:1e-4,K:null,...n},{module:"../layouts/kamada-kawai.js",functionName:"kamadaKawaiCompute"})}}async function XP(t,e,n){console.log("[Kamada-Kawai] Received graphData:",{hasNodes:"nodes"in t,nodesType:typeof t.nodes,nodesIsArray:Array.isArray(t.nodes),hasEdges:"edges"in t,edgesType:typeof t.edges,edgesIsArray:Array.isArray(t.edges)});const i=Ke(t);console.log("[Kamada-Kawai] After reconstructGraph, graph.nodes:",{type:typeof i.nodes,isSet:i.nodes instanceof Set,size:i.nodes?.size||"N/A"});const{iterations:r=100,scale:o=1,center:s={x:0,y:0},initialPositions:a=null,threshold:l=1e-4,K:c=null}=e||{},d=Array.from(i.nodes),u=d.length;if(console.log("[Kamada-Kawai] Nodes array:",{length:d.length,isArray:Array.isArray(d),sample:d.slice(0,3)}),u===0)return J(n,1),{};if(u===1){const E={[d[0]]:{x:s.x,y:s.y}};return J(n,1),E}J(n,.1),console.log("[Kamada-Kawai] About to compute all-pairs shortest paths:",{nodesLength:d.length,nodesIsArray:Array.isArray(d),nodesType:typeof d});let h;try{h=ZP(i,d),console.log("[Kamada-Kawai] All-pairs shortest paths computed successfully");let E=!1,R=!1,L=0,G=0;for(let B=0;B<h.length;B++)for(let q=0;q<h[B].length;q++)isFinite(h[B][q])||(E=h[B][q]===1/0,R=isNaN(h[B][q]),E&&L++,R&&G++);(L>0||G>0)&&console.warn("[Kamada-Kawai] Distances contain problematic values:",{infinityCount:L,nanCount:G,totalDistances:h.length*h[0].length,sample:h[0].slice(0,5)})}catch(E){throw console.error("[Kamada-Kawai] Error in computeAllPairsShortestPaths:",E.message,E.stack),E}J(n,.3),console.log("[Kamada-Kawai] About to initialize positions");let f;try{f=YP(d,a),console.log("[Kamada-Kawai] Positions initialized successfully, pos:",{type:typeof f,isArray:Array.isArray(f),length:f?.length||"N/A"})}catch(E){throw console.error("[Kamada-Kawai] Error in initializePositions:",E.message,E.stack),E}const p=h.flat().filter(E=>isFinite(E)&&E>0);p.length===0&&console.warn("[Kamada-Kawai] All distances are placeholder (disconnected)!");const m=p.length>0?p.reduce((E,R)=>Math.max(E,R),0):1,w=Math.sqrt(u),_=w/m,x=c!==null?c:u;console.log("[Kamada-Kawai] Distance matrix stats:",{totalPairs:h.flat().length,finitePairs:p.length,infinitePairs:h.flat().length-p.length,max_dij:m,L0:w,L:_,kkconst:x,isKvalFinite:isFinite(x)&&isFinite(_),avgDij:p.reduce((E,R)=>E+R,0)/p.length}),J(n,.4);const k=Array(u).fill(null).map(()=>Array(u).fill(0)),v=Array(u).fill(null).map(()=>Array(u).fill(0));for(let E=0;E<u;E++)for(let R=0;R<u;R++){if(E===R)continue;const L=h[E][R];k[E][R]=x/(L*L),v[E][R]=_*L}if(u>1){const E=Math.sqrt(Math.pow(f[0][0]-f[1][0],2)+Math.pow(f[0][1]-f[1][1],2));console.log("[Kamada-Kawai] Sample spring values:",{"graph_dist[0,1]":h[0][1],"spring_const_kij[0,1]":k[0][1].toExponential(4),"desired_dist_lij[0,1]":v[0][1].toFixed(4),initial_euclidean_dist:E.toFixed(4),stress_ratio:(E/v[0][1]).toFixed(4),force:(k[0][1]*Math.abs(E-v[0][1])).toExponential(4)})}const C=Array(u).fill(0),A=Array(u).fill(0);for(let E=0;E<u;E++)for(let R=0;R<u;R++){if(R===E)continue;const L=f[E][0]-f[R][0],G=f[E][1]-f[R][1],B=Math.sqrt(L*L+G*G);B!==0&&(C[E]+=k[E][R]*(L-v[E][R]*L/B),A[E]+=k[E][R]*(G-v[E][R]*G/B))}const S=C.map((E,R)=>Math.sqrt(E*E+A[R]*A[R])),M=Math.max(...S),I=S.reduce((E,R)=>E+R,0)/u;console.log("[Kamada-Kawai] Initial gradient stats:",{maxEnergy:M.toFixed(4),avgEnergy:I.toFixed(4),threshold:Math.sqrt(l).toFixed(6)});for(let E=0;E<r;E++){let R=0,L=-1;for(let z=0;z<u;z++){const ie=C[z]*C[z]+A[z]*A[z];ie>L&&(R=z,L=ie)}if(L<l){console.log(`[Kamada-Kawai] Converged at iteration ${E}/${r} with max_delta ${Math.sqrt(L).toFixed(6)} (threshold: ${Math.sqrt(l).toFixed(6)})`);break}J(n,.4+.6*(E+1)/r),(E%500===0||E<5||E===r-1)&&console.log(`[Kamada-Kawai] Iteration ${E}/${r}: max_delta = ${Math.sqrt(L).toFixed(6)}, node ${R}`);const G=f[R][0],B=f[R][1];let q=0,ee=0,fe=0;for(let z=0;z<u;z++){if(z===R)continue;const ie=G-f[z][0],ce=B-f[z][1],N=Math.sqrt(ie*ie+ce*ce);if(N===0)continue;const P=N*(ie*ie+ce*ce);q+=k[R][z]*(1-v[R][z]*ce*ce/P),ee+=k[R][z]*v[R][z]*ie*ce/P,fe+=k[R][z]*(1-v[R][z]*ie*ie/P)}let _e=0,ke=0;const V=1e-13,le=C[R],pe=A[R];if(le*le+pe*pe>=V*V){const z=fe*q-ee*ee;Math.abs(z)>1e-10?(ke=(ee*le-q*pe)/z,_e=(ee*pe-fe*le)/z):E<5&&console.warn(`[Kamada-Kawai] Iteration ${E}: Singular matrix (det=${z.toExponential(2)}) for node ${R}`)}else E<5&&console.warn(`[Kamada-Kawai] Iteration ${E}: Gradient too small for node ${R}`);E<3&&R===0&&console.log(`[Kamada-Kawai] Iteration ${E}, node ${R}:`,{A:q.toFixed(4),B:ee.toFixed(4),C:fe.toFixed(4),det:(fe*q-ee*ee).toExponential(4),myD1:le.toFixed(4),myD2:pe.toFixed(4),delta_x:_e.toFixed(6),delta_y:ke.toFixed(6),old_pos:[G.toFixed(2),B.toFixed(2)]});const U=G+_e,te=B+ke;C[R]=0,A[R]=0;for(let z=0;z<u;z++){if(z===R)continue;const ie=G-f[z][0],ce=B-f[z][1],N=Math.sqrt(ie*ie+ce*ce),P=U-f[z][0],F=te-f[z][1],W=Math.sqrt(P*P+F*F);N===0||W===0||(C[z]-=k[R][z]*(-ie+v[R][z]*ie/N),A[z]-=k[R][z]*(-ce+v[R][z]*ce/N),C[z]+=k[R][z]*(-P+v[R][z]*P/W),A[z]+=k[R][z]*(-F+v[R][z]*F/W),C[R]+=k[R][z]*(P-v[R][z]*P/W),A[R]+=k[R][z]*(F-v[R][z]*F/W))}f[R][0]=U,f[R][1]=te}J(n,.95),console.log("[Kamada-Kawai] Before rescaling - preparing positions");const D={};d.forEach((E,R)=>{D[E]={x:f[R][0],y:f[R][1]}});const O=d[0];console.log("[Kamada-Kawai] Sample positions BEFORE rescaling:",{sample:O,value:D[O],allCount:Object.keys(D).length,minMax:(()=>{let E=1/0,R=-1/0,L=1/0,G=-1/0;return Object.values(D).forEach(B=>{E=Math.min(E,B.x),R=Math.max(R,B.x),L=Math.min(L,B.y),G=Math.max(G,B.y)}),{minX:E,maxX:R,minY:L,maxY:G,rangeX:R-E,rangeY:G-L}})()}),console.log("[Kamada-Kawai] Calling rescaleLayout with correct signature, scale:",o,"center:",s);const $=Lr(D,d,o,s);console.log("[Kamada-Kawai] rescaleLayout completed successfully"),console.log("[Kamada-Kawai] Sample positions AFTER rescaling:",{sample:O,value:$[O],minMax:(()=>{let E=1/0,R=-1/0,L=1/0,G=-1/0;return Object.values($).forEach(B=>{E=Math.min(E,B.x),R=Math.max(R,B.x),L=Math.min(L,B.y),G=Math.max(G,B.y)}),{minX:E,maxX:R,minY:L,maxY:G,rangeX:R-E,rangeY:G-L}})()});const j={};console.log("[Kamada-Kawai] Creating final positions dictionary");try{Object.entries($).forEach(([L,G])=>{j[L]={x:G.x,y:G.y}}),console.log("[Kamada-Kawai] Final positions dictionary created successfully, count:",Object.keys(j).length);const E=d.slice(0,3),R={};E.forEach(L=>{R[L]=j[L]}),console.log("[Kamada-Kawai] Sample final positions:",R)}catch(E){throw console.error("[Kamada-Kawai] Error creating positions dictionary:",E.message),console.error("  rescaledDict:",$),E}return J(n,1),j}function ZP(t,e){const n=e.length,i=Array(n).fill(null).map(()=>Array(n).fill(1/0)),r={};e.forEach((s,a)=>{r[s]=a,i[a][a]=0});for(let s=0;s<n;s++){const a=e[s],l=[[a,0]],c=new Set([a]);for(;l.length>0;){const[d,u]=l.shift(),h=r[d];h!==void 0&&(i[s][h]=u);const f=t.getNeighbors(d)||[];for(const p of f)c.has(p)||(c.add(p),l.push([p,u+1]))}}let o=0;for(let s=0;s<n;s++)for(let a=s+1;a<n;a++)isFinite(i[s][a])&&i[s][a]>o&&(o=i[s][a]);for(let s=0;s<n;s++)for(let a=0;a<n;a++)i[s][a]>o&&(i[s][a]=o);return i}function YP(t,e){const n=t.length,i=[];if(e&&Object.keys(e).length>0)t.forEach(r=>{const o=e[r];o?i.push([o.x||0,o.y||0]):i.push([Math.random(),Math.random()])});else{const r=Math.sqrt(n);if(n>100){const o=r*3;console.log(`[Kamada-Kawai] Random initialization: spread=${o.toFixed(2)}, L0=${r.toFixed(2)}`);for(let s=0;s<n;s++){const a=(Math.random()-.5)*o,l=(Math.random()-.5)*o;i.push([a,l])}}else{const o=2*Math.PI/n,s=r*2;console.log(`[Kamada-Kawai] Circular initialization: radius=${s.toFixed(2)}, L0=${r.toFixed(2)}`);for(let a=0;a<n;a++){const l=s*Math.cos(a*o),c=s*Math.sin(a*o);i.push([l,c])}}}return i}const G6=Object.freeze(Object.defineProperty({__proto__:null,KamadaKawaiLayout:Hc,default:Hc,kamadaKawaiCompute:XP},Symbol.toStringTag,{value:"Module"}));class Wc extends Ut{constructor(e,n={}){super(e,{partition:null,align:"vertical",scale:1,aspectRatio:4/3,center:{x:0,y:0},...n},{module:"../layouts/bipartite.js",functionName:"bipartiteCompute"})}}async function JP(t,e,n){const i=Ke(t),{partition:r=null,align:o="vertical",scale:s=1,aspectRatio:a=4/3,center:l={x:0,y:0}}=e||{},c=Array.from(i.nodes),d=c.length;if(d===0)return J(n,1),{};if(d===1){const D={[c[0]]:{x:l.x,y:l.y}};return J(n,1),D}J(n,.3);let u,h;r&&r.length>0?(u=new Set(r),h=new Set(c.filter(D=>!u.has(D)))):(u=new Set,h=new Set,c.forEach((D,O)=>{O%2===0?u.add(D):h.add(D)})),J(n,.5);const f=Array.from(u),p=Array.from(h),m=[],w=f.length-1||1,_=p.length-1||1,x=a*2,k=2,v=x/2,C=k/2;f.forEach((D,O)=>{const $=-v,j=w>0?O*k/w-C:0;m.push([$,j])}),p.forEach((D,O)=>{const $=v,j=_>0?O*k/_-C:0;m.push([$,j])}),J(n,.7);const A=[...f,...p],S={};A.forEach((D,O)=>{S[D]={x:m[O][0],y:m[O][1]}});const M=Lr(S,A,s,l);J(n,.9);const I={};return A.forEach(D=>{I[D]=M[D]}),o==="horizontal"&&Object.keys(I).forEach(D=>{const O=I[D].x;I[D].x=I[D].y,I[D].y=O}),J(n,1),I}const F6=Object.freeze(Object.defineProperty({__proto__:null,BipartiteLayout:Wc,bipartiteCompute:JP,default:Wc},Symbol.toStringTag,{value:"Module"}));class qc extends Ut{constructor(e,n={}){super(e,{subsets:null,align:"vertical",scale:1,center:{x:0,y:0},...n},{module:"../layouts/multipartite.js",functionName:"multipartiteCompute"})}}async function QP(t,e,n){const i=Ke(t),{subsets:r=null,align:o="vertical",scale:s=1,center:a={x:0,y:0}}=e||{},l=Array.from(i.nodes),c=l.length;if(c===0)return J(n,1),{};if(c===1){const x={[l[0]]:{x:a.x,y:a.y}};return J(n,1),x}J(n,.3);let d;if(r&&Object.keys(r).length>0)d=Object.keys(r).sort((x,k)=>{const v=parseInt(x),C=parseInt(k);return isNaN(v)?1:isNaN(C)?-1:v-C}).map(x=>r[x]);else{const x=new Map;l.forEach((k,v)=>{const C=v%3;x.has(C)||x.set(C,[]),x.get(C).push(k)}),d=Array.from(x.values())}J(n,.5);const u=[],h={},f=d.length,p=f*2-1;d.forEach((x,k)=>{const v=x.length-1||1,C=(k*2-p/2)/(f-1||1);x.forEach((A,S)=>{const M=v>0?2*S/v-1:0;u.push([C,M])})}),J(n,.7);const m=[];d.forEach(x=>{x.forEach(k=>{m.push(k)})});const w={};m.forEach((x,k)=>{w[x]={x:u[k][0],y:u[k][1]}});const _=Lr(w,m,s,a);return J(n,.9),m.forEach(x=>{h[x]=_[x]}),o==="horizontal"&&Object.keys(h).forEach(x=>{const k=h[x].x;h[x].x=h[x].y,h[x].y=k}),J(n,1),h}const $6=Object.freeze(Object.defineProperty({__proto__:null,MultipartiteLayout:qc,default:qc,multipartiteCompute:QP},Symbol.toStringTag,{value:"Module"}));class Kc extends Ut{constructor(e,n={}){super(e,{startNode:null,align:"vertical",scale:1,center:{x:0,y:0},...n},{module:"../layouts/bfs.js",functionName:"bfsCompute"})}}async function eD(t,e,n){const i=Ke(t),{startNode:r=null,align:o="vertical",scale:s=1,center:a={x:0,y:0}}=e||{},l=Array.from(i.nodes),c=l.length;if(c===0)return J(n,1),{};if(c===1){const k={[l[0]]:{x:a.x,y:a.y}};return J(n,1),k}J(n,.2);let d=r;(!d||!l.includes(d))&&(d=l[0]),J(n,.3);const u=tD(i,d);J(n,.6);const h=new Set;if(u.forEach(k=>{k.forEach(v=>h.add(v))}),h.size!==c){const k=l.filter(v=>!h.has(v));k.length>0&&u.push(k)}J(n,.7);const f=[],p=u.length;Math.max(...u.map(k=>k.length)),u.forEach((k,v)=>{const C=p>1?2*v/(p-1)-1:0,A=k.length-1||1;k.forEach((S,M)=>{const I=A>0?2*M/A-1:0;f.push([C,I])})}),J(n,.85);const m=[];u.forEach(k=>{k.forEach(v=>{m.push(v)})});const w={};m.forEach((k,v)=>{w[k]={x:f[v][0],y:f[v][1]}});const _=Lr(w,m,s,a);J(n,.95);const x={};return m.forEach(k=>{x[k]=_[k]}),o==="horizontal"&&Object.keys(x).forEach(k=>{const v=x[k].x;x[k].x=x[k].y,x[k].y=v}),J(n,1),x}function tD(t,e,n){const i=[],r=new Set,o=[e];let s=[];for(r.add(e);o.length>0;){const u=o.shift();s.push(u);const h=(t.getNeighbors(u)||[]).filter(f=>!r.has(f));h.forEach(f=>{r.add(f),o.push(f)}),(o.length===0||h.length>0)&&s.length>0&&(i.push([...s]),s=[])}i.length=0,s=[];const a=new Map,l=[e];let c=0;a.set(e,0);let d=0;for(;c<l.length;){const u=l[c],h=a.get(u);h>d&&(s.length>0&&(i.push([...s]),s=[]),d=h),s.push(u),(t.getNeighbors(u)||[]).forEach(f=>{a.has(f)||(a.set(f,h+1),l.push(f))}),c++}return s.length>0&&i.push([...s]),i}const z6=Object.freeze(Object.defineProperty({__proto__:null,BFSLayout:Kc,bfsCompute:eD,default:Kc},Symbol.toStringTag,{value:"Module"}));class Xc extends Ut{constructor(e,n={}){super(e,{startNode:null,align:"vertical",scale:1,center:{x:0,y:0},horizontalSpacing:1,verticalSpacing:1,...n},{module:"../layouts/dfs.js",functionName:"dfsCompute"})}}async function nD(t,e,n){const i=Ke(t),{startNode:r=null,align:o="vertical",scale:s=1,center:a={x:0,y:0},horizontalSpacing:l=1,verticalSpacing:c=1}=e||{},d=Array.from(i.nodes),u=d.length;if(u===0)return J(n,1),{};if(u===1){const A={[d[0]]:{x:a.x,y:a.y}};return J(n,1),A}J(n,.1);let h=r;(!h||!d.includes(h))&&(h=d[0]),J(n,.2);const{tree:f,roots:p,depths:m,maxDepth:w}=iD(i,h,d);J(n,.5);const _=rD(f,p);J(n,.7);const x=oD(f,p,m,w,_,{horizontalSpacing:l,verticalSpacing:c});J(n,.85);const k=Object.keys(x),v={};k.forEach(A=>{v[A]=x[A]});const C=Lr(v,k,s,a);return J(n,.95),o==="horizontal"&&Object.keys(C).forEach(A=>{const S=C[A].x;C[A].x=C[A].y,C[A].y=S}),J(n,1),C}function iD(t,e,n){const i=new Map,r=new Set,o=new Map,s=[];let a=0;n.forEach(c=>{i.set(c,{parent:null,children:[]})});const l=[e];n.forEach(c=>{c!==e&&l.push(c)});for(const c of l){if(r.has(c))continue;s.push(c);const d=[[c,0]];for(;d.length>0;){const[u,h]=d.pop();if(r.has(u))continue;r.add(u),o.set(u,h),a=Math.max(a,h);const f=(t.getNeighbors(u)||[]).filter(p=>!r.has(p));for(let p=f.length-1;p>=0;p--){const m=f[p];i.get(u).children.push(m),i.get(m).parent=u,d.push([m,h+1])}}}return{tree:i,roots:s,depths:o,maxDepth:a}}function rD(t,e){const n=new Map;function i(r){const o=t.get(r).children;if(o.length===0)return n.set(r,1),1;let s=0;for(const a of o)s+=i(a);return n.set(r,s),s}for(const r of e)i(r);return n}function oD(t,e,n,i,r,o){const s={},{horizontalSpacing:a,verticalSpacing:l}=o,c=new Map;for(const[A,S]of n.entries())c.has(S)||c.set(S,[]),c.get(S).push(A);const d=l*2,u=a;for(let A=0;A<=i;A++){const S=c.get(A)||[],M=S.length;M!==0&&(S.sort((I,D)=>{const O=t.get(I).parent,$=t.get(D).parent;if(O===$)return 0;if(!O)return-1;if(!$)return 1;const j=s[O],E=s[$];return j&&E?j.x-E.x:0}),S.forEach((I,D)=>{const O=(D-(M-1)/2)*u,$=A*d;s[I]={x:O,y:$}}))}const h=Object.values(s).map(A=>A.x),f=Object.values(s).map(A=>A.y);if(h.length===0)return s;const p=Math.min(...h),m=Math.max(...h),w=Math.min(...f),_=Math.max(...f),x=(p+m)/2,k=(w+_)/2,v=m-p||1,C=_-w||1;return Object.keys(s).forEach(A=>{s[A]={x:(s[A].x-x)/(v/2),y:(s[A].y-k)/(C/2)}}),s}const B6=Object.freeze(Object.defineProperty({__proto__:null,DFSLayout:Xc,default:Xc,dfsCompute:nD},Symbol.toStringTag,{value:"Module"}));class Zc extends Ut{constructor(e,n={}){super(e,{centerNode:null,scale:1,center:{x:0,y:0},startAngle:-Math.PI/2,sortByDegree:!0,...n},{module:"../layouts/radial.js",functionName:"radialCompute"})}}async function sD(t,e,n){const i=Ke(t),{centerNode:r=null,scale:o=1,center:s={x:0,y:0},startAngle:a=-Math.PI/2,sortByDegree:l=!0,nodeSizes:c={},defaultNodeSize:d=8,nodePadding:u=4}=e||{},h=Object.keys(c).length,f=Object.entries(c).slice(0,3);console.log("[radialCompute] Options received:",{scale:o,nodeSizeCount:h,defaultNodeSize:d,nodePadding:u,sampleSizes:f.map(([I,D])=>`${I}: ${D}`)});const p=Array.from(i.nodes),m=p.length;if(m===0)return J(n,1),{};if(m===1){const I={[p[0]]:{x:s.x,y:s.y}};return J(n,1),I}J(n,.1);let w=r;if(!w||!p.includes(w)){let I=-1;p.forEach(D=>{const O=(i.getNeighbors(D)||[]).length;O>I&&(I=O,w=D)})}J(n,.2);const _=aD(i,w);J(n,.5);const x=new Set;if(_.forEach(I=>{I.forEach(D=>x.add(D))}),x.size!==m){const I=p.filter(D=>!x.has(D));I.length>0&&_.push(I)}J(n,.6);const k=new Map;p.forEach(I=>{k.set(I,(i.getNeighbors(I)||[]).length)}),l&&_.forEach(I=>{I.sort((D,O)=>k.get(O)-k.get(D))}),J(n,.7);const v={};v[w]={x:s.x,y:s.y};const C=o*.5,A=o*.3,S=I=>c[I]||d;let M=0;return _.forEach((I,D)=>{if(D===0)return;const O=I.length,$=I.reduce((L,G)=>{const B=S(G)*2;return L+B+u},0),j=$/(2*Math.PI),E=D===1?C:M+A,R=Math.max(E,j);D<=4&&console.log(`[radialCompute] Ring ${D}:`,{nodesInRing:O,totalArcNeeded:Math.round($),radiusForSpacing:Math.round(j),minRadiusForPosition:Math.round(E),finalRadius:Math.round(R)}),M=R,I.forEach((L,G)=>{const B=a+2*Math.PI*G/O;v[L]={x:s.x+R*Math.cos(B),y:s.y+R*Math.sin(B)}})}),J(n,.95),p.forEach(I=>{v[I]||(v[I]={x:s.x,y:s.y})}),J(n,1),v}function aD(t,e){const n=[],i=new Map,r=[e];let o=0;i.set(e,0);let s=0,a=[];for(;o<r.length;){const l=r[o],c=i.get(l);c>s&&(a.length>0&&(n.push([...a]),a=[]),s=c),a.push(l),(t.getNeighbors(l)||[]).forEach(d=>{i.has(d)||(i.set(d,c+1),r.push(d))}),o++}return a.length>0&&n.push([...a]),n}const V6=Object.freeze(Object.defineProperty({__proto__:null,RadialLayout:Zc,default:Zc,radialCompute:sD},Symbol.toStringTag,{value:"Module"}));class tg extends Ut{constructor(e,n={}){super(e,{iterations:50,k:null,scale:1,center:{x:0,y:0,z:0},initialPositions:null,threshold:1e-4,gravity:1,...n},{module:"../layouts/force-directed-3d.js",functionName:"forceDirected3DCompute"})}}async function lD(t,e,n){const i=Ke(t),{iterations:r=50,k:o=null,scale:s=1,center:a={x:0,y:0,z:0},initialPositions:l=null,threshold:c=1e-4,gravity:d=1}=e||{},u=Array.from(i.nodes),h=u.length;if(h===0)return J(n,1),{};if(h===1){const C={[u[0]]:{x:a.x,y:a.y,z:a.z}};return J(n,1),C}J(n,.05);let f={};l?u.forEach(C=>{const A=l[C];A?f[C]={x:A.x,y:A.y,z:A.z!==void 0?A.z:Math.random()}:f[C]={x:Math.random(),y:Math.random(),z:Math.random()}}):f=WP(u);const p=s*h*h,m=o!==null?o:Math.pow(p/(h+1),1/3);let w=Math.sqrt(h);const _=w/(r+1),x=.01,k=new Map;u.forEach(C=>{const A=new Set(i.getNeighbors(C));k.set(C,A)}),J(n,.1);for(let C=0;C<r;C++){const A={};u.forEach(M=>{A[M]={x:0,y:0,z:0}});for(let M=0;M<h;M++)for(let I=M+1;I<h;I++){const D=u[M],O=u[I],$=f[D],j=f[O],E=$.x-j.x,R=$.y-j.y,L=$.z-j.z,G=Math.sqrt(E*E+R*R+L*L)+x,B=m*m/G,q=E/G*B,ee=R/G*B,fe=L/G*B;A[D].x+=q,A[D].y+=ee,A[D].z+=fe,A[O].x-=q,A[O].y-=ee,A[O].z-=fe}i.edges.forEach(M=>{const I=f[M.u],D=f[M.v],O=D.x-I.x,$=D.y-I.y,j=D.z-I.z,E=Math.sqrt(O*O+$*$+j*j)+x,R=E*E/m,L=O/E*R,G=$/E*R,B=j/E*R;A[M.u].x+=L,A[M.u].y+=G,A[M.u].z+=B,A[M.v].x-=L,A[M.v].y-=G,A[M.v].z-=B}),d>0&&u.forEach(M=>{const I=f[M],D=a.x-I.x,O=a.y-I.y,$=a.z-I.z,j=Math.sqrt(D*D+O*O+$*$)+x,E=.1*m*d;A[M].x+=D/j*E,A[M].y+=O/j*E,A[M].z+=$/j*E});let S=0;if(u.forEach(M=>{const I=A[M],D=Math.sqrt(I.x*I.x+I.y*I.y+I.z*I.z)+x,O=Math.min(D,w)/D;f[M].x+=I.x*O,f[M].y+=I.y*O,f[M].z+=I.z*O,S+=D}),w-=_,S/h<c){J(n,1);break}C%10===0&&J(n,.1+.8*(C/r))}const v=qP(f,u,s,a);return J(n,1),v}const U6=Object.freeze(Object.defineProperty({__proto__:null,ForceDirected3DLayout:tg,default:tg,forceDirected3DCompute:lD},Symbol.toStringTag,{value:"Module"})),cD={layouts:[{id:"none",name:"None (D3 Physics)",description:"D3's built-in force-directed physics simulation",category:"physics",complexity:"O(iterations)",bestFor:["General graphs","Interactive exploration"],requiresStats:!1},{id:"random",name:"Random",description:"Random node positioning",category:"simple",complexity:"O(n)",bestFor:["Testing","Initial visualization"],requiresStats:!1},{id:"circular",name:"Circular",description:"Nodes arranged in a circle",category:"simple",complexity:"O(n)",bestFor:["Symmetric graphs","Ring topologies"],requiresStats:!1},{id:"spiral",name:"Spiral",description:"Archimedean spiral arrangement",category:"simple",complexity:"O(n)",bestFor:["Linear structures","Sequences"],requiresStats:!1},{id:"shell",name:"Shell",description:"Concentric circles by degree",category:"simple",complexity:"O(n)",bestFor:["Star-like graphs","Hub structures"],requiresStats:!0},{id:"spectral",name:"Spectral",description:"Laplacian eigenvector layout",category:"spectral",complexity:"O(n)",bestFor:["Community detection visualization","Graph topology"],requiresStats:!0,requiredStat:"eigenvector-laplacian"},{id:"force-directed",name:"Force-Directed",description:"Spring-electrical model (Fruchterman-Reingold)",category:"physics",complexity:"O(iterations  n)",bestFor:["General graphs","Complex networks"],requiresStats:!1},{id:"kamada-kawai",name:"Kamada-Kawai",description:"Energy minimization based on shortest paths",category:"energy",complexity:"O(n + iterations  n)",bestFor:["Small-medium graphs","Trees","Planar graphs"],requiresStats:!1},{id:"bipartite",name:"Bipartite",description:"Two-line layout for bipartite graphs",category:"hierarchical",complexity:"O(n)",bestFor:["Bipartite graphs","Two-level hierarchies"],requiresStats:!1},{id:"multipartite",name:"Multipartite",description:"Multi-layer layout for hierarchical structures",category:"hierarchical",complexity:"O(n)",bestFor:["DAGs","Organizational hierarchies"],requiresStats:!1},{id:"bfs",name:"BFS Layout",description:"Layer-by-layer breadth-first search",category:"hierarchical",complexity:"O(n + m)",bestFor:["Trees","Network exploration"],requiresStats:!1},{id:"dfs",name:"DFS Tree",description:"Nested tree layout via depth-first search",category:"hierarchical",complexity:"O(n + m)",bestFor:["Tree structures","Recursive patterns","Call graphs"],requiresStats:!1},{id:"radial",name:"Radial",description:"Concentric circles from a center node (BFS-based)",category:"hierarchical",complexity:"O(n + m)",bestFor:["Star networks","Ego networks","Kevin Bacon style"],requiresStats:!1},{id:"force-directed-3d",name:"Force Directed 3D",description:"3D Fruchterman-Reingold force simulation",category:"physics",complexity:"O(iterations  n)",bestFor:["3D visualization","VR/AR exploration","Large networks"],requiresStats:!1,is3D:!0}],getAll(){return[...this.layouts]},get(t){return this.layouts.find(e=>e.id===t)||null},filter(t){return this.layouts.filter(t)},byCategory(t){return this.layouts.filter(e=>e.category===t)},withoutStatRequirements(){return this.layouts.filter(t=>!t.requiresStats)},exists(t){return this.layouts.some(e=>e.id===t)}},dD=Ui({prefix:"Adapter",level:"info"});class Xd{static fromFormat(e,n={}){throw new Error("Adapter.fromFormat() must be implemented by subclass")}static toFormat(e,n={}){throw new Error("Adapter.toFormat() must be implemented by subclass")}static validateGraphData(e){if(!e||typeof e!="object")throw new Error("GraphData must be an object");if(!Array.isArray(e.nodes))throw new Error("GraphData.nodes must be an array");if(!Array.isArray(e.edges))throw new Error("GraphData.edges must be an array");for(const n of e.nodes)if(!n.id&&n.id!==0)throw new Error("All nodes must have an id property");for(const n of e.edges){if(!n.source&&n.source!==0)throw new Error("All edges must have a source property");if(!n.target&&n.target!==0)throw new Error("All edges must have a target property")}return!0}static normalizeIds(e){return{nodes:e.nodes.map(n=>({...n,id:String(n.id)})),edges:e.edges.map(n=>({...n,source:String(n.source),target:String(n.target)}))}}static getNodeIdSet(e){return new Set(e.map(n=>String(n.id)))}static filterInvalidEdges(e,n=!0){const i=this.getNodeIdSet(e.nodes),r=[],o=[];for(const s of e.edges){const a=String(s.source),l=String(s.target);i.has(a)&&i.has(l)?r.push(s):o.push(s)}return n&&o.length>0&&dD.warn("Filtered out edges referencing non-existent nodes",{invalidEdgeCount:o.length,totalEdges:e.edges.length}),{nodes:e.nodes,edges:r}}}const ng=Ui({prefix:"CSVAdapter",level:"info"});class So extends Xd{static parseCSV(e,n=","){const i=[],r=e.trim().split(`
`);for(const o of r){const s=[];let a="",l=!1;for(let c=0;c<o.length;c++){const d=o[c];d==='"'?l=!l:d===n&&!l?(s.push(a.trim()),a=""):a+=d}s.push(a.trim()),i.push(s)}return i}static fromEdgeList(e,n={}){const{header:i=!0,delimiter:r=",",weighted:o=!0}=n,s=this.parseCSV(e,r),a=i?s.slice(1):s,l=new Set,c=[];for(const d of a){if(d.length<2)continue;const u=d[0],h=d[1],f=o&&d[2]?parseFloat(d[2]):1;l.add(u),l.add(h),c.push({source:u,target:h,weight:isNaN(f)?1:f})}return{nodes:Array.from(l).map(d=>({id:d,group:1})),edges:c}}static fromNodes(e,n={}){const{header:i=!0,delimiter:r=","}=n,o=this.parseCSV(e,r);if(o.length===0)return[];const s=i?o[0]:["id","group","label"];return(i?o.slice(1):o).map(a=>{const l={};for(let c=0;c<s.length;c++){const d=s[c],u=a[c];d==="group"&&u?l[d]=parseInt(u,10):!isNaN(u)&&u!==""?l[d]=parseFloat(u):l[d]=u}return l})}static fromFormat(e,n=null,i={}){const{nodes:r,edges:o}=this.fromEdgeList(e,i);if(n){const a=this.fromNodes(n,i),l=new Map(a.map(d=>[String(d.id),d])),c={nodes:r.map(d=>{const u=l.get(String(d.id));return u?{...d,...u}:d}),edges:o};return this.filterInvalidEdges(c)}const s={nodes:r,edges:o};return this.filterInvalidEdges(s)}static async loadFromURL(e,n=null,i={}){try{const r=await fetch(e);if(!r.ok)throw new Error(`Failed to fetch edges: ${r.statusText}`);const o=await r.text();let s=null;if(n){const a=await fetch(n);a.ok&&(s=await a.text())}return this.fromFormat(o,s,i)}catch(r){throw ng.error("Error loading CSV",{edgeURL:e,nodeURL:n,error:r.message,stack:r.stack}),r}}static async loadFromFiles(e,n=null,i={}){try{const r=await e.text();let o=null;return n&&(o=await n.text()),this.fromFormat(r,o,i)}catch(r){throw ng.error("Error reading file",{edgeFileName:e?.name,nodeFileName:n?.name,error:r.message,stack:r.stack}),r}}static toEdgeList(e,n={}){const{header:i=!0,delimiter:r=","}=n,o=[];i&&o.push(["source","target","weight"].join(r));for(const s of e.edges){const a=s.source?.id||s.source,l=s.target?.id||s.target,c=s.weight||1;o.push([a,l,c].join(r))}return o.join(`
`)}static toNodes(e,n={}){const{header:i=!0,delimiter:r=","}=n,{nodes:o}=e;if(o.length===0)return"";const s=[],a=new Set;o.forEach(c=>{Object.keys(c).forEach(d=>a.add(d))});const l=Array.from(a);i&&s.push(l.join(r));for(const c of o){const d=l.map(u=>{const h=c[u];return typeof h=="string"&&(h.includes(r)||h.includes('"'))?`"${h.replace(/"/g,'""')}"`:h??""});s.push(d.join(r))}return s.join(`
`)}static toFormat(e,n={}){return this.validateGraphData(e),{edges:this.toEdgeList(e,n),nodes:this.toNodes(e,n)}}}const uD=Ui({prefix:"JSONAdapter",level:"info"});class Yc extends Xd{static fromD3(e){if(!e||!e.nodes)throw new Error("Invalid D3 data: must have nodes array");const n=e.nodes.map(o=>({...o,id:String(o.id)})),i=(e.links||[]).map(o=>({...o,source:String(o.source?.id||o.source),target:String(o.target?.id||o.target),weight:o.weight||o.value||1})),r={nodes:n,edges:i};return this.filterInvalidEdges(r)}static fromCytoscape(e){if(!e||!Array.isArray(e.nodes))throw new Error("Invalid Cytoscape data: must have nodes array");const n=e.nodes.map(o=>({id:String(o.data.id),...o.data})),i=(e.edges||[]).map(o=>({source:String(o.data.source),target:String(o.data.target),weight:o.data.weight||1,...o.data})),r={nodes:n,edges:i};return this.filterInvalidEdges(r)}static fromFormat(e){if(!e||typeof e!="object")throw new Error("Invalid JSON data");if(e.nodes&&e.edges)return this.normalizeIds(e);if(e.nodes&&e.links)return this.fromD3(e);if(Array.isArray(e.nodes)&&e.nodes[0]?.data)return this.fromCytoscape(e);if(e.nodes&&(e.links||e.edges))return this.fromD3({nodes:e.nodes,links:e.links||e.edges});throw new Error("Unknown JSON format - cannot auto-detect")}static toD3(e){return this.validateGraphData(e),{nodes:e.nodes.map(n=>({...n})),links:e.edges.map(n=>({source:n.source,target:n.target,value:n.weight,...n}))}}static toCytoscape(e){return this.validateGraphData(e),{nodes:e.nodes.map(n=>({data:{...n}})),edges:e.edges.map((n,i)=>({data:{id:`e${i}`,source:n.source,target:n.target,weight:n.weight||1,...n}}))}}static toFormat(e,n={}){const{format:i="standard",pretty:r=!1}=n;let o;switch(i){case"d3":o=this.toD3(e);break;case"cytoscape":o=this.toCytoscape(e);break;case"standard":default:this.validateGraphData(e),o=e}return JSON.stringify(o,null,r?2:0)}static async loadFromURL(e){try{const n=await fetch(e);if(!n.ok)throw new Error(`Failed to fetch: ${n.statusText}`);const i=await n.json();return this.fromFormat(i)}catch(n){throw uD.error("Error loading JSON",{url:e,error:n.message,stack:n.stack}),n}}}class hD extends Xd{static fromNodeLink(e){if(!e||!Array.isArray(e.nodes))throw new Error("Invalid NetworkX node-link data: must have nodes array");const n=e.nodes.map(o=>({id:String(o.id),...o})),i=(e.links||[]).map(o=>({source:String(o.source),target:String(o.target),weight:o.weight||1,...o})),r={nodes:n,edges:i};return this.filterInvalidEdges(r)}static fromAdjacency(e){if(!Array.isArray(e))throw new Error("Invalid NetworkX adjacency data: must be array");const n=[],i=[],r=new Set;for(const s of e){const a=String(s.id);if(n.push({id:a,...s}),s.adjacency&&Array.isArray(s.adjacency))for(const l of s.adjacency){const c=String(l.id),d=`${a}-${c}`,u=`${c}-${a}`;!r.has(d)&&!r.has(u)&&(i.push({source:a,target:c,weight:l.weight||1,...l}),r.add(d))}}const o={nodes:n,edges:i};return this.filterInvalidEdges(o)}static fromFormat(e){if(!e||typeof e!="object")throw new Error("Invalid NetworkX data");if(e.nodes&&Array.isArray(e.nodes)&&(e.links||e.edges))return this.fromNodeLink({...e,links:e.links||e.edges});if(Array.isArray(e)&&e[0]?.adjacency)return this.fromAdjacency(e);throw new Error("Unknown NetworkX format")}static toNodeLink(e,n={}){this.validateGraphData(e);const{directed:i=!1,multigraph:r=!1}=n;return{directed:i,multigraph:r,graph:{},nodes:e.nodes.map(o=>({...o})),links:e.edges.map(o=>({source:o.source,target:o.target,weight:o.weight||1,...o}))}}static toAdjacency(e){this.validateGraphData(e);const n=new Map;for(const i of e.nodes)n.set(String(i.id),{...i,adjacency:[]});for(const i of e.edges){const r=String(i.source),o=String(i.target),s=n.get(r);s&&s.adjacency.push({id:o,weight:i.weight||1,...i});const a=n.get(o);a&&r!==o&&a.adjacency.push({id:r,weight:i.weight||1,...i})}return Array.from(n.values())}static toFormat(e,n={}){const{format:i="node-link"}=n;switch(i){case"adjacency":return this.toAdjacency(e);case"node-link":default:return this.toNodeLink(e,n)}}}class et{static FEATURES={EIGENVECTOR:"eigenvector",EIGENVECTOR_LAPLACIAN:"eigenvector-laplacian",MODULARITY:"modularity",BETWEENNESS:"betweenness",CLUSTERING:"clustering",CLIQUES:"cliques",DEGREE:"degree",CLOSENESS:"closeness",EGO_DENSITY:"ego-density",PAGERANK:"pagerank",ALL:["degree","betweenness","clustering","eigenvector","eigenvector-laplacian","cliques","closeness","ego-density","pagerank"]};static GRAPH_STATS={DENSITY:"density",DIAMETER:"diameter",AVERAGE_CLUSTERING:"average_clustering",AVERAGE_SHORTEST_PATH:"average_shortest_path",CONNECTED_COMPONENTS:"connected_components",AVERAGE_DEGREE:"average_degree",ALL:["density","diameter","average_clustering","average_shortest_path","connected_components","average_degree"]};static COMMUNITY_DETECTION={LOUVAIN:"louvain",ALL:["louvain"]};constructor(e={}){this.options={verbose:e.verbose!==void 0?e.verbose:!0,maxWorkers:e.maxWorkers,taskTimeout:e.taskTimeout||3e5,workerScript:e.workerScript,enableAffinity:e.enableAffinity!==void 0?e.enableAffinity:!0,affinityCacheLimit:e.affinityCacheLimit||50,maxIter:e.maxIter,tolerance:e.tolerance,...e},this.log=Ui({prefix:"NetworkStats",level:this.options.verbose?"debug":"info"}),An.initialize({maxWorkers:this.options.maxWorkers,taskTimeout:this.options.taskTimeout,verbose:this.options.verbose,workerScript:this.options.workerScript,enableAffinity:this.options.enableAffinity,affinityCacheLimit:this.options.affinityCacheLimit}).catch(n=>{this.log.error("Failed to initialize workers:",n)}),this.statisticClasses={[et.FEATURES.DEGREE]:gv,[et.FEATURES.BETWEENNESS]:yv,[et.FEATURES.CLUSTERING]:vv,[et.FEATURES.EIGENVECTOR]:bv,[et.FEATURES.EIGENVECTOR_LAPLACIAN]:wv,[et.FEATURES.CLIQUES]:xv,[et.FEATURES.CLOSENESS]:pv,[et.FEATURES.EGO_DENSITY]:mv,[et.FEATURES.PAGERANK]:_v,[et.FEATURES.MODULARITY]:"modularity"},this.graphStatClasses={[et.GRAPH_STATS.DENSITY]:kv,[et.GRAPH_STATS.DIAMETER]:Ev,[et.GRAPH_STATS.AVERAGE_CLUSTERING]:Av,[et.GRAPH_STATS.AVERAGE_SHORTEST_PATH]:Cv,[et.GRAPH_STATS.CONNECTED_COMPONENTS]:Sv,[et.GRAPH_STATS.AVERAGE_DEGREE]:Tv}}async analyze(e,n,i={}){this.log.time("networkAnalysis"),this.log.info(`Analyzing network with ${e.length} edges`),n=n||et.FEATURES.ALL,typeof n=="string"&&(n=[n]);const{graph:r,nodes:o}=this._prepareNetwork(e);this.log.info(`Graph: ${o.length} nodes, ${r.edges.length} edges`);const s=await this._calculateNodeStats(r,o,n,i);if(i.includeGraphStats){const a=await this._calculateGraphStats(r,i.graphStats,i);return this.log.timeEnd("networkAnalysis"),{nodes:s,graph:a}}return this.log.timeEnd("networkAnalysis"),s}async _calculateNodeStats(e,n,i,r){const o={};for(const s of i)if(s===et.FEATURES.MODULARITY)o[s]=await this._calculateModularity(e,r);else if(this.statisticClasses[s]){const a=this.statisticClasses[s],l=this.options.maxIter||this.options.tolerance?{maxIter:this.options.maxIter,tolerance:this.options.tolerance}:{},c=new a(l);this.log.debug(`Calculating ${s}...`);const d=await c.calculate(e,null,{onProgress:r.onProgress});o[s]=d}else this.log.warn(`Unknown feature: ${s}`);return this._normalizeNodeStats(o,n)}async _calculateGraphStats(e,n,i={}){const r=n||et.GRAPH_STATS.ALL,o={};for(const s of r){const a=this.graphStatClasses[s];if(a){this.log.debug(`Calculating graph stat: ${s}...`);const l=new a;o[s]=await l.calculate(e,null,{onProgress:i.onProgress})}else this.log.warn(`Unknown graph stat: ${s}`)}return o}async _calculateModularity(e,n={}){const i=new za(e),r=new Co;return this.log.debug("Running Louvain community detection..."),(await i.detectCommunities(r,{onProgress:n.onProgress})).communities}_prepareNetwork(e){const n=new Set;for(const o of e)n.add(o.source),n.add(o.target);const i=Array.from(n),r=new Fa;for(const o of i)r.addNode(o);for(const o of e){const s=o.weight!==void 0?o.weight:1;r.addEdge(o.source,o.target,s)}return{graph:r,nodes:i}}_normalizeNodeStats(e,n){const i=[];for(const r of n){const o={id:r};for(const[s,a]of Object.entries(e))typeof a=="object"&&a!==null&&(o[s]=a[r]);i.push(o)}return i}async dispose(){await An.terminate()}}const fD=async()=>"/assets/network-worker.js";class gD{constructor(){this.analyzer=null,this.initPromise=null,this.lastAnalysisResults=null,this.workerUrl=null,this.log=Et({prefix:"NetworkAnalyzer",level:"info"})}async _ensureInitialized(){if(!this.analyzer){if(this.initPromise)return this.initPromise;this.initPromise=(async()=>{this.workerUrl=await fD(),this.log.debug("Initializing with worker",{workerUrl:this.workerUrl}),this.analyzer=new et({verbose:!0,workerScript:this.workerUrl}),await new Promise(e=>setTimeout(e,500)),this.log.info("Initialized successfully")})(),await this.initPromise}}_toEdgeList(e,n){return n.map(i=>({source:typeof i.source=="object"?i.source.id:i.source,target:typeof i.target=="object"?i.target.id:i.target,weight:i.weight||1}))}_buildGraph(e,n){const i=new Fa;return e.forEach(r=>{i.addNode(r.id)}),n.forEach(r=>{const o=typeof r.source=="object"?r.source.id:r.source,s=typeof r.target=="object"?r.target.id:r.target;i.addEdge(o,s,r.weight||1)}),i}async analyzeGraph(e,n,i={}){await this._ensureInitialized(),this.log.debug("Starting analysis",{nodeCount:e.length,linkCount:n.length,features:i.features,includeGraphStats:i.includeGraphStats});const r=this._toEdgeList(e,n),o=i.features||["degree","eigenvector"],s={onProgress:i.onProgress};i.includeGraphStats&&(s.includeGraphStats=!0,s.graphStats=i.graphStats||["density","diameter","average_clustering","average_shortest_path","connected_components","average_degree"]);const a=await this.analyzer.analyze(r,o,s);let l,c=null;Array.isArray(a)?l=a:a.nodes&&a.graph?(l=a.nodes,c=a.graph):l=a,this.log.info("Analysis complete",{resultsCount:l.length,hasGraphStats:c!==null}),this.lastAnalysisResults=l,e.forEach(u=>{const h=String(u.id),f=l.find(m=>String(m.id)===h);if(!f){this.log.warn("No stats found for node",{nodeId:u.id}),u.centrality=.5;return}const p=f.eigenvector!==void 0?f.eigenvector:f.degree!==void 0?f.degree/10:.5;Object.assign(u,f,{centrality:p})}),this.log.debug("Nodes enriched",{sampleNode:e[0]});const d={nodes:e,links:n};return c&&(d.graphStats=c),d}async applyLayout(e,n,i,r={}){await this._ensureInitialized(),this.log.debug("Applying layout",{layoutId:e});const o=r.width||800,s=r.height||600,a=r.scale||Math.min(o,s)/1.2,l=r.center||{x:o/2,y:s/2};this.log.info("Layout scale",{providedScale:r.scale,computedScale:a,width:o,height:s});const c=this._buildGraph(n,i);let d;const u={scale:a,center:l};switch(e){case"random":d=new $c(c,u);break;case"circular":d=new zc(c,u);break;case"spiral":d=new Bc(c,{...u,resolution:.15});break;case"shell":const f={};let p=!1;n.forEach(I=>{I.degree!==void 0&&(f[I.id]={degree:I.degree},p=!0)}),d=new Vc(c,{...u,nodeProperties:p?f:null});break;case"spectral":if(!n.some(I=>{const D=I["eigenvector-laplacian"];return D&&typeof D=="object"&&D.laplacian_x!==void 0&&D.laplacian_y!==void 0}))throw new Error('Spectral layout requires eigenvector-laplacian analysis. Please run analysis with ["eigenvector-laplacian"] first.');const w={};n.forEach(I=>{const D=I["eigenvector-laplacian"];D&&typeof D=="object"&&D.laplacian_x!==void 0&&D.laplacian_y!==void 0&&(w[I.id]={laplacian_x:D.laplacian_x,laplacian_y:D.laplacian_y})}),this.log.debug("Spectral layout nodeProperties:",{propCount:Object.keys(w).length,sampleKey:Object.keys(w)[0],sampleValue:w[Object.keys(w)[0]]}),d=new Uc(c,{...u,nodeProperties:w});break;case"force-directed":const _=n.length,x=Math.sqrt(1/_)*2.5;d=new jc(c,{iterations:50,k:x,...u});break;case"kamada-kawai":d=new Hc(c,{iterations:300,...u});break;case"bipartite":d=new Wc(c,{align:"vertical",...u});break;case"multipartite":d=new qc(c,{align:"vertical",...u});break;case"bfs":const k=n[0]?.id||Array.from(c.nodes)[0];d=new Kc(c,{startNode:k,align:"vertical",...u});break;case"dfs":const v=n[0]?.id||Array.from(c.nodes)[0];d=new Xc(c,{startNode:v,align:"vertical",...u});break;case"radial":let C=r.centerNode;if(!C){let I=-1;n.forEach(D=>{const O=i.filter($=>String($.source)===String(D.id)||String($.target)===String(D.id)).length;O>I&&(I=O,C=D.id)})}const{nodeSizes:A,defaultNodeSize:S,nodePadding:M}=r;d=new Zc(c,{centerNode:C,nodeSizes:A,defaultNodeSize:S,nodePadding:M,...u});break;default:throw new Error(`Unknown layout: ${e}`)}const h=await d.getPositions({onProgress:r.onProgress});return this.log.info("Layout complete",{positionCount:Object.keys(h).length}),h}getAvailableLayouts(){return cD.getAll()}getAvailableCommunityAlgorithms(){return eg.getAll()}async detectCommunities(e,n,i,r={}){await this._ensureInitialized(),this.log.debug("Detecting communities",{algorithmId:e});const o=this._buildGraph(n,i),s=eg.get(e);if(!s)throw new Error(`Unknown community detection algorithm: ${e}`);let a;switch(e){case"louvain":a=new Co(s.defaultOptions);break;default:throw new Error(`Unsupported algorithm: ${e}`)}const c=await new za(o).detectCommunities(a,{onProgress:r.onProgress});return this.log.info("Community detection complete",{numCommunities:c.numCommunities,modularity:c.modularity}),n.forEach(d=>{const u=c.communities[d.id];u!==void 0&&(d.community=u)}),c}getAffinityStats(){return An.getAffinityStats()}getWorkerStatus(){return An.getStatus()}async dispose(){if(this.analyzer)try{await this.analyzer.dispose(),this.analyzer=null}catch(e){this.log.warn("Error disposing analyzer",{error:e.message}),this.analyzer=null}}}const Re=Et({prefix:"useNetworkGraph",level:"info"});function Ba(t={}){const e=oe(null),n=oe(null),i=oe(null),r=oe(!1),o=oe(null),s=oe(null),a=oe(0),l=oe(t.renderer||"d3"),c=t.autoComputeCentrality!==!1,d=()=>{if(!e.value){Re.warn("Container ref not ready");return}if(n.value){Re.warn("Graph already initialized");return}try{r.value=!0,Re.debug("Initializing graph",{options:t});const E=e.value.getBoundingClientRect(),R=E.width||t.width||800,L=E.height||t.height||600,G=l.value==="sigma"?Xf:af;n.value=new G(e.value,{width:R,height:L,...t}),Re.debug("Created renderer instance",{renderer:l.value}),i.value=new gD,n.value.on("nodeHover",B=>{s.value=B}),n.value.on("nodeLeave",()=>{s.value=null}),r.value=!1,Re.info("Graph and analyzer initialized successfully")}catch(E){Re.error("Failed to initialize graph",{error:E.message,stack:E.stack}),o.value=E.message,r.value=!1}},u=(E,R,L={})=>{if(!n.value){Re.warn("Graph not initialized yet");return}try{r.value=!0,Re.debug("Loading data into graph",{nodeCount:E.length,linkCount:R.length});const G=()=>{L.keepLoading||(r.value=!1),n.value.off("ready",G),Re.info("Graph ready and fitted to view",{keepLoading:L.keepLoading}),c&&n.value?.data?.nodes?.length>=2&&requestAnimationFrame(()=>{h()})};n.value.on("ready",G),n.value.setData(E,R,L)}catch(G){Re.error("Failed to load data",{error:G.message,stack:G.stack}),o.value=G.message,r.value=!1}},h=async()=>{if(!(!c||!n.value||!i.value)&&!(!n.value.data||n.value.data.nodes.length<2))try{Re.debug("Auto-computing eigenvector centrality");const E=n.value.data,R=await i.value.analyzeGraph(E.nodes,E.links,{features:["eigenvector"],onProgress:()=>{}});R&&R.nodes&&n.value.updateNodeStatistics&&(n.value.updateNodeStatistics(R.nodes,"eigenvector",!0),Re.debug("Auto-computed eigenvector centrality and updated node sizes"))}catch(E){Re.debug("Auto-compute eigenvector failed (non-critical)",{error:E.message})}},f=async(E=[],R=null,L=null,G=!1)=>{if(!n.value)return Re.warn("Graph not initialized yet"),null;try{Re.debug("Adding node",{neighborIds:E,nodeId:R,group:L,incremental:G});let B;return G&&n.value.addNodeIncremental?B=n.value.addNodeIncremental(E,R,L):B=n.value.addNode(E,R,L),B&&c&&requestAnimationFrame(()=>{h()}),B}catch(B){return Re.error("Failed to add node",{error:B.message,stack:B.stack}),o.value=B.message,null}},p=(E=null,R=!1)=>{if(!n.value)return Re.warn("Graph not initialized yet"),!1;try{Re.debug("Removing node",{nodeId:E,incremental:R});let L;return R&&n.value.removeNodeIncremental?L=n.value.removeNodeIncremental(E):L=n.value.removeNode(E),L&&c&&requestAnimationFrame(()=>{h()}),L}catch(L){return Re.error("Failed to remove node",{error:L.message,stack:L.stack}),o.value=L.message,!1}},m=async(E,R,L=!1)=>{if(!n.value)return Re.warn("Graph not initialized yet"),!1;try{let G;return L&&n.value.addLinkIncremental?G=n.value.addLinkIncremental(E,R):G=n.value.addLink(E,R),G&&c&&requestAnimationFrame(()=>{h()}),G}catch(G){return Re.error("Failed to add link",{error:G.message,stack:G.stack}),o.value=G.message,!1}},w=()=>n.value?n.value.getNodeIds():[],_=E=>n.value?n.value.hasNode(E):!1,x=async(E=["degree","eigenvector"],R={})=>{if(!n.value||!i.value)return Re.warn("Graph or analyzer not initialized"),null;try{r.value=!0,a.value=0,Re.debug("Starting graph analysis",{features:E,options:R});const L=n.value.data,G=await i.value.analyzeGraph(L.nodes,L.links,{features:E,includeGraphStats:R.includeGraphStats||!1,graphStats:R.graphStats,onProgress:q=>{a.value=q}});return Re.info("Analysis complete, updating visualization",{nodeCount:G.nodes.length,hasGraphStats:!!G.graphStats}),E.includes("eigenvector")&&G.nodes.some(q=>q.eigenvector!==void 0)?(Re.debug("Sizing nodes by eigenvector centrality"),n.value.updateVisualEncoding({sizeBy:"eigenvector",minRadius:5,maxRadius:20})):n.value.updateGraph(),r.value=!1,a.value=0,G}catch(L){return Re.error("Failed to analyze graph",{error:L.message,stack:L.stack,features:E}),o.value=L.message,r.value=!1,a.value=0,null}},k=async(E,R={})=>{if(!n.value||!i.value)return Re.warn("Graph or analyzer not initialized"),!1;try{if(r.value=!0,a.value=0,Re.debug("Applying layout",{layoutId:E,layoutOptions:R}),E==="none")return typeof n.value.restartSimulation=="function"?n.value.restartSimulation():typeof n.value.unlockPositions=="function"?n.value.unlockPositions():n.value.updateGraph(),r.value=!1,a.value=0,Re.info("Simulation restarted (none layout)"),!0;const L=n.value.data,G=e.value.getBoundingClientRect(),B=await i.value.applyLayout(E,L.nodes,L.links,{width:G.width||800,height:G.height||600,onProgress:ee=>{a.value=ee},...R});L.nodes.forEach(ee=>{const fe=B[ee.id];fe&&(ee.x=fe.x,ee.y=fe.y,ee.fx=fe.x,ee.fy=fe.y)});const q=()=>{r.value=!1,a.value=0,n.value.off("ready",q),Re.info("Layout applied successfully",{layoutId:E})};return n.value.on("ready",q),n.value.updateGraph({skipFit:R.skipFit,zoomRatio:R.zoomRatio}),!0}catch(L){return Re.error("Failed to apply layout",{layoutId:E,error:L.message,stack:L.stack}),o.value=L.message,r.value=!1,a.value=0,!1}},v=()=>i.value?i.value.getAvailableLayouts():[],C=()=>i.value?i.value.getAvailableCommunityAlgorithms():[],A=async E=>{if(!n.value||!i.value)return Re.warn("Graph or analyzer not initialized"),null;try{r.value=!0,a.value=0,Re.debug("Detecting communities",{algorithmId:E});const R=n.value.data,L=await i.value.detectCommunities(E,R.nodes,R.links,{onProgress:G=>{a.value=G}});return Re.info("Community detection complete, updating colors",{numCommunities:L.numCommunities,modularity:L.modularity}),n.value.updateVisualEncoding({colorBy:"community",colorScheme:"categorical",preserveZoom:!0}),r.value=!1,a.value=0,L}catch(R){return Re.error("Failed to detect communities",{algorithmId:E,error:R.message,stack:R.stack}),o.value=R.message,r.value=!1,a.value=0,null}},S=(E={})=>{if(!n.value){Re.warn("Cannot update visual encoding - no graph instance");return}n.value.updateVisualEncoding(E)},M=()=>{if(!n.value){Re.warn("Graph not initialized yet");return}n.value.lockPositions()},I=()=>{if(!n.value){Re.warn("Graph not initialized yet");return}n.value.unlockPositions()},D=(E="network-graph.png")=>{if(!n.value){Re.warn("Graph not initialized yet");return}n.value.saveAsPNG(E)},O=()=>n.value?n.value.getSelectedNode():(Re.warn("Graph not initialized yet"),null),$=async()=>{if(n.value&&(n.value.destroy(),n.value=null,Re.info("Graph destroyed")),i.value)try{await i.value.dispose(),i.value=null,Re.info("Analyzer disposed")}catch(E){Re.warn("Error disposing analyzer",{error:E.message}),i.value=null}},j=async E=>{if(E===l.value)return Re.debug("Already using renderer",{rendererType:E}),!0;if(!["d3","sigma"].includes(E))return Re.error("Invalid renderer type",{rendererType:E}),!1;try{r.value=!0,Re.info("Switching renderer",{from:l.value,to:E});const R=n.value?.data?{nodes:n.value.data.nodes.map(L=>{const{x:G,y:B,fx:q,fy:ee,vx:fe,vy:_e,index:ke,...V}=L;return V}),links:[...n.value.data.links]}:null;if(n.value&&(n.value.destroy(),n.value=null),l.value=E,await Gi(),e.value){const L=e.value.getBoundingClientRect(),G=L.width||t.width||800,B=L.height||t.height||600,q=E==="sigma"?Xf:af;return n.value=new q(e.value,{width:G,height:B,...t}),n.value.on("nodeHover",ee=>{s.value=ee}),n.value.on("nodeLeave",()=>{s.value=null}),R&&R.nodes.length>0?u(R.nodes,R.links):r.value=!1,Re.info("Renderer switched successfully",{renderer:E}),!0}return r.value=!1,!1}catch(R){return Re.error("Failed to switch renderer",{error:R.message,stack:R.stack}),o.value=R.message,r.value=!1,!1}};return Jt(async()=>{await Gi(),e.value&&d()}),Bi(()=>{$()}),{graphContainer:e,graphInstance:n,loading:r,error:o,nodeInfo:s,analysisProgress:a,currentRenderer:l,initGraph:d,loadData:u,destroyGraph:$,addNode:f,removeNode:p,addLink:m,getNodeIds:w,hasNode:_,analyzeGraph:x,applyLayout:k,getAvailableLayouts:v,detectCommunities:A,getAvailableCommunityAlgorithms:C,updateVisualEncoding:S,lockPositions:M,unlockPositions:I,saveAsPNG:D,getSelectedNode:O,switchRenderer:j}}const Ki={NAVIGATION:"navigation",DATA_MANAGEMENT:"data_management",ANALYSIS:"analysis",GRAPH_INTERACTION:"graph_interaction",FAMILY_TREE:"family_tree",SHOWCASE:"showcase"},Jc={SAMPLE_NETWORK_LOAD:"sample_network_load",FILE_UPLOAD:"file_upload",DATASET_SELECT:"dataset_select"},fi={LAYOUT_CHANGE:"layout_change",COMMUNITY_DETECTION:"community_detection",ANALYSIS_RUN:"analysis_run"},pD={RENDERER_SWITCH:"renderer_switch"},pt={RELATIVE_ADD:"relative_add",TREE_SAVE:"tree_save",TREE_EXPORT:"tree_export",TREE_RESET:"tree_reset",GRAPH_LOCK:"graph_lock",GRAPH_UNLOCK:"graph_unlock",RENDER_MODE_CHANGE:"render_mode_change",UNDO_ACTION:"undo_action",REDO_ACTION:"redo_action"},Ml={NODE_ADD:"showcase_node_add",NODE_REMOVE:"showcase_node_remove"},mD={home:"Home",showcase:"Showcase",explorer:"Network Explorer",degrees:"Degrees",family:"Family Tree",docs:"Documentation"},di=Et({prefix:"Analytics",level:"warn"});let tr=!1,gr=!1,Wr=null;const yD=()=>!0,vD=()=>{if(tr){di.warn("Analytics already initialized");return}if(Wr="G-Q54F1BV32E",!Wr){di.warn("GA Measurement ID not configured (VITE_GA_MEASUREMENT_ID)"),tr=!0,gr=!1;return}if(gr=yD(),!gr){di.info("Analytics disabled in development mode (set VITE_GA_DEBUG=true to enable)"),tr=!0;return}window.dataLayer=window.dataLayer||[],window.gtag=function(){window.dataLayer.push(arguments)},window.gtag("js",new Date),window.gtag("config",Wr,{send_page_view:!0,page_location:window.location.href,page_path:window.location.pathname,page_title:document.title});const t=document.createElement("script");t.async=!0,t.src=`https://www.googletagmanager.com/gtag/js?id=${Wr}`,document.head.appendChild(t),tr=!0,di.info("Google Analytics initialized",{measurementId:Wr})},ki=(t,e={})=>{if(!tr){di.warn("Analytics not initialized, call initializeAnalytics() first");return}if(gr)try{window.gtag("event",t,e)}catch(n){di.error("Failed to track event",{eventName:t,error:n.message})}},bD=(t,e)=>{if(!tr){di.warn("Analytics not initialized");return}if(gr)try{window.gtag("event","page_view",{page_path:t,page_title:e,page_location:window.location.href})}catch(n){di.error("Failed to track page view",{pagePath:t,error:n.message})}};function Va(){return{trackEvent:ki,trackPageView:bD,isEnabled:()=>gr,trackNavigation:(t,e={})=>{ki(t,{event_category:Ki.NAVIGATION,...e})},trackDataAction:(t,e={})=>{ki(t,{event_category:Ki.DATA_MANAGEMENT,...e})},trackAnalysis:(t,e={})=>{ki(t,{event_category:Ki.ANALYSIS,...e})},trackGraphInteraction:(t,e={})=>{ki(t,{event_category:Ki.GRAPH_INTERACTION,...e})},trackFamilyAction:(t,e={})=>{ki(t,{event_category:Ki.FAMILY_TREE,...e})},trackShowcaseAction:(t,e={})=>{ki(t,{event_category:Ki.SHOWCASE,...e})}}}class _D{constructor({graphManager:e,onStatusChange:n=null,translate:i=null}){this.graphManager=e,this.onStatusChange=n,this.translate=i||(r=>r),this.log=Et({prefix:"ShowcaseController",level:"info"}),this.datasets={default:{name:"Default",loader:()=>this._loadDefaultDataset()},karate:{name:"Karate Club",loader:()=>this._loadKarateDataset()},miserables:{name:"Les Misrables",loader:()=>this._loadMiserablesDataset()},kevinbacon:{name:"Kevin Bacon",loader:()=>this._loadKevinBaconDataset()}}}getInitialDataset(){return{nodes:[{id:"Alice",group:1},{id:"Bob",group:1},{id:"Charlie",group:2},{id:"David",group:2},{id:"Eve",group:3},{id:"Frank",group:3},{id:"Grace",group:1},{id:"Henry",group:2},{id:"Isabel",group:4},{id:"John",group:4},{id:"Kate",group:5},{id:"Luke",group:5},{id:"Mary",group:6},{id:"Nick",group:6},{id:"Oliver",group:7}],links:[{source:"Alice",target:"Bob"},{source:"Alice",target:"Charlie"},{source:"Bob",target:"Charlie"},{source:"Charlie",target:"David"},{source:"Eve",target:"Frank"},{source:"Eve",target:"Alice"},{source:"Grace",target:"Alice"},{source:"Henry",target:"Bob"},{source:"Henry",target:"Eve"},{source:"Isabel",target:"John"},{source:"Isabel",target:"Kate"},{source:"John",target:"Luke"},{source:"Kate",target:"Mary"},{source:"Luke",target:"Nick"},{source:"Mary",target:"Oliver"},{source:"Nick",target:"Oliver"},{source:"Oliver",target:"Alice"},{source:"Frank",target:"Mary"},{source:"David",target:"Isabel"},{source:"Grace",target:"Kate"}]}}async _loadDefaultDataset(){return this.getInitialDataset()}async _loadKarateDataset(){const e=await Yc.loadFromURL("/data/karateclub.json");return e.nodes=e.nodes.map(n=>({...n,group:n.club==="Mr. Hi"?1:2})),{nodes:e.nodes,links:e.edges}}async _loadMiserablesDataset(){const e=await So.loadFromURL("/data/les_miserables.csv");return e.nodes=e.nodes.map(n=>({...n,group:n.group||1})),{nodes:e.nodes,links:e.edges}}async _loadKevinBaconDataset(){const e=await So.loadFromURL("/data/kevin_bacon_edges.csv","/data/kevin_bacon_nodes.csv");return e.nodes=e.nodes.map(n=>({...n,group:n.category==="movie"?1:2})),{nodes:e.nodes,links:e.edges}}async loadDataset(e){const n=this.datasets[e];if(!n)return{success:!1,error:`Unknown dataset: ${e}`};try{this.log.debug("Loading dataset",{datasetKey:e,datasetName:n.name}),this._updateStatus("Loading dataset...","info");const i=await n.loader();this.graphManager.loadData(i.nodes,i.links),e==="kevinbacon"&&this.graphManager.updateVisualEncoding({colorBy:"category",colorScheme:"categorical"});const r=this.translate("showcase.messages.loadedDataset",{name:n.name,nodes:i.nodes.length,edges:i.links.length});return this.log.info("Dataset loaded successfully",{name:n.name,nodeCount:i.nodes.length,edgeCount:i.links.length}),this._updateStatus(r,"success"),{success:!0,data:i,name:n.name,nodeCount:i.nodes.length,edgeCount:i.links.length}}catch(i){const r=this.translate("showcase.messages.failedToLoadDataset",{error:i.message});return this.log.error("Failed to load dataset",{datasetKey:e,error:i.message,stack:i.stack}),this._updateStatus(r,"error"),{success:!1,error:i.message}}}addRandomNode(){if(!this.graphManager.graphInstance.value)return{success:!1,error:"Graph not initialized"};const e=this.graphManager.getNodeIds();if(e.length===0)return{success:!1,error:"No nodes available to connect to"};const n=e[Math.floor(Math.random()*e.length)],i=this.graphManager.addNode([n],null,null,!0);if(i){const r=this.translate("showcase.messages.addedNode",{nodeId:i.id,connectedTo:n});return this.log.debug("Added random node",{nodeId:i.id,connectedTo:n}),this._updateStatus(r,"success"),{success:!0,node:i,connectedTo:n}}return this.log.warn("Failed to add random node"),{success:!1,error:"Failed to add node"}}addNodeToSelected(){if(!this.graphManager.graphInstance.value)return{success:!1,error:"Graph not initialized"};const e=this.graphManager.getSelectedNode();if(!e){const r=this.translate("showcase.messages.noNodeSelected");return this.log.warn("No node selected"),this._updateStatus(r,"error"),{success:!1,error:"No node selected"}}const n=e.id,i=this.graphManager.addNode([n],null,null,!0);if(i){const r=this.translate("showcase.messages.addedNode",{nodeId:i.id,connectedTo:n});return this.log.debug("Added node connected to selected",{nodeId:i.id,targetNodeId:n}),this._updateStatus(r,"success"),{success:!0,node:i,connectedTo:n}}return this.log.warn("Failed to add node connected to selected",{targetNodeId:n}),{success:!1,error:"Failed to add node"}}removeRandomNode(){if(!this.graphManager.graphInstance.value)return{success:!1,error:"Graph not initialized"};const e=this.graphManager.getNodeIds();if(e.length===0){const r=this.translate("showcase.messages.noNodesToRemove");return this._updateStatus(r,"error"),{success:!1,error:"No nodes to remove"}}const n=e[Math.floor(Math.random()*e.length)];if(this.graphManager.removeNode(n,!0)){const r=this.translate("showcase.messages.removedNode",{nodeId:n});return this.log.debug("Removed random node",{nodeId:n}),this._updateStatus(r,"info"),{success:!0,removedNodeId:n}}return this.log.warn("Failed to remove random node"),{success:!1,error:"Failed to remove node"}}async analyzeGraph(e=["degree","eigenvector","betweenness"]){try{this.log.debug("Starting graph analysis",{metrics:e}),this._updateStatus("Analyzing network using workers...","info");const n=await this.graphManager.analyzeGraph(e);if(n){const i=this.translate("showcase.messages.analysisComplete",{count:n.nodes.length});return this.log.info("Graph analysis complete",{nodeCount:n.nodes.length,metrics:e}),this._updateStatus(i,"success"),{success:!0,results:n,nodeCount:n.nodes.length,metrics:e}}return this.log.warn("Analysis returned no results"),{success:!1,error:"Analysis returned no results"}}catch(n){const i=this.translate("showcase.messages.analysisFailed",{error:n.message});return this.log.error("Graph analysis failed",{error:n.message,stack:n.stack,metrics:e}),this._updateStatus(i,"error"),{success:!1,error:n.message}}}async applyLayout(e){if(e==="none"){const n=this.translate("showcase.messages.usingD3Physics");return this.log.debug("Using default D3 physics simulation"),this._updateStatus(n,"info"),this.graphManager.unlockPositions(),{success:!0,layoutId:"none",message:"Using default D3 physics simulation"}}try{if(this.log.debug("Applying layout algorithm",{layoutId:e}),this._updateStatus(`Applying ${e} layout...`,"info"),await this.graphManager.applyLayout(e)){const i=this.translate("showcase.messages.appliedLayout",{layout:e});return this.log.info("Layout applied successfully",{layoutId:e}),this._updateStatus(i,"success"),{success:!0,layoutId:e}}return this.log.warn("Layout application failed",{layoutId:e}),{success:!1,error:"Layout application failed"}}catch(n){const i=this.translate("showcase.messages.layoutFailed",{error:n.message});return this.log.error("Layout application failed",{layoutId:e,error:n.message,stack:n.stack}),this._updateStatus(i,"error"),{success:!1,error:n.message}}}getAvailableLayouts(){return this.graphManager.getAvailableLayouts()}_updateStatus(e,n){this.onStatusChange&&this.onStatusChange(e,n)}isGraphReady(){return this.graphManager.graphInstance.value!==null}getNodeCount(){return this.graphManager.getNodeIds().length}getAvailableCommunityAlgorithms(){return this.graphManager.getAvailableCommunityAlgorithms()}async detectCommunities(e){if(!this.isGraphReady())return this._updateStatus(this.translate("showcase.messages.graphNotInitialized"),"error"),null;if(this.getNodeCount()===0)return this._updateStatus(this.translate("showcase.messages.graphIsEmpty"),"error"),null;try{this._updateStatus(`Detecting communities using ${e}...`,"info");const i=await this.graphManager.detectCommunities(e);if(i){const r=this.translate("showcase.messages.foundCommunities",{count:i.numCommunities,modularity:i.modularity.toFixed(3)});return this._updateStatus(r,"success"),i}else return this._updateStatus(this.translate("showcase.messages.communityDetectionFailed"),"error"),null}catch(i){return this.log.error("Community detection failed",{algorithmId:e,error:i.message,stack:i.stack}),this._updateStatus(`Error: ${i.message}`,"error"),null}}getSelectedNode(){return this.graphManager.getSelectedNode()}}const wD={class:"demo-controls-header"},xD={class:"demo-controls-title"},kD={class:"demo-controls-description"},ED={class:"info-box-blue mb-4"},AD={class:"text-lg font-semibold text-blue-900 dark:text-blue-300 mb-2"},CD=["innerHTML"],SD={class:"sticky top-0 z-20 bg-white/98 dark:bg-gray-800/98 backdrop-blur-md border-b border-[var(--color-border)] pb-4 mb-4 -mx-6 px-6 pt-4 -mt-2 overflow-x-hidden"},TD={class:"demo-controls-section-title mb-3"},ND={class:"bg-[var(--color-bg-secondary)] rounded-md p-4 text-sm shadow-sm border border-[var(--color-border)]"},RD={key:0,class:"text-secondary text-center py-2"},LD={class:"text-xs"},ID={class:"text-xs mt-1 opacity-60"},PD={key:1,class:"space-y-2"},DD={class:"flex-shrink-0 mt-0.5"},MD={key:0},OD={key:1},GD={key:2},FD={class:"flex-1 break-words"},$D={class:"demo-controls-section border-t border-[var(--color-border)] pt-4"},zD={class:"demo-controls-section-title"},BD={class:"grid grid-cols-3 gap-2"},VD=["title"],UD=["disabled","title"],jD=["title"],HD={class:"demo-controls-section border-t border-[var(--color-border)] pt-4"},WD={class:"demo-controls-section-title"},qD={class:"space-y-2"},KD={class:"block text-sm font-medium text-secondary"},XD={value:"default"},ZD={value:"karate"},YD={value:"miserables"},JD={value:"kevinbacon"},QD=["disabled"],eM={key:0},tM={key:1},nM={class:"demo-controls-section border-t border-[var(--color-border)] pt-4"},iM={class:"demo-controls-section-title"},rM={class:"info-box-green mt-3"},oM=["innerHTML"],sM={class:"demo-controls-section border-t border-[var(--color-border)] pt-4"},aM={class:"demo-controls-section-title"},lM={class:"demo-controls-section border-t border-[var(--color-border)] pt-4"},cM={class:"demo-controls-section-title"},dM={key:0,class:"info-box-green mt-3"},uM={class:"text-sm text-green-800 dark:text-green-200 space-y-1"},hM={class:"text-xs mt-2"},fM={key:1,class:"info-box-yellow mt-3"},gM={class:"text-xs text-yellow-800 dark:text-yellow-200"},pM={class:"info-box-purple"},mM={class:"text-sm font-semibold text-purple-900 dark:text-purple-300 mb-2"},yM={class:"text-sm text-purple-800 dark:text-purple-200 space-y-1"},vM=["innerHTML"],bM=["innerHTML"],_M=["innerHTML"],wM=["innerHTML"],xM=["innerHTML"],kM=["innerHTML"],EM={key:0,class:"absolute inset-0 flex items-center justify-center bg-white/90 dark:bg-gray-900/90 backdrop-blur-md z-10"},AM={class:"text-center"},CM={class:"text-secondary"},SM={__name:"ShowcasePage",setup(t){const e=Et({prefix:"ShowcasePage",level:"info"}),{t:n}=fn(),{trackShowcaseAction:i,trackDataAction:r,trackAnalysis:o}=Va(),s=Ba(),{graphContainer:a,graphInstance:l,loading:c,loadData:d,addNode:u,removeNode:h,hasNode:f,getNodeIds:p,analysisProgress:m,analyzeGraph:w,applyLayout:_,getAvailableLayouts:x,detectCommunities:k,getAvailableCommunityAlgorithms:v,getSelectedNode:C,unlockPositions:A,updateVisualEncoding:S}=s,M=oe("default"),I=oe("none"),D=oe([]),O=oe("louvain"),$=oe([]),j=oe(null),E=oe(["degree","eigenvector","betweenness"]),R=oe(""),L=oe(""),G=oe("info"),B=oe("");let q=null;const ee=(z,ie)=>{L.value=z,G.value=ie},fe=()=>{const z={graphInstance:l,loadData:d,addNode:u,removeNode:h,hasNode:f,getNodeIds:p,analyzeGraph:w,applyLayout:_,getAvailableLayouts:x,detectCommunities:k,getAvailableCommunityAlgorithms:v,getSelectedNode:C,unlockPositions:A,updateVisualEncoding:S};q=new _D({graphManager:z,onStatusChange:ee,translate:(ce,N)=>n(ce,N)});const ie=q.getInitialDataset();B.value=n("showcase.messages.loadingGraph"),d(ie.nodes,ie.links),D.value=q.getAvailableLayouts(),$.value=q.getAvailableCommunityAlgorithms(),e.info("Initial data loaded",{layouts:D.value.length,communityAlgorithms:$.value.length,nodes:ie.nodes.length})},_e=()=>{q&&(i(Ml.NODE_ADD,{method:"random"}),q.addRandomNode())},ke=()=>{q&&(i(Ml.NODE_ADD,{method:"to_selected"}),q.addNodeToSelected())},V=()=>{q&&(i(Ml.NODE_REMOVE,{method:"random"}),q.removeRandomNode())},le=async()=>{if(q){r(Jc.DATASET_SELECT,{dataset:M.value});try{B.value=n("showcase.messages.loadingDataset").replace("{dataset}",M.value);const z=await q.loadDataset(M.value);z.success&&(B.value=n("showcase.messages.loadingDatasetName").replace("{name}",z.name))}catch(z){e.error("Failed to load dataset",{error:z.message,stack:z.stack}),c.value=!1}}},pe=async()=>{if(q){o(fi.ANALYSIS_RUN,{metrics:E.value.join(",")});try{B.value=n("showcase.messages.analyzing"),await q.analyzeGraph(E.value)}catch(z){e.error("Analysis error",{error:z.message,stack:z.stack})}}},U=async()=>{if(q){o(fi.LAYOUT_CHANGE,{layout:I.value});try{B.value=n("showcase.messages.applyingLayout").replace("{layout}",I.value),await q.applyLayout(I.value)}catch(z){e.error("Layout error",{error:z.message,stack:z.stack})}}},te=async()=>{if(q){o(fi.COMMUNITY_DETECTION,{algorithm:O.value});try{B.value=n("showcase.messages.detectingCommunities").replace("{algorithm}",O.value);const z=await q.detectCommunities(O.value);z&&(j.value=z)}catch(z){e.error("Community detection error",{error:z.message,stack:z.stack})}}};return dt(R,z=>{z&&l.value&&(e.debug("Size metric changed",{metric:z}),S({sizeBy:z,minRadius:5,maxRadius:20}))}),dt(l,z=>{z&&!q&&fe()},{immediate:!0}),(z,ie)=>(H(),Xn(ka,null,{controls:Ue(()=>[g("div",wD,[g("h1",xD,b(y(n)("showcase.header.title")),1),g("p",kD,b(y(n)("showcase.header.subtitle")),1)]),g("div",ED,[g("h2",AD,b(y(n)("showcase.whatIs.title")),1),g("p",{class:"text-sm text-blue-800 dark:text-blue-200",innerHTML:y(n)("showcase.whatIs.description")},null,8,CD)]),g("div",SD,[g("h2",TD,b(y(n)("showcase.status.title")),1),g("div",ND,[L.value?(H(),K("div",PD,[g("div",{class:Xe({"flex items-start space-x-2":!0,"text-green-600 dark:text-green-400":G.value==="success","text-red-600 dark:text-red-400":G.value==="error","text-blue-600 dark:text-blue-400":G.value==="info"})},[g("div",DD,[G.value==="success"?(H(),K("span",MD,"")):G.value==="error"?(H(),K("span",OD,"")):(H(),K("span",GD,""))]),g("div",FD,b(L.value),1)],2)])):(H(),K("div",RD,[g("div",LD,b(y(n)("showcase.status.ready")),1),g("div",ID,b(y(n)("showcase.status.hover")),1)]))])]),g("div",$D,[g("h2",zD,b(y(n)("showcase.controls.title")),1),g("div",BD,[g("button",{onClick:_e,class:"btn-primary text-sm px-2 py-2 whitespace-nowrap",title:y(n)("showcase.controls.addRandom")},"  "+b(y(n)("showcase.buttons.add")),9,VD),g("button",{onClick:ke,class:"btn-secondary text-sm px-2 py-2 whitespace-nowrap",disabled:!y(C)(),title:y(C)()?y(n)("showcase.controls.addToSelected").replace("{name}",y(C)().id):y(n)("showcase.controls.selectNodeFirst")},"  "+b(y(n)("showcase.buttons.toSelected")),9,UD),g("button",{onClick:V,class:"btn-primary bg-red-600 hover:bg-red-700 text-sm px-2 py-2 whitespace-nowrap",title:y(n)("showcase.controls.removeRandom")},"  "+b(y(n)("showcase.buttons.remove")),9,jD)])]),g("div",HD,[g("h2",WD,b(y(n)("showcase.dataLoading.title")),1),g("div",qD,[g("label",KD,b(y(n)("showcase.dataLoading.choose")),1),qt(g("select",{"onUpdate:modelValue":ie[0]||(ie[0]=ce=>M.value=ce),class:"w-full bg-secondary text-primary border border-color px-3 py-2 rounded-md"},[g("option",XD,b(y(n)("showcase.dataLoading.default")),1),g("option",ZD,b(y(n)("showcase.dataLoading.karate")),1),g("option",YD,b(y(n)("showcase.dataLoading.miserables")),1),g("option",JD,b(y(n)("showcase.dataLoading.kevinbacon")),1)],512),[[wp,M.value]])]),g("button",{onClick:le,disabled:y(c),class:"w-full btn-primary mt-3"},[y(c)?(H(),K("span",tM,b(y(n)("showcase.dataLoading.loading")),1)):(H(),K("span",eM,b(y(n)("showcase.dataLoading.loadButton")),1))],8,QD)]),g("div",nM,[g("h2",iM,b(y(n)("showcase.networkAnalysis.title")),1),we(Aa,{"selected-metrics":E.value,"onUpdate:selectedMetrics":ie[1]||(ie[1]=ce=>E.value=ce),"size-metric":R.value,"onUpdate:sizeMetric":ie[2]||(ie[2]=ce=>R.value=ce),analyzing:y(c),progress:y(m),onAnalyze:pe},null,8,["selected-metrics","size-metric","analyzing","progress"]),g("div",rM,[g("p",{class:"text-xs text-green-800 dark:text-green-200",innerHTML:y(n)("showcase.networkAnalysis.description")},null,8,oM)])]),g("div",sM,[g("h2",aM,b(y(n)("showcase.layoutAlgorithm.title")),1),we(Ea,{modelValue:I.value,"onUpdate:modelValue":ie[3]||(ie[3]=ce=>I.value=ce),"available-layouts":D.value,loading:y(c),onApply:U},null,8,["modelValue","available-layouts","loading"])]),g("div",lM,[g("h2",cM,b(y(n)("showcase.communityDetection.title")),1),we(Am,{modelValue:O.value,"onUpdate:modelValue":ie[4]||(ie[4]=ce=>O.value=ce),"available-algorithms":$.value,detecting:y(c),onDetect:te},{results:Ue(()=>[j.value?(H(),K("div",dM,[g("div",uM,[g("div",null,[g("strong",null,b(y(n)("showcase.communityDetection.communitiesFound")),1),Ce(" "+b(j.value.numCommunities),1)]),g("div",null,[g("strong",null,b(y(n)("showcase.communityDetection.modularity")),1),Ce(" "+b(j.value.modularity.toFixed(3)),1)]),g("div",hM,b(y(n)("showcase.communityDetection.nodeColorsAssignments")),1)])])):Me("",!0),$.value.length>0&&!j.value?(H(),K("div",fM,[g("p",gM,[g("strong",null,b($.value.find(ce=>ce.id===O.value)?.name)+":",1),Ce(" "+b($.value.find(ce=>ce.id===O.value)?.description),1)])])):Me("",!0)]),_:1},8,["modelValue","available-algorithms","detecting"])]),g("div",pM,[g("h3",mM,b(y(n)("showcase.instructions.title")),1),g("ul",yM,[g("li",{innerHTML:y(n)("showcase.instructions.dragNodes")},null,8,vM),g("li",{innerHTML:y(n)("showcase.instructions.scroll")},null,8,bM),g("li",{innerHTML:y(n)("showcase.instructions.dragBackground")},null,8,_M),g("li",{innerHTML:y(n)("showcase.instructions.hoverNodes")},null,8,wM),g("li",{innerHTML:y(n)("showcase.instructions.nodeSize")},null,8,xM),g("li",{innerHTML:y(n)("showcase.instructions.color")},null,8,kM)])])]),graph:Ue(()=>[y(c)?(H(),K("div",EM,[g("div",AM,[ie[5]||(ie[5]=g("div",{class:"inline-block animate-spin rounded-full h-12 w-12 border-4 border-purple-600 border-t-transparent mb-4"},null,-1)),g("p",CM,b(B.value),1)])])):Me("",!0),g("div",{ref_key:"graphContainer",ref:a,class:"w-full h-full"},null,512)]),_:1}))}};class TM{constructor({graphManager:e,onStatusChange:n=null,translate:i=null}){this.graphManager=e,this.onStatusChange=n,this.translate=i||(r=>r),this.log=Et({prefix:"ExplorerController",level:"info"}),this.sampleNetworks={caruaru:{name:"Caruaru",file:"/data/network_caruaru.json",description:"Small network (~130 edges)",type:"json"},rj:{name:"Rio de Janeiro",file:"/data/network_rj.json",description:"Medium network (~1,900 edges)",type:"json"},niteroi:{name:"Niteri",file:"/data/network_niteroi.json",description:"Large network (~18,500 edges)",type:"json"},karate:{name:"Karate Club",file:"/data/karateclub.json",description:"Classic social network (34 nodes, 78 edges)",type:"json"},miserables:{name:"Les Misrables",file:"/data/les_miserables.csv",description:"Character co-occurrence network (77 nodes, 254 edges)",type:"csv"},kevinbacon:{name:"Kevin Bacon",file:"/data/kevin_bacon_edges.csv",nodeFile:"/data/kevin_bacon_nodes.csv",description:"Kevin Bacon network (128 nodes, 128 edges)",type:"csv"}},this.workersSupported=typeof Worker<"u",this.workerCount=navigator.hardwareConcurrency||4}async loadSampleNetwork(e){const n=this.sampleNetworks[e];if(!n)return{success:!1,error:`Unknown network: ${e}`};try{this.log.debug("Loading sample network",{networkKey:e,networkName:n.name}),this._updateStatus(this.translate("explorer.messages.loadingNetworkData"),"info");let i;if(n.type==="csv"){const o=await So.loadFromURL(n.file,n.nodeFile||null);i={nodes:o.nodes.map(a=>({...a,group:a.group||(a.category==="movie"?1:a.category==="actor"?2:1)})),links:o.edges}}else if(e==="karate"){const o=await Yc.loadFromURL(n.file);i={nodes:o.nodes.map(a=>({...a,group:a.club==="Mr. Hi"?1:2})),links:o.edges}}else{const o=await fetch(n.file);if(!o.ok)throw new Error(`Failed to fetch: ${o.statusText}`);const s=await o.json(),a=new Set,l=[];s.forEach(d=>{a.add(d.source),a.add(d.target),l.push({source:String(d.source),target:String(d.target),weight:d.weight||1})}),i={nodes:Array.from(a).map(d=>({id:String(d),group:1})),links:l.map(d=>({source:d.source,target:d.target,weight:d.weight}))}}this.graphManager.loadData(i.nodes,i.links),e==="kevinbacon"&&this.graphManager.updateVisualEncoding({colorBy:"category",colorScheme:"categorical"});const r=this.translate("explorer.messages.loadedNetwork",{name:n.name,nodes:i.nodes.length,edges:i.links.length});return this.log.info("Sample network loaded successfully",{name:n.name,nodeCount:i.nodes.length,edgeCount:i.links.length}),this._updateStatus(r,"success"),{success:!0,data:i,name:n.name,nodeCount:i.nodes.length,edgeCount:i.links.length,description:n.description,useWorkers:i.nodes.length>=500&&this.workersSupported}}catch(i){const r=this.translate("explorer.messages.failedToLoadNetwork",{error:i.message});return this.log.error("Failed to load sample network",{networkKey:e,error:i.message,stack:i.stack}),this._updateStatus(r,"error"),{success:!1,error:i.message}}}async loadUploadedNetwork(e,n,i,r){try{this.log.debug("Loading uploaded network",{format:e}),this._updateStatus(this.translate("explorer.messages.loadingUploadedFile"),"info");let o;if(e==="csv"){if(!n)throw new Error("Edges CSV file is required");this.log.debug("Loading CSV files",{edgeFile:n.name,nodeFile:i?.name}),o=await So.loadFromFiles(n,i||null)}else if(e==="json"){if(!r)throw new Error("JSON file is required");this.log.debug("Loading JSON file",{fileName:r.name});const d=await r.text(),u=JSON.parse(d);if(Array.isArray(u)&&u.length>0&&u[0].source&&u[0].target){this.log.debug("Detected raw edge list array format");const h=new Set;u.forEach(f=>{h.add(f.source),h.add(f.target)}),o={nodes:Array.from(h).map(f=>({id:String(f),group:1})),edges:u.map(f=>({source:String(f.source),target:String(f.target),weight:f.weight||1}))}}else o=Yc.fromFormat(u)}else if(e==="networkx"){if(!r)throw new Error("NetworkX JSON file is required");this.log.debug("Loading NetworkX file",{fileName:r.name});const d=await r.text(),u=JSON.parse(d);o=hD.fromFormat(u)}else throw new Error(`Unknown format: ${e}`);this.log.info("Parsed graph data",{nodes:o.nodes.length,edges:o.edges.length});const s=o.nodes.map(d=>({...d,id:String(d.id),group:d.group||1})),a=o.edges.map(d=>({source:String(d.source),target:String(d.target),weight:d.weight||1}));this.graphManager.loadData(s,a);const l=r?.name||n?.name||"uploaded file",c=this.translate("explorer.messages.loadedFile",{fileName:l,nodes:s.length,edges:a.length});return this.log.info("Uploaded network loaded successfully",{fileName:l,nodeCount:s.length,edgeCount:a.length}),this._updateStatus(c,"success"),{success:!0,data:{nodes:s,links:a},name:l,nodeCount:s.length,edgeCount:a.length,description:`Uploaded ${e.toUpperCase()} file`,useWorkers:s.length>=500&&this.workersSupported}}catch(o){const s=this.translate("explorer.messages.failedToLoadFile",{error:o.message});return this.log.error("Failed to load uploaded network",{format:e,error:o.message,stack:o.stack}),this._updateStatus(s,"error"),{success:!1,error:o.message}}}async analyzeGraph(e=["degree","eigenvector"],n=null){try{this.log.debug("Starting graph analysis",{metrics:e,sizeMetric:n}),this._updateStatus(this.translate("explorer.messages.analyzingNetwork"),"info");const i=await this.graphManager.analyzeGraph(e,{includeGraphStats:!0,graphStats:["density","diameter","average_clustering","average_shortest_path","connected_components","average_degree"]});if(i){const r=i.nodes.length,o=i.links.length,s=(2*o/r).toFixed(2);n&&i.nodes.some(l=>l[n]!==void 0)&&this.graphManager.updateVisualEncoding({sizeBy:n,minRadius:5,maxRadius:20});const a=this.translate("explorer.messages.analysisComplete",{count:r});return this.log.info("Graph analysis complete",{nodeCount:r,metrics:e,hasGraphStats:!!i.graphStats}),this._updateStatus(a,"success"),{success:!0,results:i,nodeCount:r,linkCount:o,avgDegree:s,metrics:e,graphStats:i.graphStats||{average_degree:parseFloat(s)}}}return this.log.warn("Analysis returned no results"),{success:!1,error:"Analysis returned no results"}}catch(i){const r=this.translate("explorer.messages.analysisFailed",{error:i.message});return this.log.error("Graph analysis failed",{error:i.message,stack:i.stack,metrics:e}),this._updateStatus(r,"error"),{success:!1,error:i.message}}}async applyLayout(e){if(e==="none"){const n=this.translate("explorer.messages.usingD3Physics");return this.log.debug("Using default D3 physics simulation"),this._updateStatus(n,"info"),this.graphManager.unlockPositions(),{success:!0,layoutId:"none",message:"Using default D3 physics simulation"}}try{if(this.log.debug("Applying layout algorithm",{layoutId:e}),this._updateStatus(this.translate("explorer.messages.applyingLayout",{layout:e}),"info"),await this.graphManager.applyLayout(e)){const i=this.translate("explorer.messages.appliedLayout",{layout:e});return this.log.info("Layout applied successfully",{layoutId:e}),this._updateStatus(i,"success"),{success:!0,layoutId:e}}return this.log.warn("Layout application failed",{layoutId:e}),{success:!1,error:"Layout application failed"}}catch(n){const i=this.translate("explorer.messages.layoutFailed",{error:n.message});return this.log.error("Layout application failed",{layoutId:e,error:n.message,stack:n.stack}),this._updateStatus(i,"error"),{success:!1,error:n.message}}}async detectCommunities(e){if(!this.graphManager.graphInstance.value)return this._updateStatus(this.translate("explorer.messages.graphNotInitialized"),"error"),null;if(this.graphManager.getNodeIds().length===0)return this._updateStatus(this.translate("explorer.messages.graphIsEmpty"),"error"),null;try{this._updateStatus(this.translate("explorer.messages.detectingCommunities",{algorithm:e}),"info");const i=await this.graphManager.detectCommunities(e);if(i){const r=this.translate("explorer.messages.foundCommunities",{count:i.numCommunities,modularity:i.modularity.toFixed(3)});return this._updateStatus(r,"success"),i}else return this._updateStatus(this.translate("explorer.messages.communityDetectionFailed"),"error"),null}catch(i){return this.log.error("Community detection failed",{algorithmId:e,error:i.message,stack:i.stack}),this._updateStatus(this.translate("explorer.messages.analysisFailed",{error:i.message}),"error"),null}}getAvailableLayouts(){return this.graphManager.getAvailableLayouts()}getAvailableCommunityAlgorithms(){return this.graphManager.getAvailableCommunityAlgorithms()}getWorkerInfo(){return{supported:this.workersSupported,count:this.workerCount}}_updateStatus(e,n){this.onStatusChange&&this.onStatusChange(e,n)}}const NM={class:"demo-controls-header"},RM={class:"demo-controls-title"},LM={class:"demo-controls-description"},IM={class:"info-box-blue mb-4"},PM={class:"text-lg font-semibold text-blue-900 dark:text-blue-300 mb-2"},DM=["innerHTML"],MM={class:"flex items-center gap-2 text-xs"},OM={key:0},GM={key:1},FM={key:0,class:"badge badge-yellow"},$M={class:"demo-controls-section mb-4"},zM={class:"demo-controls-section-title"},BM={class:"flex gap-2 bg-gray-100 dark:bg-gray-800 p-1 rounded-lg"},VM=["disabled"],UM=["disabled"],jM={class:"text-xs text-secondary mt-2"},HM={class:"sticky top-0 z-20 bg-white/98 dark:bg-gray-800/98 backdrop-blur-md border-b border-[var(--color-border)] pb-4 mb-4 -mx-6 px-6 pt-4 -mt-2 shadow-sm"},WM={class:"demo-controls-section-title mb-3"},qM={class:"bg-[var(--color-bg-secondary)] rounded-md p-4 text-sm shadow-sm border border-[var(--color-border)]"},KM={key:0,class:"text-secondary text-center py-2"},XM={class:"text-xs"},ZM={class:"text-xs mt-1 opacity-60"},YM={key:1,class:"space-y-2"},JM={class:"flex-shrink-0 mt-0.5"},QM={key:0},eO={key:1},tO={key:2},nO={class:"flex-1 break-words"},iO={class:"demo-controls-section border-t border-[var(--color-border)] pt-4"},rO={class:"demo-controls-section-title"},oO={class:"flex gap-2 bg-gray-100 dark:bg-gray-800 p-1 rounded-lg mb-4"},sO={class:"space-y-2"},aO={class:"block text-sm font-medium text-secondary"},lO=["disabled"],cO={key:0},dO={key:1},uO={class:"space-y-3"},hO={class:"space-y-2"},fO={class:"block text-sm font-medium text-secondary"},gO={class:"space-y-2"},pO={class:"block text-sm font-medium text-secondary"},mO={class:"block text-sm font-medium text-secondary mt-2"},yO=["innerHTML"],vO={class:"space-y-2"},bO={class:"block text-sm font-medium text-secondary"},_O={key:0},wO={key:1},xO={key:0,class:"text-xs text-secondary bg-[var(--color-bg-secondary)] rounded p-2"},kO={key:1,class:"text-xs text-secondary bg-[var(--color-bg-secondary)] rounded p-2"},EO=["disabled"],AO={key:0},CO={key:1},SO={class:"demo-controls-section border-t border-[var(--color-border)] pt-4"},TO={class:"demo-controls-section-title"},NO={key:0,class:"demo-controls-section border-t border-[var(--color-border)] pt-4"},RO={class:"demo-controls-section-title"},LO={class:"metrics-grid-row mb-3"},IO={class:"metric-card"},PO={class:"text-xs text-secondary"},DO={class:"text-xl font-bold text-purple-600 dark:text-purple-400"},MO={class:"metric-card"},OO={class:"text-xs text-secondary"},GO={class:"text-xl font-bold text-pink-600 dark:text-pink-400"},FO={class:"metric-card"},$O={class:"text-xs text-secondary"},zO={class:"text-xl font-bold text-blue-600 dark:text-blue-400"},BO={class:"metric-card"},VO={class:"text-xs text-secondary"},UO={class:"text-xl font-bold text-green-600 dark:text-green-400"},jO={key:0,class:"metric-card"},HO={class:"text-xs text-secondary"},WO={class:"text-xl font-bold text-orange-600 dark:text-orange-400"},qO={key:1,class:"metric-card"},KO={class:"text-xs text-secondary"},XO={class:"text-xl font-bold text-cyan-600 dark:text-cyan-400"},ZO={key:2,class:"metric-card"},YO={class:"text-xs text-secondary"},JO={class:"text-xl font-bold text-indigo-600 dark:text-indigo-400"},QO={key:3,class:"metric-card"},eG={class:"text-xs text-secondary"},tG={class:"text-xl font-bold text-violet-600 dark:text-violet-400"},nG={key:4,class:"metric-card"},iG={class:"text-xs text-secondary"},rG={class:"text-xl font-bold text-fuchsia-600 dark:text-fuchsia-400"},oG={key:5,class:"metric-card"},sG={class:"text-xs text-secondary"},aG={class:"text-xl font-bold text-rose-600 dark:text-rose-400"},lG={key:6,class:"metric-card"},cG={class:"text-xs text-secondary"},dG={class:"text-xl font-bold text-sky-600 dark:text-sky-400"},uG={key:0,class:"info-box-green text-xs"},hG={class:"font-semibold text-green-800 dark:text-green-300"},fG={class:"text-green-700 dark:text-green-400"},gG={key:1,class:"info-box-yellow text-xs"},pG={class:"font-semibold text-yellow-800 dark:text-yellow-300"},mG={class:"text-yellow-700 dark:text-yellow-400"},yG={class:"demo-controls-section border-t border-[var(--color-border)] pt-4"},vG={class:"demo-controls-section-title"},bG={class:"info-box-yellow mt-3"},_G={class:"text-xs text-yellow-800 dark:text-yellow-200"},wG={key:0,class:"italic"},xG={class:"demo-controls-section border-t border-[var(--color-border)] pt-4"},kG={class:"demo-controls-section-title"},EG={key:1,class:"demo-controls-section border-t border-[var(--color-border)] pt-4"},AG={class:"bg-gradient-to-br from-orange-50 to-pink-50 dark:from-orange-900/30 dark:to-pink-900/30 rounded-lg p-4 border-2 border-orange-200 dark:border-orange-700"},CG={class:"text-sm font-semibold text-orange-900 dark:text-orange-300 mb-3 flex items-center gap-2"},SG={class:"space-y-2"},TG={class:"flex justify-between items-center"},NG={class:"text-sm text-orange-800 dark:text-orange-200"},RG={class:"text-lg font-bold text-orange-600 dark:text-orange-400"},LG={class:"flex justify-between items-center"},IG={class:"text-sm text-orange-800 dark:text-orange-200"},PG={class:"text-lg font-bold text-orange-600 dark:text-orange-400"},DG={class:"flex justify-between items-center"},MG={class:"text-sm text-orange-800 dark:text-orange-200"},OG={class:"text-sm font-semibold text-orange-600 dark:text-orange-400"},GG={class:"flex justify-between items-center"},FG={class:"text-sm text-orange-800 dark:text-orange-200"},$G={class:"text-sm font-semibold text-orange-600 dark:text-orange-400"},zG={class:"mt-3 pt-3 border-t border-orange-200 dark:border-orange-700"},BG={class:"text-xs text-orange-700 dark:text-orange-300"},VG={class:"info-box-purple"},UG={class:"text-sm font-semibold text-purple-900 dark:text-purple-300 mb-2"},jG={class:"text-sm text-purple-800 dark:text-purple-200 space-y-1"},HG=["innerHTML"],WG=["innerHTML"],qG=["innerHTML"],KG=["innerHTML"],XG=["innerHTML"],ZG=["innerHTML"],YG={key:0,class:"absolute inset-0 flex items-center justify-center bg-white/90 dark:bg-gray-900/90 backdrop-blur-md z-10"},JG={class:"text-center"},QG={class:"text-secondary"},e3={__name:"ExplorerPage",setup(t){const e=Et({prefix:"ExplorerPage",level:"info"}),{t:n}=fn(),{trackDataAction:i,trackAnalysis:r,trackGraphInteraction:o}=Va(),s=Ba(),{graphContainer:a,graphInstance:l,loading:c,loadData:d,analysisProgress:u,analyzeGraph:h,applyLayout:f,getAvailableLayouts:p,detectCommunities:m,getAvailableCommunityAlgorithms:w,updateVisualEncoding:_,getNodeIds:x,unlockPositions:k,currentRenderer:v,switchRenderer:C}=s,A=oe("sample"),S=oe(""),M=oe("json"),I=oe(null),D=oe(null),O=oe(null),$=oe("none"),j=oe([]),E=oe([]),R=oe(""),L=oe(!1),G=oe(!1),B=oe("louvain"),q=oe([]),ee=oe(!1),fe=oe(!1),_e=oe(!1),ke=oe(""),V=oe("info"),le=oe("Loading graph..."),pe=oe(null),U=oe("-"),te=oe(!1),z=oe(null),ie=oe(!1),ce=oe(!1),N=oe({nodes:0,edges:0,avgDegree:0,analysisTime:"-",communities:null,modularity:null}),P=oe({type:"default",message:"Select a network to begin...",details:null});let F=null;const W=oe({supported:typeof Worker<"u",count:navigator.hardwareConcurrency||4}),Y=Je(()=>M.value==="csv"?I.value!==null:O.value!==null),Z=(Q,ne)=>{ke.value=Q,V.value=ne},ae=(Q,ne,X=null)=>{P.value={type:Q,message:ne,details:X}},ge=()=>{const Q={graphInstance:l,loadData:d,analyzeGraph:h,applyLayout:f,getAvailableLayouts:p,detectCommunities:m,getAvailableCommunityAlgorithms:w,updateVisualEncoding:_,getNodeIds:x,unlockPositions:k};F=new TM({graphManager:Q,onStatusChange:Z,translate:(ne,X)=>n(ne,X)}),j.value=F.getAvailableLayouts(),q.value=F.getAvailableCommunityAlgorithms(),l.value&&(l.value.on("nodeHover",ne=>{ae("node-hover",`Node: ${ne.id}`,{id:ne.id,group:ne.group||1,community:te.value?ne.community:null,centrality:ne.centrality?.toFixed(4)||"N/A",degree:ne.degree||"N/A",betweenness:ne.betweenness?.toFixed(4),clustering:ne.clustering?.toFixed(3),eigenvector:ne.eigenvector?.toFixed(4),closeness:ne.closeness?.toFixed(4),egoDensity:ne["ego-density"]?.toFixed(3),cliques:ne.cliques})}),l.value.on("nodeLeave",()=>{ee.value?ae("default","Hover over a node to see details..."):ae("default","Select a network to begin...")})),ue()},ue=()=>{const Q={nodes:[{id:"Alice",group:1},{id:"Bob",group:1},{id:"Charlie",group:2},{id:"David",group:2},{id:"Eve",group:3},{id:"Frank",group:3},{id:"Grace",group:1},{id:"Henry",group:2},{id:"Isabel",group:4},{id:"John",group:4},{id:"Kate",group:5},{id:"Luke",group:5},{id:"Mary",group:6},{id:"Nick",group:6},{id:"Oliver",group:7}],links:[{source:"Alice",target:"Bob"},{source:"Alice",target:"Charlie"},{source:"Bob",target:"Charlie"},{source:"Charlie",target:"David"},{source:"Eve",target:"Frank"},{source:"Eve",target:"Alice"},{source:"Grace",target:"Alice"},{source:"Henry",target:"Bob"},{source:"Henry",target:"Eve"},{source:"Isabel",target:"John"},{source:"Isabel",target:"Kate"},{source:"John",target:"Luke"},{source:"Kate",target:"Mary"},{source:"Luke",target:"Nick"},{source:"Mary",target:"Oliver"},{source:"Nick",target:"Oliver"},{source:"Oliver",target:"Alice"},{source:"Frank",target:"Mary"},{source:"David",target:"Isabel"},{source:"Grace",target:"Kate"}]};d(Q.nodes,Q.links),ee.value=!0,E.value=[],R.value="",L.value=!1,G.value=!1,l.value&&typeof l.value.updateCliqueEdgeColors=="function"&&l.value.updateCliqueEdgeColors(!1),N.value={nodes:Q.nodes.length,edges:Q.links.length,avgDegree:(2*Q.links.length/Q.nodes.length).toFixed(2),analysisTime:"-",communities:null,modularity:null},ae("default","Default network loaded. Hover over a node to see details...")},se=async()=>{if(!(!F||!S.value)){i(Jc.SAMPLE_NETWORK_LOAD,{network:S.value});try{c.value=!0,le.value=`Loading ${S.value} network...`,ae("loading","Loading network data...");const Q=await F.loadSampleNetwork(S.value);Q.success?(ee.value=!0,ce.value=Q.useWorkers||!1,$.value="none",E.value=[],R.value="",L.value=!1,G.value=!1,l.value&&typeof l.value.updateCliqueEdgeColors=="function"&&l.value.updateCliqueEdgeColors(!1),N.value={nodes:Q.nodeCount,edges:Q.edgeCount,avgDegree:(2*Q.edgeCount/Q.nodeCount).toFixed(2),analysisTime:"-",communities:null,modularity:null},ae("success",`Loaded: ${Q.name}`,{nodes:Q.nodeCount,edges:Q.edgeCount,description:Q.description})):(c.value=!1,ae("error",`Failed to load network: ${Q.error||"Unknown error"}`))}catch(Q){e.error("Failed to load sample network",{error:Q.message,stack:Q.stack}),c.value=!1,ae("error",`Failed to load network: ${Q.message}`)}}},Ae=async()=>{if(!(!F||!Y.value)){i(Jc.FILE_UPLOAD,{format:M.value});try{c.value=!0,le.value="Loading uploaded file...",ae("loading","Loading uploaded file...");const Q=await F.loadUploadedNetwork(M.value,I.value,D.value,O.value);Q.success?(ee.value=!0,ce.value=Q.useWorkers||!1,$.value="none",E.value=[],R.value="",L.value=!1,G.value=!1,l.value&&typeof l.value.updateCliqueEdgeColors=="function"&&l.value.updateCliqueEdgeColors(!1),N.value={nodes:Q.nodeCount,edges:Q.edgeCount,avgDegree:(2*Q.edgeCount/Q.nodeCount).toFixed(2),analysisTime:"-",communities:null,modularity:null},ae("success",`Loaded: ${Q.name}`,{nodes:Q.nodeCount,edges:Q.edgeCount,description:Q.description})):(c.value=!1,ae("error",`Failed to load file: ${Q.error||"Unknown error"}`))}catch(Q){e.error("Failed to load uploaded network",{error:Q.message,stack:Q.stack}),c.value=!1,ae("error",`Failed to load file: ${Q.message}`)}}},ve=async()=>{if(!(!F||!ee.value)){r(fi.ANALYSIS_RUN,{metrics:E.value.join(",")});try{fe.value=!0,le.value="Analyzing network using workers...",ae("loading","Running network analysis...");const Q=performance.now(),ne=await F.analyzeGraph(E.value,R.value),X=performance.now()-Q;N.value.analysisTime=`${(X/1e3).toFixed(2)}s`,ne.success?(G.value=E.value.includes("cliques"),ne.graphStats&&(z.value=ne.graphStats,ie.value=!0),ae("success","Analysis complete",{nodes:ne.nodeCount,edges:ne.linkCount,time:N.value.analysisTime,metric:R.value||E.value[0]})):e.warn("Analysis completed but returned unsuccessful",{result:ne})}catch(Q){e.error("Analysis error",{error:Q.message,stack:Q.stack}),ae("error",`Analysis failed: ${Q.message}`)}finally{fe.value=!1}}},Ee=async()=>{if(!(!F||!ee.value)){r(fi.LAYOUT_CHANGE,{layout:$.value});try{le.value=`Applying ${$.value} layout...`,ke.value=`Applying ${$.value} layout...`,V.value="info";const Q=await F.applyLayout($.value);if(Q.success)ke.value=` Applied ${$.value} layout`,V.value="success",ae("layout-applied",`Layout Applied: ${$.value}`,{description:$.value==="none"?"Using D3's built-in force simulation":"Nodes fixed in position (D3 physics disabled)"});else{const ne=Q.error||"Layout application failed";ke.value=` ${ne}`,V.value="error",ae("error",`Layout failed: ${ne}`)}}catch(Q){e.error("Layout error",{error:Q.message,stack:Q.stack});const ne=Q.message||"Layout failed";ke.value=` ${ne}`,V.value="error",ae("error",`Layout failed: ${ne}`)}}},Te=async()=>{if(!(!F||!ee.value)){r(fi.COMMUNITY_DETECTION,{algorithm:B.value});try{_e.value=!0,le.value=`Detecting communities using ${B.value}...`,ae("loading","Detecting communities...");const Q=performance.now(),ne=await F.detectCommunities(B.value),X=performance.now()-Q;ne&&(pe.value=ne,U.value=`${(X/1e3).toFixed(2)}s`,te.value=!0,N.value.communities=ne.numCommunities,N.value.modularity=ne.modularity.toFixed(3),ae("default","Hover over a node to see details..."))}catch(Q){e.error("Community detection error",{error:Q.message,stack:Q.stack}),ae("error",`Community detection failed: ${Q.message}`)}finally{_e.value=!1}}},De=async Q=>{if(Q!==v.value){o(pD.RENDERER_SWITCH,{renderer:Q});try{le.value=`Switching to ${Q==="d3"?"D3.js (SVG)":"Sigma.js (WebGL)"} renderer...`,ke.value=le.value,V.value="info",await C(Q)?(ke.value=`Switched to ${Q==="d3"?"D3.js (SVG)":"Sigma.js (WebGL)"} renderer`,V.value="success",l.value&&(l.value.on("nodeHover",X=>{ae("node-hover",`Node: ${X.id}`,{id:X.id,group:X.group||1,community:te.value?X.community:null,centrality:X.centrality?.toFixed(4)||"N/A",degree:X.degree||"N/A",betweenness:X.betweenness?.toFixed(4),clustering:X.clustering?.toFixed(3),eigenvector:X.eigenvector?.toFixed(4),closeness:X.closeness?.toFixed(4),egoDensity:X["ego-density"]?.toFixed(3),cliques:X.cliques})}),l.value.on("nodeLeave",()=>{ee.value?ae("default","Hover over a node to see details..."):ae("default","Select a network to begin...")}),L.value&&G.value&&typeof l.value.updateCliqueEdgeColors=="function"&&setTimeout(()=>{l.value.updateCliqueEdgeColors(!0)},100),S.value==="kevinbacon"&&setTimeout(()=>{_({colorBy:"category",colorScheme:"categorical"})},100))):(ke.value="Failed to switch renderer",V.value="error")}catch(ne){e.error("Renderer switch error",{error:ne.message,stack:ne.stack}),ke.value=`Failed to switch renderer: ${ne.message}`,V.value="error"}}};return dt(L,Q=>{l.value&&G.value&&typeof l.value.updateCliqueEdgeColors=="function"&&l.value.updateCliqueEdgeColors(Q)}),dt(R,Q=>{Q&&l.value&&(e.debug("Size metric changed",{metric:Q}),_({sizeBy:Q,minRadius:5,maxRadius:20}))}),dt(l,(Q,ne)=>{Q&&!F&&ge(),Q&&L.value&&G.value&&typeof Q.updateCliqueEdgeColors=="function"&&setTimeout(()=>{Q.updateCliqueEdgeColors(!0)},100)},{immediate:!0}),(Q,ne)=>(H(),Xn(ka,null,{controls:Ue(()=>[g("div",NM,[g("h1",RM,b(y(n)("explorer.header.title")),1),g("p",LM,b(y(n)("explorer.header.subtitle")),1)]),g("div",IM,[g("h2",PM,b(y(n)("explorer.parallelComputation.title")),1),g("p",{class:"text-sm text-blue-800 dark:text-blue-200 mb-3",innerHTML:y(n)("explorer.parallelComputation.description")},null,8,DM),g("div",MM,[g("span",{class:Xe(W.value.supported?"badge badge-green":"badge badge-red")},[W.value.supported?(H(),K("span",OM,b(y(n)("explorer.parallelComputation.workersSupported")),1)):(H(),K("span",GM,b(y(n)("explorer.parallelComputation.workersNotSupported")),1))],2),W.value.supported?(H(),K("span",FM,b(W.value.count)+" "+b(y(n)("explorer.parallelComputation.cores")),1)):Me("",!0)])]),g("div",$M,[g("h2",zM,b(y(n)("explorer.renderer.title")),1),g("div",BM,[g("button",{onClick:ne[0]||(ne[0]=X=>De("d3")),disabled:y(c),class:Xe(["flex-1 px-3 py-2 rounded-md text-sm font-medium transition-colors",y(v)==="d3"?"bg-white dark:bg-gray-700 shadow text-purple-700 dark:text-purple-300":"hover:bg-gray-200 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300"])},b(y(n)("explorer.renderer.d3")),11,VM),g("button",{onClick:ne[1]||(ne[1]=X=>De("sigma")),disabled:y(c),class:Xe(["flex-1 px-3 py-2 rounded-md text-sm font-medium transition-colors",y(v)==="sigma"?"bg-white dark:bg-gray-700 shadow text-purple-700 dark:text-purple-300":"hover:bg-gray-200 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300"])},b(y(n)("explorer.renderer.sigma")),11,UM)]),g("p",jM,b(y(v)==="d3"?y(n)("explorer.renderer.d3Description"):y(n)("explorer.renderer.sigmaDescription")),1)]),g("div",HM,[g("h2",WM,b(y(n)("explorer.status.title")),1),g("div",qM,[ke.value?(H(),K("div",YM,[g("div",{class:Xe({"flex items-start space-x-2":!0,"text-green-600 dark:text-green-400":V.value==="success","text-red-600 dark:text-red-400":V.value==="error","text-blue-600 dark:text-blue-400":V.value==="info"})},[g("div",JM,[V.value==="success"?(H(),K("span",QM,"")):V.value==="error"?(H(),K("span",eO,"")):(H(),K("span",tO,""))]),g("div",nO,b(ke.value),1)],2)])):(H(),K("div",KM,[g("div",XM,b(y(n)("explorer.status.ready")),1),g("div",ZM,b(y(n)("explorer.status.loadNetwork")),1)]))])]),g("div",iO,[g("h2",rO,b(y(n)("explorer.dataLoading.title")),1),g("div",oO,[g("button",{onClick:ne[2]||(ne[2]=X=>A.value="sample"),class:Xe([A.value==="sample"?"bg-white dark:bg-gray-700 shadow":"hover:bg-gray-200 dark:hover:bg-gray-700","flex-1 px-3 py-2 rounded-md text-sm font-medium text-gray-700 dark:text-gray-300 transition-colors"])},b(y(n)("explorer.dataLoading.sampleNetworks")),3),g("button",{onClick:ne[3]||(ne[3]=X=>A.value="upload"),class:Xe([A.value==="upload"?"bg-white dark:bg-gray-700 shadow":"hover:bg-gray-200 dark:hover:bg-gray-700","flex-1 px-3 py-2 rounded-md text-sm font-medium text-gray-700 dark:text-gray-300 transition-colors"])},b(y(n)("explorer.dataLoading.uploadFile")),3)]),qt(g("div",sO,[g("label",aO,b(y(n)("explorer.dataLoading.chooseNetwork")),1),we(Fi,{modelValue:S.value,"onUpdate:modelValue":ne[4]||(ne[4]=X=>S.value=X),options:[{value:"karate",label:y(n)("explorer.dataLoading.karate")},{value:"miserables",label:y(n)("explorer.dataLoading.miserables")},{value:"kevinbacon",label:y(n)("explorer.dataLoading.kevinbacon")},{value:"caruaru",label:y(n)("explorer.dataLoading.caruaru")},{value:"rj",label:y(n)("explorer.dataLoading.rj")},{value:"niteroi",label:y(n)("explorer.dataLoading.niteroi")}],placeholder:y(n)("explorer.dataLoading.chooseCity")},null,8,["modelValue","options","placeholder"]),g("button",{onClick:se,disabled:!S.value||y(c),class:"w-full btn-primary mt-3"},[y(c)?(H(),K("span",dO,b(y(n)("explorer.dataLoading.loading")),1)):(H(),K("span",cO,b(y(n)("explorer.dataLoading.loadNetwork")),1))],8,lO)],512),[[Uo,A.value==="sample"]]),qt(g("div",uO,[g("div",hO,[g("label",fO,b(y(n)("explorer.dataLoading.fileFormat")),1),we(Fi,{modelValue:M.value,"onUpdate:modelValue":ne[5]||(ne[5]=X=>M.value=X),options:[{value:"json",label:y(n)("explorer.dataLoading.formatJSON")},{value:"csv",label:y(n)("explorer.dataLoading.formatCSV")},{value:"networkx",label:y(n)("explorer.dataLoading.formatNetworkX")}]},null,8,["modelValue","options"])]),qt(g("div",gO,[g("label",pO,b(y(n)("explorer.dataLoading.edgesCSV")),1),g("input",{type:"file",accept:".csv",onChange:ne[6]||(ne[6]=X=>I.value=X.target.files[0]),class:"w-full text-sm text-secondary file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-purple-50 file:text-purple-700 hover:file:bg-purple-100 dark:file:bg-purple-900/30 dark:file:text-purple-300"},null,32),g("label",mO,b(y(n)("explorer.dataLoading.nodesCSV")),1),g("input",{type:"file",accept:".csv",onChange:ne[7]||(ne[7]=X=>D.value=X.target.files[0]),class:"w-full text-sm text-secondary file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-purple-50 file:text-purple-700 hover:file:bg-purple-100 dark:file:bg-purple-900/30 dark:file:text-purple-300"},null,32),g("div",{class:"text-xs text-secondary bg-[var(--color-bg-secondary)] rounded p-2",innerHTML:y(n)("explorer.dataLoading.edgeCSVFormat")},null,8,yO)],512),[[Uo,M.value==="csv"]]),qt(g("div",vO,[g("label",bO,[M.value==="json"?(H(),K("span",_O,b(y(n)("explorer.dataLoading.jsonFile")),1)):(H(),K("span",wO,b(y(n)("explorer.dataLoading.networkxFile")),1))]),g("input",{type:"file",accept:".json",onChange:ne[8]||(ne[8]=X=>O.value=X.target.files[0]),class:"w-full text-sm text-secondary file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-purple-50 file:text-purple-700 hover:file:bg-purple-100 dark:file:bg-purple-900/30 dark:file:text-purple-300"},null,32),M.value==="json"?(H(),K("div",xO,b(y(n)("explorer.dataLoading.jsonSupports")),1)):(H(),K("div",kO,b(y(n)("explorer.dataLoading.networkxSupports")),1))],512),[[Uo,M.value==="json"||M.value==="networkx"]]),g("button",{onClick:Ae,disabled:!Y.value||y(c),class:"w-full bg-green-600 hover:bg-green-700 disabled:bg-gray-400 text-white px-4 py-3 rounded-md font-semibold transition-colors mt-3"},[y(c)?(H(),K("span",CO,b(y(n)("explorer.dataLoading.loading")),1)):(H(),K("span",AO,b(y(n)("explorer.dataLoading.loadUploadedFile")),1))],8,EO)],512),[[Uo,A.value==="upload"]])]),g("div",SO,[g("h2",TO,b(y(n)("explorer.networkAnalysis.title")),1),we(Aa,{"selected-metrics":E.value,"onUpdate:selectedMetrics":ne[9]||(ne[9]=X=>E.value=X),"size-metric":R.value,"onUpdate:sizeMetric":ne[10]||(ne[10]=X=>R.value=X),"show-clique-edges":L.value,"onUpdate:showCliqueEdges":ne[11]||(ne[11]=X=>L.value=X),analyzing:fe.value,disabled:!ee.value,progress:y(u),"show-spectral-metric":!0,"has-cliques":G.value,onAnalyze:ve},null,8,["selected-metrics","size-metric","show-clique-edges","analyzing","disabled","progress","has-cliques"])]),ee.value?(H(),K("div",NO,[g("h2",RO,b(y(n)("explorer.networkStats.title")),1),g("div",LO,[g("div",IO,[g("div",PO,b(y(n)("explorer.networkStats.nodes")),1),g("div",DO,b(N.value.nodes),1)]),g("div",MO,[g("div",OO,b(y(n)("explorer.networkStats.edges")),1),g("div",GO,b(N.value.edges),1)]),g("div",FO,[g("div",$O,b(y(n)("explorer.networkStats.avgDegree")),1),g("div",zO,b(N.value.avgDegree),1)]),g("div",BO,[g("div",VO,b(y(n)("explorer.networkStats.analysisTime")),1),g("div",UO,b(N.value.analysisTime),1)]),N.value.communities?(H(),K("div",jO,[g("div",HO,b(y(n)("explorer.networkStats.communities")),1),g("div",WO,b(N.value.communities),1)])):Me("",!0),N.value.modularity?(H(),K("div",qO,[g("div",KO,b(y(n)("explorer.networkStats.modularity")),1),g("div",XO,b(N.value.modularity),1)])):Me("",!0),z.value?.density!==void 0?(H(),K("div",ZO,[g("div",YO,b(y(n)("explorer.graphStats.density")),1),g("div",JO,b(z.value.density?.toFixed(4)||"-"),1)])):Me("",!0),z.value?.diameter!==void 0?(H(),K("div",QO,[g("div",eG,b(y(n)("explorer.graphStats.diameter")),1),g("div",tG,b(z.value.diameter===1/0?"":z.value.diameter||"-"),1)])):Me("",!0),z.value?.average_clustering!==void 0?(H(),K("div",nG,[g("div",iG,b(y(n)("explorer.graphStats.avgClustering")),1),g("div",rG,b(z.value.average_clustering?.toFixed(4)||"-"),1)])):Me("",!0),z.value?.average_shortest_path!==void 0?(H(),K("div",oG,[g("div",sG,b(y(n)("explorer.graphStats.avgPathLength")),1),g("div",aG,b(z.value.average_shortest_path===1/0?"":z.value.average_shortest_path?.toFixed(2)||"-"),1)])):Me("",!0),z.value?.connected_components!==void 0?(H(),K("div",lG,[g("div",cG,b(y(n)("explorer.graphStats.connectedComponents")),1),g("div",dG,b(z.value.connected_components?.count??"-"),1)])):Me("",!0)]),ce.value?(H(),K("div",uG,[g("span",hG,b(y(n)("explorer.networkStats.usingParallel")),1),g("span",fG," - "+b(W.value.count)+" "+b(y(n)("explorer.networkStats.workersActive")),1)])):Me("",!0),!ce.value&&ee.value?(H(),K("div",gG,[g("span",pG,b(y(n)("explorer.networkStats.singleThreaded")),1),g("span",mG," - "+b(y(n)("explorer.networkStats.networkTooSmall")),1)])):Me("",!0)])):Me("",!0),g("div",yG,[g("h2",vG,b(y(n)("explorer.layoutAlgorithm.title")),1),we(Ea,{modelValue:$.value,"onUpdate:modelValue":ne[12]||(ne[12]=X=>$.value=X),"available-layouts":j.value,loading:y(c),disabled:!ee.value,onApply:Ee},null,8,["modelValue","available-layouts","loading","disabled"]),g("div",bG,[g("p",_G,[(H(!0),K(qe,null,ln(j.value,X=>(H(),K("div",{key:X.id},[g("strong",null,b(X.name)+":",1),Ce(" "+b(X.description)+" ",1),X.requiresStats?(H(),K("span",wG," ("+b(y(n)("explorer.layoutAlgorithm.requiresAnalysis"))+")",1)):Me("",!0),ne[14]||(ne[14]=g("br",null,null,-1))]))),128))])])]),g("div",xG,[g("h2",kG,b(y(n)("explorer.communityDetection.title")),1),we(Am,{modelValue:B.value,"onUpdate:modelValue":ne[13]||(ne[13]=X=>B.value=X),"available-algorithms":q.value,detecting:_e.value,disabled:!ee.value,label:y(n)("explorer.communityDetection.algorithm"),onDetect:Te},null,8,["modelValue","available-algorithms","detecting","disabled","label"])]),te.value?(H(),K("div",EG,[g("div",AG,[g("h3",CG,b(y(n)("explorer.communityResults.title")),1),g("div",SG,[g("div",TG,[g("span",NG,b(y(n)("explorer.communityResults.communitiesFound")),1),g("span",RG,b(pe.value?.numCommunities||"-"),1)]),g("div",LG,[g("span",IG,b(y(n)("explorer.communityResults.modularityScore")),1),g("span",PG,b(pe.value?.modularity?.toFixed(3)||"-"),1)]),g("div",DG,[g("span",MG,b(y(n)("explorer.communityResults.computationTime")),1),g("span",OG,b(U.value||"-"),1)]),g("div",GG,[g("span",FG,b(y(n)("explorer.communityResults.algorithm")),1),g("span",$G,b(B.value),1)])]),g("div",zG,[g("p",BG,b(y(n)("explorer.communityResults.nodeColorsRepresent")),1)])])])):Me("",!0),g("div",VG,[g("h3",UG,b(y(n)("explorer.instructions.title")),1),g("ul",jG,[g("li",{innerHTML:y(n)("explorer.instructions.dragNodes")},null,8,HG),g("li",{innerHTML:y(n)("explorer.instructions.scroll")},null,8,WG),g("li",{innerHTML:y(n)("explorer.instructions.dragBackground")},null,8,qG),g("li",{innerHTML:y(n)("explorer.instructions.hoverNodes")},null,8,KG),g("li",{innerHTML:y(n)("explorer.instructions.nodeSize")},null,8,XG),g("li",{innerHTML:y(n)("explorer.instructions.color")},null,8,ZG)])])]),graph:Ue(()=>[y(c)?(H(),K("div",YG,[g("div",JG,[ne[15]||(ne[15]=g("div",{class:"inline-block animate-spin rounded-full h-12 w-12 border-4 border-purple-600 border-t-transparent mb-4"},null,-1)),g("p",QG,b(le.value),1)])])):Me("",!0),g("div",{ref_key:"graphContainer",ref:a,class:"w-full h-full"},null,512)]),_:1}))}},t3=Cn(e3,[["__scopeId","data-v-134f6a77"]]),n3=["aria-labelledby"],i3={class:"px-6 pt-6 pb-4 border-b border-gray-200 dark:border-gray-700"},r3=["id"],o3={class:"px-6 py-4"},s3={class:"space-y-4"},a3=["for"],l3={key:0,class:"text-red-500"},c3=["id","onUpdate:modelValue","required"],d3=["id","onUpdate:modelValue","required"],u3={value:"",disabled:""},h3=["value"],f3=["aria-labelledby"],g3=["name","value","onUpdate:modelValue","required"],p3={class:"text-2xl"},m3={class:"text-sm font-medium text-gray-700 dark:text-gray-300"},y3=["id","onUpdate:modelValue","placeholder","required"],v3={__name:"DialogForm",props:{visible:{type:Boolean,default:!1},title:{type:String,required:!0},fields:{type:Array,required:!0,default:()=>[]}},emits:["confirm","cancel"],setup(t,{emit:e}){const n=t,i=e,{t:r}=fn(),o=`dialog-${Math.random().toString(36).substr(2,9)}`,s=oe([]),a=()=>{s.value=n.fields.map(()=>"")},l=()=>{if(!n.fields.every((u,h)=>!(u.required&&!s.value[h]?.trim()))){alert("Please fill in all required fields");return}i("confirm",[...s.value])},c=()=>{a(),i("cancel")};return dt(()=>n.visible,d=>{d&&(a(),Gi(()=>{const u=document.querySelector("#field-0");u&&(u.focus(),u.tagName==="INPUT"&&u.select())}))}),Jt(()=>{a()}),(d,u)=>(H(),Xn(xb,{to:"body"},[t.visible?(H(),K("div",{key:0,class:"dialog-overlay fixed inset-0 z-[9999] flex items-center justify-center",style:{"z-index":"9999 !important",position:"fixed !important"},onClick:Qi(c,["self"])},[u[0]||(u[0]=g("div",{class:"absolute inset-0 bg-black/50 backdrop-blur-sm",style:{"z-index":"9998"}},null,-1)),g("div",{class:"dialog-content relative bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-lg w-full mx-4 max-h-[90vh] overflow-y-auto",style:{"z-index":"10000 !important",position:"relative !important"},role:"dialog","aria-modal":"true","aria-labelledby":`dialog-title-${o}`},[g("div",i3,[g("h3",{id:`dialog-title-${o}`,class:"text-lg font-semibold text-gray-900 dark:text-gray-100"},b(t.title),9,r3)]),g("div",o3,[g("div",s3,[(H(!0),K(qe,null,ln(t.fields,(h,f)=>(H(),K("div",{key:f,class:"space-y-2"},[g("label",{for:`field-${f}`,class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},[Ce(b(h.label)+" ",1),h.required?(H(),K("span",l3,"*")):Me("",!0)],8,a3),h.type==="text"||!h.type?qt((H(),K("input",{key:0,id:`field-${f}`,"onUpdate:modelValue":p=>s.value[f]=p,type:"text",required:h.required,class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent",onKeyup:[Bn(l,["enter"]),Bn(c,["esc"])]},null,40,c3)),[[Ql,s.value[f]]]):h.type==="select"?qt((H(),K("select",{key:1,id:`field-${f}`,"onUpdate:modelValue":p=>s.value[f]=p,required:h.required,class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent",onKeyup:Bn(c,["esc"])},[g("option",u3,b(y(r)("family.dialogs.selectOption")),1),(H(!0),K(qe,null,ln(h.options,p=>(H(),K("option",{key:p.value,value:p.value},b(p.text),9,h3))),128))],40,d3)),[[wp,s.value[f]]]):h.type==="radio"?(H(),K("div",{key:2,class:"flex flex-wrap gap-2",role:"radiogroup","aria-labelledby":`field-${f}-label`},[(H(!0),K(qe,null,ln(h.options,p=>(H(),K("label",{key:p.value,class:Xe(["flex items-center gap-2 cursor-pointer px-3 py-2 border-2 rounded-lg transition-all flex-1 min-w-[120px]",{"border-green-500 bg-green-50 dark:bg-green-900/20":s.value[f]===p.value,"border-gray-300 dark:border-gray-600 hover:border-green-300":s.value[f]!==p.value}])},[qt(g("input",{type:"radio",name:`field-${f}`,value:p.value,"onUpdate:modelValue":m=>s.value[f]=m,required:h.required,class:"text-green-600 focus:ring-green-500"},null,8,g3),[[ec,s.value[f]]]),g("span",p3,b(p.emoji),1),g("span",m3,b(p.text),1)],2))),128))],8,f3)):h.type==="emoji"?qt((H(),K("input",{key:3,id:`field-${f}`,"onUpdate:modelValue":p=>s.value[f]=p,type:"text",placeholder:h.placeholder||"Type an emoji ",required:h.required,maxlength:"10",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent text-2xl text-center",onKeyup:[Bn(l,["enter"]),Bn(c,["esc"])]},null,40,y3)),[[Ql,s.value[f]]]):Me("",!0)]))),128))])]),g("div",{class:"px-6 py-4 border-t border-gray-200 dark:border-gray-700 flex justify-end gap-3"},[g("button",{type:"button",onClick:c,class:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-md transition-colors"}," Cancel "),g("button",{type:"button",onClick:l,class:"px-4 py-2 text-sm font-medium text-white bg-green-600 hover:bg-green-700 rounded-md transition-colors"}," OK ")])],8,n3)])):Me("",!0)]))}},b3=Cn(v3,[["__scopeId","data-v-8db90550"]]),me={YOU:1,PARENT:2,SIBLING:3,UNCLE_AUNT:4,COUSIN:5,GRANDPARENT:6,NIECE_NEPHEW:7,CHILD:8,PARTNER:9},bt={MALE:"male",FEMALE:"female",OTHER:"other"},Ol={[bt.MALE]:"",[bt.FEMALE]:"",[bt.OTHER]:""},_3={[me.YOU]:"#6366f1",[me.PARENT]:"#ec4899",[me.SIBLING]:"#3b82f6",[me.UNCLE_AUNT]:"#f97316",[me.COUSIN]:"#a855f7",[me.GRANDPARENT]:"#b45309",[me.NIECE_NEPHEW]:"#06b6d4",[me.CHILD]:"#14b8a6",[me.PARTNER]:"#f43f5e"};function nr(t,e=null){const n=e===bt.FEMALE,i=e===bt.MALE||e===bt.OTHER;switch(t){case me.YOU:return"You";case me.PARENT:return n?"Mother":i?"Father":"Parent";case me.SIBLING:return n?"Sister":i?"Brother":"Sibling";case me.UNCLE_AUNT:return n?"Aunt":i?"Uncle":"Uncle/Aunt";case me.COUSIN:return"Cousin";case me.GRANDPARENT:return n?"Grandmother":i?"Grandfather":"Grandparent";case me.NIECE_NEPHEW:return n?"Niece":i?"Nephew":"Niece/Nephew";case me.CHILD:return n?"Daughter":i?"Son":"Child";case me.PARTNER:return n?"Wife":i?"Husband":"Partner/Spouse";default:return"Relative"}}const w3={nodes:[{id:"YOU",group:me.YOU,relationship:"You"}],links:[]},Gl="familyTree";function ig(t){return typeof t=="string"?t:t?.id||String(t)}class x3{constructor(e,n=i=>i){this.getGraphInstance=e,this.t=n}canAddParents(){const e=this.getGraphInstance();if(!e?.data)return{canAdd:!1,existingCount:0,message:"Graph not initialized"};const n=e.data.nodes.filter(i=>i.group===me.PARENT);return n.length>=2?{canAdd:!1,existingCount:n.length,message:this.t("family.operations.validation.maxParents")}:{canAdd:!0,existingCount:n.length,remainingSlots:2-n.length}}canAddGrandparents(e){const n=this.getGraphInstance();if(!n?.data)return{canAdd:!1,existingCount:0,message:"Graph not initialized"};const r=n.data.links.filter(o=>ig(o.target)===e).map(o=>{const s=ig(o.source);return n.data.nodes.find(a=>a.id===s)}).filter(o=>o&&o.group===me.GRANDPARENT);return r.length>=2?{canAdd:!1,existingCount:r.length,message:`${e} already has 2 grandparents. Cannot add more.`}:{canAdd:!0,existingCount:r.length,remainingSlots:2-r.length}}hasPartner(e){const n=this.getGraphInstance();return n?.data?n.data.nodes.filter(r=>r.group===me.PARTNER&&r.partnerOf===e).length>0:!1}getEligibleParents(){const e=this.getGraphInstance();return e?.data?e.data.nodes.filter(n=>{const i=n.group;return i!==me.GRANDPARENT&&i!==me.UNCLE_AUNT&&i!==me.PARENT}):[]}getEligibleForPartner(){const e=this.getGraphInstance();return e?.data?e.data.nodes.filter(n=>{const i=n.group;return(i===me.YOU||i===me.SIBLING||i===me.COUSIN||i===me.UNCLE_AUNT||i===me.NIECE_NEPHEW||i===me.CHILD)&&!this.hasPartner(n.id)}):[]}}function Qe(t){return typeof t=="string"?t:t?.id||String(t)}class k3{constructor(e,n,i,r){this.graphManager=e,this.getGraphInstance=n,this.validation=i,this.saveFamily=r}addNodeWithRelationship(e,n,i,r=null,o=null,s=null){const a=s||nr(i,r),l=this.getGraphInstance(),c=this.graphManager.addNode(e,n,i,!0);if(c&&typeof c.then=="function")return c.then(u=>(this._setNodeProperties(u,a,r,o,l),u));const d=c;return this._setNodeProperties(d,a,r,o,l),d}_setNodeProperties(e,n,i,r,o){this._setNodeProperty(e,"relationship",n,o),i&&this._setNodeProperty(e,"gender",i,o),r&&this._setNodeProperty(e,"avatar",r,o),requestAnimationFrame(()=>{if(o?.data){const s=o.data.nodes.find(a=>a.id===e.id);s&&(s.relationship||(s.relationship=n),i&&!s.gender&&(s.gender=i),r&&!s.avatar&&(s.avatar=r),r&&o.options?.renderMode==="avatars"&&this._updateNodeAvatarElement(e.id,r,o))}})}_updateNodeAvatarElement(e,n,i){i?.nodeGroup&&i.nodeGroup.selectAll("text").filter(r=>r.id===e).text(n)}_setNodeProperty(e,n,i,r){if(e&&(e[n]=i,r?.data)){let o=r.data.nodes.find(s=>s.id===e.id);o?(o[n]=i,o!==e&&(e[n]=i)):requestAnimationFrame(()=>{if(r?.data){const s=r.data.nodes.find(a=>a.id===e.id);s&&(s[n]=i)}})}}_setRelationshipOnNode(e,n,i){this._setNodeProperty(e,"relationship",n,i),requestAnimationFrame(()=>{if(i?.data){const r=i.data.nodes.find(o=>o.id===e.id);r&&!r.relationship&&(r.relationship=n)}})}addParents(e,n,i=null,r=null){const o=this.validation.canAddParents();if(!o.canAdd)return{success:!1,message:o.message};if(!e?.trim()&&!n?.trim())return{success:!1,message:"At least one parent name is required"};const s=o.remainingSlots;if(!this.getGraphInstance())return{success:!1,message:"Graph not initialized"};let l=null;e?.trim()&&s>=1&&(l=this.addNodeWithRelationship(["YOU"],e.trim(),me.PARENT,bt.FEMALE,i?.trim()||null)?.id||e.trim());let c=null;const d=l?s>=2:s>=1;if(n?.trim()&&d)c=this.addNodeWithRelationship(["YOU"],n.trim(),me.PARENT,bt.MALE,r?.trim()||null)?.id||n.trim();else if(n?.trim()&&!d)return{success:!0,message:"Only one parent slot available. Added only the mother."};return l&&c&&this.graphManager.addLink?requestAnimationFrame(()=>{this.graphManager.addLink(l,c)&&this.saveFamily()}):this.saveFamily(),{success:!0}}addSibling(e,n,i=null){if(!e?.trim())return{success:!1,message:"Sibling name is required"};if(!n)return{success:!1,message:"Gender is required"};const r=this.getGraphInstance();if(!r?.data)return{success:!1,message:"Graph not initialized"};const s=r.data.links.filter(u=>{const h=Qe(u.source),f=Qe(u.target);return h==="YOU"||f==="YOU"}).map(u=>{const h=Qe(u.source),f=Qe(u.target);return h==="YOU"?f:h}).map(u=>{const h=r.data.nodes.find(f=>f.id===u);return h&&h.group===me.PARENT?u:null}).filter(u=>u!==null),a=r.data.nodes.filter(u=>u.group===me.SIBLING||u.id==="YOU").map(u=>u.id),l=[];s.length>0?l.push(...s):l.push("YOU"),a.forEach(u=>{l.includes(u)||l.push(u)});const c=this.addNodeWithRelationship(l,e.trim(),me.SIBLING,n,i?.trim()||null);if(!c)return{success:!1,message:"Failed to add sibling"};const d=c.id||e.trim();return this.graphManager.addLink&&a.forEach(u=>{u!==d&&requestAnimationFrame(()=>{this.graphManager.addLink(d,u,!0)})}),this.saveFamily(),{success:!0}}addGrandparents(e,n,i,r=null,o=null){if(!this.graphManager?.hasNode||!this.graphManager.hasNode(e))return{success:!1,message:"Parent not found"};const s=this.validation.canAddGrandparents(e);if(!s.canAdd)return{success:!1,message:s.message};if(!n?.trim()&&!i?.trim())return{success:!1,message:"At least one grandparent name is required"};const a=s.remainingSlots;if(!this.getGraphInstance())return{success:!1,message:"Graph not initialized"};let c=null;n?.trim()&&a>=1&&(c=this.addNodeWithRelationship([e],n.trim(),me.GRANDPARENT,bt.FEMALE,r?.trim()||null)?.id||n.trim());let d=null;const u=c?a>=2:a>=1;if(i?.trim()&&u)d=this.addNodeWithRelationship([e],i.trim(),me.GRANDPARENT,bt.MALE,o?.trim()||null)?.id||i.trim();else if(i?.trim()&&!u)return{success:!0,message:"Only one grandparent slot available for this parent. Added only the grandmother."};return c&&d&&this.graphManager.addLink?requestAnimationFrame(()=>{this.graphManager.addLink(c,d)&&this.saveFamily()}):this.saveFamily(),{success:!0}}addUncleAunt(e,n,i,r=null){if(!this.graphManager?.hasNode||!this.graphManager.hasNode(e))return{success:!1,message:"Parent not found"};if(!n?.trim())return{success:!1,message:"Uncle/aunt name is required"};if(!i)return{success:!1,message:"Gender is required"};const o=this.getGraphInstance();if(!o?.data)return{success:!1,message:"Graph not initialized"};const s=o.data.links,a=s.filter(f=>(Qe(f.source),Qe(f.target)===e)).map(f=>{const p=Qe(f.source);return o.data.nodes.find(m=>m.id===p)}).filter(f=>f&&f.group===me.GRANDPARENT).map(f=>f.id),l=[];if(a.length>0){const f=s.filter(p=>{const m=Qe(p.source);return a.includes(m)}).map(p=>{const m=Qe(p.target);return o.data.nodes.find(w=>w.id===m)}).filter(p=>p&&(p.group===me.PARENT||p.group===me.UNCLE_AUNT)).map(p=>p.id);l.push(...f)}else l.push(e);const c=[...new Set(l)],d=[...a,...c],u=this.addNodeWithRelationship(d,n.trim(),me.UNCLE_AUNT,i,r?.trim()||null);if(!u)return{success:!1,message:"Failed to add uncle/aunt"};const h=u.id||n.trim();return this.graphManager.addLink&&c.forEach(f=>{f!==h&&requestAnimationFrame(()=>{this.graphManager.addLink(h,f,!0)})}),this.saveFamily(),{success:!0}}addCousin(e,n,i,r=null){if(!this.graphManager?.hasNode||!this.graphManager.hasNode(e))return{success:!1,message:"Uncle/aunt not found"};if(!i)return{success:!1,message:"Gender is required"};if(!n?.trim())return{success:!1,message:"Cousin name is required"};const o=this.getGraphInstance();if(!o?.data)return{success:!1,message:"Graph not initialized"};const s=o.data.nodes.find(h=>h.group===me.PARTNER&&h.partnerOf===e),a=o.data.links,l=o.data.nodes.filter(h=>{if(h.group!==me.COUSIN)return!1;const f=a.some(p=>{const m=Qe(p.source),w=Qe(p.target);return m===h.id&&w===e||w===h.id&&m===e});if(s){const p=a.some(m=>{const w=Qe(m.source),_=Qe(m.target);return w===h.id&&_===s.id||_===h.id&&w===s.id});return f||p}return f}).map(h=>h.id),c=[e];s&&c.push(s.id),l.forEach(h=>{c.includes(h)||c.push(h)});const d=this.addNodeWithRelationship(c,n.trim(),me.COUSIN,i,r?.trim()||null);if(!d)return{success:!1,message:"Failed to add cousin"};const u=d.id||n.trim();return this.graphManager.addLink&&l.forEach(h=>{h!==u&&requestAnimationFrame(()=>{this.graphManager.addLink(u,h,!0)})}),this.saveFamily(),{success:!0}}addChild(e,n,i,r=null){if(!this.graphManager?.hasNode||!this.graphManager.hasNode(e))return{success:!1,message:"Parent not found"};if(!n?.trim())return{success:!1,message:"Child name is required"};if(!i)return{success:!1,message:"Gender is required"};const o=this.getGraphInstance();if(!o?.data)return{success:!1,message:"Graph not initialized"};const s=o.data.nodes.find(p=>p.id===e);if(!s)return{success:!1,message:"Parent not found"};let a=me.CHILD;s.group===me.YOU||s.group===me.PARTNER?a=me.CHILD:s.group===me.SIBLING?a=me.NIECE_NEPHEW:a=me.CHILD;const l=o.data.nodes.find(p=>p.group===me.PARTNER&&p.partnerOf===e),c=o.data.links,d=o.data.nodes.filter(p=>{if(p.group!==a)return!1;const m=c.some(w=>{const _=Qe(w.source),x=Qe(w.target);return _===p.id&&x===e||x===p.id&&_===e});if(l){const w=c.some(_=>{const x=Qe(_.source),k=Qe(_.target);return x===p.id&&k===l.id||k===p.id&&x===l.id});return m||w}return m}).map(p=>p.id),u=[e];l&&u.push(l.id),d.forEach(p=>{u.includes(p)||u.push(p)});const h=this.addNodeWithRelationship(u,n.trim(),a,i,r?.trim()||null);if(!h)return{success:!1,message:"Failed to add child"};const f=h.id||n.trim();return this.graphManager.addLink&&d.forEach(p=>{p!==f&&requestAnimationFrame(()=>{this.graphManager.addLink(f,p,!0)})}),this.saveFamily(),{success:!0}}addNieceNephew(e,n,i,r=null){if(!this.graphManager?.hasNode||!this.graphManager.hasNode(e))return{success:!1,message:"Sibling not found"};if(!n?.trim())return{success:!1,message:"Niece/nephew name is required"};if(!i)return{success:!1,message:"Gender is required"};const o=this.getGraphInstance();if(!o?.data)return{success:!1,message:"Graph not initialized"};const s=o.data.nodes.find(h=>h.group===me.PARTNER&&h.partnerOf===e),a=o.data.links,l=o.data.nodes.filter(h=>{if(h.group!==me.NIECE_NEPHEW)return!1;const f=a.some(p=>{const m=Qe(p.source),w=Qe(p.target);return m===h.id&&w===e||w===h.id&&m===e});if(s){const p=a.some(m=>{const w=Qe(m.source),_=Qe(m.target);return w===h.id&&_===s.id||_===h.id&&w===s.id});return f||p}return f}).map(h=>h.id),c=[e];s&&c.push(s.id),l.forEach(h=>{c.includes(h)||c.push(h)});const d=this.addNodeWithRelationship(c,n.trim(),me.NIECE_NEPHEW,i,r?.trim()||null);if(!d)return{success:!1,message:"Failed to add niece/nephew"};const u=d.id||n.trim();return this.graphManager.addLink&&l.forEach(h=>{h!==u&&requestAnimationFrame(()=>{this.graphManager.addLink(u,h,!0)})}),this.saveFamily(),{success:!0}}addPartner(e,n,i,r=null){if(!this.graphManager?.hasNode||!this.graphManager.hasNode(e))return{success:!1,message:"Person not found"};if(!n?.trim())return{success:!1,message:"Partner name is required"};if(!i)return{success:!1,message:"Gender is required"};if(this.validation.hasPartner(e))return{success:!1,message:`${e} already has a partner!`};const o=this.getGraphInstance();let s=null;if(o?.data){const c=o.data.nodes.find(d=>d.id===e);if(c){const d=c.relationship||nr(c.group);d==="You"?s="Your Partner/Spouse":s=`${d}'s Partner`}}const a=this.addNodeWithRelationship([e],n.trim(),me.PARTNER,i,r?.trim()||null,s),l=c=>{this._setNodeProperty(c,"partnerOf",e,o),requestAnimationFrame(()=>{if(o?.data){const d=o.data.nodes.find(u=>u.id===c.id);d&&(d.partnerOf=e)}this.saveFamily()})};return a&&typeof a.then=="function"?a.then(c=>{l(c)}):l(a),{success:!0}}}function Pn(t){return typeof t=="string"?t:t?.id||String(t)}class E3{constructor(e,n,i,r=o=>o){this.getGraphInstance=e,this.onStatusChange=n,this.log=i,this.t=r,this.autoSaveInterval=null,this.autoSaveIntervalMs=3e4}getInitialDataset(){return{...w3}}loadFamily(){try{const e=localStorage.getItem(Gl);if(e){const n=JSON.parse(e);return n.links&&Array.isArray(n.links)&&(n.links=n.links.map(i=>({...i,source:Pn(i.source),target:Pn(i.target)}))),n.nodes&&Array.isArray(n.nodes)&&(n.nodes=n.nodes.filter(i=>i&&i.id),n.nodes.forEach(i=>{if(!i.relationship&&i.group!==void 0)if(i.group===me.PARTNER){const o=(n.links||[]).filter(s=>{const a=Pn(s.source),l=Pn(s.target);return a===i.id||l===i.id});if(o.length>0){const s=o[0],a=Pn(s.source)===i.id?Pn(s.target):Pn(s.source),l=n.nodes.find(c=>c.id===a);if(l){const c=l.relationship||nr(l.group);c==="You"?i.relationship="Your Partner/Spouse":i.relationship=`${c}'s Partner`}else i.relationship=nr(i.group)}else i.relationship=nr(i.group)}else i.relationship=nr(i.group)})),this.log.debug("Loaded family tree from storage",{nodeCount:n.nodes?.length||0,linkCount:n.links?.length||0}),n}}catch(e){this.log.error("Failed to load family tree",{error:e.message})}return null}saveFamily(){const e=this.getGraphInstance();if(!e?.data){this.log.warn("Cannot save - graph not initialized");return}try{const n=e.data.links.map(o=>({source:Pn(o.source),target:Pn(o.target)})),r={nodes:e.data.nodes.map(o=>{const{id:s,group:a,relationship:l,...c}=o,d={id:s,group:a};return l!==void 0&&(d.relationship=l),c.gender!==void 0&&(d.gender=c.gender),c.avatar!==void 0&&(d.avatar=c.avatar),c.partnerOf!==void 0&&(d.partnerOf=c.partnerOf),c.centrality!==void 0&&(d.centrality=c.centrality),c.community!==void 0&&(d.community=c.community),c.degree!==void 0&&(d.degree=c.degree),c.eigenvector!==void 0&&(d.eigenvector=c.eigenvector),c.betweenness!==void 0&&(d.betweenness=c.betweenness),d}),links:n};localStorage.setItem(Gl,JSON.stringify(r)),this.log.debug("Family tree saved",{nodeCount:r.nodes.length,linkCount:r.links.length}),this.showStatus(this.t("family.storage.saved"),"success")}catch(n){this.log.error("Failed to save family tree",{error:n.message}),this.showStatus(this.t("family.storage.error"),"error")}}resetFamily(e,n){const i=!!this.autoSaveInterval;i&&this.stopAutoSave(),localStorage.removeItem(Gl);const r=this.getInitialDataset(),o=n.value||n;if(o){const s=()=>{o.off("ready",s),i&&this.startAutoSave(),this.saveFamily()};o.on("ready",s)}e(r.nodes,r.links),this.log.info("Family tree reset"),this.showStatus(this.t("family.storage.reset"),"success")}startAutoSave(){this.autoSaveInterval||(this.autoSaveInterval=setInterval(()=>{document.visibilityState==="visible"&&this.saveFamily()},this.autoSaveIntervalMs),this.log.debug("Auto-save started",{intervalMs:this.autoSaveIntervalMs}))}stopAutoSave(){this.autoSaveInterval&&(clearInterval(this.autoSaveInterval),this.autoSaveInterval=null,this.log.debug("Auto-save stopped"))}showStatus(e,n="info"){this.onStatusChange&&this.onStatusChange(e,n)}}function Xi(t){return[{value:bt.MALE,emoji:Ol[bt.MALE],text:t("family.dialogs.genderOptions.male")},{value:bt.FEMALE,emoji:Ol[bt.FEMALE],text:t("family.dialogs.genderOptions.female")},{value:bt.OTHER,emoji:Ol[bt.OTHER],text:t("family.dialogs.genderOptions.other")}]}const Oe={ADD_PARENTS:"addParents",ADD_SIBLING:"addSibling",ADD_GRANDPARENTS:"addGrandparents",ADD_UNCLE_AUNT:"addUncleAunt",ADD_COUSIN:"addCousin",ADD_CHILD:"addChild",ADD_NIECE_NEPHEW:"addNieceNephew",ADD_PARTNER:"addPartner"};class Nv{constructor(e,n,i=r=>r){this.getGraphInstance=e,this.validation=n,this.t=i}getAddParentsDialog(){const e=this.validation.canAddParents();return e&&!e.canAdd?null:{title:this.t("family.dialogs.addParents"),fields:[{label:this.t("family.dialogs.fields.motherName"),type:"text",required:!1},{label:this.t("family.dialogs.fields.motherAvatar"),type:"emoji",required:!1,placeholder:this.t("family.dialogs.placeholders.mother")},{label:this.t("family.dialogs.fields.fatherName"),type:"text",required:!1},{label:this.t("family.dialogs.fields.fatherAvatar"),type:"emoji",required:!1,placeholder:this.t("family.dialogs.placeholders.father")}],action:Oe.ADD_PARENTS}}getAddSiblingDialog(){return{title:this.t("family.dialogs.addSibling"),fields:[{label:this.t("family.dialogs.fields.siblingName"),type:"text",required:!0},{label:this.t("family.dialogs.fields.gender"),type:"radio",options:Xi(this.t),required:!0},{label:this.t("family.dialogs.fields.avatar"),type:"emoji",required:!1,placeholder:this.t("family.dialogs.placeholders.avatar")}],action:Oe.ADD_SIBLING}}getAddGrandparentsDialog(){const e=this.getGraphInstance();if(!e?.data)return null;const n=e.data.nodes.filter(r=>r.group===me.PARENT);if(n.length===0)return null;const i=n.map(r=>({value:r.id,text:this.t("family.dropdownOptions.parentSideTemplate").replace("{name}",r.id)}));return{title:this.t("family.dialogs.addGrandparents"),fields:[{label:this.t("family.dialogs.fields.parentsSide"),type:"select",options:i,required:!0},{label:this.t("family.dialogs.fields.grandmotherName"),type:"text",required:!1},{label:this.t("family.dialogs.fields.grandmotherAvatar"),type:"emoji",required:!1,placeholder:this.t("family.dialogs.placeholders.grandmother")},{label:this.t("family.dialogs.fields.grandfatherName"),type:"text",required:!1},{label:this.t("family.dialogs.fields.grandfatherAvatar"),type:"emoji",required:!1,placeholder:this.t("family.dialogs.placeholders.grandfather")}],action:Oe.ADD_GRANDPARENTS}}getAddUncleAuntDialog(){const e=this.getGraphInstance();if(!e?.data)return null;const n=e.data.nodes.filter(r=>r.group===me.PARENT);if(n.length===0)return null;const i=n.map(r=>({value:r.id,text:this.t("family.dropdownOptions.parentSideTemplate").replace("{name}",r.id)}));return{title:this.t("family.dialogs.addUncleAunt"),fields:[{label:this.t("family.dialogs.fields.parentsSide"),type:"select",options:i,required:!0},{label:this.t("family.dialogs.fields.name"),type:"text",required:!0},{label:this.t("family.dialogs.fields.gender"),type:"radio",options:Xi(this.t),required:!0},{label:this.t("family.dialogs.fields.avatar"),type:"emoji",required:!1,placeholder:this.t("family.dialogs.placeholders.avatar")}],action:Oe.ADD_UNCLE_AUNT}}getAddCousinDialog(){const e=this.getGraphInstance();if(!e?.data)return null;const n=e.data.nodes.filter(r=>r.group===me.UNCLE_AUNT);if(n.length===0)return null;const i=n.map(r=>({value:r.id,text:this.t("family.dropdownOptions.uncleAuntChildTemplate").replace("{name}",r.id)}));return{title:this.t("family.dialogs.addCousin"),fields:[{label:this.t("family.dialogs.fields.uncleAuntField"),type:"select",options:i,required:!0},{label:this.t("family.dialogs.fields.name"),type:"text",required:!0},{label:this.t("family.dialogs.fields.gender"),type:"radio",options:Xi(this.t),required:!0},{label:this.t("family.dialogs.fields.avatar"),type:"emoji",required:!1,placeholder:this.t("family.dialogs.placeholders.avatar")}],action:Oe.ADD_COUSIN}}getAddChildDialog(){const e=this.validation.getEligibleParents();if(e.length===0)return null;const n=e.map(i=>{let r="";switch(i.group){case me.YOU:r=this.t("family.dropdownOptions.yourChild");break;case me.SIBLING:r=this.t("family.dropdownOptions.nieceNephewTemplate").replace("{name}",i.id);break;case me.COUSIN:r=this.t("family.dropdownOptions.cousinChildTemplate").replace("{name}",i.id);break;case me.CHILD:r=this.t("family.dropdownOptions.grandchildTemplate").replace("{name}",i.id);break;case me.NIECE_NEPHEW:r=this.t("family.dropdownOptions.childTemplate").replace("{name}",i.id);break;case me.PARTNER:r=this.t("family.dropdownOptions.childTemplate").replace("{name}",i.id);break;default:r=this.t("family.dropdownOptions.childTemplate").replace("{name}",i.id)}return{value:i.id,text:r}});return{title:this.t("family.dialogs.addChild"),fields:[{label:this.t("family.dialogs.fields.parent"),type:"select",options:n,required:!0},{label:this.t("family.dialogs.fields.name"),type:"text",required:!0},{label:this.t("family.dialogs.fields.gender"),type:"radio",options:Xi(this.t),required:!0},{label:this.t("family.dialogs.fields.avatar"),type:"emoji",required:!1,placeholder:this.t("family.dialogs.placeholders.avatar")}],action:Oe.ADD_CHILD}}getAddNieceNephewDialog(){const e=this.getGraphInstance();if(!e?.data)return null;const n=e.data.nodes.filter(r=>r.group===me.SIBLING);if(n.length===0)return null;const i=n.map(r=>({value:r.id,text:this.t("family.dropdownOptions.siblingChildTemplate").replace("{name}",r.id)}));return{title:this.t("family.dialogs.addNieceNephew"),fields:[{label:this.t("family.dialogs.fields.sibling"),type:"select",options:i,required:!0},{label:this.t("family.dialogs.fields.name"),type:"text",required:!0},{label:this.t("family.dialogs.fields.gender"),type:"radio",options:Xi(this.t),required:!0},{label:this.t("family.dialogs.fields.avatar"),type:"emoji",required:!1,placeholder:this.t("family.dialogs.placeholders.avatar")}],action:Oe.ADD_NIECE_NEPHEW}}getAddPartnerDialog(){const e=this.validation.getEligibleForPartner();if(e.length===0)return null;const n=e.map(i=>{let r="";switch(i.group){case me.YOU:r=this.t("family.operations.relationships.yourPartner");break;case me.SIBLING:r=this.t("family.dropdownOptions.siblingPartnerTemplate").replace("{name}",i.id);break;case me.COUSIN:r=this.t("family.dropdownOptions.partnerTemplate").replace("{name}",i.id);break;case me.UNCLE_AUNT:r=this.t("family.dropdownOptions.partnerTemplate").replace("{name}",i.id);break;case me.NIECE_NEPHEW:r=this.t("family.dropdownOptions.partnerTemplate").replace("{name}",i.id);break;case me.CHILD:r=this.t("family.dropdownOptions.childPartnerTemplate").replace("{name}",i.id);break;default:r=this.t("family.dropdownOptions.partnerTemplate").replace("{name}",i.id)}return{value:i.id,text:r}});return{title:this.t("family.dialogs.addPartner"),fields:[{label:this.t("family.dialogs.fields.partnerOf"),type:"select",options:n,required:!0},{label:this.t("family.dialogs.fields.name"),type:"text",required:!0},{label:this.t("family.dialogs.fields.gender"),type:"radio",options:Xi(this.t),required:!0},{label:this.t("family.dialogs.fields.avatar"),type:"emoji",required:!1,placeholder:this.t("family.dialogs.placeholders.avatar")}],action:Oe.ADD_PARTNER}}getValidationMessage(e){const n=this.getGraphInstance();switch(e){case Oe.ADD_PARENTS:return this.validation.canAddParents()?.message||"Cannot add more parents (maximum 2)";case Oe.ADD_GRANDPARENTS:return n?.data?.nodes.filter(r=>r.group===me.PARENT)?.length===0?"You must add parents first before adding grandparents":"No parents available";case Oe.ADD_UNCLE_AUNT:return n?.data?.nodes.filter(r=>r.group===me.PARENT)?.length===0?"You must add parents first before adding uncles/aunts":"No parents available";case Oe.ADD_COUSIN:return n?.data?.nodes.filter(r=>r.group===me.UNCLE_AUNT)?.length===0?"You must add uncles/aunts first before adding cousins":"No uncles/aunts available";case Oe.ADD_CHILD:return"No eligible parents available to have children";case Oe.ADD_NIECE_NEPHEW:return n?.data?.nodes.filter(r=>r.group===me.SIBLING)?.length===0?"You must add siblings first before adding nieces/nephews":"No siblings available";case Oe.ADD_PARTNER:return"No eligible people available for partners (they may already have partners)";default:return"Operation cannot be performed"}}executeAction(e,n,i){switch(e){case Oe.ADD_PARENTS:return i.addParents(n[0],n[2],n[1],n[3]);case Oe.ADD_SIBLING:return i.addSibling(n[0],n[1],n[2]);case Oe.ADD_GRANDPARENTS:return i.addGrandparents(n[0],n[1],n[3],n[2],n[4]);case Oe.ADD_UNCLE_AUNT:return i.addUncleAunt(n[0],n[1],n[2],n[3]);case Oe.ADD_COUSIN:return i.addCousin(n[0],n[1],n[2],n[3]);case Oe.ADD_CHILD:return i.addChild(n[0],n[1],n[2],n[3]);case Oe.ADD_NIECE_NEPHEW:return i.addNieceNephew(n[0],n[1],n[2],n[3]);case Oe.ADD_PARTNER:return i.addPartner(n[0],n[1],n[2],n[3]);default:return{success:!1,message:`Unknown action: ${e}`}}}}class A3{constructor(e,n,i=""){this.nodes=JSON.parse(JSON.stringify(e)),this.links=n.map(r=>({source:typeof r.source=="string"?r.source:r.source.id,target:typeof r.target=="string"?r.target:r.target.id})),this.description=i,this.timestamp=Date.now()}getNodes(){return JSON.parse(JSON.stringify(this.nodes))}getLinks(){return JSON.parse(JSON.stringify(this.links))}getDescription(){return this.description}getTimestamp(){return this.timestamp}getSummary(){return{nodeCount:this.nodes.length,linkCount:this.links.length,description:this.description,timestamp:new Date(this.timestamp).toLocaleString()}}}class C3{constructor(e={}){this.undoStack=[],this.redoStack=[],this.maxHistorySize=e.maxHistorySize||10}saveState(e){this.undoStack.push(e),this.undoStack.length>this.maxHistorySize&&this.undoStack.shift(),this.redoStack=[]}undo(){if(this.undoStack.length===0)return null;const e=this.undoStack.pop();return this.redoStack.push(e),e}redo(){if(this.redoStack.length===0)return null;const e=this.redoStack.pop();return this.undoStack.push(e),e}canUndo(){return this.undoStack.length>0}canRedo(){return this.redoStack.length>0}getUndoCount(){return this.undoStack.length}getRedoCount(){return this.redoStack.length}getUndoDescription(){return this.undoStack.length===0?null:this.undoStack[this.undoStack.length-1].getDescription()}getRedoDescription(){return this.redoStack.length===0?null:this.redoStack[this.redoStack.length-1].getDescription()}clear(){this.undoStack=[],this.redoStack=[]}getHistorySummary(){return{undoCount:this.undoStack.length,redoCount:this.redoStack.length,canUndo:this.canUndo(),canRedo:this.canRedo(),nextUndo:this.getUndoDescription(),nextRedo:this.getRedoDescription()}}}class S3{constructor({graphManager:e,onStatusChange:n=null,lang:i="en"}){this.graphManager=e,this.onStatusChange=n,this.lang=i,this.log=Et({prefix:"FamilyController",level:"info"});const r=()=>this.getGraphInstance(),o=s=>Op(this.lang,s);this.validation=new x3(r,o),this.storage=new E3(r,n,this.log,o),this.operations=new k3(e,r,this.validation,()=>this.storage.saveFamily()),this.dialogService=new Nv(r,this.validation,o),this.mementoHistory=new C3({maxHistorySize:10}),this.storage.startAutoSave()}getInitialDataset(){return this.storage.getInitialDataset()}loadFamily(){return this.storage.loadFamily()}getGraphInstance(){return this.graphManager?.graphInstance?this.graphManager.graphInstance.value||this.graphManager.graphInstance:null}saveFamily(){this.storage.saveFamily()}resetFamily(){this.storage.resetFamily(this.graphManager.loadData,this.graphManager.graphInstance)}lockGraph(){if(!this.graphManager?.lockPositions){this.log.warn("lockPositions not available");return}this.graphManager.lockPositions(),this.showStatus("Graph locked","success")}unlockGraph(){if(!this.graphManager?.unlockPositions){this.log.warn("unlockPositions not available");return}this.graphManager.unlockPositions(),this.showStatus("Graph unlocked","success")}saveAsPNG(e="family-tree.png"){if(!this.graphManager?.saveAsPNG){this.log.warn("saveAsPNG not available");return}this.graphManager.saveAsPNG(e),this.showStatus("Image saved!","success")}canAddParents(){return this.validation.canAddParents()}getEligibleParents(){return this.validation.getEligibleParents()}getEligibleForPartner(){return this.validation.getEligibleForPartner()}addParents(e,n=null){return this.operations.addParents(e,n)}addSibling(e){return this.operations.addSibling(e)}addGrandparents(e,n,i=null){return this.operations.addGrandparents(e,n,i)}addUncleAunt(e,n){return this.operations.addUncleAunt(e,n)}addCousin(e,n){return this.operations.addCousin(e,n)}addChild(e,n){return this.operations.addChild(e,n)}addNieceNephew(e,n){return this.operations.addNieceNephew(e,n)}addPartner(e,n){return this.operations.addPartner(e,n)}getDialogService(){return this.dialogService}getOperations(){return this.operations}async applyLayout(e){if(e==="none"){const n=" Using D3 physics simulation (no layout algorithm)";return this.log.debug("Using default D3 physics simulation"),this.showStatus(n,"info"),this.graphManager?.unlockPositions&&this.graphManager.unlockPositions(),{success:!0,layoutId:"none",message:"Using default D3 physics simulation"}}try{if(this.log.debug("Applying layout algorithm",{layoutId:e}),this.showStatus(`Applying ${e} layout...`,"info"),!this.graphManager?.applyLayout)return{success:!1,error:"Layout functionality not available"};if(await this.graphManager.applyLayout(e)){const i=` Applied ${e} layout algorithm`;return this.log.info("Layout applied successfully",{layoutId:e}),this.showStatus(i,"success"),{success:!0,layoutId:e}}return this.log.warn("Layout application failed",{layoutId:e}),{success:!1,error:"Layout application failed"}}catch(n){const i=` Layout failed: ${n.message}`;return this.log.error("Layout application failed",{layoutId:e,error:n.message,stack:n.stack}),this.showStatus(i,"error"),{success:!1,error:n.message}}}getAvailableLayouts(){return this.graphManager?.getAvailableLayouts?this.graphManager.getAvailableLayouts():[]}showStatus(e,n="info"){this.onStatusChange&&this.onStatusChange(e,n)}saveStateBeforeOperation(e){const n=this.getGraphInstance();if(!n||!n.data){this.log.warn("Cannot save state: graph not available");return}const i=new A3(n.data.nodes,n.data.links,e);this.mementoHistory.saveState(i),this.log.debug("State saved",{description:e,summary:i.getSummary()})}undo(){if(!this.mementoHistory.canUndo())return{success:!1,message:"Nothing to undo"};const e=this.mementoHistory.undo();if(!e)return{success:!1,message:"Failed to undo"};if(!this.getGraphInstance())return{success:!1,message:"Graph not available"};const i=e.getNodes(),r=e.getLinks();this.graphManager.loadData(i,r);const o=`Undid: ${e.getDescription()}`;return this.log.info("Undo successful",{description:e.getDescription()}),this.showStatus(o,"info"),{success:!0,message:o}}redo(){if(!this.mementoHistory.canRedo())return{success:!1,message:"Nothing to redo"};const e=this.mementoHistory.redo();if(!e)return{success:!1,message:"Failed to redo"};if(!this.getGraphInstance())return{success:!1,message:"Graph not available"};const i=e.getNodes(),r=e.getLinks();this.graphManager.loadData(i,r);const o=`Redid: ${e.getDescription()}`;return this.log.info("Redo successful",{description:e.getDescription()}),this.showStatus(o,"info"),{success:!0,message:o}}canUndo(){return this.mementoHistory.canUndo()}canRedo(){return this.mementoHistory.canRedo()}getHistorySummary(){return this.mementoHistory.getHistorySummary()}dispose(){this.storage.stopAutoSave(),this.log.info("FamilyController disposed")}}const T3={class:"family-page"},N3={class:"demo-controls-header"},R3={class:"demo-controls-title"},L3={class:"demo-controls-description"},I3={class:"info-box-green mb-4"},P3={class:"info-box-title-green"},D3={class:"info-box-text-green"},M3={class:"status-section"},O3={class:"demo-controls-section-title mb-3"},G3={class:"status-box"},F3={key:0,class:"status-empty"},$3={class:"text-xs"},z3={class:"text-xs mt-1 opacity-60"},B3={key:1,class:"space-y-2"},V3={class:"status-icon"},U3={key:0},j3={key:1},H3={key:2},W3={class:"status-text"},q3={class:"controls-section-bordered"},K3={class:"demo-controls-section-title"},X3={class:"btn-grid"},Z3={class:"controls-section-bordered"},Y3={class:"demo-controls-section-title"},J3={class:"btn-grid"},Q3=["disabled"],eF=["disabled"],tF={class:"controls-section-bordered"},nF={class:"demo-controls-section-title"},iF={class:"render-mode-container"},rF={class:"render-mode-text"},oF={class:"render-mode-text"},sF={class:"info-box-blue"},aF={class:"info-box-text-yellow"},lF={class:"controls-section-bordered"},cF={class:"demo-controls-section-title"},dF={class:"controls-section-bordered"},uF={class:"legend-title"},hF={class:"legend-list"},fF={class:"legend-item"},gF={class:"legend-text"},pF={class:"legend-item"},mF={class:"legend-text"},yF={class:"legend-item"},vF={class:"legend-text"},bF={class:"legend-item"},_F={class:"legend-text"},wF={class:"legend-item"},xF={class:"legend-text"},kF={class:"legend-item"},EF={class:"legend-text"},AF={class:"legend-item"},CF={class:"legend-text"},SF={class:"legend-item"},TF={class:"legend-text"},NF={class:"legend-item"},RF={class:"legend-text"},LF={class:"controls-section-bordered"},IF={class:"demo-controls-section-title"},PF={class:"info-box-yellow mt-3"},DF={class:"info-box-text-yellow"},MF={key:0,class:"italic"},OF={class:"info-box-blue"},GF={class:"info-box-title-blue text-sm"},FF={class:"info-box-text-blue space-y-1"},$F=["innerHTML"],zF=["innerHTML"],BF=["innerHTML"],VF=["innerHTML"],UF=["innerHTML"],jF=["innerHTML"],HF=["innerHTML"],WF={key:0,class:"loading-overlay"},qF={class:"text-center"},KF={class:"text-secondary"},XF={__name:"FamilyPage",setup(t){const e=Et({prefix:"FamilyPage",level:"info"}),{t:n,lang:i}=fn(),{trackFamilyAction:r,trackAnalysis:o}=Va(),s=Ba({colorBy:"group",colorScheme:"categorical",showLabels:!0,autoComputeCentrality:!1,customColorFunction:X=>{const ye=X.group||0;return _3[ye]||null}}),{graphContainer:a,graphInstance:l,loading:c,loadData:d,addNode:u,addLink:h,hasNode:f,getNodeIds:p,lockPositions:m,unlockPositions:w,saveAsPNG:_,applyLayout:x,getAvailableLayouts:k,analyzeGraph:v,analysisProgress:C,updateVisualEncoding:A}=s,S=oe(""),M=oe("info"),I=oe("Loading graph..."),D=oe(!1),O=oe(""),$=oe([]),j=oe(null),E=oe("none"),R=oe([]),L=oe(!1),G=oe(!1),B=oe(!1),q=oe(["eigenvector"]),ee=oe("eigenvector"),fe=oe(!1),_e=oe("colors"),ke=oe(!1);let V=null;const le=(X,ye)=>{S.value=X,M.value=ye},pe=()=>{V&&(G.value=V.canUndo(),B.value=V.canRedo())},U=X=>{(X.ctrlKey||X.metaKey)&&X.key==="z"&&!X.shiftKey?(X.preventDefault(),Te()):((X.ctrlKey||X.metaKey)&&X.key==="y"||(X.ctrlKey||X.metaKey)&&X.shiftKey&&X.key==="z")&&(X.preventDefault(),De())},te=()=>{const X={graphInstance:l,loadData:d,addNode:(Ie,it,Tn)=>u(Ie,it,Tn,!0),addLink:(Ie,it)=>h(Ie,it,!0),hasNode:f,getNodeIds:p,lockPositions:m,unlockPositions:w,saveAsPNG:_,applyLayout:x,getAvailableLayouts:k};V=new S3({graphManager:X,onStatusChange:le,lang:i.value}),R.value=V.getAvailableLayouts();const ye=V.loadFamily();if(ye)d(ye.nodes,ye.links);else{const Ie=V.getInitialDataset();d(Ie.nodes,Ie.links)}},z=async(X,ye)=>{if(!V){le("Graph is still loading. Please wait...","error");return}const Ie=V.getDialogService(),it=ye();if(!it){const Tn=Ie.getValidationMessage(X);le(Tn,"error");return}O.value=it.title,$.value=it.fields,j.value=it.action,await Gi(),D.value=!0},ie=()=>{r(pt.RELATIVE_ADD,{type:"parents"}),z(Oe.ADD_PARENTS,()=>V?.getDialogService().getAddParentsDialog())},ce=()=>{r(pt.RELATIVE_ADD,{type:"sibling"}),z(Oe.ADD_SIBLING,()=>V?.getDialogService().getAddSiblingDialog())},N=()=>{r(pt.RELATIVE_ADD,{type:"grandparents"}),z(Oe.ADD_GRANDPARENTS,()=>V?.getDialogService().getAddGrandparentsDialog())},P=()=>{r(pt.RELATIVE_ADD,{type:"uncle_aunt"}),z(Oe.ADD_UNCLE_AUNT,()=>V?.getDialogService().getAddUncleAuntDialog())},F=()=>{r(pt.RELATIVE_ADD,{type:"cousin"}),z(Oe.ADD_COUSIN,()=>V?.getDialogService().getAddCousinDialog())},W=()=>{r(pt.RELATIVE_ADD,{type:"child"}),z(Oe.ADD_CHILD,()=>V?.getDialogService().getAddChildDialog())},Y=()=>{r(pt.RELATIVE_ADD,{type:"niece_nephew"}),z(Oe.ADD_NIECE_NEPHEW,()=>V?.getDialogService().getAddNieceNephewDialog())},Z=()=>{r(pt.RELATIVE_ADD,{type:"partner"}),z(Oe.ADD_PARTNER,()=>V?.getDialogService().getAddPartnerDialog())},ae=X=>{if(!V||!j.value)return;D.value=!1,V.saveStateBeforeOperation(O.value);const Ie=V.getDialogService().executeAction(j.value,X,V.getOperations());Ie.success?(Ie.message&&le(Ie.message,"info"),pe()):le(Ie.message||"Failed to add relative","error"),j.value=null},ge=()=>{D.value=!1,j.value=null},ue=()=>{V&&(r(pt.TREE_SAVE),V.saveFamily())},se=()=>{V&&(r(pt.TREE_EXPORT),V.saveAsPNG("family-tree.png"))},Ae=()=>{V&&(r(pt.GRAPH_LOCK),V.lockGraph())},ve=()=>{V&&(r(pt.GRAPH_UNLOCK),V.unlockGraph())},Ee=()=>{V&&confirm("Are you sure you want to reset your family tree?")&&(r(pt.TREE_RESET),V.resetFamily(),pe())},Te=()=>{if(!V)return;r(pt.UNDO_ACTION);const X=V.undo();X.success?le(X.message,"info"):le(X.message||"Nothing to undo","error"),pe()},De=()=>{if(!V)return;r(pt.REDO_ACTION);const X=V.redo();X.success?le(X.message,"info"):le(X.message||"Nothing to redo","error"),pe()},Q=async()=>{if(!(!v||q.value.length===0)){o(fi.ANALYSIS_RUN,{metrics:q.value.join(",")});try{if(fe.value=!0,le("Analyzing network...","info"),await v(q.value,{includeGraphStats:!1})){const ye=ee.value||q.value[0];A({sizeBy:ye,minRadius:5,maxRadius:25,preserveZoom:!0}),le(` Analysis complete - sizing by ${ye}`,"success")}}catch(X){e.error("Analysis error",{error:X.message,stack:X.stack}),le(`Analysis failed: ${X.message}`,"error")}finally{fe.value=!1}}},ne=async()=>{if(!(!V||!E.value)){o(fi.LAYOUT_CHANGE,{layout:E.value});try{L.value=!0;const X=await V.applyLayout(E.value);X.success||le(X.error||"Failed to apply layout","error")}catch(X){e.error("Layout error",{error:X.message,stack:X.stack}),le(`Layout failed: ${X.message}`,"error")}finally{L.value=!1}}};return dt(l,X=>{X&&!V&&(te(),pe())},{immediate:!0}),dt(i,X=>{if(V){V.lang=X;const ye=Ie=>Op(X,Ie);V.dialogService=new Nv(()=>V.getGraphInstance(),V.validation,ye),V.validation.t=ye,V.storage.t=ye}}),dt(_e,X=>{if(r(pt.RENDER_MODE_CHANGE,{mode:X}),l.value){ke.value=!0;const ye=()=>{ke.value=!1,l.value.off("ready",ye)};l.value.on("ready",ye),l.value.setRenderMode(X)}}),dt(ee,X=>{X&&l.value&&(e.debug("Size metric changed",{metric:X}),A({sizeBy:X,minRadius:5,maxRadius:20}))}),Jt(()=>{window.addEventListener("keydown",U)}),Bi(()=>{window.removeEventListener("keydown",U),V&&V.dispose()}),(X,ye)=>(H(),K("div",T3,[we(ka,null,{controls:Ue(()=>[g("div",N3,[g("h1",R3,b(y(n)("family.header.title")),1),g("p",L3,b(y(n)("family.header.subtitle")),1)]),g("div",I3,[g("h2",P3,b(y(n)("family.whatIs.title")),1),g("p",D3,b(y(n)("family.whatIs.description")),1)]),g("div",M3,[g("h2",O3,b(y(n)("family.status.title")),1),g("div",G3,[S.value?(H(),K("div",B3,[g("div",{class:Xe({"status-message-success":M.value==="success","status-message-error":M.value==="error","status-message-info":M.value==="info"})},[g("div",V3,[M.value==="success"?(H(),K("span",U3,"")):M.value==="error"?(H(),K("span",j3,"")):(H(),K("span",H3,""))]),g("div",W3,b(S.value),1)],2)])):(H(),K("div",F3,[g("div",$3,b(y(n)("family.status.ready")),1),g("div",z3,b(y(n)("family.status.clickToAdd")),1)]))])]),g("div",q3,[g("h2",K3,b(y(n)("family.addRelatives.title")),1),g("div",X3,[g("button",{onClick:ie,class:"action-btn-pink",type:"button"},b(y(n)("family.addRelatives.parents")),1),g("button",{onClick:N,class:"action-btn-amber"},b(y(n)("family.addRelatives.grandparents")),1),g("button",{onClick:ce,class:"action-btn-blue"},b(y(n)("family.addRelatives.sibling")),1),g("button",{onClick:Y,class:"action-btn-cyan"},b(y(n)("family.addRelatives.nieceNephew")),1),g("button",{onClick:P,class:"action-btn-orange"},b(y(n)("family.addRelatives.uncleAunt")),1),g("button",{onClick:F,class:"action-btn-purple"},b(y(n)("family.addRelatives.cousin")),1),g("button",{onClick:Z,class:"action-btn-rose"},b(y(n)("family.addRelatives.partner")),1),g("button",{onClick:W,class:"action-btn-teal"},b(y(n)("family.addRelatives.child")),1)])]),g("div",Z3,[g("h2",Y3,b(y(n)("family.actions.title")),1),g("div",J3,[g("button",{onClick:ue,class:"action-btn-gray"},b(y(n)("family.actions.saveFamily")),1),g("button",{onClick:se,class:"action-btn-emerald"},b(y(n)("family.actions.saveImage")),1),g("button",{onClick:Ae,class:"action-btn-indigo"},b(y(n)("family.actions.lockGraph")),1),g("button",{onClick:ve,class:"action-btn-amber"},b(y(n)("family.actions.unlockGraph")),1),g("button",{onClick:Te,disabled:!G.value,class:"action-btn-violet action-btn-disabled"},b(y(n)("family.actions.undo")),9,Q3),g("button",{onClick:De,disabled:!B.value,class:"action-btn-fuchsia action-btn-disabled"},b(y(n)("family.actions.redo")),9,eF),g("button",{onClick:Ee,class:"action-btn-red col-span-2"},b(y(n)("family.actions.resetTree")),1)])]),g("div",tF,[g("h2",nF,b(y(n)("family.renderNodes.title")),1),g("div",iF,[g("label",{class:Xe(["render-mode-label",_e.value==="colors"?"render-mode-label-active":"render-mode-label-inactive"])},[qt(g("input",{type:"radio",name:"renderMode",value:"colors","onUpdate:modelValue":ye[0]||(ye[0]=Ie=>_e.value=Ie),class:"render-mode-radio"},null,512),[[ec,_e.value]]),ye[5]||(ye[5]=g("span",{class:"render-mode-icon"},"",-1)),g("span",rF,b(y(n)("family.renderNodes.colors")),1)],2),g("label",{class:Xe(["render-mode-label",_e.value==="avatars"?"render-mode-label-active":"render-mode-label-inactive"])},[qt(g("input",{type:"radio",name:"renderMode",value:"avatars","onUpdate:modelValue":ye[1]||(ye[1]=Ie=>_e.value=Ie),class:"render-mode-radio"},null,512),[[ec,_e.value]]),ye[6]||(ye[6]=g("span",{class:"render-mode-icon"},"",-1)),g("span",oF,b(y(n)("family.renderNodes.avatars")),1)],2)]),g("div",sF,[g("p",aF,[g("strong",null,b(y(n)("family.renderNodes.colors"))+":",1),Ce(" "+b(y(n)("family.renderNodes.colorsDesc")),1),ye[7]||(ye[7]=g("br",null,null,-1)),g("strong",null,b(y(n)("family.renderNodes.avatars"))+":",1),Ce(" "+b(y(n)("family.renderNodes.avatarsDesc")),1)])])]),g("div",lF,[g("h2",cF,b(y(n)("family.networkAnalysis.title")),1),we(Aa,{"selected-metrics":q.value,"onUpdate:selectedMetrics":ye[2]||(ye[2]=Ie=>q.value=Ie),"size-metric":ee.value,"onUpdate:sizeMetric":ye[3]||(ye[3]=Ie=>ee.value=Ie),analyzing:fe.value,progress:y(C),onAnalyze:Q},null,8,["selected-metrics","size-metric","analyzing","progress"])]),g("div",dF,[g("h3",uF,b(y(n)("family.relationshipColors.title")),1),g("div",hF,[g("div",fF,[ye[8]||(ye[8]=g("div",{class:"legend-dot bg-indigo-500"},null,-1)),g("span",gF,b(y(n)("family.relationshipColors.you")),1)]),g("div",pF,[ye[9]||(ye[9]=g("div",{class:"legend-dot bg-pink-500"},null,-1)),g("span",mF,b(y(n)("family.relationshipColors.parents")),1)]),g("div",yF,[ye[10]||(ye[10]=g("div",{class:"legend-dot bg-blue-500"},null,-1)),g("span",vF,b(y(n)("family.relationshipColors.siblings")),1)]),g("div",bF,[ye[11]||(ye[11]=g("div",{class:"legend-dot bg-orange-500"},null,-1)),g("span",_F,b(y(n)("family.relationshipColors.unclesAunts")),1)]),g("div",wF,[ye[12]||(ye[12]=g("div",{class:"legend-dot bg-purple-500"},null,-1)),g("span",xF,b(y(n)("family.relationshipColors.cousins")),1)]),g("div",kF,[ye[13]||(ye[13]=g("div",{class:"legend-dot bg-amber-700"},null,-1)),g("span",EF,b(y(n)("family.relationshipColors.grandparents")),1)]),g("div",AF,[ye[14]||(ye[14]=g("div",{class:"legend-dot bg-cyan-500"},null,-1)),g("span",CF,b(y(n)("family.relationshipColors.nieces")),1)]),g("div",SF,[ye[15]||(ye[15]=g("div",{class:"legend-dot bg-rose-500"},null,-1)),g("span",TF,b(y(n)("family.relationshipColors.partners")),1)]),g("div",NF,[ye[16]||(ye[16]=g("div",{class:"legend-dot bg-teal-500"},null,-1)),g("span",RF,b(y(n)("family.relationshipColors.children")),1)])])]),g("div",LF,[g("h2",IF,b(y(n)("family.layoutAlgorithm.title")),1),we(Ea,{modelValue:E.value,"onUpdate:modelValue":ye[4]||(ye[4]=Ie=>E.value=Ie),"available-layouts":R.value,loading:y(c)||L.value,onApply:ne},null,8,["modelValue","available-layouts","loading"]),g("div",PF,[g("p",DF,[(H(!0),K(qe,null,ln(R.value,Ie=>(H(),K("div",{key:Ie.id},[g("strong",null,b(Ie.name)+":",1),Ce(" "+b(Ie.description)+" ",1),Ie.requiresStats?(H(),K("span",MF," (requires analysis)")):Me("",!0),ye[17]||(ye[17]=g("br",null,null,-1))]))),128))])])]),g("div",OF,[g("h3",GF,b(y(n)("family.instructions.title")),1),g("ul",FF,[g("li",{innerHTML:y(n)("family.instructions.dragNodes")},null,8,$F),g("li",{innerHTML:y(n)("family.instructions.autoSaves")},null,8,zF),g("li",{innerHTML:y(n)("family.instructions.lock")},null,8,BF),g("li",{innerHTML:y(n)("family.instructions.download")},null,8,VF),g("li",{innerHTML:y(n)("family.instructions.analyze")},null,8,UF),g("li",{innerHTML:y(n)("family.instructions.layouts")},null,8,jF),g("li",{innerHTML:y(n)("family.instructions.undoRedo")},null,8,HF)])])]),graph:Ue(()=>[y(c)||ke.value?(H(),K("div",WF,[g("div",qF,[ye[18]||(ye[18]=g("div",{class:"loading-spinner"},null,-1)),g("p",KF,b(ke.value?"Switching render mode...":I.value),1)])])):Me("",!0),g("div",{ref_key:"graphContainer",ref:a,class:"w-full h-full"},null,512)]),_:1}),(H(),Xn(b3,{key:`dialog-${j.value||"default"}`,visible:D.value,title:O.value,fields:$.value,onConfirm:ae,onCancel:ge},null,8,["visible","title","fields"]))]))}},ZF={class:"bacon-finder"},YF={class:"bacon-finder-title"},JF={class:"bacon-search-container"},QF={class:"bacon-search-input-wrapper"},e$=["placeholder","onKeydown"],t$={key:0,class:"bacon-suggestions"},n$=["onMousedown","onMouseenter"],i$={class:"bacon-suggestion-icon"},r$={class:"bacon-suggestion-text"},o$={class:"bacon-suggestion-category"},s$={key:0,class:"bacon-result"},a$={key:0,class:"bacon-result-found"},l$={class:"bacon-number-display"},c$={class:"bacon-number-value"},d$={class:"bacon-path"},u$={class:"bacon-path-nodes"},h$={key:0,class:"bacon-path-arrow"},f$={key:1,class:"bacon-result-not-found"},g$={key:1,class:"bacon-hint"},p$={__name:"BaconFinder",props:{nodes:{type:Array,required:!0},edges:{type:Array,required:!0},centerNode:{type:String,default:"Kevin Bacon"},title:{type:String,default:"Find Bacon Number"},placeholder:{type:String,default:"Search actor or movie..."}},emits:["pathFound","pathCleared"],setup(t,{emit:e}){const n=t,i=e,r=oe(""),o=oe(!1),s=oe(-1),a=oe(null),l=oe(null),c=Je(()=>{if(!r.value||r.value.length<2)return[];const C=r.value.toLowerCase();return n.nodes.filter(A=>{const S=String(A.id||"");return S!==n.centerNode&&S.toLowerCase().includes(C)}).slice(0,10)}),d=()=>{const C=new Map;return n.nodes.forEach(A=>{C.set(A.id,[])}),n.edges.forEach(A=>{const S=typeof A.source=="object"?A.source.id:A.source,M=typeof A.target=="object"?A.target.id:A.target;C.has(S)&&C.get(S).push(M),C.has(M)&&C.get(M).push(S)}),C},u=C=>{if(C===n.centerNode)return{found:!0,path:[{id:n.centerNode,category:h(n.centerNode)}],baconNumber:0,pathEdges:[]};const A=d(),S=new Set,M=new Map,I=[C];for(S.add(C);I.length>0;){const D=I.shift();if(D===n.centerNode){const $=[],j=[];let E=D;for(;E!==void 0;){$.unshift({id:E,category:h(E)});const L=M.get(E);L!==void 0&&j.push({source:L,target:E}),E=L}const R=Math.floor(($.length-1)/2);return{found:!0,path:$,baconNumber:R,pathEdges:j}}const O=A.get(D)||[];for(const $ of O)S.has($)||(S.add($),M.set($,D),I.push($))}return{found:!1,path:[],baconNumber:-1,pathEdges:[]}},h=C=>n.nodes.find(S=>S.id===C)?.category||"unknown",f=()=>{s.value=-1,a.value=null,i("pathCleared")},p=C=>{c.value.length!==0&&(s.value+=C,s.value<0?s.value=c.value.length-1:s.value>=c.value.length&&(s.value=0))},m=()=>{s.value>=0&&s.value<c.value.length&&w(c.value[s.value])},w=C=>{r.value=C.id,o.value=!1,s.value=-1,a.value=u(C.id),a.value.found&&i("pathFound",{sourceNode:C.id,path:a.value.path,pathEdges:a.value.pathEdges,baconNumber:a.value.baconNumber})},_=()=>{o.value=!1,s.value=-1},x=()=>{r.value="",a.value=null,o.value=!1,s.value=-1,i("pathCleared")},k=()=>{i("pathCleared")},v=C=>{l.value&&!l.value.contains(C.target)&&_()};return Jt(()=>{document.addEventListener("click",v)}),Bi(()=>{document.removeEventListener("click",v)}),(C,A)=>(H(),K("div",ZF,[g("h3",YF,b(t.title),1),g("div",JF,[g("div",QF,[qt(g("input",{ref_key:"searchInput",ref:l,"onUpdate:modelValue":A[0]||(A[0]=S=>r.value=S),type:"text",placeholder:t.placeholder,class:"bacon-search-input",onInput:f,onFocus:A[1]||(A[1]=S=>o.value=!0),onKeydown:[A[2]||(A[2]=Bn(Qi(S=>p(1),["prevent"]),["down"])),A[3]||(A[3]=Bn(Qi(S=>p(-1),["prevent"]),["up"])),Bn(Qi(m,["prevent"]),["enter"]),Bn(_,["escape"])]},null,40,e$),[[Ql,r.value]]),r.value?(H(),K("button",{key:0,class:"bacon-clear-btn",onClick:x},"  ")):Me("",!0)]),o.value&&c.value.length>0?(H(),K("div",t$,[(H(!0),K(qe,null,ln(c.value,(S,M)=>(H(),K("div",{key:S.id,class:Xe(["bacon-suggestion-item",{"bacon-suggestion-highlighted":M===s.value}]),onMousedown:Qi(I=>w(S),["prevent"]),onMouseenter:I=>s.value=M},[g("span",i$,b(S.category==="movie"?"":""),1),g("span",r$,b(S.id),1),g("span",o$,b(S.category),1)],42,n$))),128))])):Me("",!0)]),a.value?(H(),K("div",s$,[a.value.found?(H(),K("div",a$,[g("div",l$,[A[4]||(A[4]=g("span",{class:"bacon-number-icon"},"",-1)),A[5]||(A[5]=g("span",{class:"bacon-number-label"},"Bacon Number:",-1)),g("span",c$,b(a.value.baconNumber),1)]),g("div",d$,[A[6]||(A[6]=g("div",{class:"bacon-path-label"},"Path:",-1)),g("div",u$,[(H(!0),K(qe,null,ln(a.value.path,(S,M)=>(H(),K(qe,{key:M},[g("span",{class:Xe(["bacon-path-node",{"bacon-path-actor":S.category==="actor","bacon-path-movie":S.category==="movie","bacon-path-kevin":S.id===t.centerNode}])},b(S.id),3),M<a.value.path.length-1?(H(),K("span",h$,"")):Me("",!0)],64))),128))])]),g("button",{class:"bacon-clear-path-btn",onClick:k}," Clear Highlight ")])):(H(),K("div",f$,[A[7]||(A[7]=g("span",{class:"bacon-not-found-icon"},"",-1)),g("span",null,"No connection found to "+b(t.centerNode),1)]))])):(H(),K("div",g$,[g("p",null,"Search for an actor or movie to find their connection to "+b(t.centerNode)+".",1)]))]))}},m$=Cn(p$,[["__scopeId","data-v-2f687661"]]),y$={class:"degrees-page"},v$={class:"demo-controls-header"},b$={class:"demo-controls-title"},_$={class:"demo-controls-description"},w$={class:"info-box-green mb-4"},x$={class:"info-box-title-green"},k$=["innerHTML"],E$={class:"status-section"},A$={class:"demo-controls-section-title mb-3"},C$={class:"status-box"},S$={key:0,class:"status-empty"},T$={class:"text-xs"},N$={key:1,class:"space-y-2"},R$={class:"status-icon"},L$={key:0},I$={key:1},P$={key:2},D$={class:"status-text"},M$={key:0,class:"controls-section-bordered"},O$={class:"demo-controls-section-title"},G$={class:"grid grid-cols-2 gap-3 text-sm"},F$={class:"stat-box"},$$={class:"stat-value"},z$={class:"stat-label"},B$={class:"stat-box"},V$={class:"stat-value"},U$={class:"stat-label"},j$={class:"stat-box"},H$={class:"stat-value"},W$={class:"stat-label"},q$={class:"stat-box"},K$={class:"stat-value"},X$={class:"stat-label"},Z$={class:"controls-section-bordered"},Y$={class:"legend-title"},J$={class:"legend-list"},Q$={class:"legend-item"},ez={class:"legend-text"},tz={class:"legend-item"},nz={class:"legend-text"},iz={class:"legend-item"},rz={class:"legend-text"},oz={class:"mt-3 text-xs text-secondary"},sz={key:1,class:"controls-section-bordered"},az={class:"controls-section-bordered"},lz={class:"demo-controls-section-title"},cz={class:"controls-section-bordered"},dz={class:"demo-controls-section-title"},uz={class:"info-box-blue"},hz={class:"info-box-title-blue"},fz={class:"info-box-text-blue space-y-1"},gz=["innerHTML"],pz=["innerHTML"],mz=["innerHTML"],yz={key:0,class:"loading-overlay"},vz={class:"text-center"},bz={class:"text-secondary"},_z="#f59e0b",wz=5,xz="#ff6600",kz=25,Ez=999,Az={__name:"DegreesPage",setup(t){const e=Et({prefix:"DegreesPage",level:"info"}),{t:n}=fn(),i=Ba({renderer:"sigma",colorBy:"category",colorScheme:"categorical",showLabels:!0,chargeStrength:-3e3,linkDistance:100,linkStrength:.1,collisionPadding:10,collisionStrength:2,centerStrength:1,curvedEdges:!0,edgeCurvature:.2}),{graphContainer:r,graphInstance:o,loading:s,loadData:a,applyLayout:l,getAvailableLayouts:c,analyzeGraph:d,analysisProgress:u,updateVisualEncoding:h}=i,f=oe(""),p=oe("info"),m=oe("Loading Six Degrees network..."),w=oe(!1),_=oe(!1),x=oe(!1),k=oe("none"),v=oe([]),C=oe(["degree","betweenness","eigenvector","eigenvector-laplacian"]),A=oe("degree"),S=oe(0),M=oe(0),I=oe(0),D=oe(0),O=oe([]),$=oe([]),j=oe(null),E=oe(new Map),R=oe(new Map),L=()=>{if(o.value)try{const V=o.value.getGraph();V&&V.hasNode("Kevin Bacon")&&(V.setNodeAttribute("Kevin Bacon","color",xz),V.setNodeAttribute("Kevin Bacon","size",kz),V.setNodeAttribute("Kevin Bacon","zIndex",Ez),V.setNodeAttribute("Kevin Bacon","forceLabel",!0),V.setNodeAttribute("Kevin Bacon","highlighted",!0),V.setNodeAttribute("Kevin Bacon","lockedColor",!0),V.setNodeAttribute("Kevin Bacon","lockedSize",!0),e.debug("Kevin Bacon highlighted as network center"))}catch(V){e.warn("Could not highlight Kevin Bacon",{error:V.message})}},G=V=>{if(o.value?.sigma)try{o.value.sigma.setSetting("renderLabels",V),e.debug("Labels visibility set to",V)}catch(le){e.warn("Could not toggle labels",{error:le.message})}},B=({sourceNode:V,path:le,pathEdges:pe,baconNumber:U})=>{if(o.value)try{const te=o.value.getGraph();if(!te)return;q(),j.value={sourceNode:V,path:le,pathEdges:pe,baconNumber:U};const z=new Set(le.map(ce=>ce.id)),ie=new Set;pe.forEach(ce=>{ie.add(`${ce.source}-${ce.target}`),ie.add(`${ce.target}-${ce.source}`)}),te.forEachNode((ce,N)=>{E.value.set(ce,{color:N.color,size:N.size,hidden:N.hidden,forceLabel:N.forceLabel,zIndex:N.zIndex}),z.has(ce)?(te.setNodeAttribute(ce,"hidden",!1),te.setNodeAttribute(ce,"zIndex",100),te.setNodeAttribute(ce,"forceLabel",!0)):te.setNodeAttribute(ce,"hidden",!0)}),te.forEachEdge((ce,N,P,F)=>{R.value.set(ce,{color:N.color,size:N.size,hidden:N.hidden,zIndex:N.zIndex});const W=`${P}-${F}`;ie.has(W)?(te.setEdgeAttribute(ce,"color",_z),te.setEdgeAttribute(ce,"size",wz),te.setEdgeAttribute(ce,"hidden",!1),te.setEdgeAttribute(ce,"zIndex",100)):te.setEdgeAttribute(ce,"hidden",!0)}),o.value.sigma&&o.value.sigma.refresh(),f.value=`Found path! Bacon Number: ${U}`,p.value="success",e.debug("Path highlighted",{sourceNode:V,baconNumber:U,pathLength:le.length})}catch(te){e.error("Failed to highlight path",{error:te.message})}},q=()=>{if(o.value)try{const V=o.value.getGraph();if(!V)return;E.value.forEach((le,pe)=>{V.hasNode(pe)&&(V.setNodeAttribute(pe,"color",le.color),V.setNodeAttribute(pe,"size",le.size),V.setNodeAttribute(pe,"hidden",!1),V.setNodeAttribute(pe,"zIndex",le.zIndex||1),pe!=="Kevin Bacon"&&V.setNodeAttribute(pe,"forceLabel",le.forceLabel||!1))}),R.value.forEach((le,pe)=>{V.hasEdge(pe)&&(V.setEdgeAttribute(pe,"color",le.color||"#999"),V.setEdgeAttribute(pe,"size",le.size||1),V.setEdgeAttribute(pe,"hidden",!1),V.setEdgeAttribute(pe,"zIndex",le.zIndex||1))}),E.value.clear(),R.value.clear(),j.value=null,L(),o.value.sigma&&o.value.sigma.refresh(),e.debug("Path highlighting cleared")}catch(V){e.error("Failed to clear path highlighting",{error:V.message})}},ee=async()=>{try{m.value="Loading Six Degrees of Kevin Bacon...",f.value="Loading network data...",p.value="info";const V=await So.loadFromURL("/data/six_degrees_edges.csv","/data/six_degrees_nodes.csv"),le=V.nodes.map(pe=>({...pe,group:pe.category==="movie"?1:2}));O.value=le,$.value=V.edges,S.value=le.length,M.value=V.edges.length,I.value=le.filter(pe=>pe.category==="movie").length,D.value=le.filter(pe=>pe.category==="actor").length,a(le,V.edges,{skipSimulation:!0,keepLoading:!0}),setTimeout(async()=>{G(!1),h({colorBy:"category",colorScheme:"categorical"}),m.value="Computing node centrality...",f.value="Computing node centrality...",p.value="info";try{await d(["betweenness"]),h({sizeBy:"betweenness",minRadius:4,maxRadius:25});const pe={},U=4,te=25;let z=1/0,ie=0;o.value?.data?.nodes&&o.value.data.nodes.forEach(P=>{const F=P.betweenness||0;z=Math.min(z,F),ie=Math.max(ie,F)});const ce=ie-z||1;let N=0;o.value?.data?.nodes&&o.value.data.nodes.forEach(P=>{const W=((P.betweenness||0)-z)/ce,Y=U+W*(te-U);pe[P.id]=Y,N++}),e.info("Node sizes calculated from betweenness",{count:N,minBetweenness:z,maxBetweenness:ie,kevinBaconBetweenness:o.value?.data?.nodes?.find(P=>P.id==="Kevin Bacon")?.betweenness,kevinBaconSize:pe["Kevin Bacon"],sampleSizes:Object.entries(pe).slice(0,5).map(([P,F])=>({id:P,size:F.toFixed(1)}))}),m.value="Applying radial layout...",f.value="Applying radial layout...",await l("radial",{centerNode:"Kevin Bacon",nodeSizes:pe,nodePadding:6}),k.value="radial",G(!0),L(),f.value="Radial layout applied - Kevin Bacon at center!",p.value="success"}catch(pe){e.error("Failed to apply radial layout",{error:pe.message}),G(!0),L(),f.value="Force layout applied",p.value="info"}},100),w.value=!0,e.info("Six Degrees network loaded",{nodes:S.value,edges:M.value,movies:I.value,actors:D.value})}catch(V){e.error("Failed to load Six Degrees data",{error:V.message}),f.value=`Failed to load: ${V.message}`,p.value="error"}},fe=oe(!1),_e=async()=>{if(!o.value)return;const V=k.value;if(!(!V||V==="none")){V==="spectral"&&!fe.value&&(f.value="Spectral layout requires analysis first. Running analysis...",p.value="info",C.value.includes("eigenvector-laplacian")||(C.value=[...C.value,"eigenvector-laplacian"]),await ke());try{x.value=!0,f.value=`Applying ${V} layout...`,p.value="info",await l(V),L(),f.value=`Applied ${V} layout`,p.value="success"}catch(le){f.value=`Layout failed: ${le.message}`,p.value="error"}finally{x.value=!1}}},ke=async()=>{if(o.value)try{_.value=!0,f.value="Analyzing network...",p.value="info",await d(C.value),A.value&&h({sizeBy:A.value,minRadius:3,maxRadius:20}),L(),fe.value=!0,f.value="Analysis complete",p.value="success"}catch(V){f.value=`Analysis failed: ${V.message}`,p.value="error"}finally{_.value=!1}};return Jt(async()=>{await ee(),v.value=c()}),(V,le)=>(H(),K("div",y$,[we(ka,null,{controls:Ue(()=>[g("div",v$,[g("h1",b$,b(y(n)("degrees.header.title")),1),g("p",_$,b(y(n)("degrees.header.subtitle")),1)]),g("div",w$,[g("h2",x$,b(y(n)("degrees.whatIs.title")),1),g("p",{class:"info-box-text-green",innerHTML:y(n)("degrees.whatIs.description")},null,8,k$)]),g("div",E$,[g("h2",A$,b(y(n)("degrees.status.title")),1),g("div",C$,[f.value?(H(),K("div",N$,[g("div",{class:Xe({"status-message-success":p.value==="success","status-message-error":p.value==="error","status-message-info":p.value==="info"})},[g("div",R$,[p.value==="success"?(H(),K("span",L$,"")):p.value==="error"?(H(),K("span",I$,"")):(H(),K("span",P$,""))]),g("div",D$,b(f.value),1)],2)])):(H(),K("div",S$,[g("div",T$,b(y(n)("degrees.status.ready")),1)]))])]),w.value?(H(),K("div",M$,[g("h2",O$,b(y(n)("degrees.stats.title")),1),g("div",G$,[g("div",F$,[g("div",$$,b(S.value),1),g("div",z$,b(y(n)("degrees.stats.nodes")),1)]),g("div",B$,[g("div",V$,b(M.value),1),g("div",U$,b(y(n)("degrees.stats.edges")),1)]),g("div",j$,[g("div",H$,b(I.value),1),g("div",W$,b(y(n)("degrees.stats.movies")),1)]),g("div",q$,[g("div",K$,b(D.value),1),g("div",X$,b(y(n)("degrees.stats.actors")),1)])])])):Me("",!0),g("div",Z$,[g("h3",Y$,b(y(n)("degrees.legend.title")),1),g("div",J$,[g("div",Q$,[le[3]||(le[3]=g("div",{class:"legend-dot legend-dot-kevin",style:{"background-color":"#ff6600"}},null,-1)),g("span",ez,[g("strong",null,b(y(n)("degrees.legend.kevinBacon")),1)])]),g("div",tz,[le[4]||(le[4]=g("div",{class:"legend-dot",style:{"background-color":"#3b82f6"}},null,-1)),g("span",nz,b(y(n)("degrees.legend.actors")),1)]),g("div",iz,[le[5]||(le[5]=g("div",{class:"legend-dot",style:{"background-color":"#10b981"}},null,-1)),g("span",rz,b(y(n)("degrees.legend.movies")),1)])]),g("div",oz,[g("p",null,[g("strong",null,b(y(n)("degrees.legend.degree1"))+":",1),Ce(" "+b(y(n)("degrees.legend.degree1Desc")),1)]),g("p",null,[g("strong",null,b(y(n)("degrees.legend.degree2"))+":",1),Ce(" "+b(y(n)("degrees.legend.degree2Desc")),1)])])]),w.value?(H(),K("div",sz,[we(m$,{nodes:O.value,edges:$.value,"center-node":"Kevin Bacon",title:y(n)("degrees.baconFinder.title"),placeholder:y(n)("degrees.baconFinder.placeholder"),onPathFound:B,onPathCleared:q},null,8,["nodes","edges","title","placeholder"])])):Me("",!0),g("div",az,[g("h2",lz,b(y(n)("degrees.layout.title")),1),we(Ea,{modelValue:k.value,"onUpdate:modelValue":le[0]||(le[0]=pe=>k.value=pe),"available-layouts":v.value,loading:y(s)||x.value,onApply:_e},null,8,["modelValue","available-layouts","loading"])]),g("div",cz,[g("h2",dz,b(y(n)("degrees.analysis.title")),1),we(Aa,{"selected-metrics":C.value,"onUpdate:selectedMetrics":le[1]||(le[1]=pe=>C.value=pe),"size-metric":A.value,"onUpdate:sizeMetric":le[2]||(le[2]=pe=>A.value=pe),analyzing:_.value,progress:y(u),"show-spectral-metric":!0,onAnalyze:ke},null,8,["selected-metrics","size-metric","analyzing","progress"])]),g("div",uz,[g("h3",hz,b(y(n)("degrees.instructions.title")),1),g("ul",fz,[g("li",{innerHTML:y(n)("degrees.instructions.hover")},null,8,gz),g("li",{innerHTML:y(n)("degrees.instructions.drag")},null,8,pz),g("li",{innerHTML:y(n)("degrees.instructions.zoom")},null,8,mz)])])]),graph:Ue(()=>[y(s)?(H(),K("div",yz,[g("div",vz,[le[6]||(le[6]=g("div",{class:"loading-spinner"},null,-1)),g("p",bz,b(m.value),1)])])):Me("",!0),g("div",{ref_key:"graphContainer",ref:r,class:"w-full h-full"},null,512)]),_:1})]))}},Cz=Cn(Az,[["__scopeId","data-v-05e4dd18"]]),Sz={class:"page-content"},Tz={class:"docs-page-header"},Nz={class:"docs-page-title"},Rz={class:"section-description"},Lz={class:"docs-toc"},Iz={class:"docs-toc-grid"},Pz={href:"#quick-start",class:"docs-toc-link"},Dz={href:"#core-classes",class:"docs-toc-link"},Mz={href:"#workers",class:"docs-toc-link"},Oz={href:"#adapters",class:"docs-toc-link"},Gz={href:"#layouts",class:"docs-toc-link"},Fz={href:"#community",class:"docs-toc-link"},$z={href:"#examples",class:"docs-toc-link"},zz={id:"quick-start",class:"docs-section"},Bz={class:"docs-section-header"},Vz={class:"docs-card"},Uz={class:"docs-card-description"},jz={class:"docs-subsection-title-accent"},Hz={class:"docs-code-block"},Wz={class:"docs-code-block-green"},qz={class:"docs-subsection-title-accent"},Kz={id:"core-classes",class:"docs-section"},Xz={class:"docs-section-header"},Zz={class:"docs-card"},Yz={class:"docs-card-title"},Jz={class:"docs-card-description"},Qz={class:"docs-subsection-title"},e4={class:"docs-method-list"},t4={class:"docs-method-item"},n4={class:"docs-method-name"},i4={class:"docs-method-description"},r4={class:"docs-method-item"},o4={class:"docs-method-name"},s4={class:"docs-method-description"},a4={class:"docs-method-item"},l4={class:"docs-method-name"},c4={class:"docs-method-description"},d4={class:"docs-method-item"},u4={class:"docs-method-name"},h4={class:"docs-method-description"},f4={class:"docs-method-item"},g4={class:"docs-method-name"},p4={class:"docs-method-description"},m4={class:"docs-method-item"},y4={class:"docs-method-name"},v4={class:"docs-method-description"},b4={class:"docs-method-item"},_4={class:"docs-method-name"},w4={class:"docs-method-description"},x4={class:"docs-card"},k4={class:"docs-card-title"},E4={class:"docs-card-description"},A4={class:"docs-subsection-title"},C4={class:"list-disc pl-6 space-y-2 text-secondary mb-6"},S4={class:"docs-subsection-title"},T4={class:"text-secondary mb-3"},N4={class:"docs-subsection-title"},R4={class:"docs-feature-grid-item"},L4={class:"docs-feature-item"},I4={class:"docs-feature-description"},P4={class:"docs-feature-item"},D4={class:"docs-feature-description"},M4={class:"docs-feature-item"},O4={class:"docs-feature-description"},G4={class:"docs-feature-item"},F4={class:"docs-feature-description"},$4={class:"docs-feature-item"},z4={class:"docs-feature-description"},B4={class:"docs-feature-item"},V4={class:"docs-feature-description"},U4={class:"docs-feature-item"},j4={class:"docs-feature-description"},H4={class:"docs-feature-item"},W4={class:"docs-feature-description"},q4={class:"docs-feature-item"},K4={class:"docs-feature-description"},X4={id:"workers",class:"docs-section"},Z4={class:"docs-section-header"},Y4={class:"docs-section-intro"},J4={class:"docs-card"},Q4={class:"docs-card-title"},e5={class:"docs-method-list"},t5={class:"docs-method-item"},n5={class:"docs-method-name"},i5={class:"docs-method-description"},r5={class:"docs-method-item"},o5={class:"docs-method-name"},s5={class:"docs-method-description"},a5={class:"docs-method-item"},l5={class:"docs-method-name"},c5={class:"docs-method-description"},d5={class:"docs-card"},u5={class:"docs-card-title-purple"},h5={class:"docs-card-description"},f5={class:"docs-subsection-title"},g5={class:"list-disc pl-6 space-y-2 text-secondary mb-6"},p5={class:"docs-subsection-title"},m5={class:"list-decimal pl-6 space-y-2 text-secondary mb-6"},y5={class:"docs-card"},v5={class:"docs-card-title-green"},b5={class:"docs-options-box mt-4"},_5={class:"docs-options-list"},w5={class:"docs-card"},x5={class:"docs-card-title-blue"},k5={class:"docs-card-description"},E5={id:"adapters",class:"docs-section"},A5={class:"docs-section-header"},C5={class:"docs-section-intro"},S5={class:"docs-card"},T5={class:"docs-card-title-blue"},N5={class:"docs-card-description"},R5={class:"docs-subsection-title"},L5={class:"docs-method-list"},I5={class:"docs-method-item-blue"},P5={class:"docs-method-name"},D5={class:"docs-method-description"},M5={class:"docs-method-returns"},O5={class:"docs-method-item-blue"},G5={class:"docs-method-name"},F5={class:"docs-method-description"},$5={class:"docs-method-returns"},z5={class:"docs-method-item-blue"},B5={class:"docs-method-name"},V5={class:"docs-method-description"},U5={class:"docs-method-returns"},j5={class:"docs-method-item-blue"},H5={class:"docs-method-name"},W5={class:"docs-method-description"},q5={class:"docs-method-returns"},K5={class:"docs-method-item-blue"},X5={class:"docs-method-name"},Z5={class:"docs-method-description"},Y5={class:"docs-method-returns"},J5={class:"docs-card"},Q5={class:"docs-card-title-green"},e9={class:"docs-card-description"},t9={class:"docs-subsection-title"},n9={class:"docs-method-list"},i9={class:"docs-method-item-green"},r9={class:"docs-method-name"},o9={class:"docs-method-description"},s9={class:"docs-method-returns"},a9={class:"docs-method-item-green"},l9={class:"docs-method-name"},c9={class:"docs-method-description"},d9={class:"docs-method-returns"},u9={class:"docs-method-item-green"},h9={class:"docs-method-name"},f9={class:"docs-method-description"},g9={class:"docs-method-returns"},p9={class:"docs-method-item-green"},m9={class:"docs-method-name"},y9={class:"docs-method-description"},v9={class:"docs-method-returns"},b9={class:"docs-method-item-green"},_9={class:"docs-method-name"},w9={class:"docs-method-description"},x9={class:"docs-method-returns"},k9={class:"docs-method-item-green"},E9={class:"docs-method-name"},A9={class:"docs-method-description"},C9={class:"docs-method-returns"},S9={class:"docs-card"},T9={class:"docs-card-title-yellow"},N9={class:"docs-card-description"},R9={class:"docs-subsection-title"},L9={class:"docs-method-list"},I9={class:"docs-method-item-yellow"},P9={class:"docs-method-name"},D9={class:"docs-method-description"},M9={class:"docs-method-returns"},O9={class:"docs-method-item-yellow"},G9={class:"docs-method-name"},F9={class:"docs-method-description"},$9={class:"docs-method-returns"},z9={class:"docs-method-item-yellow"},B9={class:"docs-method-name"},V9={class:"docs-method-description"},U9={class:"docs-method-returns"},j9={class:"docs-method-item-yellow"},H9={class:"docs-method-name"},W9={class:"docs-method-description"},q9={class:"docs-method-returns"},K9={id:"layouts",class:"docs-section"},X9={class:"docs-section-header"},Z9={class:"docs-section-intro"},Y9={class:"docs-note"},J9={class:"docs-card"},Q9={class:"docs-card-title-purple"},e8={class:"text-secondary mb-2"},t8={class:"docs-complexity"},n8={class:"docs-best-for"},i8={class:"docs-subsection-title-lg"},r8={class:"docs-options-box"},o8={class:"docs-options-list"},s8={class:"docs-card"},a8={class:"docs-card-title-indigo"},l8={class:"text-secondary mb-2"},c8={class:"docs-complexity"},d8={class:"docs-best-for"},u8={class:"docs-subsection-title-lg"},h8={class:"docs-options-box"},f8={class:"docs-options-list"},g8={class:"docs-card"},p8={class:"docs-card-title-pink"},m8={class:"text-secondary mb-2"},y8={class:"docs-complexity"},v8={class:"text-sm text-accent mb-2"},b8={class:"docs-warning"},_8={class:"docs-feature-grid"},w8={class:"docs-card-compact"},x8={class:"docs-card-title-sm text-blue-600 dark:text-blue-400"},k8={class:"docs-feature-description mb-2"},E8={class:"text-xs text-gray-600 dark:text-gray-400 mb-2"},A8={class:"text-xs text-accent"},C8={class:"docs-card-compact"},S8={class:"docs-card-title-sm text-green-600 dark:text-green-400"},T8={class:"docs-feature-description mb-2"},N8={class:"text-xs text-gray-600 dark:text-gray-400 mb-2"},R8={class:"text-xs text-accent mb-1"},L8={class:"text-xs text-red-600 dark:text-red-400"},I8={class:"docs-card-compact"},P8={class:"docs-card-title-sm text-yellow-600 dark:text-yellow-400"},D8={class:"docs-feature-description mb-2"},M8={class:"text-xs text-gray-600 dark:text-gray-400 mb-2"},O8={class:"text-xs text-accent"},G8={class:"docs-card-compact"},F8={class:"docs-card-title-sm text-red-600 dark:text-red-400"},$8={class:"docs-feature-description mb-2"},z8={class:"text-xs text-gray-600 dark:text-gray-400 mb-2"},B8={class:"text-xs text-accent"},V8={class:"docs-card-compact"},U8={class:"docs-card-title-sm text-teal-600 dark:text-teal-400"},j8={class:"docs-feature-description mb-2"},H8={class:"text-xs text-gray-600 dark:text-gray-400 mb-2"},W8={class:"text-xs text-accent"},q8={class:"docs-card-compact"},K8={class:"docs-card-title-sm text-gray-600 dark:text-gray-400"},X8={class:"docs-feature-description mb-2"},Z8={class:"text-xs text-gray-600 dark:text-gray-400 mb-2"},Y8={class:"text-xs text-accent"},J8={class:"docs-tip-box"},Q8={class:"docs-subsection-title-lg"},eB={class:"text-sm text-secondary mb-3"},tB={id:"community",class:"docs-section"},nB={class:"docs-section-header"},iB={class:"docs-section-intro"},rB={class:"docs-card"},oB={class:"docs-card-title"},sB={class:"docs-card-description"},aB={class:"docs-subsection-title"},lB={class:"docs-method-list"},cB={class:"docs-method-item"},dB={class:"docs-method-name"},uB={class:"docs-method-description"},hB={class:"docs-method-returns"},fB={class:"docs-method-item"},gB={class:"docs-method-name"},pB={class:"docs-method-description"},mB={class:"docs-method-returns"},yB={class:"docs-method-list"},vB={class:"docs-method-item-purple"},bB={class:"docs-method-name"},_B={class:"docs-method-description"},wB={class:"docs-method-returns"},xB={class:"docs-method-item-purple"},kB={class:"docs-method-name"},EB={class:"docs-method-description"},AB={class:"docs-method-item-purple"},CB={class:"docs-method-name"},SB={class:"docs-method-description"},TB={class:"docs-card"},NB={class:"docs-card-title-orange"},RB={class:"text-secondary mb-2"},LB={class:"docs-complexity"},IB={class:"docs-card-description"},PB={class:"docs-subsection-title-lg"},DB={class:"docs-options-box"},MB={class:"docs-options-list"},OB={class:"docs-card"},GB={class:"docs-card-title-green"},FB={class:"docs-card-description"},$B={class:"docs-options-box"},zB={class:"docs-options-list space-y-2"},BB={id:"examples",class:"docs-section"},VB={class:"docs-section-header"},UB={class:"docs-section-intro"},jB={class:"docs-card"},HB={class:"docs-card-title"},WB={class:"text-secondary mb-4"},qB={class:"docs-card"},KB={class:"docs-card-title-blue"},XB={class:"text-secondary mb-4"},ZB={class:"docs-card"},YB={class:"docs-card-title-purple"},JB={class:"text-secondary mb-4"},QB=`import NetworkStats from '@guinetik/graph-js';

const network = [
  { source: 'Alice', target: 'Bob' },
  { source: 'Bob', target: 'Charlie' },
  { source: 'Charlie', target: 'Alice' }
];

const analyzer = new NetworkStats({ verbose: false });
const results = await analyzer.analyze(network, ['degree', 'eigenvector']);

console.log(results);
// [
//   { id: 'Alice', degree: 2, eigenvector: 0.577 },
//   { id: 'Bob', degree: 2, eigenvector: 0.577 },
//   { id: 'Charlie', degree: 2, eigenvector: 0.577 }
// ]`,e6=`import { Graph } from '@guinetik/graph-js';

const graph = new Graph();
graph.addNodesFrom(['A', 'B', 'C']);
graph.addEdge('A', 'B', 1);
graph.addEdge('B', 'C', 2);

console.log(graph.getNeighbors('B')); // ['A', 'C']
console.log(graph.numberOfNodes());    // 3
console.log(graph.numberOfEdges());    // 2`,t6=`import NetworkStats from '@guinetik/graph-js';

const analyzer = new NetworkStats({
  maxWorkers: 4,              // Max workers (default: auto-detect)
  enableAffinity: true,       // Enable worker affinity (default: true)
  affinityCacheLimit: 50,     // Max cached functions per worker
  taskTimeout: 300000,        // 5 minute timeout
  verbose: true               // See affinity logs:  hits,  updates
});

// Run analysis - affinity routing happens automatically
const results = await analyzer.analyze(network, ['degree', 'eigenvector']);

// Cleanup when done
await analyzer.dispose();`,n6="import WorkerManager from '@guinetik/graph-js';\n\n// Get pool status\nconst status = WorkerManager.getStatus();\nconsole.log(`Workers: ${status.availableWorkers}/${status.totalWorkers}`);\nconsole.log(`Affinity hit rate: ${(status.affinity.hitRate * 100).toFixed(1)}%`);\n\n// Get detailed affinity stats\nconst stats = WorkerManager.getAffinityStats();\nconsole.log(`Hits: ${stats.hits}, Misses: ${stats.misses}`);\n\n// Per-worker cache info\nstats.workerCaches.forEach(w => {\n  console.log(`Worker ${w.workerId}: ${w.cachedFunctions.length} cached`);\n  console.log(`  Functions: ${w.cachedFunctions.join(', ')}`);\n});",i6=`import { CSVAdapter } from '@guinetik/graph-js';

// Load from URLs
const graphData = await CSVAdapter.loadFromURL(
  '../data/edges.csv',
  '../data/nodes.csv'
);

// Export to CSV
const edgesCSV = CSVAdapter.toEdgeList(graphData);
const nodesCSV = CSVAdapter.toNodes(graphData);`,r6=`import { JSONAdapter } from '@guinetik/graph-js';

// Convert D3 format to GraphData
const graphData = JSONAdapter.fromD3(d3Data);

// Convert to Cytoscape format
const cytoData = JSONAdapter.toCytoscape(graphData);

// Auto-detect format
const data = JSONAdapter.fromFormat(unknownJSON);`,o6=`import { NetworkXAdapter } from '@guinetik/graph-js';

// From Python: nx.node_link_data(G)
const graphData = NetworkXAdapter.fromNodeLink(nxData);

// To Python: G = nx.node_link_graph(nxData)
const nxData = NetworkXAdapter.toNodeLink(graphData, {
  directed: false,
  multigraph: false
});`,s6=`import { Graph, ForceDirectedLayout } from '@guinetik/graph-js';

const graph = new Graph();
graph.addNodesFrom(['A', 'B', 'C']);
graph.addEdge('A', 'B');
graph.addEdge('B', 'C');

const layout = new ForceDirectedLayout(graph, {
  iterations: 100,
  scale: 200
});
const positions = await layout.getPositions();
// { 'A': {x: 120, y: 45}, 'B': {x: -30, y: 90}, ... }`,a6=`import { KamadaKawaiLayout } from '@guinetik/graph-js';

const layout = new KamadaKawaiLayout(graph, {
  iterations: 100,
  scale: 200
});
const positions = await layout.getPositions();`,l6=`import { NetworkStats, Graph, SpectralLayout } from '@guinetik/graph-js';

// First compute eigenvector-laplacian
const analyzer = new NetworkStats();
await analyzer.analyze(edges, ['eigenvector-laplacian']);

// Then apply layout
const layout = new SpectralLayout(graph, { scale: 200 });
const positions = await layout.getPositions();`,c6=`// All layouts follow this pattern
const layout = new SomeLayout(graph, options);
const positions = await layout.getPositions({
  onProgress: (progress) => console.log(\`\${progress * 100}%\`)
});`,d6=`import { CommunityDetection, LouvainAlgorithm } from '@guinetik/graph-js';

// Method 1: Direct detection from GraphData
const result = await CommunityDetection.detect(graphData, 'louvain', {
  resolution: 1.0,
  onProgress: (p) => console.log(\`\${Math.round(p * 100)}%\`)
});

// Method 2: Using algorithm instance
const detector = new CommunityDetection(graph);
const algorithm = new LouvainAlgorithm({ resolution: 1.0 });
const result = await detector.detectCommunities(algorithm);

console.log(result.communities);     // { 'A': 0, 'B': 0, 'C': 1 }
console.log(result.modularity);      // 0.42
console.log(result.numCommunities);  // 2`,u6=`import NetworkStats from '@guinetik/graph-js';

const network = [
  { source: 'Alice', target: 'Bob', weight: 1 },
  { source: 'Bob', target: 'Carol', weight: 2 },
  { source: 'Carol', target: 'Dave', weight: 1 }
];

const analyzer = new NetworkStats({ verbose: true });
const results = await analyzer.analyze(network, ['degree', 'eigenvector', 'betweenness']);

console.log(results);
// [
//   { id: 'Alice', degree: 1, eigenvector: 0.34, betweenness: 0 },
//   { id: 'Bob', degree: 2, eigenvector: 0.58, betweenness: 0.67 },
//   ...
// ]

await analyzer.dispose(); // Cleanup workers`,h6=`import { CSVAdapter } from '@guinetik/graph-js';
import NetworkStats from '@guinetik/graph-js';

// Load CSV data
const graphData = await CSVAdapter.loadFromURL(
  '../data/edges.csv',
  '../data/nodes.csv'
);

// Convert to edge list for analysis
const network = graphData.edges;

// Analyze
const analyzer = new NetworkStats();
const results = await analyzer.analyze(network, ['degree', 'clustering']);
await analyzer.dispose();`,f6=`import NetworkStats, {
  CSVAdapter,
  Graph,
  KamadaKawaiLayout,
  CommunityDetection
} from '@guinetik/graph-js';

// 1. Load data
const graphData = await CSVAdapter.loadFromURL('../data/edges.csv');

// 2. Analyze network
const analyzer = new NetworkStats();
const nodeMetrics = await analyzer.analyze(graphData.edges, [
  'degree',
  'eigenvector',
  'betweenness'
]);

// 3. Apply layout
const graph = new Graph();
graphData.edges.forEach(e => {
  graph.addNode(e.source);
  graph.addNode(e.target);
  graph.addEdge(e.source, e.target, e.weight || 1);
});

const layout = new KamadaKawaiLayout(graph, { scale: 200 });
const positions = await layout.getPositions();

// 4. Detect communities
const communityResult = await CommunityDetection.detect(
  graphData,
  'louvain'
);

// 5. Combine results
const finalData = nodeMetrics.map(node => ({
  ...node,
  x: positions[node.id].x,
  y: positions[node.id].y,
  community: communityResult.communities[node.id]
}));

console.log('Analysis complete!', finalData);
console.log('Modularity:', communityResult.modularity);

await analyzer.dispose();`,g6={__name:"DocsPage",setup(t){const{t:e}=fn();return(n,i)=>(H(),K("div",Sz,[g("div",Tz,[g("h1",Nz,b(y(e)("docs.title")),1),g("p",Rz,b(y(e)("docs.subtitle")),1)]),g("div",Lz,[i[7]||(i[7]=g("h2",{class:"docs-toc-title"}," Contents",-1)),g("div",Iz,[g("a",Pz,[i[0]||(i[0]=g("span",{class:"docs-toc-icon"},"",-1)),g("span",null,b(y(e)("docs.sections.quickStart")),1)]),g("a",Dz,[i[1]||(i[1]=g("span",{class:"docs-toc-icon"},"",-1)),g("span",null,b(y(e)("docs.sections.coreClasses")),1)]),g("a",Mz,[i[2]||(i[2]=g("span",{class:"docs-toc-icon"},"",-1)),g("span",null,b(y(e)("docs.sections.workers")),1)]),g("a",Oz,[i[3]||(i[3]=g("span",{class:"docs-toc-icon"},"",-1)),g("span",null,b(y(e)("docs.sections.adapters")),1)]),g("a",Gz,[i[4]||(i[4]=g("span",{class:"docs-toc-icon"},"",-1)),g("span",null,b(y(e)("docs.sections.layouts")),1)]),g("a",Fz,[i[5]||(i[5]=g("span",{class:"docs-toc-icon"},"",-1)),g("span",null,b(y(e)("docs.sections.community")),1)]),g("a",$z,[i[6]||(i[6]=g("span",{class:"docs-toc-icon"},"",-1)),g("span",null,b(y(e)("docs.sections.examples")),1)])])]),g("section",zz,[g("h2",Bz,[i[8]||(i[8]=g("span",{class:"docs-section-header-icon"},"",-1)),g("span",null,b(y(e)("docs.quickStart.title")),1)]),g("div",Vz,[g("p",Uz,b(y(e)("docs.quickStart.description")),1),g("h3",jz,b(y(e)("docs.quickStart.install")),1),g("div",Hz,[g("code",Wz,b(y(e)("docs.quickStart.installCmd")),1)]),g("h3",qz,b(y(e)("docs.quickStart.basicUsage")),1),we(yt,{code:QB,language:"javascript"})])]),g("section",Kz,[g("h2",Xz,[i[9]||(i[9]=g("span",{class:"docs-section-header-icon"},"",-1)),g("span",null,b(y(e)("docs.sections.coreClasses")),1)]),g("div",Zz,[g("h3",Yz,b(y(e)("docs.graph.title")),1),g("p",Jz,b(y(e)("docs.graph.description")),1),i[10]||(i[10]=g("div",{class:"docs-code-block"},[g("code",{class:"docs-code-block-text"},"const graph = new Graph();")],-1)),g("h4",Qz,b(y(e)("docs.graph.methods")),1),g("div",e4,[g("div",t4,[g("code",n4,b(y(e)("docs.graph.methodsList.addNode.name")),1),g("p",i4,b(y(e)("docs.graph.methodsList.addNode.description")),1)]),g("div",r4,[g("code",o4,b(y(e)("docs.graph.methodsList.addNodesFrom.name")),1),g("p",s4,b(y(e)("docs.graph.methodsList.addNodesFrom.description")),1)]),g("div",a4,[g("code",l4,b(y(e)("docs.graph.methodsList.addEdge.name")),1),g("p",c4,b(y(e)("docs.graph.methodsList.addEdge.description")),1)]),g("div",d4,[g("code",u4,b(y(e)("docs.graph.methodsList.removeNode.name")),1),g("p",h4,b(y(e)("docs.graph.methodsList.removeNode.description")),1)]),g("div",f4,[g("code",g4,b(y(e)("docs.graph.methodsList.getNeighbors.name")),1),g("p",p4,b(y(e)("docs.graph.methodsList.getNeighbors.description")),1)]),g("div",m4,[g("code",y4,b(y(e)("docs.graph.methodsList.hasEdge.name")),1),g("p",v4,b(y(e)("docs.graph.methodsList.hasEdge.description")),1)]),g("div",b4,[g("code",_4,b(y(e)("docs.graph.methodsList.numberOfNodes.name")),1),g("p",w4,b(y(e)("docs.graph.methodsList.numberOfNodes.description")),1)])]),we(yt,{code:e6,language:"javascript"})]),g("div",x4,[g("h3",k4,b(y(e)("docs.networkStats.title")),1),g("p",E4,b(y(e)("docs.networkStats.description")),1),g("h4",A4,b(y(e)("docs.networkStats.constructor")),1),i[22]||(i[22]=g("div",{class:"docs-code-block"},[g("code",{class:"docs-code-block-text"},"new NetworkStats(options?)")],-1)),g("ul",C4,[g("li",null,[i[11]||(i[11]=g("code",{class:"docs-code-inline-xs"},"maxIter:",-1)),Ce(" "+b(y(e)("docs.networkStats.constructorParams.maxIter")),1)]),g("li",null,[i[12]||(i[12]=g("code",{class:"docs-code-inline-xs"},"verbose:",-1)),Ce(" "+b(y(e)("docs.networkStats.constructorParams.verbose")),1)])]),g("h4",S4,b(y(e)("docs.networkStats.analyze.title")),1),g("p",T4,b(y(e)("docs.networkStats.analyze.description")),1),i[23]||(i[23]=g("div",{class:"docs-code-block"},[g("code",{class:"docs-code-block-text"},"analyzer.analyze(network, features?)")],-1)),g("h4",N4,b(y(e)("docs.networkStats.features.title")),1),g("div",R4,[g("div",L4,[i[13]||(i[13]=g("span",{class:"docs-feature-badge"},"degree",-1)),g("span",I4,b(y(e)("docs.networkStats.features.degree")),1)]),g("div",P4,[i[14]||(i[14]=g("span",{class:"docs-feature-badge"},"eigenvector",-1)),g("span",D4,b(y(e)("docs.networkStats.features.eigenvector")),1)]),g("div",M4,[i[15]||(i[15]=g("span",{class:"docs-feature-badge"},"eigenvector-laplacian",-1)),g("span",O4,b(y(e)("docs.networkStats.features.eigenvectorLaplacian")),1)]),g("div",G4,[i[16]||(i[16]=g("span",{class:"docs-feature-badge"},"betweenness",-1)),g("span",F4,b(y(e)("docs.networkStats.features.betweenness")),1)]),g("div",$4,[i[17]||(i[17]=g("span",{class:"docs-feature-badge"},"clustering",-1)),g("span",z4,b(y(e)("docs.networkStats.features.clustering")),1)]),g("div",B4,[i[18]||(i[18]=g("span",{class:"docs-feature-badge"},"closeness",-1)),g("span",V4,b(y(e)("docs.networkStats.features.closeness")),1)]),g("div",U4,[i[19]||(i[19]=g("span",{class:"docs-feature-badge"},"cliques",-1)),g("span",j4,b(y(e)("docs.networkStats.features.cliques")),1)]),g("div",H4,[i[20]||(i[20]=g("span",{class:"docs-feature-badge"},"ego-density",-1)),g("span",W4,b(y(e)("docs.networkStats.features.egoDensity")),1)]),g("div",q4,[i[21]||(i[21]=g("span",{class:"docs-feature-badge"},"modularity",-1)),g("span",K4,b(y(e)("docs.networkStats.features.modularity")),1)])])])]),g("section",X4,[g("h2",Z4,[i[24]||(i[24]=g("span",{class:"docs-section-header-icon"},"",-1)),g("span",null,b(y(e)("docs.workers.title")),1)]),g("p",Y4,b(y(e)("docs.workers.description")),1),g("div",J4,[g("h3",Q4,b(y(e)("docs.workers.components.title")),1),g("div",e5,[g("div",t5,[g("code",n5,b(y(e)("docs.workers.components.workerManager.name")),1),g("p",i5,b(y(e)("docs.workers.components.workerManager.description")),1)]),g("div",r5,[g("code",o5,b(y(e)("docs.workers.components.workerPool.name")),1),g("p",s5,b(y(e)("docs.workers.components.workerPool.description")),1)]),g("div",a5,[g("code",l5,b(y(e)("docs.workers.components.workerAdapter.name")),1),g("p",c5,b(y(e)("docs.workers.components.workerAdapter.description")),1)])])]),g("div",d5,[g("h3",u5,b(y(e)("docs.workers.affinity.title")),1),g("p",h5,b(y(e)("docs.workers.affinity.description")),1),g("h4",f5,b(y(e)("docs.workers.affinity.howItWorks")),1),g("ul",g5,[(H(!0),K(qe,null,ln(y(e)("docs.workers.affinity.howItWorksSteps"),(r,o)=>(H(),K("li",{key:"how-"+o},b(r),1))),128))]),g("h4",p5,b(y(e)("docs.workers.affinity.selectionTitle")),1),g("ul",m5,[(H(!0),K(qe,null,ln(y(e)("docs.workers.affinity.selectionSteps"),(r,o)=>(H(),K("li",{key:"sel-"+o},b(r),1))),128))])]),g("div",y5,[g("h3",v5,b(y(e)("docs.workers.config.title")),1),we(yt,{code:t6,language:"javascript"}),g("div",b5,[i[29]||(i[29]=g("h5",{class:"docs-options-title"},"Options:",-1)),g("ul",_5,[g("li",null,[i[25]||(i[25]=g("code",{class:"docs-options-code"},"maxWorkers:",-1)),Ce(" "+b(y(e)("docs.workers.config.options.maxWorkers")),1)]),g("li",null,[i[26]||(i[26]=g("code",{class:"docs-options-code"},"enableAffinity:",-1)),Ce(" "+b(y(e)("docs.workers.config.options.enableAffinity")),1)]),g("li",null,[i[27]||(i[27]=g("code",{class:"docs-options-code"},"affinityCacheLimit:",-1)),Ce(" "+b(y(e)("docs.workers.config.options.affinityCacheLimit")),1)]),g("li",null,[i[28]||(i[28]=g("code",{class:"docs-options-code"},"taskTimeout:",-1)),Ce(" "+b(y(e)("docs.workers.config.options.taskTimeout")),1)])])])]),g("div",w5,[g("h3",x5,b(y(e)("docs.workers.monitoring.title")),1),g("p",k5,b(y(e)("docs.workers.monitoring.description")),1),we(yt,{code:n6,language:"javascript"})])]),g("section",E5,[g("h2",A5,[i[30]||(i[30]=g("span",{class:"docs-section-header-icon"},"",-1)),g("span",null,b(y(e)("docs.adapters.title")),1)]),g("p",C5,b(y(e)("docs.adapters.description")),1),g("div",S5,[g("h3",T5,b(y(e)("docs.adapters.csv.title")),1),g("p",N5,b(y(e)("docs.adapters.csv.description")),1),g("h4",R5,b(y(e)("docs.adapters.csv.methods")),1),g("div",L5,[g("div",I5,[g("code",P5,b(y(e)("docs.adapters.csv.methodsList.fromEdgeList.name")),1),g("p",D5,b(y(e)("docs.adapters.csv.methodsList.fromEdgeList.description")),1),g("p",M5,b(y(e)("docs.adapters.csv.methodsList.fromEdgeList.returns")),1)]),g("div",O5,[g("code",G5,b(y(e)("docs.adapters.csv.methodsList.fromNodes.name")),1),g("p",F5,b(y(e)("docs.adapters.csv.methodsList.fromNodes.description")),1),g("p",$5,b(y(e)("docs.adapters.csv.methodsList.fromNodes.returns")),1)]),g("div",z5,[g("code",B5,b(y(e)("docs.adapters.csv.methodsList.loadFromURL.name")),1),g("p",V5,b(y(e)("docs.adapters.csv.methodsList.loadFromURL.description")),1),g("p",U5,b(y(e)("docs.adapters.csv.methodsList.loadFromURL.returns")),1)]),g("div",j5,[g("code",H5,b(y(e)("docs.adapters.csv.methodsList.toEdgeList.name")),1),g("p",W5,b(y(e)("docs.adapters.csv.methodsList.toEdgeList.description")),1),g("p",q5,b(y(e)("docs.adapters.csv.methodsList.toEdgeList.returns")),1)]),g("div",K5,[g("code",X5,b(y(e)("docs.adapters.csv.methodsList.toNodes.name")),1),g("p",Z5,b(y(e)("docs.adapters.csv.methodsList.toNodes.description")),1),g("p",Y5,b(y(e)("docs.adapters.csv.methodsList.toNodes.returns")),1)])]),we(yt,{code:i6,language:"javascript"})]),g("div",J5,[g("h3",Q5,b(y(e)("docs.adapters.json.title")),1),g("p",e9,b(y(e)("docs.adapters.json.description")),1),g("h4",t9,b(y(e)("docs.adapters.json.methods")),1),g("div",n9,[g("div",i9,[g("code",r9,b(y(e)("docs.adapters.json.methodsList.fromD3.name")),1),g("p",o9,b(y(e)("docs.adapters.json.methodsList.fromD3.description")),1),g("p",s9,b(y(e)("docs.adapters.json.methodsList.fromD3.returns")),1)]),g("div",a9,[g("code",l9,b(y(e)("docs.adapters.json.methodsList.fromCytoscape.name")),1),g("p",c9,b(y(e)("docs.adapters.json.methodsList.fromCytoscape.description")),1),g("p",d9,b(y(e)("docs.adapters.json.methodsList.fromCytoscape.returns")),1)]),g("div",u9,[g("code",h9,b(y(e)("docs.adapters.json.methodsList.fromFormat.name")),1),g("p",f9,b(y(e)("docs.adapters.json.methodsList.fromFormat.description")),1),g("p",g9,b(y(e)("docs.adapters.json.methodsList.fromFormat.returns")),1)]),g("div",p9,[g("code",m9,b(y(e)("docs.adapters.json.methodsList.toD3.name")),1),g("p",y9,b(y(e)("docs.adapters.json.methodsList.toD3.description")),1),g("p",v9,b(y(e)("docs.adapters.json.methodsList.toD3.returns")),1)]),g("div",b9,[g("code",_9,b(y(e)("docs.adapters.json.methodsList.toCytoscape.name")),1),g("p",w9,b(y(e)("docs.adapters.json.methodsList.toCytoscape.description")),1),g("p",x9,b(y(e)("docs.adapters.json.methodsList.toCytoscape.returns")),1)]),g("div",k9,[g("code",E9,b(y(e)("docs.adapters.json.methodsList.loadFromURL.name")),1),g("p",A9,b(y(e)("docs.adapters.json.methodsList.loadFromURL.description")),1),g("p",C9,b(y(e)("docs.adapters.json.methodsList.loadFromURL.returns")),1)])]),we(yt,{code:r6,language:"javascript"})]),g("div",S9,[g("h3",T9,b(y(e)("docs.adapters.networkx.title")),1),g("p",N9,b(y(e)("docs.adapters.networkx.description")),1),g("h4",R9,b(y(e)("docs.adapters.networkx.methods")),1),g("div",L9,[g("div",I9,[g("code",P9,b(y(e)("docs.adapters.networkx.methodsList.fromNodeLink.name")),1),g("p",D9,b(y(e)("docs.adapters.networkx.methodsList.fromNodeLink.description")),1),g("p",M9,b(y(e)("docs.adapters.networkx.methodsList.fromNodeLink.returns")),1)]),g("div",O9,[g("code",G9,b(y(e)("docs.adapters.networkx.methodsList.fromAdjacency.name")),1),g("p",F9,b(y(e)("docs.adapters.networkx.methodsList.fromAdjacency.description")),1),g("p",$9,b(y(e)("docs.adapters.networkx.methodsList.fromAdjacency.returns")),1)]),g("div",z9,[g("code",B9,b(y(e)("docs.adapters.networkx.methodsList.toNodeLink.name")),1),g("p",V9,b(y(e)("docs.adapters.networkx.methodsList.toNodeLink.description")),1),g("p",U9,b(y(e)("docs.adapters.networkx.methodsList.toNodeLink.returns")),1)]),g("div",j9,[g("code",H9,b(y(e)("docs.adapters.networkx.methodsList.toAdjacency.name")),1),g("p",W9,b(y(e)("docs.adapters.networkx.methodsList.toAdjacency.description")),1),g("p",q9,b(y(e)("docs.adapters.networkx.methodsList.toAdjacency.returns")),1)])]),we(yt,{code:o6,language:"javascript"})])]),g("section",K9,[g("h2",X9,[i[31]||(i[31]=g("span",{class:"docs-section-header-icon"},"",-1)),g("span",null,b(y(e)("docs.layouts.title")),1)]),g("p",Z9,b(y(e)("docs.layouts.description")),1),g("p",Y9," "+b(y(e)("docs.layouts.note")),1),g("div",J9,[g("h3",Q9,b(y(e)("docs.layouts.forceDirected.title")),1),g("p",e8,b(y(e)("docs.layouts.forceDirected.description")),1),g("p",t8,b(y(e)("docs.layouts.forceDirected.complexity")),1),g("p",n8,b(y(e)("docs.layouts.forceDirected.bestFor")),1),g("h4",i8,b(y(e)("docs.layouts.forceDirected.constructor")),1),g("div",r8,[i[38]||(i[38]=g("h5",{class:"docs-options-title"},"Options:",-1)),g("ul",o8,[g("li",null,[i[32]||(i[32]=g("code",{class:"docs-options-code"},"iterations:",-1)),Ce(" "+b(y(e)("docs.layouts.forceDirected.options.iterations")),1)]),g("li",null,[i[33]||(i[33]=g("code",{class:"docs-options-code"},"k:",-1)),Ce(" "+b(y(e)("docs.layouts.forceDirected.options.k")),1)]),g("li",null,[i[34]||(i[34]=g("code",{class:"docs-options-code"},"scale:",-1)),Ce(" "+b(y(e)("docs.layouts.forceDirected.options.scale")),1)]),g("li",null,[i[35]||(i[35]=g("code",{class:"docs-options-code"},"center:",-1)),Ce(" "+b(y(e)("docs.layouts.forceDirected.options.center")),1)]),g("li",null,[i[36]||(i[36]=g("code",{class:"docs-options-code"},"initialPositions:",-1)),Ce(" "+b(y(e)("docs.layouts.forceDirected.options.initialPositions")),1)]),g("li",null,[i[37]||(i[37]=g("code",{class:"docs-options-code"},"threshold:",-1)),Ce(" "+b(y(e)("docs.layouts.forceDirected.options.threshold")),1)])])]),we(yt,{code:s6,language:"javascript"})]),g("div",s8,[g("h3",a8,b(y(e)("docs.layouts.kamadaKawai.title")),1),g("p",l8,b(y(e)("docs.layouts.kamadaKawai.description")),1),g("p",c8,b(y(e)("docs.layouts.kamadaKawai.complexity")),1),g("p",d8,b(y(e)("docs.layouts.kamadaKawai.bestFor")),1),g("h4",u8,b(y(e)("docs.layouts.kamadaKawai.constructor")),1),g("div",h8,[i[45]||(i[45]=g("h5",{class:"docs-options-title"},"Options:",-1)),g("ul",f8,[g("li",null,[i[39]||(i[39]=g("code",{class:"docs-options-code"},"iterations:",-1)),Ce(" "+b(y(e)("docs.layouts.kamadaKawai.options.iterations")),1)]),g("li",null,[i[40]||(i[40]=g("code",{class:"docs-options-code"},"scale:",-1)),Ce(" "+b(y(e)("docs.layouts.kamadaKawai.options.scale")),1)]),g("li",null,[i[41]||(i[41]=g("code",{class:"docs-options-code"},"center:",-1)),Ce(" "+b(y(e)("docs.layouts.kamadaKawai.options.center")),1)]),g("li",null,[i[42]||(i[42]=g("code",{class:"docs-options-code"},"initialPositions:",-1)),Ce(" "+b(y(e)("docs.layouts.kamadaKawai.options.initialPositions")),1)]),g("li",null,[i[43]||(i[43]=g("code",{class:"docs-options-code"},"threshold:",-1)),Ce(" "+b(y(e)("docs.layouts.kamadaKawai.options.threshold")),1)]),g("li",null,[i[44]||(i[44]=g("code",{class:"docs-options-code"},"K:",-1)),Ce(" "+b(y(e)("docs.layouts.kamadaKawai.options.K")),1)])])]),we(yt,{code:a6,language:"javascript"})]),g("div",g8,[g("h3",p8,b(y(e)("docs.layouts.spectral.title")),1),g("p",m8,b(y(e)("docs.layouts.spectral.description")),1),g("p",y8,b(y(e)("docs.layouts.spectral.complexity")),1),g("p",v8,b(y(e)("docs.layouts.spectral.bestFor")),1),g("p",b8," "+b(y(e)("docs.layouts.spectral.requires")),1),we(yt,{code:l6,language:"javascript"})]),g("div",_8,[g("div",w8,[g("h3",x8,b(y(e)("docs.layouts.circular.title")),1),g("p",k8,b(y(e)("docs.layouts.circular.description")),1),g("p",E8,b(y(e)("docs.layouts.circular.complexity")),1),g("p",A8,b(y(e)("docs.layouts.circular.bestFor")),1)]),g("div",C8,[g("h3",S8,b(y(e)("docs.layouts.shell.title")),1),g("p",T8,b(y(e)("docs.layouts.shell.description")),1),g("p",N8,b(y(e)("docs.layouts.shell.complexity")),1),g("p",R8,b(y(e)("docs.layouts.shell.bestFor")),1),g("p",L8," "+b(y(e)("docs.layouts.shell.requires")),1)]),g("div",I8,[g("h3",P8,b(y(e)("docs.layouts.spiral.title")),1),g("p",D8,b(y(e)("docs.layouts.spiral.description")),1),g("p",M8,b(y(e)("docs.layouts.spiral.complexity")),1),g("p",O8,b(y(e)("docs.layouts.spiral.bestFor")),1)]),g("div",G8,[g("h3",F8,b(y(e)("docs.layouts.bfs.title")),1),g("p",$8,b(y(e)("docs.layouts.bfs.description")),1),g("p",z8,b(y(e)("docs.layouts.bfs.complexity")),1),g("p",B8,b(y(e)("docs.layouts.bfs.bestFor")),1)]),g("div",V8,[g("h3",U8,b(y(e)("docs.layouts.bipartite.title")),1),g("p",j8,b(y(e)("docs.layouts.bipartite.description")),1),g("p",H8,b(y(e)("docs.layouts.bipartite.complexity")),1),g("p",W8,b(y(e)("docs.layouts.bipartite.bestFor")),1)]),g("div",q8,[g("h3",K8,b(y(e)("docs.layouts.random.title")),1),g("p",X8,b(y(e)("docs.layouts.random.description")),1),g("p",Z8,b(y(e)("docs.layouts.random.complexity")),1),g("p",Y8,b(y(e)("docs.layouts.random.bestFor")),1)])]),g("div",J8,[g("h4",Q8,b(y(e)("docs.layouts.usage")),1),g("p",eB,b(y(e)("docs.layouts.usageDescription")),1),we(yt,{code:c6,language:"javascript"})])]),g("section",tB,[g("h2",nB,[i[46]||(i[46]=g("span",{class:"docs-section-header-icon"},"",-1)),g("span",null,b(y(e)("docs.community.title")),1)]),g("p",iB,b(y(e)("docs.community.description")),1),g("div",rB,[g("h3",oB,b(y(e)("docs.community.mainClass.title")),1),g("p",sB,b(y(e)("docs.community.mainClass.description")),1),g("h4",aB,b(y(e)("docs.community.mainClass.constructor")),1),i[47]||(i[47]=g("div",{class:"docs-code-block"},[g("code",{class:"docs-code-block-text"},"new CommunityDetection(graph)")],-1)),i[48]||(i[48]=g("h4",{class:"docs-subsection-title"},"Methods",-1)),g("div",lB,[g("div",cB,[g("code",dB,b(y(e)("docs.community.mainClass.methods.detectCommunities.name")),1),g("p",uB,b(y(e)("docs.community.mainClass.methods.detectCommunities.description")),1),g("p",hB,b(y(e)("docs.community.mainClass.methods.detectCommunities.returns")),1)]),g("div",fB,[g("code",gB,b(y(e)("docs.community.mainClass.methods.calculateModularity.name")),1),g("p",pB,b(y(e)("docs.community.mainClass.methods.calculateModularity.description")),1),g("p",mB,b(y(e)("docs.community.mainClass.methods.calculateModularity.returns")),1)])]),i[49]||(i[49]=g("h4",{class:"docs-subsection-title"},"Static Methods",-1)),g("div",yB,[g("div",vB,[g("code",bB,b(y(e)("docs.community.mainClass.staticMethods.detect.name")),1),g("p",_B,b(y(e)("docs.community.mainClass.staticMethods.detect.description")),1),g("p",wB,b(y(e)("docs.community.mainClass.staticMethods.detect.returns")),1)]),g("div",xB,[g("code",kB,b(y(e)("docs.community.mainClass.staticMethods.getNodesInCommunity.name")),1),g("p",EB,b(y(e)("docs.community.mainClass.staticMethods.getNodesInCommunity.description")),1)]),g("div",AB,[g("code",CB,b(y(e)("docs.community.mainClass.staticMethods.getCommunityGroups.name")),1),g("p",SB,b(y(e)("docs.community.mainClass.staticMethods.getCommunityGroups.description")),1)])])]),g("div",TB,[g("h3",NB,b(y(e)("docs.community.louvain.title")),1),g("p",RB,b(y(e)("docs.community.louvain.description")),1),g("p",LB,b(y(e)("docs.community.louvain.complexity")),1),g("p",IB,b(y(e)("docs.community.louvain.bestFor")),1),g("h4",PB,b(y(e)("docs.community.louvain.constructor")),1),g("div",DB,[i[52]||(i[52]=g("h5",{class:"docs-options-title"},"Options:",-1)),g("ul",MB,[g("li",null,[i[50]||(i[50]=g("code",{class:"docs-options-code"},"resolution:",-1)),Ce(" "+b(y(e)("docs.community.louvain.options.resolution")),1)]),g("li",null,[i[51]||(i[51]=g("code",{class:"docs-options-code"},"maxIterations:",-1)),Ce(" "+b(y(e)("docs.community.louvain.options.maxIterations")),1)])])]),we(yt,{code:d6,language:"javascript"})]),g("div",OB,[g("h3",GB,b(y(e)("docs.community.result.title")),1),g("p",FB,b(y(e)("docs.community.result.description")),1),g("div",$B,[i[58]||(i[58]=g("h5",{class:"docs-options-title"},"Properties:",-1)),g("ul",zB,[g("li",null,[i[53]||(i[53]=g("code",{class:"docs-options-code"},"communities:",-1)),Ce(" "+b(y(e)("docs.community.result.properties.communities")),1)]),g("li",null,[i[54]||(i[54]=g("code",{class:"docs-options-code"},"modularity:",-1)),Ce(" "+b(y(e)("docs.community.result.properties.modularity")),1)]),g("li",null,[i[55]||(i[55]=g("code",{class:"docs-options-code"},"numCommunities:",-1)),Ce(" "+b(y(e)("docs.community.result.properties.numCommunities")),1)]),g("li",null,[i[56]||(i[56]=g("code",{class:"docs-options-code"},"algorithm:",-1)),Ce(" "+b(y(e)("docs.community.result.properties.algorithm")),1)]),g("li",null,[i[57]||(i[57]=g("code",{class:"docs-options-code"},"metadata:",-1)),Ce(" "+b(y(e)("docs.community.result.properties.metadata")),1)])])])])]),g("section",BB,[g("h2",VB,[i[59]||(i[59]=g("span",{class:"docs-section-header-icon"},"",-1)),g("span",null,b(y(e)("docs.examples.title")),1)]),g("p",UB,b(y(e)("docs.examples.description")),1),g("div",jB,[g("h3",HB,b(y(e)("docs.examples.basic.title")),1),g("p",WB,b(y(e)("docs.examples.basic.description")),1),we(yt,{code:u6,language:"javascript"})]),g("div",qB,[g("h3",KB,b(y(e)("docs.examples.csv.title")),1),g("p",XB,b(y(e)("docs.examples.csv.description")),1),we(yt,{code:h6,language:"javascript"})]),g("div",ZB,[g("h3",YB,b(y(e)("docs.examples.complete.title")),1),g("p",JB,b(y(e)("docs.examples.complete.description")),1),we(yt,{code:f6,language:"javascript"})])]),i[60]||(i[60]=g("div",{class:"docs-footer"},[g("p",{class:"text-secondary"},[Ce("  For more details, check out the "),g("a",{href:"https://github.com/guinetik/graph-js",class:"docs-footer-link",target:"_blank"}," GitHub repository ")])],-1))]))}},p6=[{path:"/",name:"home",component:$E},{path:"/showcase",name:"showcase",component:SM},{path:"/explorer",name:"explorer",component:t3},{path:"/family",name:"family",component:XF},{path:"/degrees",name:"degrees",component:Cz},{path:"/docs",name:"docs",component:g6}],ra=cw({history:B_(),routes:p6});ra.isReady().then(()=>{const t=sessionStorage.getItem("redirectPath");t&&(sessionStorage.removeItem("redirectPath"),ra.replace(t))});ra.afterEach(t=>{const{trackPageView:e}=Va(),n=mD[t.name]||t.name||"Unknown";e(t.fullPath,n)});const m6=Et({prefix:"App",level:"info"});vD();const Rv=t_(e1);Rv.use(ra);Rv.mount("#app");m6.info("Vue app started");export{I6 as $,L6 as D,N6 as U,T6 as _,O6 as c,F6 as d,D6 as e,V6 as f,B6 as g,$6 as h,G6 as l,U6 as m,R6 as q,M6 as s,P6 as t,z6 as u};
