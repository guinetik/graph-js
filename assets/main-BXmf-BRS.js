const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/angular-html-CU67Zn6k.js","assets/html-GMplVEZG.js","assets/javascript-wDzz0qaB.js","assets/css-DPfMkruS.js","assets/angular-ts-BwZT4LLn.js","assets/scss-OYdSNvt2.js","assets/apl-dKokRX4l.js","assets/xml-sdJ4AIDG.js","assets/java-CylS5w8V.js","assets/json-Cp-IABpG.js","assets/astro-CbQHKStN.js","assets/typescript-BPQ3VLAy.js","assets/postcss-CXtECtnM.js","assets/tsx-COt5Ahok.js","assets/blade-DVc8C-J4.js","assets/html-derivative-BFtXZ54Q.js","assets/sql-BLtJtn59.js","assets/bsl-BO_Y6i37.js","assets/sdbl-DVxCFoDh.js","assets/cairo-KRGpt6FW.js","assets/python-B6aJPvgy.js","assets/cobol-nwyudZeR.js","assets/coffee-Ch7k5sss.js","assets/cpp-CofmeUqb.js","assets/regexp-CDVJQ6XC.js","assets/glsl-DplSGwfg.js","assets/c-BIGW1oBm.js","assets/crystal-tKQVLTB8.js","assets/shellscript-Yzrsuije.js","assets/edge-BkV0erSs.js","assets/elixir-CDX3lj18.js","assets/elm-DbKCFpqz.js","assets/erb-BOJIQeun.js","assets/ruby-BvKwtOVI.js","assets/haml-B8DHNrY2.js","assets/graphql-ChdNCCLP.js","assets/jsx-g9-lgVsj.js","assets/lua-BbnMAYS6.js","assets/yaml-Buea-lGh.js","assets/erlang-DsQrWhSR.js","assets/markdown-Cvjx9yec.js","assets/fortran-fixed-form-BZjJHVRy.js","assets/fortran-free-form-D22FLkUw.js","assets/fsharp-CXgrBDvD.js","assets/gdresource-B7Tvp0Sc.js","assets/gdshader-DkwncUOv.js","assets/gdscript-DTMYz4Jt.js","assets/git-commit-F4YmCXRG.js","assets/diff-D97Zzqfu.js","assets/git-rebase-r7XF79zn.js","assets/glimmer-js-Rg0-pVw9.js","assets/glimmer-ts-U6CK756n.js","assets/hack-CaT9iCJl.js","assets/handlebars-BL8al0AC.js","assets/http-jrhK8wxY.js","assets/hurl-irOxFIW8.js","assets/csv-fuZLfV_i.js","assets/hxml-Bvhsp5Yf.js","assets/haxe-CzTSHFRz.js","assets/jinja-4LBKfQ-Z.js","assets/jison-wvAkD_A8.js","assets/julia-C8NyazO9.js","assets/r-DiinP2Uv.js","assets/latex-BdAV_C_H.js","assets/tex-CxkMU7Pf.js","assets/liquid-DYVedYrR.js","assets/marko-CPi9NSCl.js","assets/less-B1dDrJ26.js","assets/mdc-DUICxH0z.js","assets/nginx-DknmC5AR.js","assets/nim-CVrawwO9.js","assets/perl-C0TMdlhV.js","assets/php-CDn_0X-4.js","assets/pug-CGlum2m_.js","assets/qml-3beO22l8.js","assets/razor-CE9lU5zL.js","assets/csharp-K5feNrxe.js","assets/rst-B0xPkSld.js","assets/cmake-D1j8_8rp.js","assets/sas-cz2c8ADy.js","assets/shaderlab-Dg9Lc6iA.js","assets/hlsl-D3lLCCz7.js","assets/shellsession-BADoaaVG.js","assets/soy-Brmx7dQM.js","assets/sparql-rVzFXLq3.js","assets/turtle-BsS91CYL.js","assets/stata-BH5u7GGu.js","assets/svelte-3Dk4HxPD.js","assets/templ-W15q3VgB.js","assets/go-Dn2_MT6a.js","assets/ts-tags-zn1MmPIZ.js","assets/twig-CO9l9SDP.js","assets/vue-DnHKYNfI.js","assets/vue-html-CChd_i61.js","assets/vue-vine-8moa0y9V.js","assets/stylus-BEDo0Tqx.js","assets/xsl-CtQFsRM5.js"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function Uc(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const je={},ei=[],wn=()=>{},Kf=()=>!1,ta=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),jc=t=>t.startsWith("onUpdate:"),ht=Object.assign,Hc=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},uv=Object.prototype.hasOwnProperty,ze=(t,e)=>uv.call(t,e),Ne=Array.isArray,ti=t=>As(t)==="[object Map]",na=t=>As(t)==="[object Set]",Ud=t=>As(t)==="[object Date]",De=t=>typeof t=="function",Xe=t=>typeof t=="string",ln=t=>typeof t=="symbol",Be=t=>t!==null&&typeof t=="object",Xf=t=>(Be(t)||De(t))&&De(t.then)&&De(t.catch),Zf=Object.prototype.toString,As=t=>Zf.call(t),hv=t=>As(t).slice(8,-1),Yf=t=>As(t)==="[object Object]",Wc=t=>Xe(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Ki=Uc(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),ra=t=>{const e=Object.create(null);return(n=>e[n]||(e[n]=t(n)))},fv=/-\w/g,Xt=ra(t=>t.replace(fv,e=>e.slice(1).toUpperCase())),gv=/\B([A-Z])/g,pr=ra(t=>t.replace(gv,"-$1").toLowerCase()),ia=ra(t=>t.charAt(0).toUpperCase()+t.slice(1)),Ma=ra(t=>t?`on${ia(t)}`:""),ur=(t,e)=>!Object.is(t,e),co=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},Jf=(t,e,n,r=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:r,value:n})},sa=t=>{const e=parseFloat(t);return isNaN(e)?t:e},pv=t=>{const e=Xe(t)?Number(t):NaN;return isNaN(e)?t:e};let jd;const oa=()=>jd||(jd=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function xs(t){if(Ne(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],i=Xe(r)?_v(r):xs(r);if(i)for(const s in i)e[s]=i[s]}return e}else if(Xe(t)||Be(t))return t}const mv=/;(?![^(]*\))/g,yv=/:([^]+)/,vv=/\/\*[^]*?\*\//g;function _v(t){const e={};return t.replace(vv,"").split(mv).forEach(n=>{if(n){const r=n.split(yv);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function Ke(t){let e="";if(Xe(t))e=t;else if(Ne(t))for(let n=0;n<t.length;n++){const r=Ke(t[n]);r&&(e+=r+" ")}else if(Be(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const bv="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",wv=Uc(bv);function Qf(t){return!!t||t===""}function Ev(t,e){if(t.length!==e.length)return!1;let n=!0;for(let r=0;n&&r<t.length;r++)n=hi(t[r],e[r]);return n}function hi(t,e){if(t===e)return!0;let n=Ud(t),r=Ud(e);if(n||r)return n&&r?t.getTime()===e.getTime():!1;if(n=ln(t),r=ln(e),n||r)return t===e;if(n=Ne(t),r=Ne(e),n||r)return n&&r?Ev(t,e):!1;if(n=Be(t),r=Be(e),n||r){if(!n||!r)return!1;const i=Object.keys(t).length,s=Object.keys(e).length;if(i!==s)return!1;for(const o in t){const a=t.hasOwnProperty(o),l=e.hasOwnProperty(o);if(a&&!l||!a&&l||!hi(t[o],e[o]))return!1}}return String(t)===String(e)}function kv(t,e){return t.findIndex(n=>hi(n,e))}const eg=t=>!!(t&&t.__v_isRef===!0),v=t=>Xe(t)?t:t==null?"":Ne(t)||Be(t)&&(t.toString===Zf||!De(t.toString))?eg(t)?v(t.value):JSON.stringify(t,tg,2):String(t),tg=(t,e)=>eg(e)?tg(t,e.value):ti(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,i],s)=>(n[Oa(r,s)+" =>"]=i,n),{})}:na(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>Oa(n))}:ln(e)?Oa(e):Be(e)&&!Ne(e)&&!Yf(e)?String(e):e,Oa=(t,e="")=>{var n;return ln(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};let Pt;class Av{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Pt,!e&&Pt&&(this.index=(Pt.scopes||(Pt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=Pt;try{return Pt=this,e()}finally{Pt=n}}}on(){++this._on===1&&(this.prevScope=Pt,Pt=this)}off(){this._on>0&&--this._on===0&&(Pt=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function xv(){return Pt}let We;const Fa=new WeakSet;class ng{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Pt&&Pt.active&&Pt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Fa.has(this)&&(Fa.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||ig(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Hd(this),sg(this);const e=We,n=on;We=this,on=!0;try{return this.fn()}finally{og(this),We=e,on=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)Xc(e);this.deps=this.depsTail=void 0,Hd(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Fa.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Dl(this)&&this.run()}get dirty(){return Dl(this)}}let rg=0,Xi,Zi;function ig(t,e=!1){if(t.flags|=8,e){t.next=Zi,Zi=t;return}t.next=Xi,Xi=t}function qc(){rg++}function Kc(){if(--rg>0)return;if(Zi){let e=Zi;for(Zi=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;Xi;){let e=Xi;for(Xi=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){t||(t=r)}e=n}}if(t)throw t}function sg(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function og(t){let e,n=t.depsTail,r=n;for(;r;){const i=r.prevDep;r.version===-1?(r===n&&(n=i),Xc(r),Cv(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=i}t.deps=e,t.depsTail=n}function Dl(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(ag(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function ag(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===is)||(t.globalVersion=is,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!Dl(t))))return;t.flags|=2;const e=t.dep,n=We,r=on;We=t,on=!0;try{sg(t);const i=t.fn(t._value);(e.version===0||ur(i,t._value))&&(t.flags|=128,t._value=i,e.version++)}catch(i){throw e.version++,i}finally{We=n,on=r,og(t),t.flags&=-3}}function Xc(t,e=!1){const{dep:n,prevSub:r,nextSub:i}=t;if(r&&(r.nextSub=i,t.prevSub=void 0),i&&(i.prevSub=r,t.nextSub=void 0),n.subs===t&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let s=n.computed.deps;s;s=s.nextDep)Xc(s,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function Cv(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let on=!0;const lg=[];function qn(){lg.push(on),on=!1}function Kn(){const t=lg.pop();on=t===void 0?!0:t}function Hd(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=We;We=void 0;try{e()}finally{We=n}}}let is=0;class Sv{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Zc{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!We||!on||We===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==We)n=this.activeLink=new Sv(We,this),We.deps?(n.prevDep=We.depsTail,We.depsTail.nextDep=n,We.depsTail=n):We.deps=We.depsTail=n,cg(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=We.depsTail,n.nextDep=void 0,We.depsTail.nextDep=n,We.depsTail=n,We.deps===n&&(We.deps=r)}return n}trigger(e){this.version++,is++,this.notify(e)}notify(e){qc();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{Kc()}}}function cg(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)cg(r)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const Pl=new WeakMap,Lr=Symbol(""),Gl=Symbol(""),ss=Symbol("");function _t(t,e,n){if(on&&We){let r=Pl.get(t);r||Pl.set(t,r=new Map);let i=r.get(n);i||(r.set(n,i=new Zc),i.map=r,i.key=n),i.track()}}function zn(t,e,n,r,i,s){const o=Pl.get(t);if(!o){is++;return}const a=l=>{l&&l.trigger()};if(qc(),e==="clear")o.forEach(a);else{const l=Ne(t),c=l&&Wc(n);if(l&&n==="length"){const d=Number(r);o.forEach((u,h)=>{(h==="length"||h===ss||!ln(h)&&h>=d)&&a(u)})}else switch((n!==void 0||o.has(void 0))&&a(o.get(n)),c&&a(o.get(ss)),e){case"add":l?c&&a(o.get("length")):(a(o.get(Lr)),ti(t)&&a(o.get(Gl)));break;case"delete":l||(a(o.get(Lr)),ti(t)&&a(o.get(Gl)));break;case"set":ti(t)&&a(o.get(Lr));break}}Kc()}function Vr(t){const e=Oe(t);return e===t?e:(_t(e,"iterate",ss),qt(t)?e:e.map(cn))}function aa(t){return _t(t=Oe(t),"iterate",ss),t}function ir(t,e){return Xn(t)?Ir(t)?fi(cn(e)):fi(e):cn(e)}const Tv={__proto__:null,[Symbol.iterator](){return $a(this,Symbol.iterator,t=>ir(this,t))},concat(...t){return Vr(this).concat(...t.map(e=>Ne(e)?Vr(e):e))},entries(){return $a(this,"entries",t=>(t[1]=ir(this,t[1]),t))},every(t,e){return Nn(this,"every",t,e,void 0,arguments)},filter(t,e){return Nn(this,"filter",t,e,n=>n.map(r=>ir(this,r)),arguments)},find(t,e){return Nn(this,"find",t,e,n=>ir(this,n),arguments)},findIndex(t,e){return Nn(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return Nn(this,"findLast",t,e,n=>ir(this,n),arguments)},findLastIndex(t,e){return Nn(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return Nn(this,"forEach",t,e,void 0,arguments)},includes(...t){return za(this,"includes",t)},indexOf(...t){return za(this,"indexOf",t)},join(t){return Vr(this).join(t)},lastIndexOf(...t){return za(this,"lastIndexOf",t)},map(t,e){return Nn(this,"map",t,e,void 0,arguments)},pop(){return Ti(this,"pop")},push(...t){return Ti(this,"push",t)},reduce(t,...e){return Wd(this,"reduce",t,e)},reduceRight(t,...e){return Wd(this,"reduceRight",t,e)},shift(){return Ti(this,"shift")},some(t,e){return Nn(this,"some",t,e,void 0,arguments)},splice(...t){return Ti(this,"splice",t)},toReversed(){return Vr(this).toReversed()},toSorted(t){return Vr(this).toSorted(t)},toSpliced(...t){return Vr(this).toSpliced(...t)},unshift(...t){return Ti(this,"unshift",t)},values(){return $a(this,"values",t=>ir(this,t))}};function $a(t,e,n){const r=aa(t),i=r[e]();return r!==t&&!qt(t)&&(i._next=i.next,i.next=()=>{const s=i._next();return s.done||(s.value=n(s.value)),s}),i}const Nv=Array.prototype;function Nn(t,e,n,r,i,s){const o=aa(t),a=o!==t&&!qt(t),l=o[e];if(l!==Nv[e]){const u=l.apply(t,s);return a?cn(u):u}let c=n;o!==t&&(a?c=function(u,h){return n.call(this,ir(t,u),h,t)}:n.length>2&&(c=function(u,h){return n.call(this,u,h,t)}));const d=l.call(o,c,r);return a&&i?i(d):d}function Wd(t,e,n,r){const i=aa(t);let s=n;return i!==t&&(qt(t)?n.length>3&&(s=function(o,a,l){return n.call(this,o,a,l,t)}):s=function(o,a,l){return n.call(this,o,ir(t,a),l,t)}),i[e](s,...r)}function za(t,e,n){const r=Oe(t);_t(r,"iterate",ss);const i=r[e](...n);return(i===-1||i===!1)&&Qc(n[0])?(n[0]=Oe(n[0]),r[e](...n)):i}function Ti(t,e,n=[]){qn(),qc();const r=Oe(t)[e].apply(t,n);return Kc(),Kn(),r}const Rv=Uc("__proto__,__v_isRef,__isVue"),dg=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(ln));function Lv(t){ln(t)||(t=String(t));const e=Oe(this);return _t(e,"has",t),e.hasOwnProperty(t)}class ug{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,r){if(n==="__v_skip")return e.__v_skip;const i=this._isReadonly,s=this._isShallow;if(n==="__v_isReactive")return!i;if(n==="__v_isReadonly")return i;if(n==="__v_isShallow")return s;if(n==="__v_raw")return r===(i?s?Bv:pg:s?gg:fg).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const o=Ne(e);if(!i){let l;if(o&&(l=Tv[n]))return l;if(n==="hasOwnProperty")return Lv}const a=Reflect.get(e,n,At(e)?e:r);if((ln(n)?dg.has(n):Rv(n))||(i||_t(e,"get",n),s))return a;if(At(a)){const l=o&&Wc(n)?a:a.value;return i&&Be(l)?Ol(l):l}return Be(a)?i?Ol(a):Cs(a):a}}class hg extends ug{constructor(e=!1){super(!1,e)}set(e,n,r,i){let s=e[n];const o=Ne(e)&&Wc(n);if(!this._isShallow){const c=Xn(s);if(!qt(r)&&!Xn(r)&&(s=Oe(s),r=Oe(r)),!o&&At(s)&&!At(r))return c||(s.value=r),!0}const a=o?Number(n)<e.length:ze(e,n),l=Reflect.set(e,n,r,At(e)?e:i);return e===Oe(i)&&(a?ur(r,s)&&zn(e,"set",n,r):zn(e,"add",n,r)),l}deleteProperty(e,n){const r=ze(e,n);e[n];const i=Reflect.deleteProperty(e,n);return i&&r&&zn(e,"delete",n,void 0),i}has(e,n){const r=Reflect.has(e,n);return(!ln(n)||!dg.has(n))&&_t(e,"has",n),r}ownKeys(e){return _t(e,"iterate",Ne(e)?"length":Lr),Reflect.ownKeys(e)}}class Iv extends ug{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const Dv=new hg,Pv=new Iv,Gv=new hg(!0);const Ml=t=>t,Ms=t=>Reflect.getPrototypeOf(t);function Mv(t,e,n){return function(...r){const i=this.__v_raw,s=Oe(i),o=ti(s),a=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,c=i[t](...r),d=n?Ml:e?fi:cn;return!e&&_t(s,"iterate",l?Gl:Lr),{next(){const{value:u,done:h}=c.next();return h?{value:u,done:h}:{value:a?[d(u[0]),d(u[1])]:d(u),done:h}},[Symbol.iterator](){return this}}}}function Os(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function Ov(t,e){const n={get(i){const s=this.__v_raw,o=Oe(s),a=Oe(i);t||(ur(i,a)&&_t(o,"get",i),_t(o,"get",a));const{has:l}=Ms(o),c=e?Ml:t?fi:cn;if(l.call(o,i))return c(s.get(i));if(l.call(o,a))return c(s.get(a));s!==o&&s.get(i)},get size(){const i=this.__v_raw;return!t&&_t(Oe(i),"iterate",Lr),i.size},has(i){const s=this.__v_raw,o=Oe(s),a=Oe(i);return t||(ur(i,a)&&_t(o,"has",i),_t(o,"has",a)),i===a?s.has(i):s.has(i)||s.has(a)},forEach(i,s){const o=this,a=o.__v_raw,l=Oe(a),c=e?Ml:t?fi:cn;return!t&&_t(l,"iterate",Lr),a.forEach((d,u)=>i.call(s,c(d),c(u),o))}};return ht(n,t?{add:Os("add"),set:Os("set"),delete:Os("delete"),clear:Os("clear")}:{add(i){!e&&!qt(i)&&!Xn(i)&&(i=Oe(i));const s=Oe(this);return Ms(s).has.call(s,i)||(s.add(i),zn(s,"add",i,i)),this},set(i,s){!e&&!qt(s)&&!Xn(s)&&(s=Oe(s));const o=Oe(this),{has:a,get:l}=Ms(o);let c=a.call(o,i);c||(i=Oe(i),c=a.call(o,i));const d=l.call(o,i);return o.set(i,s),c?ur(s,d)&&zn(o,"set",i,s):zn(o,"add",i,s),this},delete(i){const s=Oe(this),{has:o,get:a}=Ms(s);let l=o.call(s,i);l||(i=Oe(i),l=o.call(s,i)),a&&a.call(s,i);const c=s.delete(i);return l&&zn(s,"delete",i,void 0),c},clear(){const i=Oe(this),s=i.size!==0,o=i.clear();return s&&zn(i,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(i=>{n[i]=Mv(i,t,e)}),n}function Yc(t,e){const n=Ov(t,e);return(r,i,s)=>i==="__v_isReactive"?!t:i==="__v_isReadonly"?t:i==="__v_raw"?r:Reflect.get(ze(n,i)&&i in r?n:r,i,s)}const Fv={get:Yc(!1,!1)},$v={get:Yc(!1,!0)},zv={get:Yc(!0,!1)};const fg=new WeakMap,gg=new WeakMap,pg=new WeakMap,Bv=new WeakMap;function Vv(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Uv(t){return t.__v_skip||!Object.isExtensible(t)?0:Vv(hv(t))}function Cs(t){return Xn(t)?t:Jc(t,!1,Dv,Fv,fg)}function mg(t){return Jc(t,!1,Gv,$v,gg)}function Ol(t){return Jc(t,!0,Pv,zv,pg)}function Jc(t,e,n,r,i){if(!Be(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const s=Uv(t);if(s===0)return t;const o=i.get(t);if(o)return o;const a=new Proxy(t,s===2?r:n);return i.set(t,a),a}function Ir(t){return Xn(t)?Ir(t.__v_raw):!!(t&&t.__v_isReactive)}function Xn(t){return!!(t&&t.__v_isReadonly)}function qt(t){return!!(t&&t.__v_isShallow)}function Qc(t){return t?!!t.__v_raw:!1}function Oe(t){const e=t&&t.__v_raw;return e?Oe(e):t}function jv(t){return!ze(t,"__v_skip")&&Object.isExtensible(t)&&Jf(t,"__v_skip",!0),t}const cn=t=>Be(t)?Cs(t):t,fi=t=>Be(t)?Ol(t):t;function At(t){return t?t.__v_isRef===!0:!1}function ce(t){return yg(t,!1)}function Hv(t){return yg(t,!0)}function yg(t,e){return At(t)?t:new Wv(t,e)}class Wv{constructor(e,n){this.dep=new Zc,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:Oe(e),this._value=n?e:cn(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,r=this.__v_isShallow||qt(e)||Xn(e);e=r?e:Oe(e),ur(e,n)&&(this._rawValue=e,this._value=r?e:cn(e),this.dep.trigger())}}function m(t){return At(t)?t.value:t}const qv={get:(t,e,n)=>e==="__v_raw"?t:m(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const i=t[e];return At(i)&&!At(n)?(i.value=n,!0):Reflect.set(t,e,n,r)}};function vg(t){return Ir(t)?t:new Proxy(t,qv)}class Kv{constructor(e,n,r){this.fn=e,this.setter=n,this._value=void 0,this.dep=new Zc(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=is-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&We!==this)return ig(this,!0),!0}get value(){const e=this.dep.track();return ag(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function Xv(t,e,n=!1){let r,i;return De(t)?r=t:(r=t.get,i=t.set),new Kv(r,i,n)}const Fs={},Ao=new WeakMap;let kr;function Zv(t,e=!1,n=kr){if(n){let r=Ao.get(n);r||Ao.set(n,r=[]),r.push(t)}}function Yv(t,e,n=je){const{immediate:r,deep:i,once:s,scheduler:o,augmentJob:a,call:l}=n,c=_=>i?_:qt(_)||i===!1||i===0?Bn(_,1):Bn(_);let d,u,h,f,p=!1,y=!1;if(At(t)?(u=()=>t.value,p=qt(t)):Ir(t)?(u=()=>c(t),p=!0):Ne(t)?(y=!0,p=t.some(_=>Ir(_)||qt(_)),u=()=>t.map(_=>{if(At(_))return _.value;if(Ir(_))return c(_);if(De(_))return l?l(_,2):_()})):De(t)?e?u=l?()=>l(t,2):t:u=()=>{if(h){qn();try{h()}finally{Kn()}}const _=kr;kr=d;try{return l?l(t,3,[f]):t(f)}finally{kr=_}}:u=wn,e&&i){const _=u,x=i===!0?1/0:i;u=()=>Bn(_(),x)}const w=xv(),b=()=>{d.stop(),w&&w.active&&Hc(w.effects,d)};if(s&&e){const _=e;e=(...x)=>{_(...x),b()}}let E=y?new Array(t.length).fill(Fs):Fs;const k=_=>{if(!(!(d.flags&1)||!d.dirty&&!_))if(e){const x=d.run();if(i||p||(y?x.some((T,L)=>ur(T,E[L])):ur(x,E))){h&&h();const T=kr;kr=d;try{const L=[x,E===Fs?void 0:y&&E[0]===Fs?[]:E,f];E=x,l?l(e,3,L):e(...L)}finally{kr=T}}}else d.run()};return a&&a(k),d=new ng(u),d.scheduler=o?()=>o(k,!1):k,f=_=>Zv(_,!1,d),h=d.onStop=()=>{const _=Ao.get(d);if(_){if(l)l(_,4);else for(const x of _)x();Ao.delete(d)}},e?r?k(!0):E=d.run():o?o(k.bind(null,!0),!0):d.run(),b.pause=d.pause.bind(d),b.resume=d.resume.bind(d),b.stop=b,b}function Bn(t,e=1/0,n){if(e<=0||!Be(t)||t.__v_skip||(n=n||new Map,(n.get(t)||0)>=e))return t;if(n.set(t,e),e--,At(t))Bn(t.value,e,n);else if(Ne(t))for(let r=0;r<t.length;r++)Bn(t[r],e,n);else if(na(t)||ti(t))t.forEach(r=>{Bn(r,e,n)});else if(Yf(t)){for(const r in t)Bn(t[r],e,n);for(const r of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,r)&&Bn(t[r],e,n)}return t}function Ss(t,e,n,r){try{return r?t(...r):t()}catch(i){la(i,e,n)}}function dn(t,e,n,r){if(De(t)){const i=Ss(t,e,n,r);return i&&Xf(i)&&i.catch(s=>{la(s,e,n)}),i}if(Ne(t)){const i=[];for(let s=0;s<t.length;s++)i.push(dn(t[s],e,n,r));return i}}function la(t,e,n,r=!0){const i=e?e.vnode:null,{errorHandler:s,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||je;if(e){let a=e.parent;const l=e.proxy,c=`https://vuejs.org/error-reference/#runtime-${n}`;for(;a;){const d=a.ec;if(d){for(let u=0;u<d.length;u++)if(d[u](t,l,c)===!1)return}a=a.parent}if(s){qn(),Ss(s,null,10,[t,l,c]),Kn();return}}Jv(t,n,i,r,o)}function Jv(t,e,n,r=!0,i=!1){if(i)throw t;console.error(t)}const Rt=[];let vn=-1;const ni=[];let sr=null,qr=0;const _g=Promise.resolve();let xo=null;function Gr(t){const e=xo||_g;return t?e.then(this?t.bind(this):t):e}function Qv(t){let e=vn+1,n=Rt.length;for(;e<n;){const r=e+n>>>1,i=Rt[r],s=os(i);s<t||s===t&&i.flags&2?e=r+1:n=r}return e}function ed(t){if(!(t.flags&1)){const e=os(t),n=Rt[Rt.length-1];!n||!(t.flags&2)&&e>=os(n)?Rt.push(t):Rt.splice(Qv(e),0,t),t.flags|=1,bg()}}function bg(){xo||(xo=_g.then(Eg))}function e0(t){Ne(t)?ni.push(...t):sr&&t.id===-1?sr.splice(qr+1,0,t):t.flags&1||(ni.push(t),t.flags|=1),bg()}function qd(t,e,n=vn+1){for(;n<Rt.length;n++){const r=Rt[n];if(r&&r.flags&2){if(t&&r.id!==t.uid)continue;Rt.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function wg(t){if(ni.length){const e=[...new Set(ni)].sort((n,r)=>os(n)-os(r));if(ni.length=0,sr){sr.push(...e);return}for(sr=e,qr=0;qr<sr.length;qr++){const n=sr[qr];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}sr=null,qr=0}}const os=t=>t.id==null?t.flags&2?-1:1/0:t.id;function Eg(t){try{for(vn=0;vn<Rt.length;vn++){const e=Rt[vn];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),Ss(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;vn<Rt.length;vn++){const e=Rt[vn];e&&(e.flags&=-2)}vn=-1,Rt.length=0,wg(),xo=null,(Rt.length||ni.length)&&Eg()}}let gt=null,kg=null;function Co(t){const e=gt;return gt=t,kg=t&&t.type.__scopeId||null,e}function Ue(t,e=gt,n){if(!e||t._n)return t;const r=(...i)=>{r._d&&No(-1);const s=Co(e);let o;try{o=t(...i)}finally{Co(s),r._d&&No(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function Wt(t,e){if(gt===null)return t;const n=fa(gt),r=t.dirs||(t.dirs=[]);for(let i=0;i<e.length;i++){let[s,o,a,l=je]=e[i];s&&(De(s)&&(s={mounted:s,updated:s}),s.deep&&Bn(o),r.push({dir:s,instance:n,value:o,oldValue:void 0,arg:a,modifiers:l}))}return t}function mr(t,e,n,r){const i=t.dirs,s=e&&e.dirs;for(let o=0;o<i.length;o++){const a=i[o];s&&(a.oldValue=s[o].value);let l=a.dir[r];l&&(qn(),dn(l,n,8,[t.el,a,t,e]),Kn())}}const Ag=Symbol("_vte"),xg=t=>t.__isTeleport,Yi=t=>t&&(t.disabled||t.disabled===""),Kd=t=>t&&(t.defer||t.defer===""),Xd=t=>typeof SVGElement<"u"&&t instanceof SVGElement,Zd=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,Fl=(t,e)=>{const n=t&&t.to;return Xe(n)?e?e(n):null:n},Cg={name:"Teleport",__isTeleport:!0,process(t,e,n,r,i,s,o,a,l,c){const{mc:d,pc:u,pbc:h,o:{insert:f,querySelector:p,createText:y,createComment:w}}=c,b=Yi(e.props);let{shapeFlag:E,children:k,dynamicChildren:_}=e;if(t==null){const x=e.el=y(""),T=e.anchor=y("");f(x,n,r),f(T,n,r);const L=(F,$)=>{E&16&&d(k,F,$,i,s,o,a,l)},O=()=>{const F=e.target=Fl(e.props,p),$=Sg(F,e,y,f);F&&(o!=="svg"&&Xd(F)?o="svg":o!=="mathml"&&Zd(F)&&(o="mathml"),i&&i.isCE&&(i.ce._teleportTargets||(i.ce._teleportTargets=new Set)).add(F),b||(L(F,$),uo(e,!1)))};b&&(L(n,T),uo(e,!0)),Kd(e.props)?(e.el.__isMounted=!1,Tt(()=>{O(),delete e.el.__isMounted},s)):O()}else{if(Kd(e.props)&&t.el.__isMounted===!1){Tt(()=>{Cg.process(t,e,n,r,i,s,o,a,l,c)},s);return}e.el=t.el,e.targetStart=t.targetStart;const x=e.anchor=t.anchor,T=e.target=t.target,L=e.targetAnchor=t.targetAnchor,O=Yi(t.props),F=O?n:T,$=O?x:L;if(o==="svg"||Xd(T)?o="svg":(o==="mathml"||Zd(T))&&(o="mathml"),_?(h(t.dynamicChildren,_,F,i,s,o,a),rd(t,e,!0)):l||u(t,e,F,$,i,s,o,a,!1),b)O?e.props&&t.props&&e.props.to!==t.props.to&&(e.props.to=t.props.to):$s(e,n,x,c,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const j=e.target=Fl(e.props,p);j&&$s(e,j,null,c,0)}else O&&$s(e,T,L,c,1);uo(e,b)}},remove(t,e,n,{um:r,o:{remove:i}},s){const{shapeFlag:o,children:a,anchor:l,targetStart:c,targetAnchor:d,target:u,props:h}=t;if(u&&(i(c),i(d)),s&&i(l),o&16){const f=s||!Yi(h);for(let p=0;p<a.length;p++){const y=a[p];r(y,e,n,f,!!y.dynamicChildren)}}},move:$s,hydrate:t0};function $s(t,e,n,{o:{insert:r},m:i},s=2){s===0&&r(t.targetAnchor,e,n);const{el:o,anchor:a,shapeFlag:l,children:c,props:d}=t,u=s===2;if(u&&r(o,e,n),(!u||Yi(d))&&l&16)for(let h=0;h<c.length;h++)i(c[h],e,n,2);u&&r(a,e,n)}function t0(t,e,n,r,i,s,{o:{nextSibling:o,parentNode:a,querySelector:l,insert:c,createText:d}},u){function h(y,w,b,E){w.anchor=u(o(y),w,a(y),n,r,i,s),w.targetStart=b,w.targetAnchor=E}const f=e.target=Fl(e.props,l),p=Yi(e.props);if(f){const y=f._lpa||f.firstChild;if(e.shapeFlag&16)if(p)h(t,e,y,y&&o(y));else{e.anchor=o(t);let w=y;for(;w;){if(w&&w.nodeType===8){if(w.data==="teleport start anchor")e.targetStart=w;else if(w.data==="teleport anchor"){e.targetAnchor=w,f._lpa=e.targetAnchor&&o(e.targetAnchor);break}}w=o(w)}e.targetAnchor||Sg(f,e,d,c),u(y&&o(y),e,f,n,r,i,s)}uo(e,p)}else p&&e.shapeFlag&16&&h(t,e,t,o(t));return e.anchor&&o(e.anchor)}const n0=Cg;function uo(t,e){const n=t.ctx;if(n&&n.ut){let r,i;for(e?(r=t.el,i=t.anchor):(r=t.targetStart,i=t.targetAnchor);r&&r!==i;)r.nodeType===1&&r.setAttribute("data-v-owner",n.uid),r=r.nextSibling;n.ut()}}function Sg(t,e,n,r){const i=e.targetStart=n(""),s=e.targetAnchor=n("");return i[Ag]=s,t&&(r(i,t),r(s,t)),s}const Fn=Symbol("_leaveCb"),zs=Symbol("_enterCb");function r0(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Yt(()=>{t.isMounted=!0}),Mg(()=>{t.isUnmounting=!0}),t}const Ut=[Function,Array],Tg={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Ut,onEnter:Ut,onAfterEnter:Ut,onEnterCancelled:Ut,onBeforeLeave:Ut,onLeave:Ut,onAfterLeave:Ut,onLeaveCancelled:Ut,onBeforeAppear:Ut,onAppear:Ut,onAfterAppear:Ut,onAppearCancelled:Ut},Ng=t=>{const e=t.subTree;return e.component?Ng(e.component):e},i0={name:"BaseTransition",props:Tg,setup(t,{slots:e}){const n=sp(),r=r0();return()=>{const i=e.default&&Ig(e.default(),!0);if(!i||!i.length)return;const s=Rg(i),o=Oe(t),{mode:a}=o;if(r.isLeaving)return Ba(s);const l=Yd(s);if(!l)return Ba(s);let c=$l(l,o,r,n,u=>c=u);l.type!==wt&&as(l,c);let d=n.subTree&&Yd(n.subTree);if(d&&d.type!==wt&&!Sr(d,l)&&Ng(n).type!==wt){let u=$l(d,o,r,n);if(as(d,u),a==="out-in"&&l.type!==wt)return r.isLeaving=!0,u.afterLeave=()=>{r.isLeaving=!1,n.job.flags&8||n.update(),delete u.afterLeave,d=void 0},Ba(s);a==="in-out"&&l.type!==wt?u.delayLeave=(h,f,p)=>{const y=Lg(r,d);y[String(d.key)]=d,h[Fn]=()=>{f(),h[Fn]=void 0,delete c.delayedLeave,d=void 0},c.delayedLeave=()=>{p(),delete c.delayedLeave,d=void 0}}:d=void 0}else d&&(d=void 0);return s}}};function Rg(t){let e=t[0];if(t.length>1){for(const n of t)if(n.type!==wt){e=n;break}}return e}const s0=i0;function Lg(t,e){const{leavingVNodes:n}=t;let r=n.get(e.type);return r||(r=Object.create(null),n.set(e.type,r)),r}function $l(t,e,n,r,i){const{appear:s,mode:o,persisted:a=!1,onBeforeEnter:l,onEnter:c,onAfterEnter:d,onEnterCancelled:u,onBeforeLeave:h,onLeave:f,onAfterLeave:p,onLeaveCancelled:y,onBeforeAppear:w,onAppear:b,onAfterAppear:E,onAppearCancelled:k}=e,_=String(t.key),x=Lg(n,t),T=(F,$)=>{F&&dn(F,r,9,$)},L=(F,$)=>{const j=$[1];T(F,$),Ne(F)?F.every(z=>z.length<=1)&&j():F.length<=1&&j()},O={mode:o,persisted:a,beforeEnter(F){let $=l;if(!n.isMounted)if(s)$=w||l;else return;F[Fn]&&F[Fn](!0);const j=x[_];j&&Sr(t,j)&&j.el[Fn]&&j.el[Fn](),T($,[F])},enter(F){let $=c,j=d,z=u;if(!n.isMounted)if(s)$=b||c,j=E||d,z=k||u;else return;let I=!1;const A=F[zs]=D=>{I||(I=!0,D?T(z,[F]):T(j,[F]),O.delayedLeave&&O.delayedLeave(),F[zs]=void 0)};$?L($,[F,A]):A()},leave(F,$){const j=String(t.key);if(F[zs]&&F[zs](!0),n.isUnmounting)return $();T(h,[F]);let z=!1;const I=F[Fn]=A=>{z||(z=!0,$(),A?T(y,[F]):T(p,[F]),F[Fn]=void 0,x[j]===t&&delete x[j])};x[j]=t,f?L(f,[F,I]):I()},clone(F){const $=$l(F,e,n,r,i);return i&&i($),$}};return O}function Ba(t){if(ca(t))return t=gr(t),t.children=null,t}function Yd(t){if(!ca(t))return xg(t.type)&&t.children?Rg(t.children):t;if(t.component)return t.component.subTree;const{shapeFlag:e,children:n}=t;if(n){if(e&16)return n[0];if(e&32&&De(n.default))return n.default()}}function as(t,e){t.shapeFlag&6&&t.component?(t.transition=e,as(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function Ig(t,e=!1,n){let r=[],i=0;for(let s=0;s<t.length;s++){let o=t[s];const a=n==null?o.key:String(n)+String(o.key!=null?o.key:s);o.type===qe?(o.patchFlag&128&&i++,r=r.concat(Ig(o.children,e,a))):(e||o.type!==wt)&&r.push(a!=null?gr(o,{key:a}):o)}if(i>1)for(let s=0;s<r.length;s++)r[s].patchFlag=-2;return r}function Dg(t,e){return De(t)?ht({name:t.name},e,{setup:t}):t}function Pg(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}const So=new WeakMap;function Ji(t,e,n,r,i=!1){if(Ne(t)){t.forEach((p,y)=>Ji(p,e&&(Ne(e)?e[y]:e),n,r,i));return}if(ri(r)&&!i){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&Ji(t,e,n,r.component.subTree);return}const s=r.shapeFlag&4?fa(r.component):r.el,o=i?null:s,{i:a,r:l}=t,c=e&&e.r,d=a.refs===je?a.refs={}:a.refs,u=a.setupState,h=Oe(u),f=u===je?Kf:p=>ze(h,p);if(c!=null&&c!==l){if(Jd(e),Xe(c))d[c]=null,f(c)&&(u[c]=null);else if(At(c)){c.value=null;const p=e;p.k&&(d[p.k]=null)}}if(De(l))Ss(l,a,12,[o,d]);else{const p=Xe(l),y=At(l);if(p||y){const w=()=>{if(t.f){const b=p?f(l)?u[l]:d[l]:l.value;if(i)Ne(b)&&Hc(b,s);else if(Ne(b))b.includes(s)||b.push(s);else if(p)d[l]=[s],f(l)&&(u[l]=d[l]);else{const E=[s];l.value=E,t.k&&(d[t.k]=E)}}else p?(d[l]=o,f(l)&&(u[l]=o)):y&&(l.value=o,t.k&&(d[t.k]=o))};if(o){const b=()=>{w(),So.delete(t)};b.id=-1,So.set(t,b),Tt(b,n)}else Jd(t),w()}}}function Jd(t){const e=So.get(t);e&&(e.flags|=8,So.delete(t))}oa().requestIdleCallback;oa().cancelIdleCallback;const ri=t=>!!t.type.__asyncLoader,ca=t=>t.type.__isKeepAlive;function o0(t,e){Gg(t,"a",e)}function a0(t,e){Gg(t,"da",e)}function Gg(t,e,n=Et){const r=t.__wdc||(t.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return t()});if(da(e,r,n),n){let i=n.parent;for(;i&&i.parent;)ca(i.parent.vnode)&&l0(r,e,n,i),i=i.parent}}function l0(t,e,n,r){const i=da(e,t,r,!0);$r(()=>{Hc(r[e],i)},n)}function da(t,e,n=Et,r=!1){if(n){const i=n[t]||(n[t]=[]),s=e.__weh||(e.__weh=(...o)=>{qn();const a=Ts(n),l=dn(e,n,t,o);return a(),Kn(),l});return r?i.unshift(s):i.push(s),s}}const Jn=t=>(e,n=Et)=>{(!ds||t==="sp")&&da(t,(...r)=>e(...r),n)},c0=Jn("bm"),Yt=Jn("m"),d0=Jn("bu"),u0=Jn("u"),Mg=Jn("bum"),$r=Jn("um"),h0=Jn("sp"),f0=Jn("rtg"),g0=Jn("rtc");function p0(t,e=Et){da("ec",t,e)}const Og="components";function zl(t,e){return $g(Og,t,!0,e)||t}const Fg=Symbol.for("v-ndc");function m0(t){return Xe(t)?$g(Og,t,!1)||t:t||Fg}function $g(t,e,n=!0,r=!1){const i=gt||Et;if(i){const s=i.type;{const a=r_(s,!1);if(a&&(a===e||a===Xt(e)||a===ia(Xt(e))))return s}const o=Qd(i[t]||s[t],e)||Qd(i.appContext[t],e);return!o&&r?s:o}}function Qd(t,e){return t&&(t[e]||t[Xt(e)]||t[ia(Xt(e))])}function an(t,e,n,r){let i;const s=n,o=Ne(t);if(o||Xe(t)){const a=o&&Ir(t);let l=!1,c=!1;a&&(l=!qt(t),c=Xn(t),t=aa(t)),i=new Array(t.length);for(let d=0,u=t.length;d<u;d++)i[d]=e(l?c?fi(cn(t[d])):cn(t[d]):t[d],d,void 0,s)}else if(typeof t=="number"){i=new Array(t);for(let a=0;a<t;a++)i[a]=e(a+1,a,void 0,s)}else if(Be(t))if(t[Symbol.iterator])i=Array.from(t,(a,l)=>e(a,l,void 0,s));else{const a=Object.keys(t);i=new Array(a.length);for(let l=0,c=a.length;l<c;l++){const d=a[l];i[l]=e(t[d],d,l,s)}}else i=[];return i}function Bl(t,e,n={},r,i){if(gt.ce||gt.parent&&ri(gt.parent)&&gt.parent.ce){const c=Object.keys(n).length>0;return e!=="default"&&(n.name=e),K(),Zn(qe,null,[Ee("slot",n,r)],c?-2:64)}let s=t[e];s&&s._c&&(s._d=!1),K();const o=s&&zg(s(n)),a=n.key||o&&o.key,l=Zn(qe,{key:(a&&!ln(a)?a:`_${e}`)+(!o&&r?"_fb":"")},o||[],o&&t._===1?64:-2);return!i&&l.scopeId&&(l.slotScopeIds=[l.scopeId+"-s"]),s&&s._c&&(s._d=!0),l}function zg(t){return t.some(e=>cs(e)?!(e.type===wt||e.type===qe&&!zg(e.children)):!0)?t:null}const Vl=t=>t?op(t)?fa(t):Vl(t.parent):null,Qi=ht(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Vl(t.parent),$root:t=>Vl(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>Vg(t),$forceUpdate:t=>t.f||(t.f=()=>{ed(t.update)}),$nextTick:t=>t.n||(t.n=Gr.bind(t.proxy)),$watch:t=>S0.bind(t)}),Va=(t,e)=>t!==je&&!t.__isScriptSetup&&ze(t,e),y0={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:r,data:i,props:s,accessCache:o,type:a,appContext:l}=t;if(e[0]!=="$"){const h=o[e];if(h!==void 0)switch(h){case 1:return r[e];case 2:return i[e];case 4:return n[e];case 3:return s[e]}else{if(Va(r,e))return o[e]=1,r[e];if(i!==je&&ze(i,e))return o[e]=2,i[e];if(ze(s,e))return o[e]=3,s[e];if(n!==je&&ze(n,e))return o[e]=4,n[e];Ul&&(o[e]=0)}}const c=Qi[e];let d,u;if(c)return e==="$attrs"&&_t(t.attrs,"get",""),c(t);if((d=a.__cssModules)&&(d=d[e]))return d;if(n!==je&&ze(n,e))return o[e]=4,n[e];if(u=l.config.globalProperties,ze(u,e))return u[e]},set({_:t},e,n){const{data:r,setupState:i,ctx:s}=t;return Va(i,e)?(i[e]=n,!0):r!==je&&ze(r,e)?(r[e]=n,!0):ze(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(s[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:i,props:s,type:o}},a){let l;return!!(n[a]||t!==je&&a[0]!=="$"&&ze(t,a)||Va(e,a)||ze(s,a)||ze(r,a)||ze(Qi,a)||ze(i.config.globalProperties,a)||(l=o.__cssModules)&&l[a])},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:ze(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function eu(t){return Ne(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let Ul=!0;function v0(t){const e=Vg(t),n=t.proxy,r=t.ctx;Ul=!1,e.beforeCreate&&tu(e.beforeCreate,t,"bc");const{data:i,computed:s,methods:o,watch:a,provide:l,inject:c,created:d,beforeMount:u,mounted:h,beforeUpdate:f,updated:p,activated:y,deactivated:w,beforeDestroy:b,beforeUnmount:E,destroyed:k,unmounted:_,render:x,renderTracked:T,renderTriggered:L,errorCaptured:O,serverPrefetch:F,expose:$,inheritAttrs:j,components:z,directives:I,filters:A}=e;if(c&&_0(c,r,null),o)for(const S in o){const U=o[S];De(U)&&(r[S]=U.bind(n))}if(i){const S=i.call(n,n);Be(S)&&(t.data=Cs(S))}if(Ul=!0,s)for(const S in s){const U=s[S],H=De(U)?U.bind(n,n):De(U.get)?U.get.bind(n,n):wn,ne=!De(U)&&De(U.set)?U.set.bind(n):wn,_e=Je({get:H,set:ne});Object.defineProperty(r,S,{enumerable:!0,configurable:!0,get:()=>_e.value,set:ye=>_e.value=ye})}if(a)for(const S in a)Bg(a[S],r,n,S);if(l){const S=De(l)?l.call(n):l;Reflect.ownKeys(S).forEach(U=>{ho(U,S[U])})}d&&tu(d,t,"c");function C(S,U){Ne(U)?U.forEach(H=>S(H.bind(n))):U&&S(U.bind(n))}if(C(c0,u),C(Yt,h),C(d0,f),C(u0,p),C(o0,y),C(a0,w),C(p0,O),C(g0,T),C(f0,L),C(Mg,E),C($r,_),C(h0,F),Ne($))if($.length){const S=t.exposed||(t.exposed={});$.forEach(U=>{Object.defineProperty(S,U,{get:()=>n[U],set:H=>n[U]=H,enumerable:!0})})}else t.exposed||(t.exposed={});x&&t.render===wn&&(t.render=x),j!=null&&(t.inheritAttrs=j),z&&(t.components=z),I&&(t.directives=I),F&&Pg(t)}function _0(t,e,n=wn){Ne(t)&&(t=jl(t));for(const r in t){const i=t[r];let s;Be(i)?"default"in i?s=En(i.from||r,i.default,!0):s=En(i.from||r):s=En(i),At(s)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>s.value,set:o=>s.value=o}):e[r]=s}}function tu(t,e,n){dn(Ne(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function Bg(t,e,n,r){let i=r.includes(".")?Hg(n,r):()=>n[r];if(Xe(t)){const s=e[t];De(s)&&ut(i,s)}else if(De(t))ut(i,t.bind(n));else if(Be(t))if(Ne(t))t.forEach(s=>Bg(s,e,n,r));else{const s=De(t.handler)?t.handler.bind(n):e[t.handler];De(s)&&ut(i,s,t)}}function Vg(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:i,optionsCache:s,config:{optionMergeStrategies:o}}=t.appContext,a=s.get(e);let l;return a?l=a:!i.length&&!n&&!r?l=e:(l={},i.length&&i.forEach(c=>To(l,c,o,!0)),To(l,e,o)),Be(e)&&s.set(e,l),l}function To(t,e,n,r=!1){const{mixins:i,extends:s}=e;s&&To(t,s,n,!0),i&&i.forEach(o=>To(t,o,n,!0));for(const o in e)if(!(r&&o==="expose")){const a=b0[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const b0={data:nu,props:ru,emits:ru,methods:ji,computed:ji,beforeCreate:St,created:St,beforeMount:St,mounted:St,beforeUpdate:St,updated:St,beforeDestroy:St,beforeUnmount:St,destroyed:St,unmounted:St,activated:St,deactivated:St,errorCaptured:St,serverPrefetch:St,components:ji,directives:ji,watch:E0,provide:nu,inject:w0};function nu(t,e){return e?t?function(){return ht(De(t)?t.call(this,this):t,De(e)?e.call(this,this):e)}:e:t}function w0(t,e){return ji(jl(t),jl(e))}function jl(t){if(Ne(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function St(t,e){return t?[...new Set([].concat(t,e))]:e}function ji(t,e){return t?ht(Object.create(null),t,e):e}function ru(t,e){return t?Ne(t)&&Ne(e)?[...new Set([...t,...e])]:ht(Object.create(null),eu(t),eu(e??{})):e}function E0(t,e){if(!t)return e;if(!e)return t;const n=ht(Object.create(null),t);for(const r in e)n[r]=St(t[r],e[r]);return n}function Ug(){return{app:null,config:{isNativeTag:Kf,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let k0=0;function A0(t,e){return function(r,i=null){De(r)||(r=ht({},r)),i!=null&&!Be(i)&&(i=null);const s=Ug(),o=new WeakSet,a=[];let l=!1;const c=s.app={_uid:k0++,_component:r,_props:i,_container:null,_context:s,_instance:null,version:s_,get config(){return s.config},set config(d){},use(d,...u){return o.has(d)||(d&&De(d.install)?(o.add(d),d.install(c,...u)):De(d)&&(o.add(d),d(c,...u))),c},mixin(d){return s.mixins.includes(d)||s.mixins.push(d),c},component(d,u){return u?(s.components[d]=u,c):s.components[d]},directive(d,u){return u?(s.directives[d]=u,c):s.directives[d]},mount(d,u,h){if(!l){const f=c._ceVNode||Ee(r,i);return f.appContext=s,h===!0?h="svg":h===!1&&(h=void 0),t(f,d,h),l=!0,c._container=d,d.__vue_app__=c,fa(f.component)}},onUnmount(d){a.push(d)},unmount(){l&&(dn(a,c._instance,16),t(null,c._container),delete c._container.__vue_app__)},provide(d,u){return s.provides[d]=u,c},runWithContext(d){const u=ii;ii=c;try{return d()}finally{ii=u}}};return c}}let ii=null;function ho(t,e){if(Et){let n=Et.provides;const r=Et.parent&&Et.parent.provides;r===n&&(n=Et.provides=Object.create(r)),n[t]=e}}function En(t,e,n=!1){const r=sp();if(r||ii){let i=ii?ii._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(i&&t in i)return i[t];if(arguments.length>1)return n&&De(e)?e.call(r&&r.proxy):e}}const x0=Symbol.for("v-scx"),C0=()=>En(x0);function ut(t,e,n){return jg(t,e,n)}function jg(t,e,n=je){const{immediate:r,deep:i,flush:s,once:o}=n,a=ht({},n),l=e&&r||!e&&s!=="post";let c;if(ds){if(s==="sync"){const f=C0();c=f.__watcherHandles||(f.__watcherHandles=[])}else if(!l){const f=()=>{};return f.stop=wn,f.resume=wn,f.pause=wn,f}}const d=Et;a.call=(f,p,y)=>dn(f,d,p,y);let u=!1;s==="post"?a.scheduler=f=>{Tt(f,d&&d.suspense)}:s!=="sync"&&(u=!0,a.scheduler=(f,p)=>{p?f():ed(f)}),a.augmentJob=f=>{e&&(f.flags|=4),u&&(f.flags|=2,d&&(f.id=d.uid,f.i=d))};const h=Yv(t,e,a);return ds&&(c?c.push(h):l&&h()),h}function S0(t,e,n){const r=this.proxy,i=Xe(t)?t.includes(".")?Hg(r,t):()=>r[t]:t.bind(r,r);let s;De(e)?s=e:(s=e.handler,n=e);const o=Ts(this),a=jg(i,s.bind(r),n);return o(),a}function Hg(t,e){const n=e.split(".");return()=>{let r=t;for(let i=0;i<n.length&&r;i++)r=r[n[i]];return r}}const T0=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${Xt(e)}Modifiers`]||t[`${pr(e)}Modifiers`];function N0(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||je;let i=n;const s=e.startsWith("update:"),o=s&&T0(r,e.slice(7));o&&(o.trim&&(i=n.map(d=>Xe(d)?d.trim():d)),o.number&&(i=n.map(sa)));let a,l=r[a=Ma(e)]||r[a=Ma(Xt(e))];!l&&s&&(l=r[a=Ma(pr(e))]),l&&dn(l,t,6,i);const c=r[a+"Once"];if(c){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,dn(c,t,6,i)}}const R0=new WeakMap;function Wg(t,e,n=!1){const r=n?R0:e.emitsCache,i=r.get(t);if(i!==void 0)return i;const s=t.emits;let o={},a=!1;if(!De(t)){const l=c=>{const d=Wg(c,e,!0);d&&(a=!0,ht(o,d))};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!s&&!a?(Be(t)&&r.set(t,null),null):(Ne(s)?s.forEach(l=>o[l]=null):ht(o,s),Be(t)&&r.set(t,o),o)}function ua(t,e){return!t||!ta(e)?!1:(e=e.slice(2).replace(/Once$/,""),ze(t,e[0].toLowerCase()+e.slice(1))||ze(t,pr(e))||ze(t,e))}function iu(t){const{type:e,vnode:n,proxy:r,withProxy:i,propsOptions:[s],slots:o,attrs:a,emit:l,render:c,renderCache:d,props:u,data:h,setupState:f,ctx:p,inheritAttrs:y}=t,w=Co(t);let b,E;try{if(n.shapeFlag&4){const _=i||r,x=_;b=_n(c.call(x,_,d,u,f,h,p)),E=a}else{const _=e;b=_n(_.length>1?_(u,{attrs:a,slots:o,emit:l}):_(u,null)),E=e.props?a:L0(a)}}catch(_){es.length=0,la(_,t,1),b=Ee(wt)}let k=b;if(E&&y!==!1){const _=Object.keys(E),{shapeFlag:x}=k;_.length&&x&7&&(s&&_.some(jc)&&(E=I0(E,s)),k=gr(k,E,!1,!0))}return n.dirs&&(k=gr(k,null,!1,!0),k.dirs=k.dirs?k.dirs.concat(n.dirs):n.dirs),n.transition&&as(k,n.transition),b=k,Co(w),b}const L0=t=>{let e;for(const n in t)(n==="class"||n==="style"||ta(n))&&((e||(e={}))[n]=t[n]);return e},I0=(t,e)=>{const n={};for(const r in t)(!jc(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function D0(t,e,n){const{props:r,children:i,component:s}=t,{props:o,children:a,patchFlag:l}=e,c=s.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return r?su(r,o,c):!!o;if(l&8){const d=e.dynamicProps;for(let u=0;u<d.length;u++){const h=d[u];if(o[h]!==r[h]&&!ua(c,h))return!0}}}else return(i||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?su(r,o,c):!0:!!o;return!1}function su(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let i=0;i<r.length;i++){const s=r[i];if(e[s]!==t[s]&&!ua(n,s))return!0}return!1}function P0({vnode:t,parent:e},n){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=n,e=e.parent;else break}}const qg={},Kg=()=>Object.create(qg),Xg=t=>Object.getPrototypeOf(t)===qg;function G0(t,e,n,r=!1){const i={},s=Kg();t.propsDefaults=Object.create(null),Zg(t,e,i,s);for(const o in t.propsOptions[0])o in i||(i[o]=void 0);n?t.props=r?i:mg(i):t.type.props?t.props=i:t.props=s,t.attrs=s}function M0(t,e,n,r){const{props:i,attrs:s,vnode:{patchFlag:o}}=t,a=Oe(i),[l]=t.propsOptions;let c=!1;if((r||o>0)&&!(o&16)){if(o&8){const d=t.vnode.dynamicProps;for(let u=0;u<d.length;u++){let h=d[u];if(ua(t.emitsOptions,h))continue;const f=e[h];if(l)if(ze(s,h))f!==s[h]&&(s[h]=f,c=!0);else{const p=Xt(h);i[p]=Hl(l,a,p,f,t,!1)}else f!==s[h]&&(s[h]=f,c=!0)}}}else{Zg(t,e,i,s)&&(c=!0);let d;for(const u in a)(!e||!ze(e,u)&&((d=pr(u))===u||!ze(e,d)))&&(l?n&&(n[u]!==void 0||n[d]!==void 0)&&(i[u]=Hl(l,a,u,void 0,t,!0)):delete i[u]);if(s!==a)for(const u in s)(!e||!ze(e,u))&&(delete s[u],c=!0)}c&&zn(t.attrs,"set","")}function Zg(t,e,n,r){const[i,s]=t.propsOptions;let o=!1,a;if(e)for(let l in e){if(Ki(l))continue;const c=e[l];let d;i&&ze(i,d=Xt(l))?!s||!s.includes(d)?n[d]=c:(a||(a={}))[d]=c:ua(t.emitsOptions,l)||(!(l in r)||c!==r[l])&&(r[l]=c,o=!0)}if(s){const l=Oe(n),c=a||je;for(let d=0;d<s.length;d++){const u=s[d];n[u]=Hl(i,l,u,c[u],t,!ze(c,u))}}return o}function Hl(t,e,n,r,i,s){const o=t[n];if(o!=null){const a=ze(o,"default");if(a&&r===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&De(l)){const{propsDefaults:c}=i;if(n in c)r=c[n];else{const d=Ts(i);r=c[n]=l.call(null,e),d()}}else r=l;i.ce&&i.ce._setProp(n,r)}o[0]&&(s&&!a?r=!1:o[1]&&(r===""||r===pr(n))&&(r=!0))}return r}const O0=new WeakMap;function Yg(t,e,n=!1){const r=n?O0:e.propsCache,i=r.get(t);if(i)return i;const s=t.props,o={},a=[];let l=!1;if(!De(t)){const d=u=>{l=!0;const[h,f]=Yg(u,e,!0);ht(o,h),f&&a.push(...f)};!n&&e.mixins.length&&e.mixins.forEach(d),t.extends&&d(t.extends),t.mixins&&t.mixins.forEach(d)}if(!s&&!l)return Be(t)&&r.set(t,ei),ei;if(Ne(s))for(let d=0;d<s.length;d++){const u=Xt(s[d]);ou(u)&&(o[u]=je)}else if(s)for(const d in s){const u=Xt(d);if(ou(u)){const h=s[d],f=o[u]=Ne(h)||De(h)?{type:h}:ht({},h),p=f.type;let y=!1,w=!0;if(Ne(p))for(let b=0;b<p.length;++b){const E=p[b],k=De(E)&&E.name;if(k==="Boolean"){y=!0;break}else k==="String"&&(w=!1)}else y=De(p)&&p.name==="Boolean";f[0]=y,f[1]=w,(y||ze(f,"default"))&&a.push(u)}}const c=[o,a];return Be(t)&&r.set(t,c),c}function ou(t){return t[0]!=="$"&&!Ki(t)}const td=t=>t==="_"||t==="_ctx"||t==="$stable",nd=t=>Ne(t)?t.map(_n):[_n(t)],F0=(t,e,n)=>{if(e._n)return e;const r=Ue((...i)=>nd(e(...i)),n);return r._c=!1,r},Jg=(t,e,n)=>{const r=t._ctx;for(const i in t){if(td(i))continue;const s=t[i];if(De(s))e[i]=F0(i,s,r);else if(s!=null){const o=nd(s);e[i]=()=>o}}},Qg=(t,e)=>{const n=nd(e);t.slots.default=()=>n},ep=(t,e,n)=>{for(const r in e)(n||!td(r))&&(t[r]=e[r])},$0=(t,e,n)=>{const r=t.slots=Kg();if(t.vnode.shapeFlag&32){const i=e._;i?(ep(r,e,n),n&&Jf(r,"_",i,!0)):Jg(e,r)}else e&&Qg(t,e)},z0=(t,e,n)=>{const{vnode:r,slots:i}=t;let s=!0,o=je;if(r.shapeFlag&32){const a=e._;a?n&&a===1?s=!1:ep(i,e,n):(s=!e.$stable,Jg(e,i)),o=e}else e&&(Qg(t,e),o={default:1});if(s)for(const a in i)!td(a)&&o[a]==null&&delete i[a]},Tt=H0;function B0(t){return V0(t)}function V0(t,e){const n=oa();n.__VUE__=!0;const{insert:r,remove:i,patchProp:s,createElement:o,createText:a,createComment:l,setText:c,setElementText:d,parentNode:u,nextSibling:h,setScopeId:f=wn,insertStaticContent:p}=t,y=(N,P,G,V=null,M=null,Z=null,ie=void 0,he=null,de=!!P.dynamicChildren)=>{if(N===P)return;N&&!Sr(N,P)&&(V=q(N),ye(N,M,Z,!0),N=null),P.patchFlag===-2&&(de=!1,P.dynamicChildren=null);const{type:te,ref:ke,shapeFlag:ve}=P;switch(te){case ha:w(N,P,G,V);break;case wt:b(N,P,G,V);break;case ja:N==null&&E(P,G,V,ie);break;case qe:z(N,P,G,V,M,Z,ie,he,de);break;default:ve&1?x(N,P,G,V,M,Z,ie,he,de):ve&6?I(N,P,G,V,M,Z,ie,he,de):(ve&64||ve&128)&&te.process(N,P,G,V,M,Z,ie,he,de,Q)}ke!=null&&M?Ji(ke,N&&N.ref,Z,P||N,!P):ke==null&&N&&N.ref!=null&&Ji(N.ref,null,Z,N,!0)},w=(N,P,G,V)=>{if(N==null)r(P.el=a(P.children),G,V);else{const M=P.el=N.el;P.children!==N.children&&c(M,P.children)}},b=(N,P,G,V)=>{N==null?r(P.el=l(P.children||""),G,V):P.el=N.el},E=(N,P,G,V)=>{[N.el,N.anchor]=p(N.children,P,G,V,N.el,N.anchor)},k=({el:N,anchor:P},G,V)=>{let M;for(;N&&N!==P;)M=h(N),r(N,G,V),N=M;r(P,G,V)},_=({el:N,anchor:P})=>{let G;for(;N&&N!==P;)G=h(N),i(N),N=G;i(P)},x=(N,P,G,V,M,Z,ie,he,de)=>{if(P.type==="svg"?ie="svg":P.type==="math"&&(ie="mathml"),N==null)T(P,G,V,M,Z,ie,he,de);else{const te=N.el&&N.el._isVueCE?N.el:null;try{te&&te._beginPatch(),F(N,P,M,Z,ie,he,de)}finally{te&&te._endPatch()}}},T=(N,P,G,V,M,Z,ie,he)=>{let de,te;const{props:ke,shapeFlag:ve,transition:Ae,dirs:Ce}=N;if(de=N.el=o(N.type,Z,ke&&ke.is,ke),ve&8?d(de,N.children):ve&16&&O(N.children,de,null,V,M,Ua(N,Z),ie,he),Ce&&mr(N,null,V,"created"),L(de,N,N.scopeId,ie,V),ke){for(const ee in ke)ee!=="value"&&!Ki(ee)&&s(de,ee,null,ke[ee],Z,V);"value"in ke&&s(de,"value",null,ke.value,Z),(te=ke.onVnodeBeforeMount)&&pn(te,V,N)}Ce&&mr(N,null,V,"beforeMount");const Ie=U0(M,Ae);Ie&&Ae.beforeEnter(de),r(de,P,G),((te=ke&&ke.onVnodeMounted)||Ie||Ce)&&Tt(()=>{te&&pn(te,V,N),Ie&&Ae.enter(de),Ce&&mr(N,null,V,"mounted")},M)},L=(N,P,G,V,M)=>{if(G&&f(N,G),V)for(let Z=0;Z<V.length;Z++)f(N,V[Z]);if(M){let Z=M.subTree;if(P===Z||np(Z.type)&&(Z.ssContent===P||Z.ssFallback===P)){const ie=M.vnode;L(N,ie,ie.scopeId,ie.slotScopeIds,M.parent)}}},O=(N,P,G,V,M,Z,ie,he,de=0)=>{for(let te=de;te<N.length;te++){const ke=N[te]=he?or(N[te]):_n(N[te]);y(null,ke,P,G,V,M,Z,ie,he)}},F=(N,P,G,V,M,Z,ie)=>{const he=P.el=N.el;let{patchFlag:de,dynamicChildren:te,dirs:ke}=P;de|=N.patchFlag&16;const ve=N.props||je,Ae=P.props||je;let Ce;if(G&&yr(G,!1),(Ce=Ae.onVnodeBeforeUpdate)&&pn(Ce,G,P,N),ke&&mr(P,N,G,"beforeUpdate"),G&&yr(G,!0),(ve.innerHTML&&Ae.innerHTML==null||ve.textContent&&Ae.textContent==null)&&d(he,""),te?$(N.dynamicChildren,te,he,G,V,Ua(P,M),Z):ie||U(N,P,he,null,G,V,Ua(P,M),Z,!1),de>0){if(de&16)j(he,ve,Ae,G,M);else if(de&2&&ve.class!==Ae.class&&s(he,"class",null,Ae.class,M),de&4&&s(he,"style",ve.style,Ae.style,M),de&8){const Ie=P.dynamicProps;for(let ee=0;ee<Ie.length;ee++){const re=Ie[ee],X=ve[re],pe=Ae[re];(pe!==X||re==="value")&&s(he,re,X,pe,M,G)}}de&1&&N.children!==P.children&&d(he,P.children)}else!ie&&te==null&&j(he,ve,Ae,G,M);((Ce=Ae.onVnodeUpdated)||ke)&&Tt(()=>{Ce&&pn(Ce,G,P,N),ke&&mr(P,N,G,"updated")},V)},$=(N,P,G,V,M,Z,ie)=>{for(let he=0;he<P.length;he++){const de=N[he],te=P[he],ke=de.el&&(de.type===qe||!Sr(de,te)||de.shapeFlag&198)?u(de.el):G;y(de,te,ke,null,V,M,Z,ie,!0)}},j=(N,P,G,V,M)=>{if(P!==G){if(P!==je)for(const Z in P)!Ki(Z)&&!(Z in G)&&s(N,Z,P[Z],null,M,V);for(const Z in G){if(Ki(Z))continue;const ie=G[Z],he=P[Z];ie!==he&&Z!=="value"&&s(N,Z,he,ie,M,V)}"value"in G&&s(N,"value",P.value,G.value,M)}},z=(N,P,G,V,M,Z,ie,he,de)=>{const te=P.el=N?N.el:a(""),ke=P.anchor=N?N.anchor:a("");let{patchFlag:ve,dynamicChildren:Ae,slotScopeIds:Ce}=P;Ce&&(he=he?he.concat(Ce):Ce),N==null?(r(te,G,V),r(ke,G,V),O(P.children||[],G,ke,M,Z,ie,he,de)):ve>0&&ve&64&&Ae&&N.dynamicChildren?($(N.dynamicChildren,Ae,G,M,Z,ie,he),(P.key!=null||M&&P===M.subTree)&&rd(N,P,!0)):U(N,P,G,ke,M,Z,ie,he,de)},I=(N,P,G,V,M,Z,ie,he,de)=>{P.slotScopeIds=he,N==null?P.shapeFlag&512?M.ctx.activate(P,G,V,ie,de):A(P,G,V,M,Z,ie,de):D(N,P,de)},A=(N,P,G,V,M,Z,ie)=>{const he=N.component=J0(N,V,M);if(ca(N)&&(he.ctx.renderer=Q),Q0(he,!1,ie),he.asyncDep){if(M&&M.registerDep(he,C,ie),!N.el){const de=he.subTree=Ee(wt);b(null,de,P,G),N.placeholder=de.el}}else C(he,N,P,G,M,Z,ie)},D=(N,P,G)=>{const V=P.component=N.component;if(D0(N,P,G))if(V.asyncDep&&!V.asyncResolved){S(V,P,G);return}else V.next=P,V.update();else P.el=N.el,V.vnode=P},C=(N,P,G,V,M,Z,ie)=>{const he=()=>{if(N.isMounted){let{next:ve,bu:Ae,u:Ce,parent:Ie,vnode:ee}=N;{const it=tp(N);if(it){ve&&(ve.el=ee.el,S(N,ve,ie)),it.asyncDep.then(()=>{N.isUnmounted||he()});return}}let re=ve,X;yr(N,!1),ve?(ve.el=ee.el,S(N,ve,ie)):ve=ee,Ae&&co(Ae),(X=ve.props&&ve.props.onVnodeBeforeUpdate)&&pn(X,Ie,ve,ee),yr(N,!0);const pe=iu(N),Le=N.subTree;N.subTree=pe,y(Le,pe,u(Le.el),q(Le),N,M,Z),ve.el=pe.el,re===null&&P0(N,pe.el),Ce&&Tt(Ce,M),(X=ve.props&&ve.props.onVnodeUpdated)&&Tt(()=>pn(X,Ie,ve,ee),M)}else{let ve;const{el:Ae,props:Ce}=P,{bm:Ie,m:ee,parent:re,root:X,type:pe}=N,Le=ri(P);yr(N,!1),Ie&&co(Ie),!Le&&(ve=Ce&&Ce.onVnodeBeforeMount)&&pn(ve,re,P),yr(N,!0);{X.ce&&X.ce._def.shadowRoot!==!1&&X.ce._injectChildStyle(pe);const it=N.subTree=iu(N);y(null,it,G,V,N,M,Z),P.el=it.el}if(ee&&Tt(ee,M),!Le&&(ve=Ce&&Ce.onVnodeMounted)){const it=P;Tt(()=>pn(ve,re,it),M)}(P.shapeFlag&256||re&&ri(re.vnode)&&re.vnode.shapeFlag&256)&&N.a&&Tt(N.a,M),N.isMounted=!0,P=G=V=null}};N.scope.on();const de=N.effect=new ng(he);N.scope.off();const te=N.update=de.run.bind(de),ke=N.job=de.runIfDirty.bind(de);ke.i=N,ke.id=N.uid,de.scheduler=()=>ed(ke),yr(N,!0),te()},S=(N,P,G)=>{P.component=N;const V=N.vnode.props;N.vnode=P,N.next=null,M0(N,P.props,V,G),z0(N,P.children,G),qn(),qd(N),Kn()},U=(N,P,G,V,M,Z,ie,he,de=!1)=>{const te=N&&N.children,ke=N?N.shapeFlag:0,ve=P.children,{patchFlag:Ae,shapeFlag:Ce}=P;if(Ae>0){if(Ae&128){ne(te,ve,G,V,M,Z,ie,he,de);return}else if(Ae&256){H(te,ve,G,V,M,Z,ie,he,de);return}}Ce&8?(ke&16&&be(te,M,Z),ve!==te&&d(G,ve)):ke&16?Ce&16?ne(te,ve,G,V,M,Z,ie,he,de):be(te,M,Z,!0):(ke&8&&d(G,""),Ce&16&&O(ve,G,V,M,Z,ie,he,de))},H=(N,P,G,V,M,Z,ie,he,de)=>{N=N||ei,P=P||ei;const te=N.length,ke=P.length,ve=Math.min(te,ke);let Ae;for(Ae=0;Ae<ve;Ae++){const Ce=P[Ae]=de?or(P[Ae]):_n(P[Ae]);y(N[Ae],Ce,G,null,M,Z,ie,he,de)}te>ke?be(N,M,Z,!0,!1,ve):O(P,G,V,M,Z,ie,he,de,ve)},ne=(N,P,G,V,M,Z,ie,he,de)=>{let te=0;const ke=P.length;let ve=N.length-1,Ae=ke-1;for(;te<=ve&&te<=Ae;){const Ce=N[te],Ie=P[te]=de?or(P[te]):_n(P[te]);if(Sr(Ce,Ie))y(Ce,Ie,G,null,M,Z,ie,he,de);else break;te++}for(;te<=ve&&te<=Ae;){const Ce=N[ve],Ie=P[Ae]=de?or(P[Ae]):_n(P[Ae]);if(Sr(Ce,Ie))y(Ce,Ie,G,null,M,Z,ie,he,de);else break;ve--,Ae--}if(te>ve){if(te<=Ae){const Ce=Ae+1,Ie=Ce<ke?P[Ce].el:V;for(;te<=Ae;)y(null,P[te]=de?or(P[te]):_n(P[te]),G,Ie,M,Z,ie,he,de),te++}}else if(te>Ae)for(;te<=ve;)ye(N[te],M,Z,!0),te++;else{const Ce=te,Ie=te,ee=new Map;for(te=Ie;te<=Ae;te++){const Ft=P[te]=de?or(P[te]):_n(P[te]);Ft.key!=null&&ee.set(Ft.key,te)}let re,X=0;const pe=Ae-Ie+1;let Le=!1,it=0;const Tn=new Array(pe);for(te=0;te<pe;te++)Tn[te]=0;for(te=Ce;te<=ve;te++){const Ft=N[te];if(X>=pe){ye(Ft,M,Z,!0);continue}let gn;if(Ft.key!=null)gn=ee.get(Ft.key);else for(re=Ie;re<=Ae;re++)if(Tn[re-Ie]===0&&Sr(Ft,P[re])){gn=re;break}gn===void 0?ye(Ft,M,Z,!0):(Tn[gn-Ie]=te+1,gn>=it?it=gn:Le=!0,y(Ft,P[gn],G,null,M,Z,ie,he,de),X++)}const zd=Le?j0(Tn):ei;for(re=zd.length-1,te=pe-1;te>=0;te--){const Ft=Ie+te,gn=P[Ft],Bd=P[Ft+1],Vd=Ft+1<ke?Bd.el||Bd.placeholder:V;Tn[te]===0?y(null,gn,G,Vd,M,Z,ie,he,de):Le&&(re<0||te!==zd[re]?_e(gn,G,Vd,2):re--)}}},_e=(N,P,G,V,M=null)=>{const{el:Z,type:ie,transition:he,children:de,shapeFlag:te}=N;if(te&6){_e(N.component.subTree,P,G,V);return}if(te&128){N.suspense.move(P,G,V);return}if(te&64){ie.move(N,P,G,Q);return}if(ie===qe){r(Z,P,G);for(let ve=0;ve<de.length;ve++)_e(de[ve],P,G,V);r(N.anchor,P,G);return}if(ie===ja){k(N,P,G);return}if(V!==2&&te&1&&he)if(V===0)he.beforeEnter(Z),r(Z,P,G),Tt(()=>he.enter(Z),M);else{const{leave:ve,delayLeave:Ae,afterLeave:Ce}=he,Ie=()=>{N.ctx.isUnmounted?i(Z):r(Z,P,G)},ee=()=>{Z._isLeaving&&Z[Fn](!0),ve(Z,()=>{Ie(),Ce&&Ce()})};Ae?Ae(Z,Ie,ee):ee()}else r(Z,P,G)},ye=(N,P,G,V=!1,M=!1)=>{const{type:Z,props:ie,ref:he,children:de,dynamicChildren:te,shapeFlag:ke,patchFlag:ve,dirs:Ae,cacheIndex:Ce}=N;if(ve===-2&&(M=!1),he!=null&&(qn(),Ji(he,null,G,N,!0),Kn()),Ce!=null&&(P.renderCache[Ce]=void 0),ke&256){P.ctx.deactivate(N);return}const Ie=ke&1&&Ae,ee=!ri(N);let re;if(ee&&(re=ie&&ie.onVnodeBeforeUnmount)&&pn(re,P,N),ke&6)se(N.component,G,V);else{if(ke&128){N.suspense.unmount(G,V);return}Ie&&mr(N,null,P,"beforeUnmount"),ke&64?N.type.remove(N,P,G,Q,V):te&&!te.hasOnce&&(Z!==qe||ve>0&&ve&64)?be(te,P,G,!1,!0):(Z===qe&&ve&384||!M&&ke&16)&&be(de,P,G),V&&ae(N)}(ee&&(re=ie&&ie.onVnodeUnmounted)||Ie)&&Tt(()=>{re&&pn(re,P,N),Ie&&mr(N,null,P,"unmounted")},G)},ae=N=>{const{type:P,el:G,anchor:V,transition:M}=N;if(P===qe){W(G,V);return}if(P===ja){_(N);return}const Z=()=>{i(G),M&&!M.persisted&&M.afterLeave&&M.afterLeave()};if(N.shapeFlag&1&&M&&!M.persisted){const{leave:ie,delayLeave:he}=M,de=()=>ie(G,Z);he?he(N.el,Z,de):de()}else Z()},W=(N,P)=>{let G;for(;N!==P;)G=h(N),i(N),N=G;i(P)},se=(N,P,G)=>{const{bum:V,scope:M,job:Z,subTree:ie,um:he,m:de,a:te}=N;au(de),au(te),V&&co(V),M.stop(),Z&&(Z.flags|=8,ye(ie,N,P,G)),he&&Tt(he,P),Tt(()=>{N.isUnmounted=!0},P)},be=(N,P,G,V=!1,M=!1,Z=0)=>{for(let ie=Z;ie<N.length;ie++)ye(N[ie],P,G,V,M)},q=N=>{if(N.shapeFlag&6)return q(N.component.subTree);if(N.shapeFlag&128)return N.suspense.next();const P=h(N.anchor||N.el),G=P&&P[Ag];return G?h(G):P};let oe=!1;const B=(N,P,G)=>{N==null?P._vnode&&ye(P._vnode,null,null,!0):y(P._vnode||null,N,P,null,null,null,G),P._vnode=N,oe||(oe=!0,qd(),wg(),oe=!1)},Q={p:y,um:ye,m:_e,r:ae,mt:A,mc:O,pc:U,pbc:$,n:q,o:t};return{render:B,hydrate:void 0,createApp:A0(B)}}function Ua({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function yr({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function U0(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function rd(t,e,n=!1){const r=t.children,i=e.children;if(Ne(r)&&Ne(i))for(let s=0;s<r.length;s++){const o=r[s];let a=i[s];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=i[s]=or(i[s]),a.el=o.el),!n&&a.patchFlag!==-2&&rd(o,a)),a.type===ha&&a.patchFlag!==-1&&(a.el=o.el),a.type===wt&&!a.el&&(a.el=o.el)}}function j0(t){const e=t.slice(),n=[0];let r,i,s,o,a;const l=t.length;for(r=0;r<l;r++){const c=t[r];if(c!==0){if(i=n[n.length-1],t[i]<c){e[r]=i,n.push(r);continue}for(s=0,o=n.length-1;s<o;)a=s+o>>1,t[n[a]]<c?s=a+1:o=a;c<t[n[s]]&&(s>0&&(e[r]=n[s-1]),n[s]=r)}}for(s=n.length,o=n[s-1];s-- >0;)n[s]=o,o=e[o];return n}function tp(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:tp(e)}function au(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const np=t=>t.__isSuspense;function H0(t,e){e&&e.pendingBranch?Ne(t)?e.effects.push(...t):e.effects.push(t):e0(t)}const qe=Symbol.for("v-fgt"),ha=Symbol.for("v-txt"),wt=Symbol.for("v-cmt"),ja=Symbol.for("v-stc"),es=[];let Bt=null;function K(t=!1){es.push(Bt=t?null:[])}function W0(){es.pop(),Bt=es[es.length-1]||null}let ls=1;function No(t,e=!1){ls+=t,t<0&&Bt&&e&&(Bt.hasOnce=!0)}function rp(t){return t.dynamicChildren=ls>0?Bt||ei:null,W0(),ls>0&&Bt&&Bt.push(t),t}function Y(t,e,n,r,i,s){return rp(g(t,e,n,r,i,s,!0))}function Zn(t,e,n,r,i){return rp(Ee(t,e,n,r,i,!0))}function cs(t){return t?t.__v_isVNode===!0:!1}function Sr(t,e){return t.type===e.type&&t.key===e.key}const ip=({key:t})=>t??null,fo=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?Xe(t)||At(t)||De(t)?{i:gt,r:t,k:e,f:!!n}:t:null);function g(t,e=null,n=null,r=0,i=null,s=t===qe?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&ip(e),ref:e&&fo(e),scopeId:kg,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:gt};return a?(id(l,n),s&128&&t.normalize(l)):n&&(l.shapeFlag|=Xe(n)?8:16),ls>0&&!o&&Bt&&(l.patchFlag>0||s&6)&&l.patchFlag!==32&&Bt.push(l),l}const Ee=q0;function q0(t,e=null,n=null,r=0,i=null,s=!1){if((!t||t===Fg)&&(t=wt),cs(t)){const a=gr(t,e,!0);return n&&id(a,n),ls>0&&!s&&Bt&&(a.shapeFlag&6?Bt[Bt.indexOf(t)]=a:Bt.push(a)),a.patchFlag=-2,a}if(i_(t)&&(t=t.__vccOpts),e){e=K0(e);let{class:a,style:l}=e;a&&!Xe(a)&&(e.class=Ke(a)),Be(l)&&(Qc(l)&&!Ne(l)&&(l=ht({},l)),e.style=xs(l))}const o=Xe(t)?1:np(t)?128:xg(t)?64:Be(t)?4:De(t)?2:0;return g(t,e,n,r,i,o,s,!0)}function K0(t){return t?Qc(t)||Xg(t)?ht({},t):t:null}function gr(t,e,n=!1,r=!1){const{props:i,ref:s,patchFlag:o,children:a,transition:l}=t,c=e?X0(i||{},e):i,d={__v_isVNode:!0,__v_skip:!0,type:t.type,props:c,key:c&&ip(c),ref:e&&e.ref?n&&s?Ne(s)?s.concat(fo(e)):[s,fo(e)]:fo(e):s,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==qe?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:l,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&gr(t.ssContent),ssFallback:t.ssFallback&&gr(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l&&r&&as(d,l.clone(d)),d}function Se(t=" ",e=0){return Ee(ha,null,t,e)}function Ge(t="",e=!1){return e?(K(),Zn(wt,null,t)):Ee(wt,null,t)}function _n(t){return t==null||typeof t=="boolean"?Ee(wt):Ne(t)?Ee(qe,null,t.slice()):cs(t)?or(t):Ee(ha,null,String(t))}function or(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:gr(t)}function id(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(Ne(e))n=16;else if(typeof e=="object")if(r&65){const i=e.default;i&&(i._c&&(i._d=!1),id(t,i()),i._c&&(i._d=!0));return}else{n=32;const i=e._;!i&&!Xg(e)?e._ctx=gt:i===3&&gt&&(gt.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else De(e)?(e={default:e,_ctx:gt},n=32):(e=String(e),r&64?(n=16,e=[Se(e)]):n=8);t.children=e,t.shapeFlag|=n}function X0(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const i in r)if(i==="class")e.class!==r.class&&(e.class=Ke([e.class,r.class]));else if(i==="style")e.style=xs([e.style,r.style]);else if(ta(i)){const s=e[i],o=r[i];o&&s!==o&&!(Ne(s)&&s.includes(o))&&(e[i]=s?[].concat(s,o):o)}else i!==""&&(e[i]=r[i])}return e}function pn(t,e,n,r=null){dn(t,e,7,[n,r])}const Z0=Ug();let Y0=0;function J0(t,e,n){const r=t.type,i=(e?e.appContext:t.appContext)||Z0,s={uid:Y0++,vnode:t,type:r,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Av(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Yg(r,i),emitsOptions:Wg(r,i),emit:null,emitted:null,propsDefaults:je,inheritAttrs:r.inheritAttrs,ctx:je,data:je,props:je,attrs:je,slots:je,refs:je,setupState:je,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=e?e.root:s,s.emit=N0.bind(null,s),t.ce&&t.ce(s),s}let Et=null;const sp=()=>Et||gt;let Ro,Wl;{const t=oa(),e=(n,r)=>{let i;return(i=t[n])||(i=t[n]=[]),i.push(r),s=>{i.length>1?i.forEach(o=>o(s)):i[0](s)}};Ro=e("__VUE_INSTANCE_SETTERS__",n=>Et=n),Wl=e("__VUE_SSR_SETTERS__",n=>ds=n)}const Ts=t=>{const e=Et;return Ro(t),t.scope.on(),()=>{t.scope.off(),Ro(e)}},lu=()=>{Et&&Et.scope.off(),Ro(null)};function op(t){return t.vnode.shapeFlag&4}let ds=!1;function Q0(t,e=!1,n=!1){e&&Wl(e);const{props:r,children:i}=t.vnode,s=op(t);G0(t,r,s,e),$0(t,i,n||e);const o=s?e_(t,e):void 0;return e&&Wl(!1),o}function e_(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,y0);const{setup:r}=n;if(r){qn();const i=t.setupContext=r.length>1?n_(t):null,s=Ts(t),o=Ss(r,t,0,[t.props,i]),a=Xf(o);if(Kn(),s(),(a||t.sp)&&!ri(t)&&Pg(t),a){if(o.then(lu,lu),e)return o.then(l=>{cu(t,l)}).catch(l=>{la(l,t,0)});t.asyncDep=o}else cu(t,o)}else ap(t)}function cu(t,e,n){De(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Be(e)&&(t.setupState=vg(e)),ap(t)}function ap(t,e,n){const r=t.type;t.render||(t.render=r.render||wn);{const i=Ts(t);qn();try{v0(t)}finally{Kn(),i()}}}const t_={get(t,e){return _t(t,"get",""),t[e]}};function n_(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,t_),slots:t.slots,emit:t.emit,expose:e}}function fa(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(vg(jv(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in Qi)return Qi[n](t)},has(e,n){return n in e||n in Qi}})):t.proxy}function r_(t,e=!0){return De(t)?t.displayName||t.name:t.name||e&&t.__name}function i_(t){return De(t)&&"__vccOpts"in t}const Je=(t,e)=>Xv(t,e,ds);function sd(t,e,n){try{No(-1);const r=arguments.length;return r===2?Be(e)&&!Ne(e)?cs(e)?Ee(t,null,[e]):Ee(t,e):Ee(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&cs(n)&&(n=[n]),Ee(t,e,n))}finally{No(1)}}const s_="3.5.25";let ql;const du=typeof window<"u"&&window.trustedTypes;if(du)try{ql=du.createPolicy("vue",{createHTML:t=>t})}catch{}const lp=ql?t=>ql.createHTML(t):t=>t,o_="http://www.w3.org/2000/svg",a_="http://www.w3.org/1998/Math/MathML",Mn=typeof document<"u"?document:null,uu=Mn&&Mn.createElement("template"),l_={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const i=e==="svg"?Mn.createElementNS(o_,t):e==="mathml"?Mn.createElementNS(a_,t):n?Mn.createElement(t,{is:n}):Mn.createElement(t);return t==="select"&&r&&r.multiple!=null&&i.setAttribute("multiple",r.multiple),i},createText:t=>Mn.createTextNode(t),createComment:t=>Mn.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Mn.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,i,s){const o=n?n.previousSibling:e.lastChild;if(i&&(i===s||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),n),!(i===s||!(i=i.nextSibling)););else{uu.innerHTML=lp(r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t);const a=uu.content;if(r==="svg"||r==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},er="transition",Ni="animation",us=Symbol("_vtc"),cp={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},c_=ht({},Tg,cp),d_=t=>(t.displayName="Transition",t.props=c_,t),Lo=d_((t,{slots:e})=>sd(s0,u_(t),e)),vr=(t,e=[])=>{Ne(t)?t.forEach(n=>n(...e)):t&&t(...e)},hu=t=>t?Ne(t)?t.some(e=>e.length>1):t.length>1:!1;function u_(t){const e={};for(const z in t)z in cp||(e[z]=t[z]);if(t.css===!1)return e;const{name:n="v",type:r,duration:i,enterFromClass:s=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:l=s,appearActiveClass:c=o,appearToClass:d=a,leaveFromClass:u=`${n}-leave-from`,leaveActiveClass:h=`${n}-leave-active`,leaveToClass:f=`${n}-leave-to`}=t,p=h_(i),y=p&&p[0],w=p&&p[1],{onBeforeEnter:b,onEnter:E,onEnterCancelled:k,onLeave:_,onLeaveCancelled:x,onBeforeAppear:T=b,onAppear:L=E,onAppearCancelled:O=k}=e,F=(z,I,A,D)=>{z._enterCancelled=D,_r(z,I?d:a),_r(z,I?c:o),A&&A()},$=(z,I)=>{z._isLeaving=!1,_r(z,u),_r(z,f),_r(z,h),I&&I()},j=z=>(I,A)=>{const D=z?L:E,C=()=>F(I,z,A);vr(D,[I,C]),fu(()=>{_r(I,z?l:s),Rn(I,z?d:a),hu(D)||gu(I,r,y,C)})};return ht(e,{onBeforeEnter(z){vr(b,[z]),Rn(z,s),Rn(z,o)},onBeforeAppear(z){vr(T,[z]),Rn(z,l),Rn(z,c)},onEnter:j(!1),onAppear:j(!0),onLeave(z,I){z._isLeaving=!0;const A=()=>$(z,I);Rn(z,u),z._enterCancelled?(Rn(z,h),yu(z)):(yu(z),Rn(z,h)),fu(()=>{z._isLeaving&&(_r(z,u),Rn(z,f),hu(_)||gu(z,r,w,A))}),vr(_,[z,A])},onEnterCancelled(z){F(z,!1,void 0,!0),vr(k,[z])},onAppearCancelled(z){F(z,!0,void 0,!0),vr(O,[z])},onLeaveCancelled(z){$(z),vr(x,[z])}})}function h_(t){if(t==null)return null;if(Be(t))return[Ha(t.enter),Ha(t.leave)];{const e=Ha(t);return[e,e]}}function Ha(t){return pv(t)}function Rn(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[us]||(t[us]=new Set)).add(e)}function _r(t,e){e.split(/\s+/).forEach(r=>r&&t.classList.remove(r));const n=t[us];n&&(n.delete(e),n.size||(t[us]=void 0))}function fu(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let f_=0;function gu(t,e,n,r){const i=t._endId=++f_,s=()=>{i===t._endId&&r()};if(n!=null)return setTimeout(s,n);const{type:o,timeout:a,propCount:l}=g_(t,e);if(!o)return r();const c=o+"end";let d=0;const u=()=>{t.removeEventListener(c,h),s()},h=f=>{f.target===t&&++d>=l&&u()};setTimeout(()=>{d<l&&u()},a+1),t.addEventListener(c,h)}function g_(t,e){const n=window.getComputedStyle(t),r=p=>(n[p]||"").split(", "),i=r(`${er}Delay`),s=r(`${er}Duration`),o=pu(i,s),a=r(`${Ni}Delay`),l=r(`${Ni}Duration`),c=pu(a,l);let d=null,u=0,h=0;e===er?o>0&&(d=er,u=o,h=s.length):e===Ni?c>0&&(d=Ni,u=c,h=l.length):(u=Math.max(o,c),d=u>0?o>c?er:Ni:null,h=d?d===er?s.length:l.length:0);const f=d===er&&/\b(?:transform|all)(?:,|$)/.test(r(`${er}Property`).toString());return{type:d,timeout:u,propCount:h,hasTransform:f}}function pu(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,r)=>mu(n)+mu(t[r])))}function mu(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function yu(t){return(t?t.ownerDocument:document).body.offsetHeight}function p_(t,e,n){const r=t[us];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const Io=Symbol("_vod"),dp=Symbol("_vsh"),Bs={name:"show",beforeMount(t,{value:e},{transition:n}){t[Io]=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):Ri(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:r}){!e!=!n&&(r?e?(r.beforeEnter(t),Ri(t,!0),r.enter(t)):r.leave(t,()=>{Ri(t,!1)}):Ri(t,e))},beforeUnmount(t,{value:e}){Ri(t,e)}};function Ri(t,e){t.style.display=e?t[Io]:"none",t[dp]=!e}const m_=Symbol(""),y_=/(?:^|;)\s*display\s*:/;function v_(t,e,n){const r=t.style,i=Xe(n);let s=!1;if(n&&!i){if(e)if(Xe(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&go(r,a,"")}else for(const o in e)n[o]==null&&go(r,o,"");for(const o in n)o==="display"&&(s=!0),go(r,o,n[o])}else if(i){if(e!==n){const o=r[m_];o&&(n+=";"+o),r.cssText=n,s=y_.test(n)}}else e&&t.removeAttribute("style");Io in t&&(t[Io]=s?r.display:"",t[dp]&&(r.display="none"))}const vu=/\s*!important$/;function go(t,e,n){if(Ne(n))n.forEach(r=>go(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=__(t,e);vu.test(n)?t.setProperty(pr(r),n.replace(vu,""),"important"):t[r]=n}}const _u=["Webkit","Moz","ms"],Wa={};function __(t,e){const n=Wa[e];if(n)return n;let r=Xt(e);if(r!=="filter"&&r in t)return Wa[e]=r;r=ia(r);for(let i=0;i<_u.length;i++){const s=_u[i]+r;if(s in t)return Wa[e]=s}return e}const bu="http://www.w3.org/1999/xlink";function wu(t,e,n,r,i,s=wv(e)){r&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(bu,e.slice(6,e.length)):t.setAttributeNS(bu,e,n):n==null||s&&!Qf(n)?t.removeAttribute(e):t.setAttribute(e,s?"":ln(n)?String(n):n)}function Eu(t,e,n,r,i){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?lp(n):n);return}const s=t.tagName;if(e==="value"&&s!=="PROGRESS"&&!s.includes("-")){const a=s==="OPTION"?t.getAttribute("value")||"":t.value,l=n==null?t.type==="checkbox"?"on":"":String(n);(a!==l||!("_value"in t))&&(t.value=l),n==null&&t.removeAttribute(e),t._value=n;return}let o=!1;if(n===""||n==null){const a=typeof t[e];a==="boolean"?n=Qf(n):n==null&&a==="string"?(n="",o=!0):a==="number"&&(n=0,o=!0)}try{t[e]=n}catch{}o&&t.removeAttribute(i||e)}function lr(t,e,n,r){t.addEventListener(e,n,r)}function b_(t,e,n,r){t.removeEventListener(e,n,r)}const ku=Symbol("_vei");function w_(t,e,n,r,i=null){const s=t[ku]||(t[ku]={}),o=s[e];if(r&&o)o.value=r;else{const[a,l]=E_(e);if(r){const c=s[e]=x_(r,i);lr(t,a,c,l)}else o&&(b_(t,a,o,l),s[e]=void 0)}}const Au=/(?:Once|Passive|Capture)$/;function E_(t){let e;if(Au.test(t)){e={};let r;for(;r=t.match(Au);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):pr(t.slice(2)),e]}let qa=0;const k_=Promise.resolve(),A_=()=>qa||(k_.then(()=>qa=0),qa=Date.now());function x_(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;dn(C_(r,n.value),e,5,[r])};return n.value=t,n.attached=A_(),n}function C_(t,e){if(Ne(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>i=>!i._stopped&&r&&r(i))}else return e}const xu=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,S_=(t,e,n,r,i,s)=>{const o=i==="svg";e==="class"?p_(t,r,o):e==="style"?v_(t,n,r):ta(e)?jc(e)||w_(t,e,n,r,s):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):T_(t,e,r,o))?(Eu(t,e,r),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&wu(t,e,r,o,s,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!Xe(r))?Eu(t,Xt(e),r,s,e):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),wu(t,e,r,o))};function T_(t,e,n,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&xu(e)&&De(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="sandbox"&&t.tagName==="IFRAME"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const i=t.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return xu(e)&&Xe(n)?!1:e in t}const gi=t=>{const e=t.props["onUpdate:modelValue"]||!1;return Ne(e)?n=>co(e,n):e};function N_(t){t.target.composing=!0}function Cu(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Hn=Symbol("_assign");function Su(t,e,n){return e&&(t=t.trim()),n&&(t=sa(t)),t}const Kl={created(t,{modifiers:{lazy:e,trim:n,number:r}},i){t[Hn]=gi(i);const s=r||i.props&&i.props.type==="number";lr(t,e?"change":"input",o=>{o.target.composing||t[Hn](Su(t.value,n,s))}),(n||s)&&lr(t,"change",()=>{t.value=Su(t.value,n,s)}),e||(lr(t,"compositionstart",N_),lr(t,"compositionend",Cu),lr(t,"change",Cu))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:r,trim:i,number:s}},o){if(t[Hn]=gi(o),t.composing)return;const a=(s||t.type==="number")&&!/^0\d/.test(t.value)?sa(t.value):t.value,l=e??"";a!==l&&(document.activeElement===t&&t.type!=="range"&&(r&&e===n||i&&t.value.trim()===l)||(t.value=l))}},Xl={created(t,{value:e},n){t.checked=hi(e,n.props.value),t[Hn]=gi(n),lr(t,"change",()=>{t[Hn](hs(t))})},beforeUpdate(t,{value:e,oldValue:n},r){t[Hn]=gi(r),e!==n&&(t.checked=hi(e,r.props.value))}},up={deep:!0,created(t,{value:e,modifiers:{number:n}},r){const i=na(e);lr(t,"change",()=>{const s=Array.prototype.filter.call(t.options,o=>o.selected).map(o=>n?sa(hs(o)):hs(o));t[Hn](t.multiple?i?new Set(s):s:s[0]),t._assigning=!0,Gr(()=>{t._assigning=!1})}),t[Hn]=gi(r)},mounted(t,{value:e}){Tu(t,e)},beforeUpdate(t,e,n){t[Hn]=gi(n)},updated(t,{value:e}){t._assigning||Tu(t,e)}};function Tu(t,e){const n=t.multiple,r=Ne(e);if(!(n&&!r&&!na(e))){for(let i=0,s=t.options.length;i<s;i++){const o=t.options[i],a=hs(o);if(n)if(r){const l=typeof a;l==="string"||l==="number"?o.selected=e.some(c=>String(c)===String(a)):o.selected=kv(e,a)>-1}else o.selected=e.has(a);else if(hi(hs(o),e)){t.selectedIndex!==i&&(t.selectedIndex=i);return}}!n&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function hs(t){return"_value"in t?t._value:t.value}const R_=["ctrl","shift","alt","meta"],L_={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>R_.some(n=>t[`${n}Key`]&&!e.includes(n))},Zr=(t,e)=>{const n=t._withMods||(t._withMods={}),r=e.join(".");return n[r]||(n[r]=((i,...s)=>{for(let o=0;o<e.length;o++){const a=L_[e[o]];if(a&&a(i,e))return}return t(i,...s)}))},I_={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Vn=(t,e)=>{const n=t._withKeys||(t._withKeys={}),r=e.join(".");return n[r]||(n[r]=(i=>{if(!("key"in i))return;const s=pr(i.key);if(e.some(o=>o===s||I_[o]===s))return t(i)}))},D_=ht({patchProp:S_},l_);let Nu;function P_(){return Nu||(Nu=B0(D_))}const G_=((...t)=>{const e=P_().createApp(...t),{mount:n}=e;return e.mount=r=>{const i=O_(r);if(!i)return;const s=e._component;!De(s)&&!s.render&&!s.template&&(s.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const o=n(i,!1,M_(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},e});function M_(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function O_(t){return Xe(t)?document.querySelector(t):t}const Kr=typeof document<"u";function hp(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function F_(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&hp(t.default)}const $e=Object.assign;function Ka(t,e){const n={};for(const r in e){const i=e[r];n[r]=un(i)?i.map(t):t(i)}return n}const ts=()=>{},un=Array.isArray;function Ru(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}const fp=/#/g,$_=/&/g,z_=/\//g,B_=/=/g,V_=/\?/g,gp=/\+/g,U_=/%5B/g,j_=/%5D/g,pp=/%5E/g,H_=/%60/g,mp=/%7B/g,W_=/%7C/g,yp=/%7D/g,q_=/%20/g;function od(t){return t==null?"":encodeURI(""+t).replace(W_,"|").replace(U_,"[").replace(j_,"]")}function K_(t){return od(t).replace(mp,"{").replace(yp,"}").replace(pp,"^")}function Zl(t){return od(t).replace(gp,"%2B").replace(q_,"+").replace(fp,"%23").replace($_,"%26").replace(H_,"`").replace(mp,"{").replace(yp,"}").replace(pp,"^")}function X_(t){return Zl(t).replace(B_,"%3D")}function Z_(t){return od(t).replace(fp,"%23").replace(V_,"%3F")}function Y_(t){return Z_(t).replace(z_,"%2F")}function fs(t){if(t==null)return null;try{return decodeURIComponent(""+t)}catch{}return""+t}const J_=/\/$/,Q_=t=>t.replace(J_,"");function Xa(t,e,n="/"){let r,i={},s="",o="";const a=e.indexOf("#");let l=e.indexOf("?");return l=a>=0&&l>a?-1:l,l>=0&&(r=e.slice(0,l),s=e.slice(l,a>0?a:e.length),i=t(s.slice(1))),a>=0&&(r=r||e.slice(0,a),o=e.slice(a,e.length)),r=rb(r??e,n),{fullPath:r+s+o,path:r,query:i,hash:fs(o)}}function eb(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function Lu(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function tb(t,e,n){const r=e.matched.length-1,i=n.matched.length-1;return r>-1&&r===i&&pi(e.matched[r],n.matched[i])&&vp(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function pi(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function vp(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!nb(t[n],e[n]))return!1;return!0}function nb(t,e){return un(t)?Iu(t,e):un(e)?Iu(e,t):t===e}function Iu(t,e){return un(e)?t.length===e.length&&t.every((n,r)=>n===e[r]):t.length===1&&t[0]===e}function rb(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/"),i=r[r.length-1];(i===".."||i===".")&&r.push("");let s=n.length-1,o,a;for(o=0;o<r.length;o++)if(a=r[o],a!==".")if(a==="..")s>1&&s--;else break;return n.slice(0,s).join("/")+"/"+r.slice(o).join("/")}const tr={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let Yl=(function(t){return t.pop="pop",t.push="push",t})({}),Za=(function(t){return t.back="back",t.forward="forward",t.unknown="",t})({});function ib(t){if(!t)if(Kr){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),Q_(t)}const sb=/^[^#]+#/;function ob(t,e){return t.replace(sb,"#")+e}function ab(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}const ga=()=>({left:window.scrollX,top:window.scrollY});function lb(t){let e;if("el"in t){const n=t.el,r=typeof n=="string"&&n.startsWith("#"),i=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!i)return;e=ab(i,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function Du(t,e){return(history.state?history.state.position-e:-1)+t}const Jl=new Map;function cb(t,e){Jl.set(t,e)}function db(t){const e=Jl.get(t);return Jl.delete(t),e}function ub(t){return typeof t=="string"||t&&typeof t=="object"}function _p(t){return typeof t=="string"||typeof t=="symbol"}let Ye=(function(t){return t[t.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",t[t.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",t[t.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",t[t.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",t[t.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",t})({});const bp=Symbol("");Ye.MATCHER_NOT_FOUND+"",Ye.NAVIGATION_GUARD_REDIRECT+"",Ye.NAVIGATION_ABORTED+"",Ye.NAVIGATION_CANCELLED+"",Ye.NAVIGATION_DUPLICATED+"";function mi(t,e){return $e(new Error,{type:t,[bp]:!0},e)}function Ln(t,e){return t instanceof Error&&bp in t&&(e==null||!!(t.type&e))}const hb=["params","query","hash"];function fb(t){if(typeof t=="string")return t;if(t.path!=null)return t.path;const e={};for(const n of hb)n in t&&(e[n]=t[n]);return JSON.stringify(e,null,2)}function gb(t){const e={};if(t===""||t==="?")return e;const n=(t[0]==="?"?t.slice(1):t).split("&");for(let r=0;r<n.length;++r){const i=n[r].replace(gp," "),s=i.indexOf("="),o=fs(s<0?i:i.slice(0,s)),a=s<0?null:fs(i.slice(s+1));if(o in e){let l=e[o];un(l)||(l=e[o]=[l]),l.push(a)}else e[o]=a}return e}function Pu(t){let e="";for(let n in t){const r=t[n];if(n=X_(n),r==null){r!==void 0&&(e+=(e.length?"&":"")+n);continue}(un(r)?r.map(i=>i&&Zl(i)):[r&&Zl(r)]).forEach(i=>{i!==void 0&&(e+=(e.length?"&":"")+n,i!=null&&(e+="="+i))})}return e}function pb(t){const e={};for(const n in t){const r=t[n];r!==void 0&&(e[n]=un(r)?r.map(i=>i==null?null:""+i):r==null?r:""+r)}return e}const mb=Symbol(""),Gu=Symbol(""),ad=Symbol(""),ld=Symbol(""),Ql=Symbol("");function Li(){let t=[];function e(r){return t.push(r),()=>{const i=t.indexOf(r);i>-1&&t.splice(i,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function ar(t,e,n,r,i,s=o=>o()){const o=r&&(r.enterCallbacks[i]=r.enterCallbacks[i]||[]);return()=>new Promise((a,l)=>{const c=h=>{h===!1?l(mi(Ye.NAVIGATION_ABORTED,{from:n,to:e})):h instanceof Error?l(h):ub(h)?l(mi(Ye.NAVIGATION_GUARD_REDIRECT,{from:e,to:h})):(o&&r.enterCallbacks[i]===o&&typeof h=="function"&&o.push(h),a())},d=s(()=>t.call(r&&r.instances[i],e,n,c));let u=Promise.resolve(d);t.length<3&&(u=u.then(c)),u.catch(h=>l(h))})}function Ya(t,e,n,r,i=s=>s()){const s=[];for(const o of t)for(const a in o.components){let l=o.components[a];if(!(e!=="beforeRouteEnter"&&!o.instances[a]))if(hp(l)){const c=(l.__vccOpts||l)[e];c&&s.push(ar(c,n,r,o,a,i))}else{let c=l();s.push(()=>c.then(d=>{if(!d)throw new Error(`Couldn't resolve component "${a}" at "${o.path}"`);const u=F_(d)?d.default:d;o.mods[a]=d,o.components[a]=u;const h=(u.__vccOpts||u)[e];return h&&ar(h,n,r,o,a,i)()}))}}return s}function yb(t,e){const n=[],r=[],i=[],s=Math.max(e.matched.length,t.matched.length);for(let o=0;o<s;o++){const a=e.matched[o];a&&(t.matched.find(c=>pi(c,a))?r.push(a):n.push(a));const l=t.matched[o];l&&(e.matched.find(c=>pi(c,l))||i.push(l))}return[n,r,i]}let vb=()=>location.protocol+"//"+location.host;function wp(t,e){const{pathname:n,search:r,hash:i}=e,s=t.indexOf("#");if(s>-1){let o=i.includes(t.slice(s))?t.slice(s).length:1,a=i.slice(o);return a[0]!=="/"&&(a="/"+a),Lu(a,"")}return Lu(n,t)+r+i}function _b(t,e,n,r){let i=[],s=[],o=null;const a=({state:h})=>{const f=wp(t,location),p=n.value,y=e.value;let w=0;if(h){if(n.value=f,e.value=h,o&&o===p){o=null;return}w=y?h.position-y.position:0}else r(f);i.forEach(b=>{b(n.value,p,{delta:w,type:Yl.pop,direction:w?w>0?Za.forward:Za.back:Za.unknown})})};function l(){o=n.value}function c(h){i.push(h);const f=()=>{const p=i.indexOf(h);p>-1&&i.splice(p,1)};return s.push(f),f}function d(){if(document.visibilityState==="hidden"){const{history:h}=window;if(!h.state)return;h.replaceState($e({},h.state,{scroll:ga()}),"")}}function u(){for(const h of s)h();s=[],window.removeEventListener("popstate",a),window.removeEventListener("pagehide",d),document.removeEventListener("visibilitychange",d)}return window.addEventListener("popstate",a),window.addEventListener("pagehide",d),document.addEventListener("visibilitychange",d),{pauseListeners:l,listen:c,destroy:u}}function Mu(t,e,n,r=!1,i=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:i?ga():null}}function bb(t){const{history:e,location:n}=window,r={value:wp(t,n)},i={value:e.state};i.value||s(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function s(l,c,d){const u=t.indexOf("#"),h=u>-1?(n.host&&document.querySelector("base")?t:t.slice(u))+l:vb()+t+l;try{e[d?"replaceState":"pushState"](c,"",h),i.value=c}catch(f){console.error(f),n[d?"replace":"assign"](h)}}function o(l,c){s(l,$e({},e.state,Mu(i.value.back,l,i.value.forward,!0),c,{position:i.value.position}),!0),r.value=l}function a(l,c){const d=$e({},i.value,e.state,{forward:l,scroll:ga()});s(d.current,d,!0),s(l,$e({},Mu(r.value,l,null),{position:d.position+1},c),!1),r.value=l}return{location:r,state:i,push:a,replace:o}}function wb(t){t=ib(t);const e=bb(t),n=_b(t,e.state,e.location,e.replace);function r(s,o=!0){o||n.pauseListeners(),history.go(s)}const i=$e({location:"",base:t,go:r,createHref:ob.bind(null,t)},e,n);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>e.state.value}),i}let Tr=(function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.Group=2]="Group",t})({});var st=(function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.ParamRegExp=2]="ParamRegExp",t[t.ParamRegExpEnd=3]="ParamRegExpEnd",t[t.EscapeNext=4]="EscapeNext",t})(st||{});const Eb={type:Tr.Static,value:""},kb=/[a-zA-Z0-9_]/;function Ab(t){if(!t)return[[]];if(t==="/")return[[Eb]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(f){throw new Error(`ERR (${n})/"${c}": ${f}`)}let n=st.Static,r=n;const i=[];let s;function o(){s&&i.push(s),s=[]}let a=0,l,c="",d="";function u(){c&&(n===st.Static?s.push({type:Tr.Static,value:c}):n===st.Param||n===st.ParamRegExp||n===st.ParamRegExpEnd?(s.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),s.push({type:Tr.Param,value:c,regexp:d,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),c="")}function h(){c+=l}for(;a<t.length;){if(l=t[a++],l==="\\"&&n!==st.ParamRegExp){r=n,n=st.EscapeNext;continue}switch(n){case st.Static:l==="/"?(c&&u(),o()):l===":"?(u(),n=st.Param):h();break;case st.EscapeNext:h(),n=r;break;case st.Param:l==="("?n=st.ParamRegExp:kb.test(l)?h():(u(),n=st.Static,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case st.ParamRegExp:l===")"?d[d.length-1]=="\\"?d=d.slice(0,-1)+l:n=st.ParamRegExpEnd:d+=l;break;case st.ParamRegExpEnd:u(),n=st.Static,l!=="*"&&l!=="?"&&l!=="+"&&a--,d="";break;default:e("Unknown state");break}}return n===st.ParamRegExp&&e(`Unfinished custom RegExp for param "${c}"`),u(),o(),i}const Ou="[^/]+?",xb={sensitive:!1,strict:!1,start:!0,end:!0};var Nt=(function(t){return t[t._multiplier=10]="_multiplier",t[t.Root=90]="Root",t[t.Segment=40]="Segment",t[t.SubSegment=30]="SubSegment",t[t.Static=40]="Static",t[t.Dynamic=20]="Dynamic",t[t.BonusCustomRegExp=10]="BonusCustomRegExp",t[t.BonusWildcard=-50]="BonusWildcard",t[t.BonusRepeatable=-20]="BonusRepeatable",t[t.BonusOptional=-8]="BonusOptional",t[t.BonusStrict=.7000000000000001]="BonusStrict",t[t.BonusCaseSensitive=.25]="BonusCaseSensitive",t})(Nt||{});const Cb=/[.+*?^${}()[\]/\\]/g;function Sb(t,e){const n=$e({},xb,e),r=[];let i=n.start?"^":"";const s=[];for(const c of t){const d=c.length?[]:[Nt.Root];n.strict&&!c.length&&(i+="/");for(let u=0;u<c.length;u++){const h=c[u];let f=Nt.Segment+(n.sensitive?Nt.BonusCaseSensitive:0);if(h.type===Tr.Static)u||(i+="/"),i+=h.value.replace(Cb,"\\$&"),f+=Nt.Static;else if(h.type===Tr.Param){const{value:p,repeatable:y,optional:w,regexp:b}=h;s.push({name:p,repeatable:y,optional:w});const E=b||Ou;if(E!==Ou){f+=Nt.BonusCustomRegExp;try{`${E}`}catch(_){throw new Error(`Invalid custom RegExp for param "${p}" (${E}): `+_.message)}}let k=y?`((?:${E})(?:/(?:${E}))*)`:`(${E})`;u||(k=w&&c.length<2?`(?:/${k})`:"/"+k),w&&(k+="?"),i+=k,f+=Nt.Dynamic,w&&(f+=Nt.BonusOptional),y&&(f+=Nt.BonusRepeatable),E===".*"&&(f+=Nt.BonusWildcard)}d.push(f)}r.push(d)}if(n.strict&&n.end){const c=r.length-1;r[c][r[c].length-1]+=Nt.BonusStrict}n.strict||(i+="/?"),n.end?i+="$":n.strict&&!i.endsWith("/")&&(i+="(?:/|$)");const o=new RegExp(i,n.sensitive?"":"i");function a(c){const d=c.match(o),u={};if(!d)return null;for(let h=1;h<d.length;h++){const f=d[h]||"",p=s[h-1];u[p.name]=f&&p.repeatable?f.split("/"):f}return u}function l(c){let d="",u=!1;for(const h of t){(!u||!d.endsWith("/"))&&(d+="/"),u=!1;for(const f of h)if(f.type===Tr.Static)d+=f.value;else if(f.type===Tr.Param){const{value:p,repeatable:y,optional:w}=f,b=p in c?c[p]:"";if(un(b)&&!y)throw new Error(`Provided param "${p}" is an array but it is not repeatable (* or + modifiers)`);const E=un(b)?b.join("/"):b;if(!E)if(w)h.length<2&&(d.endsWith("/")?d=d.slice(0,-1):u=!0);else throw new Error(`Missing required param "${p}"`);d+=E}}return d||"/"}return{re:o,score:r,keys:s,parse:a,stringify:l}}function Tb(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?t.length===1&&t[0]===Nt.Static+Nt.Segment?-1:1:t.length>e.length?e.length===1&&e[0]===Nt.Static+Nt.Segment?1:-1:0}function Ep(t,e){let n=0;const r=t.score,i=e.score;for(;n<r.length&&n<i.length;){const s=Tb(r[n],i[n]);if(s)return s;n++}if(Math.abs(i.length-r.length)===1){if(Fu(r))return 1;if(Fu(i))return-1}return i.length-r.length}function Fu(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const Nb={strict:!1,end:!0,sensitive:!1};function Rb(t,e,n){const r=Sb(Ab(t.path),n),i=$e(r,{record:t,parent:e,children:[],alias:[]});return e&&!i.record.aliasOf==!e.record.aliasOf&&e.children.push(i),i}function Lb(t,e){const n=[],r=new Map;e=Ru(Nb,e);function i(u){return r.get(u)}function s(u,h,f){const p=!f,y=zu(u);y.aliasOf=f&&f.record;const w=Ru(e,u),b=[y];if("alias"in u){const _=typeof u.alias=="string"?[u.alias]:u.alias;for(const x of _)b.push(zu($e({},y,{components:f?f.record.components:y.components,path:x,aliasOf:f?f.record:y})))}let E,k;for(const _ of b){const{path:x}=_;if(h&&x[0]!=="/"){const T=h.record.path,L=T[T.length-1]==="/"?"":"/";_.path=h.record.path+(x&&L+x)}if(E=Rb(_,h,w),f?f.alias.push(E):(k=k||E,k!==E&&k.alias.push(E),p&&u.name&&!Bu(E)&&o(u.name)),kp(E)&&l(E),y.children){const T=y.children;for(let L=0;L<T.length;L++)s(T[L],E,f&&f.children[L])}f=f||E}return k?()=>{o(k)}:ts}function o(u){if(_p(u)){const h=r.get(u);h&&(r.delete(u),n.splice(n.indexOf(h),1),h.children.forEach(o),h.alias.forEach(o))}else{const h=n.indexOf(u);h>-1&&(n.splice(h,1),u.record.name&&r.delete(u.record.name),u.children.forEach(o),u.alias.forEach(o))}}function a(){return n}function l(u){const h=Pb(u,n);n.splice(h,0,u),u.record.name&&!Bu(u)&&r.set(u.record.name,u)}function c(u,h){let f,p={},y,w;if("name"in u&&u.name){if(f=r.get(u.name),!f)throw mi(Ye.MATCHER_NOT_FOUND,{location:u});w=f.record.name,p=$e($u(h.params,f.keys.filter(k=>!k.optional).concat(f.parent?f.parent.keys.filter(k=>k.optional):[]).map(k=>k.name)),u.params&&$u(u.params,f.keys.map(k=>k.name))),y=f.stringify(p)}else if(u.path!=null)y=u.path,f=n.find(k=>k.re.test(y)),f&&(p=f.parse(y),w=f.record.name);else{if(f=h.name?r.get(h.name):n.find(k=>k.re.test(h.path)),!f)throw mi(Ye.MATCHER_NOT_FOUND,{location:u,currentLocation:h});w=f.record.name,p=$e({},h.params,u.params),y=f.stringify(p)}const b=[];let E=f;for(;E;)b.unshift(E.record),E=E.parent;return{name:w,path:y,params:p,matched:b,meta:Db(b)}}t.forEach(u=>s(u));function d(){n.length=0,r.clear()}return{addRoute:s,resolve:c,removeRoute:o,clearRoutes:d,getRoutes:a,getRecordMatcher:i}}function $u(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function zu(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:Ib(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function Ib(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]=typeof n=="object"?n[r]:n;return e}function Bu(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function Db(t){return t.reduce((e,n)=>$e(e,n.meta),{})}function Pb(t,e){let n=0,r=e.length;for(;n!==r;){const s=n+r>>1;Ep(t,e[s])<0?r=s:n=s+1}const i=Gb(t);return i&&(r=e.lastIndexOf(i,r-1)),r}function Gb(t){let e=t;for(;e=e.parent;)if(kp(e)&&Ep(t,e)===0)return e}function kp({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function Vu(t){const e=En(ad),n=En(ld),r=Je(()=>{const l=m(t.to);return e.resolve(l)}),i=Je(()=>{const{matched:l}=r.value,{length:c}=l,d=l[c-1],u=n.matched;if(!d||!u.length)return-1;const h=u.findIndex(pi.bind(null,d));if(h>-1)return h;const f=Uu(l[c-2]);return c>1&&Uu(d)===f&&u[u.length-1].path!==f?u.findIndex(pi.bind(null,l[c-2])):h}),s=Je(()=>i.value>-1&&zb(n.params,r.value.params)),o=Je(()=>i.value>-1&&i.value===n.matched.length-1&&vp(n.params,r.value.params));function a(l={}){if($b(l)){const c=e[m(t.replace)?"replace":"push"](m(t.to)).catch(ts);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>c),c}return Promise.resolve()}return{route:r,href:Je(()=>r.value.href),isActive:s,isExactActive:o,navigate:a}}function Mb(t){return t.length===1?t[0]:t}const Ob=Dg({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:Vu,setup(t,{slots:e}){const n=Cs(Vu(t)),{options:r}=En(ad),i=Je(()=>({[ju(t.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[ju(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const s=e.default&&Mb(e.default(n));return t.custom?s:sd("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:i.value},s)}}}),Fb=Ob;function $b(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function zb(t,e){for(const n in e){const r=e[n],i=t[n];if(typeof r=="string"){if(r!==i)return!1}else if(!un(i)||i.length!==r.length||r.some((s,o)=>s!==i[o]))return!1}return!0}function Uu(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const ju=(t,e,n)=>t??e??n,Bb=Dg({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const r=En(Ql),i=Je(()=>t.route||r.value),s=En(Gu,0),o=Je(()=>{let c=m(s);const{matched:d}=i.value;let u;for(;(u=d[c])&&!u.components;)c++;return c}),a=Je(()=>i.value.matched[o.value]);ho(Gu,Je(()=>o.value+1)),ho(mb,a),ho(Ql,i);const l=ce();return ut(()=>[l.value,a.value,t.name],([c,d,u],[h,f,p])=>{d&&(d.instances[u]=c,f&&f!==d&&c&&c===h&&(d.leaveGuards.size||(d.leaveGuards=f.leaveGuards),d.updateGuards.size||(d.updateGuards=f.updateGuards))),c&&d&&(!f||!pi(d,f)||!h)&&(d.enterCallbacks[u]||[]).forEach(y=>y(c))},{flush:"post"}),()=>{const c=i.value,d=t.name,u=a.value,h=u&&u.components[d];if(!h)return Hu(n.default,{Component:h,route:c});const f=u.props[d],p=f?f===!0?c.params:typeof f=="function"?f(c):f:null,w=sd(h,$e({},p,e,{onVnodeUnmounted:b=>{b.component.isUnmounted&&(u.instances[d]=null)},ref:l}));return Hu(n.default,{Component:w,route:c})||w}}});function Hu(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const Vb=Bb;function Ub(t){const e=Lb(t.routes,t),n=t.parseQuery||gb,r=t.stringifyQuery||Pu,i=t.history,s=Li(),o=Li(),a=Li(),l=Hv(tr);let c=tr;Kr&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const d=Ka.bind(null,q=>""+q),u=Ka.bind(null,Y_),h=Ka.bind(null,fs);function f(q,oe){let B,Q;return _p(q)?(B=e.getRecordMatcher(q),Q=oe):Q=q,e.addRoute(Q,B)}function p(q){const oe=e.getRecordMatcher(q);oe&&e.removeRoute(oe)}function y(){return e.getRoutes().map(q=>q.record)}function w(q){return!!e.getRecordMatcher(q)}function b(q,oe){if(oe=$e({},oe||l.value),typeof q=="string"){const G=Xa(n,q,oe.path),V=e.resolve({path:G.path},oe),M=i.createHref(G.fullPath);return $e(G,V,{params:h(V.params),hash:fs(G.hash),redirectedFrom:void 0,href:M})}let B;if(q.path!=null)B=$e({},q,{path:Xa(n,q.path,oe.path).path});else{const G=$e({},q.params);for(const V in G)G[V]==null&&delete G[V];B=$e({},q,{params:u(G)}),oe.params=u(oe.params)}const Q=e.resolve(B,oe),J=q.hash||"";Q.params=d(h(Q.params));const N=eb(r,$e({},q,{hash:K_(J),path:Q.path})),P=i.createHref(N);return $e({fullPath:N,hash:J,query:r===Pu?pb(q.query):q.query||{}},Q,{redirectedFrom:void 0,href:P})}function E(q){return typeof q=="string"?Xa(n,q,l.value.path):$e({},q)}function k(q,oe){if(c!==q)return mi(Ye.NAVIGATION_CANCELLED,{from:oe,to:q})}function _(q){return L(q)}function x(q){return _($e(E(q),{replace:!0}))}function T(q,oe){const B=q.matched[q.matched.length-1];if(B&&B.redirect){const{redirect:Q}=B;let J=typeof Q=="function"?Q(q,oe):Q;return typeof J=="string"&&(J=J.includes("?")||J.includes("#")?J=E(J):{path:J},J.params={}),$e({query:q.query,hash:q.hash,params:J.path!=null?{}:q.params},J)}}function L(q,oe){const B=c=b(q),Q=l.value,J=q.state,N=q.force,P=q.replace===!0,G=T(B,Q);if(G)return L($e(E(G),{state:typeof G=="object"?$e({},J,G.state):J,force:N,replace:P}),oe||B);const V=B;V.redirectedFrom=oe;let M;return!N&&tb(r,Q,B)&&(M=mi(Ye.NAVIGATION_DUPLICATED,{to:V,from:Q}),_e(Q,Q,!0,!1)),(M?Promise.resolve(M):$(V,Q)).catch(Z=>Ln(Z)?Ln(Z,Ye.NAVIGATION_GUARD_REDIRECT)?Z:ne(Z):U(Z,V,Q)).then(Z=>{if(Z){if(Ln(Z,Ye.NAVIGATION_GUARD_REDIRECT))return L($e({replace:P},E(Z.to),{state:typeof Z.to=="object"?$e({},J,Z.to.state):J,force:N}),oe||V)}else Z=z(V,Q,!0,P,J);return j(V,Q,Z),Z})}function O(q,oe){const B=k(q,oe);return B?Promise.reject(B):Promise.resolve()}function F(q){const oe=W.values().next().value;return oe&&typeof oe.runWithContext=="function"?oe.runWithContext(q):q()}function $(q,oe){let B;const[Q,J,N]=yb(q,oe);B=Ya(Q.reverse(),"beforeRouteLeave",q,oe);for(const G of Q)G.leaveGuards.forEach(V=>{B.push(ar(V,q,oe))});const P=O.bind(null,q,oe);return B.push(P),be(B).then(()=>{B=[];for(const G of s.list())B.push(ar(G,q,oe));return B.push(P),be(B)}).then(()=>{B=Ya(J,"beforeRouteUpdate",q,oe);for(const G of J)G.updateGuards.forEach(V=>{B.push(ar(V,q,oe))});return B.push(P),be(B)}).then(()=>{B=[];for(const G of N)if(G.beforeEnter)if(un(G.beforeEnter))for(const V of G.beforeEnter)B.push(ar(V,q,oe));else B.push(ar(G.beforeEnter,q,oe));return B.push(P),be(B)}).then(()=>(q.matched.forEach(G=>G.enterCallbacks={}),B=Ya(N,"beforeRouteEnter",q,oe,F),B.push(P),be(B))).then(()=>{B=[];for(const G of o.list())B.push(ar(G,q,oe));return B.push(P),be(B)}).catch(G=>Ln(G,Ye.NAVIGATION_CANCELLED)?G:Promise.reject(G))}function j(q,oe,B){a.list().forEach(Q=>F(()=>Q(q,oe,B)))}function z(q,oe,B,Q,J){const N=k(q,oe);if(N)return N;const P=oe===tr,G=Kr?history.state:{};B&&(Q||P?i.replace(q.fullPath,$e({scroll:P&&G&&G.scroll},J)):i.push(q.fullPath,J)),l.value=q,_e(q,oe,B,P),ne()}let I;function A(){I||(I=i.listen((q,oe,B)=>{if(!se.listening)return;const Q=b(q),J=T(Q,se.currentRoute.value);if(J){L($e(J,{replace:!0,force:!0}),Q).catch(ts);return}c=Q;const N=l.value;Kr&&cb(Du(N.fullPath,B.delta),ga()),$(Q,N).catch(P=>Ln(P,Ye.NAVIGATION_ABORTED|Ye.NAVIGATION_CANCELLED)?P:Ln(P,Ye.NAVIGATION_GUARD_REDIRECT)?(L($e(E(P.to),{force:!0}),Q).then(G=>{Ln(G,Ye.NAVIGATION_ABORTED|Ye.NAVIGATION_DUPLICATED)&&!B.delta&&B.type===Yl.pop&&i.go(-1,!1)}).catch(ts),Promise.reject()):(B.delta&&i.go(-B.delta,!1),U(P,Q,N))).then(P=>{P=P||z(Q,N,!1),P&&(B.delta&&!Ln(P,Ye.NAVIGATION_CANCELLED)?i.go(-B.delta,!1):B.type===Yl.pop&&Ln(P,Ye.NAVIGATION_ABORTED|Ye.NAVIGATION_DUPLICATED)&&i.go(-1,!1)),j(Q,N,P)}).catch(ts)}))}let D=Li(),C=Li(),S;function U(q,oe,B){ne(q);const Q=C.list();return Q.length?Q.forEach(J=>J(q,oe,B)):console.error(q),Promise.reject(q)}function H(){return S&&l.value!==tr?Promise.resolve():new Promise((q,oe)=>{D.add([q,oe])})}function ne(q){return S||(S=!q,A(),D.list().forEach(([oe,B])=>q?B(q):oe()),D.reset()),q}function _e(q,oe,B,Q){const{scrollBehavior:J}=t;if(!Kr||!J)return Promise.resolve();const N=!B&&db(Du(q.fullPath,0))||(Q||!B)&&history.state&&history.state.scroll||null;return Gr().then(()=>J(q,oe,N)).then(P=>P&&lb(P)).catch(P=>U(P,q,oe))}const ye=q=>i.go(q);let ae;const W=new Set,se={currentRoute:l,listening:!0,addRoute:f,removeRoute:p,clearRoutes:e.clearRoutes,hasRoute:w,getRoutes:y,resolve:b,options:t,push:_,replace:x,go:ye,back:()=>ye(-1),forward:()=>ye(1),beforeEach:s.add,beforeResolve:o.add,afterEach:a.add,onError:C.add,isReady:H,install(q){q.component("RouterLink",Fb),q.component("RouterView",Vb),q.config.globalProperties.$router=se,Object.defineProperty(q.config.globalProperties,"$route",{enumerable:!0,get:()=>m(l)}),Kr&&!ae&&l.value===tr&&(ae=!0,_(i.location).catch(Q=>{}));const oe={};for(const Q in tr)Object.defineProperty(oe,Q,{get:()=>l.value[Q],enumerable:!0});q.provide(ad,se),q.provide(ld,mg(oe)),q.provide(Ql,l);const B=q.unmount;W.add(q),q.unmount=function(){W.delete(q),W.size<1&&(c=tr,I&&I(),I=null,l.value=tr,ae=!1,S=!1),B()}}};function be(q){return q.reduce((oe,B)=>oe.then(()=>F(B)),Promise.resolve())}return se}function jb(t){return En(ld)}const Ur={ERROR:1,WARN:2,INFO:3,DEBUG:4,TRACE:5},Hb="info",Wu="sandbox_logging_filters",qu=["themeswitcher","codemirroreditor","editoradapter"];class Wb{constructor(e={}){this.enabled=e.enabled!==!1,this.level=e.level||Hb,this.prefix=e.prefix||"",this.component=this.prefix,this.redactSecrets=e.redactSecrets||!1,this.showTimestamp=e.showTimestamp!==!1,this.format=e.format||"[{timestamp}] [{prefix}] {message}",this.currentLevel=Ur[this.level.toUpperCase()]??Ur.INFO,this.loggingManager=e.loggingManager,this.console=e.console||console,this.component&&this.loggingManager&&this.loggingManager.registerComponent(this.component)}shouldLog(e){if(e.toUpperCase()==="ERROR")return this.enabled&&Ur[e.toUpperCase()]<=this.currentLevel;const n=!this.component||!this.loggingManager||this.loggingManager.isComponentEnabled(this.component);return this.enabled&&n&&Ur[e.toUpperCase()]<=this.currentLevel}redactArgs(e){return this.redactSecrets?e.map(n=>this.redactValue(n)):e}redactValue(e){if(typeof e=="string")return e.replace(/\b[a-zA-Z0-9_-]{20,}\b/g,"[REDACTED]");if(Array.isArray(e))return e.map(n=>this.redactValue(n));if(e&&typeof e=="object"&&e.constructor===Object){const n={};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=this.redactValue(e[r]));return n}return e}getTimestamp(){return new Date().toISOString()}formatMessage(e,...n){const r=this.showTimestamp?this.getTimestamp():"",i=this.prefix;let s=this.format.replace("{timestamp}",r).replace("{prefix}",i).replace("{message}",e);this.showTimestamp||(s=s.replace(/\s*\[?\]\s*/g," ").replace(/\s+/g," ").trim());const o=this.redactArgs(n);return[s,...o]}error(e,...n){this.shouldLog("error")&&this.console.error(...this.formatMessage(e,...n))}warn(e,...n){this.shouldLog("warn")&&this.console.warn(...this.formatMessage(e,...n))}info(e,...n){this.shouldLog("info")&&this.console.info(...this.formatMessage(e,...n))}log(e,...n){this.shouldLog("info")&&this.console.log(...this.formatMessage(e,...n))}debug(e,...n){this.shouldLog("debug")&&this.console.debug(...this.formatMessage(e,...n))}trace(e,...n){if(this.shouldLog("trace")){const r=this.redactSecrets;this.redactSecrets=!0;const i=this.formatMessage(e,...n);this.redactSecrets=r,this.console.trace(...i)}}table(e,n){if(this.shouldLog("info")){const r=this.prefix?`[${this.prefix}]`:"";r&&this.console.log(r),this.console.table(e,n)}}group(e){this.shouldLog("info")&&this.console.group(...this.formatMessage(e))}groupCollapsed(e){this.shouldLog("info")&&this.console.groupCollapsed(...this.formatMessage(e))}groupEnd(){this.shouldLog("info")&&this.console.groupEnd()}time(e){this.shouldLog("debug")&&this.console.time(this.prefix?`[${this.prefix}] ${e}`:e)}timeEnd(e){this.shouldLog("debug")&&this.console.timeEnd(this.prefix?`[${this.prefix}] ${e}`:e)}setLevel(e){this.level=e,this.currentLevel=Ur[e.toUpperCase()]??Ur.INFO}enable(){this.enabled=!0}disable(){this.enabled=!1}isEnabled(){return this.enabled}}class qb{constructor(e={}){this.storage=e.storage,this.console=e.console||console,this.allowedComponents=new Set,this.globalEnabled=!0,this.allowAll=!1,this.registeredComponents=new Set,this.storage&&this.loadFromStorage()}enable(...e){e.forEach(n=>this.allowedComponents.add(n.toLowerCase())),this.saveToStorage(),this.console.log(" Logging enabled for:",e.join(", "))}disable(...e){e.forEach(n=>this.allowedComponents.delete(n.toLowerCase())),this.saveToStorage(),this.console.log(" Logging disabled for:",e.join(", "))}enableAll(){this.allowAll=!0,this.saveToStorage(),this.console.log(" Logging enabled for ALL components")}disableAll(){this.allowAll=!1,this.allowedComponents.clear(),this.saveToStorage(),this.console.log(" Logging disabled for ALL components (errors still show)")}status(){this.console.log(" Logging Status:"),this.console.log("  Global enabled:",this.globalEnabled),this.console.log("  Allow all:",this.allowAll),this.console.log("  Enabled components:",Array.from(this.allowedComponents).join(", ")||"none")}listComponents(){this.console.log(" Available components to filter:"),Array.from(this.registeredComponents).sort().forEach(e=>{const n=this.isComponentEnabled(e);this.console.log(`  ${n?"":""} ${e}`)})}isComponentEnabled(e){return this.globalEnabled?this.allowAll?!0:this.allowedComponents.has(e.toLowerCase()):!1}registerComponent(e){this.registeredComponents.add(e)}saveToStorage(){if(this.storage)try{const e={allowedComponents:Array.from(this.allowedComponents),allowAll:this.allowAll,globalEnabled:this.globalEnabled};this.storage.setItem(Wu,JSON.stringify(e))}catch{}}loadFromStorage(){if(this.storage)try{const e=this.storage.getItem(Wu),n=JSON.parse(e||"{}");this.allowedComponents=new Set(n.allowedComponents||[]),this.allowAll=n.allowAll||!1,this.globalEnabled=n.globalEnabled!==!1,e||(this.allowedComponents=new Set(qu))}catch{this.allowedComponents=new Set(qu)}}}class Ap{getItem(e){throw new Error("StorageAdapter.getItem must be implemented")}setItem(e,n){throw new Error("StorageAdapter.setItem must be implemented")}removeItem(e){throw new Error("StorageAdapter.removeItem must be implemented")}}class Kb extends Ap{constructor(){super(),this.storage=new Map}getItem(e){return this.storage.get(e)??null}setItem(e,n){this.storage.set(e,n)}removeItem(e){this.storage.delete(e)}}class Xb extends Ap{getItem(e){try{return localStorage.getItem(e)}catch{return null}}setItem(e,n){try{localStorage.setItem(e,n)}catch{}}removeItem(e){try{localStorage.removeItem(e)}catch{}}}function Zb(){return typeof localStorage<"u"?new Xb:new Kb}let xp=class{getGlobal(){throw new Error("GlobalAdapter.getGlobal must be implemented")}setGlobalProperty(e,n){throw new Error("GlobalAdapter.setGlobalProperty must be implemented")}hasGlobalProperty(e){throw new Error("GlobalAdapter.hasGlobalProperty must be implemented")}};class Yb extends xp{getGlobal(){return window}setGlobalProperty(e,n){window[e]=n}hasGlobalProperty(e){return e in window}}class Jb extends xp{getGlobal(){return globalThis}setGlobalProperty(e,n){globalThis[e]=n}hasGlobalProperty(e){return e in globalThis}}function Qb(){return typeof window<"u"?new Yb:new Jb}const ew=Zb(),Ku=Qb(),Ar=new qb({storage:ew,console});if(typeof window<"u"){const t={enable:(...e)=>Ar.enable(...e),disable:(...e)=>Ar.disable(...e),enableAll:()=>Ar.enableAll(),disableAll:()=>Ar.disableAll(),status:()=>Ar.status(),list:()=>Ar.listComponents()};Ku.setGlobalProperty("logFilter",t),Ku.setGlobalProperty("loggerjs",t)}function Ze(t={}){return new Wb({...t,loggingManager:Ar})}const tw=Ze({prefix:"i18n",level:"info"}),ec={en:{nav:{home:"Home",showcase:"Features Showcase",explorer:"Network Explorer",degrees:"Degrees",family:"Family Tree",docs:"Documentation"},common:{loading:"Loading...",error:"Error",success:"Success",darkMode:"Toggle dark mode",language:"Language"},footer:{madeBy:"Made with",by:"by",license:"MIT License"},home:{hero:{title:"Modern Network Analysis for JavaScript",subtitle:"Powerful graph theory and network analysis with worker-first architecture",description:"Analyze social networks, family trees, and complex graphs with ease. Fast parallel computation, comprehensive metrics, and beautiful visualizations - all in pure JavaScript.",cta:"Get Started",github:"View on GitHub"},features:[{icon:"",title:"Network Analytics",description:"Compute centrality metrics, clustering coefficients, and graph-level statistics with comprehensive analysis tools"},{icon:"",title:"Interactive Explorer",description:"Explore networks with drag-and-drop, zoom, pan, and real-time analysis of nodes and communities"},{icon:"",title:"Multiple Layouts",description:"11 layout algorithms including force-directed, Kamada-Kawai, spectral, and hierarchical layouts"},{icon:"",title:"Worker Performance",description:"Non-blocking UI with web workers for parallel computation on large graphs with thousands of nodes"},{icon:"",title:"Community Detection",description:"Find clusters and groups in networks using Louvain algorithm with modularity optimization"},{icon:"",title:"Rich Metrics",description:"Degree, betweenness, eigenvector, clustering, closeness, and more statistical features"}],code:{title:"Quick Start Example",snippet:`npm install @guinetik/graph-js

import NetworkStats from '@guinetik/graph-js';

const network = [
  { source: 'Alice', target: 'Bob', weight: 1 },
  { source: 'Bob', target: 'Carol', weight: 2 },
  { source: 'Carol', target: 'Alice', weight: 1 }
];

const analyzer = new NetworkStats({ verbose: true });
const results = await analyzer.analyze(network, ['degree', 'eigenvector']);

console.log(results);
// Analysis runs in workers for optimal performance!`}},docs:{title:"Documentation",subtitle:"Complete API reference for @guinetik/graph-js",sections:{quickStart:"Quick Start",coreClasses:"Core Classes",workers:"Worker Architecture",adapters:"Data Adapters",layouts:"Graph Layouts",community:"Community Detection",examples:"Usage Examples"},quickStart:{title:"Quick Start",install:"Installation",installCmd:"npm install @guinetik/graph-js",basicUsage:"Basic Usage",description:"Get started with network analysis in just a few lines of code."},graph:{title:"Graph",description:"Core graph data structure using adjacency maps for efficient operations.",methods:"Methods",methodsList:{addNode:{name:"addNode(nodeId)",description:"Add a single node to the graph"},addNodesFrom:{name:"addNodesFrom(nodeIds)",description:"Add multiple nodes from an array"},addEdge:{name:"addEdge(source, target, weight?)",description:"Add an edge between two nodes"},removeNode:{name:"removeNode(nodeId)",description:"Remove a node and all its edges"},getNeighbors:{name:"getNeighbors(nodeId)",description:"Get array of neighbor node IDs"},hasEdge:{name:"hasEdge(source, target)",description:"Check if edge exists"},numberOfNodes:{name:"numberOfNodes()",description:"Get total number of nodes"}}},networkStats:{title:"NetworkStats",description:"Main class for analyzing networks and calculating statistical metrics. All computation happens in web workers for optimal performance.",constructor:"Constructor",constructorParams:{verbose:"Enable detailed logging (default: true)",maxWorkers:"Maximum number of workers (default: auto-detect CPU cores)",taskTimeout:"Task timeout in milliseconds (default: 60000)",workerScript:"Custom worker script path for bundlers like Vite"},analyze:{title:"analyze() Method",description:"Compute network statistics for all nodes"},features:{title:"Available Features",degree:"Number of connections per node",eigenvector:"Influence based on connection quality (like PageRank)",eigenvectorLaplacian:"Laplacian eigenvector centrality (for spectral layouts)",betweenness:"Bridge importance between groups",clustering:"How densely connected neighbors are",closeness:"Average distance to all other nodes in the network",cliques:"Number of complete subgraphs containing the node",egoDensity:"Density of the node's immediate neighborhood",modularity:"Community assignment (Louvain algorithm)"}},workers:{title:"Worker Architecture",description:"All computation runs in Web Workers for non-blocking UI and optimal performance. The worker system includes intelligent affinity routing for JIT optimization, inspired by samsantosb/BeeThreads.",components:{title:"Components",workerManager:{name:"WorkerManager",description:"Singleton manager that initializes and routes tasks to workers"},workerPool:{name:"WorkerPool",description:"Pool of workers that execute tasks with automatic load balancing"},workerAdapter:{name:"WorkerAdapter",description:"Cross-platform adapter for Web Workers (browser) and Worker Threads (Node.js)"}},affinity:{title:"Worker Affinity System",description:"Routes repeated algorithm calls to the same worker, leveraging JavaScript JIT compilation for 10-30% faster repeated operations.",howItWorks:"How It Works",howItWorksSteps:["When a worker executes an algorithm, the function is JIT-compiled","The worker tracks which functions it has cached","Future calls for the same algorithm are routed to that worker",'The "hot" JIT-optimized code path is reused'],selectionTitle:"Selection Priority",selectionSteps:["Affinity Match: Find worker that previously ran the same algorithm","Least Loaded: Select worker with fewest tasks executed","FIFO Fallback: If affinity disabled, use first-available"]},config:{title:"Configuration",options:{maxWorkers:"Maximum workers (default: auto-detect CPU cores)",enableAffinity:"Enable worker affinity routing (default: true)",affinityCacheLimit:"Max cached functions per worker (default: 50)",taskTimeout:"Task timeout in milliseconds (default: 300000)"}},monitoring:{title:"Monitoring",description:"Get real-time statistics about worker pool and affinity performance"}},adapters:{title:"Data Adapters",description:"Convert between various graph formats and the standard GraphData format. All adapters use static methods.",csv:{title:"CSVAdapter",description:"Load and convert CSV files to graph format. Supports edge lists and node property files.",methods:"Methods",methodsList:{fromEdgeList:{name:"fromEdgeList(csvText, options)",description:'Parse CSV edge list. Options: header (default: true), delimiter (default: ","), weighted (default: true)',returns:"Returns GraphData with nodes and edges"},fromNodes:{name:"fromNodes(csvText, options)",description:"Parse CSV node properties",returns:"Returns array of NodeData objects"},loadFromURL:{name:"loadFromURL(edgeURL, nodeURL, options)",description:"Async method to fetch and parse CSV from URLs",returns:"Returns Promise<GraphData>"},toEdgeList:{name:"toEdgeList(graphData, options)",description:"Export edges to CSV string",returns:"Returns CSV string"},toNodes:{name:"toNodes(graphData, options)",description:"Export nodes to CSV string",returns:"Returns CSV string"}}},json:{title:"JSONAdapter",description:"Support for D3.js, Cytoscape, and other JSON formats. Auto-detects format.",methods:"Methods",methodsList:{fromD3:{name:"fromD3(d3Data)",description:'Convert D3.js force-directed format (with "links") to GraphData',returns:"Returns GraphData"},fromCytoscape:{name:"fromCytoscape(cytoData)",description:"Convert Cytoscape.js format to GraphData",returns:"Returns GraphData"},fromFormat:{name:"fromFormat(jsonData)",description:"Auto-detect format (GraphData, D3, Cytoscape, NetworkX)",returns:"Returns GraphData"},toD3:{name:"toD3(graphData)",description:'Convert to D3.js format with "links" property',returns:"Returns D3GraphData"},toCytoscape:{name:"toCytoscape(graphData)",description:"Convert to Cytoscape.js format",returns:"Returns CytoscapeData"},loadFromURL:{name:"loadFromURL(url)",description:"Async method to fetch and parse JSON",returns:"Returns Promise<GraphData>"}}},networkx:{title:"NetworkXAdapter",description:"Python NetworkX interoperability. Supports node-link and adjacency formats.",methods:"Methods",methodsList:{fromNodeLink:{name:"fromNodeLink(nxData)",description:"Convert NetworkX node-link format (most common)",returns:"Returns GraphData"},fromAdjacency:{name:"fromAdjacency(nxData)",description:"Convert NetworkX adjacency format",returns:"Returns GraphData"},toNodeLink:{name:"toNodeLink(graphData, options)",description:"Convert to node-link format. Options: directed (default: false), multigraph (default: false)",returns:"Returns NetworkX node-link data"},toAdjacency:{name:"toAdjacency(graphData)",description:"Convert to adjacency format",returns:"Returns array of node objects with adjacency lists"}}}},layouts:{title:"Graph Layouts",description:"Position nodes in 2D space using various algorithms. All layouts use async computation in Web Workers for optimal performance.",note:"All layout methods are async and return Promise<Object> with node positions {nodeId: {x, y}}",forceDirected:{title:"ForceDirectedLayout",description:"Spring-electrical model using Fruchterman-Reingold algorithm. Good for general-purpose network visualization.",complexity:"Time Complexity: O(iterations  V)",bestFor:"Best for: General networks, social graphs",constructor:"new ForceDirectedLayout(graph, options)",options:{iterations:"Number of simulation steps (default: 50)",k:"Optimal distance between nodes (default: auto-calculated)",scale:"Scale factor for positions (default: 1)",center:"Center point {x, y} (default: {x:0, y:0})",initialPositions:"Starting positions (default: random)",threshold:"Convergence threshold (default: 1e-4)"}},kamadaKawai:{title:"KamadaKawaiLayout",description:"Energy minimization based on all-pairs shortest paths. Produces aesthetically pleasing layouts.",complexity:"Time Complexity: O(V + iterations  V)",bestFor:"Best for: Small-medium graphs (<1000 nodes), trees, planar graphs",constructor:"new KamadaKawaiLayout(graph, options)",options:{iterations:"Maximum iterations (default: 1000)",scale:"Scale factor (default: 1)",center:"Center point (default: {x:0, y:0})",initialPositions:"Starting positions (default: circular)",threshold:"Convergence threshold (default: 1e-4)",K:"Spring constant scaling (default: auto)"}},spectral:{title:"SpectralLayout",description:"Uses Laplacian eigenvectors as coordinates. Excellent for visualizing community structure.",complexity:"Time Complexity: O(V) using pre-computed eigenvectors",bestFor:"Best for: Community visualization, graph topology",requires:'Requires: "eigenvector-laplacian" statistic must be pre-computed',constructor:"new SpectralLayout(graph, options)",options:{scale:"Scale factor (default: 100)",center:"Center point (default: {x:0, y:0})"}},circular:{title:"CircularLayout",description:"Positions nodes in a circle. Simple and clean for small networks.",complexity:"Time Complexity: O(V)",bestFor:"Best for: Small networks, cycle graphs",constructor:"new CircularLayout(graph, options)",options:{scale:"Circle radius (default: 100)",center:"Center point (default: {x:0, y:0})",sortBy:"Optional sort function for node order"}},shell:{title:"ShellLayout",description:"Concentric circles based on node degree. High-degree nodes in center.",complexity:"Time Complexity: O(V)",bestFor:"Best for: Hub-and-spoke networks, star graphs",requires:'Requires: "degree" statistic must be pre-computed',constructor:"new ShellLayout(graph, options)"},spiral:{title:"SpiralLayout",description:"Archimedean spiral pattern. Aesthetically pleasing for ordered data.",complexity:"Time Complexity: O(V)",bestFor:"Best for: Sequential or temporal networks",constructor:"new SpiralLayout(graph, options)"},bfs:{title:"BFSLayout",description:"Breadth-first search layers. Shows distance from root node.",complexity:"Time Complexity: O(V + E)",bestFor:"Best for: Trees, hierarchies, showing propagation",constructor:"new BFSLayout(graph, options)"},bipartite:{title:"BipartiteLayout",description:"Two-layer layout for bipartite graphs.",complexity:"Time Complexity: O(V)",bestFor:"Best for: Two-mode networks, actor-event data",constructor:"new BipartiteLayout(graph, options)"},random:{title:"RandomLayout",description:"Random positions. Useful as starting point for other layouts.",complexity:"Time Complexity: O(V)",bestFor:"Best for: Initial positions, testing",constructor:"new RandomLayout(graph, options)"},usage:"Usage Pattern",usageDescription:"All layouts follow the same async pattern"},community:{title:"Community Detection",description:"Detect communities (clusters) in networks using various algorithms. All computation runs in Web Workers.",mainClass:{title:"CommunityDetection",description:"Main class for detecting communities in graphs",constructor:"new CommunityDetection(graph)",methods:{detectCommunities:{name:"detectCommunities(algorithm, options)",description:'Detect communities using specified algorithm. Algorithm can be instance or string ("louvain")',returns:"Returns Promise<CommunityResult> with communities, modularity, numCommunities"},calculateModularity:{name:"calculateModularity(communities)",description:"Calculate modularity score for a partition",returns:"Returns number (-1 to 1, higher is better)"}},staticMethods:{detect:{name:"CommunityDetection.detect(graphData, algorithm, options)",description:"Convenience method for direct detection from GraphData",returns:"Returns Promise<CommunityResult>"},getNodesInCommunity:{name:"CommunityDetection.getNodesInCommunity(communities, communityId)",description:"Get array of node IDs in a specific community"},getCommunityGroups:{name:"CommunityDetection.getCommunityGroups(communities)",description:"Get object mapping communityId to array of node IDs"}}},louvain:{title:"LouvainAlgorithm",description:"Fast modularity optimization using the Louvain method. The most popular community detection algorithm.",complexity:"Time Complexity: O(V log V)",bestFor:"Best for: Large networks, general-purpose community detection",constructor:"new LouvainAlgorithm(options)",options:{resolution:"Resolution parameter for modularity (default: 1.0). Higher values find smaller communities.",maxIterations:"Maximum iterations (default: 100)"}},result:{title:"CommunityResult",description:"Result object returned by community detection",properties:{communities:"Object mapping nodeId to communityId (number)",modularity:"Modularity score (-1 to 1, typically 0.3-0.7 for good partitions)",numCommunities:"Number of communities found",algorithm:"Algorithm name used",metadata:"Optional additional information"}},customAlgorithm:{title:"Custom Algorithms",description:"Extend CommunityAlgorithm base class to create your own algorithms",note:"Implement the detect() method and configure worker module path"}},examples:{title:"Usage Examples",description:"Complete code examples for common use cases",basic:{title:"Basic Network Analysis",description:"Analyze a simple network and compute centrality metrics"},csv:{title:"Loading CSV Data",description:"Import network data from CSV files and analyze"},json:{title:"Working with JSON",description:"Convert between JSON formats (D3, Cytoscape, NetworkX)"},layout:{title:"Applying Layouts",description:"Position nodes using layout algorithms"},community:{title:"Community Detection",description:"Find communities using Louvain algorithm"},complete:{title:"Complete Workflow",description:"End-to-end example: load data, analyze, layout, detect communities"}}},showcase:{title:"Features Showcase",description:"Explore all the features of @guinetik/graph-js",header:{title:" Interactive Network Graph",subtitle:"Explore network analysis in real-time. Add nodes, remove them, and watch the graph update dynamically."},whatIs:{title:"What is this?",description:"This interactive visualization demonstrates <strong>network analysis</strong>. Node size represents centrality: larger nodes are more influential in the network."},status:{title:"Status",ready:"Ready for operations",hover:"Hover over nodes to see details"},controls:{title:"Controls",addRandom:"Add a random node connected to a random existing node",addToSelected:"Add a node connected to {name}",selectNodeFirst:"Select a node first",removeRandom:"Remove a random node"},dataLoading:{title:"Load Dataset",choose:"Choose Dataset:",default:"Default Inline (15 nodes)",karate:"Karate Club JSON (34 nodes)",miserables:"Les Misrables CSV (77 nodes)",kevinbacon:"Kevin Bacon CSV (128 nodes)",loadButton:" Load Dataset",loading:" Loading..."},networkAnalysis:{title:" Network Analysis (Node Sizes)",description:"<strong>Uses @guinetik/graph-js:</strong> Computes centrality metrics in web workers for optimal performance.",metricsTitle:"Metrics to Calculate:",selectAll:"Select All",unselectAll:"Unselect All",degreeCentrality:"Degree Centrality",degreeDescription:"Counts the number of direct connections to a node. The simplest centrality measure - identifies hubs and highly connected nodes.",betweennessCentrality:"Betweenness Centrality",betweennessDescription:"Measures how often a node appears on shortest paths between other nodes. Identifies bridge nodes and information bottlenecks.",clusteringCoefficient:"Clustering Coefficient",clusteringDescription:"Measures how connected a node's neighbors are to each other. Detects tightly-knit groups and local community structure.",eigenvectorCentrality:"Eigenvector Centrality",eigenvectorDescription:"Measures node importance based on the importance of its neighbors. Identifies influential nodes connected to other influential nodes.",pageRankCentrality:"PageRank Centrality",pagerankDescription:"Similar to eigenvector centrality, measures node importance based on connections. Popularized by Google's PageRank algorithm.",cliqueCount:"Clique Count",cliquesDescription:"Counts how many maximal cliques (complete subgraphs) a node belongs to. Identifies nodes in dense, tightly-knit communities. Warning: computationally expensive.",closenessCentrality:"Closeness Centrality",closenessDescription:"Measures how close a node is to all other nodes based on average shortest path length. Identifies nodes that can quickly reach the entire network.",egoDensity:"Ego Density",egoDensityDescription:"Measures the density of connections among a node's immediate neighbors. Quantifies local cohesion around a node.",eigenvectorLaplacian:"Eigenvector (Laplacian) - for Spectral layout",eigenvectorLaplacianDescription:"Laplacian eigenvector centrality used for spectral graph analysis. Useful for spectral layout algorithms.",nodeSizeLabel:"Node Size Based On:",selectMetric:"-- Select a metric --",analyzeButton:" Analyze Network",analyzingButton:" Analyzing...",degreeName:"Degree",betweennessName:"Betweenness",clusteringName:"Clustering",eigenvectorName:"Eigenvector",pageRankName:"PageRank",cliquesName:"Cliques",closenessName:"Closeness",egoDensityName:"Ego Density",highlightCliqueEdges:" Highlight Clique Edges",cliqueEdgesDescription:"Color edges that are part of triangles/cliques"},layoutAlgorithm:{title:"Layout Algorithm"},communityDetection:{title:" Community Detection",communitiesFound:"Communities Found:",modularity:"Modularity:",nodeColorsAssignments:"Node colors represent community assignments"},instructions:{title:" How to interact",dragNodes:" <strong>Drag nodes</strong> to reposition them",scroll:" <strong>Scroll</strong> to zoom in/out",dragBackground:" <strong>Drag background</strong> to pan",hoverNodes:" <strong>Hover nodes</strong> to see detailed information",nodeSize:" <strong>Node size</strong> = centrality",color:" <strong>Color</strong> = group/community"},buttons:{add:"Add",toSelected:"To Selected",remove:"Remove"},messages:{loadingGraph:"Loading graph...",loadingDataset:"Loading {dataset} dataset...",loadingDatasetName:"Loading {name} dataset...",analyzing:"Analyzing network using workers...",applyingLayout:"Applying {layout} layout...",detectingCommunities:"Detecting communities using {algorithm}...",loadedDataset:" Loaded {name} dataset ({nodes} nodes, {edges} edges)",failedToLoadDataset:" Failed to load dataset: {error}",addedNode:' Added node "{nodeId}" connected to "{connectedTo}"',noNodeSelected:" No node selected. Click on a node to select it first.",noNodesToRemove:" No nodes to remove",removedNode:' Removed node "{nodeId}"',analysisComplete:" Analysis complete! Computed {count} node metrics using web workers",analysisFailed:" Analysis failed: {error}",usingD3Physics:" Using D3 physics simulation (no layout algorithm)",appliedLayout:" Applied {layout} layout algorithm",layoutFailed:" Layout failed: {error}",foundCommunities:"Found {count} communities (modularity: {modularity})",communityDetectionFailed:"Community detection failed",graphNotInitialized:"Graph not initialized",graphIsEmpty:"Graph is empty"},layoutPicker:{chooseLayout:"Choose Layout:",applyButton:" Apply Layout",applyingButton:" Applying..."},communityPicker:{chooseAlgorithm:"Choose Algorithm:",detectButton:" Detect Communities",detectingButton:" Detecting..."}},explorer:{title:"Network Explorer",description:"Interactive network analysis and visualization",header:{title:" Network Explorer",subtitle:"Explore sample networks and upload your own files. Supports CSV, JSON, and NetworkX formats."},renderer:{title:"Graph Renderer",d3:"D3.js (SVG)",sigma:"Sigma.js (WebGL)",d3Description:"SVG-based rendering. Best for small-medium graphs (<1000 nodes). Supports rich interactions.",sigmaDescription:"WebGL-based rendering. Optimized for large graphs (10k+ nodes). Hardware-accelerated."},parallelComputation:{title:" Parallel Computation Demo",description:"This demo showcases <strong>Web Workers</strong> for parallel network analysis. Large networks are processed across multiple CPU cores for faster computation.",workersSupported:" Workers Supported",workersNotSupported:" Workers Not Supported",cores:"cores"},status:{title:"Status",ready:"Ready for operations",loadNetwork:"Load a network to begin"},dataLoading:{title:"Data Loading",sampleNetworks:" Sample Networks",uploadFile:" Upload File",chooseNetwork:"Choose Network:",chooseCity:"-- Choose a network --",caruaru:"Caruaru (~130 edges, small)",rj:"Rio de Janeiro (~1,900 edges, medium)",niteroi:"Niteri (~18,500 edges, large)",karate:"Karate Club (34 nodes, 78 edges)",miserables:"Les Misrables (77 nodes, 254 edges)",kevinbacon:"Kevin Bacon (128 nodes, 128 edges)",sixdegrees:"6 Degrees of Kevin Bacon (3,610 nodes, 5,514 edges)",loadNetwork:" Load Network",loading:" Loading...",fileFormat:"File Format:",edgesCSV:"Edges CSV (Required):",nodesCSV:"Nodes CSV (Optional):",edgeCSVFormat:"<strong>Edge CSV format:</strong> source,target,weight<br><strong>Node CSV format:</strong> id,group,label,...",jsonFile:"JSON File:",networkxFile:"NetworkX JSON File:",jsonSupports:"Supports: Standard (nodes/edges), D3 (nodes/links), Cytoscape, or raw edge list array",networkxSupports:"Supports: node-link format, adjacency format",loadUploadedFile:" Load Uploaded File",formatJSON:"JSON (nodes/edges, D3, Cytoscape)",formatCSV:"CSV (edge list)",formatNetworkX:"NetworkX (node-link, adjacency)"},networkStats:{title:"Network Statistics",nodes:"Nodes",edges:"Edges",avgDegree:"Avg Degree",analysisTime:"Analysis Time",communities:"Communities",modularity:"Modularity",usingParallel:" Using parallel computation",workersActive:"workers active",singleThreaded:" Single-threaded mode",networkTooSmall:"Network too small for workers"},networkAnalysis:{title:" Network Analysis (Node Sizes)"},layoutAlgorithm:{title:" Layout Algorithm",requiresAnalysis:"requires analysis"},graphStats:{title:" Graph Statistics",density:"Density",diameter:"Diameter",avgClustering:"Avg Clustering",avgPathLength:"Avg Path Length",avgDegree:"Avg Degree",connectedComponents:"Components",calculated:"Calculated alongside node metrics"},communityDetection:{title:" Community Detection (Node Colors)",algorithm:"Algorithm:"},communityResults:{title:" Community Detection Results",communitiesFound:"Communities Found:",modularityScore:"Modularity Score:",computationTime:"Computation Time:",algorithm:"Algorithm:",nodeColorsRepresent:"Node colors represent their community assignments"},instructions:{title:" How to interact",dragNodes:" <strong>Drag nodes</strong> to reposition them",scroll:" <strong>Scroll</strong> to zoom in/out",dragBackground:" <strong>Drag background</strong> to pan",hoverNodes:" <strong>Hover nodes</strong> to see detailed information",nodeSize:" <strong>Node size</strong> = selected metric",color:" <strong>Color</strong> = community"},messages:{loadingNetworkData:"Loading network data...",loadedNetwork:" Loaded {name} ({nodes} nodes, {edges} edges)",failedToLoadNetwork:" Failed to load network: {error}",loadingUploadedFile:"Loading uploaded file...",loadedFile:" Loaded {fileName} ({nodes} nodes, {edges} edges)",failedToLoadFile:" Failed to load file: {error}",analyzingNetwork:"Analyzing network using workers...",analysisComplete:" Analysis complete! Computed {count} node metrics",analysisFailed:" Analysis failed: {error}",usingD3Physics:" Using D3 physics simulation (no layout algorithm)",applyingLayout:"Applying {layout} layout...",appliedLayout:" Applied {layout} layout algorithm",layoutFailed:" Layout failed: {error}",graphNotInitialized:"Graph not initialized",graphIsEmpty:"Graph is empty",detectingCommunities:"Detecting communities using {algorithm}...",foundCommunities:"Found {count} communities (modularity: {modularity})",communityDetectionFailed:"Community detection failed"}},family:{title:"Family Tree",subtitle:"Build and visualize your family tree interactively",description:"Visualize family relationships",header:{title:" Family Tree Builder",subtitle:"Build and visualize your family tree interactively. Start with yourself and add relatives to see the network grow."},whatIs:{title:"What is this?",description:"A network visualization of family relationships. Each color represents a different relationship type. The tree auto-saves to your browser's storage every 30 seconds."},status:{title:"Status",ready:"Ready for operations",clickToAdd:"Click buttons to add relatives"},addRelatives:{title:"Add Relatives",parents:" Parents",grandparents:" Grandparents",sibling:" Sibling",nieceNephew:" Niece/Nephew",uncleAunt:" Uncle/Aunt",cousin:" Cousin",partner:" Partner",child:" Child"},actions:{title:"Actions",saveFamily:" Save Family",saveImage:" Save as Image",lockGraph:" Lock Graph",unlockGraph:" Unlock Graph",undo:" Undo",redo:" Redo",resetTree:" Reset Tree"},renderNodes:{title:" Render Nodes",colors:" Colors",avatars:" Avatars",colorsDesc:"Nodes colored by relationship type.",avatarsDesc:"Nodes shown as emoji avatars (if set)."},networkAnalysis:{title:" Network Analysis (Node Sizes)"},relationshipColors:{title:"Relationship Colors",you:"You",parents:"Parents",siblings:"Siblings",unclesAunts:"Uncles/Aunts",cousins:"Cousins",grandparents:"Grandparents",nieces:"Nieces/Nephews",partners:"Partners/Spouses",children:"Children"},layoutAlgorithm:{title:" Layout Algorithm"},instructions:{title:" How to use",dragNodes:" <strong>Drag nodes</strong> to arrange your tree",autoSaves:" <strong>Auto-saves</strong> every 30 seconds",lock:" <strong>Lock</strong> to freeze positions",download:" <strong>Download</strong> as PNG image",analyze:" <strong>Analyze</strong> to size nodes by centrality metrics",layouts:" <strong>Apply layouts</strong> to visualize your tree differently",undoRedo:" <strong>Undo/Redo</strong> with buttons or Ctrl+Z / Ctrl+Y (up to 10 actions)"},dialogs:{selectOption:"Select an option",addParents:"Add Parents",addSibling:"Add Sibling",addGrandparents:"Add Grandparents",addUncleAunt:"Add Uncle/Aunt",addCousin:"Add Cousin",addChild:"Add Child",addNieceNephew:"Add Niece/Nephew",addPartner:"Add Partner/Spouse",fields:{motherName:"Mother Name",motherAvatar:"Mother Avatar (optional)",fatherName:"Father Name",fatherAvatar:"Father Avatar (optional)",siblingName:"Sibling Name",gender:"Gender",avatar:"Avatar (optional)",parentsSide:"Parent's Side",grandmotherName:"Grandmother Name",grandmotherAvatar:"Grandmother Avatar (optional)",grandfatherName:"Grandfather Name",grandfatherAvatar:"Grandfather Avatar (optional)",name:"Name",uncleAuntField:"Uncle/Aunt",sibling:"Sibling",parent:"Parent",partnerOf:"Partner Of"},genderOptions:{male:"Male",female:"Female",other:"Other"},placeholders:{mother:" Type an emoji",father:" Type an emoji",avatar:" Type an emoji",grandmother:" Type an emoji",grandfather:" Type an emoji"}},operations:{errors:{atLeastOneParent:"At least one parent name is required",onlyOneParentSlot:"Only one parent slot available. Added only the mother.",siblingNameRequired:"Sibling name is required",genderRequired:"Gender is required",graphNotInitialized:"Graph not initialized",failedToAddSibling:"Failed to add sibling",parentNotFound:"Parent not found",atLeastOneGrandparent:"At least one grandparent name is required",onlyOneGrandparentSlot:"Only one grandparent slot available for this parent. Added only the grandmother.",failedToAddGrandparents:"Failed to add grandparents",uncleAuntNameRequired:"Uncle/aunt name is required",failedToAddUncleAunt:"Failed to add uncle/aunt",cousinNameRequired:"Cousin name is required",failedToAddCousin:"Failed to add cousin",childNameRequired:"Child name is required",failedToAddChild:"Failed to add child",nieceNephewNameRequired:"Niece/nephew name is required",failedToAddNieceNephew:"Failed to add niece/nephew",partnerNameRequired:"Partner name is required",personNotFound:"Person not found",alreadyHasPartner:"already has a partner!"},success:{parentAdded:"Parent(s) added successfully",siblingAdded:"Sibling added successfully",grandparentsAdded:"Grandparent(s) added successfully",uncleAuntAdded:"Uncle/Aunt added successfully",cousinAdded:"Cousin added successfully",childAdded:"Child added successfully",nieceNephewAdded:"Niece/Nephew added successfully",partnerAdded:"Partner added successfully"},validation:{noParents:"You must add parents first before adding grandparents",noUnclesAunts:"You must add uncles/aunts first before adding cousins",noSiblings:"You must add siblings first before adding nieces/nephews",maxParents:"You already have 2 parents added. You cannot add more than 2 parents.",notEligibleForPartner:"No eligible people available for partners"}},storage:{saved:"Family tree saved!",loaded:"Family tree loaded",reset:"Family tree reset",error:"Error saving family tree"},history:{undone:"Action undone",redone:"Action redone",nothingToUndo:"Nothing to undo",nothingToRedo:"Nothing to redo"},relationships:{yourPartner:"Your Partner/Spouse",partnerOf:"'s Partner",yourChild:"Your child",siblingChild:"'s child (your niece/nephew)",cousinChild:"'s child (your cousin's child)",grandchild:"'s child (your grandchild)",siblingInLaw:"'s partner (your sibling-in-law)",childInLaw:"'s partner (your child-in-law)"},dropdownOptions:{yourChild:"Your child",childTemplate:"{name}'s child",nieceNephewTemplate:"{name}'s child (your niece/nephew)",cousinChildTemplate:"{name}'s child (your cousin's child)",grandchildTemplate:"{name}'s child (your grandchild)",partnerTemplate:"{name}'s partner",siblingPartnerTemplate:"{name}'s partner (your sibling-in-law)",childPartnerTemplate:"{name}'s partner (your child-in-law)",parentSideTemplate:"{name}'s sibling",uncleAuntChildTemplate:"{name}'s child",siblingChildTemplate:"{name}'s child"}},degrees:{header:{title:"6 Degrees of Kevin Bacon",subtitle:'Explore the famous "small world" network connecting Hollywood actors through their movie collaborations'},whatIs:{title:"What is this?",description:`The <strong>Six Degrees of Kevin Bacon</strong> is a parlor game based on the "six degrees of separation" concept. It posits that any actor can be linked to Kevin Bacon through their film roles in six steps or fewer. This visualization shows <strong>2 degrees of separation</strong> - Kevin Bacon's co-stars and their co-stars.`},status:{title:"Status",ready:"Network loaded and ready"},stats:{title:"Network Statistics",nodes:"Total Nodes",edges:"Total Edges",movies:"Movies",actors:"Actors"},legend:{title:"Legend",movies:"Movies",actors:"Actors",kevinBacon:"Kevin Bacon",center:"Center of the network (0 degrees)",degree1:"1 Degree",degree1Desc:"Direct co-stars of Kevin Bacon",degree2:"2 Degrees",degree2Desc:"Co-stars of Kevin Bacon's co-stars"},baconFinder:{title:"Find Bacon Number",placeholder:"Search actor or movie..."},filter:{title:"Filter Nodes",all:"All",actors:"Actors Only",movies:"Movies Only"},layout:{title:"Layout Algorithm"},analysis:{title:"Network Analysis"},instructions:{title:"How to use",hover:"<strong>Hover</strong> over nodes to see actor/movie details",drag:"<strong>Drag</strong> nodes to rearrange the network",zoom:"<strong>Scroll</strong> to zoom in/out"}}},pt:{nav:{home:"Incio",showcase:"Demonstrao",explorer:"Explorador de Redes",degrees:"Graus",family:"rvore Genealgica",docs:"Documentao"},common:{loading:"Carregando...",error:"Erro",success:"Sucesso",darkMode:"Alternar modo escuro",language:"Idioma"},footer:{madeBy:"Feito com",by:"por",license:"Licena MIT"},showcase:{title:"Demonstrao",description:"Explore todos os recursos de @guinetik/graph-js",header:{title:" Grafo de Rede Interativo",subtitle:"Explore anlise de redes em tempo real. Adicione ns, remova-os e veja o grafo se atualizar dinamicamente."},whatIs:{title:"O que  isto?",description:"Esta visualizao interativa demonstra <strong>anlise de redes</strong>. O tamanho do n representa centralidade: ns maiores so mais influentes na rede."},status:{title:"Status",ready:"Pronto para operaes",hover:"Passe o mouse sobre ns para ver detalhes"},controls:{title:"Controles",addRandom:"Adicionar um n aleatrio conectado a um n existente aleatrio",addToSelected:"Adicionar um n conectado a {name}",selectNodeFirst:"Selecione um n primeiro",removeRandom:"Remover um n aleatrio"},dataLoading:{title:"Carregar Conjunto de Dados",choose:"Escolha um Conjunto de Dados:",default:"Padro Embutido (15 ns)",karate:"Karate Club JSON (34 ns)",miserables:"Os Miserveis CSV (77 ns)",kevinbacon:"Kevin Bacon CSV (128 ns)",loadButton:" Carregar Conjunto de Dados",loading:" Carregando..."},networkAnalysis:{title:" Anlise de Rede (Tamanhos de N)",description:"<strong>Usa @guinetik/graph-js:</strong> Calcula mtricas de centralidade em web workers para desempenho ideal.",metricsTitle:"Mtricas para Calcular:",selectAll:"Selecionar Todas",unselectAll:"Desselecionar Todas",degreeCentrality:"Centralidade de Grau",degreeDescription:"Conta o nmero de conexes diretas de um n. A medida de centralidade mais simples - identifica hubs e ns altamente conectados.",betweennessCentrality:"Centralidade de Intermediao",betweennessDescription:"Mede com que frequncia um n aparece nos caminhos mais curtos entre outros ns. Identifica ns ponte e gargalos de informao.",clusteringCoefficient:"Coeficiente de Agrupamento",clusteringDescription:"Mede o quo conectados os vizinhos de um n esto entre si. Detecta grupos coesos e estrutura de comunidade local.",eigenvectorCentrality:"Centralidade de Eigenvector",eigenvectorDescription:"Mede a importncia de um n com base na importncia de seus vizinhos. Identifica ns influentes conectados a outros ns influentes.",pageRankCentrality:"Centralidade PageRank",pagerankDescription:"Similar  centralidade de eigenvector, mede a importncia do n com base em conexes. Popularizado pelo algoritmo PageRank do Google.",cliqueCount:"Contagem de Cliques",cliquesDescription:"Conta quantos cliques maximais (subgrafos completos) um n pertence. Identifica ns em comunidades densas e coesas. Aviso: computacionalmente caro.",closenessCentrality:"Centralidade de Proximidade",closenessDescription:"Mede o quo prximo um n est de todos os outros ns com base no comprimento mdio do caminho mais curto. Identifica ns que podem alcanar rapidamente toda a rede.",egoDensity:"Densidade Ego",egoDensityDescription:"Mede a densidade de conexes entre os vizinhos imediatos de um n. Quantifica a coeso local ao redor de um n.",eigenvectorLaplacian:"Eigenvector (Laplaciano) - para layout Espectral",eigenvectorLaplacianDescription:"Centralidade de eigenvector Laplaciano usada para anlise espectral de grafos. til para algoritmos de layout espectral.",nodeSizeLabel:"Tamanho do N Baseado Em:",selectMetric:"-- Selecione uma mtrica --",analyzeButton:" Analisar Rede",analyzingButton:" Analisando...",degreeName:"Grau",betweennessName:"Intermediao",clusteringName:"Agrupamento",eigenvectorName:"Eigenvector",pageRankName:"PageRank",cliquesName:"Cliques",closenessName:"Proximidade",egoDensityName:"Densidade Ego",highlightCliqueEdges:" Destacar Arestas de Cliques",cliqueEdgesDescription:"Colorir arestas que fazem parte de tringulos/cliques"},layoutAlgorithm:{title:"Algoritmo de Layout"},communityDetection:{title:" Deteco de Comunidades",communitiesFound:"Comunidades Encontradas:",modularity:"Modularidade:",nodeColorsAssignments:"As cores dos ns representam as atribuies de comunidades"},instructions:{title:" Como interagir",dragNodes:" <strong>Arraste ns</strong> para reposicion-los",scroll:" <strong>Role</strong> para ampliar/reduzir",dragBackground:" <strong>Arraste o fundo</strong> para mover",hoverNodes:" <strong>Passe o mouse sobre ns</strong> para ver informaes detalhadas",nodeSize:" <strong>Tamanho do n</strong> = centralidade",color:" <strong>Cor</strong> = grupo/comunidade"},buttons:{add:"Adicionar",toSelected:"Para Selecionado",remove:"Remover"},messages:{loadingGraph:"Carregando grafo...",loadingDataset:"Carregando conjunto de dados {dataset}...",loadingDatasetName:"Carregando conjunto de dados {name}...",analyzing:"Analisando rede usando workers...",applyingLayout:"Aplicando layout {layout}...",detectingCommunities:"Detectando comunidades usando {algorithm}...",loadedDataset:" Conjunto de dados {name} carregado ({nodes} ns, {edges} arestas)",failedToLoadDataset:" Falha ao carregar conjunto de dados: {error}",addedNode:' N "{nodeId}" adicionado conectado a "{connectedTo}"',noNodeSelected:" Nenhum n selecionado. Clique em um n para selecion-lo primeiro.",noNodesToRemove:" Nenhum n para remover",removedNode:' N "{nodeId}" removido',analysisComplete:" Anlise completa! Computadas {count} mtricas de ns usando web workers",analysisFailed:" Anlise falhou: {error}",usingD3Physics:" Usando simulao de fsica D3 (sem algoritmo de layout)",appliedLayout:" Layout {layout} aplicado",layoutFailed:" Layout falhou: {error}",foundCommunities:"Encontradas {count} comunidades (modularidade: {modularity})",communityDetectionFailed:"Deteco de comunidades falhou",graphNotInitialized:"Grafo no inicializado",graphIsEmpty:"Grafo est vazio"},layoutPicker:{chooseLayout:"Escolha o Layout:",applyButton:" Aplicar Layout",applyingButton:" Aplicando..."},communityPicker:{chooseAlgorithm:"Escolha o Algoritmo:",detectButton:" Detectar Comunidades",detectingButton:" Detectando..."}},home:{hero:{title:"Anlise de Redes Moderna para JavaScript",subtitle:"Teoria de grafos e anlise de redes poderosa com arquitetura worker-first",description:"Analise redes sociais, rvores genealgicas e grafos complexos com facilidade. Computao paralela rpida, mtricas abrangentes e visualizaes bonitas - tudo em JavaScript puro.",cta:"Comear",github:"Ver no GitHub"},features:[{icon:"",title:"Anlise de Redes",description:"Calcule mtricas de centralidade, coeficientes de agrupamento e estatsticas de grafo com ferramentas de anlise abrangentes"},{icon:"",title:"Explorador Interativo",description:"Explore redes com arrastar e soltar, zoom, pan e anlise em tempo real de ns e comunidades"},{icon:"",title:"Mltiplos Layouts",description:"11 algoritmos de layout incluindo force-directed, Kamada-Kawai, spectral e layouts hierrquicos"},{icon:"",title:"Performance com Workers",description:"UI no bloqueante com web workers para computao paralela em grafos grandes com milhares de ns"},{icon:"",title:"Deteco de Comunidades",description:"Encontre clusters e grupos em redes usando algoritmo Louvain com otimizao de modularidade"},{icon:"",title:"Mtricas Ricas",description:"Grau, intermediao, eigenvector, agrupamento, proximidade e mais recursos estatsticos"}],code:{title:"Exemplo de Incio Rpido",snippet:`npm install @guinetik/graph-js

import NetworkStats from '@guinetik/graph-js';

const network = [
  { source: 'Alice', target: 'Bob', weight: 1 },
  { source: 'Bob', target: 'Carol', weight: 2 },
  { source: 'Carol', target: 'Alice', weight: 1 }
];

const analyzer = new NetworkStats({ verbose: true });
const results = await analyzer.analyze(network, ['degree', 'eigenvector']);

console.log(results);
// Anlise executada em workers para desempenho ideal!`}},docs:{title:"Documentao",subtitle:"Referncia completa da API para @guinetik/graph-js",sections:{quickStart:"Incio Rpido",coreClasses:"Classes Principais",workers:"Arquitetura de Workers",adapters:"Adaptadores de Dados",layouts:"Layouts de Grafos",community:"Deteco de Comunidades",examples:"Exemplos de Uso"},quickStart:{title:"Incio Rpido",install:"Instalao",installCmd:"npm install @guinetik/graph-js",basicUsage:"Uso Bsico",description:"Comece com anlise de redes em apenas algumas linhas de cdigo."},graph:{title:"Graph",description:"Estrutura de dados de grafo principal usando mapas de adjacncia.",methods:"Mtodos",methodsList:{addNode:{name:"addNode(nodeId)",description:"Adicionar um n ao grafo"},addNodesFrom:{name:"addNodesFrom(nodeIds)",description:"Adicionar mltiplos ns de um array"},addEdge:{name:"addEdge(source, target, weight?)",description:"Adicionar uma aresta entre dois ns"},removeNode:{name:"removeNode(nodeId)",description:"Remover um n e todas as suas arestas"},getNeighbors:{name:"getNeighbors(nodeId)",description:"Obter array de IDs de ns vizinhos"},hasEdge:{name:"hasEdge(source, target)",description:"Verificar se aresta existe"},numberOfNodes:{name:"numberOfNodes()",description:"Obter nmero total de ns"}}},networkStats:{title:"NetworkStats",description:"Classe principal para analisar redes e calcular mtricas estatsticas. Toda computao acontece em web workers para desempenho ideal.",constructor:"Construtor",constructorParams:{verbose:"Ativar logging detalhado (padro: true)",maxWorkers:"Nmero mximo de workers (padro: detecta ncleos da CPU automaticamente)",taskTimeout:"Timeout de tarefa em milissegundos (padro: 60000)",workerScript:"Caminho personalizado do script worker para bundlers como Vite"},analyze:{title:"Mtodo analyze()",description:"Computar estatsticas de rede para todos os ns"},features:{title:"Recursos Disponveis",degree:"Nmero de conexes por n",eigenvector:"Influncia baseada na qualidade das conexes (como PageRank)",eigenvectorLaplacian:"Centralidade eigenvector Laplaciano (para layouts espectrais)",betweenness:"Importncia de ponte entre grupos",clustering:"Quo densamente conectados esto os vizinhos",closeness:"Distncia mdia para todos os outros ns na rede",cliques:"Nmero de subgrafos completos contendo o n",egoDensity:"Densidade da vizinhana imediata do n",modularity:"Atribuio de comunidade (algoritmo Louvain)"}},workers:{title:"Arquitetura de Workers",description:"Todo o processamento roda em Web Workers para UI no-bloqueante e performance otimizada. O sistema inclui roteamento inteligente de afinidade para otimizao JIT, inspirado pelo BeeThreads.",components:{title:"Componentes",workerManager:{name:"WorkerManager",description:"Gerenciador singleton que inicializa e roteia tarefas para workers"},workerPool:{name:"WorkerPool",description:"Pool de workers que executam tarefas com balanceamento automtico de carga"},workerAdapter:{name:"WorkerAdapter",description:"Adaptador cross-platform para Web Workers (browser) e Worker Threads (Node.js)"}},affinity:{title:"Sistema de Afinidade de Workers",description:"Roteia chamadas repetidas do mesmo algoritmo para o mesmo worker, aproveitando compilao JIT do JavaScript para operaes 10-30% mais rpidas.",howItWorks:"Como Funciona",howItWorksSteps:["Quando um worker executa um algoritmo, a funo  compilada JIT","O worker rastreia quais funes ele tem em cache","Chamadas futuras do mesmo algoritmo so roteadas para esse worker",'O caminho de cdigo otimizado JIT "quente"  reutilizado'],selectionTitle:"Prioridade de Seleo",selectionSteps:["Match de Afinidade: Encontrar worker que j executou o mesmo algoritmo","Menos Carregado: Selecionar worker com menos tarefas executadas","Fallback FIFO: Se afinidade desabilitada, usar primeiro disponvel"]},config:{title:"Configurao",options:{maxWorkers:"Mximo de workers (padro: auto-detectar ncleos CPU)",enableAffinity:"Habilitar roteamento de afinidade (padro: true)",affinityCacheLimit:"Mximo de funes em cache por worker (padro: 50)",taskTimeout:"Timeout de tarefa em milissegundos (padro: 300000)"}},monitoring:{title:"Monitoramento",description:"Obtenha estatsticas em tempo real sobre pool de workers e performance de afinidade"}},adapters:{title:"Adaptadores de Dados",description:"Converter entre vrios formatos de grafo e o formato padro GraphData. Todos os adaptadores usam mtodos estticos.",csv:{title:"CSVAdapter",description:"Carregar e converter arquivos CSV para formato de grafo. Suporta listas de arestas e arquivos de propriedades de ns.",methods:"Mtodos",methodsList:{fromEdgeList:{name:"fromEdgeList(csvText, options)",description:'Analisar lista de arestas CSV. Opes: header (padro: true), delimiter (padro: ","), weighted (padro: true)',returns:"Retorna GraphData com ns e arestas"},fromNodes:{name:"fromNodes(csvText, options)",description:"Analisar propriedades de ns CSV",returns:"Retorna array de objetos NodeData"},loadFromURL:{name:"loadFromURL(edgeURL, nodeURL, options)",description:"Mtodo assncrono para buscar e analisar CSV de URLs",returns:"Retorna Promise<GraphData>"},toEdgeList:{name:"toEdgeList(graphData, options)",description:"Exportar arestas para string CSV",returns:"Retorna string CSV"},toNodes:{name:"toNodes(graphData, options)",description:"Exportar ns para string CSV",returns:"Retorna string CSV"}}},json:{title:"JSONAdapter",description:"Suporte para D3.js, Cytoscape e outros formatos JSON. Detecta formato automaticamente.",methods:"Mtodos",methodsList:{fromD3:{name:"fromD3(d3Data)",description:'Converter formato D3.js force-directed (com "links") para GraphData',returns:"Retorna GraphData"},fromCytoscape:{name:"fromCytoscape(cytoData)",description:"Converter formato Cytoscape.js para GraphData",returns:"Retorna GraphData"},fromFormat:{name:"fromFormat(jsonData)",description:"Detectar formato automaticamente (GraphData, D3, Cytoscape, NetworkX)",returns:"Retorna GraphData"},toD3:{name:"toD3(graphData)",description:'Converter para formato D3.js com propriedade "links"',returns:"Retorna D3GraphData"},toCytoscape:{name:"toCytoscape(graphData)",description:"Converter para formato Cytoscape.js",returns:"Retorna CytoscapeData"},loadFromURL:{name:"loadFromURL(url)",description:"Mtodo assncrono para buscar e analisar JSON",returns:"Retorna Promise<GraphData>"}}},networkx:{title:"NetworkXAdapter",description:"Interoperabilidade com Python NetworkX. Suporta formatos node-link e adjacncia.",methods:"Mtodos",methodsList:{fromNodeLink:{name:"fromNodeLink(nxData)",description:"Converter formato NetworkX node-link (mais comum)",returns:"Retorna GraphData"},fromAdjacency:{name:"fromAdjacency(nxData)",description:"Converter formato de adjacncia NetworkX",returns:"Retorna GraphData"},toNodeLink:{name:"toNodeLink(graphData, options)",description:"Converter para formato node-link. Opes: directed (padro: false), multigraph (padro: false)",returns:"Retorna dados node-link NetworkX"},toAdjacency:{name:"toAdjacency(graphData)",description:"Converter para formato de adjacncia",returns:"Retorna array de objetos de ns com listas de adjacncia"}}}},layouts:{title:"Layouts de Grafos",description:"Posicionar ns no espao 2D usando vrios algoritmos. Todos os layouts usam computao assncrona em Web Workers para desempenho ideal.",note:"Todos os mtodos de layout so assncronos e retornam Promise<Object> com posies de ns {nodeId: {x, y}}",forceDirected:{title:"ForceDirectedLayout",description:"Modelo spring-eltrico usando algoritmo Fruchterman-Reingold. Bom para visualizao geral de redes.",complexity:"Complexidade de Tempo: O(iterations  V)",bestFor:"Melhor para: Redes gerais, grafos sociais",constructor:"new ForceDirectedLayout(graph, options)",options:{iterations:"Nmero de passos de simulao (padro: 50)",k:"Distncia tima entre ns (padro: auto-calculado)",scale:"Fator de escala para posies (padro: 1)",center:"Ponto central {x, y} (padro: {x:0, y:0})",initialPositions:"Posies iniciais (padro: aleatrio)",threshold:"Limiar de convergncia (padro: 1e-4)"}},kamadaKawai:{title:"KamadaKawaiLayout",description:"Minimizao de energia baseada em caminhos mais curtos. Produz layouts esteticamente agradveis.",complexity:"Complexidade de Tempo: O(V + iterations  V)",bestFor:"Melhor para: Grafos pequenos-mdios (<1000 ns), rvores, grafos planares",constructor:"new KamadaKawaiLayout(graph, options)",options:{iterations:"Mximo de iteraes (padro: 1000)",scale:"Fator de escala (padro: 1)",center:"Ponto central (padro: {x:0, y:0})",initialPositions:"Posies iniciais (padro: circular)",threshold:"Limiar de convergncia (padro: 1e-4)",K:"Escala de constante de mola (padro: auto)"}},spectral:{title:"SpectralLayout",description:"Usa autovetores Laplacianos como coordenadas. Excelente para visualizar estrutura de comunidades.",complexity:"Complexidade de Tempo: O(V) usando autovetores pr-computados",bestFor:"Melhor para: Visualizao de comunidades, topologia de grafo",requires:'Requer: estatstica "eigenvector-laplacian" deve ser pr-computada',constructor:"new SpectralLayout(graph, options)",options:{scale:"Fator de escala (padro: 100)",center:"Ponto central (padro: {x:0, y:0})"}},circular:{title:"CircularLayout",description:"Posiciona ns em crculo. Simples e limpo para redes pequenas.",complexity:"Complexidade de Tempo: O(V)",bestFor:"Melhor para: Redes pequenas, grafos cclicos",constructor:"new CircularLayout(graph, options)",options:{scale:"Raio do crculo (padro: 100)",center:"Ponto central (padro: {x:0, y:0})",sortBy:"Funo de ordenao opcional para ordem dos ns"}},shell:{title:"ShellLayout",description:"Crculos concntricos baseados no grau do n. Ns de alto grau no centro.",complexity:"Complexidade de Tempo: O(V)",bestFor:"Melhor para: Redes hub-and-spoke, grafos estrela",requires:'Requer: estatstica "degree" deve ser pr-computada',constructor:"new ShellLayout(graph, options)"},spiral:{title:"SpiralLayout",description:"Padro de espiral arquimediana. Esteticamente agradvel para dados ordenados.",complexity:"Complexidade de Tempo: O(V)",bestFor:"Melhor para: Redes sequenciais ou temporais",constructor:"new SpiralLayout(graph, options)"},bfs:{title:"BFSLayout",description:"Camadas de busca em largura. Mostra distncia do n raiz.",complexity:"Complexidade de Tempo: O(V + E)",bestFor:"Melhor para: rvores, hierarquias, mostrando propagao",constructor:"new BFSLayout(graph, options)"},bipartite:{title:"BipartiteLayout",description:"Layout de duas camadas para grafos bipartidos.",complexity:"Complexidade de Tempo: O(V)",bestFor:"Melhor para: Redes de dois modos, dados ator-evento",constructor:"new BipartiteLayout(graph, options)"},random:{title:"RandomLayout",description:"Posies aleatrias. til como ponto de partida para outros layouts.",complexity:"Complexidade de Tempo: O(V)",bestFor:"Melhor para: Posies iniciais, testes",constructor:"new RandomLayout(graph, options)"},usage:"Padro de Uso",usageDescription:"Todos os layouts seguem o mesmo padro assncrono"},community:{title:"Deteco de Comunidades",description:"Detectar comunidades (clusters) em redes usando vrios algoritmos. Toda computao  executada em Web Workers.",mainClass:{title:"CommunityDetection",description:"Classe principal para detectar comunidades em grafos",constructor:"new CommunityDetection(graph)",methods:{detectCommunities:{name:"detectCommunities(algorithm, options)",description:'Detectar comunidades usando algoritmo especificado. Algoritmo pode ser instncia ou string ("louvain")',returns:"Retorna Promise<CommunityResult> com communities, modularity, numCommunities"},calculateModularity:{name:"calculateModularity(communities)",description:"Calcular pontuao de modularidade para uma partio",returns:"Retorna number (-1 a 1, maior  melhor)"}},staticMethods:{detect:{name:"CommunityDetection.detect(graphData, algorithm, options)",description:"Mtodo de convenincia para deteco direta de GraphData",returns:"Retorna Promise<CommunityResult>"},getNodesInCommunity:{name:"CommunityDetection.getNodesInCommunity(communities, communityId)",description:"Obter array de IDs de ns em uma comunidade especfica"},getCommunityGroups:{name:"CommunityDetection.getCommunityGroups(communities)",description:"Obter objeto mapeando communityId para array de IDs de ns"}}},louvain:{title:"LouvainAlgorithm",description:"Otimizao rpida de modularidade usando o mtodo Louvain. O algoritmo de deteco de comunidades mais popular.",complexity:"Complexidade de Tempo: O(V log V)",bestFor:"Melhor para: Redes grandes, deteco de comunidades de uso geral",constructor:"new LouvainAlgorithm(options)",options:{resolution:"Parmetro de resoluo para modularidade (padro: 1.0). Valores maiores encontram comunidades menores.",maxIterations:"Mximo de iteraes (padro: 100)"}},result:{title:"CommunityResult",description:"Objeto de resultado retornado pela deteco de comunidades",properties:{communities:"Objeto mapeando nodeId para communityId (nmero)",modularity:"Pontuao de modularidade (-1 a 1, tipicamente 0.3-0.7 para boas parties)",numCommunities:"Nmero de comunidades encontradas",algorithm:"Nome do algoritmo usado",metadata:"Informaes adicionais opcionais"}},customAlgorithm:{title:"Algoritmos Personalizados",description:"Estender classe base CommunityAlgorithm para criar seus prprios algoritmos",note:"Implementar o mtodo detect() e configurar caminho do mdulo worker"}},examples:{title:"Exemplos de Uso",description:"Exemplos de cdigo completos para casos de uso comuns",basic:{title:"Anlise Bsica de Redes",description:"Analisar uma rede simples e computar mtricas de centralidade"},csv:{title:"Carregando Dados CSV",description:"Importar dados de rede de arquivos CSV e analisar"},json:{title:"Trabalhando com JSON",description:"Converter entre formatos JSON (D3, Cytoscape, NetworkX)"},layout:{title:"Aplicando Layouts",description:"Posicionar ns usando algoritmos de layout"},community:{title:"Deteco de Comunidades",description:"Encontrar comunidades usando algoritmo Louvain"},complete:{title:"Fluxo Completo",description:"Exemplo ponta a ponta: carregar dados, analisar, aplicar layout, detectar comunidades"}}},explorer:{title:"Explorador de Redes",description:"Anlise e visualizao interativa de redes",header:{title:" Explorador de Redes",subtitle:"Explore redes de exemplo e carregue seus prprios arquivos. Suporta formatos CSV, JSON e NetworkX."},renderer:{title:"Renderizador de Grafo",d3:"D3.js (SVG)",sigma:"Sigma.js (WebGL)",d3Description:"Renderizao baseada em SVG. Melhor para grafos pequenos-mdios (<1000 ns). Suporta interaes ricas.",sigmaDescription:"Renderizao baseada em WebGL. Otimizado para grafos grandes (10k+ ns). Acelerao por hardware."},parallelComputation:{title:" Demonstrao de Computao Paralela",description:"Esta demonstrao apresenta <strong>Web Workers</strong> para anlise de redes paralela. Redes grandes so processadas em mltiplos ncleos de CPU para computao mais rpida.",workersSupported:" Workers Suportados",workersNotSupported:" Workers No Suportados",cores:"ncleos"},status:{title:"Status",ready:"Pronto para operaes",loadNetwork:"Carregue uma rede para comear"},dataLoading:{title:"Carregamento de Dados",sampleNetworks:" Redes de Exemplo",uploadFile:" Carregar Arquivo",chooseNetwork:"Escolha uma Rede:",chooseCity:"-- Escolha uma rede --",caruaru:"Caruaru (~130 arestas, pequena)",rj:"Rio de Janeiro (~1.900 arestas, mdia)",niteroi:"Niteri (~18.500 arestas, grande)",karate:"Karate Club (34 ns, 78 arestas)",miserables:"Les Misrables (77 ns, 254 arestas)",kevinbacon:"Kevin Bacon (128 ns, 128 arestas)",sixdegrees:"6 Graus de Kevin Bacon (3.610 ns, 5.514 arestas)",loadNetwork:" Carregar Rede",loading:" Carregando...",fileFormat:"Formato do Arquivo:",edgesCSV:"CSV de Arestas (Obrigatrio):",nodesCSV:"CSV de Ns (Opcional):",edgeCSVFormat:"<strong>Formato CSV de arestas:</strong> source,target,weight<br><strong>Formato CSV de ns:</strong> id,group,label,...",jsonFile:"Arquivo JSON:",networkxFile:"Arquivo JSON NetworkX:",jsonSupports:"Suporta: Padro (nodes/edges), D3 (nodes/links), Cytoscape, ou array de lista de arestas",networkxSupports:"Suporta: formato node-link, formato adjacency",loadUploadedFile:" Carregar Arquivo Enviado",formatJSON:"JSON (nodes/edges, D3, Cytoscape)",formatCSV:"CSV (lista de arestas)",formatNetworkX:"NetworkX (node-link, adjacency)"},networkStats:{title:"Estatsticas da Rede",nodes:"Ns",edges:"Arestas",avgDegree:"Grau Mdio",analysisTime:"Tempo de Anlise",communities:"Comunidades",modularity:"Modularidade",usingParallel:" Usando computao paralela",workersActive:"workers ativos",singleThreaded:" Modo single-thread",networkTooSmall:"Rede muito pequena para workers"},networkAnalysis:{title:" Anlise de Rede (Tamanhos de N)"},layoutAlgorithm:{title:" Algoritmo de Layout",requiresAnalysis:"requer anlise"},graphStats:{title:" Estatsticas do Grafo",density:"Densidade",diameter:"Dimetro",avgClustering:"Agrupamento Mdio",avgPathLength:"Comprimento Mdio do Caminho",avgDegree:"Grau Mdio",connectedComponents:"Componentes",calculated:"Calculado junto com mtricas de ns"},communityDetection:{title:" Deteco de Comunidades (Cores dos Ns)",algorithm:"Algoritmo:"},communityResults:{title:" Resultados da Deteco de Comunidades",communitiesFound:"Comunidades Encontradas:",modularityScore:"Pontuao de Modularidade:",computationTime:"Tempo de Computao:",algorithm:"Algoritmo:",nodeColorsRepresent:"As cores dos ns representam as atribuies de comunidades"},instructions:{title:" Como interagir",dragNodes:" <strong>Arraste ns</strong> para reposicion-los",scroll:" <strong>Role</strong> para ampliar/reduzir",dragBackground:" <strong>Arraste o fundo</strong> para mover",hoverNodes:" <strong>Passe o mouse sobre ns</strong> para ver informaes detalhadas",nodeSize:" <strong>Tamanho do n</strong> = mtrica selecionada",color:" <strong>Cor</strong> = comunidade"},messages:{loadingNetworkData:"Carregando dados da rede...",loadedNetwork:" {name} carregada ({nodes} ns, {edges} arestas)",failedToLoadNetwork:" Falha ao carregar rede: {error}",loadingUploadedFile:"Carregando arquivo enviado...",loadedFile:" {fileName} carregado ({nodes} ns, {edges} arestas)",failedToLoadFile:" Falha ao carregar arquivo: {error}",analyzingNetwork:"Analisando rede usando workers...",analysisComplete:" Anlise completa! Computadas {count} mtricas de ns",analysisFailed:" Anlise falhou: {error}",usingD3Physics:" Usando simulao de fsica D3 (sem algoritmo de layout)",applyingLayout:"Aplicando layout {layout}...",appliedLayout:" Layout {layout} aplicado",layoutFailed:" Layout falhou: {error}",graphNotInitialized:"Grafo no inicializado",graphIsEmpty:"Grafo est vazio",detectingCommunities:"Detectando comunidades usando {algorithm}...",foundCommunities:"Encontradas {count} comunidades (modularidade: {modularity})",communityDetectionFailed:"Deteco de comunidades falhou"}},family:{title:"rvore Genealgica",subtitle:"Construa e visualize sua rvore genealgica interativamente",description:"Visualize relaes familiares",header:{title:" Construtor de rvore Genealgica",subtitle:"Construa e visualize sua rvore genealgica interativamente. Comece com voc mesmo e adicione parentes para ver a rede crescer."},whatIs:{title:"O que  isso?",description:"Uma visualizao de rede de relaes familiares. Cada cor representa um tipo de relao diferente. A rvore  salva automaticamente no armazenamento do seu navegador a cada 30 segundos."},status:{title:"Status",ready:"Pronto para operaes",clickToAdd:"Clique nos botes para adicionar parentes"},addRelatives:{title:"Adicionar Parentes",parents:" Pais",grandparents:" Avs",sibling:" Irm/Irmo",nieceNephew:" Sobrinha/Sobrinho",uncleAunt:" Tio/Tia",cousin:" Primo/Prima",partner:" Parceiro/Parceira",child:" Filho/Filha"},actions:{title:"Aes",saveFamily:" Salvar Famlia",saveImage:" Salvar como Imagem",lockGraph:" Bloquear Grafo",unlockGraph:" Desbloquear Grafo",undo:" Desfazer",redo:" Refazer",resetTree:" Redefinir rvore"},renderNodes:{title:" Renderizar Ns",colors:" Cores",avatars:" Avatares",colorsDesc:"Ns coloridos por tipo de relao.",avatarsDesc:"Ns mostrados como avatares emoji (se definido)."},networkAnalysis:{title:" Anlise de Rede (Tamanhos de N)"},relationshipColors:{title:"Cores de Relao",you:"Voc",parents:"Pais",siblings:"Irmos",unclesAunts:"Tios/Tias",cousins:"Primos/Primas",grandparents:"Avs",nieces:"Sobrinhas/Sobrinhos",partners:"Parceiros/Parceiras",children:"Filhos/Filhas"},layoutAlgorithm:{title:" Algoritmo de Layout"},instructions:{title:" Como usar",dragNodes:" <strong>Arraste ns</strong> para organizar sua rvore",autoSaves:" <strong>Salva automaticamente</strong> a cada 30 segundos",lock:" <strong>Bloqueie</strong> para congelar posies",download:" <strong>Baixe</strong> como imagem PNG",analyze:" <strong>Analise</strong> para dimensionar ns por mtricas de centralidade",layouts:" <strong>Aplique layouts</strong> para visualizar sua rvore de forma diferente",undoRedo:" <strong>Desfazer/Refazer</strong> com botes ou Ctrl+Z / Ctrl+Y (at 10 aes)"},dialogs:{selectOption:"Selecione uma opo",addParents:"Adicionar Pais",addSibling:"Adicionar Irm/Irmo",addGrandparents:"Adicionar Avs",addUncleAunt:"Adicionar Tio/Tia",addCousin:"Adicionar Primo/Prima",addChild:"Adicionar Filho/Filha",addNieceNephew:"Adicionar Sobrinha/Sobrinho",addPartner:"Adicionar Parceiro/Parceira",fields:{motherName:"Nome da Me",motherAvatar:"Avatar da Me (opcional)",fatherName:"Nome do Pai",fatherAvatar:"Avatar do Pai (opcional)",siblingName:"Nome do Irm/Irmo",gender:"Gnero",avatar:"Avatar (opcional)",parentsSide:"Lado do Pai/Me",grandmotherName:"Nome da Av",grandmotherAvatar:"Avatar da Av (opcional)",grandfatherName:"Nome do Av",grandfatherAvatar:"Avatar do Av (opcional)",name:"Nome",uncleAuntField:"Tio/Tia",sibling:"Irm/Irmo",parent:"Pai/Me",partnerOf:"Parceiro/Parceira De"},genderOptions:{male:"Masculino",female:"Feminino",other:"Outro"},placeholders:{mother:" Digite um emoji",father:" Digite um emoji",avatar:" Digite um emoji",grandmother:" Digite um emoji",grandfather:" Digite um emoji"}},operations:{errors:{atLeastOneParent:"Pelo menos um nome de pai  necessrio",onlyOneParentSlot:"Apenas um slot de pai disponvel. Adicionada apenas a me.",siblingNameRequired:"Nome do irm/irmo  obrigatrio",genderRequired:"Gnero  obrigatrio",graphNotInitialized:"Grafo no inicializado",failedToAddSibling:"Falha ao adicionar irm/irmo",parentNotFound:"Pai/Me no encontrado",atLeastOneGrandparent:"Pelo menos um nome de av  necessrio",onlyOneGrandparentSlot:"Apenas um slot de av disponvel para este pai. Adicionada apenas a av.",failedToAddGrandparents:"Falha ao adicionar avs",uncleAuntNameRequired:"Nome do tio/tia  obrigatrio",failedToAddUncleAunt:"Falha ao adicionar tio/tia",cousinNameRequired:"Nome do primo/prima  obrigatrio",failedToAddCousin:"Falha ao adicionar primo/prima",childNameRequired:"Nome do filho/filha  obrigatrio",failedToAddChild:"Falha ao adicionar filho/filha",nieceNephewNameRequired:"Nome do sobrinha/sobrinho  obrigatrio",failedToAddNieceNephew:"Falha ao adicionar sobrinha/sobrinho",partnerNameRequired:"Nome do parceiro/parceira  obrigatrio",personNotFound:"Pessoa no encontrada",alreadyHasPartner:"j tem um parceiro/parceira!"},success:{parentAdded:"Pais adicionados com sucesso",siblingAdded:"Irm(o) adicionado(a) com sucesso",grandparentsAdded:"Avs adicionados com sucesso",uncleAuntAdded:"Tio(a) adicionado(a) com sucesso",cousinAdded:"Primo(a) adicionado(a) com sucesso",childAdded:"Filho(a) adicionado(a) com sucesso",nieceNephewAdded:"Sobrinho(a) adicionado(a) com sucesso",partnerAdded:"Parceiro(a) adicionado(a) com sucesso"},validation:{noParents:"Voc deve adicionar pais primeiro antes de adicionar avs",noUnclesAunts:"Voc deve adicionar tios/tias primeiro antes de adicionar primos",noSiblings:"Voc deve adicionar irmos primeiro antes de adicionar sobrinhos",maxParents:"Voc j tem 2 pais adicionados. Voc no pode adicionar mais de 2 pais.",notEligibleForPartner:"Nenhuma pessoa disponvel para parceiros"}},storage:{saved:"rvore genealgica salva!",loaded:"rvore genealgica carregada",reset:"rvore genealgica redefinida",error:"Erro ao salvar rvore genealgica"},history:{undone:"Ao desfeita",redone:"Ao refeita",nothingToUndo:"Nada para desfazer",nothingToRedo:"Nada para refazer"},relationships:{yourPartner:"Seu Parceiro/Parceira",partnerOf:"'s Parceiro/Parceira",yourChild:"Seu filho/filha",siblingChild:"'s filho/filha (seu sobrinha/sobrinho)",cousinChild:"'s filho/filha (filho/filha do seu primo/prima)",grandchild:"'s filho/filha (seu neto/neta)",siblingInLaw:"'s parceiro/parceira (seu cunhado/cunhada)",childInLaw:"'s parceiro/parceira (seu genro/nora)"},dropdownOptions:{yourChild:"Seu filho/filha",childTemplate:"Filho(a) de {name}",nieceNephewTemplate:"Filho(a) de {name} (seu sobrinho(a))",cousinChildTemplate:"Filho(a) de {name} (filho(a) do seu primo(a))",grandchildTemplate:"Filho(a) de {name} (seu neto(a))",partnerTemplate:"Parceiro(a) de {name}",siblingPartnerTemplate:"Parceiro(a) de {name} (seu cunhado(a))",childPartnerTemplate:"Parceiro(a) de {name} (seu genro/nora)",parentSideTemplate:"Irm(o) de {name}",uncleAuntChildTemplate:"Filho(a) de {name}",siblingChildTemplate:"Filho(a) de {name}"}},degrees:{header:{title:"6 Graus de Kevin Bacon",subtitle:'Explore a famosa rede "mundo pequeno" conectando atores de Hollywood atravs de suas colaboraes em filmes'},whatIs:{title:"O que  isso?",description:'Os <strong>Seis Graus de Kevin Bacon</strong>  um jogo baseado no conceito de "seis graus de separao". Ele postula que qualquer ator pode ser ligado a Kevin Bacon atravs de seus papis em filmes em seis passos ou menos. Esta visualizao mostra <strong>2 graus de separao</strong> - os co-estrelas de Kevin Bacon e seus co-estrelas.'},status:{title:"Status",ready:"Rede carregada e pronta"},stats:{title:"Estatsticas da Rede",nodes:"Total de Ns",edges:"Total de Arestas",movies:"Filmes",actors:"Atores"},legend:{title:"Legenda",movies:"Filmes",actors:"Atores",kevinBacon:"Kevin Bacon",center:"Centro da rede (0 graus)",degree1:"1 Grau",degree1Desc:"Co-estrelas diretos de Kevin Bacon",degree2:"2 Graus",degree2Desc:"Co-estrelas dos co-estrelas de Kevin Bacon"},baconFinder:{title:"Encontrar Nmero Bacon",placeholder:"Buscar ator ou filme..."},filter:{title:"Filtrar Ns",all:"Todos",actors:"Apenas Atores",movies:"Apenas Filmes"},layout:{title:"Algoritmo de Layout"},analysis:{title:"Anlise de Rede"},instructions:{title:"Como usar",hover:"<strong>Passe o mouse</strong> sobre os ns para ver detalhes do ator/filme",drag:"<strong>Arraste</strong> os ns para reorganizar a rede",zoom:"<strong>Role</strong> para ampliar/reduzir"}}}};function Cp(t,e,n={}){const r=e.split(".");let i=ec[t];for(const s of r)if(i=i?.[s],i===void 0)return tw.warn("Translation not found",{key:e,lang:t}),e;return typeof i=="string"&&Object.keys(n).length>0?i.replace(/\{(\w+)\}/g,(s,o)=>n[o]!==void 0?n[o]:s):i}const nw=Ze({prefix:"useI18n",level:"info"}),Ii=ce(localStorage.getItem("lang")||"en");function hn(){return{lang:Ii,t:(n,r={})=>{const i=n.split(".");let s=ec[Ii.value];for(const o of i)if(s=s?.[o],s===void 0)return nw.warn("Translation not found",{key:n,lang:Ii.value}),n;return typeof s=="string"&&Object.keys(r).length>0?s.replace(/\{(\w+)\}/g,(o,a)=>r[a]!==void 0?r[a]:o):s},changeLanguage:n=>{Ii.value=n,localStorage.setItem("lang",n)},translations:Je(()=>ec[Ii.value])}}const si=ce(localStorage.getItem("darkMode")==="true"),rw=()=>{si.value?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")};ut(si,()=>{localStorage.setItem("darkMode",si.value),rw()},{immediate:!0});function Sp(){return{darkMode:si,toggleDarkMode:()=>{si.value=!si.value}}}function iw(){const t=document.getElementById("particles");if(!t)return;const e=t.getContext("2d");t.width=window.innerWidth,t.height=window.innerHeight;const n=[],r=100,i=150;class s{constructor(){this.x=Math.random()*t.width,this.y=Math.random()*t.height,this.vx=(Math.random()-.5)*.5,this.vy=(Math.random()-.5)*.5,this.radius=Math.random()*2+1}update(){this.x+=this.vx,this.y+=this.vy,(this.x<0||this.x>t.width)&&(this.vx*=-1),(this.y<0||this.y>t.height)&&(this.vy*=-1)}draw(){const l=document.documentElement.classList.contains("dark");e.fillStyle=l?"rgba(167, 139, 250, 0.6)":"rgba(139, 92, 246, 0.5)",e.beginPath(),e.arc(this.x,this.y,this.radius,0,Math.PI*2),e.fill()}}for(let a=0;a<r;a++)n.push(new s);function o(){e.clearRect(0,0,t.width,t.height),n.forEach(l=>{l.update(),l.draw()});const a=document.documentElement.classList.contains("dark");n.forEach((l,c)=>{n.slice(c+1).forEach(d=>{const u=l.x-d.x,h=l.y-d.y,f=Math.sqrt(u*u+h*h);if(f<i){const p=(1-f/i)*.4;e.strokeStyle=a?`rgba(167, 139, 250, ${p})`:`rgba(139, 92, 246, ${p})`,e.lineWidth=1.5,e.beginPath(),e.moveTo(l.x,l.y),e.lineTo(d.x,d.y),e.stroke()}})}),requestAnimationFrame(o)}o(),window.addEventListener("resize",()=>{t.width=window.innerWidth,t.height=window.innerHeight})}const br=Cs({visible:!1,text:"",x:0,y:0});function Tp(){const t=i=>{br.text=i,br.visible=!0},e=()=>{br.visible=!1,br.text=""},n=i=>{i&&(br.x=i.clientX??0,br.y=i.clientY??0)};return{showTooltip:t,hideTooltip:e,updatePosition:n,showTooltipAt:(i,s)=>{i&&n(i),t(s)},tooltipState:br}}const xn=(t,e)=>{const n=t.__vccOpts||t;for(const[r,i]of e)n[r]=i;return n},Vs=15,Xu=288,Zu=120,sw={__name:"GlobalTooltip",setup(t){const{tooltipState:e}=Tp(),n=Je(()=>{if(!e.visible)return{display:"none"};let i=e.x+Vs,s=e.y+Vs;return i+Xu>window.innerWidth&&(i=e.x-Xu-Vs),s+Zu>window.innerHeight&&(s=e.y-Zu-Vs),i<0&&(i=5),s<0&&(s=5),{left:`${i}px`,top:`${s}px`}}),r=i=>{e.visible&&(e.x=i.clientX,e.y=i.clientY)};return Yt(()=>{document.addEventListener("mousemove",r)}),$r(()=>{document.removeEventListener("mousemove",r)}),(i,s)=>(K(),Zn(Lo,{name:"tooltip-fade"},{default:Ue(()=>[m(e).visible&&m(e).text?(K(),Y("div",{key:0,class:"global-tooltip",style:xs(n.value)},v(m(e).text),5)):Ge("",!0)]),_:1}))}},ow=xn(sw,[["__scopeId","data-v-637ae200"]]),aw=["disabled","aria-expanded"],lw={class:"custom-dropdown-value"},cw=["aria-selected","onClick"],dw={__name:"CustomDropdown",props:{modelValue:{type:[String,Number],default:null},options:{type:Array,required:!0},disabled:{type:Boolean,default:!1},placeholder:{type:String,default:"Select an option"},compact:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(t,{emit:e}){const n=t,r=e,i=ce(!1),s=ce(null),o=ce(null),a=y=>typeof y=="object"&&y!==null?y.value:y,l=y=>typeof y=="object"&&y!==null?y.label:y,c=y=>a(y)===n.modelValue,d=Je(()=>{if(n.modelValue===null||n.modelValue===void 0||n.modelValue==="")return n.placeholder;const y=n.options.find(w=>a(w)===n.modelValue);return y?l(y):n.placeholder}),u=()=>{n.disabled||(i.value=!i.value)},h=y=>{const w=a(y);r("update:modelValue",w),i.value=!1},f=y=>{i.value&&s.value&&o.value&&!s.value.contains(y.target)&&!o.value.contains(y.target)&&(i.value=!1)},p=y=>{y.key==="Escape"&&i.value&&(i.value=!1)};return ut(()=>n.modelValue,()=>{}),Yt(()=>{document.addEventListener("click",f),document.addEventListener("keydown",p)}),$r(()=>{document.removeEventListener("click",f),document.removeEventListener("keydown",p)}),(y,w)=>(K(),Y("div",{class:Ke(["custom-dropdown",{"is-open":i.value,"is-disabled":t.disabled,"is-compact":t.compact}])},[g("button",{ref_key:"triggerRef",ref:s,type:"button",disabled:t.disabled,onClick:u,class:Ke(["custom-dropdown-trigger",{"is-compact":t.compact}]),"aria-expanded":i.value,"aria-haspopup":!0},[g("span",lw,v(d.value),1),(K(),Y("svg",{class:Ke(["custom-dropdown-chevron",{"is-open":i.value}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...w[0]||(w[0]=[g("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)])],2))],10,aw),Ee(Lo,{name:"dropdown-fade"},{default:Ue(()=>[i.value?(K(),Y("div",{key:0,ref_key:"dropdownRef",ref:o,class:"custom-dropdown-menu",role:"listbox"},[(K(!0),Y(qe,null,an(t.options,b=>(K(),Y("button",{key:a(b),type:"button",role:"option","aria-selected":c(b),onClick:E=>h(b),class:Ke(["custom-dropdown-option",{"is-selected":c(b)}])},v(l(b)),11,cw))),128))],512)):Ge("",!0)]),_:1})],2))}},Mr=xn(dw,[["__scopeId","data-v-9c4ce30e"]]),uw={class:"content-wrapper"},hw={class:"header"},fw={class:"container-main header-content"},gw={class:"flex items-center gap-4"},pw={class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},mw={key:0,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"},yw={key:1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},vw={class:"nav hidden md:flex"},_w={class:"hidden md:flex items-center space-x-4"},bw={class:"w-20"},ww=["title"],Ew={key:0,class:"text-xl"},kw={key:1,class:"text-xl"},Aw={class:"flex flex-col h-full p-6"},xw={class:"flex flex-col space-y-2 mb-8"},Cw={class:"border-t border-[var(--color-border)] pt-6 space-y-4"},Sw={class:"block text-sm font-medium mb-2"},Tw={class:"text-2xl"},Nw={class:"page"},Rw={key:0,class:"footer"},Lw={class:"container-main footer-content"},Iw={class:"mb-2"},Dw={class:"text-sm"},Pw={__name:"App",setup(t){const e=jb(),{lang:n,t:r,changeLanguage:i}=hn(),{darkMode:s,toggleDarkMode:o}=Sp(),a=ce(!1),l=()=>{a.value=!a.value},c=()=>{a.value=!1},d=Je(()=>["showcase","explorer","degrees","family"].includes(e.name));return ut(d,u=>{u?document.body.classList.add("demo-page"):document.body.classList.remove("demo-page")},{immediate:!0}),Yt(()=>{iw()}),(u,h)=>{const f=zl("router-link"),p=zl("router-view");return K(),Y(qe,null,[h[12]||(h[12]=g("canvas",{id:"particles"},null,-1)),g("div",uw,[g("header",hw,[g("div",fw,[g("div",gw,[Ee(f,{to:"/",class:"logo"},{default:Ue(()=>[...h[5]||(h[5]=[Se(" @guinetik/graph-js ",-1)])]),_:1})]),g("button",{onClick:l,class:"md:hidden btn-icon","aria-label":"Toggle menu"},[(K(),Y("svg",pw,[a.value?(K(),Y("path",yw)):(K(),Y("path",mw))]))]),g("nav",vw,[Ee(f,{to:"/showcase",class:"nav-link","active-class":"nav-link-active"},{default:Ue(()=>[Se(v(m(r)("nav.showcase")),1)]),_:1}),Ee(f,{to:"/explorer",class:"nav-link","active-class":"nav-link-active"},{default:Ue(()=>[Se(v(m(r)("nav.explorer")),1)]),_:1}),Ee(f,{to:"/degrees",class:"nav-link","active-class":"nav-link-active"},{default:Ue(()=>[Se(v(m(r)("nav.degrees")),1)]),_:1}),Ee(f,{to:"/family",class:"nav-link","active-class":"nav-link-active"},{default:Ue(()=>[Se(v(m(r)("nav.family")),1)]),_:1}),Ee(f,{to:"/docs",class:"nav-link","active-class":"nav-link-active"},{default:Ue(()=>[Se(v(m(r)("nav.docs")),1)]),_:1})]),g("div",_w,[g("div",bw,[Ee(Mr,{"model-value":m(n),"onUpdate:modelValue":h[0]||(h[0]=y=>{n.value=y,m(i)(y)}),options:[{value:"en",label:"EN"},{value:"pt",label:"PT"}],compact:!0},null,8,["model-value"])]),g("button",{onClick:h[1]||(h[1]=(...y)=>m(o)&&m(o)(...y)),class:"btn-icon",title:m(r)("common.darkMode")},[m(s)?(K(),Y("span",kw,"")):(K(),Y("span",Ew,""))],8,ww),h[6]||(h[6]=g("a",{href:"https://github.com/guinetik/graph-js",target:"_blank",class:"btn-icon",title:"View on GitHub"},[g("svg",{class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24"},[g("path",{d:"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"})])],-1))])])]),Ee(Lo,{name:"mobile-menu"},{default:Ue(()=>[a.value?(K(),Y("div",{key:0,class:"fixed inset-0 z-50 md:hidden",onClick:c},[h[10]||(h[10]=g("div",{class:"absolute inset-0 bg-black/50"},null,-1)),g("div",{class:"absolute top-0 right-0 bottom-0 w-72 bg-[var(--color-bg-primary)] shadow-xl",onClick:h[4]||(h[4]=Zr(()=>{},["stop"]))},[g("div",Aw,[g("div",{class:"flex justify-between items-center mb-8"},[h[8]||(h[8]=g("h2",{class:"text-xl font-bold"},"Menu",-1)),g("button",{onClick:c,class:"btn-icon"},[...h[7]||(h[7]=[g("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[g("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),g("nav",xw,[Ee(f,{to:"/showcase",class:"nav-link text-lg py-3 px-4 rounded-md hover:bg-[var(--color-bg-secondary)] transition-colors","active-class":"bg-[var(--color-bg-secondary)] text-accent",onClick:c},{default:Ue(()=>[Se(v(m(r)("nav.showcase")),1)]),_:1}),Ee(f,{to:"/explorer",class:"nav-link text-lg py-3 px-4 rounded-md hover:bg-[var(--color-bg-secondary)] transition-colors","active-class":"bg-[var(--color-bg-secondary)] text-accent",onClick:c},{default:Ue(()=>[Se(v(m(r)("nav.explorer")),1)]),_:1}),Ee(f,{to:"/degrees",class:"nav-link text-lg py-3 px-4 rounded-md hover:bg-[var(--color-bg-secondary)] transition-colors","active-class":"bg-[var(--color-bg-secondary)] text-accent",onClick:c},{default:Ue(()=>[Se(v(m(r)("nav.degrees")),1)]),_:1}),Ee(f,{to:"/family",class:"nav-link text-lg py-3 px-4 rounded-md hover:bg-[var(--color-bg-secondary)] transition-colors","active-class":"bg-[var(--color-bg-secondary)] text-accent",onClick:c},{default:Ue(()=>[Se(v(m(r)("nav.family")),1)]),_:1}),Ee(f,{to:"/docs",class:"nav-link text-lg py-3 px-4 rounded-md hover:bg-[var(--color-bg-secondary)] transition-colors","active-class":"bg-[var(--color-bg-secondary)] text-accent",onClick:c},{default:Ue(()=>[Se(v(m(r)("nav.docs")),1)]),_:1})]),g("div",Cw,[g("div",null,[g("label",Sw,v(m(r)("common.language")),1),Ee(Mr,{"model-value":m(n),"onUpdate:modelValue":h[2]||(h[2]=y=>{n.value=y,m(i)(y)}),options:[{value:"en",label:"English"},{value:"pt",label:"Portugus"}]},null,8,["model-value"])]),g("button",{onClick:h[3]||(h[3]=(...y)=>m(o)&&m(o)(...y)),class:"w-full flex items-center justify-between px-4 py-3 rounded-md bg-secondary hover:bg-[var(--color-bg-tertiary)] transition-colors"},[g("span",null,v(m(r)("common.darkMode")),1),g("span",Tw,v(m(s)?"":""),1)]),h[9]||(h[9]=g("a",{href:"https://github.com/guinetik/graph-js",target:"_blank",class:"flex items-center justify-between px-4 py-3 rounded-md bg-secondary hover:bg-[var(--color-bg-tertiary)] transition-colors"},[g("span",null,"View on GitHub"),g("svg",{class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24"},[g("path",{d:"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"})])],-1))])])])])):Ge("",!0)]),_:1}),g("main",Nw,[Ee(p,null,{default:Ue(({Component:y})=>[Ee(Lo,{name:"page-transition",mode:"out-in"},{default:Ue(()=>[(K(),Zn(m0(y)))]),_:2},1024)]),_:1})]),d.value?Ge("",!0):(K(),Y("footer",Rw,[g("div",Lw,[g("p",Iw,[Se(v(m(r)("footer.madeBy"))+"  "+v(m(r)("footer.by"))+" ",1),h[11]||(h[11]=g("a",{href:"https://github.com/guinetik",target:"_blank",class:"text-accent"},"@guinetik",-1))]),g("p",Dw,v(m(r)("footer.license")),1)])])),Ee(ow)])],64)}}},Gw="modulepreload",Mw=function(t){return"/"+t},Yu={},R=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){let l=function(c){return Promise.all(c.map(d=>Promise.resolve(d).then(u=>({status:"fulfilled",value:u}),u=>({status:"rejected",reason:u}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=o?.nonce||o?.getAttribute("nonce");i=l(n.map(c=>{if(c=Mw(c),c in Yu)return;Yu[c]=!0;const d=c.endsWith(".css"),u=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":Gw,d||(h.as="script"),h.crossOrigin="",h.href=c,a&&h.setAttribute("nonce",a),document.head.appendChild(h),d)return new Promise((f,p)=>{h.addEventListener("load",f),h.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})};let rt=class extends Error{constructor(e){super(e),this.name="ShikiError"}};function Ow(t){return cd(t)}function cd(t){return Array.isArray(t)?Fw(t):t instanceof RegExp?t:typeof t=="object"?$w(t):t}function Fw(t){let e=[];for(let n=0,r=t.length;n<r;n++)e[n]=cd(t[n]);return e}function $w(t){let e={};for(let n in t)e[n]=cd(t[n]);return e}function Np(t,...e){return e.forEach(n=>{for(let r in n)t[r]=n[r]}),t}function Rp(t){const e=~t.lastIndexOf("/")||~t.lastIndexOf("\\");return e===0?t:~e===t.length-1?Rp(t.substring(0,t.length-1)):t.substr(~e+1)}var Ja=/\$(\d+)|\${(\d+):\/(downcase|upcase)}/g,Us=class{static hasCaptures(t){return t===null?!1:(Ja.lastIndex=0,Ja.test(t))}static replaceCaptures(t,e,n){return t.replace(Ja,(r,i,s,o)=>{let a=n[parseInt(i||s,10)];if(a){let l=e.substring(a.start,a.end);for(;l[0]===".";)l=l.substring(1);switch(o){case"downcase":return l.toLowerCase();case"upcase":return l.toUpperCase();default:return l}}else return r})}};function Lp(t,e){return t<e?-1:t>e?1:0}function Ip(t,e){if(t===null&&e===null)return 0;if(!t)return-1;if(!e)return 1;let n=t.length,r=e.length;if(n===r){for(let i=0;i<n;i++){let s=Lp(t[i],e[i]);if(s!==0)return s}return 0}return n-r}function Ju(t){return!!(/^#[0-9a-f]{6}$/i.test(t)||/^#[0-9a-f]{8}$/i.test(t)||/^#[0-9a-f]{3}$/i.test(t)||/^#[0-9a-f]{4}$/i.test(t))}function Dp(t){return t.replace(/[\-\\\{\}\*\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&")}var Pp=class{constructor(t){this.fn=t}cache=new Map;get(t){if(this.cache.has(t))return this.cache.get(t);const e=this.fn(t);return this.cache.set(t,e),e}},Do=class{constructor(t,e,n){this._colorMap=t,this._defaults=e,this._root=n}static createFromRawTheme(t,e){return this.createFromParsedTheme(Vw(t),e)}static createFromParsedTheme(t,e){return jw(t,e)}_cachedMatchRoot=new Pp(t=>this._root.match(t));getColorMap(){return this._colorMap.getColorMap()}getDefaults(){return this._defaults}match(t){if(t===null)return this._defaults;const e=t.scopeName,r=this._cachedMatchRoot.get(e).find(i=>zw(t.parent,i.parentScopes));return r?new Gp(r.fontStyle,r.foreground,r.background):null}},Qa=class po{constructor(e,n){this.parent=e,this.scopeName=n}static push(e,n){for(const r of n)e=new po(e,r);return e}static from(...e){let n=null;for(let r=0;r<e.length;r++)n=new po(n,e[r]);return n}push(e){return new po(this,e)}getSegments(){let e=this;const n=[];for(;e;)n.push(e.scopeName),e=e.parent;return n.reverse(),n}toString(){return this.getSegments().join(" ")}extends(e){return this===e?!0:this.parent===null?!1:this.parent.extends(e)}getExtensionIfDefined(e){const n=[];let r=this;for(;r&&r!==e;)n.push(r.scopeName),r=r.parent;return r===e?n.reverse():void 0}};function zw(t,e){if(e.length===0)return!0;for(let n=0;n<e.length;n++){let r=e[n],i=!1;if(r===">"){if(n===e.length-1)return!1;r=e[++n],i=!0}for(;t&&!Bw(t.scopeName,r);){if(i)return!1;t=t.parent}if(!t)return!1;t=t.parent}return!0}function Bw(t,e){return e===t||t.startsWith(e)&&t[e.length]==="."}var Gp=class{constructor(t,e,n){this.fontStyle=t,this.foregroundId=e,this.backgroundId=n}};function Vw(t){if(!t)return[];if(!t.settings||!Array.isArray(t.settings))return[];let e=t.settings,n=[],r=0;for(let i=0,s=e.length;i<s;i++){let o=e[i];if(!o.settings)continue;let a;if(typeof o.scope=="string"){let u=o.scope;u=u.replace(/^[,]+/,""),u=u.replace(/[,]+$/,""),a=u.split(",")}else Array.isArray(o.scope)?a=o.scope:a=[""];let l=-1;if(typeof o.settings.fontStyle=="string"){l=0;let u=o.settings.fontStyle.split(" ");for(let h=0,f=u.length;h<f;h++)switch(u[h]){case"italic":l=l|1;break;case"bold":l=l|2;break;case"underline":l=l|4;break;case"strikethrough":l=l|8;break}}let c=null;typeof o.settings.foreground=="string"&&Ju(o.settings.foreground)&&(c=o.settings.foreground);let d=null;typeof o.settings.background=="string"&&Ju(o.settings.background)&&(d=o.settings.background);for(let u=0,h=a.length;u<h;u++){let p=a[u].trim().split(" "),y=p[p.length-1],w=null;p.length>1&&(w=p.slice(0,p.length-1),w.reverse()),n[r++]=new Uw(y,w,i,l,c,d)}}return n}var Uw=class{constructor(t,e,n,r,i,s){this.scope=t,this.parentScopes=e,this.index=n,this.fontStyle=r,this.foreground=i,this.background=s}},kt=(t=>(t[t.NotSet=-1]="NotSet",t[t.None=0]="None",t[t.Italic=1]="Italic",t[t.Bold=2]="Bold",t[t.Underline=4]="Underline",t[t.Strikethrough=8]="Strikethrough",t))(kt||{});function jw(t,e){t.sort((l,c)=>{let d=Lp(l.scope,c.scope);return d!==0||(d=Ip(l.parentScopes,c.parentScopes),d!==0)?d:l.index-c.index});let n=0,r="#000000",i="#ffffff";for(;t.length>=1&&t[0].scope==="";){let l=t.shift();l.fontStyle!==-1&&(n=l.fontStyle),l.foreground!==null&&(r=l.foreground),l.background!==null&&(i=l.background)}let s=new Hw(e),o=new Gp(n,s.getId(r),s.getId(i)),a=new qw(new tc(0,null,-1,0,0),[]);for(let l=0,c=t.length;l<c;l++){let d=t[l];a.insert(0,d.scope,d.parentScopes,d.fontStyle,s.getId(d.foreground),s.getId(d.background))}return new Do(s,o,a)}var Hw=class{_isFrozen;_lastColorId;_id2color;_color2id;constructor(t){if(this._lastColorId=0,this._id2color=[],this._color2id=Object.create(null),Array.isArray(t)){this._isFrozen=!0;for(let e=0,n=t.length;e<n;e++)this._color2id[t[e]]=e,this._id2color[e]=t[e]}else this._isFrozen=!1}getId(t){if(t===null)return 0;t=t.toUpperCase();let e=this._color2id[t];if(e)return e;if(this._isFrozen)throw new Error(`Missing color in color map - ${t}`);return e=++this._lastColorId,this._color2id[t]=e,this._id2color[e]=t,e}getColorMap(){return this._id2color.slice(0)}},Ww=Object.freeze([]),tc=class Mp{scopeDepth;parentScopes;fontStyle;foreground;background;constructor(e,n,r,i,s){this.scopeDepth=e,this.parentScopes=n||Ww,this.fontStyle=r,this.foreground=i,this.background=s}clone(){return new Mp(this.scopeDepth,this.parentScopes,this.fontStyle,this.foreground,this.background)}static cloneArr(e){let n=[];for(let r=0,i=e.length;r<i;r++)n[r]=e[r].clone();return n}acceptOverwrite(e,n,r,i){this.scopeDepth>e?console.log("how did this happen?"):this.scopeDepth=e,n!==-1&&(this.fontStyle=n),r!==0&&(this.foreground=r),i!==0&&(this.background=i)}},qw=class nc{constructor(e,n=[],r={}){this._mainRule=e,this._children=r,this._rulesWithParentScopes=n}_rulesWithParentScopes;static _cmpBySpecificity(e,n){if(e.scopeDepth!==n.scopeDepth)return n.scopeDepth-e.scopeDepth;let r=0,i=0;for(;e.parentScopes[r]===">"&&r++,n.parentScopes[i]===">"&&i++,!(r>=e.parentScopes.length||i>=n.parentScopes.length);){const s=n.parentScopes[i].length-e.parentScopes[r].length;if(s!==0)return s;r++,i++}return n.parentScopes.length-e.parentScopes.length}match(e){if(e!==""){let r=e.indexOf("."),i,s;if(r===-1?(i=e,s=""):(i=e.substring(0,r),s=e.substring(r+1)),this._children.hasOwnProperty(i))return this._children[i].match(s)}const n=this._rulesWithParentScopes.concat(this._mainRule);return n.sort(nc._cmpBySpecificity),n}insert(e,n,r,i,s,o){if(n===""){this._doInsertHere(e,r,i,s,o);return}let a=n.indexOf("."),l,c;a===-1?(l=n,c=""):(l=n.substring(0,a),c=n.substring(a+1));let d;this._children.hasOwnProperty(l)?d=this._children[l]:(d=new nc(this._mainRule.clone(),tc.cloneArr(this._rulesWithParentScopes)),this._children[l]=d),d.insert(e+1,c,r,i,s,o)}_doInsertHere(e,n,r,i,s){if(n===null){this._mainRule.acceptOverwrite(e,r,i,s);return}for(let o=0,a=this._rulesWithParentScopes.length;o<a;o++){let l=this._rulesWithParentScopes[o];if(Ip(l.parentScopes,n)===0){l.acceptOverwrite(e,r,i,s);return}}r===-1&&(r=this._mainRule.fontStyle),i===0&&(i=this._mainRule.foreground),s===0&&(s=this._mainRule.background),this._rulesWithParentScopes.push(new tc(e,n,r,i,s))}},yi=class Ht{static toBinaryStr(e){return e.toString(2).padStart(32,"0")}static print(e){const n=Ht.getLanguageId(e),r=Ht.getTokenType(e),i=Ht.getFontStyle(e),s=Ht.getForeground(e),o=Ht.getBackground(e);console.log({languageId:n,tokenType:r,fontStyle:i,foreground:s,background:o})}static getLanguageId(e){return(e&255)>>>0}static getTokenType(e){return(e&768)>>>8}static containsBalancedBrackets(e){return(e&1024)!==0}static getFontStyle(e){return(e&30720)>>>11}static getForeground(e){return(e&16744448)>>>15}static getBackground(e){return(e&4278190080)>>>24}static set(e,n,r,i,s,o,a){let l=Ht.getLanguageId(e),c=Ht.getTokenType(e),d=Ht.containsBalancedBrackets(e)?1:0,u=Ht.getFontStyle(e),h=Ht.getForeground(e),f=Ht.getBackground(e);return n!==0&&(l=n),r!==8&&(c=r),i!==null&&(d=i?1:0),s!==-1&&(u=s),o!==0&&(h=o),a!==0&&(f=a),(l<<0|c<<8|d<<10|u<<11|h<<15|f<<24)>>>0}};function Po(t,e){const n=[],r=Kw(t);let i=r.next();for(;i!==null;){let l=0;if(i.length===2&&i.charAt(1)===":"){switch(i.charAt(0)){case"R":l=1;break;case"L":l=-1;break;default:console.log(`Unknown priority ${i} in scope selector`)}i=r.next()}let c=o();if(n.push({matcher:c,priority:l}),i!==",")break;i=r.next()}return n;function s(){if(i==="-"){i=r.next();const l=s();return c=>!!l&&!l(c)}if(i==="("){i=r.next();const l=a();return i===")"&&(i=r.next()),l}if(Qu(i)){const l=[];do l.push(i),i=r.next();while(Qu(i));return c=>e(l,c)}return null}function o(){const l=[];let c=s();for(;c;)l.push(c),c=s();return d=>l.every(u=>u(d))}function a(){const l=[];let c=o();for(;c&&(l.push(c),i==="|"||i===",");){do i=r.next();while(i==="|"||i===",");c=o()}return d=>l.some(u=>u(d))}}function Qu(t){return!!t&&!!t.match(/[\w\.:]+/)}function Kw(t){let e=/([LR]:|[\w\.:][\w\.:\-]*|[\,\|\-\(\)])/g,n=e.exec(t);return{next:()=>{if(!n)return null;const r=n[0];return n=e.exec(t),r}}}function Op(t){typeof t.dispose=="function"&&t.dispose()}var gs=class{constructor(t){this.scopeName=t}toKey(){return this.scopeName}},Xw=class{constructor(t,e){this.scopeName=t,this.ruleName=e}toKey(){return`${this.scopeName}#${this.ruleName}`}},Zw=class{_references=[];_seenReferenceKeys=new Set;get references(){return this._references}visitedRule=new Set;add(t){const e=t.toKey();this._seenReferenceKeys.has(e)||(this._seenReferenceKeys.add(e),this._references.push(t))}},Yw=class{constructor(t,e){this.repo=t,this.initialScopeName=e,this.seenFullScopeRequests.add(this.initialScopeName),this.Q=[new gs(this.initialScopeName)]}seenFullScopeRequests=new Set;seenPartialScopeRequests=new Set;Q;processQueue(){const t=this.Q;this.Q=[];const e=new Zw;for(const n of t)Jw(n,this.initialScopeName,this.repo,e);for(const n of e.references)if(n instanceof gs){if(this.seenFullScopeRequests.has(n.scopeName))continue;this.seenFullScopeRequests.add(n.scopeName),this.Q.push(n)}else{if(this.seenFullScopeRequests.has(n.scopeName)||this.seenPartialScopeRequests.has(n.toKey()))continue;this.seenPartialScopeRequests.add(n.toKey()),this.Q.push(n)}}};function Jw(t,e,n,r){const i=n.lookup(t.scopeName);if(!i){if(t.scopeName===e)throw new Error(`No grammar provided for <${e}>`);return}const s=n.lookup(e);t instanceof gs?mo({baseGrammar:s,selfGrammar:i},r):rc(t.ruleName,{baseGrammar:s,selfGrammar:i,repository:i.repository},r);const o=n.injections(t.scopeName);if(o)for(const a of o)r.add(new gs(a))}function rc(t,e,n){if(e.repository&&e.repository[t]){const r=e.repository[t];Go([r],e,n)}}function mo(t,e){t.selfGrammar.patterns&&Array.isArray(t.selfGrammar.patterns)&&Go(t.selfGrammar.patterns,{...t,repository:t.selfGrammar.repository},e),t.selfGrammar.injections&&Go(Object.values(t.selfGrammar.injections),{...t,repository:t.selfGrammar.repository},e)}function Go(t,e,n){for(const r of t){if(n.visitedRule.has(r))continue;n.visitedRule.add(r);const i=r.repository?Np({},e.repository,r.repository):e.repository;Array.isArray(r.patterns)&&Go(r.patterns,{...e,repository:i},n);const s=r.include;if(!s)continue;const o=Fp(s);switch(o.kind){case 0:mo({...e,selfGrammar:e.baseGrammar},n);break;case 1:mo(e,n);break;case 2:rc(o.ruleName,{...e,repository:i},n);break;case 3:case 4:const a=o.scopeName===e.selfGrammar.scopeName?e.selfGrammar:o.scopeName===e.baseGrammar.scopeName?e.baseGrammar:void 0;if(a){const l={baseGrammar:e.baseGrammar,selfGrammar:a,repository:i};o.kind===4?rc(o.ruleName,l,n):mo(l,n)}else o.kind===4?n.add(new Xw(o.scopeName,o.ruleName)):n.add(new gs(o.scopeName));break}}}var Qw=class{kind=0},e1=class{kind=1},t1=class{constructor(t){this.ruleName=t}kind=2},n1=class{constructor(t){this.scopeName=t}kind=3},r1=class{constructor(t,e){this.scopeName=t,this.ruleName=e}kind=4};function Fp(t){if(t==="$base")return new Qw;if(t==="$self")return new e1;const e=t.indexOf("#");if(e===-1)return new n1(t);if(e===0)return new t1(t.substring(1));{const n=t.substring(0,e),r=t.substring(e+1);return new r1(n,r)}}var i1=/\\(\d+)/,eh=/\\(\d+)/g,s1=-1,$p=-2;var Ns=class{$location;id;_nameIsCapturing;_name;_contentNameIsCapturing;_contentName;constructor(t,e,n,r){this.$location=t,this.id=e,this._name=n||null,this._nameIsCapturing=Us.hasCaptures(this._name),this._contentName=r||null,this._contentNameIsCapturing=Us.hasCaptures(this._contentName)}get debugName(){const t=this.$location?`${Rp(this.$location.filename)}:${this.$location.line}`:"unknown";return`${this.constructor.name}#${this.id} @ ${t}`}getName(t,e){return!this._nameIsCapturing||this._name===null||t===null||e===null?this._name:Us.replaceCaptures(this._name,t,e)}getContentName(t,e){return!this._contentNameIsCapturing||this._contentName===null?this._contentName:Us.replaceCaptures(this._contentName,t,e)}},o1=class extends Ns{retokenizeCapturedWithRuleId;constructor(t,e,n,r,i){super(t,e,n,r),this.retokenizeCapturedWithRuleId=i}dispose(){}collectPatterns(t,e){throw new Error("Not supported!")}compile(t,e){throw new Error("Not supported!")}compileAG(t,e,n,r){throw new Error("Not supported!")}},a1=class extends Ns{_match;captures;_cachedCompiledPatterns;constructor(t,e,n,r,i){super(t,e,n,null),this._match=new ps(r,this.id),this.captures=i,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}get debugMatchRegExp(){return`${this._match.source}`}collectPatterns(t,e){e.push(this._match)}compile(t,e){return this._getCachedCompiledPatterns(t).compile(t)}compileAG(t,e,n,r){return this._getCachedCompiledPatterns(t).compileAG(t,n,r)}_getCachedCompiledPatterns(t){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new ms,this.collectPatterns(t,this._cachedCompiledPatterns)),this._cachedCompiledPatterns}},th=class extends Ns{hasMissingPatterns;patterns;_cachedCompiledPatterns;constructor(t,e,n,r,i){super(t,e,n,r),this.patterns=i.patterns,this.hasMissingPatterns=i.hasMissingPatterns,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}collectPatterns(t,e){for(const n of this.patterns)t.getRule(n).collectPatterns(t,e)}compile(t,e){return this._getCachedCompiledPatterns(t).compile(t)}compileAG(t,e,n,r){return this._getCachedCompiledPatterns(t).compileAG(t,n,r)}_getCachedCompiledPatterns(t){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new ms,this.collectPatterns(t,this._cachedCompiledPatterns)),this._cachedCompiledPatterns}},ic=class extends Ns{_begin;beginCaptures;_end;endHasBackReferences;endCaptures;applyEndPatternLast;hasMissingPatterns;patterns;_cachedCompiledPatterns;constructor(t,e,n,r,i,s,o,a,l,c){super(t,e,n,r),this._begin=new ps(i,this.id),this.beginCaptures=s,this._end=new ps(o||"",-1),this.endHasBackReferences=this._end.hasBackReferences,this.endCaptures=a,this.applyEndPatternLast=l||!1,this.patterns=c.patterns,this.hasMissingPatterns=c.hasMissingPatterns,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}get debugBeginRegExp(){return`${this._begin.source}`}get debugEndRegExp(){return`${this._end.source}`}getEndWithResolvedBackReferences(t,e){return this._end.resolveBackReferences(t,e)}collectPatterns(t,e){e.push(this._begin)}compile(t,e){return this._getCachedCompiledPatterns(t,e).compile(t)}compileAG(t,e,n,r){return this._getCachedCompiledPatterns(t,e).compileAG(t,n,r)}_getCachedCompiledPatterns(t,e){if(!this._cachedCompiledPatterns){this._cachedCompiledPatterns=new ms;for(const n of this.patterns)t.getRule(n).collectPatterns(t,this._cachedCompiledPatterns);this.applyEndPatternLast?this._cachedCompiledPatterns.push(this._end.hasBackReferences?this._end.clone():this._end):this._cachedCompiledPatterns.unshift(this._end.hasBackReferences?this._end.clone():this._end)}return this._end.hasBackReferences&&(this.applyEndPatternLast?this._cachedCompiledPatterns.setSource(this._cachedCompiledPatterns.length()-1,e):this._cachedCompiledPatterns.setSource(0,e)),this._cachedCompiledPatterns}},Mo=class extends Ns{_begin;beginCaptures;whileCaptures;_while;whileHasBackReferences;hasMissingPatterns;patterns;_cachedCompiledPatterns;_cachedCompiledWhilePatterns;constructor(t,e,n,r,i,s,o,a,l){super(t,e,n,r),this._begin=new ps(i,this.id),this.beginCaptures=s,this.whileCaptures=a,this._while=new ps(o,$p),this.whileHasBackReferences=this._while.hasBackReferences,this.patterns=l.patterns,this.hasMissingPatterns=l.hasMissingPatterns,this._cachedCompiledPatterns=null,this._cachedCompiledWhilePatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null),this._cachedCompiledWhilePatterns&&(this._cachedCompiledWhilePatterns.dispose(),this._cachedCompiledWhilePatterns=null)}get debugBeginRegExp(){return`${this._begin.source}`}get debugWhileRegExp(){return`${this._while.source}`}getWhileWithResolvedBackReferences(t,e){return this._while.resolveBackReferences(t,e)}collectPatterns(t,e){e.push(this._begin)}compile(t,e){return this._getCachedCompiledPatterns(t).compile(t)}compileAG(t,e,n,r){return this._getCachedCompiledPatterns(t).compileAG(t,n,r)}_getCachedCompiledPatterns(t){if(!this._cachedCompiledPatterns){this._cachedCompiledPatterns=new ms;for(const e of this.patterns)t.getRule(e).collectPatterns(t,this._cachedCompiledPatterns)}return this._cachedCompiledPatterns}compileWhile(t,e){return this._getCachedCompiledWhilePatterns(t,e).compile(t)}compileWhileAG(t,e,n,r){return this._getCachedCompiledWhilePatterns(t,e).compileAG(t,n,r)}_getCachedCompiledWhilePatterns(t,e){return this._cachedCompiledWhilePatterns||(this._cachedCompiledWhilePatterns=new ms,this._cachedCompiledWhilePatterns.push(this._while.hasBackReferences?this._while.clone():this._while)),this._while.hasBackReferences&&this._cachedCompiledWhilePatterns.setSource(0,e||""),this._cachedCompiledWhilePatterns}},zp=class yt{static createCaptureRule(e,n,r,i,s){return e.registerRule(o=>new o1(n,o,r,i,s))}static getCompiledRuleId(e,n,r){return e.id||n.registerRule(i=>{if(e.id=i,e.match)return new a1(e.$vscodeTextmateLocation,e.id,e.name,e.match,yt._compileCaptures(e.captures,n,r));if(typeof e.begin>"u"){e.repository&&(r=Np({},r,e.repository));let s=e.patterns;return typeof s>"u"&&e.include&&(s=[{include:e.include}]),new th(e.$vscodeTextmateLocation,e.id,e.name,e.contentName,yt._compilePatterns(s,n,r))}return e.while?new Mo(e.$vscodeTextmateLocation,e.id,e.name,e.contentName,e.begin,yt._compileCaptures(e.beginCaptures||e.captures,n,r),e.while,yt._compileCaptures(e.whileCaptures||e.captures,n,r),yt._compilePatterns(e.patterns,n,r)):new ic(e.$vscodeTextmateLocation,e.id,e.name,e.contentName,e.begin,yt._compileCaptures(e.beginCaptures||e.captures,n,r),e.end,yt._compileCaptures(e.endCaptures||e.captures,n,r),e.applyEndPatternLast,yt._compilePatterns(e.patterns,n,r))}),e.id}static _compileCaptures(e,n,r){let i=[];if(e){let s=0;for(const o in e){if(o==="$vscodeTextmateLocation")continue;const a=parseInt(o,10);a>s&&(s=a)}for(let o=0;o<=s;o++)i[o]=null;for(const o in e){if(o==="$vscodeTextmateLocation")continue;const a=parseInt(o,10);let l=0;e[o].patterns&&(l=yt.getCompiledRuleId(e[o],n,r)),i[a]=yt.createCaptureRule(n,e[o].$vscodeTextmateLocation,e[o].name,e[o].contentName,l)}}return i}static _compilePatterns(e,n,r){let i=[];if(e)for(let s=0,o=e.length;s<o;s++){const a=e[s];let l=-1;if(a.include){const c=Fp(a.include);switch(c.kind){case 0:case 1:l=yt.getCompiledRuleId(r[a.include],n,r);break;case 2:let d=r[c.ruleName];d&&(l=yt.getCompiledRuleId(d,n,r));break;case 3:case 4:const u=c.scopeName,h=c.kind===4?c.ruleName:null,f=n.getExternalGrammar(u,r);if(f)if(h){let p=f.repository[h];p&&(l=yt.getCompiledRuleId(p,n,f.repository))}else l=yt.getCompiledRuleId(f.repository.$self,n,f.repository);break}}else l=yt.getCompiledRuleId(a,n,r);if(l!==-1){const c=n.getRule(l);let d=!1;if((c instanceof th||c instanceof ic||c instanceof Mo)&&c.hasMissingPatterns&&c.patterns.length===0&&(d=!0),d)continue;i.push(l)}}return{patterns:i,hasMissingPatterns:(e?e.length:0)!==i.length}}},ps=class Bp{source;ruleId;hasAnchor;hasBackReferences;_anchorCache;constructor(e,n){if(e&&typeof e=="string"){const r=e.length;let i=0,s=[],o=!1;for(let a=0;a<r;a++)if(e.charAt(a)==="\\"&&a+1<r){const c=e.charAt(a+1);c==="z"?(s.push(e.substring(i,a)),s.push("$(?!\\n)(?<!\\n)"),i=a+2):(c==="A"||c==="G")&&(o=!0),a++}this.hasAnchor=o,i===0?this.source=e:(s.push(e.substring(i,r)),this.source=s.join(""))}else this.hasAnchor=!1,this.source=e;this.hasAnchor?this._anchorCache=this._buildAnchorCache():this._anchorCache=null,this.ruleId=n,typeof this.source=="string"?this.hasBackReferences=i1.test(this.source):this.hasBackReferences=!1}clone(){return new Bp(this.source,this.ruleId)}setSource(e){this.source!==e&&(this.source=e,this.hasAnchor&&(this._anchorCache=this._buildAnchorCache()))}resolveBackReferences(e,n){if(typeof this.source!="string")throw new Error("This method should only be called if the source is a string");let r=n.map(i=>e.substring(i.start,i.end));return eh.lastIndex=0,this.source.replace(eh,(i,s)=>Dp(r[parseInt(s,10)]||""))}_buildAnchorCache(){if(typeof this.source!="string")throw new Error("This method should only be called if the source is a string");let e=[],n=[],r=[],i=[],s,o,a,l;for(s=0,o=this.source.length;s<o;s++)a=this.source.charAt(s),e[s]=a,n[s]=a,r[s]=a,i[s]=a,a==="\\"&&s+1<o&&(l=this.source.charAt(s+1),l==="A"?(e[s+1]="",n[s+1]="",r[s+1]="A",i[s+1]="A"):l==="G"?(e[s+1]="",n[s+1]="G",r[s+1]="",i[s+1]="G"):(e[s+1]=l,n[s+1]=l,r[s+1]=l,i[s+1]=l),s++);return{A0_G0:e.join(""),A0_G1:n.join(""),A1_G0:r.join(""),A1_G1:i.join("")}}resolveAnchors(e,n){return!this.hasAnchor||!this._anchorCache||typeof this.source!="string"?this.source:e?n?this._anchorCache.A1_G1:this._anchorCache.A1_G0:n?this._anchorCache.A0_G1:this._anchorCache.A0_G0}},ms=class{_items;_hasAnchors;_cached;_anchorCache;constructor(){this._items=[],this._hasAnchors=!1,this._cached=null,this._anchorCache={A0_G0:null,A0_G1:null,A1_G0:null,A1_G1:null}}dispose(){this._disposeCaches()}_disposeCaches(){this._cached&&(this._cached.dispose(),this._cached=null),this._anchorCache.A0_G0&&(this._anchorCache.A0_G0.dispose(),this._anchorCache.A0_G0=null),this._anchorCache.A0_G1&&(this._anchorCache.A0_G1.dispose(),this._anchorCache.A0_G1=null),this._anchorCache.A1_G0&&(this._anchorCache.A1_G0.dispose(),this._anchorCache.A1_G0=null),this._anchorCache.A1_G1&&(this._anchorCache.A1_G1.dispose(),this._anchorCache.A1_G1=null)}push(t){this._items.push(t),this._hasAnchors=this._hasAnchors||t.hasAnchor}unshift(t){this._items.unshift(t),this._hasAnchors=this._hasAnchors||t.hasAnchor}length(){return this._items.length}setSource(t,e){this._items[t].source!==e&&(this._disposeCaches(),this._items[t].setSource(e))}compile(t){if(!this._cached){let e=this._items.map(n=>n.source);this._cached=new nh(t,e,this._items.map(n=>n.ruleId))}return this._cached}compileAG(t,e,n){return this._hasAnchors?e?n?(this._anchorCache.A1_G1||(this._anchorCache.A1_G1=this._resolveAnchors(t,e,n)),this._anchorCache.A1_G1):(this._anchorCache.A1_G0||(this._anchorCache.A1_G0=this._resolveAnchors(t,e,n)),this._anchorCache.A1_G0):n?(this._anchorCache.A0_G1||(this._anchorCache.A0_G1=this._resolveAnchors(t,e,n)),this._anchorCache.A0_G1):(this._anchorCache.A0_G0||(this._anchorCache.A0_G0=this._resolveAnchors(t,e,n)),this._anchorCache.A0_G0):this.compile(t)}_resolveAnchors(t,e,n){let r=this._items.map(i=>i.resolveAnchors(e,n));return new nh(t,r,this._items.map(i=>i.ruleId))}},nh=class{constructor(t,e,n){this.regExps=e,this.rules=n,this.scanner=t.createOnigScanner(e)}scanner;dispose(){typeof this.scanner.dispose=="function"&&this.scanner.dispose()}toString(){const t=[];for(let e=0,n=this.rules.length;e<n;e++)t.push("   - "+this.rules[e]+": "+this.regExps[e]);return t.join(`
`)}findNextMatchSync(t,e,n){const r=this.scanner.findNextMatchSync(t,e,n);return r?{ruleId:this.rules[r.index],captureIndices:r.captureIndices}:null}},el=class{constructor(t,e){this.languageId=t,this.tokenType=e}},l1=class sc{_defaultAttributes;_embeddedLanguagesMatcher;constructor(e,n){this._defaultAttributes=new el(e,8),this._embeddedLanguagesMatcher=new c1(Object.entries(n||{}))}getDefaultAttributes(){return this._defaultAttributes}getBasicScopeAttributes(e){return e===null?sc._NULL_SCOPE_METADATA:this._getBasicScopeAttributes.get(e)}static _NULL_SCOPE_METADATA=new el(0,0);_getBasicScopeAttributes=new Pp(e=>{const n=this._scopeToLanguage(e),r=this._toStandardTokenType(e);return new el(n,r)});_scopeToLanguage(e){return this._embeddedLanguagesMatcher.match(e)||0}_toStandardTokenType(e){const n=e.match(sc.STANDARD_TOKEN_TYPE_REGEXP);if(!n)return 8;switch(n[1]){case"comment":return 1;case"string":return 2;case"regex":return 3;case"meta.embedded":return 0}throw new Error("Unexpected match for standard token type!")}static STANDARD_TOKEN_TYPE_REGEXP=/\b(comment|string|regex|meta\.embedded)\b/},c1=class{values;scopesRegExp;constructor(t){if(t.length===0)this.values=null,this.scopesRegExp=null;else{this.values=new Map(t);const e=t.map(([n,r])=>Dp(n));e.sort(),e.reverse(),this.scopesRegExp=new RegExp(`^((${e.join(")|(")}))($|\\.)`,"")}}match(t){if(!this.scopesRegExp)return;const e=t.match(this.scopesRegExp);if(e)return this.values.get(e[1])}},rh=class{constructor(t,e){this.stack=t,this.stoppedEarly=e}};function Vp(t,e,n,r,i,s,o,a){const l=e.content.length;let c=!1,d=-1;if(o){const f=d1(t,e,n,r,i,s);i=f.stack,r=f.linePos,n=f.isFirstLine,d=f.anchorPosition}const u=Date.now();for(;!c;){if(a!==0&&Date.now()-u>a)return new rh(i,!0);h()}return new rh(i,!1);function h(){const f=u1(t,e,n,r,i,d);if(!f){s.produce(i,l),c=!0;return}const p=f.captureIndices,y=f.matchedRuleId,w=p&&p.length>0?p[0].end>r:!1;if(y===s1){const b=i.getRule(t);s.produce(i,p[0].start),i=i.withContentNameScopesList(i.nameScopesList),Hi(t,e,n,i,s,b.endCaptures,p),s.produce(i,p[0].end);const E=i;if(i=i.parent,d=E.getAnchorPos(),!w&&E.getEnterPos()===r){i=E,s.produce(i,l),c=!0;return}}else{const b=t.getRule(y);s.produce(i,p[0].start);const E=i,k=b.getName(e.content,p),_=i.contentNameScopesList.pushAttributed(k,t);if(i=i.push(y,r,d,p[0].end===l,null,_,_),b instanceof ic){const x=b;Hi(t,e,n,i,s,x.beginCaptures,p),s.produce(i,p[0].end),d=p[0].end;const T=x.getContentName(e.content,p),L=_.pushAttributed(T,t);if(i=i.withContentNameScopesList(L),x.endHasBackReferences&&(i=i.withEndRule(x.getEndWithResolvedBackReferences(e.content,p))),!w&&E.hasSameRuleAs(i)){i=i.pop(),s.produce(i,l),c=!0;return}}else if(b instanceof Mo){const x=b;Hi(t,e,n,i,s,x.beginCaptures,p),s.produce(i,p[0].end),d=p[0].end;const T=x.getContentName(e.content,p),L=_.pushAttributed(T,t);if(i=i.withContentNameScopesList(L),x.whileHasBackReferences&&(i=i.withEndRule(x.getWhileWithResolvedBackReferences(e.content,p))),!w&&E.hasSameRuleAs(i)){i=i.pop(),s.produce(i,l),c=!0;return}}else if(Hi(t,e,n,i,s,b.captures,p),s.produce(i,p[0].end),i=i.pop(),!w){i=i.safePop(),s.produce(i,l),c=!0;return}}p[0].end>r&&(r=p[0].end,n=!1)}}function d1(t,e,n,r,i,s){let o=i.beginRuleCapturedEOL?0:-1;const a=[];for(let l=i;l;l=l.pop()){const c=l.getRule(t);c instanceof Mo&&a.push({rule:c,stack:l})}for(let l=a.pop();l;l=a.pop()){const{ruleScanner:c,findOptions:d}=g1(l.rule,t,l.stack.endRule,n,r===o),u=c.findNextMatchSync(e,r,d);if(u){if(u.ruleId!==$p){i=l.stack.pop();break}u.captureIndices&&u.captureIndices.length&&(s.produce(l.stack,u.captureIndices[0].start),Hi(t,e,n,l.stack,s,l.rule.whileCaptures,u.captureIndices),s.produce(l.stack,u.captureIndices[0].end),o=u.captureIndices[0].end,u.captureIndices[0].end>r&&(r=u.captureIndices[0].end,n=!1))}else{i=l.stack.pop();break}}return{stack:i,linePos:r,anchorPosition:o,isFirstLine:n}}function u1(t,e,n,r,i,s){const o=h1(t,e,n,r,i,s),a=t.getInjections();if(a.length===0)return o;const l=f1(a,t,e,n,r,i,s);if(!l)return o;if(!o)return l;const c=o.captureIndices[0].start,d=l.captureIndices[0].start;return d<c||l.priorityMatch&&d===c?l:o}function h1(t,e,n,r,i,s){const o=i.getRule(t),{ruleScanner:a,findOptions:l}=Up(o,t,i.endRule,n,r===s),c=a.findNextMatchSync(e,r,l);return c?{captureIndices:c.captureIndices,matchedRuleId:c.ruleId}:null}function f1(t,e,n,r,i,s,o){let a=Number.MAX_VALUE,l=null,c,d=0;const u=s.contentNameScopesList.getScopeNames();for(let h=0,f=t.length;h<f;h++){const p=t[h];if(!p.matcher(u))continue;const y=e.getRule(p.ruleId),{ruleScanner:w,findOptions:b}=Up(y,e,null,r,i===o),E=w.findNextMatchSync(n,i,b);if(!E)continue;const k=E.captureIndices[0].start;if(!(k>=a)&&(a=k,l=E.captureIndices,c=E.ruleId,d=p.priority,a===i))break}return l?{priorityMatch:d===-1,captureIndices:l,matchedRuleId:c}:null}function Up(t,e,n,r,i){return{ruleScanner:t.compileAG(e,n,r,i),findOptions:0}}function g1(t,e,n,r,i){return{ruleScanner:t.compileWhileAG(e,n,r,i),findOptions:0}}function Hi(t,e,n,r,i,s,o){if(s.length===0)return;const a=e.content,l=Math.min(s.length,o.length),c=[],d=o[0].end;for(let u=0;u<l;u++){const h=s[u];if(h===null)continue;const f=o[u];if(f.length===0)continue;if(f.start>d)break;for(;c.length>0&&c[c.length-1].endPos<=f.start;)i.produceFromScopes(c[c.length-1].scopes,c[c.length-1].endPos),c.pop();if(c.length>0?i.produceFromScopes(c[c.length-1].scopes,f.start):i.produce(r,f.start),h.retokenizeCapturedWithRuleId){const y=h.getName(a,o),w=r.contentNameScopesList.pushAttributed(y,t),b=h.getContentName(a,o),E=w.pushAttributed(b,t),k=r.push(h.retokenizeCapturedWithRuleId,f.start,-1,!1,null,w,E),_=t.createOnigString(a.substring(0,f.end));Vp(t,_,n&&f.start===0,f.start,k,i,!1,0),Op(_);continue}const p=h.getName(a,o);if(p!==null){const w=(c.length>0?c[c.length-1].scopes:r.contentNameScopesList).pushAttributed(p,t);c.push(new p1(w,f.end))}}for(;c.length>0;)i.produceFromScopes(c[c.length-1].scopes,c[c.length-1].endPos),c.pop()}var p1=class{scopes;endPos;constructor(t,e){this.scopes=t,this.endPos=e}};function m1(t,e,n,r,i,s,o,a){return new v1(t,e,n,r,i,s,o,a)}function ih(t,e,n,r,i){const s=Po(e,Oo),o=zp.getCompiledRuleId(n,r,i.repository);for(const a of s)t.push({debugSelector:e,matcher:a.matcher,ruleId:o,grammar:i,priority:a.priority})}function Oo(t,e){if(e.length<t.length)return!1;let n=0;return t.every(r=>{for(let i=n;i<e.length;i++)if(y1(e[i],r))return n=i+1,!0;return!1})}function y1(t,e){if(!t)return!1;if(t===e)return!0;const n=e.length;return t.length>n&&t.substr(0,n)===e&&t[n]==="."}var v1=class{constructor(t,e,n,r,i,s,o,a){if(this._rootScopeName=t,this.balancedBracketSelectors=s,this._onigLib=a,this._basicScopeAttributesProvider=new l1(n,r),this._rootId=-1,this._lastRuleId=0,this._ruleId2desc=[null],this._includedGrammars={},this._grammarRepository=o,this._grammar=sh(e,null),this._injections=null,this._tokenTypeMatchers=[],i)for(const l of Object.keys(i)){const c=Po(l,Oo);for(const d of c)this._tokenTypeMatchers.push({matcher:d.matcher,type:i[l]})}}_rootId;_lastRuleId;_ruleId2desc;_includedGrammars;_grammarRepository;_grammar;_injections;_basicScopeAttributesProvider;_tokenTypeMatchers;get themeProvider(){return this._grammarRepository}dispose(){for(const t of this._ruleId2desc)t&&t.dispose()}createOnigScanner(t){return this._onigLib.createOnigScanner(t)}createOnigString(t){return this._onigLib.createOnigString(t)}getMetadataForScope(t){return this._basicScopeAttributesProvider.getBasicScopeAttributes(t)}_collectInjections(){const t={lookup:i=>i===this._rootScopeName?this._grammar:this.getExternalGrammar(i),injections:i=>this._grammarRepository.injections(i)},e=[],n=this._rootScopeName,r=t.lookup(n);if(r){const i=r.injections;if(i)for(let o in i)ih(e,o,i[o],this,r);const s=this._grammarRepository.injections(n);s&&s.forEach(o=>{const a=this.getExternalGrammar(o);if(a){const l=a.injectionSelector;l&&ih(e,l,a,this,a)}})}return e.sort((i,s)=>i.priority-s.priority),e}getInjections(){return this._injections===null&&(this._injections=this._collectInjections()),this._injections}registerRule(t){const e=++this._lastRuleId,n=t(e);return this._ruleId2desc[e]=n,n}getRule(t){return this._ruleId2desc[t]}getExternalGrammar(t,e){if(this._includedGrammars[t])return this._includedGrammars[t];if(this._grammarRepository){const n=this._grammarRepository.lookup(t);if(n)return this._includedGrammars[t]=sh(n,e&&e.$base),this._includedGrammars[t]}}tokenizeLine(t,e,n=0){const r=this._tokenize(t,e,!1,n);return{tokens:r.lineTokens.getResult(r.ruleStack,r.lineLength),ruleStack:r.ruleStack,stoppedEarly:r.stoppedEarly}}tokenizeLine2(t,e,n=0){const r=this._tokenize(t,e,!0,n);return{tokens:r.lineTokens.getBinaryResult(r.ruleStack,r.lineLength),ruleStack:r.ruleStack,stoppedEarly:r.stoppedEarly}}_tokenize(t,e,n,r){this._rootId===-1&&(this._rootId=zp.getCompiledRuleId(this._grammar.repository.$self,this,this._grammar.repository),this.getInjections());let i;if(!e||e===oc.NULL){i=!0;const c=this._basicScopeAttributesProvider.getDefaultAttributes(),d=this.themeProvider.getDefaults(),u=yi.set(0,c.languageId,c.tokenType,null,d.fontStyle,d.foregroundId,d.backgroundId),h=this.getRule(this._rootId).getName(null,null);let f;h?f=ns.createRootAndLookUpScopeName(h,u,this):f=ns.createRoot("unknown",u),e=new oc(null,this._rootId,-1,-1,!1,null,f,f)}else i=!1,e.reset();t=t+`
`;const s=this.createOnigString(t),o=s.content.length,a=new b1(n,t,this._tokenTypeMatchers,this.balancedBracketSelectors),l=Vp(this,s,i,0,e,a,!0,r);return Op(s),{lineLength:o,lineTokens:a,ruleStack:l.stack,stoppedEarly:l.stoppedEarly}}};function sh(t,e){return t=Ow(t),t.repository=t.repository||{},t.repository.$self={$vscodeTextmateLocation:t.$vscodeTextmateLocation,patterns:t.patterns,name:t.scopeName},t.repository.$base=e||t.repository.$self,t}var ns=class mn{constructor(e,n,r){this.parent=e,this.scopePath=n,this.tokenAttributes=r}static fromExtension(e,n){let r=e,i=e?.scopePath??null;for(const s of n)i=Qa.push(i,s.scopeNames),r=new mn(r,i,s.encodedTokenAttributes);return r}static createRoot(e,n){return new mn(null,new Qa(null,e),n)}static createRootAndLookUpScopeName(e,n,r){const i=r.getMetadataForScope(e),s=new Qa(null,e),o=r.themeProvider.themeMatch(s),a=mn.mergeAttributes(n,i,o);return new mn(null,s,a)}get scopeName(){return this.scopePath.scopeName}toString(){return this.getScopeNames().join(" ")}equals(e){return mn.equals(this,e)}static equals(e,n){do{if(e===n||!e&&!n)return!0;if(!e||!n||e.scopeName!==n.scopeName||e.tokenAttributes!==n.tokenAttributes)return!1;e=e.parent,n=n.parent}while(!0)}static mergeAttributes(e,n,r){let i=-1,s=0,o=0;return r!==null&&(i=r.fontStyle,s=r.foregroundId,o=r.backgroundId),yi.set(e,n.languageId,n.tokenType,null,i,s,o)}pushAttributed(e,n){if(e===null)return this;if(e.indexOf(" ")===-1)return mn._pushAttributed(this,e,n);const r=e.split(/ /g);let i=this;for(const s of r)i=mn._pushAttributed(i,s,n);return i}static _pushAttributed(e,n,r){const i=r.getMetadataForScope(n),s=e.scopePath.push(n),o=r.themeProvider.themeMatch(s),a=mn.mergeAttributes(e.tokenAttributes,i,o);return new mn(e,s,a)}getScopeNames(){return this.scopePath.getSegments()}getExtensionIfDefined(e){const n=[];let r=this;for(;r&&r!==e;)n.push({encodedTokenAttributes:r.tokenAttributes,scopeNames:r.scopePath.getExtensionIfDefined(r.parent?.scopePath??null)}),r=r.parent;return r===e?n.reverse():void 0}},oc=class xr{constructor(e,n,r,i,s,o,a,l){this.parent=e,this.ruleId=n,this.beginRuleCapturedEOL=s,this.endRule=o,this.nameScopesList=a,this.contentNameScopesList=l,this.depth=this.parent?this.parent.depth+1:1,this._enterPos=r,this._anchorPos=i}_stackElementBrand=void 0;static NULL=new xr(null,0,0,0,!1,null,null,null);_enterPos;_anchorPos;depth;equals(e){return e===null?!1:xr._equals(this,e)}static _equals(e,n){return e===n?!0:this._structuralEquals(e,n)?ns.equals(e.contentNameScopesList,n.contentNameScopesList):!1}static _structuralEquals(e,n){do{if(e===n||!e&&!n)return!0;if(!e||!n||e.depth!==n.depth||e.ruleId!==n.ruleId||e.endRule!==n.endRule)return!1;e=e.parent,n=n.parent}while(!0)}clone(){return this}static _reset(e){for(;e;)e._enterPos=-1,e._anchorPos=-1,e=e.parent}reset(){xr._reset(this)}pop(){return this.parent}safePop(){return this.parent?this.parent:this}push(e,n,r,i,s,o,a){return new xr(this,e,n,r,i,s,o,a)}getEnterPos(){return this._enterPos}getAnchorPos(){return this._anchorPos}getRule(e){return e.getRule(this.ruleId)}toString(){const e=[];return this._writeString(e,0),"["+e.join(",")+"]"}_writeString(e,n){return this.parent&&(n=this.parent._writeString(e,n)),e[n++]=`(${this.ruleId}, ${this.nameScopesList?.toString()}, ${this.contentNameScopesList?.toString()})`,n}withContentNameScopesList(e){return this.contentNameScopesList===e?this:this.parent.push(this.ruleId,this._enterPos,this._anchorPos,this.beginRuleCapturedEOL,this.endRule,this.nameScopesList,e)}withEndRule(e){return this.endRule===e?this:new xr(this.parent,this.ruleId,this._enterPos,this._anchorPos,this.beginRuleCapturedEOL,e,this.nameScopesList,this.contentNameScopesList)}hasSameRuleAs(e){let n=this;for(;n&&n._enterPos===e._enterPos;){if(n.ruleId===e.ruleId)return!0;n=n.parent}return!1}toStateStackFrame(){return{ruleId:this.ruleId,beginRuleCapturedEOL:this.beginRuleCapturedEOL,endRule:this.endRule,nameScopesList:this.nameScopesList?.getExtensionIfDefined(this.parent?.nameScopesList??null)??[],contentNameScopesList:this.contentNameScopesList?.getExtensionIfDefined(this.nameScopesList)??[]}}static pushFrame(e,n){const r=ns.fromExtension(e?.nameScopesList??null,n.nameScopesList);return new xr(e,n.ruleId,n.enterPos??-1,n.anchorPos??-1,n.beginRuleCapturedEOL,n.endRule,r,ns.fromExtension(r,n.contentNameScopesList))}},_1=class{balancedBracketScopes;unbalancedBracketScopes;allowAny=!1;constructor(t,e){this.balancedBracketScopes=t.flatMap(n=>n==="*"?(this.allowAny=!0,[]):Po(n,Oo).map(r=>r.matcher)),this.unbalancedBracketScopes=e.flatMap(n=>Po(n,Oo).map(r=>r.matcher))}get matchesAlways(){return this.allowAny&&this.unbalancedBracketScopes.length===0}get matchesNever(){return this.balancedBracketScopes.length===0&&!this.allowAny}match(t){for(const e of this.unbalancedBracketScopes)if(e(t))return!1;for(const e of this.balancedBracketScopes)if(e(t))return!0;return this.allowAny}},b1=class{constructor(t,e,n,r){this.balancedBracketSelectors=r,this._emitBinaryTokens=t,this._tokenTypeOverrides=n,this._lineText=null,this._tokens=[],this._binaryTokens=[],this._lastTokenEndIndex=0}_emitBinaryTokens;_lineText;_tokens;_binaryTokens;_lastTokenEndIndex;_tokenTypeOverrides;produce(t,e){this.produceFromScopes(t.contentNameScopesList,e)}produceFromScopes(t,e){if(this._lastTokenEndIndex>=e)return;if(this._emitBinaryTokens){let r=t?.tokenAttributes??0,i=!1;if(this.balancedBracketSelectors?.matchesAlways&&(i=!0),this._tokenTypeOverrides.length>0||this.balancedBracketSelectors&&!this.balancedBracketSelectors.matchesAlways&&!this.balancedBracketSelectors.matchesNever){const s=t?.getScopeNames()??[];for(const o of this._tokenTypeOverrides)o.matcher(s)&&(r=yi.set(r,0,o.type,null,-1,0,0));this.balancedBracketSelectors&&(i=this.balancedBracketSelectors.match(s))}if(i&&(r=yi.set(r,0,8,i,-1,0,0)),this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-1]===r){this._lastTokenEndIndex=e;return}this._binaryTokens.push(this._lastTokenEndIndex),this._binaryTokens.push(r),this._lastTokenEndIndex=e;return}const n=t?.getScopeNames()??[];this._tokens.push({startIndex:this._lastTokenEndIndex,endIndex:e,scopes:n}),this._lastTokenEndIndex=e}getResult(t,e){return this._tokens.length>0&&this._tokens[this._tokens.length-1].startIndex===e-1&&this._tokens.pop(),this._tokens.length===0&&(this._lastTokenEndIndex=-1,this.produce(t,e),this._tokens[this._tokens.length-1].startIndex=0),this._tokens}getBinaryResult(t,e){this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-2]===e-1&&(this._binaryTokens.pop(),this._binaryTokens.pop()),this._binaryTokens.length===0&&(this._lastTokenEndIndex=-1,this.produce(t,e),this._binaryTokens[this._binaryTokens.length-2]=0);const n=new Uint32Array(this._binaryTokens.length);for(let r=0,i=this._binaryTokens.length;r<i;r++)n[r]=this._binaryTokens[r];return n}},w1=class{constructor(t,e){this._onigLib=e,this._theme=t}_grammars=new Map;_rawGrammars=new Map;_injectionGrammars=new Map;_theme;dispose(){for(const t of this._grammars.values())t.dispose()}setTheme(t){this._theme=t}getColorMap(){return this._theme.getColorMap()}addGrammar(t,e){this._rawGrammars.set(t.scopeName,t),e&&this._injectionGrammars.set(t.scopeName,e)}lookup(t){return this._rawGrammars.get(t)}injections(t){return this._injectionGrammars.get(t)}getDefaults(){return this._theme.getDefaults()}themeMatch(t){return this._theme.match(t)}grammarForScopeName(t,e,n,r,i){if(!this._grammars.has(t)){let s=this._rawGrammars.get(t);if(!s)return null;this._grammars.set(t,m1(t,s,e,n,r,i,this,this._onigLib))}return this._grammars.get(t)}},E1=class{_options;_syncRegistry;_ensureGrammarCache;constructor(e){this._options=e,this._syncRegistry=new w1(Do.createFromRawTheme(e.theme,e.colorMap),e.onigLib),this._ensureGrammarCache=new Map}dispose(){this._syncRegistry.dispose()}setTheme(e,n){this._syncRegistry.setTheme(Do.createFromRawTheme(e,n))}getColorMap(){return this._syncRegistry.getColorMap()}loadGrammarWithEmbeddedLanguages(e,n,r){return this.loadGrammarWithConfiguration(e,n,{embeddedLanguages:r})}loadGrammarWithConfiguration(e,n,r){return this._loadGrammar(e,n,r.embeddedLanguages,r.tokenTypes,new _1(r.balancedBracketSelectors||[],r.unbalancedBracketSelectors||[]))}loadGrammar(e){return this._loadGrammar(e,0,null,null,null)}_loadGrammar(e,n,r,i,s){const o=new Yw(this._syncRegistry,e);for(;o.Q.length>0;)o.Q.map(a=>this._loadSingleGrammar(a.scopeName)),o.processQueue();return this._grammarForScopeName(e,n,r,i,s)}_loadSingleGrammar(e){this._ensureGrammarCache.has(e)||(this._doLoadSingleGrammar(e),this._ensureGrammarCache.set(e,!0))}_doLoadSingleGrammar(e){const n=this._options.loadGrammar(e);if(n){const r=typeof this._options.getInjections=="function"?this._options.getInjections(e):void 0;this._syncRegistry.addGrammar(n,r)}}addGrammar(e,n=[],r=0,i=null){return this._syncRegistry.addGrammar(e,n),this._grammarForScopeName(e.scopeName,r,i)}_grammarForScopeName(e,n=0,r=null,i=null,s=null){return this._syncRegistry.grammarForScopeName(e,n,r,i,s)}},ac=oc.NULL;const k1=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"];class Rs{constructor(e,n,r){this.normal=n,this.property=e,r&&(this.space=r)}}Rs.prototype.normal={};Rs.prototype.property={};Rs.prototype.space=void 0;function jp(t,e){const n={},r={};for(const i of t)Object.assign(n,i.property),Object.assign(r,i.normal);return new Rs(n,r,e)}function lc(t){return t.toLowerCase()}class Ot{constructor(e,n){this.attribute=n,this.property=e}}Ot.prototype.attribute="";Ot.prototype.booleanish=!1;Ot.prototype.boolean=!1;Ot.prototype.commaOrSpaceSeparated=!1;Ot.prototype.commaSeparated=!1;Ot.prototype.defined=!1;Ot.prototype.mustUseProperty=!1;Ot.prototype.number=!1;Ot.prototype.overloadedBoolean=!1;Ot.prototype.property="";Ot.prototype.spaceSeparated=!1;Ot.prototype.space=void 0;let A1=0;const Pe=zr(),nt=zr(),cc=zr(),ue=zr(),He=zr(),oi=zr(),zt=zr();function zr(){return 2**++A1}const dc=Object.freeze(Object.defineProperty({__proto__:null,boolean:Pe,booleanish:nt,commaOrSpaceSeparated:zt,commaSeparated:oi,number:ue,overloadedBoolean:cc,spaceSeparated:He},Symbol.toStringTag,{value:"Module"})),tl=Object.keys(dc);class dd extends Ot{constructor(e,n,r,i){let s=-1;if(super(e,n),oh(this,"space",i),typeof r=="number")for(;++s<tl.length;){const o=tl[s];oh(this,tl[s],(r&dc[o])===dc[o])}}}dd.prototype.defined=!0;function oh(t,e,n){n&&(t[e]=n)}function Ai(t){const e={},n={};for(const[r,i]of Object.entries(t.properties)){const s=new dd(r,t.transform(t.attributes||{},r),i,t.space);t.mustUseProperty&&t.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),e[r]=s,n[lc(r)]=r,n[lc(s.attribute)]=r}return new Rs(e,n,t.space)}const Hp=Ai({properties:{ariaActiveDescendant:null,ariaAtomic:nt,ariaAutoComplete:null,ariaBusy:nt,ariaChecked:nt,ariaColCount:ue,ariaColIndex:ue,ariaColSpan:ue,ariaControls:He,ariaCurrent:null,ariaDescribedBy:He,ariaDetails:null,ariaDisabled:nt,ariaDropEffect:He,ariaErrorMessage:null,ariaExpanded:nt,ariaFlowTo:He,ariaGrabbed:nt,ariaHasPopup:null,ariaHidden:nt,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:He,ariaLevel:ue,ariaLive:null,ariaModal:nt,ariaMultiLine:nt,ariaMultiSelectable:nt,ariaOrientation:null,ariaOwns:He,ariaPlaceholder:null,ariaPosInSet:ue,ariaPressed:nt,ariaReadOnly:nt,ariaRelevant:null,ariaRequired:nt,ariaRoleDescription:He,ariaRowCount:ue,ariaRowIndex:ue,ariaRowSpan:ue,ariaSelected:nt,ariaSetSize:ue,ariaSort:null,ariaValueMax:ue,ariaValueMin:ue,ariaValueNow:ue,ariaValueText:null,role:null},transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function Wp(t,e){return e in t?t[e]:e}function qp(t,e){return Wp(t,e.toLowerCase())}const x1=Ai({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:oi,acceptCharset:He,accessKey:He,action:null,allow:null,allowFullScreen:Pe,allowPaymentRequest:Pe,allowUserMedia:Pe,alt:null,as:null,async:Pe,autoCapitalize:null,autoComplete:He,autoFocus:Pe,autoPlay:Pe,blocking:He,capture:null,charSet:null,checked:Pe,cite:null,className:He,cols:ue,colSpan:null,content:null,contentEditable:nt,controls:Pe,controlsList:He,coords:ue|oi,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Pe,defer:Pe,dir:null,dirName:null,disabled:Pe,download:cc,draggable:nt,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Pe,formTarget:null,headers:He,height:ue,hidden:cc,high:ue,href:null,hrefLang:null,htmlFor:He,httpEquiv:He,id:null,imageSizes:null,imageSrcSet:null,inert:Pe,inputMode:null,integrity:null,is:null,isMap:Pe,itemId:null,itemProp:He,itemRef:He,itemScope:Pe,itemType:He,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Pe,low:ue,manifest:null,max:null,maxLength:ue,media:null,method:null,min:null,minLength:ue,multiple:Pe,muted:Pe,name:null,nonce:null,noModule:Pe,noValidate:Pe,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Pe,optimum:ue,pattern:null,ping:He,placeholder:null,playsInline:Pe,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Pe,referrerPolicy:null,rel:He,required:Pe,reversed:Pe,rows:ue,rowSpan:ue,sandbox:He,scope:null,scoped:Pe,seamless:Pe,selected:Pe,shadowRootClonable:Pe,shadowRootDelegatesFocus:Pe,shadowRootMode:null,shape:null,size:ue,sizes:null,slot:null,span:ue,spellCheck:nt,src:null,srcDoc:null,srcLang:null,srcSet:null,start:ue,step:null,style:null,tabIndex:ue,target:null,title:null,translate:null,type:null,typeMustMatch:Pe,useMap:null,value:nt,width:ue,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:He,axis:null,background:null,bgColor:null,border:ue,borderColor:null,bottomMargin:ue,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Pe,declare:Pe,event:null,face:null,frame:null,frameBorder:null,hSpace:ue,leftMargin:ue,link:null,longDesc:null,lowSrc:null,marginHeight:ue,marginWidth:ue,noResize:Pe,noHref:Pe,noShade:Pe,noWrap:Pe,object:null,profile:null,prompt:null,rev:null,rightMargin:ue,rules:null,scheme:null,scrolling:nt,standby:null,summary:null,text:null,topMargin:ue,valueType:null,version:null,vAlign:null,vLink:null,vSpace:ue,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Pe,disableRemotePlayback:Pe,prefix:null,property:null,results:ue,security:null,unselectable:null},space:"html",transform:qp}),C1=Ai({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:zt,accentHeight:ue,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:ue,amplitude:ue,arabicForm:null,ascent:ue,attributeName:null,attributeType:null,azimuth:ue,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:ue,by:null,calcMode:null,capHeight:ue,className:He,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:ue,diffuseConstant:ue,direction:null,display:null,dur:null,divisor:ue,dominantBaseline:null,download:Pe,dx:null,dy:null,edgeMode:null,editable:null,elevation:ue,enableBackground:null,end:null,event:null,exponent:ue,externalResourcesRequired:null,fill:null,fillOpacity:ue,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:oi,g2:oi,glyphName:oi,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:ue,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:ue,horizOriginX:ue,horizOriginY:ue,id:null,ideographic:ue,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:ue,k:ue,k1:ue,k2:ue,k3:ue,k4:ue,kernelMatrix:zt,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:ue,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:ue,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:ue,overlineThickness:ue,paintOrder:null,panose1:null,path:null,pathLength:ue,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:He,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:ue,pointsAtY:ue,pointsAtZ:ue,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:zt,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:zt,rev:zt,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:zt,requiredFeatures:zt,requiredFonts:zt,requiredFormats:zt,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:ue,specularExponent:ue,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:ue,strikethroughThickness:ue,string:null,stroke:null,strokeDashArray:zt,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:ue,strokeOpacity:ue,strokeWidth:null,style:null,surfaceScale:ue,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:zt,tabIndex:ue,tableValues:null,target:null,targetX:ue,targetY:ue,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:zt,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:ue,underlineThickness:ue,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:ue,values:null,vAlphabetic:ue,vMathematical:ue,vectorEffect:null,vHanging:ue,vIdeographic:ue,version:null,vertAdvY:ue,vertOriginX:ue,vertOriginY:ue,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:ue,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:Wp}),Kp=Ai({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()}}),Xp=Ai({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:qp}),Zp=Ai({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()}}),S1=/[A-Z]/g,ah=/-[a-z]/g,T1=/^data[-\w.:]+$/i;function N1(t,e){const n=lc(e);let r=e,i=Ot;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&T1.test(e)){if(e.charAt(4)==="-"){const s=e.slice(5).replace(ah,L1);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=e.slice(4);if(!ah.test(s)){let o=s.replace(S1,R1);o.charAt(0)!=="-"&&(o="-"+o),e="data"+o}}i=dd}return new i(r,e)}function R1(t){return"-"+t.toLowerCase()}function L1(t){return t.charAt(1).toUpperCase()}const I1=jp([Hp,x1,Kp,Xp,Zp],"html"),Yp=jp([Hp,C1,Kp,Xp,Zp],"svg"),lh={}.hasOwnProperty;function D1(t,e){const n=e||{};function r(i,...s){let o=r.invalid;const a=r.handlers;if(i&&lh.call(i,t)){const l=String(i[t]);o=lh.call(a,l)?a[l]:r.unknown}if(o)return o.call(this,i,...s)}return r.handlers=n.handlers||{},r.invalid=n.invalid,r.unknown=n.unknown,r}const P1=/["&'<>`]/g,G1=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,M1=/[\x01-\t\v\f\x0E-\x1F\x7F\x81\x8D\x8F\x90\x9D\xA0-\uFFFF]/g,O1=/[|\\{}()[\]^$+*?.]/g,ch=new WeakMap;function F1(t,e){if(t=t.replace(e.subset?$1(e.subset):P1,r),e.subset||e.escapeOnly)return t;return t.replace(G1,n).replace(M1,r);function n(i,s,o){return e.format((i.charCodeAt(0)-55296)*1024+i.charCodeAt(1)-56320+65536,o.charCodeAt(s+2),e)}function r(i,s,o){return e.format(i.charCodeAt(0),o.charCodeAt(s+1),e)}}function $1(t){let e=ch.get(t);return e||(e=z1(t),ch.set(t,e)),e}function z1(t){const e=[];let n=-1;for(;++n<t.length;)e.push(t[n].replace(O1,"\\$&"));return new RegExp("(?:"+e.join("|")+")","g")}const B1=/[\dA-Fa-f]/;function V1(t,e,n){const r="&#x"+t.toString(16).toUpperCase();return n&&e&&!B1.test(String.fromCharCode(e))?r:r+";"}const U1=/\d/;function j1(t,e,n){const r="&#"+String(t);return n&&e&&!U1.test(String.fromCharCode(e))?r:r+";"}const H1=["AElig","AMP","Aacute","Acirc","Agrave","Aring","Atilde","Auml","COPY","Ccedil","ETH","Eacute","Ecirc","Egrave","Euml","GT","Iacute","Icirc","Igrave","Iuml","LT","Ntilde","Oacute","Ocirc","Ograve","Oslash","Otilde","Ouml","QUOT","REG","THORN","Uacute","Ucirc","Ugrave","Uuml","Yacute","aacute","acirc","acute","aelig","agrave","amp","aring","atilde","auml","brvbar","ccedil","cedil","cent","copy","curren","deg","divide","eacute","ecirc","egrave","eth","euml","frac12","frac14","frac34","gt","iacute","icirc","iexcl","igrave","iquest","iuml","laquo","lt","macr","micro","middot","nbsp","not","ntilde","oacute","ocirc","ograve","ordf","ordm","oslash","otilde","ouml","para","plusmn","pound","quot","raquo","reg","sect","shy","sup1","sup2","sup3","szlig","thorn","times","uacute","ucirc","ugrave","uml","uuml","yacute","yen","yuml"],nl={nbsp:"",iexcl:"",cent:"",pound:"",curren:"",yen:"",brvbar:"",sect:"",uml:"",copy:"",ordf:"",laquo:"",not:"",shy:"",reg:"",macr:"",deg:"",plusmn:"",sup2:"",sup3:"",acute:"",micro:"",para:"",middot:"",cedil:"",sup1:"",ordm:"",raquo:"",frac14:"",frac12:"",frac34:"",iquest:"",Agrave:"",Aacute:"",Acirc:"",Atilde:"",Auml:"",Aring:"",AElig:"",Ccedil:"",Egrave:"",Eacute:"",Ecirc:"",Euml:"",Igrave:"",Iacute:"",Icirc:"",Iuml:"",ETH:"",Ntilde:"",Ograve:"",Oacute:"",Ocirc:"",Otilde:"",Ouml:"",times:"",Oslash:"",Ugrave:"",Uacute:"",Ucirc:"",Uuml:"",Yacute:"",THORN:"",szlig:"",agrave:"",aacute:"",acirc:"",atilde:"",auml:"",aring:"",aelig:"",ccedil:"",egrave:"",eacute:"",ecirc:"",euml:"",igrave:"",iacute:"",icirc:"",iuml:"",eth:"",ntilde:"",ograve:"",oacute:"",ocirc:"",otilde:"",ouml:"",divide:"",oslash:"",ugrave:"",uacute:"",ucirc:"",uuml:"",yacute:"",thorn:"",yuml:"",fnof:"",Alpha:"",Beta:"",Gamma:"",Delta:"",Epsilon:"",Zeta:"",Eta:"",Theta:"",Iota:"",Kappa:"",Lambda:"",Mu:"",Nu:"",Xi:"",Omicron:"",Pi:"",Rho:"",Sigma:"",Tau:"",Upsilon:"",Phi:"",Chi:"",Psi:"",Omega:"",alpha:"",beta:"",gamma:"",delta:"",epsilon:"",zeta:"",eta:"",theta:"",iota:"",kappa:"",lambda:"",mu:"",nu:"",xi:"",omicron:"",pi:"",rho:"",sigmaf:"",sigma:"",tau:"",upsilon:"",phi:"",chi:"",psi:"",omega:"",thetasym:"",upsih:"",piv:"",bull:"",hellip:"",prime:"",Prime:"",oline:"",frasl:"",weierp:"",image:"",real:"",trade:"",alefsym:"",larr:"",uarr:"",rarr:"",darr:"",harr:"",crarr:"",lArr:"",uArr:"",rArr:"",dArr:"",hArr:"",forall:"",part:"",exist:"",empty:"",nabla:"",isin:"",notin:"",ni:"",prod:"",sum:"",minus:"",lowast:"",radic:"",prop:"",infin:"",ang:"",and:"",or:"",cap:"",cup:"",int:"",there4:"",sim:"",cong:"",asymp:"",ne:"",equiv:"",le:"",ge:"",sub:"",sup:"",nsub:"",sube:"",supe:"",oplus:"",otimes:"",perp:"",sdot:"",lceil:"",rceil:"",lfloor:"",rfloor:"",lang:"",rang:"",loz:"",spades:"",clubs:"",hearts:"",diams:"",quot:'"',amp:"&",lt:"<",gt:">",OElig:"",oelig:"",Scaron:"",scaron:"",Yuml:"",circ:"",tilde:"",ensp:"",emsp:"",thinsp:"",zwnj:"",zwj:"",lrm:"",rlm:"",ndash:"",mdash:"",lsquo:"",rsquo:"",sbquo:"",ldquo:"",rdquo:"",bdquo:"",dagger:"",Dagger:"",permil:"",lsaquo:"",rsaquo:"",euro:""},W1=["cent","copy","divide","gt","lt","not","para","times"],Jp={}.hasOwnProperty,uc={};let js;for(js in nl)Jp.call(nl,js)&&(uc[nl[js]]=js);const q1=/[^\dA-Za-z]/;function K1(t,e,n,r){const i=String.fromCharCode(t);if(Jp.call(uc,i)){const s=uc[i],o="&"+s;return n&&H1.includes(s)&&!W1.includes(s)&&(!r||e&&e!==61&&q1.test(String.fromCharCode(e)))?o:o+";"}return""}function X1(t,e,n){let r=V1(t,e,n.omitOptionalSemicolons),i;if((n.useNamedReferences||n.useShortestReferences)&&(i=K1(t,e,n.omitOptionalSemicolons,n.attribute)),(n.useShortestReferences||!i)&&n.useShortestReferences){const s=j1(t,e,n.omitOptionalSemicolons);s.length<r.length&&(r=s)}return i&&(!n.useShortestReferences||i.length<r.length)?i:r}function ai(t,e){return F1(t,Object.assign({format:X1},e))}const Z1=/^>|^->|<!--|-->|--!>|<!-$/g,Y1=[">"],J1=["<",">"];function Q1(t,e,n,r){return r.settings.bogusComments?"<?"+ai(t.value,Object.assign({},r.settings.characterReferences,{subset:Y1}))+">":"<!--"+t.value.replace(Z1,i)+"-->";function i(s){return ai(s,Object.assign({},r.settings.characterReferences,{subset:J1}))}}function eE(t,e,n,r){return"<!"+(r.settings.upperDoctype?"DOCTYPE":"doctype")+(r.settings.tightDoctype?"":" ")+"html>"}function dh(t,e){const n=String(t);if(typeof e!="string")throw new TypeError("Expected character");let r=0,i=n.indexOf(e);for(;i!==-1;)r++,i=n.indexOf(e,i+e.length);return r}function tE(t,e){const n=e||{};return(t[t.length-1]===""?[...t,""]:t).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}function nE(t){return t.join(" ").trim()}const rE=/[ \t\n\f\r]/g;function ud(t){return typeof t=="object"?t.type==="text"?uh(t.value):!1:uh(t)}function uh(t){return t.replace(rE,"")===""}const lt=em(1),Qp=em(-1),iE=[];function em(t){return e;function e(n,r,i){const s=n?n.children:iE;let o=(r||0)+t,a=s[o];if(!i)for(;a&&ud(a);)o+=t,a=s[o];return a}}const sE={}.hasOwnProperty;function tm(t){return e;function e(n,r,i){return sE.call(t,n.tagName)&&t[n.tagName](n,r,i)}}const hd=tm({body:aE,caption:rl,colgroup:rl,dd:uE,dt:dE,head:rl,html:oE,li:cE,optgroup:hE,option:fE,p:lE,rp:hh,rt:hh,tbody:pE,td:fh,tfoot:mE,th:fh,thead:gE,tr:yE});function rl(t,e,n){const r=lt(n,e,!0);return!r||r.type!=="comment"&&!(r.type==="text"&&ud(r.value.charAt(0)))}function oE(t,e,n){const r=lt(n,e);return!r||r.type!=="comment"}function aE(t,e,n){const r=lt(n,e);return!r||r.type!=="comment"}function lE(t,e,n){const r=lt(n,e);return r?r.type==="element"&&(r.tagName==="address"||r.tagName==="article"||r.tagName==="aside"||r.tagName==="blockquote"||r.tagName==="details"||r.tagName==="div"||r.tagName==="dl"||r.tagName==="fieldset"||r.tagName==="figcaption"||r.tagName==="figure"||r.tagName==="footer"||r.tagName==="form"||r.tagName==="h1"||r.tagName==="h2"||r.tagName==="h3"||r.tagName==="h4"||r.tagName==="h5"||r.tagName==="h6"||r.tagName==="header"||r.tagName==="hgroup"||r.tagName==="hr"||r.tagName==="main"||r.tagName==="menu"||r.tagName==="nav"||r.tagName==="ol"||r.tagName==="p"||r.tagName==="pre"||r.tagName==="section"||r.tagName==="table"||r.tagName==="ul"):!n||!(n.type==="element"&&(n.tagName==="a"||n.tagName==="audio"||n.tagName==="del"||n.tagName==="ins"||n.tagName==="map"||n.tagName==="noscript"||n.tagName==="video"))}function cE(t,e,n){const r=lt(n,e);return!r||r.type==="element"&&r.tagName==="li"}function dE(t,e,n){const r=lt(n,e);return!!(r&&r.type==="element"&&(r.tagName==="dt"||r.tagName==="dd"))}function uE(t,e,n){const r=lt(n,e);return!r||r.type==="element"&&(r.tagName==="dt"||r.tagName==="dd")}function hh(t,e,n){const r=lt(n,e);return!r||r.type==="element"&&(r.tagName==="rp"||r.tagName==="rt")}function hE(t,e,n){const r=lt(n,e);return!r||r.type==="element"&&r.tagName==="optgroup"}function fE(t,e,n){const r=lt(n,e);return!r||r.type==="element"&&(r.tagName==="option"||r.tagName==="optgroup")}function gE(t,e,n){const r=lt(n,e);return!!(r&&r.type==="element"&&(r.tagName==="tbody"||r.tagName==="tfoot"))}function pE(t,e,n){const r=lt(n,e);return!r||r.type==="element"&&(r.tagName==="tbody"||r.tagName==="tfoot")}function mE(t,e,n){return!lt(n,e)}function yE(t,e,n){const r=lt(n,e);return!r||r.type==="element"&&r.tagName==="tr"}function fh(t,e,n){const r=lt(n,e);return!r||r.type==="element"&&(r.tagName==="td"||r.tagName==="th")}const vE=tm({body:wE,colgroup:EE,head:bE,html:_E,tbody:kE});function _E(t){const e=lt(t,-1);return!e||e.type!=="comment"}function bE(t){const e=new Set;for(const r of t.children)if(r.type==="element"&&(r.tagName==="base"||r.tagName==="title")){if(e.has(r.tagName))return!1;e.add(r.tagName)}const n=t.children[0];return!n||n.type==="element"}function wE(t){const e=lt(t,-1,!0);return!e||e.type!=="comment"&&!(e.type==="text"&&ud(e.value.charAt(0)))&&!(e.type==="element"&&(e.tagName==="meta"||e.tagName==="link"||e.tagName==="script"||e.tagName==="style"||e.tagName==="template"))}function EE(t,e,n){const r=Qp(n,e),i=lt(t,-1,!0);return n&&r&&r.type==="element"&&r.tagName==="colgroup"&&hd(r,n.children.indexOf(r),n)?!1:!!(i&&i.type==="element"&&i.tagName==="col")}function kE(t,e,n){const r=Qp(n,e),i=lt(t,-1);return n&&r&&r.type==="element"&&(r.tagName==="thead"||r.tagName==="tbody")&&hd(r,n.children.indexOf(r),n)?!1:!!(i&&i.type==="element"&&i.tagName==="tr")}const Hs={name:[[`	
\f\r &/=>`.split(""),`	
\f\r "&'/=>\``.split("")],[`\0	
\f\r "&'/<=>`.split(""),`\0	
\f\r "&'/<=>\``.split("")]],unquoted:[[`	
\f\r &>`.split(""),`\0	
\f\r "&'<=>\``.split("")],[`\0	
\f\r "&'<=>\``.split(""),`\0	
\f\r "&'<=>\``.split("")]],single:[["&'".split(""),"\"&'`".split("")],["\0&'".split(""),"\0\"&'`".split("")]],double:[['"&'.split(""),"\"&'`".split("")],['\0"&'.split(""),"\0\"&'`".split("")]]};function AE(t,e,n,r){const i=r.schema,s=i.space==="svg"?!1:r.settings.omitOptionalTags;let o=i.space==="svg"?r.settings.closeEmptyElements:r.settings.voids.includes(t.tagName.toLowerCase());const a=[];let l;i.space==="html"&&t.tagName==="svg"&&(r.schema=Yp);const c=xE(r,t.properties),d=r.all(i.space==="html"&&t.tagName==="template"?t.content:t);return r.schema=i,d&&(o=!1),(c||!s||!vE(t,e,n))&&(a.push("<",t.tagName,c?" "+c:""),o&&(i.space==="svg"||r.settings.closeSelfClosing)&&(l=c.charAt(c.length-1),(!r.settings.tightSelfClosing||l==="/"||l&&l!=='"'&&l!=="'")&&a.push(" "),a.push("/")),a.push(">")),a.push(d),!o&&(!s||!hd(t,e,n))&&a.push("</"+t.tagName+">"),a.join("")}function xE(t,e){const n=[];let r=-1,i;if(e){for(i in e)if(e[i]!==null&&e[i]!==void 0){const s=CE(t,i,e[i]);s&&n.push(s)}}for(;++r<n.length;){const s=t.settings.tightAttributes?n[r].charAt(n[r].length-1):void 0;r!==n.length-1&&s!=='"'&&s!=="'"&&(n[r]+=" ")}return n.join("")}function CE(t,e,n){const r=N1(t.schema,e),i=t.settings.allowParseErrors&&t.schema.space==="html"?0:1,s=t.settings.allowDangerousCharacters?0:1;let o=t.quote,a;if(r.overloadedBoolean&&(n===r.attribute||n==="")?n=!0:(r.boolean||r.overloadedBoolean)&&(typeof n!="string"||n===r.attribute||n==="")&&(n=!!n),n==null||n===!1||typeof n=="number"&&Number.isNaN(n))return"";const l=ai(r.attribute,Object.assign({},t.settings.characterReferences,{subset:Hs.name[i][s]}));return n===!0||(n=Array.isArray(n)?(r.commaSeparated?tE:nE)(n,{padLeft:!t.settings.tightCommaSeparatedLists}):String(n),t.settings.collapseEmptyAttributes&&!n)?l:(t.settings.preferUnquoted&&(a=ai(n,Object.assign({},t.settings.characterReferences,{attribute:!0,subset:Hs.unquoted[i][s]}))),a!==n&&(t.settings.quoteSmart&&dh(n,o)>dh(n,t.alternative)&&(o=t.alternative),a=o+ai(n,Object.assign({},t.settings.characterReferences,{subset:(o==="'"?Hs.single:Hs.double)[i][s],attribute:!0}))+o),l+(a&&"="+a))}const SE=["<","&"];function nm(t,e,n,r){return n&&n.type==="element"&&(n.tagName==="script"||n.tagName==="style")?t.value:ai(t.value,Object.assign({},r.settings.characterReferences,{subset:SE}))}function TE(t,e,n,r){return r.settings.allowDangerousHtml?t.value:nm(t,e,n,r)}function NE(t,e,n,r){return r.all(t)}const RE=D1("type",{invalid:LE,unknown:IE,handlers:{comment:Q1,doctype:eE,element:AE,raw:TE,root:NE,text:nm}});function LE(t){throw new Error("Expected node, not `"+t+"`")}function IE(t){const e=t;throw new Error("Cannot compile unknown node `"+e.type+"`")}const DE={},PE={},GE=[];function ME(t,e){const n=e||DE,r=n.quote||'"',i=r==='"'?"'":'"';if(r!=='"'&&r!=="'")throw new Error("Invalid quote `"+r+"`, expected `'` or `\"`");return{one:OE,all:FE,settings:{omitOptionalTags:n.omitOptionalTags||!1,allowParseErrors:n.allowParseErrors||!1,allowDangerousCharacters:n.allowDangerousCharacters||!1,quoteSmart:n.quoteSmart||!1,preferUnquoted:n.preferUnquoted||!1,tightAttributes:n.tightAttributes||!1,upperDoctype:n.upperDoctype||!1,tightDoctype:n.tightDoctype||!1,bogusComments:n.bogusComments||!1,tightCommaSeparatedLists:n.tightCommaSeparatedLists||!1,tightSelfClosing:n.tightSelfClosing||!1,collapseEmptyAttributes:n.collapseEmptyAttributes||!1,allowDangerousHtml:n.allowDangerousHtml||!1,voids:n.voids||k1,characterReferences:n.characterReferences||PE,closeSelfClosing:n.closeSelfClosing||!1,closeEmptyElements:n.closeEmptyElements||!1},schema:n.space==="svg"?Yp:I1,quote:r,alternative:i}.one(Array.isArray(t)?{type:"root",children:t}:t,void 0,void 0)}function OE(t,e,n){return RE(t,e,n,this)}function FE(t){const e=[],n=t&&t.children||GE;let r=-1;for(;++r<n.length;)e[r]=this.one(n[r],r,t);return e.join("")}function Fo(t,e){const n=typeof t=="string"?{}:{...t.colorReplacements},r=typeof t=="string"?t:t.name;for(const[i,s]of Object.entries(e?.colorReplacements||{}))typeof s=="string"?n[i]=s:i===r&&Object.assign(n,s);return n}function hr(t,e){return t&&(e?.[t?.toLowerCase()]||t)}function $E(t){return Array.isArray(t)?t:[t]}async function rm(t){return Promise.resolve(typeof t=="function"?t():t).then(e=>e.default||e)}function fd(t){return!t||["plaintext","txt","text","plain"].includes(t)}function im(t){return t==="ansi"||fd(t)}function gd(t){return t==="none"}function sm(t){return gd(t)}function om(t,e){if(!e)return t;t.properties||={},t.properties.class||=[],typeof t.properties.class=="string"&&(t.properties.class=t.properties.class.split(/\s+/g)),Array.isArray(t.properties.class)||(t.properties.class=[]);const n=Array.isArray(e)?e:e.split(/\s+/g);for(const r of n)r&&!t.properties.class.includes(r)&&t.properties.class.push(r);return t}function pa(t,e=!1){if(t.length===0)return[["",0]];const n=t.split(/(\r?\n)/g);let r=0;const i=[];for(let s=0;s<n.length;s+=2){const o=e?n[s]+(n[s+1]||""):n[s];i.push([o,r]),r+=n[s].length,r+=n[s+1]?.length||0}return i}function zE(t){const e=pa(t,!0).map(([i])=>i);function n(i){if(i===t.length)return{line:e.length-1,character:e[e.length-1].length};let s=i,o=0;for(const a of e){if(s<a.length)break;s-=a.length,o++}return{line:o,character:s}}function r(i,s){let o=0;for(let a=0;a<i;a++)o+=e[a].length;return o+=s,o}return{lines:e,indexToPos:n,posToIndex:r}}const pd="light-dark()",BE=["color","background-color"];function VE(t,e){let n=0;const r=[];for(const i of e)i>n&&r.push({...t,content:t.content.slice(n,i),offset:t.offset+n}),n=i;return n<t.content.length&&r.push({...t,content:t.content.slice(n),offset:t.offset+n}),r}function UE(t,e){const n=Array.from(e instanceof Set?e:new Set(e)).sort((r,i)=>r-i);return n.length?t.map(r=>r.flatMap(i=>{const s=n.filter(o=>i.offset<o&&o<i.offset+i.content.length).map(o=>o-i.offset).sort((o,a)=>o-a);return s.length?VE(i,s):i})):t}function jE(t,e,n,r,i="css-vars"){const s={content:t.content,explanation:t.explanation,offset:t.offset},o=e.map(d=>$o(t.variants[d])),a=new Set(o.flatMap(d=>Object.keys(d))),l={},c=(d,u)=>{const h=u==="color"?"":u==="background-color"?"-bg":`-${u}`;return n+e[d]+(u==="color"?"":h)};return o.forEach((d,u)=>{for(const h of a){const f=d[h]||"inherit";if(u===0&&r&&BE.includes(h))if(r===pd&&o.length>1){const p=e.findIndex(E=>E==="light"),y=e.findIndex(E=>E==="dark");if(p===-1||y===-1)throw new rt('When using `defaultColor: "light-dark()"`, you must provide both `light` and `dark` themes');const w=o[p][h]||"inherit",b=o[y][h]||"inherit";l[h]=`light-dark(${w}, ${b})`,i==="css-vars"&&(l[c(u,h)]=f)}else l[h]=f;else i==="css-vars"&&(l[c(u,h)]=f)}}),s.htmlStyle=l,s}function $o(t){const e={};if(t.color&&(e.color=t.color),t.bgColor&&(e["background-color"]=t.bgColor),t.fontStyle){t.fontStyle&kt.Italic&&(e["font-style"]="italic"),t.fontStyle&kt.Bold&&(e["font-weight"]="bold");const n=[];t.fontStyle&kt.Underline&&n.push("underline"),t.fontStyle&kt.Strikethrough&&n.push("line-through"),n.length&&(e["text-decoration"]=n.join(" "))}return e}function hc(t){return typeof t=="string"?t:Object.entries(t).map(([e,n])=>`${e}:${n}`).join(";")}const am=new WeakMap;function ma(t,e){am.set(t,e)}function ys(t){return am.get(t)}class xi{_stacks={};lang;get themes(){return Object.keys(this._stacks)}get theme(){return this.themes[0]}get _stack(){return this._stacks[this.theme]}static initial(e,n){return new xi(Object.fromEntries($E(n).map(r=>[r,ac])),e)}constructor(...e){if(e.length===2){const[n,r]=e;this.lang=r,this._stacks=n}else{const[n,r,i]=e;this.lang=r,this._stacks={[i]:n}}}getInternalStack(e=this.theme){return this._stacks[e]}getScopes(e=this.theme){return HE(this._stacks[e])}toJSON(){return{lang:this.lang,theme:this.theme,themes:this.themes,scopes:this.getScopes()}}}function HE(t){const e=[],n=new Set;function r(i){if(n.has(i))return;n.add(i);const s=i?.nameScopesList?.scopeName;s&&e.push(s),i.parent&&r(i.parent)}return r(t),e}function WE(t,e){if(!(t instanceof xi))throw new rt("Invalid grammar state");return t.getInternalStack(e)}function qE(){const t=new WeakMap;function e(n){if(!t.has(n.meta)){let r=function(o){if(typeof o=="number"){if(o<0||o>n.source.length)throw new rt(`Invalid decoration offset: ${o}. Code length: ${n.source.length}`);return{...i.indexToPos(o),offset:o}}else{const a=i.lines[o.line];if(a===void 0)throw new rt(`Invalid decoration position ${JSON.stringify(o)}. Lines length: ${i.lines.length}`);let l=o.character;if(l<0&&(l=a.length+l),l<0||l>a.length)throw new rt(`Invalid decoration position ${JSON.stringify(o)}. Line ${o.line} length: ${a.length}`);return{...o,character:l,offset:i.posToIndex(o.line,l)}}};const i=zE(n.source),s=(n.options.decorations||[]).map(o=>({...o,start:r(o.start),end:r(o.end)}));KE(s),t.set(n.meta,{decorations:s,converter:i,source:n.source})}return t.get(n.meta)}return{name:"shiki:decorations",tokens(n){if(!this.options.decorations?.length)return;const i=e(this).decorations.flatMap(o=>[o.start.offset,o.end.offset]);return UE(n,i)},code(n){if(!this.options.decorations?.length)return;const r=e(this),i=Array.from(n.children).filter(d=>d.type==="element"&&d.tagName==="span");if(i.length!==r.converter.lines.length)throw new rt(`Number of lines in code element (${i.length}) does not match the number of lines in the source (${r.converter.lines.length}). Failed to apply decorations.`);function s(d,u,h,f){const p=i[d];let y="",w=-1,b=-1;if(u===0&&(w=0),h===0&&(b=0),h===Number.POSITIVE_INFINITY&&(b=p.children.length),w===-1||b===-1)for(let k=0;k<p.children.length;k++)y+=lm(p.children[k]),w===-1&&y.length===u&&(w=k+1),b===-1&&y.length===h&&(b=k+1);if(w===-1)throw new rt(`Failed to find start index for decoration ${JSON.stringify(f.start)}`);if(b===-1)throw new rt(`Failed to find end index for decoration ${JSON.stringify(f.end)}`);const E=p.children.slice(w,b);if(!f.alwaysWrap&&E.length===p.children.length)a(p,f,"line");else if(!f.alwaysWrap&&E.length===1&&E[0].type==="element")a(E[0],f,"token");else{const k={type:"element",tagName:"span",properties:{},children:E};a(k,f,"wrapper"),p.children.splice(w,E.length,k)}}function o(d,u){i[d]=a(i[d],u,"line")}function a(d,u,h){const f=u.properties||{},p=u.transform||(y=>y);return d.tagName=u.tagName||"span",d.properties={...d.properties,...f,class:d.properties.class},u.properties?.class&&om(d,u.properties.class),d=p(d,h)||d,d}const l=[],c=r.decorations.sort((d,u)=>u.start.offset-d.start.offset||d.end.offset-u.end.offset);for(const d of c){const{start:u,end:h}=d;if(u.line===h.line)s(u.line,u.character,h.character,d);else if(u.line<h.line){s(u.line,u.character,Number.POSITIVE_INFINITY,d);for(let f=u.line+1;f<h.line;f++)l.unshift(()=>o(f,d));s(h.line,0,h.character,d)}}l.forEach(d=>d())}}}function KE(t){for(let e=0;e<t.length;e++){const n=t[e];if(n.start.offset>n.end.offset)throw new rt(`Invalid decoration range: ${JSON.stringify(n.start)} - ${JSON.stringify(n.end)}`);for(let r=e+1;r<t.length;r++){const i=t[r],s=n.start.offset<=i.start.offset&&i.start.offset<n.end.offset,o=n.start.offset<i.end.offset&&i.end.offset<=n.end.offset,a=i.start.offset<=n.start.offset&&n.start.offset<i.end.offset,l=i.start.offset<n.end.offset&&n.end.offset<=i.end.offset;if(s||o||a||l){if(s&&o||a&&l||a&&n.start.offset===n.end.offset||o&&i.start.offset===i.end.offset)continue;throw new rt(`Decorations ${JSON.stringify(n.start)} and ${JSON.stringify(i.start)} intersect.`)}}}}function lm(t){return t.type==="text"?t.value:t.type==="element"?t.children.map(lm).join(""):""}const XE=[qE()];function zo(t){const e=ZE(t.transformers||[]);return[...e.pre,...e.normal,...e.post,...XE]}function ZE(t){const e=[],n=[],r=[];for(const i of t)switch(i.enforce){case"pre":e.push(i);break;case"post":n.push(i);break;default:r.push(i)}return{pre:e,post:n,normal:r}}var Nr=["black","red","green","yellow","blue","magenta","cyan","white","brightBlack","brightRed","brightGreen","brightYellow","brightBlue","brightMagenta","brightCyan","brightWhite"],il={1:"bold",2:"dim",3:"italic",4:"underline",7:"reverse",8:"hidden",9:"strikethrough"};function YE(t,e){const n=t.indexOf("\x1B",e);if(n!==-1&&t[n+1]==="["){const r=t.indexOf("m",n);if(r!==-1)return{sequence:t.substring(n+2,r).split(";"),startPosition:n,position:r+1}}return{position:t.length}}function gh(t){const e=t.shift();if(e==="2"){const n=t.splice(0,3).map(r=>Number.parseInt(r));return n.length!==3||n.some(r=>Number.isNaN(r))?void 0:{type:"rgb",rgb:n}}else if(e==="5"){const n=t.shift();if(n)return{type:"table",index:Number(n)}}}function JE(t){const e=[];for(;t.length>0;){const n=t.shift();if(!n)continue;const r=Number.parseInt(n);if(!Number.isNaN(r))if(r===0)e.push({type:"resetAll"});else if(r<=9)il[r]&&e.push({type:"setDecoration",value:il[r]});else if(r<=29){const i=il[r-20];i&&(e.push({type:"resetDecoration",value:i}),i==="dim"&&e.push({type:"resetDecoration",value:"bold"}))}else if(r<=37)e.push({type:"setForegroundColor",value:{type:"named",name:Nr[r-30]}});else if(r===38){const i=gh(t);i&&e.push({type:"setForegroundColor",value:i})}else if(r===39)e.push({type:"resetForegroundColor"});else if(r<=47)e.push({type:"setBackgroundColor",value:{type:"named",name:Nr[r-40]}});else if(r===48){const i=gh(t);i&&e.push({type:"setBackgroundColor",value:i})}else r===49?e.push({type:"resetBackgroundColor"}):r===53?e.push({type:"setDecoration",value:"overline"}):r===55?e.push({type:"resetDecoration",value:"overline"}):r>=90&&r<=97?e.push({type:"setForegroundColor",value:{type:"named",name:Nr[r-90+8]}}):r>=100&&r<=107&&e.push({type:"setBackgroundColor",value:{type:"named",name:Nr[r-100+8]}})}return e}function QE(){let t=null,e=null,n=new Set;return{parse(r){const i=[];let s=0;do{const o=YE(r,s),a=o.sequence?r.substring(s,o.startPosition):r.substring(s);if(a.length>0&&i.push({value:a,foreground:t,background:e,decorations:new Set(n)}),o.sequence){const l=JE(o.sequence);for(const c of l)c.type==="resetAll"?(t=null,e=null,n.clear()):c.type==="resetForegroundColor"?t=null:c.type==="resetBackgroundColor"?e=null:c.type==="resetDecoration"&&n.delete(c.value);for(const c of l)c.type==="setForegroundColor"?t=c.value:c.type==="setBackgroundColor"?e=c.value:c.type==="setDecoration"&&n.add(c.value)}s=o.position}while(s<r.length);return i}}}var ek={black:"#000000",red:"#bb0000",green:"#00bb00",yellow:"#bbbb00",blue:"#0000bb",magenta:"#ff00ff",cyan:"#00bbbb",white:"#eeeeee",brightBlack:"#555555",brightRed:"#ff5555",brightGreen:"#00ff00",brightYellow:"#ffff55",brightBlue:"#5555ff",brightMagenta:"#ff55ff",brightCyan:"#55ffff",brightWhite:"#ffffff"};function tk(t=ek){function e(a){return t[a]}function n(a){return`#${a.map(l=>Math.max(0,Math.min(l,255)).toString(16).padStart(2,"0")).join("")}`}let r;function i(){if(r)return r;r=[];for(let c=0;c<Nr.length;c++)r.push(e(Nr[c]));let a=[0,95,135,175,215,255];for(let c=0;c<6;c++)for(let d=0;d<6;d++)for(let u=0;u<6;u++)r.push(n([a[c],a[d],a[u]]));let l=8;for(let c=0;c<24;c++,l+=10)r.push(n([l,l,l]));return r}function s(a){return i()[a]}function o(a){switch(a.type){case"named":return e(a.name);case"rgb":return n(a.rgb);case"table":return s(a.index)}}return{value:o}}const nk={black:"#000000",red:"#cd3131",green:"#0DBC79",yellow:"#E5E510",blue:"#2472C8",magenta:"#BC3FBC",cyan:"#11A8CD",white:"#E5E5E5",brightBlack:"#666666",brightRed:"#F14C4C",brightGreen:"#23D18B",brightYellow:"#F5F543",brightBlue:"#3B8EEA",brightMagenta:"#D670D6",brightCyan:"#29B8DB",brightWhite:"#FFFFFF"};function rk(t,e,n){const r=Fo(t,n),i=pa(e),s=Object.fromEntries(Nr.map(l=>{const c=`terminal.ansi${l[0].toUpperCase()}${l.substring(1)}`,d=t.colors?.[c];return[l,d||nk[l]]})),o=tk(s),a=QE();return i.map(l=>a.parse(l[0]).map(c=>{let d,u;c.decorations.has("reverse")?(d=c.background?o.value(c.background):t.bg,u=c.foreground?o.value(c.foreground):t.fg):(d=c.foreground?o.value(c.foreground):t.fg,u=c.background?o.value(c.background):void 0),d=hr(d,r),u=hr(u,r),c.decorations.has("dim")&&(d=ik(d));let h=kt.None;return c.decorations.has("bold")&&(h|=kt.Bold),c.decorations.has("italic")&&(h|=kt.Italic),c.decorations.has("underline")&&(h|=kt.Underline),c.decorations.has("strikethrough")&&(h|=kt.Strikethrough),{content:c.value,offset:l[1],color:d,bgColor:u,fontStyle:h}}))}function ik(t){const e=t.match(/#([0-9a-f]{3,8})/i);if(e){const r=e[1];if(r.length===8){const i=Math.round(Number.parseInt(r.slice(6,8),16)/2).toString(16).padStart(2,"0");return`#${r.slice(0,6)}${i}`}else{if(r.length===6)return`#${r}80`;if(r.length===4){const i=r[0],s=r[1],o=r[2],a=r[3],l=Math.round(Number.parseInt(`${a}${a}`,16)/2).toString(16).padStart(2,"0");return`#${i}${i}${s}${s}${o}${o}${l}`}else if(r.length===3){const i=r[0],s=r[1],o=r[2];return`#${i}${i}${s}${s}${o}${o}80`}}}const n=t.match(/var\((--[\w-]+-ansi-[\w-]+)\)/);return n?`var(${n[1]}-dim)`:t}function md(t,e,n={}){const{theme:r=t.getLoadedThemes()[0]}=n,i=t.resolveLangAlias(n.lang||"text");if(fd(i)||gd(r))return pa(e).map(l=>[{content:l[0],offset:l[1]}]);const{theme:s,colorMap:o}=t.setTheme(r);if(i==="ansi")return rk(s,e,n);const a=t.getLanguage(n.lang||"text");if(n.grammarState){if(n.grammarState.lang!==a.name)throw new rt(`Grammar state language "${n.grammarState.lang}" does not match highlight language "${a.name}"`);if(!n.grammarState.themes.includes(s.name))throw new rt(`Grammar state themes "${n.grammarState.themes}" do not contain highlight theme "${s.name}"`)}return ok(e,a,s,o,n)}function sk(...t){if(t.length===2)return ys(t[1]);const[e,n,r={}]=t,{lang:i="text",theme:s=e.getLoadedThemes()[0]}=r;if(fd(i)||gd(s))throw new rt("Plain language does not have grammar state");if(i==="ansi")throw new rt("ANSI language does not have grammar state");const{theme:o,colorMap:a}=e.setTheme(s),l=e.getLanguage(i);return new xi(Bo(n,l,o,a,r).stateStack,l.name,o.name)}function ok(t,e,n,r,i){const s=Bo(t,e,n,r,i),o=new xi(Bo(t,e,n,r,i).stateStack,e.name,n.name);return ma(s.tokens,o),s.tokens}function Bo(t,e,n,r,i){const s=Fo(n,i),{tokenizeMaxLineLength:o=0,tokenizeTimeLimit:a=500}=i,l=pa(t);let c=i.grammarState?WE(i.grammarState,n.name)??ac:i.grammarContextCode!=null?Bo(i.grammarContextCode,e,n,r,{...i,grammarState:void 0,grammarContextCode:void 0}).stateStack:ac,d=[];const u=[];for(let h=0,f=l.length;h<f;h++){const[p,y]=l[h];if(p===""){d=[],u.push([]);continue}if(o>0&&p.length>=o){d=[],u.push([{content:p,offset:y,color:"",fontStyle:0}]);continue}let w,b,E;i.includeExplanation&&(w=e.tokenizeLine(p,c,a),b=w.tokens,E=0);const k=e.tokenizeLine2(p,c,a),_=k.tokens.length/2;for(let x=0;x<_;x++){const T=k.tokens[2*x],L=x+1<_?k.tokens[2*x+2]:p.length;if(T===L)continue;const O=k.tokens[2*x+1],F=hr(r[yi.getForeground(O)],s),$=yi.getFontStyle(O),j={content:p.substring(T,L),offset:y+T,color:F,fontStyle:$};if(i.includeExplanation){const z=[];if(i.includeExplanation!=="scopeName")for(const A of n.settings){let D;switch(typeof A.scope){case"string":D=A.scope.split(/,/).map(C=>C.trim());break;case"object":D=A.scope;break;default:continue}z.push({settings:A,selectors:D.map(C=>C.split(/ /))})}j.explanation=[];let I=0;for(;T+I<L;){const A=b[E],D=p.substring(A.startIndex,A.endIndex);I+=D.length,j.explanation.push({content:D,scopes:i.includeExplanation==="scopeName"?ak(A.scopes):lk(z,A.scopes)}),E+=1}}d.push(j)}u.push(d),d=[],c=k.ruleStack}return{tokens:u,stateStack:c}}function ak(t){return t.map(e=>({scopeName:e}))}function lk(t,e){const n=[];for(let r=0,i=e.length;r<i;r++){const s=e[r];n[r]={scopeName:s,themeMatches:dk(t,s,e.slice(0,r))}}return n}function ph(t,e){return t===e||e.substring(0,t.length)===t&&e[t.length]==="."}function ck(t,e,n){if(!ph(t[t.length-1],e))return!1;let r=t.length-2,i=n.length-1;for(;r>=0&&i>=0;)ph(t[r],n[i])&&(r-=1),i-=1;return r===-1}function dk(t,e,n){const r=[];for(const{selectors:i,settings:s}of t)for(const o of i)if(ck(o,e,n)){r.push(s);break}return r}function cm(t,e,n){const r=Object.entries(n.themes).filter(l=>l[1]).map(l=>({color:l[0],theme:l[1]})),i=r.map(l=>{const c=md(t,e,{...n,theme:l.theme}),d=ys(c),u=typeof l.theme=="string"?l.theme:l.theme.name;return{tokens:c,state:d,theme:u}}),s=uk(...i.map(l=>l.tokens)),o=s[0].map((l,c)=>l.map((d,u)=>{const h={content:d.content,variants:{},offset:d.offset};return"includeExplanation"in n&&n.includeExplanation&&(h.explanation=d.explanation),s.forEach((f,p)=>{const{content:y,explanation:w,offset:b,...E}=f[c][u];h.variants[r[p].color]=E}),h})),a=i[0].state?new xi(Object.fromEntries(i.map(l=>[l.theme,l.state?.getInternalStack(l.theme)])),i[0].state.lang):void 0;return a&&ma(o,a),o}function uk(...t){const e=t.map(()=>[]),n=t.length;for(let r=0;r<t[0].length;r++){const i=t.map(l=>l[r]),s=e.map(()=>[]);e.forEach((l,c)=>l.push(s[c]));const o=i.map(()=>0),a=i.map(l=>l[0]);for(;a.every(l=>l);){const l=Math.min(...a.map(c=>c.content.length));for(let c=0;c<n;c++){const d=a[c];d.content.length===l?(s[c].push(d),o[c]+=1,a[c]=i[c][o[c]]):(s[c].push({...d,content:d.content.slice(0,l)}),a[c]={...d,content:d.content.slice(l),offset:d.offset+l})}}}return e}function Vo(t,e,n){let r,i,s,o,a,l;if("themes"in n){const{defaultColor:c="light",cssVariablePrefix:d="--shiki-",colorsRendering:u="css-vars"}=n,h=Object.entries(n.themes).filter(b=>b[1]).map(b=>({color:b[0],theme:b[1]})).sort((b,E)=>b.color===c?-1:E.color===c?1:0);if(h.length===0)throw new rt("`themes` option must not be empty");const f=cm(t,e,n);if(l=ys(f),c&&pd!==c&&!h.find(b=>b.color===c))throw new rt(`\`themes\` option must contain the defaultColor key \`${c}\``);const p=h.map(b=>t.getTheme(b.theme)),y=h.map(b=>b.color);s=f.map(b=>b.map(E=>jE(E,y,d,c,u))),l&&ma(s,l);const w=h.map(b=>Fo(b.theme,n));i=mh(h,p,w,d,c,"fg",u),r=mh(h,p,w,d,c,"bg",u),o=`shiki-themes ${p.map(b=>b.name).join(" ")}`,a=c?void 0:[i,r].join(";")}else if("theme"in n){const c=Fo(n.theme,n);s=md(t,e,n);const d=t.getTheme(n.theme);r=hr(d.bg,c),i=hr(d.fg,c),o=d.name,l=ys(s)}else throw new rt("Invalid options, either `theme` or `themes` must be provided");return{tokens:s,fg:i,bg:r,themeName:o,rootStyle:a,grammarState:l}}function mh(t,e,n,r,i,s,o){return t.map((a,l)=>{const c=hr(e[l][s],n[l])||"inherit",d=`${r+a.color}${s==="bg"?"-bg":""}:${c}`;if(l===0&&i){if(i===pd&&t.length>1){const u=t.findIndex(y=>y.color==="light"),h=t.findIndex(y=>y.color==="dark");if(u===-1||h===-1)throw new rt('When using `defaultColor: "light-dark()"`, you must provide both `light` and `dark` themes');const f=hr(e[u][s],n[u])||"inherit",p=hr(e[h][s],n[h])||"inherit";return`light-dark(${f}, ${p});${d}`}return c}return o==="css-vars"?d:null}).filter(a=>!!a).join(";")}function Uo(t,e,n,r={meta:{},options:n,codeToHast:(i,s)=>Uo(t,i,s),codeToTokens:(i,s)=>Vo(t,i,s)}){let i=e;for(const p of zo(n))i=p.preprocess?.call(r,i,n)||i;let{tokens:s,fg:o,bg:a,themeName:l,rootStyle:c,grammarState:d}=Vo(t,i,n);const{mergeWhitespaces:u=!0,mergeSameStyleTokens:h=!1}=n;u===!0?s=fk(s):u==="never"&&(s=gk(s)),h&&(s=pk(s));const f={...r,get source(){return i}};for(const p of zo(n))s=p.tokens?.call(f,s)||s;return hk(s,{...n,fg:o,bg:a,themeName:l,rootStyle:n.rootStyle===!1?!1:n.rootStyle??c},f,d)}function hk(t,e,n,r=ys(t)){const i=zo(e),s=[],o={type:"root",children:[]},{structure:a="classic",tabindex:l="0"}=e,c={class:`shiki ${e.themeName||""}`};e.rootStyle!==!1&&(e.rootStyle!=null?c.style=e.rootStyle:c.style=`background-color:${e.bg};color:${e.fg}`),l!==!1&&l!=null&&(c.tabindex=l.toString());for(const[y,w]of Object.entries(e.meta||{}))y.startsWith("_")||(c[y]=w);let d={type:"element",tagName:"pre",properties:c,children:[]},u={type:"element",tagName:"code",properties:{},children:s};const h=[],f={...n,structure:a,addClassToHast:om,get source(){return n.source},get tokens(){return t},get options(){return e},get root(){return o},get pre(){return d},get code(){return u},get lines(){return h}};if(t.forEach((y,w)=>{w&&(a==="inline"?o.children.push({type:"element",tagName:"br",properties:{},children:[]}):a==="classic"&&s.push({type:"text",value:`
`}));let b={type:"element",tagName:"span",properties:{class:"line"},children:[]},E=0;for(const k of y){let _={type:"element",tagName:"span",properties:{...k.htmlAttrs},children:[{type:"text",value:k.content}]};const x=hc(k.htmlStyle||$o(k));x&&(_.properties.style=x);for(const T of i)_=T?.span?.call(f,_,w+1,E,b,k)||_;a==="inline"?o.children.push(_):a==="classic"&&b.children.push(_),E+=k.content.length}if(a==="classic"){for(const k of i)b=k?.line?.call(f,b,w+1)||b;h.push(b),s.push(b)}else a==="inline"&&h.push(b)}),a==="classic"){for(const y of i)u=y?.code?.call(f,u)||u;d.children.push(u);for(const y of i)d=y?.pre?.call(f,d)||d;o.children.push(d)}else if(a==="inline"){const y=[];let w={type:"element",tagName:"span",properties:{class:"line"},children:[]};for(const k of o.children)k.type==="element"&&k.tagName==="br"?(y.push(w),w={type:"element",tagName:"span",properties:{class:"line"},children:[]}):(k.type==="element"||k.type==="text")&&w.children.push(k);y.push(w);let E={type:"element",tagName:"code",properties:{},children:y};for(const k of i)E=k?.code?.call(f,E)||E;o.children=[];for(let k=0;k<E.children.length;k++){k>0&&o.children.push({type:"element",tagName:"br",properties:{},children:[]});const _=E.children[k];_.type==="element"&&o.children.push(..._.children)}}let p=o;for(const y of i)p=y?.root?.call(f,p)||p;return r&&ma(p,r),p}function fk(t){return t.map(e=>{const n=[];let r="",i;return e.forEach((s,o)=>{const l=!(s.fontStyle&&(s.fontStyle&kt.Underline||s.fontStyle&kt.Strikethrough));l&&s.content.match(/^\s+$/)&&e[o+1]?(i===void 0&&(i=s.offset),r+=s.content):r?(l?n.push({...s,offset:i,content:r+s.content}):n.push({content:r,offset:i},s),i=void 0,r=""):n.push(s)}),n})}function gk(t){return t.map(e=>e.flatMap(n=>{if(n.content.match(/^\s+$/))return n;const r=n.content.match(/^(\s*)(.*?)(\s*)$/);if(!r)return n;const[,i,s,o]=r;if(!i&&!o)return n;const a=[{...n,offset:n.offset+i.length,content:s}];return i&&a.unshift({content:i,offset:n.offset}),o&&a.push({content:o,offset:n.offset+i.length+s.length}),a}))}function pk(t){return t.map(e=>{const n=[];for(const r of e){if(n.length===0){n.push({...r});continue}const i=n[n.length-1],s=hc(i.htmlStyle||$o(i)),o=hc(r.htmlStyle||$o(r)),a=i.fontStyle&&(i.fontStyle&kt.Underline||i.fontStyle&kt.Strikethrough),l=r.fontStyle&&(r.fontStyle&kt.Underline||r.fontStyle&kt.Strikethrough);!a&&!l&&s===o?i.content+=r.content:n.push({...r})}return n})}const mk=ME;function yk(t,e,n){const r={meta:{},options:n,codeToHast:(s,o)=>Uo(t,s,o),codeToTokens:(s,o)=>Vo(t,s,o)};let i=mk(Uo(t,e,n,r));for(const s of zo(n))i=s.postprocess?.call(r,i,n)||i;return i}const yh={light:"#333333",dark:"#bbbbbb"},vh={light:"#fffffe",dark:"#1e1e1e"},_h="__shiki_resolved";function yd(t){if(t?.[_h])return t;const e={...t};e.tokenColors&&!e.settings&&(e.settings=e.tokenColors,delete e.tokenColors),e.type||="dark",e.colorReplacements={...e.colorReplacements},e.settings||=[];let{bg:n,fg:r}=e;if(!n||!r){const a=e.settings?e.settings.find(l=>!l.name&&!l.scope):void 0;a?.settings?.foreground&&(r=a.settings.foreground),a?.settings?.background&&(n=a.settings.background),!r&&e?.colors?.["editor.foreground"]&&(r=e.colors["editor.foreground"]),!n&&e?.colors?.["editor.background"]&&(n=e.colors["editor.background"]),r||(r=e.type==="light"?yh.light:yh.dark),n||(n=e.type==="light"?vh.light:vh.dark),e.fg=r,e.bg=n}e.settings[0]&&e.settings[0].settings&&!e.settings[0].scope||e.settings.unshift({settings:{foreground:e.fg,background:e.bg}});let i=0;const s=new Map;function o(a){if(s.has(a))return s.get(a);i+=1;const l=`#${i.toString(16).padStart(8,"0").toLowerCase()}`;return e.colorReplacements?.[`#${l}`]?o(a):(s.set(a,l),l)}e.settings=e.settings.map(a=>{const l=a.settings?.foreground&&!a.settings.foreground.startsWith("#"),c=a.settings?.background&&!a.settings.background.startsWith("#");if(!l&&!c)return a;const d={...a,settings:{...a.settings}};if(l){const u=o(a.settings.foreground);e.colorReplacements[u]=a.settings.foreground,d.settings.foreground=u}if(c){const u=o(a.settings.background);e.colorReplacements[u]=a.settings.background,d.settings.background=u}return d});for(const a of Object.keys(e.colors||{}))if((a==="editor.foreground"||a==="editor.background"||a.startsWith("terminal.ansi"))&&!e.colors[a]?.startsWith("#")){const l=o(e.colors[a]);e.colorReplacements[l]=e.colors[a],e.colors[a]=l}return Object.defineProperty(e,_h,{enumerable:!1,writable:!1,value:!0}),e}async function dm(t){return Array.from(new Set((await Promise.all(t.filter(e=>!im(e)).map(async e=>await rm(e).then(n=>Array.isArray(n)?n:[n])))).flat()))}async function um(t){return(await Promise.all(t.map(async n=>sm(n)?null:yd(await rm(n))))).filter(n=>!!n)}let vk=3;function _k(t,e=3){e>vk||console.trace(`[SHIKI DEPRECATE]: ${t}`)}let Yr=class extends Error{constructor(e){super(e),this.name="ShikiError"}};function hm(t,e){if(!e)return t;if(e[t]){const n=new Set([t]);for(;e[t];){if(t=e[t],n.has(t))throw new Yr(`Circular alias \`${Array.from(n).join(" -> ")} -> ${t}\``);n.add(t)}}return t}class bk extends E1{constructor(e,n,r,i={}){super(e),this._resolver=e,this._themes=n,this._langs=r,this._alias=i,this._themes.map(s=>this.loadTheme(s)),this.loadLanguages(this._langs)}_resolvedThemes=new Map;_resolvedGrammars=new Map;_langMap=new Map;_langGraph=new Map;_textmateThemeCache=new WeakMap;_loadedThemesCache=null;_loadedLanguagesCache=null;getTheme(e){return typeof e=="string"?this._resolvedThemes.get(e):this.loadTheme(e)}loadTheme(e){const n=yd(e);return n.name&&(this._resolvedThemes.set(n.name,n),this._loadedThemesCache=null),n}getLoadedThemes(){return this._loadedThemesCache||(this._loadedThemesCache=[...this._resolvedThemes.keys()]),this._loadedThemesCache}setTheme(e){let n=this._textmateThemeCache.get(e);n||(n=Do.createFromRawTheme(e),this._textmateThemeCache.set(e,n)),this._syncRegistry.setTheme(n)}getGrammar(e){return e=hm(e,this._alias),this._resolvedGrammars.get(e)}loadLanguage(e){if(this.getGrammar(e.name))return;const n=new Set([...this._langMap.values()].filter(s=>s.embeddedLangsLazy?.includes(e.name)));this._resolver.addLanguage(e);const r={balancedBracketSelectors:e.balancedBracketSelectors||["*"],unbalancedBracketSelectors:e.unbalancedBracketSelectors||[]};this._syncRegistry._rawGrammars.set(e.scopeName,e);const i=this.loadGrammarWithConfiguration(e.scopeName,1,r);if(i.name=e.name,this._resolvedGrammars.set(e.name,i),e.aliases&&e.aliases.forEach(s=>{this._alias[s]=e.name}),this._loadedLanguagesCache=null,n.size)for(const s of n)this._resolvedGrammars.delete(s.name),this._loadedLanguagesCache=null,this._syncRegistry?._injectionGrammars?.delete(s.scopeName),this._syncRegistry?._grammars?.delete(s.scopeName),this.loadLanguage(this._langMap.get(s.name))}dispose(){super.dispose(),this._resolvedThemes.clear(),this._resolvedGrammars.clear(),this._langMap.clear(),this._langGraph.clear(),this._loadedThemesCache=null}loadLanguages(e){for(const i of e)this.resolveEmbeddedLanguages(i);const n=Array.from(this._langGraph.entries()),r=n.filter(([i,s])=>!s);if(r.length){const i=n.filter(([s,o])=>o?(o.embeddedLanguages||o.embeddedLangs)?.some(l=>r.map(([c])=>c).includes(l)):!1).filter(s=>!r.includes(s));throw new Yr(`Missing languages ${r.map(([s])=>`\`${s}\``).join(", ")}, required by ${i.map(([s])=>`\`${s}\``).join(", ")}`)}for(const[i,s]of n)this._resolver.addLanguage(s);for(const[i,s]of n)this.loadLanguage(s)}getLoadedLanguages(){return this._loadedLanguagesCache||(this._loadedLanguagesCache=[...new Set([...this._resolvedGrammars.keys(),...Object.keys(this._alias)])]),this._loadedLanguagesCache}resolveEmbeddedLanguages(e){this._langMap.set(e.name,e),this._langGraph.set(e.name,e);const n=e.embeddedLanguages??e.embeddedLangs;if(n)for(const r of n)this._langGraph.set(r,this._langMap.get(r))}}class wk{_langs=new Map;_scopeToLang=new Map;_injections=new Map;_onigLib;constructor(e,n){this._onigLib={createOnigScanner:r=>e.createScanner(r),createOnigString:r=>e.createString(r)},n.forEach(r=>this.addLanguage(r))}get onigLib(){return this._onigLib}getLangRegistration(e){return this._langs.get(e)}loadGrammar(e){return this._scopeToLang.get(e)}addLanguage(e){this._langs.set(e.name,e),e.aliases&&e.aliases.forEach(n=>{this._langs.set(n,e)}),this._scopeToLang.set(e.scopeName,e),e.injectTo&&e.injectTo.forEach(n=>{this._injections.get(n)||this._injections.set(n,[]),this._injections.get(n).push(e.scopeName)})}getInjections(e){const n=e.split(".");let r=[];for(let i=1;i<=n.length;i++){const s=n.slice(0,i).join(".");r=[...r,...this._injections.get(s)||[]]}return r}}let Di=0;function Ek(t){Di+=1,t.warnings!==!1&&Di>=10&&Di%10===0&&console.warn(`[Shiki] ${Di} instances have been created. Shiki is supposed to be used as a singleton, consider refactoring your code to cache your highlighter instance; Or call \`highlighter.dispose()\` to release unused instances.`);let e=!1;if(!t.engine)throw new Yr("`engine` option is required for synchronous mode");const n=(t.langs||[]).flat(1),r=(t.themes||[]).flat(1).map(yd),i=new wk(t.engine,n),s=new bk(i,r,n,t.langAlias);let o;function a(k){return hm(k,t.langAlias)}function l(k){b();const _=s.getGrammar(typeof k=="string"?k:k.name);if(!_)throw new Yr(`Language \`${k}\` not found, you may need to load it first`);return _}function c(k){if(k==="none")return{bg:"",fg:"",name:"none",settings:[],type:"dark"};b();const _=s.getTheme(k);if(!_)throw new Yr(`Theme \`${k}\` not found, you may need to load it first`);return _}function d(k){b();const _=c(k);o!==k&&(s.setTheme(_),o=k);const x=s.getColorMap();return{theme:_,colorMap:x}}function u(){return b(),s.getLoadedThemes()}function h(){return b(),s.getLoadedLanguages()}function f(...k){b(),s.loadLanguages(k.flat(1))}async function p(...k){return f(await dm(k))}function y(...k){b();for(const _ of k.flat(1))s.loadTheme(_)}async function w(...k){return b(),y(await um(k))}function b(){if(e)throw new Yr("Shiki instance has been disposed")}function E(){e||(e=!0,s.dispose(),Di-=1)}return{setTheme:d,getTheme:c,getLanguage:l,getLoadedThemes:u,getLoadedLanguages:h,resolveLangAlias:a,loadLanguage:p,loadLanguageSync:f,loadTheme:w,loadThemeSync:y,dispose:E,[Symbol.dispose]:E}}async function kk(t){t.engine||_k("`engine` option is required. Use `createOnigurumaEngine` or `createJavaScriptRegexEngine` to create an engine.");const[e,n,r]=await Promise.all([um(t.themes||[]),dm(t.langs||[]),t.engine]);return Ek({...t,themes:e,langs:n,engine:r})}async function Ak(t){const e=await kk(t);return{getLastGrammarState:(...n)=>sk(e,...n),codeToTokensBase:(n,r)=>md(e,n,r),codeToTokensWithThemes:(n,r)=>cm(e,n,r),codeToTokens:(n,r)=>Vo(e,n,r),codeToHast:(n,r)=>Uo(e,n,r),codeToHtml:(n,r)=>yk(e,n,r),getBundledLanguages:()=>({}),getBundledThemes:()=>({}),...e,getInternalContext:()=>e}}function xk(t){const e=t.langs,n=t.themes,r=t.engine;async function i(s){function o(u){if(typeof u=="string"){if(u=s.langAlias?.[u]||u,im(u))return[];const h=e[u];if(!h)throw new rt(`Language \`${u}\` is not included in this bundle. You may want to load it from external source.`);return h}return u}function a(u){if(sm(u))return"none";if(typeof u=="string"){const h=n[u];if(!h)throw new rt(`Theme \`${u}\` is not included in this bundle. You may want to load it from external source.`);return h}return u}const l=(s.themes??[]).map(u=>a(u)),c=(s.langs??[]).map(u=>o(u)),d=await Ak({engine:s.engine??r(),...s,themes:l,langs:c});return{...d,loadLanguage(...u){return d.loadLanguage(...u.map(o))},loadTheme(...u){return d.loadTheme(...u.map(a))},getBundledLanguages(){return e},getBundledThemes(){return n}}}return i}const fm=[{id:"abap",name:"ABAP",import:(()=>R(()=>import("./abap-BdImnpbu.js"),[]))},{id:"actionscript-3",name:"ActionScript",import:(()=>R(()=>import("./actionscript-3-CfeIJUat.js"),[]))},{id:"ada",name:"Ada",import:(()=>R(()=>import("./ada-bCR0ucgS.js"),[]))},{id:"angular-html",name:"Angular HTML",import:(()=>R(()=>import("./angular-html-CU67Zn6k.js").then(t=>t.f),__vite__mapDeps([0,1,2,3])))},{id:"angular-ts",name:"Angular TypeScript",import:(()=>R(()=>import("./angular-ts-BwZT4LLn.js"),__vite__mapDeps([4,0,1,2,3,5])))},{id:"apache",name:"Apache Conf",import:(()=>R(()=>import("./apache-Pmp26Uib.js"),[]))},{id:"apex",name:"Apex",import:(()=>R(()=>import("./apex-DDbsPZ6N.js"),[]))},{id:"apl",name:"APL",import:(()=>R(()=>import("./apl-dKokRX4l.js"),__vite__mapDeps([6,1,2,3,7,8,9])))},{id:"applescript",name:"AppleScript",import:(()=>R(()=>import("./applescript-Co6uUVPk.js"),[]))},{id:"ara",name:"Ara",import:(()=>R(()=>import("./ara-BRHolxvo.js"),[]))},{id:"asciidoc",name:"AsciiDoc",aliases:["adoc"],import:(()=>R(()=>import("./asciidoc-Dv7Oe6Be.js"),[]))},{id:"asm",name:"Assembly",import:(()=>R(()=>import("./asm-D_Q5rh1f.js"),[]))},{id:"astro",name:"Astro",import:(()=>R(()=>import("./astro-CbQHKStN.js"),__vite__mapDeps([10,9,2,11,3,12,13])))},{id:"awk",name:"AWK",import:(()=>R(()=>import("./awk-DMzUqQB5.js"),[]))},{id:"ballerina",name:"Ballerina",import:(()=>R(()=>import("./ballerina-BFfxhgS-.js"),[]))},{id:"bat",name:"Batch File",aliases:["batch"],import:(()=>R(()=>import("./bat-BkioyH1T.js"),[]))},{id:"beancount",name:"Beancount",import:(()=>R(()=>import("./beancount-k_qm7-4y.js"),[]))},{id:"berry",name:"Berry",aliases:["be"],import:(()=>R(()=>import("./berry-uYugtg8r.js"),[]))},{id:"bibtex",name:"BibTeX",import:(()=>R(()=>import("./bibtex-CHM0blh-.js"),[]))},{id:"bicep",name:"Bicep",import:(()=>R(()=>import("./bicep-Bmn6On1c.js"),[]))},{id:"blade",name:"Blade",import:(()=>R(()=>import("./blade-DVc8C-J4.js"),__vite__mapDeps([14,15,1,2,3,7,8,16,9])))},{id:"bsl",name:"1C (Enterprise)",aliases:["1c"],import:(()=>R(()=>import("./bsl-BO_Y6i37.js"),__vite__mapDeps([17,18])))},{id:"c",name:"C",import:(()=>R(()=>import("./c-BIGW1oBm.js"),[]))},{id:"cadence",name:"Cadence",aliases:["cdc"],import:(()=>R(()=>import("./cadence-Bv_4Rxtq.js"),[]))},{id:"cairo",name:"Cairo",import:(()=>R(()=>import("./cairo-KRGpt6FW.js"),__vite__mapDeps([19,20])))},{id:"clarity",name:"Clarity",import:(()=>R(()=>import("./clarity-D53aC0YG.js"),[]))},{id:"clojure",name:"Clojure",aliases:["clj"],import:(()=>R(()=>import("./clojure-P80f7IUj.js"),[]))},{id:"cmake",name:"CMake",import:(()=>R(()=>import("./cmake-D1j8_8rp.js"),[]))},{id:"cobol",name:"COBOL",import:(()=>R(()=>import("./cobol-nwyudZeR.js"),__vite__mapDeps([21,1,2,3,8])))},{id:"codeowners",name:"CODEOWNERS",import:(()=>R(()=>import("./codeowners-Bp6g37R7.js"),[]))},{id:"codeql",name:"CodeQL",aliases:["ql"],import:(()=>R(()=>import("./codeql-DsOJ9woJ.js"),[]))},{id:"coffee",name:"CoffeeScript",aliases:["coffeescript"],import:(()=>R(()=>import("./coffee-Ch7k5sss.js"),__vite__mapDeps([22,2])))},{id:"common-lisp",name:"Common Lisp",aliases:["lisp"],import:(()=>R(()=>import("./common-lisp-Cg-RD9OK.js"),[]))},{id:"coq",name:"Coq",import:(()=>R(()=>import("./coq-DkFqJrB1.js"),[]))},{id:"cpp",name:"C++",aliases:["c++"],import:(()=>R(()=>import("./cpp-CofmeUqb.js"),__vite__mapDeps([23,24,25,26,16])))},{id:"crystal",name:"Crystal",import:(()=>R(()=>import("./crystal-tKQVLTB8.js"),__vite__mapDeps([27,1,2,3,16,26,28])))},{id:"csharp",name:"C#",aliases:["c#","cs"],import:(()=>R(()=>import("./csharp-K5feNrxe.js"),[]))},{id:"css",name:"CSS",import:(()=>R(()=>import("./css-DPfMkruS.js"),[]))},{id:"csv",name:"CSV",import:(()=>R(()=>import("./csv-fuZLfV_i.js"),[]))},{id:"cue",name:"CUE",import:(()=>R(()=>import("./cue-D82EKSYY.js"),[]))},{id:"cypher",name:"Cypher",aliases:["cql"],import:(()=>R(()=>import("./cypher-COkxafJQ.js"),[]))},{id:"d",name:"D",import:(()=>R(()=>import("./d-85-TOEBH.js"),[]))},{id:"dart",name:"Dart",import:(()=>R(()=>import("./dart-CF10PKvl.js"),[]))},{id:"dax",name:"DAX",import:(()=>R(()=>import("./dax-CEL-wOlO.js"),[]))},{id:"desktop",name:"Desktop",import:(()=>R(()=>import("./desktop-BmXAJ9_W.js"),[]))},{id:"diff",name:"Diff",import:(()=>R(()=>import("./diff-D97Zzqfu.js"),[]))},{id:"docker",name:"Dockerfile",aliases:["dockerfile"],import:(()=>R(()=>import("./docker-BcOcwvcX.js"),[]))},{id:"dotenv",name:"dotEnv",import:(()=>R(()=>import("./dotenv-Da5cRb03.js"),[]))},{id:"dream-maker",name:"Dream Maker",import:(()=>R(()=>import("./dream-maker-BtqSS_iP.js"),[]))},{id:"edge",name:"Edge",import:(()=>R(()=>import("./edge-BkV0erSs.js"),__vite__mapDeps([29,11,1,2,3,15])))},{id:"elixir",name:"Elixir",import:(()=>R(()=>import("./elixir-CDX3lj18.js"),__vite__mapDeps([30,1,2,3])))},{id:"elm",name:"Elm",import:(()=>R(()=>import("./elm-DbKCFpqz.js"),__vite__mapDeps([31,25,26])))},{id:"emacs-lisp",name:"Emacs Lisp",aliases:["elisp"],import:(()=>R(()=>import("./emacs-lisp-C9XAeP06.js"),[]))},{id:"erb",name:"ERB",import:(()=>R(()=>import("./erb-BOJIQeun.js"),__vite__mapDeps([32,1,2,3,33,34,7,8,16,35,11,36,13,23,24,25,26,28,37,38])))},{id:"erlang",name:"Erlang",aliases:["erl"],import:(()=>R(()=>import("./erlang-DsQrWhSR.js"),__vite__mapDeps([39,40])))},{id:"fennel",name:"Fennel",import:(()=>R(()=>import("./fennel-BYunw83y.js"),[]))},{id:"fish",name:"Fish",import:(()=>R(()=>import("./fish-BvzEVeQv.js"),[]))},{id:"fluent",name:"Fluent",aliases:["ftl"],import:(()=>R(()=>import("./fluent-C4IJs8-o.js"),[]))},{id:"fortran-fixed-form",name:"Fortran (Fixed Form)",aliases:["f","for","f77"],import:(()=>R(()=>import("./fortran-fixed-form-BZjJHVRy.js"),__vite__mapDeps([41,42])))},{id:"fortran-free-form",name:"Fortran (Free Form)",aliases:["f90","f95","f03","f08","f18"],import:(()=>R(()=>import("./fortran-free-form-D22FLkUw.js"),[]))},{id:"fsharp",name:"F#",aliases:["f#","fs"],import:(()=>R(()=>import("./fsharp-CXgrBDvD.js"),__vite__mapDeps([43,40])))},{id:"gdresource",name:"GDResource",import:(()=>R(()=>import("./gdresource-B7Tvp0Sc.js"),__vite__mapDeps([44,45,46])))},{id:"gdscript",name:"GDScript",import:(()=>R(()=>import("./gdscript-DTMYz4Jt.js"),[]))},{id:"gdshader",name:"GDShader",import:(()=>R(()=>import("./gdshader-DkwncUOv.js"),[]))},{id:"genie",name:"Genie",import:(()=>R(()=>import("./genie-D0YGMca9.js"),[]))},{id:"gherkin",name:"Gherkin",import:(()=>R(()=>import("./gherkin-DyxjwDmM.js"),[]))},{id:"git-commit",name:"Git Commit Message",import:(()=>R(()=>import("./git-commit-F4YmCXRG.js"),__vite__mapDeps([47,48])))},{id:"git-rebase",name:"Git Rebase Message",import:(()=>R(()=>import("./git-rebase-r7XF79zn.js"),__vite__mapDeps([49,28])))},{id:"gleam",name:"Gleam",import:(()=>R(()=>import("./gleam-BspZqrRM.js"),[]))},{id:"glimmer-js",name:"Glimmer JS",aliases:["gjs"],import:(()=>R(()=>import("./glimmer-js-Rg0-pVw9.js"),__vite__mapDeps([50,2,11,3,1])))},{id:"glimmer-ts",name:"Glimmer TS",aliases:["gts"],import:(()=>R(()=>import("./glimmer-ts-U6CK756n.js"),__vite__mapDeps([51,11,3,2,1])))},{id:"glsl",name:"GLSL",import:(()=>R(()=>import("./glsl-DplSGwfg.js"),__vite__mapDeps([25,26])))},{id:"gnuplot",name:"Gnuplot",import:(()=>R(()=>import("./gnuplot-DdkO51Og.js"),[]))},{id:"go",name:"Go",import:(()=>R(()=>import("./go-Dn2_MT6a.js"),[]))},{id:"graphql",name:"GraphQL",aliases:["gql"],import:(()=>R(()=>import("./graphql-ChdNCCLP.js"),__vite__mapDeps([35,2,11,36,13])))},{id:"groovy",name:"Groovy",import:(()=>R(()=>import("./groovy-gcz8RCvz.js"),[]))},{id:"hack",name:"Hack",import:(()=>R(()=>import("./hack-CaT9iCJl.js"),__vite__mapDeps([52,1,2,3,16])))},{id:"haml",name:"Ruby Haml",import:(()=>R(()=>import("./haml-B8DHNrY2.js"),__vite__mapDeps([34,2,3])))},{id:"handlebars",name:"Handlebars",aliases:["hbs"],import:(()=>R(()=>import("./handlebars-BL8al0AC.js"),__vite__mapDeps([53,1,2,3,38])))},{id:"haskell",name:"Haskell",aliases:["hs"],import:(()=>R(()=>import("./haskell-Df6bDoY_.js"),[]))},{id:"haxe",name:"Haxe",import:(()=>R(()=>import("./haxe-CzTSHFRz.js"),[]))},{id:"hcl",name:"HashiCorp HCL",import:(()=>R(()=>import("./hcl-BWvSN4gD.js"),[]))},{id:"hjson",name:"Hjson",import:(()=>R(()=>import("./hjson-D5-asLiD.js"),[]))},{id:"hlsl",name:"HLSL",import:(()=>R(()=>import("./hlsl-D3lLCCz7.js"),[]))},{id:"html",name:"HTML",import:(()=>R(()=>import("./html-GMplVEZG.js"),__vite__mapDeps([1,2,3])))},{id:"html-derivative",name:"HTML (Derivative)",import:(()=>R(()=>import("./html-derivative-BFtXZ54Q.js"),__vite__mapDeps([15,1,2,3])))},{id:"http",name:"HTTP",import:(()=>R(()=>import("./http-jrhK8wxY.js"),__vite__mapDeps([54,28,9,7,8,35,2,11,36,13])))},{id:"hurl",name:"Hurl",import:(()=>R(()=>import("./hurl-irOxFIW8.js"),__vite__mapDeps([55,35,2,11,36,13,7,8,56])))},{id:"hxml",name:"HXML",import:(()=>R(()=>import("./hxml-Bvhsp5Yf.js"),__vite__mapDeps([57,58])))},{id:"hy",name:"Hy",import:(()=>R(()=>import("./hy-DFXneXwc.js"),[]))},{id:"imba",name:"Imba",import:(()=>R(()=>import("./imba-DGztddWO.js"),[]))},{id:"ini",name:"INI",aliases:["properties"],import:(()=>R(()=>import("./ini-BEwlwnbL.js"),[]))},{id:"java",name:"Java",import:(()=>R(()=>import("./java-CylS5w8V.js"),[]))},{id:"javascript",name:"JavaScript",aliases:["js","cjs","mjs"],import:(()=>R(()=>import("./javascript-wDzz0qaB.js"),[]))},{id:"jinja",name:"Jinja",import:(()=>R(()=>import("./jinja-4LBKfQ-Z.js"),__vite__mapDeps([59,1,2,3])))},{id:"jison",name:"Jison",import:(()=>R(()=>import("./jison-wvAkD_A8.js"),__vite__mapDeps([60,2])))},{id:"json",name:"JSON",import:(()=>R(()=>import("./json-Cp-IABpG.js"),[]))},{id:"json5",name:"JSON5",import:(()=>R(()=>import("./json5-C9tS-k6U.js"),[]))},{id:"jsonc",name:"JSON with Comments",import:(()=>R(()=>import("./jsonc-Des-eS-w.js"),[]))},{id:"jsonl",name:"JSON Lines",import:(()=>R(()=>import("./jsonl-DcaNXYhu.js"),[]))},{id:"jsonnet",name:"Jsonnet",import:(()=>R(()=>import("./jsonnet-DFQXde-d.js"),[]))},{id:"jssm",name:"JSSM",aliases:["fsl"],import:(()=>R(()=>import("./jssm-C2t-YnRu.js"),[]))},{id:"jsx",name:"JSX",import:(()=>R(()=>import("./jsx-g9-lgVsj.js"),[]))},{id:"julia",name:"Julia",aliases:["jl"],import:(()=>R(()=>import("./julia-C8NyazO9.js"),__vite__mapDeps([61,23,24,25,26,16,20,2,62])))},{id:"kdl",name:"KDL",import:(()=>R(()=>import("./kdl-DV7GczEv.js"),[]))},{id:"kotlin",name:"Kotlin",aliases:["kt","kts"],import:(()=>R(()=>import("./kotlin-BdnUsdx6.js"),[]))},{id:"kusto",name:"Kusto",aliases:["kql"],import:(()=>R(()=>import("./kusto-BvAqAH-y.js"),[]))},{id:"latex",name:"LaTeX",import:(()=>R(()=>import("./latex-BdAV_C_H.js"),__vite__mapDeps([63,64,62])))},{id:"lean",name:"Lean 4",aliases:["lean4"],import:(()=>R(()=>import("./lean-Bc6EcWN3.js"),[]))},{id:"less",name:"Less",import:(()=>R(()=>import("./less-B1dDrJ26.js"),[]))},{id:"liquid",name:"Liquid",import:(()=>R(()=>import("./liquid-DYVedYrR.js"),__vite__mapDeps([65,1,2,3,9])))},{id:"llvm",name:"LLVM IR",import:(()=>R(()=>import("./llvm-BtvRca6l.js"),[]))},{id:"log",name:"Log file",import:(()=>R(()=>import("./log-2UxHyX5q.js"),[]))},{id:"logo",name:"Logo",import:(()=>R(()=>import("./logo-BtOb2qkB.js"),[]))},{id:"lua",name:"Lua",import:(()=>R(()=>import("./lua-BbnMAYS6.js"),__vite__mapDeps([37,26])))},{id:"luau",name:"Luau",import:(()=>R(()=>import("./luau-CXu1NL6O.js"),[]))},{id:"make",name:"Makefile",aliases:["makefile"],import:(()=>R(()=>import("./make-CHLpvVh8.js"),[]))},{id:"markdown",name:"Markdown",aliases:["md"],import:(()=>R(()=>import("./markdown-Cvjx9yec.js"),[]))},{id:"marko",name:"Marko",import:(()=>R(()=>import("./marko-CPi9NSCl.js"),__vite__mapDeps([66,3,67,5,11])))},{id:"matlab",name:"MATLAB",import:(()=>R(()=>import("./matlab-D7o27uSR.js"),[]))},{id:"mdc",name:"MDC",import:(()=>R(()=>import("./mdc-DUICxH0z.js"),__vite__mapDeps([68,40,38,15,1,2,3])))},{id:"mdx",name:"MDX",import:(()=>R(()=>import("./mdx-Cmh6b_Ma.js"),[]))},{id:"mermaid",name:"Mermaid",aliases:["mmd"],import:(()=>R(()=>import("./mermaid-DKYwYmdq.js"),[]))},{id:"mipsasm",name:"MIPS Assembly",aliases:["mips"],import:(()=>R(()=>import("./mipsasm-CKIfxQSi.js"),[]))},{id:"mojo",name:"Mojo",import:(()=>R(()=>import("./mojo-1DNp92w6.js"),[]))},{id:"move",name:"Move",import:(()=>R(()=>import("./move-Bu9oaDYs.js"),[]))},{id:"narrat",name:"Narrat Language",aliases:["nar"],import:(()=>R(()=>import("./narrat-DRg8JJMk.js"),[]))},{id:"nextflow",name:"Nextflow",aliases:["nf"],import:(()=>R(()=>import("./nextflow-BrzmwbiE.js"),[]))},{id:"nginx",name:"Nginx",import:(()=>R(()=>import("./nginx-DknmC5AR.js"),__vite__mapDeps([69,37,26])))},{id:"nim",name:"Nim",import:(()=>R(()=>import("./nim-CVrawwO9.js"),__vite__mapDeps([70,26,1,2,3,7,8,25,40])))},{id:"nix",name:"Nix",import:(()=>R(()=>import("./nix-c8nO5XWb.js"),[]))},{id:"nushell",name:"nushell",aliases:["nu"],import:(()=>R(()=>import("./nushell-C-sUppwS.js"),[]))},{id:"objective-c",name:"Objective-C",aliases:["objc"],import:(()=>R(()=>import("./objective-c-DXmwc3jG.js"),[]))},{id:"objective-cpp",name:"Objective-C++",import:(()=>R(()=>import("./objective-cpp-CLxacb5B.js"),[]))},{id:"ocaml",name:"OCaml",import:(()=>R(()=>import("./ocaml-C0hk2d4L.js"),[]))},{id:"openscad",name:"OpenSCAD",aliases:["scad"],import:(()=>R(()=>import("./openscad-C4EeE6gA.js"),[]))},{id:"pascal",name:"Pascal",import:(()=>R(()=>import("./pascal-D93ZcfNL.js"),[]))},{id:"perl",name:"Perl",import:(()=>R(()=>import("./perl-C0TMdlhV.js"),__vite__mapDeps([71,1,2,3,7,8,16])))},{id:"php",name:"PHP",import:(()=>R(()=>import("./php-CDn_0X-4.js"),__vite__mapDeps([72,1,2,3,7,8,16,9])))},{id:"pkl",name:"Pkl",import:(()=>R(()=>import("./pkl-u5AG7uiY.js"),[]))},{id:"plsql",name:"PL/SQL",import:(()=>R(()=>import("./plsql-ChMvpjG-.js"),[]))},{id:"po",name:"Gettext PO",aliases:["pot","potx"],import:(()=>R(()=>import("./po-BTJTHyun.js"),[]))},{id:"polar",name:"Polar",import:(()=>R(()=>import("./polar-C0HS_06l.js"),[]))},{id:"postcss",name:"PostCSS",import:(()=>R(()=>import("./postcss-CXtECtnM.js"),[]))},{id:"powerquery",name:"PowerQuery",import:(()=>R(()=>import("./powerquery-CEu0bR-o.js"),[]))},{id:"powershell",name:"PowerShell",aliases:["ps","ps1"],import:(()=>R(()=>import("./powershell-Dpen1YoG.js"),[]))},{id:"prisma",name:"Prisma",import:(()=>R(()=>import("./prisma-Dd19v3D-.js"),[]))},{id:"prolog",name:"Prolog",import:(()=>R(()=>import("./prolog-CbFg5uaA.js"),[]))},{id:"proto",name:"Protocol Buffer 3",aliases:["protobuf"],import:(()=>R(()=>import("./proto-DyJlTyXw.js"),[]))},{id:"pug",name:"Pug",aliases:["jade"],import:(()=>R(()=>import("./pug-CGlum2m_.js"),__vite__mapDeps([73,2,3,1])))},{id:"puppet",name:"Puppet",import:(()=>R(()=>import("./puppet-BMWR74SV.js"),[]))},{id:"purescript",name:"PureScript",import:(()=>R(()=>import("./purescript-CklMAg4u.js"),[]))},{id:"python",name:"Python",aliases:["py"],import:(()=>R(()=>import("./python-B6aJPvgy.js"),[]))},{id:"qml",name:"QML",import:(()=>R(()=>import("./qml-3beO22l8.js"),__vite__mapDeps([74,2])))},{id:"qmldir",name:"QML Directory",import:(()=>R(()=>import("./qmldir-C8lEn-DE.js"),[]))},{id:"qss",name:"Qt Style Sheets",import:(()=>R(()=>import("./qss-IeuSbFQv.js"),[]))},{id:"r",name:"R",import:(()=>R(()=>import("./r-DiinP2Uv.js"),[]))},{id:"racket",name:"Racket",import:(()=>R(()=>import("./racket-BqYA7rlc.js"),[]))},{id:"raku",name:"Raku",aliases:["perl6"],import:(()=>R(()=>import("./raku-DXvB9xmW.js"),[]))},{id:"razor",name:"ASP.NET Razor",import:(()=>R(()=>import("./razor-CE9lU5zL.js"),__vite__mapDeps([75,1,2,3,76])))},{id:"reg",name:"Windows Registry Script",import:(()=>R(()=>import("./reg-C-SQnVFl.js"),[]))},{id:"regexp",name:"RegExp",aliases:["regex"],import:(()=>R(()=>import("./regexp-CDVJQ6XC.js"),[]))},{id:"rel",name:"Rel",import:(()=>R(()=>import("./rel-C3B-1QV4.js"),[]))},{id:"riscv",name:"RISC-V",import:(()=>R(()=>import("./riscv-BM1_JUlF.js"),[]))},{id:"rosmsg",name:"ROS Interface",import:(()=>R(()=>import("./rosmsg-BJDFO7_C.js"),[]))},{id:"rst",name:"reStructuredText",import:(()=>R(()=>import("./rst-B0xPkSld.js"),__vite__mapDeps([77,15,1,2,3,23,24,25,26,16,20,28,38,78,33,34,7,8,35,11,36,13,37])))},{id:"ruby",name:"Ruby",aliases:["rb"],import:(()=>R(()=>import("./ruby-BvKwtOVI.js"),__vite__mapDeps([33,1,2,3,34,7,8,16,35,11,36,13,23,24,25,26,28,37,38])))},{id:"rust",name:"Rust",aliases:["rs"],import:(()=>R(()=>import("./rust-B1yitclQ.js"),[]))},{id:"sas",name:"SAS",import:(()=>R(()=>import("./sas-cz2c8ADy.js"),__vite__mapDeps([79,16])))},{id:"sass",name:"Sass",import:(()=>R(()=>import("./sass-Cj5Yp3dK.js"),[]))},{id:"scala",name:"Scala",import:(()=>R(()=>import("./scala-C151Ov-r.js"),[]))},{id:"scheme",name:"Scheme",import:(()=>R(()=>import("./scheme-C98Dy4si.js"),[]))},{id:"scss",name:"SCSS",import:(()=>R(()=>import("./scss-OYdSNvt2.js"),__vite__mapDeps([5,3])))},{id:"sdbl",name:"1C (Query)",aliases:["1c-query"],import:(()=>R(()=>import("./sdbl-DVxCFoDh.js"),[]))},{id:"shaderlab",name:"ShaderLab",aliases:["shader"],import:(()=>R(()=>import("./shaderlab-Dg9Lc6iA.js"),__vite__mapDeps([80,81])))},{id:"shellscript",name:"Shell",aliases:["bash","sh","shell","zsh"],import:(()=>R(()=>import("./shellscript-Yzrsuije.js"),[]))},{id:"shellsession",name:"Shell Session",aliases:["console"],import:(()=>R(()=>import("./shellsession-BADoaaVG.js"),__vite__mapDeps([82,28])))},{id:"smalltalk",name:"Smalltalk",import:(()=>R(()=>import("./smalltalk-BERRCDM3.js"),[]))},{id:"solidity",name:"Solidity",import:(()=>R(()=>import("./solidity-rGO070M0.js"),[]))},{id:"soy",name:"Closure Templates",aliases:["closure-templates"],import:(()=>R(()=>import("./soy-Brmx7dQM.js"),__vite__mapDeps([83,1,2,3])))},{id:"sparql",name:"SPARQL",import:(()=>R(()=>import("./sparql-rVzFXLq3.js"),__vite__mapDeps([84,85])))},{id:"splunk",name:"Splunk Query Language",aliases:["spl"],import:(()=>R(()=>import("./splunk-BtCnVYZw.js"),[]))},{id:"sql",name:"SQL",import:(()=>R(()=>import("./sql-BLtJtn59.js"),[]))},{id:"ssh-config",name:"SSH Config",import:(()=>R(()=>import("./ssh-config-_ykCGR6B.js"),[]))},{id:"stata",name:"Stata",import:(()=>R(()=>import("./stata-BH5u7GGu.js"),__vite__mapDeps([86,16])))},{id:"stylus",name:"Stylus",aliases:["styl"],import:(()=>R(()=>import("./stylus-BEDo0Tqx.js"),[]))},{id:"svelte",name:"Svelte",import:(()=>R(()=>import("./svelte-3Dk4HxPD.js"),__vite__mapDeps([87,2,11,3,12])))},{id:"swift",name:"Swift",import:(()=>R(()=>import("./swift-Dg5xB15N.js"),[]))},{id:"system-verilog",name:"SystemVerilog",import:(()=>R(()=>import("./system-verilog-CnnmHF94.js"),[]))},{id:"systemd",name:"Systemd Units",import:(()=>R(()=>import("./systemd-4A_iFExJ.js"),[]))},{id:"talonscript",name:"TalonScript",aliases:["talon"],import:(()=>R(()=>import("./talonscript-CkByrt1z.js"),[]))},{id:"tasl",name:"Tasl",import:(()=>R(()=>import("./tasl-QIJgUcNo.js"),[]))},{id:"tcl",name:"Tcl",import:(()=>R(()=>import("./tcl-dwOrl1Do.js"),[]))},{id:"templ",name:"Templ",import:(()=>R(()=>import("./templ-W15q3VgB.js"),__vite__mapDeps([88,89,2,3])))},{id:"terraform",name:"Terraform",aliases:["tf","tfvars"],import:(()=>R(()=>import("./terraform-BETggiCN.js"),[]))},{id:"tex",name:"TeX",import:(()=>R(()=>import("./tex-CxkMU7Pf.js"),__vite__mapDeps([64,62])))},{id:"toml",name:"TOML",import:(()=>R(()=>import("./toml-vGWfd6FD.js"),[]))},{id:"ts-tags",name:"TypeScript with Tags",aliases:["lit"],import:(()=>R(()=>import("./ts-tags-zn1MmPIZ.js"),__vite__mapDeps([90,11,3,2,25,26,1,16,7,8])))},{id:"tsv",name:"TSV",import:(()=>R(()=>import("./tsv-B_m7g4N7.js"),[]))},{id:"tsx",name:"TSX",import:(()=>R(()=>import("./tsx-COt5Ahok.js"),[]))},{id:"turtle",name:"Turtle",import:(()=>R(()=>import("./turtle-BsS91CYL.js"),[]))},{id:"twig",name:"Twig",import:(()=>R(()=>import("./twig-CO9l9SDP.js"),__vite__mapDeps([91,3,2,5,72,1,7,8,16,9,20,33,34,35,11,36,13,23,24,25,26,28,37,38])))},{id:"typescript",name:"TypeScript",aliases:["ts","cts","mts"],import:(()=>R(()=>import("./typescript-BPQ3VLAy.js"),[]))},{id:"typespec",name:"TypeSpec",aliases:["tsp"],import:(()=>R(()=>import("./typespec-BGHnOYBU.js"),[]))},{id:"typst",name:"Typst",aliases:["typ"],import:(()=>R(()=>import("./typst-DHCkPAjA.js"),[]))},{id:"v",name:"V",import:(()=>R(()=>import("./v-BcVCzyr7.js"),[]))},{id:"vala",name:"Vala",import:(()=>R(()=>import("./vala-CsfeWuGM.js"),[]))},{id:"vb",name:"Visual Basic",aliases:["cmd"],import:(()=>R(()=>import("./vb-D17OF-Vu.js"),[]))},{id:"verilog",name:"Verilog",import:(()=>R(()=>import("./verilog-BQ8w6xss.js"),[]))},{id:"vhdl",name:"VHDL",import:(()=>R(()=>import("./vhdl-CeAyd5Ju.js"),[]))},{id:"viml",name:"Vim Script",aliases:["vim","vimscript"],import:(()=>R(()=>import("./viml-CJc9bBzg.js"),[]))},{id:"vue",name:"Vue",import:(()=>R(()=>import("./vue-DnHKYNfI.js"),__vite__mapDeps([92,3,2,11,9,15,1])))},{id:"vue-html",name:"Vue HTML",import:(()=>R(()=>import("./vue-html-CChd_i61.js"),__vite__mapDeps([93,92,3,2,11,9,15,1])))},{id:"vue-vine",name:"Vue Vine",import:(()=>R(()=>import("./vue-vine-8moa0y9V.js"),__vite__mapDeps([94,3,5,67,95,12,92,2,11,9,15,1])))},{id:"vyper",name:"Vyper",aliases:["vy"],import:(()=>R(()=>import("./vyper-CDx5xZoG.js"),[]))},{id:"wasm",name:"WebAssembly",import:(()=>R(()=>import("./wasm-MzD3tlZU.js"),[]))},{id:"wenyan",name:"Wenyan",aliases:[""],import:(()=>R(()=>import("./wenyan-BV7otONQ.js"),[]))},{id:"wgsl",name:"WGSL",import:(()=>R(()=>import("./wgsl-Dx-B1_4e.js"),[]))},{id:"wikitext",name:"Wikitext",aliases:["mediawiki","wiki"],import:(()=>R(()=>import("./wikitext-BhOHFoWU.js"),[]))},{id:"wit",name:"WebAssembly Interface Types",import:(()=>R(()=>import("./wit-5i3qLPDT.js"),[]))},{id:"wolfram",name:"Wolfram",aliases:["wl"],import:(()=>R(()=>import("./wolfram-lXgVvXCa.js"),[]))},{id:"xml",name:"XML",import:(()=>R(()=>import("./xml-sdJ4AIDG.js"),__vite__mapDeps([7,8])))},{id:"xsl",name:"XSL",import:(()=>R(()=>import("./xsl-CtQFsRM5.js"),__vite__mapDeps([96,7,8])))},{id:"yaml",name:"YAML",aliases:["yml"],import:(()=>R(()=>import("./yaml-Buea-lGh.js"),[]))},{id:"zenscript",name:"ZenScript",import:(()=>R(()=>import("./zenscript-DVFEvuxE.js"),[]))},{id:"zig",name:"Zig",import:(()=>R(()=>import("./zig-VOosw3JB.js"),[]))}],Ck=Object.fromEntries(fm.map(t=>[t.id,t.import])),Sk=Object.fromEntries(fm.flatMap(t=>t.aliases?.map(e=>[e,t.import])||[])),Tk={...Ck,...Sk},Nk=[{id:"andromeeda",displayName:"Andromeeda",type:"dark",import:(()=>R(()=>import("./andromeeda-C-Jbm3Hp.js"),[]))},{id:"aurora-x",displayName:"Aurora X",type:"dark",import:(()=>R(()=>import("./aurora-x-D-2ljcwZ.js"),[]))},{id:"ayu-dark",displayName:"Ayu Dark",type:"dark",import:(()=>R(()=>import("./ayu-dark-Cv9koXgw.js"),[]))},{id:"catppuccin-frappe",displayName:"Catppuccin Frapp",type:"dark",import:(()=>R(()=>import("./catppuccin-frappe-DFWUc33u.js"),[]))},{id:"catppuccin-latte",displayName:"Catppuccin Latte",type:"light",import:(()=>R(()=>import("./catppuccin-latte-C9dUb6Cb.js"),[]))},{id:"catppuccin-macchiato",displayName:"Catppuccin Macchiato",type:"dark",import:(()=>R(()=>import("./catppuccin-macchiato-DQyhUUbL.js"),[]))},{id:"catppuccin-mocha",displayName:"Catppuccin Mocha",type:"dark",import:(()=>R(()=>import("./catppuccin-mocha-D87Tk5Gz.js"),[]))},{id:"dark-plus",displayName:"Dark Plus",type:"dark",import:(()=>R(()=>import("./dark-plus-C3mMm8J8.js"),[]))},{id:"dracula",displayName:"Dracula Theme",type:"dark",import:(()=>R(()=>import("./dracula-BzJJZx-M.js"),[]))},{id:"dracula-soft",displayName:"Dracula Theme Soft",type:"dark",import:(()=>R(()=>import("./dracula-soft-BXkSAIEj.js"),[]))},{id:"everforest-dark",displayName:"Everforest Dark",type:"dark",import:(()=>R(()=>import("./everforest-dark-BgDCqdQA.js"),[]))},{id:"everforest-light",displayName:"Everforest Light",type:"light",import:(()=>R(()=>import("./everforest-light-C8M2exoo.js"),[]))},{id:"github-dark",displayName:"GitHub Dark",type:"dark",import:(()=>R(()=>import("./github-dark-DHJKELXO.js"),[]))},{id:"github-dark-default",displayName:"GitHub Dark Default",type:"dark",import:(()=>R(()=>import("./github-dark-default-Cuk6v7N8.js"),[]))},{id:"github-dark-dimmed",displayName:"GitHub Dark Dimmed",type:"dark",import:(()=>R(()=>import("./github-dark-dimmed-DH5Ifo-i.js"),[]))},{id:"github-dark-high-contrast",displayName:"GitHub Dark High Contrast",type:"dark",import:(()=>R(()=>import("./github-dark-high-contrast-E3gJ1_iC.js"),[]))},{id:"github-light",displayName:"GitHub Light",type:"light",import:(()=>R(()=>import("./github-light-DAi9KRSo.js"),[]))},{id:"github-light-default",displayName:"GitHub Light Default",type:"light",import:(()=>R(()=>import("./github-light-default-D7oLnXFd.js"),[]))},{id:"github-light-high-contrast",displayName:"GitHub Light High Contrast",type:"light",import:(()=>R(()=>import("./github-light-high-contrast-BfjtVDDH.js"),[]))},{id:"gruvbox-dark-hard",displayName:"Gruvbox Dark Hard",type:"dark",import:(()=>R(()=>import("./gruvbox-dark-hard-CFHQjOhq.js"),[]))},{id:"gruvbox-dark-medium",displayName:"Gruvbox Dark Medium",type:"dark",import:(()=>R(()=>import("./gruvbox-dark-medium-GsRaNv29.js"),[]))},{id:"gruvbox-dark-soft",displayName:"Gruvbox Dark Soft",type:"dark",import:(()=>R(()=>import("./gruvbox-dark-soft-CVdnzihN.js"),[]))},{id:"gruvbox-light-hard",displayName:"Gruvbox Light Hard",type:"light",import:(()=>R(()=>import("./gruvbox-light-hard-CH1njM8p.js"),[]))},{id:"gruvbox-light-medium",displayName:"Gruvbox Light Medium",type:"light",import:(()=>R(()=>import("./gruvbox-light-medium-DRw_LuNl.js"),[]))},{id:"gruvbox-light-soft",displayName:"Gruvbox Light Soft",type:"light",import:(()=>R(()=>import("./gruvbox-light-soft-hJgmCMqR.js"),[]))},{id:"houston",displayName:"Houston",type:"dark",import:(()=>R(()=>import("./houston-DnULxvSX.js"),[]))},{id:"kanagawa-dragon",displayName:"Kanagawa Dragon",type:"dark",import:(()=>R(()=>import("./kanagawa-dragon-CkXjmgJE.js"),[]))},{id:"kanagawa-lotus",displayName:"Kanagawa Lotus",type:"light",import:(()=>R(()=>import("./kanagawa-lotus-CfQXZHmo.js"),[]))},{id:"kanagawa-wave",displayName:"Kanagawa Wave",type:"dark",import:(()=>R(()=>import("./kanagawa-wave-DWedfzmr.js"),[]))},{id:"laserwave",displayName:"LaserWave",type:"dark",import:(()=>R(()=>import("./laserwave-DUszq2jm.js"),[]))},{id:"light-plus",displayName:"Light Plus",type:"light",import:(()=>R(()=>import("./light-plus-B7mTdjB0.js"),[]))},{id:"material-theme",displayName:"Material Theme",type:"dark",import:(()=>R(()=>import("./material-theme-D5KoaKCx.js"),[]))},{id:"material-theme-darker",displayName:"Material Theme Darker",type:"dark",import:(()=>R(()=>import("./material-theme-darker-BfHTSMKl.js"),[]))},{id:"material-theme-lighter",displayName:"Material Theme Lighter",type:"light",import:(()=>R(()=>import("./material-theme-lighter-B0m2ddpp.js"),[]))},{id:"material-theme-ocean",displayName:"Material Theme Ocean",type:"dark",import:(()=>R(()=>import("./material-theme-ocean-CyktbL80.js"),[]))},{id:"material-theme-palenight",displayName:"Material Theme Palenight",type:"dark",import:(()=>R(()=>import("./material-theme-palenight-Csfq5Kiy.js"),[]))},{id:"min-dark",displayName:"Min Dark",type:"dark",import:(()=>R(()=>import("./min-dark-CafNBF8u.js"),[]))},{id:"min-light",displayName:"Min Light",type:"light",import:(()=>R(()=>import("./min-light-CTRr51gU.js"),[]))},{id:"monokai",displayName:"Monokai",type:"dark",import:(()=>R(()=>import("./monokai-D4h5O-jR.js"),[]))},{id:"night-owl",displayName:"Night Owl",type:"dark",import:(()=>R(()=>import("./night-owl-C39BiMTA.js"),[]))},{id:"nord",displayName:"Nord",type:"dark",import:(()=>R(()=>import("./nord-Ddv68eIx.js"),[]))},{id:"one-dark-pro",displayName:"One Dark Pro",type:"dark",import:(()=>R(()=>import("./one-dark-pro-DVMEJ2y_.js"),[]))},{id:"one-light",displayName:"One Light",type:"light",import:(()=>R(()=>import("./one-light-PoHY5YXO.js"),[]))},{id:"plastic",displayName:"Plastic",type:"dark",import:(()=>R(()=>import("./plastic-3e1v2bzS.js"),[]))},{id:"poimandres",displayName:"Poimandres",type:"dark",import:(()=>R(()=>import("./poimandres-CS3Unz2-.js"),[]))},{id:"red",displayName:"Red",type:"dark",import:(()=>R(()=>import("./red-bN70gL4F.js"),[]))},{id:"rose-pine",displayName:"Ros Pine",type:"dark",import:(()=>R(()=>import("./rose-pine-qdsjHGoJ.js"),[]))},{id:"rose-pine-dawn",displayName:"Ros Pine Dawn",type:"light",import:(()=>R(()=>import("./rose-pine-dawn-DHQR4-dF.js"),[]))},{id:"rose-pine-moon",displayName:"Ros Pine Moon",type:"dark",import:(()=>R(()=>import("./rose-pine-moon-D4_iv3hh.js"),[]))},{id:"slack-dark",displayName:"Slack Dark",type:"dark",import:(()=>R(()=>import("./slack-dark-BthQWCQV.js"),[]))},{id:"slack-ochin",displayName:"Slack Ochin",type:"light",import:(()=>R(()=>import("./slack-ochin-DqwNpetd.js"),[]))},{id:"snazzy-light",displayName:"Snazzy Light",type:"light",import:(()=>R(()=>import("./snazzy-light-Bw305WKR.js"),[]))},{id:"solarized-dark",displayName:"Solarized Dark",type:"dark",import:(()=>R(()=>import("./solarized-dark-DXbdFlpD.js"),[]))},{id:"solarized-light",displayName:"Solarized Light",type:"light",import:(()=>R(()=>import("./solarized-light-L9t79GZl.js"),[]))},{id:"synthwave-84",displayName:"Synthwave '84",type:"dark",import:(()=>R(()=>import("./synthwave-84-CbfX1IO0.js"),[]))},{id:"tokyo-night",displayName:"Tokyo Night",type:"dark",import:(()=>R(()=>import("./tokyo-night-hegEt444.js"),[]))},{id:"vesper",displayName:"Vesper",type:"dark",import:(()=>R(()=>import("./vesper-DU1UobuO.js"),[]))},{id:"vitesse-black",displayName:"Vitesse Black",type:"dark",import:(()=>R(()=>import("./vitesse-black-Bkuqu6BP.js"),[]))},{id:"vitesse-dark",displayName:"Vitesse Dark",type:"dark",import:(()=>R(()=>import("./vitesse-dark-D0r3Knsf.js"),[]))},{id:"vitesse-light",displayName:"Vitesse Light",type:"light",import:(()=>R(()=>import("./vitesse-light-CVO1_9PV.js"),[]))}],Rk=Object.fromEntries(Nk.map(t=>[t.id,t.import]));class vd extends Error{constructor(e){super(e),this.name="ShikiError"}}function Lk(){return 2147483648}function Ik(){return typeof performance<"u"?performance.now():Date.now()}const Dk=(t,e)=>t+(e-t%e)%e;async function Pk(t){let e,n;const r={};function i(f){n=f,r.HEAPU8=new Uint8Array(f),r.HEAPU32=new Uint32Array(f)}function s(f,p,y){r.HEAPU8.copyWithin(f,p,p+y)}function o(f){try{return e.grow(f-n.byteLength+65535>>>16),i(e.buffer),1}catch{}}function a(f){const p=r.HEAPU8.length;f=f>>>0;const y=Lk();if(f>y)return!1;for(let w=1;w<=4;w*=2){let b=p*(1+.2/w);b=Math.min(b,f+100663296);const E=Math.min(y,Dk(Math.max(f,b),65536));if(o(E))return!0}return!1}const l=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function c(f,p,y=1024){const w=p+y;let b=p;for(;f[b]&&!(b>=w);)++b;if(b-p>16&&f.buffer&&l)return l.decode(f.subarray(p,b));let E="";for(;p<b;){let k=f[p++];if(!(k&128)){E+=String.fromCharCode(k);continue}const _=f[p++]&63;if((k&224)===192){E+=String.fromCharCode((k&31)<<6|_);continue}const x=f[p++]&63;if((k&240)===224?k=(k&15)<<12|_<<6|x:k=(k&7)<<18|_<<12|x<<6|f[p++]&63,k<65536)E+=String.fromCharCode(k);else{const T=k-65536;E+=String.fromCharCode(55296|T>>10,56320|T&1023)}}return E}function d(f,p){return f?c(r.HEAPU8,f,p):""}const u={emscripten_get_now:Ik,emscripten_memcpy_big:s,emscripten_resize_heap:a,fd_write:()=>0};async function h(){const p=await t({env:u,wasi_snapshot_preview1:u});e=p.memory,i(e.buffer),Object.assign(r,p),r.UTF8ToString=d}return await h(),r}var Gk=Object.defineProperty,Mk=(t,e,n)=>e in t?Gk(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ot=(t,e,n)=>Mk(t,typeof e!="symbol"?e+"":e,n);let dt=null;function Ok(t){throw new vd(t.UTF8ToString(t.getLastOnigError()))}class ya{constructor(e){ot(this,"utf16Length"),ot(this,"utf8Length"),ot(this,"utf16Value"),ot(this,"utf8Value"),ot(this,"utf16OffsetToUtf8"),ot(this,"utf8OffsetToUtf16");const n=e.length,r=ya._utf8ByteLength(e),i=r!==n,s=i?new Uint32Array(n+1):null;i&&(s[n]=r);const o=i?new Uint32Array(r+1):null;i&&(o[r]=n);const a=new Uint8Array(r);let l=0;for(let c=0;c<n;c++){const d=e.charCodeAt(c);let u=d,h=!1;if(d>=55296&&d<=56319&&c+1<n){const f=e.charCodeAt(c+1);f>=56320&&f<=57343&&(u=(d-55296<<10)+65536|f-56320,h=!0)}i&&(s[c]=l,h&&(s[c+1]=l),u<=127?o[l+0]=c:u<=2047?(o[l+0]=c,o[l+1]=c):u<=65535?(o[l+0]=c,o[l+1]=c,o[l+2]=c):(o[l+0]=c,o[l+1]=c,o[l+2]=c,o[l+3]=c)),u<=127?a[l++]=u:u<=2047?(a[l++]=192|(u&1984)>>>6,a[l++]=128|(u&63)>>>0):u<=65535?(a[l++]=224|(u&61440)>>>12,a[l++]=128|(u&4032)>>>6,a[l++]=128|(u&63)>>>0):(a[l++]=240|(u&1835008)>>>18,a[l++]=128|(u&258048)>>>12,a[l++]=128|(u&4032)>>>6,a[l++]=128|(u&63)>>>0),h&&c++}this.utf16Length=n,this.utf8Length=r,this.utf16Value=e,this.utf8Value=a,this.utf16OffsetToUtf8=s,this.utf8OffsetToUtf16=o}static _utf8ByteLength(e){let n=0;for(let r=0,i=e.length;r<i;r++){const s=e.charCodeAt(r);let o=s,a=!1;if(s>=55296&&s<=56319&&r+1<i){const l=e.charCodeAt(r+1);l>=56320&&l<=57343&&(o=(s-55296<<10)+65536|l-56320,a=!0)}o<=127?n+=1:o<=2047?n+=2:o<=65535?n+=3:n+=4,a&&r++}return n}createString(e){const n=e.omalloc(this.utf8Length);return e.HEAPU8.set(this.utf8Value,n),n}}const va=class yn{constructor(e){if(ot(this,"id",++yn.LAST_ID),ot(this,"_onigBinding"),ot(this,"content"),ot(this,"utf16Length"),ot(this,"utf8Length"),ot(this,"utf16OffsetToUtf8"),ot(this,"utf8OffsetToUtf16"),ot(this,"ptr"),!dt)throw new vd("Must invoke loadWasm first.");this._onigBinding=dt,this.content=e;const n=new ya(e);this.utf16Length=n.utf16Length,this.utf8Length=n.utf8Length,this.utf16OffsetToUtf8=n.utf16OffsetToUtf8,this.utf8OffsetToUtf16=n.utf8OffsetToUtf16,this.utf8Length<1e4&&!yn._sharedPtrInUse?(yn._sharedPtr||(yn._sharedPtr=dt.omalloc(1e4)),yn._sharedPtrInUse=!0,dt.HEAPU8.set(n.utf8Value,yn._sharedPtr),this.ptr=yn._sharedPtr):this.ptr=n.createString(dt)}convertUtf8OffsetToUtf16(e){return this.utf8OffsetToUtf16?e<0?0:e>this.utf8Length?this.utf16Length:this.utf8OffsetToUtf16[e]:e}convertUtf16OffsetToUtf8(e){return this.utf16OffsetToUtf8?e<0?0:e>this.utf16Length?this.utf8Length:this.utf16OffsetToUtf8[e]:e}dispose(){this.ptr===yn._sharedPtr?yn._sharedPtrInUse=!1:this._onigBinding.ofree(this.ptr)}};ot(va,"LAST_ID",0);ot(va,"_sharedPtr",0);ot(va,"_sharedPtrInUse",!1);let gm=va;class Fk{constructor(e){if(ot(this,"_onigBinding"),ot(this,"_ptr"),!dt)throw new vd("Must invoke loadWasm first.");const n=[],r=[];for(let a=0,l=e.length;a<l;a++){const c=new ya(e[a]);n[a]=c.createString(dt),r[a]=c.utf8Length}const i=dt.omalloc(4*e.length);dt.HEAPU32.set(n,i/4);const s=dt.omalloc(4*e.length);dt.HEAPU32.set(r,s/4);const o=dt.createOnigScanner(i,s,e.length);for(let a=0,l=e.length;a<l;a++)dt.ofree(n[a]);dt.ofree(s),dt.ofree(i),o===0&&Ok(dt),this._onigBinding=dt,this._ptr=o}dispose(){this._onigBinding.freeOnigScanner(this._ptr)}findNextMatchSync(e,n,r){let i=0;if(typeof r=="number"&&(i=r),typeof e=="string"){e=new gm(e);const s=this._findNextMatchSync(e,n,!1,i);return e.dispose(),s}return this._findNextMatchSync(e,n,!1,i)}_findNextMatchSync(e,n,r,i){const s=this._onigBinding,o=s.findNextOnigScannerMatch(this._ptr,e.id,e.ptr,e.utf8Length,e.convertUtf16OffsetToUtf8(n),i);if(o===0)return null;const a=s.HEAPU32;let l=o/4;const c=a[l++],d=a[l++],u=[];for(let h=0;h<d;h++){const f=e.convertUtf8OffsetToUtf16(a[l++]),p=e.convertUtf8OffsetToUtf16(a[l++]);u[h]={start:f,end:p,length:p-f}}return{index:c,captureIndices:u}}}function $k(t){return typeof t.instantiator=="function"}function zk(t){return typeof t.default=="function"}function Bk(t){return typeof t.data<"u"}function Vk(t){return typeof Response<"u"&&t instanceof Response}function Uk(t){return typeof ArrayBuffer<"u"&&(t instanceof ArrayBuffer||ArrayBuffer.isView(t))||typeof Buffer<"u"&&Buffer.isBuffer?.(t)||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer||typeof Uint32Array<"u"&&t instanceof Uint32Array}let Ws;function jk(t){if(Ws)return Ws;async function e(){dt=await Pk(async n=>{let r=t;return r=await r,typeof r=="function"&&(r=await r(n)),typeof r=="function"&&(r=await r(n)),$k(r)?r=await r.instantiator(n):zk(r)?r=await r.default(n):(Bk(r)&&(r=r.data),Vk(r)?typeof WebAssembly.instantiateStreaming=="function"?r=await Hk(r)(n):r=await Wk(r)(n):Uk(r)?r=await sl(r)(n):r instanceof WebAssembly.Module?r=await sl(r)(n):"default"in r&&r.default instanceof WebAssembly.Module&&(r=await sl(r.default)(n))),"instance"in r&&(r=r.instance),"exports"in r&&(r=r.exports),r})}return Ws=e(),Ws}function sl(t){return e=>WebAssembly.instantiate(t,e)}function Hk(t){return e=>WebAssembly.instantiateStreaming(t,e)}function Wk(t){return async e=>{const n=await t.arrayBuffer();return WebAssembly.instantiate(n,e)}}async function qk(t){return t&&await jk(t),{createScanner(e){return new Fk(e.map(n=>typeof n=="string"?n:n.source))},createString(e){return new gm(e)}}}const Kk=xk({langs:Tk,themes:Rk,engine:()=>qk(R(()=>import("./wasm-CG6Dc4jp.js"),[]))});let qs=null,ol=null;function Xk(){const t=ce(!1);async function e(){return qs?(t.value=!0,qs):(ol||(ol=Kk({themes:["github-dark","github-light"],langs:["javascript","typescript","python","bash","json","css","html"]})),qs=await ol,t.value=!0,qs)}async function n(r,i="javascript",s="github-dark"){return(await e()).codeToHtml(r,{lang:i,theme:s})}return Yt(()=>{e()}),{isReady:t,highlight:n,initHighlighter:e}}const Zk={class:"code-block-wrapper"},Yk={key:0,class:"bg-gray-900 dark:bg-gray-950 rounded-lg p-4"},Jk=["innerHTML"],Qk={__name:"CodeBlock",props:{code:{type:String,required:!0},language:{type:String,default:"javascript"},customClass:{type:String,default:""}},setup(t){const e=t,{highlight:n}=Xk(),{darkMode:r}=Sp(),i=ce(""),s=ce(!0),o=Je(()=>r.value?"github-dark":"github-light");async function a(){s.value=!0;try{i.value=await n(e.code,e.language,o.value)}catch(l){console.error("Failed to highlight code:",l),i.value=`<pre class="bg-gray-900 rounded-lg p-4"><code>${e.code}</code></pre>`}finally{s.value=!1}}return ut([()=>e.code,()=>e.language,o],a),Yt(a),(l,c)=>(K(),Y("div",Zk,[s.value?(K(),Y("div",Yk,[...c[0]||(c[0]=[g("div",{class:"animate-pulse"},[g("div",{class:"h-4 bg-gray-700 rounded w-3/4 mb-2"}),g("div",{class:"h-4 bg-gray-700 rounded w-1/2"})],-1)])])):(K(),Y("div",{key:1,innerHTML:i.value,class:Ke(["code-block rounded-lg overflow-x-auto",t.customClass])},null,10,Jk))]))}},vt=xn(Qk,[["__scopeId","data-v-fdf7ed14"]]),eA={class:"relative"},tA={class:"hero-section"},nA={class:"hero-container"},rA={class:"hero-title"},iA={class:"hero-subtitle"},sA={class:"hero-description"},oA={class:"hero-cta"},aA={href:"https://github.com/guinetik/graph-js",target:"_blank",class:"btn-secondary"},lA={class:"features-section"},cA={class:"features-grid"},dA={class:"feature-icon"},uA={class:"feature-title"},hA={class:"feature-description"},fA={class:"code-example-section"},gA={class:"code-example-container"},pA={class:"code-example-card"},mA={class:"code-example-header"},yA={class:"code-example-title"},vA=`npm install @guinetik/graph-js

import NetworkStats from '@guinetik/graph-js';

const network = [
  { source: 'Alice', target: 'Bob', weight: 1 },
  { source: 'Bob', target: 'Carol', weight: 2 },
  { source: 'Carol', target: 'Alice', weight: 1 }
];

const analyzer = new NetworkStats({ verbose: true });
const results = await analyzer.analyze(network, ['degree', 'eigenvector']);

console.log(results);
// Analysis runs in workers for optimal performance!`,_A={__name:"HomePage",setup(t){const{t:e}=hn();return(n,r)=>{const i=zl("router-link");return K(),Y("div",eA,[g("div",tA,[g("div",nA,[g("h1",rA,v(m(e)("home.hero.title")),1),g("p",iA,v(m(e)("home.hero.subtitle")),1),g("p",sA,v(m(e)("home.hero.description")),1),g("div",oA,[Ee(i,{to:"/showcase",class:"btn-primary"},{default:Ue(()=>[Se("  "+v(m(e)("home.hero.cta")),1)]),_:1}),g("a",aA,"  "+v(m(e)("home.hero.github")),1)])])]),g("div",lA,[g("div",cA,[(K(!0),Y(qe,null,an(m(e)("home.features"),(s,o)=>(K(),Y("div",{key:o,class:"feature-card"},[g("div",dA,v(s.icon),1),g("h3",uA,v(s.title),1),g("p",hA,v(s.description),1)]))),128))])]),g("div",fA,[g("div",gA,[g("div",pA,[g("div",mA,[g("span",yA,v(m(e)("home.code.title")),1),r[0]||(r[0]=g("div",{class:"code-example-dots"},[g("div",{class:"code-dot-red"}),g("div",{class:"code-dot-yellow"}),g("div",{class:"code-dot-green"})],-1))]),Ee(vt,{code:vA,language:"javascript"})])])])])}}},bA={class:"demo-layout"},wA={class:"demo-controls-content"},EA={class:"demo-graph"},kA=["aria-label"],AA={key:0,class:"text-2xl"},xA={key:1,class:"text-2xl"},_a={__name:"DemoLayout",setup(t,{expose:e}){const n=ce(!1),r=()=>{n.value=!n.value};return e({toggleControls:r,controlsVisible:n}),(i,s)=>(K(),Y("div",bA,[g("aside",{class:Ke(["demo-controls",n.value?"mobile-visible":"mobile-hidden"])},[g("div",wA,[Bl(i.$slots,"controls")])],2),g("main",EA,[Bl(i.$slots,"graph")]),g("button",{onClick:r,class:"demo-controls-toggle lg:hidden","aria-label":n.value?"Close controls":"Open controls"},[n.value?(K(),Y("span",xA,"")):(K(),Y("span",AA,""))],8,kA)]))}},CA={class:"layout-picker"},SA={class:"space-y-2"},TA={class:"block text-sm font-medium text-secondary"},NA=["disabled"],RA={key:0},LA={key:1},IA={key:0,class:"info-box-yellow mt-3"},DA={class:"text-xs text-yellow-800 dark:text-yellow-200"},PA={__name:"LayoutPicker",props:{modelValue:{type:String,required:!0},availableLayouts:{type:Array,required:!0},loading:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},emits:["update:modelValue","apply"],setup(t,{emit:e}){const{t:n}=hn(),r=t,i=Je(()=>r.availableLayouts.find(s=>s.id===r.modelValue));return(s,o)=>(K(),Y("div",CA,[g("div",SA,[g("label",TA,v(m(n)("showcase.layoutPicker.chooseLayout")),1),Ee(Mr,{"model-value":t.modelValue,"onUpdate:modelValue":o[0]||(o[0]=a=>s.$emit("update:modelValue",a)),options:t.availableLayouts.map(a=>({value:a.id,label:a.name})),disabled:t.disabled,placeholder:m(n)("showcase.layoutPicker.chooseLayout")},null,8,["model-value","options","disabled","placeholder"])]),g("button",{onClick:o[1]||(o[1]=a=>s.$emit("apply")),disabled:t.disabled||t.loading,class:"w-full bg-purple-600 hover:bg-purple-700 disabled:bg-gray-400 text-white px-4 py-3 rounded-md font-semibold transition-colors mt-3"},[t.loading?(K(),Y("span",LA,v(m(n)("showcase.layoutPicker.applyingButton")),1)):(K(),Y("span",RA,v(m(n)("showcase.layoutPicker.applyButton")),1))],8,NA),t.modelValue!=="none"&&i.value?(K(),Y("div",IA,[g("p",DA,[g("strong",null,v(i.value.name)+":",1),Se(" "+v(i.value.description),1)])])):Ge("",!0)]))}},ba=xn(PA,[["__scopeId","data-v-90a2a591"]]),GA={class:"community-picker"},MA={class:"space-y-2"},OA={class:"block text-sm font-medium text-secondary"},FA=["disabled"],$A={key:0},zA={key:1},BA={__name:"CommunityPicker",props:{modelValue:{type:String,required:!0},availableAlgorithms:{type:Array,required:!0},detecting:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},label:{type:String,default:""}},emits:["update:modelValue","detect"],setup(t,{emit:e}){const{t:n}=hn();return(r,i)=>(K(),Y("div",GA,[g("div",MA,[g("label",OA,v(t.label||m(n)("showcase.communityPicker.chooseAlgorithm")),1),Ee(Mr,{"model-value":t.modelValue,"onUpdate:modelValue":i[0]||(i[0]=s=>r.$emit("update:modelValue",s)),options:t.availableAlgorithms.map(s=>({value:s.id,label:s.name})),disabled:t.disabled,placeholder:t.label||m(n)("showcase.communityPicker.chooseAlgorithm")},null,8,["model-value","options","disabled","placeholder"])]),g("button",{onClick:i[1]||(i[1]=s=>r.$emit("detect")),disabled:t.disabled||t.detecting,class:"w-full bg-orange-600 hover:bg-orange-700 disabled:bg-gray-400 text-white px-4 py-3 rounded-md font-semibold transition-colors mt-3"},[t.detecting?(K(),Y("span",zA,v(m(n)("showcase.communityPicker.detectingButton")),1)):(K(),Y("span",$A,v(m(n)("showcase.communityPicker.detectButton")),1))],8,FA),Bl(r.$slots,"results",{},void 0,!0)]))}},pm=xn(BA,[["__scopeId","data-v-cf313cf9"]]),VA={class:"network-analysis"},UA={class:"bg-[var(--color-bg-secondary)] rounded-md p-4 space-y-2 mb-3"},jA={class:"flex items-center justify-between mb-2"},HA={class:"text-sm font-semibold text-primary"},WA={class:"space-y-2"},qA=["checked"],KA={class:"text-secondary"},XA=["checked"],ZA={class:"text-secondary"},YA=["checked"],JA={class:"text-secondary"},QA=["checked"],ex={class:"text-secondary"},tx=["checked"],nx={class:"text-secondary"},rx=["checked"],ix={class:"text-secondary"},sx=["checked"],ox={class:"text-secondary"},ax=["checked"],lx={class:"text-secondary"},cx=["checked"],dx={class:"text-secondary"},ux={class:"space-y-2 mb-3"},hx={class:"block text-sm font-medium text-secondary"},fx=["disabled"],gx={key:0},px={key:1},mx={key:0,class:"mt-3 pt-3 border-t border-[var(--color-border)]"},yx={class:"flex items-center gap-2 text-sm cursor-pointer"},vx=["checked"],_x={class:"text-secondary"},bx={class:"text-xs text-secondary mt-1 ml-6"},wx={key:1,class:"mt-2"},Ex={class:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2"},kx={class:"text-xs text-secondary mt-1 text-center"},Ax={__name:"NetworkAnalysis",props:{selectedMetrics:{type:Array,required:!0},sizeMetric:{type:String,default:""},analyzing:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},progress:{type:Number,default:0},showSpectralMetric:{type:Boolean,default:!1},hasCliques:{type:Boolean,default:!1},showCliqueEdges:{type:Boolean,default:!1}},emits:["update:selectedMetrics","update:sizeMetric","update:showCliqueEdges","analyze"],setup(t,{emit:e}){const{t:n}=hn(),{showTooltipAt:r,hideTooltip:i}=Tp(),s=t,o=e,a=Je(()=>{const h=["degree","betweenness","clustering","eigenvector","pagerank","cliques","closeness","ego-density"];return s.showSpectralMetric&&h.push("eigenvector-laplacian"),h}),l=Je(()=>a.value.every(h=>s.selectedMetrics.includes(h))),c=()=>{l.value?o("update:selectedMetrics",[]):o("update:selectedMetrics",[...a.value])},d=Je(()=>{const h=[],f={degree:n("showcase.networkAnalysis.degreeName"),betweenness:n("showcase.networkAnalysis.betweennessName"),clustering:n("showcase.networkAnalysis.clusteringName"),eigenvector:n("showcase.networkAnalysis.eigenvectorName"),pagerank:n("showcase.networkAnalysis.pageRankName"),cliques:n("showcase.networkAnalysis.cliquesName"),closeness:n("showcase.networkAnalysis.closenessName"),"ego-density":n("showcase.networkAnalysis.egoDensityName")};return Object.keys(f).forEach(p=>{s.selectedMetrics.includes(p)&&h.push({value:p,label:f[p]})}),h}),u=(h,f)=>{let p=[...s.selectedMetrics];f?p.includes(h)||p.push(h):p=p.filter(y=>y!==h),o("update:selectedMetrics",p)};return(h,f)=>(K(),Y("div",VA,[g("div",UA,[g("div",jA,[g("h3",HA,v(m(n)("showcase.networkAnalysis.metricsTitle")),1),g("button",{onClick:c,class:"text-xs text-purple-600 dark:text-purple-400 hover:text-purple-700 dark:hover:text-purple-300 font-medium transition-colors"},v(l.value?m(n)("showcase.networkAnalysis.unselectAll"):m(n)("showcase.networkAnalysis.selectAll")),1)]),g("div",WA,[g("label",{class:"metric-checkbox-label",onMouseenter:f[1]||(f[1]=p=>m(r)(p,m(n)("showcase.networkAnalysis.degreeDescription"))),onMouseleave:f[2]||(f[2]=(...p)=>m(i)&&m(i)(...p))},[g("input",{type:"checkbox",checked:t.selectedMetrics.includes("degree"),onChange:f[0]||(f[0]=p=>u("degree",p.target.checked)),class:"metric-checkbox"},null,40,qA),f[30]||(f[30]=g("span",{class:"metric-checkbox-custom"},null,-1)),g("span",KA,v(m(n)("showcase.networkAnalysis.degreeCentrality")),1)],32),g("label",{class:"metric-checkbox-label tooltip-container",onMouseenter:f[4]||(f[4]=p=>m(r)(p,m(n)("showcase.networkAnalysis.betweennessDescription"))),onMouseleave:f[5]||(f[5]=(...p)=>m(i)&&m(i)(...p))},[g("input",{type:"checkbox",checked:t.selectedMetrics.includes("betweenness"),onChange:f[3]||(f[3]=p=>u("betweenness",p.target.checked)),class:"metric-checkbox"},null,40,XA),f[31]||(f[31]=g("span",{class:"metric-checkbox-custom"},null,-1)),g("span",ZA,v(m(n)("showcase.networkAnalysis.betweennessCentrality")),1)],32),g("label",{class:"metric-checkbox-label",onMouseenter:f[7]||(f[7]=p=>m(r)(p,m(n)("showcase.networkAnalysis.clusteringDescription"))),onMouseleave:f[8]||(f[8]=(...p)=>m(i)&&m(i)(...p))},[g("input",{type:"checkbox",checked:t.selectedMetrics.includes("clustering"),onChange:f[6]||(f[6]=p=>u("clustering",p.target.checked)),class:"metric-checkbox"},null,40,YA),f[32]||(f[32]=g("span",{class:"metric-checkbox-custom"},null,-1)),g("span",JA,v(m(n)("showcase.networkAnalysis.clusteringCoefficient")),1)],32),g("label",{class:"metric-checkbox-label",onMouseenter:f[10]||(f[10]=p=>m(r)(p,m(n)("showcase.networkAnalysis.eigenvectorDescription"))),onMouseleave:f[11]||(f[11]=(...p)=>m(i)&&m(i)(...p))},[g("input",{type:"checkbox",checked:t.selectedMetrics.includes("eigenvector"),onChange:f[9]||(f[9]=p=>u("eigenvector",p.target.checked)),class:"metric-checkbox"},null,40,QA),f[33]||(f[33]=g("span",{class:"metric-checkbox-custom"},null,-1)),g("span",ex,v(m(n)("showcase.networkAnalysis.eigenvectorCentrality")),1)],32),g("label",{class:"metric-checkbox-label",onMouseenter:f[13]||(f[13]=p=>m(r)(p,m(n)("showcase.networkAnalysis.pagerankDescription"))),onMouseleave:f[14]||(f[14]=(...p)=>m(i)&&m(i)(...p))},[g("input",{type:"checkbox",checked:t.selectedMetrics.includes("pagerank"),onChange:f[12]||(f[12]=p=>u("pagerank",p.target.checked)),class:"metric-checkbox"},null,40,tx),f[34]||(f[34]=g("span",{class:"metric-checkbox-custom"},null,-1)),g("span",nx,v(m(n)("showcase.networkAnalysis.pageRankCentrality")),1)],32),g("label",{class:"metric-checkbox-label",onMouseenter:f[16]||(f[16]=p=>m(r)(p,m(n)("showcase.networkAnalysis.cliquesDescription"))),onMouseleave:f[17]||(f[17]=(...p)=>m(i)&&m(i)(...p))},[g("input",{type:"checkbox",checked:t.selectedMetrics.includes("cliques"),onChange:f[15]||(f[15]=p=>u("cliques",p.target.checked)),class:"metric-checkbox"},null,40,rx),f[35]||(f[35]=g("span",{class:"metric-checkbox-custom"},null,-1)),g("span",ix,v(m(n)("showcase.networkAnalysis.cliqueCount")),1)],32),g("label",{class:"metric-checkbox-label",onMouseenter:f[19]||(f[19]=p=>m(r)(p,m(n)("showcase.networkAnalysis.closenessDescription"))),onMouseleave:f[20]||(f[20]=(...p)=>m(i)&&m(i)(...p))},[g("input",{type:"checkbox",checked:t.selectedMetrics.includes("closeness"),onChange:f[18]||(f[18]=p=>u("closeness",p.target.checked)),class:"metric-checkbox"},null,40,sx),f[36]||(f[36]=g("span",{class:"metric-checkbox-custom"},null,-1)),g("span",ox,v(m(n)("showcase.networkAnalysis.closenessCentrality")),1)],32),g("label",{class:"metric-checkbox-label",onMouseenter:f[22]||(f[22]=p=>m(r)(p,m(n)("showcase.networkAnalysis.egoDensityDescription"))),onMouseleave:f[23]||(f[23]=(...p)=>m(i)&&m(i)(...p))},[g("input",{type:"checkbox",checked:t.selectedMetrics.includes("ego-density"),onChange:f[21]||(f[21]=p=>u("ego-density",p.target.checked)),class:"metric-checkbox"},null,40,ax),f[37]||(f[37]=g("span",{class:"metric-checkbox-custom"},null,-1)),g("span",lx,v(m(n)("showcase.networkAnalysis.egoDensity")),1)],32),t.showSpectralMetric?(K(),Y("label",{key:0,class:"metric-checkbox-label",onMouseenter:f[25]||(f[25]=p=>m(r)(p,m(n)("showcase.networkAnalysis.eigenvectorLaplacianDescription"))),onMouseleave:f[26]||(f[26]=(...p)=>m(i)&&m(i)(...p))},[g("input",{type:"checkbox",checked:t.selectedMetrics.includes("eigenvector-laplacian"),onChange:f[24]||(f[24]=p=>u("eigenvector-laplacian",p.target.checked)),class:"metric-checkbox"},null,40,cx),f[38]||(f[38]=g("span",{class:"metric-checkbox-custom"},null,-1)),g("span",dx,v(m(n)("showcase.networkAnalysis.eigenvectorLaplacian")),1)],32)):Ge("",!0)])]),g("div",ux,[g("label",hx,v(m(n)("showcase.networkAnalysis.nodeSizeLabel")),1),Ee(Mr,{"model-value":t.sizeMetric,"onUpdate:modelValue":f[27]||(f[27]=p=>h.$emit("update:sizeMetric",p)),options:d.value,disabled:t.disabled||t.selectedMetrics.length===0,placeholder:m(n)("showcase.networkAnalysis.selectMetric")},null,8,["model-value","options","disabled","placeholder"])]),g("button",{onClick:f[28]||(f[28]=p=>h.$emit("analyze")),disabled:t.disabled||t.analyzing||t.selectedMetrics.length===0,class:"w-full bg-purple-600 hover:bg-purple-700 disabled:bg-gray-400 text-white px-4 py-3 rounded-md font-semibold transition-colors"},[t.analyzing?(K(),Y("span",px,v(m(n)("showcase.networkAnalysis.analyzingButton")),1)):(K(),Y("span",gx,v(m(n)("showcase.networkAnalysis.analyzeButton")),1))],8,fx),t.hasCliques?(K(),Y("div",mx,[g("label",yx,[g("input",{type:"checkbox",checked:t.showCliqueEdges,onChange:f[29]||(f[29]=p=>h.$emit("update:showCliqueEdges",p.target.checked)),class:"rounded"},null,40,vx),g("span",_x,v(m(n)("showcase.networkAnalysis.highlightCliqueEdges")),1)]),g("p",bx,v(m(n)("showcase.networkAnalysis.cliqueEdgesDescription")),1)])):Ge("",!0),t.analyzing&&t.progress>0?(K(),Y("div",wx,[g("div",Ex,[g("div",{class:"bg-purple-600 h-2 rounded-full transition-all duration-300",style:xs({width:`${t.progress*100}%`})},null,4)]),g("p",kx,v(Math.round(t.progress*100))+"% ",1)])):Ge("",!0)]))}},wa=xn(Ax,[["__scopeId","data-v-439c0ceb"]]);function yo(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function xx(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function mm(t){let e,n,r;t.length!==2?(e=yo,n=(a,l)=>yo(t(a),l),r=(a,l)=>t(a)-l):(e=t===yo||t===xx?t:Cx,n=t,r=t);function i(a,l,c=0,d=a.length){if(c<d){if(e(l,l)!==0)return d;do{const u=c+d>>>1;n(a[u],l)<0?c=u+1:d=u}while(c<d)}return c}function s(a,l,c=0,d=a.length){if(c<d){if(e(l,l)!==0)return d;do{const u=c+d>>>1;n(a[u],l)<=0?c=u+1:d=u}while(c<d)}return c}function o(a,l,c=0,d=a.length){const u=i(a,l,c,d-1);return u>c&&r(a[u-1],l)>-r(a[u],l)?u-1:u}return{left:i,center:o,right:s}}function Cx(){return 0}function Sx(t){return t===null?NaN:+t}const Tx=mm(yo),Nx=Tx.right;mm(Sx).center;class bh extends Map{constructor(e,n=Ix){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(wh(this,e))}has(e){return super.has(wh(this,e))}set(e,n){return super.set(Rx(this,e),n)}delete(e){return super.delete(Lx(this,e))}}function wh({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function Rx({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function Lx({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function Ix(t){return t!==null&&typeof t=="object"?t.valueOf():t}const Dx=Math.sqrt(50),Px=Math.sqrt(10),Gx=Math.sqrt(2);function jo(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),o=s>=Dx?10:s>=Px?5:s>=Gx?2:1;let a,l,c;return i<0?(c=Math.pow(10,-i)/o,a=Math.round(t*c),l=Math.round(e*c),a/c<t&&++a,l/c>e&&--l,c=-c):(c=Math.pow(10,i)*o,a=Math.round(t/c),l=Math.round(e/c),a*c<t&&++a,l*c>e&&--l),l<a&&.5<=n&&n<2?jo(t,e,n*2):[a,l,c]}function Mx(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,s,o]=r?jo(e,t,n):jo(t,e,n);if(!(s>=i))return[];const a=s-i+1,l=new Array(a);if(r)if(o<0)for(let c=0;c<a;++c)l[c]=(s-c)/-o;else for(let c=0;c<a;++c)l[c]=(s-c)*o;else if(o<0)for(let c=0;c<a;++c)l[c]=(i+c)/-o;else for(let c=0;c<a;++c)l[c]=(i+c)*o;return l}function fc(t,e,n){return e=+e,t=+t,n=+n,jo(t,e,n)[2]}function Ox(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?fc(e,t,n):fc(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}var Fx={value:()=>{}};function Ls(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new vo(n)}function vo(t){this._=t}function $x(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}vo.prototype=Ls.prototype={constructor:vo,on:function(t,e){var n=this._,r=$x(t+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(t=r[s]).type)&&(i=zx(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<o;)if(i=(t=r[s]).type)n[i]=Eh(n[i],t.name,e);else if(e==null)for(i in n)n[i]=Eh(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new vo(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=this._[t],r=0,i=s.length;r<i;++r)s[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,s=r.length;i<s;++i)r[i].value.apply(e,n)}};function zx(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function Eh(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=Fx,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var gc="http://www.w3.org/1999/xhtml";const kh={svg:"http://www.w3.org/2000/svg",xhtml:gc,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ea(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),kh.hasOwnProperty(e)?{space:kh[e],local:t}:t}function Bx(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===gc&&e.documentElement.namespaceURI===gc?e.createElement(t):e.createElementNS(n,t)}}function Vx(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function ym(t){var e=Ea(t);return(e.local?Vx:Bx)(e)}function Ux(){}function _d(t){return t==null?Ux:function(){return this.querySelector(t)}}function jx(t){typeof t!="function"&&(t=_d(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],o=s.length,a=r[i]=new Array(o),l,c,d=0;d<o;++d)(l=s[d])&&(c=t.call(l,l.__data__,d,s))&&("__data__"in l&&(c.__data__=l.__data__),a[d]=c);return new Vt(r,this._parents)}function Hx(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function Wx(){return[]}function vm(t){return t==null?Wx:function(){return this.querySelectorAll(t)}}function qx(t){return function(){return Hx(t.apply(this,arguments))}}function Kx(t){typeof t=="function"?t=qx(t):t=vm(t);for(var e=this._groups,n=e.length,r=[],i=[],s=0;s<n;++s)for(var o=e[s],a=o.length,l,c=0;c<a;++c)(l=o[c])&&(r.push(t.call(l,l.__data__,c,o)),i.push(l));return new Vt(r,i)}function _m(t){return function(){return this.matches(t)}}function bm(t){return function(e){return e.matches(t)}}var Xx=Array.prototype.find;function Zx(t){return function(){return Xx.call(this.children,t)}}function Yx(){return this.firstElementChild}function Jx(t){return this.select(t==null?Yx:Zx(typeof t=="function"?t:bm(t)))}var Qx=Array.prototype.filter;function eC(){return Array.from(this.children)}function tC(t){return function(){return Qx.call(this.children,t)}}function nC(t){return this.selectAll(t==null?eC:tC(typeof t=="function"?t:bm(t)))}function rC(t){typeof t!="function"&&(t=_m(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],o=s.length,a=r[i]=[],l,c=0;c<o;++c)(l=s[c])&&t.call(l,l.__data__,c,s)&&a.push(l);return new Vt(r,this._parents)}function wm(t){return new Array(t.length)}function iC(){return new Vt(this._enter||this._groups.map(wm),this._parents)}function Ho(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}Ho.prototype={constructor:Ho,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function sC(t){return function(){return t}}function oC(t,e,n,r,i,s){for(var o=0,a,l=e.length,c=s.length;o<c;++o)(a=e[o])?(a.__data__=s[o],r[o]=a):n[o]=new Ho(t,s[o]);for(;o<l;++o)(a=e[o])&&(i[o]=a)}function aC(t,e,n,r,i,s,o){var a,l,c=new Map,d=e.length,u=s.length,h=new Array(d),f;for(a=0;a<d;++a)(l=e[a])&&(h[a]=f=o.call(l,l.__data__,a,e)+"",c.has(f)?i[a]=l:c.set(f,l));for(a=0;a<u;++a)f=o.call(t,s[a],a,s)+"",(l=c.get(f))?(r[a]=l,l.__data__=s[a],c.delete(f)):n[a]=new Ho(t,s[a]);for(a=0;a<d;++a)(l=e[a])&&c.get(h[a])===l&&(i[a]=l)}function lC(t){return t.__data__}function cC(t,e){if(!arguments.length)return Array.from(this,lC);var n=e?aC:oC,r=this._parents,i=this._groups;typeof t!="function"&&(t=sC(t));for(var s=i.length,o=new Array(s),a=new Array(s),l=new Array(s),c=0;c<s;++c){var d=r[c],u=i[c],h=u.length,f=dC(t.call(d,d&&d.__data__,c,r)),p=f.length,y=a[c]=new Array(p),w=o[c]=new Array(p),b=l[c]=new Array(h);n(d,u,y,w,b,f,e);for(var E=0,k=0,_,x;E<p;++E)if(_=y[E]){for(E>=k&&(k=E+1);!(x=w[k])&&++k<p;);_._next=x||null}}return o=new Vt(o,r),o._enter=a,o._exit=l,o}function dC(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function uC(){return new Vt(this._exit||this._groups.map(wm),this._parents)}function hC(t,e,n){var r=this.enter(),i=this,s=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function fC(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,s=r.length,o=Math.min(i,s),a=new Array(i),l=0;l<o;++l)for(var c=n[l],d=r[l],u=c.length,h=a[l]=new Array(u),f,p=0;p<u;++p)(f=c[p]||d[p])&&(h[p]=f);for(;l<i;++l)a[l]=n[l];return new Vt(a,this._parents)}function gC(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,s=r[i],o;--i>=0;)(o=r[i])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function pC(t){t||(t=mC);function e(u,h){return u&&h?t(u.__data__,h.__data__):!u-!h}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o=n[s],a=o.length,l=i[s]=new Array(a),c,d=0;d<a;++d)(c=o[d])&&(l[d]=c);l.sort(e)}return new Vt(i,this._parents).order()}function mC(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function yC(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function vC(){return Array.from(this)}function _C(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function bC(){let t=0;for(const e of this)++t;return t}function wC(){return!this.node()}function EC(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],s=0,o=i.length,a;s<o;++s)(a=i[s])&&t.call(a,a.__data__,s,i);return this}function kC(t){return function(){this.removeAttribute(t)}}function AC(t){return function(){this.removeAttributeNS(t.space,t.local)}}function xC(t,e){return function(){this.setAttribute(t,e)}}function CC(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function SC(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function TC(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function NC(t,e){var n=Ea(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?AC:kC:typeof e=="function"?n.local?TC:SC:n.local?CC:xC)(n,e))}function Em(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function RC(t){return function(){this.style.removeProperty(t)}}function LC(t,e,n){return function(){this.style.setProperty(t,e,n)}}function IC(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function DC(t,e,n){return arguments.length>1?this.each((e==null?RC:typeof e=="function"?IC:LC)(t,e,n??"")):vi(this.node(),t)}function vi(t,e){return t.style.getPropertyValue(e)||Em(t).getComputedStyle(t,null).getPropertyValue(e)}function PC(t){return function(){delete this[t]}}function GC(t,e){return function(){this[t]=e}}function MC(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function OC(t,e){return arguments.length>1?this.each((e==null?PC:typeof e=="function"?MC:GC)(t,e)):this.node()[t]}function km(t){return t.trim().split(/^|\s+/)}function bd(t){return t.classList||new Am(t)}function Am(t){this._node=t,this._names=km(t.getAttribute("class")||"")}Am.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function xm(t,e){for(var n=bd(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function Cm(t,e){for(var n=bd(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function FC(t){return function(){xm(this,t)}}function $C(t){return function(){Cm(this,t)}}function zC(t,e){return function(){(e.apply(this,arguments)?xm:Cm)(this,t)}}function BC(t,e){var n=km(t+"");if(arguments.length<2){for(var r=bd(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?zC:e?FC:$C)(n,e))}function VC(){this.textContent=""}function UC(t){return function(){this.textContent=t}}function jC(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function HC(t){return arguments.length?this.each(t==null?VC:(typeof t=="function"?jC:UC)(t)):this.node().textContent}function WC(){this.innerHTML=""}function qC(t){return function(){this.innerHTML=t}}function KC(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function XC(t){return arguments.length?this.each(t==null?WC:(typeof t=="function"?KC:qC)(t)):this.node().innerHTML}function ZC(){this.nextSibling&&this.parentNode.appendChild(this)}function YC(){return this.each(ZC)}function JC(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function QC(){return this.each(JC)}function eS(t){var e=typeof t=="function"?t:ym(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function tS(){return null}function nS(t,e){var n=typeof t=="function"?t:ym(t),r=e==null?tS:typeof e=="function"?e:_d(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function rS(){var t=this.parentNode;t&&t.removeChild(this)}function iS(){return this.each(rS)}function sS(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function oS(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function aS(t){return this.select(t?oS:sS)}function lS(t){return arguments.length?this.property("__data__",t):this.node().__data__}function cS(t){return function(e){t.call(this,e,this.__data__)}}function dS(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function uS(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,s;n<i;++n)s=e[n],(!t.type||s.type===t.type)&&s.name===t.name?this.removeEventListener(s.type,s.listener,s.options):e[++r]=s;++r?e.length=r:delete this.__on}}}function hS(t,e,n){return function(){var r=this.__on,i,s=cS(e);if(r){for(var o=0,a=r.length;o<a;++o)if((i=r[o]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=e;return}}this.addEventListener(t.type,s,n),i={type:t.type,name:t.name,value:e,listener:s,options:n},r?r.push(i):this.__on=[i]}}function fS(t,e,n){var r=dS(t+""),i,s=r.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,c=a.length,d;l<c;++l)for(i=0,d=a[l];i<s;++i)if((o=r[i]).type===d.type&&o.name===d.name)return d.value}return}for(a=e?hS:uS,i=0;i<s;++i)this.each(a(r[i],e,n));return this}function Sm(t,e,n){var r=Em(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function gS(t,e){return function(){return Sm(this,t,e)}}function pS(t,e){return function(){return Sm(this,t,e.apply(this,arguments))}}function mS(t,e){return this.each((typeof e=="function"?pS:gS)(t,e))}function*yS(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,s=r.length,o;i<s;++i)(o=r[i])&&(yield o)}var Tm=[null];function Vt(t,e){this._groups=t,this._parents=e}function Is(){return new Vt([[document.documentElement]],Tm)}function vS(){return this}Vt.prototype=Is.prototype={constructor:Vt,select:jx,selectAll:Kx,selectChild:Jx,selectChildren:nC,filter:rC,data:cC,enter:iC,exit:uC,join:hC,merge:fC,selection:vS,order:gC,sort:pC,call:yC,nodes:vC,node:_C,size:bC,empty:wC,each:EC,attr:NC,style:DC,property:OC,classed:BC,text:HC,html:XC,raise:YC,lower:QC,append:eS,insert:nS,remove:iS,clone:aS,datum:lS,on:fS,dispatch:mS,[Symbol.iterator]:yS};function Gt(t){return typeof t=="string"?new Vt([[document.querySelector(t)]],[document.documentElement]):new Vt([[t]],Tm)}function _S(t){let e;for(;e=t.sourceEvent;)t=e;return t}function On(t,e){if(t=_S(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}const bS={passive:!1},vs={capture:!0,passive:!1};function al(t){t.stopImmediatePropagation()}function li(t){t.preventDefault(),t.stopImmediatePropagation()}function Nm(t){var e=t.document.documentElement,n=Gt(t).on("dragstart.drag",li,vs);"onselectstart"in e?n.on("selectstart.drag",li,vs):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function Rm(t,e){var n=t.document.documentElement,r=Gt(t).on("dragstart.drag",null);e&&(r.on("click.drag",li,vs),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Ks=t=>()=>t;function pc(t,{sourceEvent:e,subject:n,target:r,identifier:i,active:s,x:o,y:a,dx:l,dy:c,dispatch:d}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:o,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:d}})}pc.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function wS(t){return!t.ctrlKey&&!t.button}function ES(){return this.parentNode}function kS(t,e){return e??{x:t.x,y:t.y}}function AS(){return navigator.maxTouchPoints||"ontouchstart"in this}function xS(){var t=wS,e=ES,n=kS,r=AS,i={},s=Ls("start","drag","end"),o=0,a,l,c,d,u=0;function h(_){_.on("mousedown.drag",f).filter(r).on("touchstart.drag",w).on("touchmove.drag",b,bS).on("touchend.drag touchcancel.drag",E).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function f(_,x){if(!(d||!t.call(this,_,x))){var T=k(this,e.call(this,_,x),_,x,"mouse");T&&(Gt(_.view).on("mousemove.drag",p,vs).on("mouseup.drag",y,vs),Nm(_.view),al(_),c=!1,a=_.clientX,l=_.clientY,T("start",_))}}function p(_){if(li(_),!c){var x=_.clientX-a,T=_.clientY-l;c=x*x+T*T>u}i.mouse("drag",_)}function y(_){Gt(_.view).on("mousemove.drag mouseup.drag",null),Rm(_.view,c),li(_),i.mouse("end",_)}function w(_,x){if(t.call(this,_,x)){var T=_.changedTouches,L=e.call(this,_,x),O=T.length,F,$;for(F=0;F<O;++F)($=k(this,L,_,x,T[F].identifier,T[F]))&&(al(_),$("start",_,T[F]))}}function b(_){var x=_.changedTouches,T=x.length,L,O;for(L=0;L<T;++L)(O=i[x[L].identifier])&&(li(_),O("drag",_,x[L]))}function E(_){var x=_.changedTouches,T=x.length,L,O;for(d&&clearTimeout(d),d=setTimeout(function(){d=null},500),L=0;L<T;++L)(O=i[x[L].identifier])&&(al(_),O("end",_,x[L]))}function k(_,x,T,L,O,F){var $=s.copy(),j=On(F||T,x),z,I,A;if((A=n.call(_,new pc("beforestart",{sourceEvent:T,target:h,identifier:O,active:o,x:j[0],y:j[1],dx:0,dy:0,dispatch:$}),L))!=null)return z=A.x-j[0]||0,I=A.y-j[1]||0,function D(C,S,U){var H=j,ne;switch(C){case"start":i[O]=D,ne=o++;break;case"end":delete i[O],--o;case"drag":j=On(U||S,x),ne=o;break}$.call(C,_,new pc(C,{sourceEvent:S,subject:A,target:h,identifier:O,active:ne,x:j[0]+z,y:j[1]+I,dx:j[0]-H[0],dy:j[1]-H[1],dispatch:$}),L)}}return h.filter=function(_){return arguments.length?(t=typeof _=="function"?_:Ks(!!_),h):t},h.container=function(_){return arguments.length?(e=typeof _=="function"?_:Ks(_),h):e},h.subject=function(_){return arguments.length?(n=typeof _=="function"?_:Ks(_),h):n},h.touchable=function(_){return arguments.length?(r=typeof _=="function"?_:Ks(!!_),h):r},h.on=function(){var _=s.on.apply(s,arguments);return _===s?h:_},h.clickDistance=function(_){return arguments.length?(u=(_=+_)*_,h):Math.sqrt(u)},h}function wd(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Lm(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Ds(){}var _s=.7,Wo=1/_s,ci="\\s*([+-]?\\d+)\\s*",bs="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",kn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",CS=/^#([0-9a-f]{3,8})$/,SS=new RegExp(`^rgb\\(${ci},${ci},${ci}\\)$`),TS=new RegExp(`^rgb\\(${kn},${kn},${kn}\\)$`),NS=new RegExp(`^rgba\\(${ci},${ci},${ci},${bs}\\)$`),RS=new RegExp(`^rgba\\(${kn},${kn},${kn},${bs}\\)$`),LS=new RegExp(`^hsl\\(${bs},${kn},${kn}\\)$`),IS=new RegExp(`^hsla\\(${bs},${kn},${kn},${bs}\\)$`),Ah={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};wd(Ds,Or,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:xh,formatHex:xh,formatHex8:DS,formatHsl:PS,formatRgb:Ch,toString:Ch});function xh(){return this.rgb().formatHex()}function DS(){return this.rgb().formatHex8()}function PS(){return Im(this).formatHsl()}function Ch(){return this.rgb().formatRgb()}function Or(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=CS.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?Sh(e):n===3?new Mt(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Xs(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Xs(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=SS.exec(t))?new Mt(e[1],e[2],e[3],1):(e=TS.exec(t))?new Mt(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=NS.exec(t))?Xs(e[1],e[2],e[3],e[4]):(e=RS.exec(t))?Xs(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=LS.exec(t))?Rh(e[1],e[2]/100,e[3]/100,1):(e=IS.exec(t))?Rh(e[1],e[2]/100,e[3]/100,e[4]):Ah.hasOwnProperty(t)?Sh(Ah[t]):t==="transparent"?new Mt(NaN,NaN,NaN,0):null}function Sh(t){return new Mt(t>>16&255,t>>8&255,t&255,1)}function Xs(t,e,n,r){return r<=0&&(t=e=n=NaN),new Mt(t,e,n,r)}function GS(t){return t instanceof Ds||(t=Or(t)),t?(t=t.rgb(),new Mt(t.r,t.g,t.b,t.opacity)):new Mt}function mc(t,e,n,r){return arguments.length===1?GS(t):new Mt(t,e,n,r??1)}function Mt(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}wd(Mt,mc,Lm(Ds,{brighter(t){return t=t==null?Wo:Math.pow(Wo,t),new Mt(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?_s:Math.pow(_s,t),new Mt(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Mt(Dr(this.r),Dr(this.g),Dr(this.b),qo(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Th,formatHex:Th,formatHex8:MS,formatRgb:Nh,toString:Nh}));function Th(){return`#${Rr(this.r)}${Rr(this.g)}${Rr(this.b)}`}function MS(){return`#${Rr(this.r)}${Rr(this.g)}${Rr(this.b)}${Rr((isNaN(this.opacity)?1:this.opacity)*255)}`}function Nh(){const t=qo(this.opacity);return`${t===1?"rgb(":"rgba("}${Dr(this.r)}, ${Dr(this.g)}, ${Dr(this.b)}${t===1?")":`, ${t})`}`}function qo(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Dr(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Rr(t){return t=Dr(t),(t<16?"0":"")+t.toString(16)}function Rh(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new rn(t,e,n,r)}function Im(t){if(t instanceof rn)return new rn(t.h,t.s,t.l,t.opacity);if(t instanceof Ds||(t=Or(t)),!t)return new rn;if(t instanceof rn)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),s=Math.max(e,n,r),o=NaN,a=s-i,l=(s+i)/2;return a?(e===s?o=(n-r)/a+(n<r)*6:n===s?o=(r-e)/a+2:o=(e-n)/a+4,a/=l<.5?s+i:2-s-i,o*=60):a=l>0&&l<1?0:o,new rn(o,a,l,t.opacity)}function OS(t,e,n,r){return arguments.length===1?Im(t):new rn(t,e,n,r??1)}function rn(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}wd(rn,OS,Lm(Ds,{brighter(t){return t=t==null?Wo:Math.pow(Wo,t),new rn(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?_s:Math.pow(_s,t),new rn(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Mt(ll(t>=240?t-240:t+120,i,r),ll(t,i,r),ll(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new rn(Lh(this.h),Zs(this.s),Zs(this.l),qo(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=qo(this.opacity);return`${t===1?"hsl(":"hsla("}${Lh(this.h)}, ${Zs(this.s)*100}%, ${Zs(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Lh(t){return t=(t||0)%360,t<0?t+360:t}function Zs(t){return Math.max(0,Math.min(1,t||0))}function ll(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const Ed=t=>()=>t;function FS(t,e){return function(n){return t+n*e}}function $S(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function zS(t){return(t=+t)==1?Dm:function(e,n){return n-e?$S(e,n,t):Ed(isNaN(e)?n:e)}}function Dm(t,e){var n=e-t;return n?FS(t,n):Ed(isNaN(t)?e:t)}const Ko=(function t(e){var n=zS(e);function r(i,s){var o=n((i=mc(i)).r,(s=mc(s)).r),a=n(i.g,s.g),l=n(i.b,s.b),c=Dm(i.opacity,s.opacity);return function(d){return i.r=o(d),i.g=a(d),i.b=l(d),i.opacity=c(d),i+""}}return r.gamma=t,r})(1);function BS(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=t[i]*(1-s)+e[i]*s;return r}}function VS(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function US(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),s=new Array(n),o;for(o=0;o<r;++o)i[o]=ka(t[o],e[o]);for(;o<n;++o)s[o]=e[o];return function(a){for(o=0;o<r;++o)s[o]=i[o](a);return s}}function jS(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function nn(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function HS(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=ka(t[i],e[i]):r[i]=e[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var yc=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,cl=new RegExp(yc.source,"g");function WS(t){return function(){return t}}function qS(t){return function(e){return t(e)+""}}function Pm(t,e){var n=yc.lastIndex=cl.lastIndex=0,r,i,s,o=-1,a=[],l=[];for(t=t+"",e=e+"";(r=yc.exec(t))&&(i=cl.exec(e));)(s=i.index)>n&&(s=e.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,l.push({i:o,x:nn(r,i)})),n=cl.lastIndex;return n<e.length&&(s=e.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?l[0]?qS(l[0].x):WS(e):(e=l.length,function(c){for(var d=0,u;d<e;++d)a[(u=l[d]).i]=u.x(c);return a.join("")})}function ka(t,e){var n=typeof e,r;return e==null||n==="boolean"?Ed(e):(n==="number"?nn:n==="string"?(r=Or(e))?(e=r,Ko):Pm:e instanceof Or?Ko:e instanceof Date?jS:VS(e)?BS:Array.isArray(e)?US:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?HS:nn)(t,e)}function Gm(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var Ih=180/Math.PI,vc={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Mm(t,e,n,r,i,s){var o,a,l;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(l=t*n+e*r)&&(n-=t*l,r-=e*l),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,l/=a),t*r<e*n&&(t=-t,e=-e,l=-l,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(e,t)*Ih,skewX:Math.atan(l)*Ih,scaleX:o,scaleY:a}}var Ys;function KS(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?vc:Mm(e.a,e.b,e.c,e.d,e.e,e.f)}function XS(t){return t==null||(Ys||(Ys=document.createElementNS("http://www.w3.org/2000/svg","g")),Ys.setAttribute("transform",t),!(t=Ys.transform.baseVal.consolidate()))?vc:(t=t.matrix,Mm(t.a,t.b,t.c,t.d,t.e,t.f))}function Om(t,e,n,r){function i(c){return c.length?c.pop()+" ":""}function s(c,d,u,h,f,p){if(c!==u||d!==h){var y=f.push("translate(",null,e,null,n);p.push({i:y-4,x:nn(c,u)},{i:y-2,x:nn(d,h)})}else(u||h)&&f.push("translate("+u+e+h+n)}function o(c,d,u,h){c!==d?(c-d>180?d+=360:d-c>180&&(c+=360),h.push({i:u.push(i(u)+"rotate(",null,r)-2,x:nn(c,d)})):d&&u.push(i(u)+"rotate("+d+r)}function a(c,d,u,h){c!==d?h.push({i:u.push(i(u)+"skewX(",null,r)-2,x:nn(c,d)}):d&&u.push(i(u)+"skewX("+d+r)}function l(c,d,u,h,f,p){if(c!==u||d!==h){var y=f.push(i(f)+"scale(",null,",",null,")");p.push({i:y-4,x:nn(c,u)},{i:y-2,x:nn(d,h)})}else(u!==1||h!==1)&&f.push(i(f)+"scale("+u+","+h+")")}return function(c,d){var u=[],h=[];return c=t(c),d=t(d),s(c.translateX,c.translateY,d.translateX,d.translateY,u,h),o(c.rotate,d.rotate,u,h),a(c.skewX,d.skewX,u,h),l(c.scaleX,c.scaleY,d.scaleX,d.scaleY,u,h),c=d=null,function(f){for(var p=-1,y=h.length,w;++p<y;)u[(w=h[p]).i]=w.x(f);return u.join("")}}}var ZS=Om(KS,"px, ","px)","deg)"),YS=Om(XS,", ",")",")"),JS=1e-12;function Dh(t){return((t=Math.exp(t))+1/t)/2}function QS(t){return((t=Math.exp(t))-1/t)/2}function eT(t){return((t=Math.exp(2*t))-1)/(t+1)}const tT=(function t(e,n,r){function i(s,o){var a=s[0],l=s[1],c=s[2],d=o[0],u=o[1],h=o[2],f=d-a,p=u-l,y=f*f+p*p,w,b;if(y<JS)b=Math.log(h/c)/e,w=function(L){return[a+L*f,l+L*p,c*Math.exp(e*L*b)]};else{var E=Math.sqrt(y),k=(h*h-c*c+r*y)/(2*c*n*E),_=(h*h-c*c-r*y)/(2*h*n*E),x=Math.log(Math.sqrt(k*k+1)-k),T=Math.log(Math.sqrt(_*_+1)-_);b=(T-x)/e,w=function(L){var O=L*b,F=Dh(x),$=c/(n*E)*(F*eT(e*O+x)-QS(x));return[a+$*f,l+$*p,c*F/Dh(e*O+x)]}}return w.duration=b*1e3*e/Math.SQRT2,w}return i.rho=function(s){var o=Math.max(.001,+s),a=o*o,l=a*a;return t(o,a,l)},i})(Math.SQRT2,2,4);var _i=0,Wi=0,Pi=0,Fm=1e3,Xo,qi,Zo=0,Fr=0,Aa=0,ws=typeof performance=="object"&&performance.now?performance:Date,$m=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function kd(){return Fr||($m(nT),Fr=ws.now()+Aa)}function nT(){Fr=0}function Yo(){this._call=this._time=this._next=null}Yo.prototype=Ad.prototype={constructor:Yo,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?kd():+n)+(e==null?0:+e),!this._next&&qi!==this&&(qi?qi._next=this:Xo=this,qi=this),this._call=t,this._time=n,_c()},stop:function(){this._call&&(this._call=null,this._time=1/0,_c())}};function Ad(t,e,n){var r=new Yo;return r.restart(t,e,n),r}function rT(){kd(),++_i;for(var t=Xo,e;t;)(e=Fr-t._time)>=0&&t._call.call(void 0,e),t=t._next;--_i}function Ph(){Fr=(Zo=ws.now())+Aa,_i=Wi=0;try{rT()}finally{_i=0,sT(),Fr=0}}function iT(){var t=ws.now(),e=t-Zo;e>Fm&&(Aa-=e,Zo=t)}function sT(){for(var t,e=Xo,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:Xo=n);qi=t,_c(r)}function _c(t){if(!_i){Wi&&(Wi=clearTimeout(Wi));var e=t-Fr;e>24?(t<1/0&&(Wi=setTimeout(Ph,t-ws.now()-Aa)),Pi&&(Pi=clearInterval(Pi))):(Pi||(Zo=ws.now(),Pi=setInterval(iT,Fm)),_i=1,$m(Ph))}}function Gh(t,e,n){var r=new Yo;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}var oT=Ls("start","end","cancel","interrupt"),aT=[],zm=0,Mh=1,bc=2,_o=3,Oh=4,wc=5,bo=6;function xa(t,e,n,r,i,s){var o=t.__transition;if(!o)t.__transition={};else if(n in o)return;lT(t,n,{name:e,index:r,group:i,on:oT,tween:aT,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:zm})}function xd(t,e){var n=fn(t,e);if(n.state>zm)throw new Error("too late; already scheduled");return n}function Cn(t,e){var n=fn(t,e);if(n.state>_o)throw new Error("too late; already running");return n}function fn(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function lT(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=Ad(s,0,n.time);function s(c){n.state=Mh,n.timer.restart(o,n.delay,n.time),n.delay<=c&&o(c-n.delay)}function o(c){var d,u,h,f;if(n.state!==Mh)return l();for(d in r)if(f=r[d],f.name===n.name){if(f.state===_o)return Gh(o);f.state===Oh?(f.state=bo,f.timer.stop(),f.on.call("interrupt",t,t.__data__,f.index,f.group),delete r[d]):+d<e&&(f.state=bo,f.timer.stop(),f.on.call("cancel",t,t.__data__,f.index,f.group),delete r[d])}if(Gh(function(){n.state===_o&&(n.state=Oh,n.timer.restart(a,n.delay,n.time),a(c))}),n.state=bc,n.on.call("start",t,t.__data__,n.index,n.group),n.state===bc){for(n.state=_o,i=new Array(h=n.tween.length),d=0,u=-1;d<h;++d)(f=n.tween[d].value.call(t,t.__data__,n.index,n.group))&&(i[++u]=f);i.length=u+1}}function a(c){for(var d=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(l),n.state=wc,1),u=-1,h=i.length;++u<h;)i[u].call(t,d);n.state===wc&&(n.on.call("end",t,t.__data__,n.index,n.group),l())}function l(){n.state=bo,n.timer.stop(),delete r[e];for(var c in r)return;delete t.__transition}}function wo(t,e){var n=t.__transition,r,i,s=!0,o;if(n){e=e==null?null:e+"";for(o in n){if((r=n[o]).name!==e){s=!1;continue}i=r.state>bc&&r.state<wc,r.state=bo,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[o]}s&&delete t.__transition}}function cT(t){return this.each(function(){wo(this,t)})}function dT(t,e){var n,r;return function(){var i=Cn(this,t),s=i.tween;if(s!==n){r=n=s;for(var o=0,a=r.length;o<a;++o)if(r[o].name===e){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function uT(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=Cn(this,t),o=s.tween;if(o!==r){i=(r=o).slice();for(var a={name:e,value:n},l=0,c=i.length;l<c;++l)if(i[l].name===e){i[l]=a;break}l===c&&i.push(a)}s.tween=i}}function hT(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=fn(this.node(),n).tween,i=0,s=r.length,o;i<s;++i)if((o=r[i]).name===t)return o.value;return null}return this.each((e==null?dT:uT)(n,t,e))}function Cd(t,e,n){var r=t._id;return t.each(function(){var i=Cn(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return fn(i,r).value[e]}}function Bm(t,e){var n;return(typeof e=="number"?nn:e instanceof Or?Ko:(n=Or(e))?(e=n,Ko):Pm)(t,e)}function fT(t){return function(){this.removeAttribute(t)}}function gT(t){return function(){this.removeAttributeNS(t.space,t.local)}}function pT(t,e,n){var r,i=n+"",s;return function(){var o=this.getAttribute(t);return o===i?null:o===r?s:s=e(r=o,n)}}function mT(t,e,n){var r,i=n+"",s;return function(){var o=this.getAttributeNS(t.space,t.local);return o===i?null:o===r?s:s=e(r=o,n)}}function yT(t,e,n){var r,i,s;return function(){var o,a=n(this),l;return a==null?void this.removeAttribute(t):(o=this.getAttribute(t),l=a+"",o===l?null:o===r&&l===i?s:(i=l,s=e(r=o,a)))}}function vT(t,e,n){var r,i,s;return function(){var o,a=n(this),l;return a==null?void this.removeAttributeNS(t.space,t.local):(o=this.getAttributeNS(t.space,t.local),l=a+"",o===l?null:o===r&&l===i?s:(i=l,s=e(r=o,a)))}}function _T(t,e){var n=Ea(t),r=n==="transform"?YS:Bm;return this.attrTween(t,typeof e=="function"?(n.local?vT:yT)(n,r,Cd(this,"attr."+t,e)):e==null?(n.local?gT:fT)(n):(n.local?mT:pT)(n,r,e))}function bT(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function wT(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function ET(t,e){var n,r;function i(){var s=e.apply(this,arguments);return s!==r&&(n=(r=s)&&wT(t,s)),n}return i._value=e,i}function kT(t,e){var n,r;function i(){var s=e.apply(this,arguments);return s!==r&&(n=(r=s)&&bT(t,s)),n}return i._value=e,i}function AT(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=Ea(t);return this.tween(n,(r.local?ET:kT)(r,e))}function xT(t,e){return function(){xd(this,t).delay=+e.apply(this,arguments)}}function CT(t,e){return e=+e,function(){xd(this,t).delay=e}}function ST(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?xT:CT)(e,t)):fn(this.node(),e).delay}function TT(t,e){return function(){Cn(this,t).duration=+e.apply(this,arguments)}}function NT(t,e){return e=+e,function(){Cn(this,t).duration=e}}function RT(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?TT:NT)(e,t)):fn(this.node(),e).duration}function LT(t,e){if(typeof e!="function")throw new Error;return function(){Cn(this,t).ease=e}}function IT(t){var e=this._id;return arguments.length?this.each(LT(e,t)):fn(this.node(),e).ease}function DT(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;Cn(this,t).ease=n}}function PT(t){if(typeof t!="function")throw new Error;return this.each(DT(this._id,t))}function GT(t){typeof t!="function"&&(t=_m(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],o=s.length,a=r[i]=[],l,c=0;c<o;++c)(l=s[c])&&t.call(l,l.__data__,c,s)&&a.push(l);return new Yn(r,this._parents,this._name,this._id)}function MT(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,s=Math.min(r,i),o=new Array(r),a=0;a<s;++a)for(var l=e[a],c=n[a],d=l.length,u=o[a]=new Array(d),h,f=0;f<d;++f)(h=l[f]||c[f])&&(u[f]=h);for(;a<r;++a)o[a]=e[a];return new Yn(o,this._parents,this._name,this._id)}function OT(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function FT(t,e,n){var r,i,s=OT(e)?xd:Cn;return function(){var o=s(this,t),a=o.on;a!==r&&(i=(r=a).copy()).on(e,n),o.on=i}}function $T(t,e){var n=this._id;return arguments.length<2?fn(this.node(),n).on.on(t):this.each(FT(n,t,e))}function zT(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function BT(){return this.on("end.remove",zT(this._id))}function VT(t){var e=this._name,n=this._id;typeof t!="function"&&(t=_d(t));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var a=r[o],l=a.length,c=s[o]=new Array(l),d,u,h=0;h<l;++h)(d=a[h])&&(u=t.call(d,d.__data__,h,a))&&("__data__"in d&&(u.__data__=d.__data__),c[h]=u,xa(c[h],e,n,h,c,fn(d,n)));return new Yn(s,this._parents,e,n)}function UT(t){var e=this._name,n=this._id;typeof t!="function"&&(t=vm(t));for(var r=this._groups,i=r.length,s=[],o=[],a=0;a<i;++a)for(var l=r[a],c=l.length,d,u=0;u<c;++u)if(d=l[u]){for(var h=t.call(d,d.__data__,u,l),f,p=fn(d,n),y=0,w=h.length;y<w;++y)(f=h[y])&&xa(f,e,n,y,h,p);s.push(h),o.push(d)}return new Yn(s,o,e,n)}var jT=Is.prototype.constructor;function HT(){return new jT(this._groups,this._parents)}function WT(t,e){var n,r,i;return function(){var s=vi(this,t),o=(this.style.removeProperty(t),vi(this,t));return s===o?null:s===n&&o===r?i:i=e(n=s,r=o)}}function Vm(t){return function(){this.style.removeProperty(t)}}function qT(t,e,n){var r,i=n+"",s;return function(){var o=vi(this,t);return o===i?null:o===r?s:s=e(r=o,n)}}function KT(t,e,n){var r,i,s;return function(){var o=vi(this,t),a=n(this),l=a+"";return a==null&&(l=a=(this.style.removeProperty(t),vi(this,t))),o===l?null:o===r&&l===i?s:(i=l,s=e(r=o,a))}}function XT(t,e){var n,r,i,s="style."+e,o="end."+s,a;return function(){var l=Cn(this,t),c=l.on,d=l.value[s]==null?a||(a=Vm(e)):void 0;(c!==n||i!==d)&&(r=(n=c).copy()).on(o,i=d),l.on=r}}function ZT(t,e,n){var r=(t+="")=="transform"?ZS:Bm;return e==null?this.styleTween(t,WT(t,r)).on("end.style."+t,Vm(t)):typeof e=="function"?this.styleTween(t,KT(t,r,Cd(this,"style."+t,e))).each(XT(this._id,t)):this.styleTween(t,qT(t,r,e),n).on("end.style."+t,null)}function YT(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function JT(t,e,n){var r,i;function s(){var o=e.apply(this,arguments);return o!==i&&(r=(i=o)&&YT(t,o,n)),r}return s._value=e,s}function QT(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,JT(t,e,n??""))}function eN(t){return function(){this.textContent=t}}function tN(t){return function(){var e=t(this);this.textContent=e??""}}function nN(t){return this.tween("text",typeof t=="function"?tN(Cd(this,"text",t)):eN(t==null?"":t+""))}function rN(t){return function(e){this.textContent=t.call(this,e)}}function iN(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&rN(i)),e}return r._value=t,r}function sN(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,iN(t))}function oN(){for(var t=this._name,e=this._id,n=Um(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,l,c=0;c<a;++c)if(l=o[c]){var d=fn(l,e);xa(l,t,n,c,o,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new Yn(r,this._parents,t,n)}function aN(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(s,o){var a={value:o},l={value:function(){--i===0&&s()}};n.each(function(){var c=Cn(this,r),d=c.on;d!==t&&(e=(t=d).copy(),e._.cancel.push(a),e._.interrupt.push(a),e._.end.push(l)),c.on=e}),i===0&&s()})}var lN=0;function Yn(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function Um(){return++lN}var In=Is.prototype;Yn.prototype={constructor:Yn,select:VT,selectAll:UT,selectChild:In.selectChild,selectChildren:In.selectChildren,filter:GT,merge:MT,selection:HT,transition:oN,call:In.call,nodes:In.nodes,node:In.node,size:In.size,empty:In.empty,each:In.each,on:$T,attr:_T,attrTween:AT,style:ZT,styleTween:QT,text:nN,textTween:sN,remove:BT,tween:hT,delay:ST,duration:RT,ease:IT,easeVarying:PT,end:aN,[Symbol.iterator]:In[Symbol.iterator]};function cN(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var dN={time:null,delay:0,duration:250,ease:cN};function uN(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function hN(t){var e,n;t instanceof Yn?(e=t._id,t=t._name):(e=Um(),(n=dN).time=kd(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,l,c=0;c<a;++c)(l=o[c])&&xa(l,t,e,c,o,n||uN(l,e));return new Yn(r,this._parents,t,e)}Is.prototype.interrupt=cT;Is.prototype.transition=hN;function Fh(t,e){var n,r=1;t==null&&(t=0),e==null&&(e=0);function i(){var s,o=n.length,a,l=0,c=0;for(s=0;s<o;++s)a=n[s],l+=a.x,c+=a.y;for(l=(l/o-t)*r,c=(c/o-e)*r,s=0;s<o;++s)a=n[s],a.x-=l,a.y-=c}return i.initialize=function(s){n=s},i.x=function(s){return arguments.length?(t=+s,i):t},i.y=function(s){return arguments.length?(e=+s,i):e},i.strength=function(s){return arguments.length?(r=+s,i):r},i}function fN(t){const e=+this._x.call(null,t),n=+this._y.call(null,t);return jm(this.cover(e,n),e,n,t)}function jm(t,e,n,r){if(isNaN(e)||isNaN(n))return t;var i,s=t._root,o={data:r},a=t._x0,l=t._y0,c=t._x1,d=t._y1,u,h,f,p,y,w,b,E;if(!s)return t._root=o,t;for(;s.length;)if((y=e>=(u=(a+c)/2))?a=u:c=u,(w=n>=(h=(l+d)/2))?l=h:d=h,i=s,!(s=s[b=w<<1|y]))return i[b]=o,t;if(f=+t._x.call(null,s.data),p=+t._y.call(null,s.data),e===f&&n===p)return o.next=s,i?i[b]=o:t._root=o,t;do i=i?i[b]=new Array(4):t._root=new Array(4),(y=e>=(u=(a+c)/2))?a=u:c=u,(w=n>=(h=(l+d)/2))?l=h:d=h;while((b=w<<1|y)===(E=(p>=h)<<1|f>=u));return i[E]=s,i[b]=o,t}function gN(t){var e,n,r=t.length,i,s,o=new Array(r),a=new Array(r),l=1/0,c=1/0,d=-1/0,u=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,e=t[n]))||isNaN(s=+this._y.call(null,e))||(o[n]=i,a[n]=s,i<l&&(l=i),i>d&&(d=i),s<c&&(c=s),s>u&&(u=s));if(l>d||c>u)return this;for(this.cover(l,c).cover(d,u),n=0;n<r;++n)jm(this,o[n],a[n],t[n]);return this}function pN(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,r=this._y0,i=this._x1,s=this._y1;if(isNaN(n))i=(n=Math.floor(t))+1,s=(r=Math.floor(e))+1;else{for(var o=i-n||1,a=this._root,l,c;n>t||t>=i||r>e||e>=s;)switch(c=(e<r)<<1|t<n,l=new Array(4),l[c]=a,a=l,o*=2,c){case 0:i=n+o,s=r+o;break;case 1:n=i-o,s=r+o;break;case 2:i=n+o,r=s-o;break;case 3:n=i-o,r=s-o;break}this._root&&this._root.length&&(this._root=a)}return this._x0=n,this._y0=r,this._x1=i,this._y1=s,this}function mN(){var t=[];return this.visit(function(e){if(!e.length)do t.push(e.data);while(e=e.next)}),t}function yN(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Lt(t,e,n,r,i){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=i}function vN(t,e,n){var r,i=this._x0,s=this._y0,o,a,l,c,d=this._x1,u=this._y1,h=[],f=this._root,p,y;for(f&&h.push(new Lt(f,i,s,d,u)),n==null?n=1/0:(i=t-n,s=e-n,d=t+n,u=e+n,n*=n);p=h.pop();)if(!(!(f=p.node)||(o=p.x0)>d||(a=p.y0)>u||(l=p.x1)<i||(c=p.y1)<s))if(f.length){var w=(o+l)/2,b=(a+c)/2;h.push(new Lt(f[3],w,b,l,c),new Lt(f[2],o,b,w,c),new Lt(f[1],w,a,l,b),new Lt(f[0],o,a,w,b)),(y=(e>=b)<<1|t>=w)&&(p=h[h.length-1],h[h.length-1]=h[h.length-1-y],h[h.length-1-y]=p)}else{var E=t-+this._x.call(null,f.data),k=e-+this._y.call(null,f.data),_=E*E+k*k;if(_<n){var x=Math.sqrt(n=_);i=t-x,s=e-x,d=t+x,u=e+x,r=f.data}}return r}function _N(t){if(isNaN(d=+this._x.call(null,t))||isNaN(u=+this._y.call(null,t)))return this;var e,n=this._root,r,i,s,o=this._x0,a=this._y0,l=this._x1,c=this._y1,d,u,h,f,p,y,w,b;if(!n)return this;if(n.length)for(;;){if((p=d>=(h=(o+l)/2))?o=h:l=h,(y=u>=(f=(a+c)/2))?a=f:c=f,e=n,!(n=n[w=y<<1|p]))return this;if(!n.length)break;(e[w+1&3]||e[w+2&3]||e[w+3&3])&&(r=e,b=w)}for(;n.data!==t;)if(i=n,!(n=n.next))return this;return(s=n.next)&&delete n.next,i?(s?i.next=s:delete i.next,this):e?(s?e[w]=s:delete e[w],(n=e[0]||e[1]||e[2]||e[3])&&n===(e[3]||e[2]||e[1]||e[0])&&!n.length&&(r?r[b]=n:this._root=n),this):(this._root=s,this)}function bN(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this}function wN(){return this._root}function EN(){var t=0;return this.visit(function(e){if(!e.length)do++t;while(e=e.next)}),t}function kN(t){var e=[],n,r=this._root,i,s,o,a,l;for(r&&e.push(new Lt(r,this._x0,this._y0,this._x1,this._y1));n=e.pop();)if(!t(r=n.node,s=n.x0,o=n.y0,a=n.x1,l=n.y1)&&r.length){var c=(s+a)/2,d=(o+l)/2;(i=r[3])&&e.push(new Lt(i,c,d,a,l)),(i=r[2])&&e.push(new Lt(i,s,d,c,l)),(i=r[1])&&e.push(new Lt(i,c,o,a,d)),(i=r[0])&&e.push(new Lt(i,s,o,c,d))}return this}function AN(t){var e=[],n=[],r;for(this._root&&e.push(new Lt(this._root,this._x0,this._y0,this._x1,this._y1));r=e.pop();){var i=r.node;if(i.length){var s,o=r.x0,a=r.y0,l=r.x1,c=r.y1,d=(o+l)/2,u=(a+c)/2;(s=i[0])&&e.push(new Lt(s,o,a,d,u)),(s=i[1])&&e.push(new Lt(s,d,a,l,u)),(s=i[2])&&e.push(new Lt(s,o,u,d,c)),(s=i[3])&&e.push(new Lt(s,d,u,l,c))}n.push(r)}for(;r=n.pop();)t(r.node,r.x0,r.y0,r.x1,r.y1);return this}function xN(t){return t[0]}function CN(t){return arguments.length?(this._x=t,this):this._x}function SN(t){return t[1]}function TN(t){return arguments.length?(this._y=t,this):this._y}function Sd(t,e,n){var r=new Td(e??xN,n??SN,NaN,NaN,NaN,NaN);return t==null?r:r.addAll(t)}function Td(t,e,n,r,i,s){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=i,this._y1=s,this._root=void 0}function $h(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var It=Sd.prototype=Td.prototype;It.copy=function(){var t=new Td(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root,n,r;if(!e)return t;if(!e.length)return t._root=$h(e),t;for(n=[{source:e,target:t._root=new Array(4)}];e=n.pop();)for(var i=0;i<4;++i)(r=e.source[i])&&(r.length?n.push({source:r,target:e.target[i]=new Array(4)}):e.target[i]=$h(r));return t};It.add=fN;It.addAll=gN;It.cover=pN;It.data=mN;It.extent=yN;It.find=vN;It.remove=_N;It.removeAll=bN;It.root=wN;It.size=EN;It.visit=kN;It.visitAfter=AN;It.x=CN;It.y=TN;function Pr(t){return function(){return t}}function cr(t){return(t()-.5)*1e-6}function NN(t){return t.x+t.vx}function RN(t){return t.y+t.vy}function LN(t){var e,n,r,i=1,s=1;typeof t!="function"&&(t=Pr(t==null?1:+t));function o(){for(var c,d=e.length,u,h,f,p,y,w,b=0;b<s;++b)for(u=Sd(e,NN,RN).visitAfter(a),c=0;c<d;++c)h=e[c],y=n[h.index],w=y*y,f=h.x+h.vx,p=h.y+h.vy,u.visit(E);function E(k,_,x,T,L){var O=k.data,F=k.r,$=y+F;if(O){if(O.index>h.index){var j=f-O.x-O.vx,z=p-O.y-O.vy,I=j*j+z*z;I<$*$&&(j===0&&(j=cr(r),I+=j*j),z===0&&(z=cr(r),I+=z*z),I=($-(I=Math.sqrt(I)))/I*i,h.vx+=(j*=I)*($=(F*=F)/(w+F)),h.vy+=(z*=I)*$,O.vx-=j*($=1-$),O.vy-=z*$)}return}return _>f+$||T<f-$||x>p+$||L<p-$}}function a(c){if(c.data)return c.r=n[c.data.index];for(var d=c.r=0;d<4;++d)c[d]&&c[d].r>c.r&&(c.r=c[d].r)}function l(){if(e){var c,d=e.length,u;for(n=new Array(d),c=0;c<d;++c)u=e[c],n[u.index]=+t(u,c,e)}}return o.initialize=function(c,d){e=c,r=d,l()},o.iterations=function(c){return arguments.length?(s=+c,o):s},o.strength=function(c){return arguments.length?(i=+c,o):i},o.radius=function(c){return arguments.length?(t=typeof c=="function"?c:Pr(+c),l(),o):t},o}function IN(t){return t.index}function zh(t,e){var n=t.get(e);if(!n)throw new Error("node not found: "+e);return n}function DN(t){var e=IN,n=u,r,i=Pr(30),s,o,a,l,c,d=1;t==null&&(t=[]);function u(w){return 1/Math.min(a[w.source.index],a[w.target.index])}function h(w){for(var b=0,E=t.length;b<d;++b)for(var k=0,_,x,T,L,O,F,$;k<E;++k)_=t[k],x=_.source,T=_.target,L=T.x+T.vx-x.x-x.vx||cr(c),O=T.y+T.vy-x.y-x.vy||cr(c),F=Math.sqrt(L*L+O*O),F=(F-s[k])/F*w*r[k],L*=F,O*=F,T.vx-=L*($=l[k]),T.vy-=O*$,x.vx+=L*($=1-$),x.vy+=O*$}function f(){if(o){var w,b=o.length,E=t.length,k=new Map(o.map((x,T)=>[e(x,T,o),x])),_;for(w=0,a=new Array(b);w<E;++w)_=t[w],_.index=w,typeof _.source!="object"&&(_.source=zh(k,_.source)),typeof _.target!="object"&&(_.target=zh(k,_.target)),a[_.source.index]=(a[_.source.index]||0)+1,a[_.target.index]=(a[_.target.index]||0)+1;for(w=0,l=new Array(E);w<E;++w)_=t[w],l[w]=a[_.source.index]/(a[_.source.index]+a[_.target.index]);r=new Array(E),p(),s=new Array(E),y()}}function p(){if(o)for(var w=0,b=t.length;w<b;++w)r[w]=+n(t[w],w,t)}function y(){if(o)for(var w=0,b=t.length;w<b;++w)s[w]=+i(t[w],w,t)}return h.initialize=function(w,b){o=w,c=b,f()},h.links=function(w){return arguments.length?(t=w,f(),h):t},h.id=function(w){return arguments.length?(e=w,h):e},h.iterations=function(w){return arguments.length?(d=+w,h):d},h.strength=function(w){return arguments.length?(n=typeof w=="function"?w:Pr(+w),p(),h):n},h.distance=function(w){return arguments.length?(i=typeof w=="function"?w:Pr(+w),y(),h):i},h}const PN=1664525,GN=1013904223,Bh=4294967296;function MN(){let t=1;return()=>(t=(PN*t+GN)%Bh)/Bh}function ON(t){return t.x}function FN(t){return t.y}var $N=10,zN=Math.PI*(3-Math.sqrt(5));function BN(t){var e,n=1,r=.001,i=1-Math.pow(r,1/300),s=0,o=.6,a=new Map,l=Ad(u),c=Ls("tick","end"),d=MN();t==null&&(t=[]);function u(){h(),c.call("tick",e),n<r&&(l.stop(),c.call("end",e))}function h(y){var w,b=t.length,E;y===void 0&&(y=1);for(var k=0;k<y;++k)for(n+=(s-n)*i,a.forEach(function(_){_(n)}),w=0;w<b;++w)E=t[w],E.fx==null?E.x+=E.vx*=o:(E.x=E.fx,E.vx=0),E.fy==null?E.y+=E.vy*=o:(E.y=E.fy,E.vy=0);return e}function f(){for(var y=0,w=t.length,b;y<w;++y){if(b=t[y],b.index=y,b.fx!=null&&(b.x=b.fx),b.fy!=null&&(b.y=b.fy),isNaN(b.x)||isNaN(b.y)){var E=$N*Math.sqrt(.5+y),k=y*zN;b.x=E*Math.cos(k),b.y=E*Math.sin(k)}(isNaN(b.vx)||isNaN(b.vy))&&(b.vx=b.vy=0)}}function p(y){return y.initialize&&y.initialize(t,d),y}return f(),e={tick:h,restart:function(){return l.restart(u),e},stop:function(){return l.stop(),e},nodes:function(y){return arguments.length?(t=y,f(),a.forEach(p),e):t},alpha:function(y){return arguments.length?(n=+y,e):n},alphaMin:function(y){return arguments.length?(r=+y,e):r},alphaDecay:function(y){return arguments.length?(i=+y,e):+i},alphaTarget:function(y){return arguments.length?(s=+y,e):s},velocityDecay:function(y){return arguments.length?(o=1-y,e):1-o},randomSource:function(y){return arguments.length?(d=y,a.forEach(p),e):d},force:function(y,w){return arguments.length>1?(w==null?a.delete(y):a.set(y,p(w)),e):a.get(y)},find:function(y,w,b){var E=0,k=t.length,_,x,T,L,O;for(b==null?b=1/0:b*=b,E=0;E<k;++E)L=t[E],_=y-L.x,x=w-L.y,T=_*_+x*x,T<b&&(O=L,b=T);return O},on:function(y,w){return arguments.length>1?(c.on(y,w),e):c.on(y)}}}function VN(){var t,e,n,r,i=Pr(-30),s,o=1,a=1/0,l=.81;function c(f){var p,y=t.length,w=Sd(t,ON,FN).visitAfter(u);for(r=f,p=0;p<y;++p)e=t[p],w.visit(h)}function d(){if(t){var f,p=t.length,y;for(s=new Array(p),f=0;f<p;++f)y=t[f],s[y.index]=+i(y,f,t)}}function u(f){var p=0,y,w,b=0,E,k,_;if(f.length){for(E=k=_=0;_<4;++_)(y=f[_])&&(w=Math.abs(y.value))&&(p+=y.value,b+=w,E+=w*y.x,k+=w*y.y);f.x=E/b,f.y=k/b}else{y=f,y.x=y.data.x,y.y=y.data.y;do p+=s[y.data.index];while(y=y.next)}f.value=p}function h(f,p,y,w){if(!f.value)return!0;var b=f.x-e.x,E=f.y-e.y,k=w-p,_=b*b+E*E;if(k*k/l<_)return _<a&&(b===0&&(b=cr(n),_+=b*b),E===0&&(E=cr(n),_+=E*E),_<o&&(_=Math.sqrt(o*_)),e.vx+=b*f.value*r/_,e.vy+=E*f.value*r/_),!0;if(f.length||_>=a)return;(f.data!==e||f.next)&&(b===0&&(b=cr(n),_+=b*b),E===0&&(E=cr(n),_+=E*E),_<o&&(_=Math.sqrt(o*_)));do f.data!==e&&(k=s[f.data.index]*r/_,e.vx+=b*k,e.vy+=E*k);while(f=f.next)}return c.initialize=function(f,p){t=f,n=p,d()},c.strength=function(f){return arguments.length?(i=typeof f=="function"?f:Pr(+f),d(),c):i},c.distanceMin=function(f){return arguments.length?(o=f*f,c):Math.sqrt(o)},c.distanceMax=function(f){return arguments.length?(a=f*f,c):Math.sqrt(a)},c.theta=function(f){return arguments.length?(l=f*f,c):Math.sqrt(l)},c}function UN(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Jo(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function bi(t){return t=Jo(Math.abs(t)),t?t[1]:NaN}function jN(t,e){return function(n,r){for(var i=n.length,s=[],o=0,a=t[0],l=0;i>0&&a>0&&(l+a+1>r&&(a=Math.max(1,r-l)),s.push(n.substring(i-=a,i+a)),!((l+=a+1)>r));)a=t[o=(o+1)%t.length];return s.reverse().join(e)}}function HN(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var WN=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Qo(t){if(!(e=WN.exec(t)))throw new Error("invalid format: "+t);var e;return new Nd({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Qo.prototype=Nd.prototype;function Nd(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}Nd.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function qN(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var Hm;function KN(t,e){var n=Jo(t,e);if(!n)return t+"";var r=n[0],i=n[1],s=i-(Hm=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return s===o?r:s>o?r+new Array(s-o+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+Jo(t,Math.max(0,e+s-1))[0]}function Vh(t,e){var n=Jo(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const Uh={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:UN,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>Vh(t*100,e),r:Vh,s:KN,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function jh(t){return t}var Hh=Array.prototype.map,Wh=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function XN(t){var e=t.grouping===void 0||t.thousands===void 0?jh:jN(Hh.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?jh:HN(Hh.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",a=t.minus===void 0?"":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function c(u){u=Qo(u);var h=u.fill,f=u.align,p=u.sign,y=u.symbol,w=u.zero,b=u.width,E=u.comma,k=u.precision,_=u.trim,x=u.type;x==="n"?(E=!0,x="g"):Uh[x]||(k===void 0&&(k=12),_=!0,x="g"),(w||h==="0"&&f==="=")&&(w=!0,h="0",f="=");var T=y==="$"?n:y==="#"&&/[boxX]/.test(x)?"0"+x.toLowerCase():"",L=y==="$"?r:/[%p]/.test(x)?o:"",O=Uh[x],F=/[defgprs%]/.test(x);k=k===void 0?6:/[gprs]/.test(x)?Math.max(1,Math.min(21,k)):Math.max(0,Math.min(20,k));function $(j){var z=T,I=L,A,D,C;if(x==="c")I=O(j)+I,j="";else{j=+j;var S=j<0||1/j<0;if(j=isNaN(j)?l:O(Math.abs(j),k),_&&(j=qN(j)),S&&+j==0&&p!=="+"&&(S=!1),z=(S?p==="("?p:a:p==="-"||p==="("?"":p)+z,I=(x==="s"?Wh[8+Hm/3]:"")+I+(S&&p==="("?")":""),F){for(A=-1,D=j.length;++A<D;)if(C=j.charCodeAt(A),48>C||C>57){I=(C===46?i+j.slice(A+1):j.slice(A))+I,j=j.slice(0,A);break}}}E&&!w&&(j=e(j,1/0));var U=z.length+j.length+I.length,H=U<b?new Array(b-U+1).join(h):"";switch(E&&w&&(j=e(H+j,H.length?b-I.length:1/0),H=""),f){case"<":j=z+j+I+H;break;case"=":j=z+H+j+I;break;case"^":j=H.slice(0,U=H.length>>1)+z+j+I+H.slice(U);break;default:j=H+z+j+I;break}return s(j)}return $.toString=function(){return u+""},$}function d(u,h){var f=c((u=Qo(u),u.type="f",u)),p=Math.max(-8,Math.min(8,Math.floor(bi(h)/3)))*3,y=Math.pow(10,-p),w=Wh[8+p/3];return function(b){return f(y*b)+w}}return{format:c,formatPrefix:d}}var Js,Wm,qm;ZN({thousands:",",grouping:[3],currency:["$",""]});function ZN(t){return Js=XN(t),Wm=Js.format,qm=Js.formatPrefix,Js}function YN(t){return Math.max(0,-bi(Math.abs(t)))}function JN(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(bi(e)/3)))*3-bi(Math.abs(t)))}function QN(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,bi(e)-bi(t))+1}function Km(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function eR(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const qh=Symbol("implicit");function Xm(){var t=new bh,e=[],n=[],r=qh;function i(s){let o=t.get(s);if(o===void 0){if(r!==qh)return r;t.set(s,o=e.push(s)-1)}return n[o%n.length]}return i.domain=function(s){if(!arguments.length)return e.slice();e=[],t=new bh;for(const o of s)t.has(o)||t.set(o,e.push(o)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return Xm(e,n).unknown(r)},Km.apply(i,arguments),i}function tR(t){return function(){return t}}function nR(t){return+t}var Kh=[0,1];function bn(t){return t}function Ec(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:tR(isNaN(e)?NaN:.5)}function rR(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function iR(t,e,n){var r=t[0],i=t[1],s=e[0],o=e[1];return i<r?(r=Ec(i,r),s=n(o,s)):(r=Ec(r,i),s=n(s,o)),function(a){return s(r(a))}}function sR(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),s=new Array(r),o=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<r;)i[o]=Ec(t[o],t[o+1]),s[o]=n(e[o],e[o+1]);return function(a){var l=Nx(t,a,1,r)-1;return s[l](i[l](a))}}function oR(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function aR(){var t=Kh,e=Kh,n=ka,r,i,s,o=bn,a,l,c;function d(){var h=Math.min(t.length,e.length);return o!==bn&&(o=rR(t[0],t[h-1])),a=h>2?sR:iR,l=c=null,u}function u(h){return h==null||isNaN(h=+h)?s:(l||(l=a(t.map(r),e,n)))(r(o(h)))}return u.invert=function(h){return o(i((c||(c=a(e,t.map(r),nn)))(h)))},u.domain=function(h){return arguments.length?(t=Array.from(h,nR),d()):t.slice()},u.range=function(h){return arguments.length?(e=Array.from(h),d()):e.slice()},u.rangeRound=function(h){return e=Array.from(h),n=Gm,d()},u.clamp=function(h){return arguments.length?(o=h?!0:bn,d()):o!==bn},u.interpolate=function(h){return arguments.length?(n=h,d()):n},u.unknown=function(h){return arguments.length?(s=h,u):s},function(h,f){return r=h,i=f,d()}}function lR(t,e,n,r){var i=Ox(t,e,n),s;switch(r=Qo(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(s=JN(i,o))&&(r.precision=s),qm(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=QN(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=YN(i))&&(r.precision=s-(r.type==="%")*2);break}}return Wm(r)}function Zm(t){var e=t.domain;return t.ticks=function(n){var r=e();return Mx(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return lR(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,s=r.length-1,o=r[i],a=r[s],l,c,d=10;for(a<o&&(c=o,o=a,a=c,c=i,i=s,s=c);d-- >0;){if(c=fc(o,a,n),c===l)return r[i]=o,r[s]=a,e(r);if(c>0)o=Math.floor(o/c)*c,a=Math.ceil(a/c)*c;else if(c<0)o=Math.ceil(o*c)/c,a=Math.floor(a*c)/c;else break;l=c}return t},t}function Xh(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function cR(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function dR(t){return t<0?-t*t:t*t}function uR(t){var e=t(bn,bn),n=1;function r(){return n===1?t(bn,bn):n===.5?t(cR,dR):t(Xh(n),Xh(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,r()):n},Zm(e)}function Ym(){var t=uR(aR());return t.copy=function(){return oR(t,Ym()).exponent(t.exponent())},Km.apply(t,arguments),t}function hR(){var t=0,e=1,n,r,i,s,o=bn,a=!1,l;function c(u){return u==null||isNaN(u=+u)?l:o(i===0?.5:(u=(s(u)-n)*i,a?Math.max(0,Math.min(1,u)):u))}c.domain=function(u){return arguments.length?([t,e]=u,n=s(t=+t),r=s(e=+e),i=n===r?0:1/(r-n),c):[t,e]},c.clamp=function(u){return arguments.length?(a=!!u,c):a},c.interpolator=function(u){return arguments.length?(o=u,c):o};function d(u){return function(h){var f,p;return arguments.length?([f,p]=h,o=u(f,p),c):[o(0),o(1)]}}return c.range=d(ka),c.rangeRound=d(Gm),c.unknown=function(u){return arguments.length?(l=u,c):l},function(u){return s=u,n=u(t),r=u(e),i=n===r?0:1/(r-n),c}}function fR(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function Jm(){var t=Zm(hR()(bn));return t.copy=function(){return fR(t,Jm())},eR.apply(t,arguments)}function Ca(t){for(var e=t.length/6|0,n=new Array(e),r=0;r<e;)n[r]="#"+t.slice(r*6,++r*6);return n}function Sa(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}const gR=Sa(Ca("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));Sa(Ca("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf"));Sa(Ca("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4"));Sa(Ca("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));const Qs=t=>()=>t;function pR(t,{sourceEvent:e,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function jn(t,e,n){this.k=t,this.x=e,this.y=n}jn.prototype={constructor:jn,scale:function(t){return t===1?this:new jn(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new jn(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Ta=new jn(1,0,0);Qm.prototype=jn.prototype;function Qm(t){for(;!t.__zoom;)if(!(t=t.parentNode))return Ta;return t.__zoom}function dl(t){t.stopImmediatePropagation()}function Gi(t){t.preventDefault(),t.stopImmediatePropagation()}function mR(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function yR(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function Zh(){return this.__zoom||Ta}function vR(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function _R(){return navigator.maxTouchPoints||"ontouchstart"in this}function bR(t,e,n){var r=t.invertX(e[0][0])-n[0][0],i=t.invertX(e[1][0])-n[1][0],s=t.invertY(e[0][1])-n[0][1],o=t.invertY(e[1][1])-n[1][1];return t.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),o>s?(s+o)/2:Math.min(0,s)||Math.max(0,o))}function wR(){var t=mR,e=yR,n=bR,r=vR,i=_R,s=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],a=250,l=tT,c=Ls("start","zoom","end"),d,u,h,f=500,p=150,y=0,w=10;function b(A){A.property("__zoom",Zh).on("wheel.zoom",O,{passive:!1}).on("mousedown.zoom",F).on("dblclick.zoom",$).filter(i).on("touchstart.zoom",j).on("touchmove.zoom",z).on("touchend.zoom touchcancel.zoom",I).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}b.transform=function(A,D,C,S){var U=A.selection?A.selection():A;U.property("__zoom",Zh),A!==U?x(A,D,C,S):U.interrupt().each(function(){T(this,arguments).event(S).start().zoom(null,typeof D=="function"?D.apply(this,arguments):D).end()})},b.scaleBy=function(A,D,C,S){b.scaleTo(A,function(){var U=this.__zoom.k,H=typeof D=="function"?D.apply(this,arguments):D;return U*H},C,S)},b.scaleTo=function(A,D,C,S){b.transform(A,function(){var U=e.apply(this,arguments),H=this.__zoom,ne=C==null?_(U):typeof C=="function"?C.apply(this,arguments):C,_e=H.invert(ne),ye=typeof D=="function"?D.apply(this,arguments):D;return n(k(E(H,ye),ne,_e),U,o)},C,S)},b.translateBy=function(A,D,C,S){b.transform(A,function(){return n(this.__zoom.translate(typeof D=="function"?D.apply(this,arguments):D,typeof C=="function"?C.apply(this,arguments):C),e.apply(this,arguments),o)},null,S)},b.translateTo=function(A,D,C,S,U){b.transform(A,function(){var H=e.apply(this,arguments),ne=this.__zoom,_e=S==null?_(H):typeof S=="function"?S.apply(this,arguments):S;return n(Ta.translate(_e[0],_e[1]).scale(ne.k).translate(typeof D=="function"?-D.apply(this,arguments):-D,typeof C=="function"?-C.apply(this,arguments):-C),H,o)},S,U)};function E(A,D){return D=Math.max(s[0],Math.min(s[1],D)),D===A.k?A:new jn(D,A.x,A.y)}function k(A,D,C){var S=D[0]-C[0]*A.k,U=D[1]-C[1]*A.k;return S===A.x&&U===A.y?A:new jn(A.k,S,U)}function _(A){return[(+A[0][0]+ +A[1][0])/2,(+A[0][1]+ +A[1][1])/2]}function x(A,D,C,S){A.on("start.zoom",function(){T(this,arguments).event(S).start()}).on("interrupt.zoom end.zoom",function(){T(this,arguments).event(S).end()}).tween("zoom",function(){var U=this,H=arguments,ne=T(U,H).event(S),_e=e.apply(U,H),ye=C==null?_(_e):typeof C=="function"?C.apply(U,H):C,ae=Math.max(_e[1][0]-_e[0][0],_e[1][1]-_e[0][1]),W=U.__zoom,se=typeof D=="function"?D.apply(U,H):D,be=l(W.invert(ye).concat(ae/W.k),se.invert(ye).concat(ae/se.k));return function(q){if(q===1)q=se;else{var oe=be(q),B=ae/oe[2];q=new jn(B,ye[0]-oe[0]*B,ye[1]-oe[1]*B)}ne.zoom(null,q)}})}function T(A,D,C){return!C&&A.__zooming||new L(A,D)}function L(A,D){this.that=A,this.args=D,this.active=0,this.sourceEvent=null,this.extent=e.apply(A,D),this.taps=0}L.prototype={event:function(A){return A&&(this.sourceEvent=A),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(A,D){return this.mouse&&A!=="mouse"&&(this.mouse[1]=D.invert(this.mouse[0])),this.touch0&&A!=="touch"&&(this.touch0[1]=D.invert(this.touch0[0])),this.touch1&&A!=="touch"&&(this.touch1[1]=D.invert(this.touch1[0])),this.that.__zoom=D,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(A){var D=Gt(this.that).datum();c.call(A,this.that,new pR(A,{sourceEvent:this.sourceEvent,target:b,transform:this.that.__zoom,dispatch:c}),D)}};function O(A,...D){if(!t.apply(this,arguments))return;var C=T(this,D).event(A),S=this.__zoom,U=Math.max(s[0],Math.min(s[1],S.k*Math.pow(2,r.apply(this,arguments)))),H=On(A);if(C.wheel)(C.mouse[0][0]!==H[0]||C.mouse[0][1]!==H[1])&&(C.mouse[1]=S.invert(C.mouse[0]=H)),clearTimeout(C.wheel);else{if(S.k===U)return;C.mouse=[H,S.invert(H)],wo(this),C.start()}Gi(A),C.wheel=setTimeout(ne,p),C.zoom("mouse",n(k(E(S,U),C.mouse[0],C.mouse[1]),C.extent,o));function ne(){C.wheel=null,C.end()}}function F(A,...D){if(h||!t.apply(this,arguments))return;var C=A.currentTarget,S=T(this,D,!0).event(A),U=Gt(A.view).on("mousemove.zoom",ye,!0).on("mouseup.zoom",ae,!0),H=On(A,C),ne=A.clientX,_e=A.clientY;Nm(A.view),dl(A),S.mouse=[H,this.__zoom.invert(H)],wo(this),S.start();function ye(W){if(Gi(W),!S.moved){var se=W.clientX-ne,be=W.clientY-_e;S.moved=se*se+be*be>y}S.event(W).zoom("mouse",n(k(S.that.__zoom,S.mouse[0]=On(W,C),S.mouse[1]),S.extent,o))}function ae(W){U.on("mousemove.zoom mouseup.zoom",null),Rm(W.view,S.moved),Gi(W),S.event(W).end()}}function $(A,...D){if(t.apply(this,arguments)){var C=this.__zoom,S=On(A.changedTouches?A.changedTouches[0]:A,this),U=C.invert(S),H=C.k*(A.shiftKey?.5:2),ne=n(k(E(C,H),S,U),e.apply(this,D),o);Gi(A),a>0?Gt(this).transition().duration(a).call(x,ne,S,A):Gt(this).call(b.transform,ne,S,A)}}function j(A,...D){if(t.apply(this,arguments)){var C=A.touches,S=C.length,U=T(this,D,A.changedTouches.length===S).event(A),H,ne,_e,ye;for(dl(A),ne=0;ne<S;++ne)_e=C[ne],ye=On(_e,this),ye=[ye,this.__zoom.invert(ye),_e.identifier],U.touch0?!U.touch1&&U.touch0[2]!==ye[2]&&(U.touch1=ye,U.taps=0):(U.touch0=ye,H=!0,U.taps=1+!!d);d&&(d=clearTimeout(d)),H&&(U.taps<2&&(u=ye[0],d=setTimeout(function(){d=null},f)),wo(this),U.start())}}function z(A,...D){if(this.__zooming){var C=T(this,D).event(A),S=A.changedTouches,U=S.length,H,ne,_e,ye;for(Gi(A),H=0;H<U;++H)ne=S[H],_e=On(ne,this),C.touch0&&C.touch0[2]===ne.identifier?C.touch0[0]=_e:C.touch1&&C.touch1[2]===ne.identifier&&(C.touch1[0]=_e);if(ne=C.that.__zoom,C.touch1){var ae=C.touch0[0],W=C.touch0[1],se=C.touch1[0],be=C.touch1[1],q=(q=se[0]-ae[0])*q+(q=se[1]-ae[1])*q,oe=(oe=be[0]-W[0])*oe+(oe=be[1]-W[1])*oe;ne=E(ne,Math.sqrt(q/oe)),_e=[(ae[0]+se[0])/2,(ae[1]+se[1])/2],ye=[(W[0]+be[0])/2,(W[1]+be[1])/2]}else if(C.touch0)_e=C.touch0[0],ye=C.touch0[1];else return;C.zoom("touch",n(k(ne,_e,ye),C.extent,o))}}function I(A,...D){if(this.__zooming){var C=T(this,D).event(A),S=A.changedTouches,U=S.length,H,ne;for(dl(A),h&&clearTimeout(h),h=setTimeout(function(){h=null},f),H=0;H<U;++H)ne=S[H],C.touch0&&C.touch0[2]===ne.identifier?delete C.touch0:C.touch1&&C.touch1[2]===ne.identifier&&delete C.touch1;if(C.touch1&&!C.touch0&&(C.touch0=C.touch1,delete C.touch1),C.touch0)C.touch0[1]=this.__zoom.invert(C.touch0[0]);else if(C.end(),C.taps===2&&(ne=On(ne,this),Math.hypot(u[0]-ne[0],u[1]-ne[1])<w)){var _e=Gt(this).on("dblclick.zoom");_e&&_e.apply(this,arguments)}}}return b.wheelDelta=function(A){return arguments.length?(r=typeof A=="function"?A:Qs(+A),b):r},b.filter=function(A){return arguments.length?(t=typeof A=="function"?A:Qs(!!A),b):t},b.touchable=function(A){return arguments.length?(i=typeof A=="function"?A:Qs(!!A),b):i},b.extent=function(A){return arguments.length?(e=typeof A=="function"?A:Qs([[+A[0][0],+A[0][1]],[+A[1][0],+A[1][1]]]),b):e},b.scaleExtent=function(A){return arguments.length?(s[0]=+A[0],s[1]=+A[1],b):[s[0],s[1]]},b.translateExtent=function(A){return arguments.length?(o[0][0]=+A[0][0],o[1][0]=+A[1][0],o[0][1]=+A[0][1],o[1][1]=+A[1][1],b):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},b.constrain=function(A){return arguments.length?(n=A,b):n},b.duration=function(A){return arguments.length?(a=+A,b):a},b.interpolate=function(A){return arguments.length?(l=A,b):l},b.on=function(){var A=c.on.apply(c,arguments);return A===c?b:A},b.clickDistance=function(A){return arguments.length?(y=(A=+A)*A,b):Math.sqrt(y)},b.tapDistance=function(A){return arguments.length?(w=+A,b):w},b}const Fe={WIDTH:800,HEIGHT:600,NODE_RADIUS:8,LINK_DISTANCE:100,CHARGE_STRENGTH:-300,MIN_RADIUS:5,MAX_RADIUS:20,COLLISION_PADDING:2,COLLISION_STRENGTH:.7,LINK_STRENGTH:.5,ZOOM_MIN:.1,ZOOM_MAX:4,RESIZE_DEBOUNCE_MS:150,TOOLTIP_PADDING:12,TOOLTIP_DURATION:150,TOOLTIP_MAX_WIDTH:280,DRAG_ALPHA_TARGET:.3,SIMULATION_ALPHA:1,SIMULATION_RESTART_ALPHA:.3,LABEL_VISIBILITY_THRESHOLD:.5};function ct(t){return typeof t=="string"?t:t?.id||String(t)}function nr(t){const e=ct(t.source),n=ct(t.target);return e<n?`${e}-${n}`:`${n}-${e}`}function ER(t,e){let n;return function(...i){const s=()=>{clearTimeout(n),t(...i)};clearTimeout(n),n=setTimeout(s,e)}}class Yh{constructor(e,n={}){if(this.container=typeof e=="string"?document.querySelector(e):e,!this.container)throw new Error("NetworkGraphD3: Container not found");this.log=Ze({prefix:"NetworkGraphD3",level:"info"}),this.options={width:n.width||Fe.WIDTH,height:n.height||Fe.HEIGHT,nodeRadius:n.nodeRadius||Fe.NODE_RADIUS,linkDistance:n.linkDistance||Fe.LINK_DISTANCE,chargeStrength:n.chargeStrength||Fe.CHARGE_STRENGTH,sizeBy:n.sizeBy||null,minRadius:n.minRadius||Fe.MIN_RADIUS,maxRadius:n.maxRadius||Fe.MAX_RADIUS,colorBy:n.colorBy||"group",colorScheme:n.colorScheme||"categorical",showLabels:n.showLabels!==!1,tooltipBuilder:n.tooltipBuilder||null,renderMode:n.renderMode||"colors",...n},this.options.minRadius>=this.options.maxRadius&&(this.log.warn("minRadius should be less than maxRadius, adjusting..."),this.options.minRadius=Math.min(this.options.minRadius,this.options.maxRadius-1)),this.data={nodes:[],links:[]},this.svg=null,this.simulation=null,this.isDestroyed=!1,this.isReady=!1,this.isRendering=!1,this.selectedNode=null,this.sizeScale=null,this.colorScale=null,this.resizeHandler=null,this.darkModeQuery=null,this.darkModeHandler=null,this.tooltip=null,this.currentTooltipNode=null,this.linkKeyCache=new Map,this.stabilizationCheckFrame=null,this.lastAlpha=1,this.stableTickCount=0,this.requiredStableTicks=10,this.stabilizationThreshold=.01,this.init()}init(){this.log.debug("Initializing graph",{width:this.options.width,height:this.options.height}),this.svg=Gt(this.container).append("svg").attr("width",this.options.width).attr("height",this.options.height).attr("viewBox",`0 0 ${this.options.width} ${this.options.height}`).attr("preserveAspectRatio","xMidYMid meet").attr("role","img").attr("aria-label","Network graph visualization").style("background","transparent").style("opacity",0).style("visibility","hidden").attr("class","network-graph-svg"),this.g=this.svg.append("g").attr("class","main-group"),this.linkGroup=this.g.append("g").attr("class","links").attr("aria-label","Graph links"),this.nodeGroup=this.g.append("g").attr("class","nodes").attr("aria-label","Graph nodes"),this.options.showLabels&&(this.labelGroup=this.g.append("g").attr("class","labels").attr("aria-label","Node labels")),this.createTooltip(),this.zoomBehavior=wR().scaleExtent([Fe.ZOOM_MIN,Fe.ZOOM_MAX]).on("zoom",e=>{this.g.attr("transform",e.transform),this.currentZoom=e.transform.k,this.updateLabelVisibility()}),this.svg.call(this.zoomBehavior),this.currentZoom=1,this.svg.on("click",e=>{e.target===this.svg.node()&&this.deselectNode()}),this.simulation=BN().force("link",DN().id(e=>e.id).distance(this.options.linkDistance).strength(Fe.LINK_STRENGTH)).force("charge",VN().strength(this.options.chargeStrength)).force("center",Fh(this.options.width/2,this.options.height/2)).force("collision",LN().radius(e=>this.getNodeRadius(e)+Fe.COLLISION_PADDING).strength(Fe.COLLISION_STRENGTH)).on("tick",()=>this.onTick()).on("end",()=>this.onSimulationEnd()),this.resizeHandler=ER(()=>this.handleResize(),Fe.RESIZE_DEBOUNCE_MS),window.addEventListener("resize",this.resizeHandler)}setData(e,n){if(this.isDestroyed){this.log.warn("Cannot set data on destroyed instance");return}if(!Array.isArray(e))throw new Error("NetworkGraphD3: nodes must be an array");if(!Array.isArray(n))throw new Error("NetworkGraphD3: links must be an array");const r=e.filter(i=>!i||!i.id);r.length>0&&this.log.warn(`Found ${r.length} nodes without id property`),this.log.debug("Setting graph data",{nodeCount:e.length,linkCount:n.length}),this.data.nodes=e,this.data.links=n.map(i=>({...i,source:ct(i.source),target:ct(i.target)})),this.linkKeyCache.clear(),this.selectedNode=null,this.computeScales(),this.updateGraph()}computeScales(){if(!this.data.nodes||this.data.nodes.length===0){this.sizeScale=null,this.colorScale=null;return}if(this.options.sizeBy){const r=this.data.nodes.map(i=>i[this.options.sizeBy]).filter(i=>i!=null);if(r.length>0){let i=Math.min(...r),s=Math.max(...r);i===s&&(s=i+1);const o=this.options.sizeExponent||.4;this.sizeScale=Ym().exponent(o).domain([i,s]).range([this.options.minRadius,this.options.maxRadius]).clamp(!0)}else this.sizeScale=null}else this.sizeScale=null;const e=this.options.colorBy;if(!e){this.colorScale=null;return}const n=this.data.nodes.map(r=>r[e]).filter(r=>r!=null);if(n.length>0){const r=n.every(o=>typeof o=="number"),i=["group","community"].includes(e);if(this.options.colorScheme==="sequential"||r&&!i){const o=Math.min(...n),a=Math.max(...n);this.colorScale=Jm(gR).domain([o,a])}else{const o=[...new Set(n)].sort((l,c)=>typeof l=="number"&&typeof c=="number"?l-c:String(l).localeCompare(String(c))),a=["#3b82f6","#10b981","#f59e0b","#ef4444","#6366f1","#ec4899","#06b6d4","#f97316","#14b8a6","#a855f7"];this.colorScale=Xm().domain(o).range(a).unknown(a[0])}}else this.colorScale=null}updateVisualEncoding(e={}){e.sizeBy!==void 0&&(this.options.sizeBy=e.sizeBy),e.minRadius!==void 0&&(this.options.minRadius=e.minRadius),e.maxRadius!==void 0&&(this.options.maxRadius=e.maxRadius),e.colorBy!==void 0&&(this.options.colorBy=e.colorBy),e.colorScheme!==void 0&&(this.options.colorScheme=e.colorScheme);const n=e.preserveZoom!==!1;let r=null;n&&this.g&&(r=Qm(this.svg.node())),this.computeScales(),this.svg&&this.isReady&&this.svg.style("opacity",1).style("visibility","visible"),this.node&&this.node.attr("r",i=>this.getNodeRadius(i)).attr("fill",i=>this.getNodeColor(i)),this.simulation&&this.simulation.force("collision").radius(i=>this.getNodeRadius(i)+Fe.COLLISION_PADDING),n&&r&&this.zoomBehavior&&this.svg&&(this.svg.call(this.zoomBehavior.transform,r),this.g.attr("transform",r),this.currentZoom=r.k)}setRenderMode(e){if(e!=="colors"&&e!=="avatars"){this.log.warn(`Invalid render mode: ${e}. Must be 'colors' or 'avatars'`);return}this.options.renderMode=e,this.log.debug(`Render mode changed to: ${e}`),this.nodeGroup&&(this.nodeGroup.selectAll("circle").remove(),this.nodeGroup.selectAll("text").remove(),this.node=null),this.labelGroup&&(this.labelGroup.selectAll("text").remove(),this.label=null),this.updateGraph()}updateNodeStatistics(e,n="eigenvector",r=!0){if(!e||!Array.isArray(e)){this.log.warn("updateNodeStatistics: enrichedNodes must be an array");return}this.svg&&this.isReady&&this.svg.style("opacity",1).style("visibility","visible");const i=new Map;e.forEach(o=>{i.set(o.id,o)});let s=!1;this.data.nodes.forEach(o=>{const a=i.get(o.id);a&&(Object.keys(a).forEach(l=>{l!=="x"&&l!=="y"&&l!=="vx"&&l!=="vy"&&l!=="fx"&&l!=="fy"&&(o[l]=a[l])}),a.eigenvector!==void 0&&(s=!0))}),s&&n==="eigenvector"?this.updateVisualEncoding({sizeBy:"eigenvector",preserveZoom:r}):(this.computeScales(),this.node&&this.node.attr("r",o=>this.getNodeRadius(o)).attr("fill",o=>this.getNodeColor(o)),this.simulation&&this.simulation.force("collision").radius(o=>this.getNodeRadius(o)+Fe.COLLISION_PADDING)),this.log.debug("Node statistics updated",{nodeCount:e.length,sizingBy:s?n:"none"})}updateCliqueEdgeColors(e){if(!this.data||!this.data.nodes||!this.data.links)return;const n="#ef4444",r="var(--color-border)",i=new Map;this.data.nodes.forEach(o=>{const a=String(o.id);i.set(a,new Set)}),this.data.links.forEach(o=>{const a=ct(o.source),l=ct(o.target);i.has(a)&&i.get(a).add(l),i.has(l)&&i.get(l).add(a)});const s=(o,a)=>{const l=i.get(o)||new Set,c=i.get(a)||new Set;for(const d of l)if(d!==a&&c.has(d))return!0;return!1};if(this.linkGroup){const o=this.linkGroup.selectAll("line");o.size()>0?(o.attr("stroke",a=>{const l=ct(a.source),c=ct(a.target);return e&&s(l,c)?n:r}),this.log.debug("Updated clique edge colors",{enabled:e,linkCount:o.size()})):this.log.warn("No links found to update colors",{linkGroupExists:!!this.linkGroup})}else this.log.warn("Link group not initialized, cannot update clique edge colors")}updateGraph(){if(!this.data.nodes||!this.data.links)return;this.isReady=!1,this.isRendering=!1,this.stableTickCount=0,this.lastAlpha=1,this.svg&&this.svg.style("opacity",0).style("visibility","hidden"),this.link=this.linkGroup.selectAll("line").data(this.data.links,i=>nr(i)),this.link.exit().remove();const e=this.link.enter().append("line").attr("stroke","var(--color-border)").attr("stroke-width",2).attr("stroke-opacity",.6).attr("aria-label",i=>`Link from ${ct(i.source)} to ${ct(i.target)}`);this.link=e.merge(this.link);const n=this.options.renderMode==="avatars"?"text":"circle";this.node=this.nodeGroup.selectAll(n).data(this.data.nodes,i=>i.id),this.node.exit().remove();const r=this.node.enter().append(n);if(this.options.renderMode==="avatars"?r.attr("text-anchor","middle").attr("dominant-baseline","central").attr("font-size",i=>`${this.getNodeRadius(i)*2}px`).attr("cursor","pointer").attr("role","button").attr("tabindex",0).attr("aria-label",i=>`Node ${i.id}`).text(i=>i.avatar||"").attr("stroke",i=>this.getNodeStrokeColor(i)).attr("stroke-width",i=>this.getNodeStrokeWidth(i)*.5).attr("paint-order","stroke").call(this.createDragBehavior()).on("mouseover",(i,s)=>this.onNodeMouseOver(i,s)).on("mouseout",(i,s)=>this.onNodeMouseOut(i,s)).on("click",(i,s)=>{i.stopPropagation(),this.toggleNodeSelection(s),this.emit("nodeClick",s)}).on("keydown",(i,s)=>{(i.key==="Enter"||i.key===" ")&&(i.preventDefault(),this.toggleNodeSelection(s),this.emit("nodeClick",s))}):r.attr("r",i=>this.getNodeRadius(i)).attr("fill",i=>this.getNodeColor(i)).attr("stroke","#fff").attr("stroke-width",2).attr("cursor","pointer").attr("role","button").attr("tabindex",0).attr("aria-label",i=>`Node ${i.id}`).call(this.createDragBehavior()).on("mouseover",(i,s)=>this.onNodeMouseOver(i,s)).on("mouseout",(i,s)=>this.onNodeMouseOut(i,s)).on("click",(i,s)=>{i.stopPropagation(),this.toggleNodeSelection(s),this.emit("nodeClick",s)}).on("keydown",(i,s)=>{(i.key==="Enter"||i.key===" ")&&(i.preventDefault(),this.toggleNodeSelection(s),this.emit("nodeClick",s))}),this.node=r.merge(this.node),this.options.renderMode==="avatars"?this.node.attr("font-size",i=>`${this.getNodeRadius(i)*2}px`).text(i=>i.avatar||"").attr("stroke",i=>this.getNodeStrokeColor(i)).attr("stroke-width",i=>this.getNodeStrokeWidth(i)*.5):this.node.attr("r",i=>this.getNodeRadius(i)).attr("fill",i=>this.getNodeColor(i)).attr("stroke",i=>this.getNodeStrokeColor(i)).attr("stroke-width",i=>this.getNodeStrokeWidth(i)),this.simulation.force("collision").radius(i=>this.getNodeRadius(i)+Fe.COLLISION_PADDING),this.options.showLabels&&this.labelGroup){this.label=this.labelGroup.selectAll("text").data(this.data.nodes,s=>s.id),this.label.exit().remove();const i=this.label.enter().append("text").text(s=>s.id).attr("font-size","12px").attr("text-anchor","middle").attr("dx",0).attr("dy",s=>this.getNodeRadius(s)+15).attr("fill","var(--color-text-primary)").style("pointer-events","none").style("user-select","none").attr("aria-hidden","true");this.label=i.merge(this.label),this.label.attr("dy",s=>this.getNodeRadius(s)+15),this.updateLabelVisibility()}this.simulation.nodes(this.data.nodes),this.simulation.force("link").links(this.data.links),requestAnimationFrame(()=>{this.isRendering=!0,this.simulation.alpha(Fe.SIMULATION_ALPHA).restart()})}onTick(){this.isDestroyed||!this.isRendering&&!this.isReady||(this.link&&this.link.attr("x1",e=>e.source.x).attr("y1",e=>e.source.y).attr("x2",e=>e.target.x).attr("y2",e=>e.target.y),this.node&&(this.options.renderMode==="avatars"?this.node.attr("x",e=>e.x).attr("y",e=>e.y):this.node.attr("cx",e=>e.x).attr("cy",e=>e.y)),this.label&&this.label.attr("x",e=>e.x).attr("y",e=>e.y),!this.isReady&&this.simulation&&this.checkStabilization())}checkStabilization(){if(!this.simulation||this.isDestroyed)return;const e=this.simulation.alpha();e<this.stabilizationThreshold?this.stableTickCount++:this.stableTickCount=0,this.stableTickCount>=this.requiredStableTicks?this.markAsReady():this.stabilizationCheckFrame||(this.stabilizationCheckFrame=requestAnimationFrame(()=>{this.stabilizationCheckFrame=null})),this.lastAlpha=e}onSimulationEnd(){this.isDestroyed||this.markAsReady()}markAsReady(){this.isReady||this.isDestroyed||(this.log.debug("Graph marked as ready"),this.isReady=!0,this.isRendering=!0,this.svg&&this.svg.style("opacity",1).style("visibility","visible"),this.stabilizationCheckFrame&&(cancelAnimationFrame(this.stabilizationCheckFrame),this.stabilizationCheckFrame=null),requestAnimationFrame(()=>{requestAnimationFrame(()=>{this.fitToView(),this.emit("ready")})}))}createDragBehavior(){return xS().on("start",(e,n)=>{e.active||this.simulation.alphaTarget(Fe.DRAG_ALPHA_TARGET).restart(),n.fx=n.x,n.fy=n.y,this.emit("nodeDragStart",n)}).on("drag",(e,n)=>{n.fx=e.x,n.fy=e.y,this.emit("nodeDrag",n)}).on("end",(e,n)=>{e.active||this.simulation.alphaTarget(0),this.emit("nodeDragEnd",n)})}isDarkMode(){return document.documentElement.classList.contains("dark")||window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches}updateTooltipStyles(e){this.tooltip&&this.tooltip.style("background",e?"rgba(17, 24, 39, 0.95)":"rgba(0, 0, 0, 0.9)").style("color",e?"#f9fafb":"#fff").style("box-shadow",e?"0 4px 12px rgba(0, 0, 0, 0.5)":"0 4px 12px rgba(0, 0, 0, 0.3)").style("border",e?"1px solid rgba(255, 255, 255, 0.1)":"1px solid rgba(255, 255, 255, 0.2)")}createTooltip(){this.tooltip&&this.tooltip.remove(),this.darkModeQuery&&this.darkModeHandler&&this.darkModeQuery.removeEventListener("change",this.darkModeHandler);const e=this.isDarkMode();this.tooltip=Gt("body").append("div").attr("class","network-graph-tooltip").attr("role","tooltip").attr("aria-hidden","true").style("position","absolute").style("padding","10px 14px").style("border-radius","8px").style("font-size","12px").style("font-family","system-ui, -apple-system, sans-serif").style("pointer-events","none").style("opacity",0).style("visibility","hidden").style("z-index",1e3).style("max-width",`${Fe.TOOLTIP_MAX_WIDTH}px`).style("line-height","1.6").style("backdrop-filter","blur(8px)"),this.updateTooltipStyles(e),window.matchMedia&&(this.darkModeQuery=window.matchMedia("(prefers-color-scheme: dark)"),this.darkModeHandler=n=>{!this.isDestroyed&&this.tooltip&&this.updateTooltipStyles(n.matches)},this.darkModeQuery.addEventListener("change",this.darkModeHandler))}showTooltip(e,n){if(!this.tooltip||this.isDestroyed)return;const r=this.options.tooltipBuilder?this.options.tooltipBuilder(n):this.buildTooltipContent(n);this.tooltip.html(r);const i=e.clientX||e.pageX,s=e.clientY||e.pageY;this.tooltip.style("opacity",0).style("visibility","visible").attr("aria-hidden","false");const o=this.tooltip.node();if(!o)return;const a=o.offsetWidth||200,l=o.offsetHeight||100,c=Fe.TOOLTIP_PADDING;let d=i+c,u=s-l-c;const h=window.innerWidth,f=window.innerHeight;d+a>h-c&&(d=i-a-c),d<c&&(d=i+c),u<c&&(u=s+c),u+l>f-c&&(u=s-l-c),this.tooltip.style("left",`${d}px`).style("top",`${u}px`).transition().duration(Fe.TOOLTIP_DURATION).style("opacity",1),this.currentTooltipNode=n}hideTooltip(){this.tooltip&&(this.tooltip.transition().duration(Fe.TOOLTIP_DURATION).style("opacity",0).on("end",function(){Gt(this).style("visibility","hidden").attr("aria-hidden","true")}),this.currentTooltipNode=null)}updateLabelVisibility(){if(!this.label||!this.options.showLabels)return;const e=this.currentZoom>=Fe.LABEL_VISIBILITY_THRESHOLD;this.label.style("opacity",e?1:0).style("visibility",e?"visible":"hidden")}buildTooltipContent(e){if(!e)return"";const n=[];n.push(`<div style="font-weight: 600; margin-bottom: 6px; font-size: 13px;"> ${e.id}</div>`);const r=new Set(["id","x","y","fx","fy","vx","vy","index","__data__","__transition__"]),i=["relationship","gender","avatar","group","community"],s=["degree","eigenvector","betweenness","clustering","closeness","centrality"];i.forEach(l=>{if(e[l]!==void 0&&e[l]!==null&&!r.has(l)){const c=e[l];let d=l.charAt(0).toUpperCase()+l.slice(1).replace(/_/g," ");if(l==="relationship")n.push(`<div style="margin-bottom: 3px;"><strong> Relationship:</strong> ${this.escapeHtml(c)}</div>`);else if(l==="gender"){const h={male:{emoji:"",text:"Male"},female:{emoji:"",text:"Female"},other:{emoji:"",text:"Other"}}[c]||{emoji:"",text:c};n.push(`<div style="margin-bottom: 3px;"><strong>Gender:</strong> ${h.emoji} ${h.text}</div>`)}else l==="avatar"?n.push(`<div style="margin-bottom: 3px;"><strong>Avatar:</strong> ${c}</div>`):l==="group"?n.push(`<div style="margin-bottom: 3px;"><strong>Group:</strong> ${c}</div>`):l==="community"?n.push(`<div style="margin-bottom: 3px;"><strong> Community:</strong> ${c}</div>`):n.push(`<div style="margin-bottom: 3px;"><strong>${d}:</strong> ${this.escapeHtml(String(c))}</div>`)}}),s.forEach(l=>{if(e[l]!==void 0&&e[l]!==null&&!r.has(l)){const c=e[l],d=l.charAt(0).toUpperCase()+l.slice(1).replace(/_/g," ");if(l==="centrality"&&e.eigenvector!==void 0)return;typeof c=="number"?n.push(`<div style="margin-bottom: 2px;"><strong>${d}:</strong> ${c.toFixed(4)}</div>`):n.push(`<div style="margin-bottom: 2px;"><strong>${d}:</strong> ${this.escapeHtml(String(c))}</div>`)}});const o=new Set([...i,...s,"x","y"]),a=Object.keys(e).filter(l=>!r.has(l)&&!o.has(l)&&e[l]!==void 0&&e[l]!==null&&typeof e[l]!="function"&&!l.startsWith("__")).sort();return a.length>0&&(n.push(`<div style="margin-top: 6px; padding-top: 6px; border-top: 1px solid ${this.isDarkMode()?"rgba(255,255,255,0.15)":"rgba(0,0,0,0.1)"}; font-size: 11px;">`),n.push(`<div style="margin-bottom: 4px; font-weight: 600; color: ${this.isDarkMode()?"rgba(249,250,251,0.8)":"rgba(0,0,0,0.7)"};">Other Properties:</div>`),a.forEach(l=>{const c=e[l];let d;typeof c=="object"&&c!==null?Array.isArray(c)?d=`[${c.length} items]`:d=`{${Object.keys(c).length} keys}`:d=String(c);const u=l.charAt(0).toUpperCase()+l.slice(1).replace(/_/g," ");n.push(`<div style="margin-bottom: 2px; font-family: monospace; font-size: 10px;"><strong>${u}:</strong> ${this.escapeHtml(d)}</div>`)}),n.push("</div>")),e.x!==void 0&&e.y,n.join("")}escapeHtml(e){const n=document.createElement("div");return n.textContent=e,n.innerHTML}onNodeMouseOver(e,n){Gt(e.currentTarget).attr("stroke-width",4).attr("stroke","#fbbf24"),this.showTooltip(e,n),this.emit("nodeHover",n)}onNodeMouseOut(e,n){Gt(e.currentTarget).attr("stroke-width",this.getNodeStrokeWidth(n)).attr("stroke",this.getNodeStrokeColor(n)),this.hideTooltip(),this.emit("nodeLeave",n)}getNodeRadius(e){if(this.options.sizeBy&&this.sizeScale){const n=e[this.options.sizeBy];if(n!=null)return this.sizeScale(n)}return this.options.nodeRadius}getNodeColor(e){if(this.options.customColorFunction){const s=this.options.customColorFunction(e);if(s)return s}const n=this.options.colorBy;if(this.colorScale){const s=e[n];if(s!=null)return this.colorScale(s)}const r=e.group||0,i=["#3b82f6","#10b981","#f59e0b","#ef4444","#6366f1","#ec4899","#06b6d4","#f97316","#14b8a6","#a855f7"];return i[(r-1)%i.length]}getNodeStrokeColor(e){return this.selectedNode&&this.selectedNode.id===e.id?"#fb923c":"#fff"}getNodeStrokeWidth(e){return this.selectedNode&&this.selectedNode.id===e.id?3:2}toggleNodeSelection(e){this.selectedNode&&this.selectedNode.id===e.id?this.deselectNode():this.selectNode(e)}selectNode(e){if(!e)return;const n=this.selectedNode;n&&(n.fx=null,n.fy=null),this.selectedNode=e,this.node&&this.node.attr("stroke",r=>this.getNodeStrokeColor(r)).attr("stroke-width",r=>this.getNodeStrokeWidth(r)),this.log.debug("Node selected",{nodeId:e.id}),this.emit("nodeSelected",{node:e,previousSelection:n})}deselectNode(){if(!this.selectedNode)return;const e=this.selectedNode;e.fx=null,e.fy=null,this.selectedNode=null,this.node&&this.node.attr("stroke",n=>this.getNodeStrokeColor(n)).attr("stroke-width",n=>this.getNodeStrokeWidth(n)),this.simulation&&this.simulation.alpha(.3).restart(),this.log.debug("Node deselected",{nodeId:e.id}),this.emit("nodeDeselected",{previousSelection:e})}getSelectedNode(){return this.selectedNode}handleResize(){if(this.isDestroyed||!this.container)return;const e=this.container.getBoundingClientRect(),n=e.width||this.options.width,r=e.height||this.options.height;n===this.options.width&&r===this.options.height||(this.options.width=n,this.options.height=r,this.svg&&this.svg.attr("width",n).attr("height",r).attr("viewBox",`0 0 ${n} ${r}`),this.simulation&&this.simulation.force("center",Fh(n/2,r/2)).alpha(Fe.SIMULATION_RESTART_ALPHA).restart(),this.emit("resize",{width:n,height:r}))}emit(e,n){this.eventHandlers&&this.eventHandlers[e]&&this.eventHandlers[e].forEach(r=>r(n))}on(e,n){this.eventHandlers||(this.eventHandlers={}),this.eventHandlers[e]||(this.eventHandlers[e]=[]),this.eventHandlers[e].push(n)}off(e,n){this.eventHandlers&&this.eventHandlers[e]&&(this.eventHandlers[e]=this.eventHandlers[e].filter(r=>r!==n))}addNodeIncremental(e=[],n=null,r=null){const i=n||`Node${this.data.nodes.length+1}`,s=r!==null?r:this.data.nodes.length>0?this.data.nodes[Math.floor(Math.random()*this.data.nodes.length)].group:1;let o=this.options.width/2,a=this.options.height/2;if(e.length>0){const d=this.data.nodes.filter(u=>e.includes(u.id));if(d.length>0){o=d.reduce((f,p)=>f+p.x,0)/d.length,a=d.reduce((f,p)=>f+p.y,0)/d.length;const u=Math.random()*2*Math.PI,h=50+Math.random()*50;o+=Math.cos(u)*h,a+=Math.sin(u)*h}}const l={id:i,group:s,centrality:.5,x:o,y:a,fx:o,fy:a};this.data.nodes.push(l);const c=[];if(e.forEach(d=>{if(this.data.nodes.find(u=>u.id===d)){const u={source:i,target:d};this.data.links.push(u),c.push(u)}}),this.computeScales(),this.nodeGroup){const d=this.options.renderMode==="avatars"?"text":"circle";this.node=this.nodeGroup.selectAll(d).data(this.data.nodes,h=>h.id);const u=this.node.enter().append(d);this.options.renderMode==="avatars"?u.attr("text-anchor","middle").attr("dominant-baseline","central").attr("font-size",h=>`${this.getNodeRadius(h)*2}px`).attr("cursor","pointer").attr("role","button").attr("tabindex",0).attr("aria-label",h=>`Node ${h.id}`).attr("x",h=>h.x).attr("y",h=>h.y).text(h=>h.avatar||"").attr("stroke",h=>this.getNodeStrokeColor(h)).attr("stroke-width",h=>this.getNodeStrokeWidth(h)*.5).attr("paint-order","stroke").call(this.createDragBehavior()).on("mouseover",(h,f)=>this.onNodeMouseOver(h,f)).on("mouseout",(h,f)=>this.onNodeMouseOut(h,f)).on("click",(h,f)=>{h.stopPropagation(),this.toggleNodeSelection(f),this.emit("nodeClick",f)}).on("keydown",(h,f)=>{(h.key==="Enter"||h.key===" ")&&(h.preventDefault(),this.toggleNodeSelection(f),this.emit("nodeClick",f))}):u.attr("r",h=>this.getNodeRadius(h)).attr("fill",h=>this.getNodeColor(h)).attr("stroke","#fff").attr("stroke-width",2).attr("cursor","pointer").attr("role","button").attr("tabindex",0).attr("aria-label",h=>`Node ${h.id}`).attr("cx",h=>h.x).attr("cy",h=>h.y).call(this.createDragBehavior()).on("mouseover",(h,f)=>this.onNodeMouseOver(h,f)).on("mouseout",(h,f)=>this.onNodeMouseOut(h,f)).on("click",(h,f)=>{h.stopPropagation(),this.toggleNodeSelection(f),this.emit("nodeClick",f)}).on("keydown",(h,f)=>{(h.key==="Enter"||h.key===" ")&&(h.preventDefault(),this.toggleNodeSelection(f),this.emit("nodeClick",f))}),this.node=u.merge(this.node),this.options.renderMode==="avatars"?this.node.attr("font-size",h=>`${this.getNodeRadius(h)*2}px`).text(h=>h.avatar||"").attr("stroke",h=>this.getNodeStrokeColor(h)).attr("stroke-width",h=>this.getNodeStrokeWidth(h)*.5):this.node.attr("r",h=>this.getNodeRadius(h)).attr("fill",h=>this.getNodeColor(h)).attr("stroke",h=>this.getNodeStrokeColor(h)).attr("stroke-width",h=>this.getNodeStrokeWidth(h))}if(this.linkGroup&&c.length>0){this.link=this.linkGroup.selectAll("line").data(this.data.links,u=>nr(u));const d=this.link.enter().append("line").attr("stroke","var(--color-border)").attr("stroke-width",2).attr("stroke-opacity",.6).attr("x1",u=>(typeof u.source=="object"?u.source:this.data.nodes.find(f=>f.id===u.source))?.x||0).attr("y1",u=>(typeof u.source=="object"?u.source:this.data.nodes.find(f=>f.id===u.source))?.y||0).attr("x2",u=>(typeof u.target=="object"?u.target:this.data.nodes.find(f=>f.id===u.target))?.x||0).attr("y2",u=>(typeof u.target=="object"?u.target:this.data.nodes.find(f=>f.id===u.target))?.y||0).attr("aria-label",u=>`Link from ${ct(u.source)} to ${ct(u.target)}`);this.link=d.merge(this.link)}if(this.options.showLabels&&this.labelGroup){this.label=this.labelGroup.selectAll("text").data(this.data.nodes,u=>u.id);const d=this.label.enter().append("text").text(u=>u.id).attr("font-size","12px").attr("text-anchor","middle").attr("dx",0).attr("dy",u=>this.getNodeRadius(u)+15).attr("fill","var(--color-text-primary)").attr("x",u=>u.x).attr("y",u=>u.y).style("pointer-events","none").style("user-select","none").attr("aria-hidden","true");this.label=d.merge(this.label),this.label.attr("dy",u=>this.getNodeRadius(u)+15),this.updateLabelVisibility()}return this.simulation.nodes(this.data.nodes),this.simulation.force("link").links(this.data.links),this.simulation.force("collision").radius(d=>this.getNodeRadius(d)+Fe.COLLISION_PADDING),this.isReady?this.simulation.alpha(.3).restart():(this.isRendering=!0,requestAnimationFrame(()=>{this.simulation.alpha(Fe.SIMULATION_ALPHA).restart()})),setTimeout(()=>{const d=this.data.nodes.find(u=>u.id===i);d&&(d.fx=null,d.fy=null,this.simulation.alpha(.3).restart())},1e3),l}addNode(e=[],n=null,r=null){const i=n||`Node${this.data.nodes.length+1}`,s=r!==null?r:this.data.nodes.length>0?this.data.nodes[Math.floor(Math.random()*this.data.nodes.length)].group:1;let o=this.options.width/2,a=this.options.height/2;if(e.length>0){const c=this.data.nodes.filter(d=>e.includes(d.id));if(c.length>0){o=c.reduce((h,f)=>h+f.x,0)/c.length,a=c.reduce((h,f)=>h+f.y,0)/c.length;const d=Math.random()*2*Math.PI,u=50+Math.random()*50;o+=Math.cos(d)*u,a+=Math.sin(d)*u}}const l={id:i,group:s,centrality:.5,x:o,y:a,fx:o,fy:a};return this.data.nodes.push(l),e.forEach(c=>{this.data.nodes.find(d=>d.id===c)&&this.data.links.push({source:i,target:c})}),this.updateGraph(),setTimeout(()=>{const c=this.data.nodes.find(d=>d.id===i);c&&(c.fx=null,c.fy=null,this.simulation.alpha(.3).restart())},1e3),l}removeNode(e){if(!e)if(this.data.nodes.length>0)e=this.data.nodes[Math.floor(Math.random()*this.data.nodes.length)].id;else return!1;const n=this.data.nodes.findIndex(r=>r.id===e);return n===-1?!1:(this.data.nodes.splice(n,1),this.data.links=this.data.links.filter(r=>{const i=ct(r.source),s=ct(r.target);return i!==e&&s!==e}),this.linkKeyCache.clear(),this.updateGraph(),this.emit("nodeRemoved",e),!0)}removeNodeIncremental(e){if(!e)if(this.data.nodes.length>0)e=this.data.nodes[Math.floor(Math.random()*this.data.nodes.length)].id;else return!1;const n=this.data.nodes.findIndex(r=>r.id===e);return n===-1?!1:(this.data.nodes.splice(n,1),this.data.links=this.data.links.filter(r=>{const i=ct(r.source),s=ct(r.target);return i!==e&&s!==e}),this.linkKeyCache.clear(),this.computeScales(),this.nodeGroup&&(this.node=this.nodeGroup.selectAll("circle").data(this.data.nodes,r=>r.id),this.node.exit().remove()),this.linkGroup&&(this.link=this.linkGroup.selectAll("line").data(this.data.links,r=>nr(r)),this.link.exit().remove()),this.options.showLabels&&this.labelGroup&&(this.label=this.labelGroup.selectAll("text").data(this.data.nodes,r=>r.id),this.label.exit().remove()),this.simulation.nodes(this.data.nodes),this.simulation.force("link").links(this.data.links),this.simulation.force("collision").radius(r=>this.getNodeRadius(r)+Fe.COLLISION_PADDING),this.isReady?this.simulation.alpha(.3).restart():(this.isRendering=!0,requestAnimationFrame(()=>{this.simulation.alpha(Fe.SIMULATION_ALPHA).restart()})),this.emit("nodeRemoved",e),!0)}addLinkIncremental(e,n){if(!e||!n)return!1;const r=this.data.nodes.find(l=>l.id===e),i=this.data.nodes.find(l=>l.id===n);if(!r||!i)return this.log.warn(`Cannot add link: nodes ${e} or ${n} not found`),!1;if(e===n)return this.log.warn("Cannot add self-loop"),!1;const s={source:e,target:n},o=nr(s);if(this.data.links.some(l=>nr(l)===o))return this.log.debug(`Link already exists: ${e} -> ${n}`),!1;if(this.data.links.push(s),this.linkGroup){this.link=this.linkGroup.selectAll("line").data(this.data.links,c=>nr(c));const l=this.link.enter().append("line").attr("stroke","var(--color-border)").attr("stroke-width",2).attr("stroke-opacity",.6).attr("x1",c=>(typeof c.source=="object"?c.source:this.data.nodes.find(u=>u.id===c.source))?.x||0).attr("y1",c=>(typeof c.source=="object"?c.source:this.data.nodes.find(u=>u.id===c.source))?.y||0).attr("x2",c=>(typeof c.target=="object"?c.target:this.data.nodes.find(u=>u.id===c.target))?.x||0).attr("y2",c=>(typeof c.target=="object"?c.target:this.data.nodes.find(u=>u.id===c.target))?.y||0).attr("aria-label",c=>`Link from ${ct(c.source)} to ${ct(c.target)}`);this.link=l.merge(this.link)}return this.simulation.force("link").links(this.data.links),this.isReady?this.simulation.alpha(.3).restart():(this.isRendering=!0,requestAnimationFrame(()=>{this.simulation.alpha(Fe.SIMULATION_ALPHA).restart()})),this.emit("linkAdded",{source:e,target:n}),!0}addLink(e,n){if(!e||!n)return!1;const r=this.data.nodes.some(l=>l.id===e),i=this.data.nodes.some(l=>l.id===n);if(!r||!i)return this.log.warn(`Cannot add link: nodes ${e} or ${n} not found`),!1;if(e===n)return this.log.warn("Cannot add self-loop"),!1;const s={source:e,target:n},o=nr(s);return this.data.links.some(l=>nr(l)===o)?(this.log.debug(`Link already exists: ${e} -> ${n}`),!1):(this.data.links.push(s),this.updateGraph(),this.emit("linkAdded",{source:e,target:n}),!0)}getNodeIds(){return this.data.nodes.map(e=>e.id)}hasNode(e){return this.data.nodes.some(n=>n.id===e)}fitToView(){if(!this.data.nodes||this.data.nodes.length===0||!this.svg)return;let e=1/0,n=1/0,r=-1/0,i=-1/0;if(this.data.nodes.forEach(E=>{if(E.x!==void 0&&E.y!==void 0){const k=this.getNodeRadius(E);e=Math.min(e,E.x-k),n=Math.min(n,E.y-k),r=Math.max(r,E.x+k),i=Math.max(i,E.y+k)}}),e===1/0||n===1/0)return;const s=50;e-=s,n-=s,r+=s,i+=s;const o=r-e,a=i-n,l=(e+r)/2,c=(n+i)/2,d=this.options.width,u=this.options.height,h=d/o,f=u/a,p=Math.min(h,f,Fe.ZOOM_MAX)*.9,y=d/2-l*p,w=u/2-c*p,b=Ta.translate(y,w).scale(p);this.zoomBehavior&&this.svg&&this.svg.call(this.zoomBehavior.transform,b),this.g.attr("transform",b),this.currentZoom=p,this.updateLabelVisibility(),this.log.debug("Fitted graph to view",{scale:p,translateX:y,translateY:w})}lockPositions(){if(!this.data.nodes||this.data.nodes.length===0){this.log.warn("No nodes to lock");return}this.data.nodes.forEach(e=>{e.x!==void 0&&e.y!==void 0&&(e.fx=e.x,e.fy=e.y)}),this.simulation&&this.simulation.alpha(0).alphaTarget(0),this.log.debug("Node positions locked"),this.emit("positionsLocked")}unlockPositions(){if(!this.data.nodes||this.data.nodes.length===0){this.log.warn("No nodes to unlock");return}this.data.nodes.forEach(e=>{e.fx=null,e.fy=null}),this.simulation&&this.simulation.alpha(.3).alphaTarget(0).restart(),this.log.debug("Node positions unlocked"),this.emit("positionsUnlocked")}saveAsPNG(e="network-graph.png"){if(!this.svg||this.isDestroyed){this.log.warn("Cannot save PNG - graph not available");return}try{const n=this.svg.node();if(!n){this.log.warn("SVG element not found");return}const r=new XMLSerializer().serializeToString(n),i=new Image,s=new Blob([r],{type:"image/svg+xml;charset=utf-8"}),o=URL.createObjectURL(s);i.onload=()=>{const a=document.createElement("canvas");a.width=this.options.width,a.height=this.options.height;const l=a.getContext("2d");l.fillStyle="white",l.fillRect(0,0,a.width,a.height),l.drawImage(i,0,0),a.toBlob(c=>{if(c){const d=URL.createObjectURL(c),u=document.createElement("a");u.href=d,u.download=e,document.body.appendChild(u),u.click(),document.body.removeChild(u),URL.revokeObjectURL(d),this.log.info("PNG exported successfully",{filename:e})}},"image/png"),URL.revokeObjectURL(o)},i.onerror=()=>{this.log.error("Failed to load SVG for PNG export"),URL.revokeObjectURL(o)},i.src=o}catch(n){this.log.error("Failed to export PNG",{error:n.message,stack:n.stack})}}destroy(){this.isDestroyed||(this.log.debug("Destroying graph instance"),this.isDestroyed=!0,this.stabilizationCheckFrame&&(cancelAnimationFrame(this.stabilizationCheckFrame),this.stabilizationCheckFrame=null),this.simulation&&(this.simulation.stop(),this.simulation=null),this.resizeHandler&&(window.removeEventListener("resize",this.resizeHandler),this.resizeHandler=null),this.darkModeQuery&&this.darkModeHandler&&(this.darkModeQuery.removeEventListener("change",this.darkModeHandler),this.darkModeQuery=null,this.darkModeHandler=null),this.svg&&(this.svg.remove(),this.svg=null),this.tooltip&&(this.tooltip.remove(),this.tooltip=null),this.data={nodes:[],links:[]},this.linkKeyCache.clear(),this.eventHandlers={},this.log.info("Graph destroyed"))}}function kR(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function rs(t){var e=kR(t,"string");return typeof e=="symbol"?e:e+""}function xt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Jh(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,rs(r.key),r)}}function Ct(t,e,n){return e&&Jh(t.prototype,e),n&&Jh(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function wi(t){return wi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},wi(t)}function ey(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ey=function(){return!!t})()}function AR(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function xR(t,e){if(e&&(typeof e=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return AR(t)}function Jt(t,e,n){return e=wi(e),xR(t,ey()?Reflect.construct(e,n||[],wi(t).constructor):e.apply(t,n))}function kc(t,e){return kc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},kc(t,e)}function Qt(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&kc(t,e)}function CR(t){if(Array.isArray(t))return t}function SR(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,o,a=[],l=!0,c=!1;try{if(s=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=s.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(d){c=!0,i=d}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return a}}function Ac(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function ty(t,e){if(t){if(typeof t=="string")return Ac(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ac(t,e):void 0}}function TR(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ei(t,e){return CR(t)||SR(t,e)||ty(t,e)||TR()}var ul={black:"#000000",silver:"#C0C0C0",gray:"#808080",grey:"#808080",white:"#FFFFFF",maroon:"#800000",red:"#FF0000",purple:"#800080",fuchsia:"#FF00FF",green:"#008000",lime:"#00FF00",olive:"#808000",yellow:"#FFFF00",navy:"#000080",blue:"#0000FF",teal:"#008080",aqua:"#00FFFF",darkblue:"#00008B",mediumblue:"#0000CD",darkgreen:"#006400",darkcyan:"#008B8B",deepskyblue:"#00BFFF",darkturquoise:"#00CED1",mediumspringgreen:"#00FA9A",springgreen:"#00FF7F",cyan:"#00FFFF",midnightblue:"#191970",dodgerblue:"#1E90FF",lightseagreen:"#20B2AA",forestgreen:"#228B22",seagreen:"#2E8B57",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",limegreen:"#32CD32",mediumseagreen:"#3CB371",turquoise:"#40E0D0",royalblue:"#4169E1",steelblue:"#4682B4",darkslateblue:"#483D8B",mediumturquoise:"#48D1CC",indigo:"#4B0082",darkolivegreen:"#556B2F",cadetblue:"#5F9EA0",cornflowerblue:"#6495ED",rebeccapurple:"#663399",mediumaquamarine:"#66CDAA",dimgray:"#696969",dimgrey:"#696969",slateblue:"#6A5ACD",olivedrab:"#6B8E23",slategray:"#708090",slategrey:"#708090",lightslategray:"#778899",lightslategrey:"#778899",mediumslateblue:"#7B68EE",lawngreen:"#7CFC00",chartreuse:"#7FFF00",aquamarine:"#7FFFD4",skyblue:"#87CEEB",lightskyblue:"#87CEFA",blueviolet:"#8A2BE2",darkred:"#8B0000",darkmagenta:"#8B008B",saddlebrown:"#8B4513",darkseagreen:"#8FBC8F",lightgreen:"#90EE90",mediumpurple:"#9370DB",darkviolet:"#9400D3",palegreen:"#98FB98",darkorchid:"#9932CC",yellowgreen:"#9ACD32",sienna:"#A0522D",brown:"#A52A2A",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",lightblue:"#ADD8E6",greenyellow:"#ADFF2F",paleturquoise:"#AFEEEE",lightsteelblue:"#B0C4DE",powderblue:"#B0E0E6",firebrick:"#B22222",darkgoldenrod:"#B8860B",mediumorchid:"#BA55D3",rosybrown:"#BC8F8F",darkkhaki:"#BDB76B",mediumvioletred:"#C71585",indianred:"#CD5C5C",peru:"#CD853F",chocolate:"#D2691E",tan:"#D2B48C",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",thistle:"#D8BFD8",orchid:"#DA70D6",goldenrod:"#DAA520",palevioletred:"#DB7093",crimson:"#DC143C",gainsboro:"#DCDCDC",plum:"#DDA0DD",burlywood:"#DEB887",lightcyan:"#E0FFFF",lavender:"#E6E6FA",darksalmon:"#E9967A",violet:"#EE82EE",palegoldenrod:"#EEE8AA",lightcoral:"#F08080",khaki:"#F0E68C",aliceblue:"#F0F8FF",honeydew:"#F0FFF0",azure:"#F0FFFF",sandybrown:"#F4A460",wheat:"#F5DEB3",beige:"#F5F5DC",whitesmoke:"#F5F5F5",mintcream:"#F5FFFA",ghostwhite:"#F8F8FF",salmon:"#FA8072",antiquewhite:"#FAEBD7",linen:"#FAF0E6",lightgoldenrodyellow:"#FAFAD2",oldlace:"#FDF5E6",magenta:"#FF00FF",deeppink:"#FF1493",orangered:"#FF4500",tomato:"#FF6347",hotpink:"#FF69B4",coral:"#FF7F50",darkorange:"#FF8C00",lightsalmon:"#FFA07A",orange:"#FFA500",lightpink:"#FFB6C1",pink:"#FFC0CB",gold:"#FFD700",peachpuff:"#FFDAB9",navajowhite:"#FFDEAD",moccasin:"#FFE4B5",bisque:"#FFE4C4",mistyrose:"#FFE4E1",blanchedalmond:"#FFEBCD",papayawhip:"#FFEFD5",lavenderblush:"#FFF0F5",seashell:"#FFF5EE",cornsilk:"#FFF8DC",lemonchiffon:"#FFFACD",floralwhite:"#FFFAF0",snow:"#FFFAFA",lightyellow:"#FFFFE0",ivory:"#FFFFF0"},ny=new Int8Array(4),Eo=new Int32Array(ny.buffer,0,1),ry=new Float32Array(ny.buffer,0,1),NR=/^\s*rgba?\s*\(/,RR=/^\s*rgba?\s*\(\s*([0-9]*)\s*,\s*([0-9]*)\s*,\s*([0-9]*)(?:\s*,\s*(.*)?)?\)\s*$/;function LR(t){var e=0,n=0,r=0,i=1;if(t[0]==="#")t.length===4?(e=parseInt(t.charAt(1)+t.charAt(1),16),n=parseInt(t.charAt(2)+t.charAt(2),16),r=parseInt(t.charAt(3)+t.charAt(3),16)):(e=parseInt(t.charAt(1)+t.charAt(2),16),n=parseInt(t.charAt(3)+t.charAt(4),16),r=parseInt(t.charAt(5)+t.charAt(6),16)),t.length===9&&(i=parseInt(t.charAt(7)+t.charAt(8),16)/255);else if(NR.test(t)){var s=t.match(RR);s&&(e=+s[1],n=+s[2],r=+s[3],s[4]&&(i=+s[4]))}return{r:e,g:n,b:r,a:i}}var di={};for(var eo in ul)di[eo]=Br(ul[eo]),di[ul[eo]]=di[eo];function iy(t,e,n,r,i){return Eo[0]=r<<24|n<<16|e<<8|t,Eo[0]=Eo[0]&4278190079,ry[0]}function Br(t){if(t=t.toLowerCase(),typeof di[t]<"u")return di[t];var e=LR(t),n=e.r,r=e.g,i=e.b,s=e.a;s=s*255|0;var o=iy(n,r,i,s);return di[t]=o,o}function IR(t,e){ry[0]=Br(t);var n=Eo[0],r=n&255,i=n>>8&255,s=n>>16&255,o=n>>24&255;return[r,i,s,o]}var hl={};function sy(t){if(typeof hl[t]<"u")return hl[t];var e=(t&16711680)>>>16,n=(t&65280)>>>8,r=t&255,i=255,s=iy(e,n,r,i);return hl[t]=s,s}function Qh(t,e,n,r){return n+(e<<8)+(t<<16)}function ef(t,e,n,r,i,s){var o=Math.floor(n/s*i),a=Math.floor(t.drawingBufferHeight/s-r/s*i),l=new Uint8Array(4);t.bindFramebuffer(t.FRAMEBUFFER,e),t.readPixels(o,a,1,1,t.RGBA,t.UNSIGNED_BYTE,l);var c=Ei(l,4),d=c[0],u=c[1],h=c[2],f=c[3];return[d,u,h,f]}function le(t,e,n){return(e=rs(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function tf(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function xe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?tf(Object(n),!0).forEach(function(r){le(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tf(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function DR(t,e){for(;!{}.hasOwnProperty.call(t,e)&&(t=wi(t))!==null;);return t}function xc(){return xc=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=DR(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},xc.apply(null,arguments)}function oy(t,e,n,r){var i=xc(wi(t.prototype),e,n);return typeof i=="function"?function(s){return i.apply(n,s)}:i}function PR(t){return t.normalized?1:t.size}function fl(t){var e=0;return t.forEach(function(n){return e+=PR(n)}),e}function ay(t,e,n){var r=t==="VERTEX"?e.VERTEX_SHADER:e.FRAGMENT_SHADER,i=e.createShader(r);if(i===null)throw new Error("loadShader: error while creating the shader");e.shaderSource(i,n),e.compileShader(i);var s=e.getShaderParameter(i,e.COMPILE_STATUS);if(!s){var o=e.getShaderInfoLog(i);throw e.deleteShader(i),new Error(`loadShader: error while compiling the shader:
`.concat(o,`
`).concat(n))}return i}function GR(t,e){return ay("VERTEX",t,e)}function MR(t,e){return ay("FRAGMENT",t,e)}function OR(t,e){var n=t.createProgram();if(n===null)throw new Error("loadProgram: error while creating the program.");var r,i;for(r=0,i=e.length;r<i;r++)t.attachShader(n,e[r]);t.linkProgram(n);var s=t.getProgramParameter(n,t.LINK_STATUS);if(!s)throw t.deleteProgram(n),new Error("loadProgram: error while linking the program.");return n}function nf(t){var e=t.gl,n=t.buffer,r=t.program,i=t.vertexShader,s=t.fragmentShader;e.deleteShader(i),e.deleteShader(s),e.deleteProgram(r),e.deleteBuffer(n)}function rf(t){return t%1===0?t.toFixed(1):t.toString()}var sf=`#define PICKING_MODE
`,FR=le(le(le(le(le(le(le(le({},WebGL2RenderingContext.BOOL,1),WebGL2RenderingContext.BYTE,1),WebGL2RenderingContext.UNSIGNED_BYTE,1),WebGL2RenderingContext.SHORT,2),WebGL2RenderingContext.UNSIGNED_SHORT,2),WebGL2RenderingContext.INT,4),WebGL2RenderingContext.UNSIGNED_INT,4),WebGL2RenderingContext.FLOAT,4),ly=(function(){function t(e,n,r){xt(this,t),le(this,"array",new Float32Array),le(this,"constantArray",new Float32Array),le(this,"capacity",0),le(this,"verticesCount",0);var i=this.getDefinition();if(this.VERTICES=i.VERTICES,this.VERTEX_SHADER_SOURCE=i.VERTEX_SHADER_SOURCE,this.FRAGMENT_SHADER_SOURCE=i.FRAGMENT_SHADER_SOURCE,this.UNIFORMS=i.UNIFORMS,this.ATTRIBUTES=i.ATTRIBUTES,this.METHOD=i.METHOD,this.CONSTANT_ATTRIBUTES="CONSTANT_ATTRIBUTES"in i?i.CONSTANT_ATTRIBUTES:[],this.CONSTANT_DATA="CONSTANT_DATA"in i?i.CONSTANT_DATA:[],this.isInstanced="CONSTANT_ATTRIBUTES"in i,this.ATTRIBUTES_ITEMS_COUNT=fl(this.ATTRIBUTES),this.STRIDE=this.VERTICES*this.ATTRIBUTES_ITEMS_COUNT,this.renderer=r,this.normalProgram=this.getProgramInfo("normal",e,i.VERTEX_SHADER_SOURCE,i.FRAGMENT_SHADER_SOURCE,null),this.pickProgram=n?this.getProgramInfo("pick",e,sf+i.VERTEX_SHADER_SOURCE,sf+i.FRAGMENT_SHADER_SOURCE,n):null,this.isInstanced){var s=fl(this.CONSTANT_ATTRIBUTES);if(this.CONSTANT_DATA.length!==this.VERTICES)throw new Error("Program: error while getting constant data (expected ".concat(this.VERTICES," items, received ").concat(this.CONSTANT_DATA.length," instead)"));this.constantArray=new Float32Array(this.CONSTANT_DATA.length*s);for(var o=0;o<this.CONSTANT_DATA.length;o++){var a=this.CONSTANT_DATA[o];if(a.length!==s)throw new Error("Program: error while getting constant data (one vector has ".concat(a.length," items instead of ").concat(s,")"));for(var l=0;l<a.length;l++)this.constantArray[o*s+l]=a[l]}this.STRIDE=this.ATTRIBUTES_ITEMS_COUNT}}return Ct(t,[{key:"kill",value:function(){nf(this.normalProgram),this.pickProgram&&(nf(this.pickProgram),this.pickProgram=null)}},{key:"getProgramInfo",value:function(n,r,i,s,o){var a=this.getDefinition(),l=r.createBuffer();if(l===null)throw new Error("Program: error while creating the WebGL buffer.");var c=GR(r,i),d=MR(r,s),u=OR(r,[c,d]),h={};a.UNIFORMS.forEach(function(y){var w=r.getUniformLocation(u,y);w&&(h[y]=w)});var f={};a.ATTRIBUTES.forEach(function(y){f[y.name]=r.getAttribLocation(u,y.name)});var p;if("CONSTANT_ATTRIBUTES"in a&&(a.CONSTANT_ATTRIBUTES.forEach(function(y){f[y.name]=r.getAttribLocation(u,y.name)}),p=r.createBuffer(),p===null))throw new Error("Program: error while creating the WebGL constant buffer.");return{name:n,program:u,gl:r,frameBuffer:o,buffer:l,constantBuffer:p||{},uniformLocations:h,attributeLocations:f,isPicking:n==="pick",vertexShader:c,fragmentShader:d}}},{key:"bindProgram",value:function(n){var r=this,i=0,s=n.gl,o=n.buffer;this.isInstanced?(s.bindBuffer(s.ARRAY_BUFFER,n.constantBuffer),i=0,this.CONSTANT_ATTRIBUTES.forEach(function(a){return i+=r.bindAttribute(a,n,i,!1)}),s.bufferData(s.ARRAY_BUFFER,this.constantArray,s.STATIC_DRAW),s.bindBuffer(s.ARRAY_BUFFER,n.buffer),i=0,this.ATTRIBUTES.forEach(function(a){return i+=r.bindAttribute(a,n,i,!0)}),s.bufferData(s.ARRAY_BUFFER,this.array,s.DYNAMIC_DRAW)):(s.bindBuffer(s.ARRAY_BUFFER,o),i=0,this.ATTRIBUTES.forEach(function(a){return i+=r.bindAttribute(a,n,i)}),s.bufferData(s.ARRAY_BUFFER,this.array,s.DYNAMIC_DRAW)),s.bindBuffer(s.ARRAY_BUFFER,null)}},{key:"unbindProgram",value:function(n){var r=this;this.isInstanced?(this.CONSTANT_ATTRIBUTES.forEach(function(i){return r.unbindAttribute(i,n,!1)}),this.ATTRIBUTES.forEach(function(i){return r.unbindAttribute(i,n,!0)})):this.ATTRIBUTES.forEach(function(i){return r.unbindAttribute(i,n)})}},{key:"bindAttribute",value:function(n,r,i,s){var o=FR[n.type];if(typeof o!="number")throw new Error('Program.bind: yet unsupported attribute type "'.concat(n.type,'"'));var a=r.attributeLocations[n.name],l=r.gl;if(a!==-1){l.enableVertexAttribArray(a);var c=this.isInstanced?(s?this.ATTRIBUTES_ITEMS_COUNT:fl(this.CONSTANT_ATTRIBUTES))*Float32Array.BYTES_PER_ELEMENT:this.ATTRIBUTES_ITEMS_COUNT*Float32Array.BYTES_PER_ELEMENT;if(l.vertexAttribPointer(a,n.size,n.type,n.normalized||!1,c,i),this.isInstanced&&s)if(l instanceof WebGL2RenderingContext)l.vertexAttribDivisor(a,1);else{var d=l.getExtension("ANGLE_instanced_arrays");d&&d.vertexAttribDivisorANGLE(a,1)}}return n.size*o}},{key:"unbindAttribute",value:function(n,r,i){var s=r.attributeLocations[n.name],o=r.gl;if(s!==-1&&(o.disableVertexAttribArray(s),this.isInstanced&&i))if(o instanceof WebGL2RenderingContext)o.vertexAttribDivisor(s,0);else{var a=o.getExtension("ANGLE_instanced_arrays");a&&a.vertexAttribDivisorANGLE(s,0)}}},{key:"reallocate",value:function(n){n!==this.capacity&&(this.capacity=n,this.verticesCount=this.VERTICES*n,this.array=new Float32Array(this.isInstanced?this.capacity*this.ATTRIBUTES_ITEMS_COUNT:this.verticesCount*this.ATTRIBUTES_ITEMS_COUNT))}},{key:"hasNothingToRender",value:function(){return this.verticesCount===0}},{key:"renderProgram",value:function(n,r){var i=r.gl,s=r.program;i.enable(i.BLEND),i.useProgram(s),this.setUniforms(n,r),this.drawWebGL(this.METHOD,r)}},{key:"render",value:function(n){this.hasNothingToRender()||(this.pickProgram&&(this.pickProgram.gl.viewport(0,0,n.width*n.pixelRatio/n.downSizingRatio,n.height*n.pixelRatio/n.downSizingRatio),this.bindProgram(this.pickProgram),this.renderProgram(xe(xe({},n),{},{pixelRatio:n.pixelRatio/n.downSizingRatio}),this.pickProgram),this.unbindProgram(this.pickProgram)),this.normalProgram.gl.viewport(0,0,n.width*n.pixelRatio,n.height*n.pixelRatio),this.bindProgram(this.normalProgram),this.renderProgram(n,this.normalProgram),this.unbindProgram(this.normalProgram))}},{key:"drawWebGL",value:function(n,r){var i=r.gl,s=r.frameBuffer;if(i.bindFramebuffer(i.FRAMEBUFFER,s),!this.isInstanced)i.drawArrays(n,0,this.verticesCount);else if(i instanceof WebGL2RenderingContext)i.drawArraysInstanced(n,0,this.VERTICES,this.capacity);else{var o=i.getExtension("ANGLE_instanced_arrays");o&&o.drawArraysInstancedANGLE(n,0,this.VERTICES,this.capacity)}}}])})(),cy=(function(t){function e(){return xt(this,e),Jt(this,e,arguments)}return Qt(e,t),Ct(e,[{key:"kill",value:function(){oy(e,"kill",this)([])}},{key:"process",value:function(r,i,s){var o=i*this.STRIDE;if(s.hidden){for(var a=o+this.STRIDE;o<a;o++)this.array[o]=0;return}return this.processVisibleItem(sy(r),o,s)}}])})(ly),Rd=(function(t){function e(){var n;xt(this,e);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return n=Jt(this,e,[].concat(i)),le(n,"drawLabel",void 0),n}return Qt(e,t),Ct(e,[{key:"kill",value:function(){oy(e,"kill",this)([])}},{key:"process",value:function(r,i,s,o,a){var l=i*this.STRIDE;if(a.hidden||s.hidden||o.hidden){for(var c=l+this.STRIDE;l<c;l++)this.array[l]=0;return}return this.processVisibleItem(sy(r),l,s,o,a)}}])})(ly);function $R(t,e){return(function(){function n(r,i,s){xt(this,n),le(this,"drawLabel",e),this.programs=t.map(function(o){return new o(r,i,s)})}return Ct(n,[{key:"reallocate",value:function(i){this.programs.forEach(function(s){return s.reallocate(i)})}},{key:"process",value:function(i,s,o,a,l){this.programs.forEach(function(c){return c.process(i,s,o,a,l)})}},{key:"render",value:function(i){this.programs.forEach(function(s){return s.render(i)})}},{key:"kill",value:function(){this.programs.forEach(function(i){return i.kill()})}}])})()}function zR(t,e,n,r,i){var s=i.edgeLabelSize,o=i.edgeLabelFont,a=i.edgeLabelWeight,l=i.edgeLabelColor.attribute?e[i.edgeLabelColor.attribute]||i.edgeLabelColor.color||"#000":i.edgeLabelColor.color,c=e.label;if(c){t.fillStyle=l,t.font="".concat(a," ").concat(s,"px ").concat(o);var d=n.size,u=r.size,h=n.x,f=n.y,p=r.x,y=r.y,w=(h+p)/2,b=(f+y)/2,E=p-h,k=y-f,_=Math.sqrt(E*E+k*k);if(!(_<d+u)){h+=E*d/_,f+=k*d/_,p-=E*u/_,y-=k*u/_,w=(h+p)/2,b=(f+y)/2,E=p-h,k=y-f,_=Math.sqrt(E*E+k*k);var x=t.measureText(c).width;if(x>_){var T="";for(c=c+T,x=t.measureText(c).width;x>_&&c.length>1;)c=c.slice(0,-2)+T,x=t.measureText(c).width;if(c.length<4)return}var L;E>0?k>0?L=Math.acos(E/_):L=Math.asin(k/_):k>0?L=Math.acos(E/_)+Math.PI:L=Math.asin(E/_)+Math.PI/2,t.save(),t.translate(w,b),t.rotate(L),t.fillText(c,-x/2,e.size/2+s),t.restore()}}}function dy(t,e,n){if(e.label){var r=n.labelSize,i=n.labelFont,s=n.labelWeight,o=n.labelColor.attribute?e[n.labelColor.attribute]||n.labelColor.color||"#000":n.labelColor.color;t.fillStyle=o,t.font="".concat(s," ").concat(r,"px ").concat(i),t.fillText(e.label,e.x+e.size+3,e.y+r/3)}}function BR(t,e,n){var r=n.labelSize,i=n.labelFont,s=n.labelWeight;t.font="".concat(s," ").concat(r,"px ").concat(i),t.fillStyle="#FFF",t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=8,t.shadowColor="#000";var o=2;if(typeof e.label=="string"){var a=t.measureText(e.label).width,l=Math.round(a+5),c=Math.round(r+2*o),d=Math.max(e.size,r/2)+o,u=Math.asin(c/2/d),h=Math.sqrt(Math.abs(Math.pow(d,2)-Math.pow(c/2,2)));t.beginPath(),t.moveTo(e.x+h,e.y+c/2),t.lineTo(e.x+d+l,e.y+c/2),t.lineTo(e.x+d+l,e.y-c/2),t.lineTo(e.x+h,e.y-c/2),t.arc(e.x,e.y,d,u,-u),t.closePath(),t.fill()}else t.beginPath(),t.arc(e.x,e.y,e.size+o,0,Math.PI*2),t.closePath(),t.fill();t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0,dy(t,e,n)}var VR=`
precision highp float;

varying vec4 v_color;
varying vec2 v_diffVector;
varying float v_radius;

uniform float u_correctionRatio;

const vec4 transparent = vec4(0.0, 0.0, 0.0, 0.0);

void main(void) {
  float border = u_correctionRatio * 2.0;
  float dist = length(v_diffVector) - v_radius + border;

  // No antialiasing for picking mode:
  #ifdef PICKING_MODE
  if (dist > border)
    gl_FragColor = transparent;
  else
    gl_FragColor = v_color;

  #else
  float t = 0.0;
  if (dist > border)
    t = 1.0;
  else if (dist > 0.0)
    t = dist / border;

  gl_FragColor = mix(v_color, transparent, t);
  #endif
}
`,UR=VR,jR=`
attribute vec4 a_id;
attribute vec4 a_color;
attribute vec2 a_position;
attribute float a_size;
attribute float a_angle;

uniform mat3 u_matrix;
uniform float u_sizeRatio;
uniform float u_correctionRatio;

varying vec4 v_color;
varying vec2 v_diffVector;
varying float v_radius;
varying float v_border;

const float bias = 255.0 / 254.0;

void main() {
  float size = a_size * u_correctionRatio / u_sizeRatio * 4.0;
  vec2 diffVector = size * vec2(cos(a_angle), sin(a_angle));
  vec2 position = a_position + diffVector;
  gl_Position = vec4(
    (u_matrix * vec3(position, 1)).xy,
    0,
    1
  );

  v_diffVector = diffVector;
  v_radius = size / 2.0;

  #ifdef PICKING_MODE
  // For picking mode, we use the ID as the color:
  v_color = a_id;
  #else
  // For normal mode, we use the color:
  v_color = a_color;
  #endif

  v_color.a *= bias;
}
`,HR=jR,uy=WebGLRenderingContext,of=uy.UNSIGNED_BYTE,gl=uy.FLOAT,WR=["u_sizeRatio","u_correctionRatio","u_matrix"],Na=(function(t){function e(){return xt(this,e),Jt(this,e,arguments)}return Qt(e,t),Ct(e,[{key:"getDefinition",value:function(){return{VERTICES:3,VERTEX_SHADER_SOURCE:HR,FRAGMENT_SHADER_SOURCE:UR,METHOD:WebGLRenderingContext.TRIANGLES,UNIFORMS:WR,ATTRIBUTES:[{name:"a_position",size:2,type:gl},{name:"a_size",size:1,type:gl},{name:"a_color",size:4,type:of,normalized:!0},{name:"a_id",size:4,type:of,normalized:!0}],CONSTANT_ATTRIBUTES:[{name:"a_angle",size:1,type:gl}],CONSTANT_DATA:[[e.ANGLE_1],[e.ANGLE_2],[e.ANGLE_3]]}}},{key:"processVisibleItem",value:function(r,i,s){var o=this.array,a=Br(s.color);o[i++]=s.x,o[i++]=s.y,o[i++]=s.size,o[i++]=a,o[i++]=r}},{key:"setUniforms",value:function(r,i){var s=i.gl,o=i.uniformLocations,a=o.u_sizeRatio,l=o.u_correctionRatio,c=o.u_matrix;s.uniform1f(l,r.correctionRatio),s.uniform1f(a,r.sizeRatio),s.uniformMatrix3fv(c,!1,r.matrix)}}])})(cy);le(Na,"ANGLE_1",0);le(Na,"ANGLE_2",2*Math.PI/3);le(Na,"ANGLE_3",4*Math.PI/3);var qR=`
precision mediump float;

varying vec4 v_color;

void main(void) {
  gl_FragColor = v_color;
}
`,KR=qR,XR=`
attribute vec2 a_position;
attribute vec2 a_normal;
attribute float a_radius;
attribute vec3 a_barycentric;

#ifdef PICKING_MODE
attribute vec4 a_id;
#else
attribute vec4 a_color;
#endif

uniform mat3 u_matrix;
uniform float u_sizeRatio;
uniform float u_correctionRatio;
uniform float u_minEdgeThickness;
uniform float u_lengthToThicknessRatio;
uniform float u_widenessToThicknessRatio;

varying vec4 v_color;

const float bias = 255.0 / 254.0;

void main() {
  float minThickness = u_minEdgeThickness;

  float normalLength = length(a_normal);
  vec2 unitNormal = a_normal / normalLength;

  // These first computations are taken from edge.vert.glsl and
  // edge.clamped.vert.glsl. Please read it to get better comments on what's
  // happening:
  float pixelsThickness = max(normalLength / u_sizeRatio, minThickness);
  float webGLThickness = pixelsThickness * u_correctionRatio;
  float webGLNodeRadius = a_radius * 2.0 * u_correctionRatio / u_sizeRatio;
  float webGLArrowHeadLength = webGLThickness * u_lengthToThicknessRatio * 2.0;
  float webGLArrowHeadThickness = webGLThickness * u_widenessToThicknessRatio;

  float da = a_barycentric.x;
  float db = a_barycentric.y;
  float dc = a_barycentric.z;

  vec2 delta = vec2(
      da * (webGLNodeRadius * unitNormal.y)
    + db * ((webGLNodeRadius + webGLArrowHeadLength) * unitNormal.y + webGLArrowHeadThickness * unitNormal.x)
    + dc * ((webGLNodeRadius + webGLArrowHeadLength) * unitNormal.y - webGLArrowHeadThickness * unitNormal.x),

      da * (-webGLNodeRadius * unitNormal.x)
    + db * (-(webGLNodeRadius + webGLArrowHeadLength) * unitNormal.x + webGLArrowHeadThickness * unitNormal.y)
    + dc * (-(webGLNodeRadius + webGLArrowHeadLength) * unitNormal.x - webGLArrowHeadThickness * unitNormal.y)
  );

  vec2 position = (u_matrix * vec3(a_position + delta, 1)).xy;

  gl_Position = vec4(position, 0, 1);

  #ifdef PICKING_MODE
  // For picking mode, we use the ID as the color:
  v_color = a_id;
  #else
  // For normal mode, we use the color:
  v_color = a_color;
  #endif

  v_color.a *= bias;
}
`,ZR=XR,hy=WebGLRenderingContext,af=hy.UNSIGNED_BYTE,to=hy.FLOAT,YR=["u_matrix","u_sizeRatio","u_correctionRatio","u_minEdgeThickness","u_lengthToThicknessRatio","u_widenessToThicknessRatio"],fy={extremity:"target",lengthToThicknessRatio:2.5,widenessToThicknessRatio:2};function gy(t){var e=xe(xe({},fy),{});return(function(n){function r(){return xt(this,r),Jt(this,r,arguments)}return Qt(r,n),Ct(r,[{key:"getDefinition",value:function(){return{VERTICES:3,VERTEX_SHADER_SOURCE:ZR,FRAGMENT_SHADER_SOURCE:KR,METHOD:WebGLRenderingContext.TRIANGLES,UNIFORMS:YR,ATTRIBUTES:[{name:"a_position",size:2,type:to},{name:"a_normal",size:2,type:to},{name:"a_radius",size:1,type:to},{name:"a_color",size:4,type:af,normalized:!0},{name:"a_id",size:4,type:af,normalized:!0}],CONSTANT_ATTRIBUTES:[{name:"a_barycentric",size:3,type:to}],CONSTANT_DATA:[[1,0,0],[0,1,0],[0,0,1]]}}},{key:"processVisibleItem",value:function(s,o,a,l,c){if(e.extremity==="source"){var d=[l,a];a=d[0],l=d[1]}var u=c.size||1,h=l.size||1,f=a.x,p=a.y,y=l.x,w=l.y,b=Br(c.color),E=y-f,k=w-p,_=E*E+k*k,x=0,T=0;_&&(_=1/Math.sqrt(_),x=-k*_*u,T=E*_*u);var L=this.array;L[o++]=y,L[o++]=w,L[o++]=-x,L[o++]=-T,L[o++]=h,L[o++]=b,L[o++]=s}},{key:"setUniforms",value:function(s,o){var a=o.gl,l=o.uniformLocations,c=l.u_matrix,d=l.u_sizeRatio,u=l.u_correctionRatio,h=l.u_minEdgeThickness,f=l.u_lengthToThicknessRatio,p=l.u_widenessToThicknessRatio;a.uniformMatrix3fv(c,!1,s.matrix),a.uniform1f(d,s.sizeRatio),a.uniform1f(u,s.correctionRatio),a.uniform1f(h,s.minEdgeThickness),a.uniform1f(f,e.lengthToThicknessRatio),a.uniform1f(p,e.widenessToThicknessRatio)}}])})(Rd)}gy();var JR=`
precision mediump float;

varying vec4 v_color;
varying vec2 v_normal;
varying float v_thickness;
varying float v_feather;

const vec4 transparent = vec4(0.0, 0.0, 0.0, 0.0);

void main(void) {
  // We only handle antialiasing for normal mode:
  #ifdef PICKING_MODE
  gl_FragColor = v_color;
  #else
  float dist = length(v_normal) * v_thickness;

  float t = smoothstep(
    v_thickness - v_feather,
    v_thickness,
    dist
  );

  gl_FragColor = mix(v_color, transparent, t);
  #endif
}
`,py=JR,QR=`
attribute vec4 a_id;
attribute vec4 a_color;
attribute vec2 a_normal;
attribute float a_normalCoef;
attribute vec2 a_positionStart;
attribute vec2 a_positionEnd;
attribute float a_positionCoef;
attribute float a_radius;
attribute float a_radiusCoef;

uniform mat3 u_matrix;
uniform float u_zoomRatio;
uniform float u_sizeRatio;
uniform float u_pixelRatio;
uniform float u_correctionRatio;
uniform float u_minEdgeThickness;
uniform float u_lengthToThicknessRatio;
uniform float u_feather;

varying vec4 v_color;
varying vec2 v_normal;
varying float v_thickness;
varying float v_feather;

const float bias = 255.0 / 254.0;

void main() {
  float minThickness = u_minEdgeThickness;

  float radius = a_radius * a_radiusCoef;
  vec2 normal = a_normal * a_normalCoef;
  vec2 position = a_positionStart * (1.0 - a_positionCoef) + a_positionEnd * a_positionCoef;

  float normalLength = length(normal);
  vec2 unitNormal = normal / normalLength;

  // These first computations are taken from edge.vert.glsl. Please read it to
  // get better comments on what's happening:
  float pixelsThickness = max(normalLength, minThickness * u_sizeRatio);
  float webGLThickness = pixelsThickness * u_correctionRatio / u_sizeRatio;

  // Here, we move the point to leave space for the arrow head:
  float direction = sign(radius);
  float webGLNodeRadius = direction * radius * 2.0 * u_correctionRatio / u_sizeRatio;
  float webGLArrowHeadLength = webGLThickness * u_lengthToThicknessRatio * 2.0;

  vec2 compensationVector = vec2(-direction * unitNormal.y, direction * unitNormal.x) * (webGLNodeRadius + webGLArrowHeadLength);

  // Here is the proper position of the vertex
  gl_Position = vec4((u_matrix * vec3(position + unitNormal * webGLThickness + compensationVector, 1)).xy, 0, 1);

  v_thickness = webGLThickness / u_zoomRatio;

  v_normal = unitNormal;

  v_feather = u_feather * u_correctionRatio / u_zoomRatio / u_pixelRatio * 2.0;

  #ifdef PICKING_MODE
  // For picking mode, we use the ID as the color:
  v_color = a_id;
  #else
  // For normal mode, we use the color:
  v_color = a_color;
  #endif

  v_color.a *= bias;
}
`,eL=QR,my=WebGLRenderingContext,lf=my.UNSIGNED_BYTE,wr=my.FLOAT,tL=["u_matrix","u_zoomRatio","u_sizeRatio","u_correctionRatio","u_pixelRatio","u_feather","u_minEdgeThickness","u_lengthToThicknessRatio"],nL={lengthToThicknessRatio:fy.lengthToThicknessRatio};function yy(t){var e=xe(xe({},nL),{});return(function(n){function r(){return xt(this,r),Jt(this,r,arguments)}return Qt(r,n),Ct(r,[{key:"getDefinition",value:function(){return{VERTICES:6,VERTEX_SHADER_SOURCE:eL,FRAGMENT_SHADER_SOURCE:py,METHOD:WebGLRenderingContext.TRIANGLES,UNIFORMS:tL,ATTRIBUTES:[{name:"a_positionStart",size:2,type:wr},{name:"a_positionEnd",size:2,type:wr},{name:"a_normal",size:2,type:wr},{name:"a_color",size:4,type:lf,normalized:!0},{name:"a_id",size:4,type:lf,normalized:!0},{name:"a_radius",size:1,type:wr}],CONSTANT_ATTRIBUTES:[{name:"a_positionCoef",size:1,type:wr},{name:"a_normalCoef",size:1,type:wr},{name:"a_radiusCoef",size:1,type:wr}],CONSTANT_DATA:[[0,1,0],[0,-1,0],[1,1,1],[1,1,1],[0,-1,0],[1,-1,-1]]}}},{key:"processVisibleItem",value:function(s,o,a,l,c){var d=c.size||1,u=a.x,h=a.y,f=l.x,p=l.y,y=Br(c.color),w=f-u,b=p-h,E=l.size||1,k=w*w+b*b,_=0,x=0;k&&(k=1/Math.sqrt(k),_=-b*k*d,x=w*k*d);var T=this.array;T[o++]=u,T[o++]=h,T[o++]=f,T[o++]=p,T[o++]=_,T[o++]=x,T[o++]=y,T[o++]=s,T[o++]=E}},{key:"setUniforms",value:function(s,o){var a=o.gl,l=o.uniformLocations,c=l.u_matrix,d=l.u_zoomRatio,u=l.u_feather,h=l.u_pixelRatio,f=l.u_correctionRatio,p=l.u_sizeRatio,y=l.u_minEdgeThickness,w=l.u_lengthToThicknessRatio;a.uniformMatrix3fv(c,!1,s.matrix),a.uniform1f(d,s.zoomRatio),a.uniform1f(p,s.sizeRatio),a.uniform1f(f,s.correctionRatio),a.uniform1f(h,s.pixelRatio),a.uniform1f(u,s.antiAliasingFeather),a.uniform1f(y,s.minEdgeThickness),a.uniform1f(w,e.lengthToThicknessRatio)}}])})(Rd)}yy();function rL(t){return $R([yy(),gy()])}var iL=rL(),sL=iL,oL=`
attribute vec4 a_id;
attribute vec4 a_color;
attribute vec2 a_normal;
attribute float a_normalCoef;
attribute vec2 a_positionStart;
attribute vec2 a_positionEnd;
attribute float a_positionCoef;

uniform mat3 u_matrix;
uniform float u_sizeRatio;
uniform float u_zoomRatio;
uniform float u_pixelRatio;
uniform float u_correctionRatio;
uniform float u_minEdgeThickness;
uniform float u_feather;

varying vec4 v_color;
varying vec2 v_normal;
varying float v_thickness;
varying float v_feather;

const float bias = 255.0 / 254.0;

void main() {
  float minThickness = u_minEdgeThickness;

  vec2 normal = a_normal * a_normalCoef;
  vec2 position = a_positionStart * (1.0 - a_positionCoef) + a_positionEnd * a_positionCoef;

  float normalLength = length(normal);
  vec2 unitNormal = normal / normalLength;

  // We require edges to be at least "minThickness" pixels thick *on screen*
  // (so we need to compensate the size ratio):
  float pixelsThickness = max(normalLength, minThickness * u_sizeRatio);

  // Then, we need to retrieve the normalized thickness of the edge in the WebGL
  // referential (in a ([0, 1], [0, 1]) space), using our "magic" correction
  // ratio:
  float webGLThickness = pixelsThickness * u_correctionRatio / u_sizeRatio;

  // Here is the proper position of the vertex
  gl_Position = vec4((u_matrix * vec3(position + unitNormal * webGLThickness, 1)).xy, 0, 1);

  // For the fragment shader though, we need a thickness that takes the "magic"
  // correction ratio into account (as in webGLThickness), but so that the
  // antialiasing effect does not depend on the zoom level. So here's yet
  // another thickness version:
  v_thickness = webGLThickness / u_zoomRatio;

  v_normal = unitNormal;

  v_feather = u_feather * u_correctionRatio / u_zoomRatio / u_pixelRatio * 2.0;

  #ifdef PICKING_MODE
  // For picking mode, we use the ID as the color:
  v_color = a_id;
  #else
  // For normal mode, we use the color:
  v_color = a_color;
  #endif

  v_color.a *= bias;
}
`,aL=oL,vy=WebGLRenderingContext,cf=vy.UNSIGNED_BYTE,Mi=vy.FLOAT,lL=["u_matrix","u_zoomRatio","u_sizeRatio","u_correctionRatio","u_pixelRatio","u_feather","u_minEdgeThickness"],cL=(function(t){function e(){return xt(this,e),Jt(this,e,arguments)}return Qt(e,t),Ct(e,[{key:"getDefinition",value:function(){return{VERTICES:6,VERTEX_SHADER_SOURCE:aL,FRAGMENT_SHADER_SOURCE:py,METHOD:WebGLRenderingContext.TRIANGLES,UNIFORMS:lL,ATTRIBUTES:[{name:"a_positionStart",size:2,type:Mi},{name:"a_positionEnd",size:2,type:Mi},{name:"a_normal",size:2,type:Mi},{name:"a_color",size:4,type:cf,normalized:!0},{name:"a_id",size:4,type:cf,normalized:!0}],CONSTANT_ATTRIBUTES:[{name:"a_positionCoef",size:1,type:Mi},{name:"a_normalCoef",size:1,type:Mi}],CONSTANT_DATA:[[0,1],[0,-1],[1,1],[1,1],[0,-1],[1,-1]]}}},{key:"processVisibleItem",value:function(r,i,s,o,a){var l=a.size||1,c=s.x,d=s.y,u=o.x,h=o.y,f=Br(a.color),p=u-c,y=h-d,w=p*p+y*y,b=0,E=0;w&&(w=1/Math.sqrt(w),b=-y*w*l,E=p*w*l);var k=this.array;k[i++]=c,k[i++]=d,k[i++]=u,k[i++]=h,k[i++]=b,k[i++]=E,k[i++]=f,k[i++]=r}},{key:"setUniforms",value:function(r,i){var s=i.gl,o=i.uniformLocations,a=o.u_matrix,l=o.u_zoomRatio,c=o.u_feather,d=o.u_pixelRatio,u=o.u_correctionRatio,h=o.u_sizeRatio,f=o.u_minEdgeThickness;s.uniformMatrix3fv(a,!1,r.matrix),s.uniform1f(l,r.zoomRatio),s.uniform1f(h,r.sizeRatio),s.uniform1f(u,r.correctionRatio),s.uniform1f(d,r.pixelRatio),s.uniform1f(c,r.antiAliasingFeather),s.uniform1f(f,r.minEdgeThickness)}}])})(Rd);function Ps(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var no={exports:{}},df;function dL(){if(df)return no.exports;df=1;var t=typeof Reflect=="object"?Reflect:null,e=t&&typeof t.apply=="function"?t.apply:function(x,T,L){return Function.prototype.apply.call(x,T,L)},n;t&&typeof t.ownKeys=="function"?n=t.ownKeys:Object.getOwnPropertySymbols?n=function(x){return Object.getOwnPropertyNames(x).concat(Object.getOwnPropertySymbols(x))}:n=function(x){return Object.getOwnPropertyNames(x)};function r(_){console&&console.warn&&console.warn(_)}var i=Number.isNaN||function(x){return x!==x};function s(){s.init.call(this)}no.exports=s,no.exports.once=b,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var o=10;function a(_){if(typeof _!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof _)}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(_){if(typeof _!="number"||_<0||i(_))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+_+".");o=_}}),s.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(x){if(typeof x!="number"||x<0||i(x))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+x+".");return this._maxListeners=x,this};function l(_){return _._maxListeners===void 0?s.defaultMaxListeners:_._maxListeners}s.prototype.getMaxListeners=function(){return l(this)},s.prototype.emit=function(x){for(var T=[],L=1;L<arguments.length;L++)T.push(arguments[L]);var O=x==="error",F=this._events;if(F!==void 0)O=O&&F.error===void 0;else if(!O)return!1;if(O){var $;if(T.length>0&&($=T[0]),$ instanceof Error)throw $;var j=new Error("Unhandled error."+($?" ("+$.message+")":""));throw j.context=$,j}var z=F[x];if(z===void 0)return!1;if(typeof z=="function")e(z,this,T);else for(var I=z.length,A=p(z,I),L=0;L<I;++L)e(A[L],this,T);return!0};function c(_,x,T,L){var O,F,$;if(a(T),F=_._events,F===void 0?(F=_._events=Object.create(null),_._eventsCount=0):(F.newListener!==void 0&&(_.emit("newListener",x,T.listener?T.listener:T),F=_._events),$=F[x]),$===void 0)$=F[x]=T,++_._eventsCount;else if(typeof $=="function"?$=F[x]=L?[T,$]:[$,T]:L?$.unshift(T):$.push(T),O=l(_),O>0&&$.length>O&&!$.warned){$.warned=!0;var j=new Error("Possible EventEmitter memory leak detected. "+$.length+" "+String(x)+" listeners added. Use emitter.setMaxListeners() to increase limit");j.name="MaxListenersExceededWarning",j.emitter=_,j.type=x,j.count=$.length,r(j)}return _}s.prototype.addListener=function(x,T){return c(this,x,T,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(x,T){return c(this,x,T,!0)};function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function u(_,x,T){var L={fired:!1,wrapFn:void 0,target:_,type:x,listener:T},O=d.bind(L);return O.listener=T,L.wrapFn=O,O}s.prototype.once=function(x,T){return a(T),this.on(x,u(this,x,T)),this},s.prototype.prependOnceListener=function(x,T){return a(T),this.prependListener(x,u(this,x,T)),this},s.prototype.removeListener=function(x,T){var L,O,F,$,j;if(a(T),O=this._events,O===void 0)return this;if(L=O[x],L===void 0)return this;if(L===T||L.listener===T)--this._eventsCount===0?this._events=Object.create(null):(delete O[x],O.removeListener&&this.emit("removeListener",x,L.listener||T));else if(typeof L!="function"){for(F=-1,$=L.length-1;$>=0;$--)if(L[$]===T||L[$].listener===T){j=L[$].listener,F=$;break}if(F<0)return this;F===0?L.shift():y(L,F),L.length===1&&(O[x]=L[0]),O.removeListener!==void 0&&this.emit("removeListener",x,j||T)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(x){var T,L,O;if(L=this._events,L===void 0)return this;if(L.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):L[x]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete L[x]),this;if(arguments.length===0){var F=Object.keys(L),$;for(O=0;O<F.length;++O)$=F[O],$!=="removeListener"&&this.removeAllListeners($);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(T=L[x],typeof T=="function")this.removeListener(x,T);else if(T!==void 0)for(O=T.length-1;O>=0;O--)this.removeListener(x,T[O]);return this};function h(_,x,T){var L=_._events;if(L===void 0)return[];var O=L[x];return O===void 0?[]:typeof O=="function"?T?[O.listener||O]:[O]:T?w(O):p(O,O.length)}s.prototype.listeners=function(x){return h(this,x,!0)},s.prototype.rawListeners=function(x){return h(this,x,!1)},s.listenerCount=function(_,x){return typeof _.listenerCount=="function"?_.listenerCount(x):f.call(_,x)},s.prototype.listenerCount=f;function f(_){var x=this._events;if(x!==void 0){var T=x[_];if(typeof T=="function")return 1;if(T!==void 0)return T.length}return 0}s.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]};function p(_,x){for(var T=new Array(x),L=0;L<x;++L)T[L]=_[L];return T}function y(_,x){for(;x+1<_.length;x++)_[x]=_[x+1];_.pop()}function w(_){for(var x=new Array(_.length),T=0;T<x.length;++T)x[T]=_[T].listener||_[T];return x}function b(_,x){return new Promise(function(T,L){function O($){_.removeListener(x,F),L($)}function F(){typeof _.removeListener=="function"&&_.removeListener("error",O),T([].slice.call(arguments))}k(_,x,F,{once:!0}),x!=="error"&&E(_,O,{once:!0})})}function E(_,x,T){typeof _.on=="function"&&k(_,"error",x,T)}function k(_,x,T,L){if(typeof _.on=="function")L.once?_.once(x,T):_.on(x,T);else if(typeof _.addEventListener=="function")_.addEventListener(x,function O(F){L.once&&_.removeEventListener(x,O),T(F)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof _)}return no.exports}var _y=dL(),Ld=(function(t){function e(){var n;return xt(this,e),n=Jt(this,e),n.rawEmitter=n,n}return Qt(e,t),Ct(e)})(_y.EventEmitter),pl,uf;function by(){return uf||(uf=1,pl=function(e){return e!==null&&typeof e=="object"&&typeof e.addUndirectedEdgeWithKey=="function"&&typeof e.dropNode=="function"&&typeof e.multi=="boolean"}),pl}var uL=by();const hL=Ps(uL);var fL=function(e){return e},gL=function(e){return e*e},pL=function(e){return e*(2-e)},mL=function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)},yL=function(e){return e*e*e},vL=function(e){return--e*e*e+1},_L=function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)},bL={linear:fL,quadraticIn:gL,quadraticOut:pL,quadraticInOut:mL,cubicIn:yL,cubicOut:vL,cubicInOut:_L},wL={easing:"quadraticInOut",duration:150};function tn(){return Float32Array.of(1,0,0,0,1,0,0,0,1)}function ro(t,e,n){return t[0]=e,t[4]=typeof n=="number"?n:e,t}function hf(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[3]=-n,t[4]=r,t}function ff(t,e,n){return t[6]=e,t[7]=n,t}function rr(t,e){var n=t[0],r=t[1],i=t[2],s=t[3],o=t[4],a=t[5],l=t[6],c=t[7],d=t[8],u=e[0],h=e[1],f=e[2],p=e[3],y=e[4],w=e[5],b=e[6],E=e[7],k=e[8];return t[0]=u*n+h*s+f*l,t[1]=u*r+h*o+f*c,t[2]=u*i+h*a+f*d,t[3]=p*n+y*s+w*l,t[4]=p*r+y*o+w*c,t[5]=p*i+y*a+w*d,t[6]=b*n+E*s+k*l,t[7]=b*r+E*o+k*c,t[8]=b*i+E*a+k*d,t}function Cc(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,r=t[0],i=t[1],s=t[3],o=t[4],a=t[6],l=t[7],c=e.x,d=e.y;return{x:c*r+d*s+a*n,y:c*i+d*o+l*n}}function EL(t,e){var n=t.height/t.width,r=e.height/e.width;return n<1&&r>1||n>1&&r<1?1:Math.min(Math.max(r,1/r),Math.max(1/n,n))}function Oi(t,e,n,r,i){var s=t.angle,o=t.ratio,a=t.x,l=t.y,c=e.width,d=e.height,u=tn(),h=Math.min(c,d)-2*r,f=EL(e,n);return i?(rr(u,ff(tn(),a,l)),rr(u,ro(tn(),o)),rr(u,hf(tn(),s)),rr(u,ro(tn(),c/h/2/f,d/h/2/f))):(rr(u,ro(tn(),2*(h/c)*f,2*(h/d)*f)),rr(u,hf(tn(),-s)),rr(u,ro(tn(),1/o)),rr(u,ff(tn(),-a,-l))),u}function kL(t,e,n){var r=Cc(t,{x:Math.cos(e.angle),y:Math.sin(e.angle)},0),i=r.x,s=r.y;return 1/Math.sqrt(Math.pow(i,2)+Math.pow(s,2))/n.width}function AL(t){if(!t.order)return{x:[0,1],y:[0,1]};var e=1/0,n=-1/0,r=1/0,i=-1/0;return t.forEachNode(function(s,o){var a=o.x,l=o.y;a<e&&(e=a),a>n&&(n=a),l<r&&(r=l),l>i&&(i=l)}),{x:[e,n],y:[r,i]}}function xL(t){if(!hL(t))throw new Error("Sigma: invalid graph instance.");t.forEachNode(function(e,n){if(!Number.isFinite(n.x)||!Number.isFinite(n.y))throw new Error("Sigma: Coordinates of node ".concat(e," are invalid. A node must have a numeric 'x' and 'y' attribute."))})}function CL(t,e,n){var r=document.createElement(t);if(e)for(var i in e)r.style[i]=e[i];if(n)for(var s in n)r.setAttribute(s,n[s]);return r}function gf(){return typeof window.devicePixelRatio<"u"?window.devicePixelRatio:1}function pf(t,e,n){return n.sort(function(r,i){var s=e(r)||0,o=e(i)||0;return s<o?-1:s>o?1:0})}function mf(t){var e=Ei(t.x,2),n=e[0],r=e[1],i=Ei(t.y,2),s=i[0],o=i[1],a=Math.max(r-n,o-s),l=(r+n)/2,c=(o+s)/2;(a===0||Math.abs(a)===1/0||isNaN(a))&&(a=1),isNaN(l)&&(l=0),isNaN(c)&&(c=0);var d=function(h){return{x:.5+(h.x-l)/a,y:.5+(h.y-c)/a}};return d.applyTo=function(u){u.x=.5+(u.x-l)/a,u.y=.5+(u.y-c)/a},d.inverse=function(u){return{x:l+a*(u.x-.5),y:c+a*(u.y-.5)}},d.ratio=a,d}function Sc(t){"@babel/helpers - typeof";return Sc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sc(t)}function yf(t,e){var n=e.size;if(n!==0){var r=t.length;t.length+=n;var i=0;e.forEach(function(s){t[r+i]=s,i++})}}function ml(t){t=t||{};for(var e=0,n=arguments.length<=1?0:arguments.length-1;e<n;e++){var r=e+1<1||arguments.length<=e+1?void 0:arguments[e+1];r&&Object.assign(t,r)}return t}var Id={hideEdgesOnMove:!1,hideLabelsOnMove:!1,renderLabels:!0,renderEdgeLabels:!1,enableEdgeEvents:!1,defaultNodeColor:"#999",defaultNodeType:"circle",defaultEdgeColor:"#ccc",defaultEdgeType:"line",labelFont:"Arial",labelSize:14,labelWeight:"normal",labelColor:{color:"#000"},edgeLabelFont:"Arial",edgeLabelSize:14,edgeLabelWeight:"normal",edgeLabelColor:{attribute:"color"},stagePadding:30,defaultDrawEdgeLabel:zR,defaultDrawNodeLabel:dy,defaultDrawNodeHover:BR,minEdgeThickness:1.7,antiAliasingFeather:1,dragTimeout:100,draggedEventsTolerance:3,inertiaDuration:200,inertiaRatio:3,zoomDuration:250,zoomingRatio:1.7,doubleClickTimeout:300,doubleClickZoomingRatio:2.2,doubleClickZoomingDuration:200,tapMoveTolerance:10,zoomToSizeRatioFunction:Math.sqrt,itemSizesReference:"screen",autoRescale:!0,autoCenter:!0,labelDensity:1,labelGridCellSize:100,labelRenderedSizeThreshold:6,nodeReducer:null,edgeReducer:null,zIndex:!1,minCameraRatio:null,maxCameraRatio:null,enableCameraZooming:!0,enableCameraPanning:!0,enableCameraRotation:!0,cameraPanBoundaries:null,allowInvalidContainer:!1,nodeProgramClasses:{},nodeHoverProgramClasses:{},edgeProgramClasses:{}},SL={circle:Na},TL={arrow:sL,line:cL};function yl(t){if(typeof t.labelDensity!="number"||t.labelDensity<0)throw new Error("Settings: invalid `labelDensity`. Expecting a positive number.");var e=t.minCameraRatio,n=t.maxCameraRatio;if(typeof e=="number"&&typeof n=="number"&&n<e)throw new Error("Settings: invalid camera ratio boundaries. Expecting `maxCameraRatio` to be greater than `minCameraRatio`.")}function NL(t){var e=ml({},Id,t);return e.nodeProgramClasses=ml({},SL,e.nodeProgramClasses),e.edgeProgramClasses=ml({},TL,e.edgeProgramClasses),e}var io=1.5,vf=(function(t){function e(){var n;return xt(this,e),n=Jt(this,e),le(n,"x",.5),le(n,"y",.5),le(n,"angle",0),le(n,"ratio",1),le(n,"minRatio",null),le(n,"maxRatio",null),le(n,"enabledZooming",!0),le(n,"enabledPanning",!0),le(n,"enabledRotation",!0),le(n,"clean",null),le(n,"nextFrame",null),le(n,"previousState",null),le(n,"enabled",!0),n.previousState=n.getState(),n}return Qt(e,t),Ct(e,[{key:"enable",value:function(){return this.enabled=!0,this}},{key:"disable",value:function(){return this.enabled=!1,this}},{key:"getState",value:function(){return{x:this.x,y:this.y,angle:this.angle,ratio:this.ratio}}},{key:"hasState",value:function(r){return this.x===r.x&&this.y===r.y&&this.ratio===r.ratio&&this.angle===r.angle}},{key:"getPreviousState",value:function(){var r=this.previousState;return r?{x:r.x,y:r.y,angle:r.angle,ratio:r.ratio}:null}},{key:"getBoundedRatio",value:function(r){var i=r;return typeof this.minRatio=="number"&&(i=Math.max(i,this.minRatio)),typeof this.maxRatio=="number"&&(i=Math.min(i,this.maxRatio)),i}},{key:"validateState",value:function(r){var i={};return this.enabledPanning&&typeof r.x=="number"&&(i.x=r.x),this.enabledPanning&&typeof r.y=="number"&&(i.y=r.y),this.enabledZooming&&typeof r.ratio=="number"&&(i.ratio=this.getBoundedRatio(r.ratio)),this.enabledRotation&&typeof r.angle=="number"&&(i.angle=r.angle),this.clean?this.clean(xe(xe({},this.getState()),i)):i}},{key:"isAnimated",value:function(){return!!this.nextFrame}},{key:"setState",value:function(r){if(!this.enabled)return this;this.previousState=this.getState();var i=this.validateState(r);return typeof i.x=="number"&&(this.x=i.x),typeof i.y=="number"&&(this.y=i.y),typeof i.ratio=="number"&&(this.ratio=i.ratio),typeof i.angle=="number"&&(this.angle=i.angle),this.hasState(this.previousState)||this.emit("updated",this.getState()),this}},{key:"updateState",value:function(r){return this.setState(r(this.getState())),this}},{key:"animate",value:function(r){var i=this,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=arguments.length>2?arguments[2]:void 0;if(!o)return new Promise(function(f){return i.animate(r,s,f)});if(this.enabled){var a=xe(xe({},wL),s),l=this.validateState(r),c=typeof a.easing=="function"?a.easing:bL[a.easing],d=Date.now(),u=this.getState(),h=function(){var p=(Date.now()-d)/a.duration;if(p>=1){i.nextFrame=null,i.setState(l),i.animationCallback&&(i.animationCallback.call(null),i.animationCallback=void 0);return}var y=c(p),w={};typeof l.x=="number"&&(w.x=u.x+(l.x-u.x)*y),typeof l.y=="number"&&(w.y=u.y+(l.y-u.y)*y),i.enabledRotation&&typeof l.angle=="number"&&(w.angle=u.angle+(l.angle-u.angle)*y),typeof l.ratio=="number"&&(w.ratio=u.ratio+(l.ratio-u.ratio)*y),i.setState(w),i.nextFrame=requestAnimationFrame(h)};this.nextFrame?(cancelAnimationFrame(this.nextFrame),this.animationCallback&&this.animationCallback.call(null),this.nextFrame=requestAnimationFrame(h)):h(),this.animationCallback=o}}},{key:"animatedZoom",value:function(r){return r?typeof r=="number"?this.animate({ratio:this.ratio/r}):this.animate({ratio:this.ratio/(r.factor||io)},r):this.animate({ratio:this.ratio/io})}},{key:"animatedUnzoom",value:function(r){return r?typeof r=="number"?this.animate({ratio:this.ratio*r}):this.animate({ratio:this.ratio*(r.factor||io)},r):this.animate({ratio:this.ratio*io})}},{key:"animatedReset",value:function(r){return this.animate({x:.5,y:.5,ratio:1,angle:0},r)}},{key:"copy",value:function(){return e.from(this.getState())}}],[{key:"from",value:function(r){var i=new e;return i.setState(r)}}])})(Ld);function sn(t,e){var n=e.getBoundingClientRect();return{x:t.clientX-n.left,y:t.clientY-n.top}}function Gn(t,e){var n=xe(xe({},sn(t,e)),{},{sigmaDefaultPrevented:!1,preventSigmaDefault:function(){n.sigmaDefaultPrevented=!0},original:t});return n}function Fi(t){var e="x"in t?t:xe(xe({},t.touches[0]||t.previousTouches[0]),{},{original:t.original,sigmaDefaultPrevented:t.sigmaDefaultPrevented,preventSigmaDefault:function(){t.sigmaDefaultPrevented=!0,e.sigmaDefaultPrevented=!0}});return e}function RL(t,e){return xe(xe({},Gn(t,e)),{},{delta:wy(t)})}var LL=2;function ko(t){for(var e=[],n=0,r=Math.min(t.length,LL);n<r;n++)e.push(t[n]);return e}function $i(t,e,n){var r={touches:ko(t.touches).map(function(i){return sn(i,n)}),previousTouches:e.map(function(i){return sn(i,n)}),sigmaDefaultPrevented:!1,preventSigmaDefault:function(){r.sigmaDefaultPrevented=!0},original:t};return r}function wy(t){if(typeof t.deltaY<"u")return t.deltaY*-3/360;if(typeof t.detail<"u")return t.detail/-9;throw new Error("Captor: could not extract delta from event.")}var Ey=(function(t){function e(n,r){var i;return xt(this,e),i=Jt(this,e),i.container=n,i.renderer=r,i}return Qt(e,t),Ct(e)})(Ld),IL=["doubleClickTimeout","doubleClickZoomingDuration","doubleClickZoomingRatio","dragTimeout","draggedEventsTolerance","inertiaDuration","inertiaRatio","zoomDuration","zoomingRatio"],DL=IL.reduce(function(t,e){return xe(xe({},t),{},le({},e,Id[e]))},{}),PL=(function(t){function e(n,r){var i;return xt(this,e),i=Jt(this,e,[n,r]),le(i,"enabled",!0),le(i,"draggedEvents",0),le(i,"downStartTime",null),le(i,"lastMouseX",null),le(i,"lastMouseY",null),le(i,"isMouseDown",!1),le(i,"isMoving",!1),le(i,"movingTimeout",null),le(i,"startCameraState",null),le(i,"clicks",0),le(i,"doubleClickTimeout",null),le(i,"currentWheelDirection",0),le(i,"settings",DL),i.handleClick=i.handleClick.bind(i),i.handleRightClick=i.handleRightClick.bind(i),i.handleDown=i.handleDown.bind(i),i.handleUp=i.handleUp.bind(i),i.handleMove=i.handleMove.bind(i),i.handleWheel=i.handleWheel.bind(i),i.handleLeave=i.handleLeave.bind(i),i.handleEnter=i.handleEnter.bind(i),n.addEventListener("click",i.handleClick,{capture:!1}),n.addEventListener("contextmenu",i.handleRightClick,{capture:!1}),n.addEventListener("mousedown",i.handleDown,{capture:!1}),n.addEventListener("wheel",i.handleWheel,{capture:!1}),n.addEventListener("mouseleave",i.handleLeave,{capture:!1}),n.addEventListener("mouseenter",i.handleEnter,{capture:!1}),document.addEventListener("mousemove",i.handleMove,{capture:!1}),document.addEventListener("mouseup",i.handleUp,{capture:!1}),i}return Qt(e,t),Ct(e,[{key:"kill",value:function(){var r=this.container;r.removeEventListener("click",this.handleClick),r.removeEventListener("contextmenu",this.handleRightClick),r.removeEventListener("mousedown",this.handleDown),r.removeEventListener("wheel",this.handleWheel),r.removeEventListener("mouseleave",this.handleLeave),r.removeEventListener("mouseenter",this.handleEnter),document.removeEventListener("mousemove",this.handleMove),document.removeEventListener("mouseup",this.handleUp)}},{key:"handleClick",value:function(r){var i=this;if(this.enabled){if(this.clicks++,this.clicks===2)return this.clicks=0,typeof this.doubleClickTimeout=="number"&&(clearTimeout(this.doubleClickTimeout),this.doubleClickTimeout=null),this.handleDoubleClick(r);setTimeout(function(){i.clicks=0,i.doubleClickTimeout=null},this.settings.doubleClickTimeout),this.draggedEvents<this.settings.draggedEventsTolerance&&this.emit("click",Gn(r,this.container))}}},{key:"handleRightClick",value:function(r){this.enabled&&this.emit("rightClick",Gn(r,this.container))}},{key:"handleDoubleClick",value:function(r){if(this.enabled){r.preventDefault(),r.stopPropagation();var i=Gn(r,this.container);if(this.emit("doubleClick",i),!i.sigmaDefaultPrevented){var s=this.renderer.getCamera(),o=s.getBoundedRatio(s.getState().ratio/this.settings.doubleClickZoomingRatio);s.animate(this.renderer.getViewportZoomedState(sn(r,this.container),o),{easing:"quadraticInOut",duration:this.settings.doubleClickZoomingDuration})}}}},{key:"handleDown",value:function(r){if(this.enabled){if(r.button===0){this.startCameraState=this.renderer.getCamera().getState();var i=sn(r,this.container),s=i.x,o=i.y;this.lastMouseX=s,this.lastMouseY=o,this.draggedEvents=0,this.downStartTime=Date.now(),this.isMouseDown=!0}this.emit("mousedown",Gn(r,this.container))}}},{key:"handleUp",value:function(r){var i=this;if(!(!this.enabled||!this.isMouseDown)){var s=this.renderer.getCamera();this.isMouseDown=!1,typeof this.movingTimeout=="number"&&(clearTimeout(this.movingTimeout),this.movingTimeout=null);var o=sn(r,this.container),a=o.x,l=o.y,c=s.getState(),d=s.getPreviousState()||{x:0,y:0};this.isMoving?s.animate({x:c.x+this.settings.inertiaRatio*(c.x-d.x),y:c.y+this.settings.inertiaRatio*(c.y-d.y)},{duration:this.settings.inertiaDuration,easing:"quadraticOut"}):(this.lastMouseX!==a||this.lastMouseY!==l)&&s.setState({x:c.x,y:c.y}),this.isMoving=!1,setTimeout(function(){var u=i.draggedEvents>0;i.draggedEvents=0,u&&i.renderer.getSetting("hideEdgesOnMove")&&i.renderer.refresh()},0),this.emit("mouseup",Gn(r,this.container))}}},{key:"handleMove",value:function(r){var i=this;if(this.enabled){var s=Gn(r,this.container);if(this.emit("mousemovebody",s),(r.target===this.container||r.composedPath()[0]===this.container)&&this.emit("mousemove",s),!s.sigmaDefaultPrevented&&this.isMouseDown){this.isMoving=!0,this.draggedEvents++,typeof this.movingTimeout=="number"&&clearTimeout(this.movingTimeout),this.movingTimeout=window.setTimeout(function(){i.movingTimeout=null,i.isMoving=!1},this.settings.dragTimeout);var o=this.renderer.getCamera(),a=sn(r,this.container),l=a.x,c=a.y,d=this.renderer.viewportToFramedGraph({x:this.lastMouseX,y:this.lastMouseY}),u=this.renderer.viewportToFramedGraph({x:l,y:c}),h=d.x-u.x,f=d.y-u.y,p=o.getState(),y=p.x+h,w=p.y+f;o.setState({x:y,y:w}),this.lastMouseX=l,this.lastMouseY=c,r.preventDefault(),r.stopPropagation()}}}},{key:"handleLeave",value:function(r){this.emit("mouseleave",Gn(r,this.container))}},{key:"handleEnter",value:function(r){this.emit("mouseenter",Gn(r,this.container))}},{key:"handleWheel",value:function(r){var i=this,s=this.renderer.getCamera();if(!(!this.enabled||!s.enabledZooming)){var o=wy(r);if(o){var a=RL(r,this.container);if(this.emit("wheel",a),a.sigmaDefaultPrevented){r.preventDefault(),r.stopPropagation();return}var l=s.getState().ratio,c=o>0?1/this.settings.zoomingRatio:this.settings.zoomingRatio,d=s.getBoundedRatio(l*c),u=o>0?1:-1,h=Date.now();l!==d&&(r.preventDefault(),r.stopPropagation(),!(this.currentWheelDirection===u&&this.lastWheelTriggerTime&&h-this.lastWheelTriggerTime<this.settings.zoomDuration/5)&&(s.animate(this.renderer.getViewportZoomedState(sn(r,this.container),d),{easing:"quadraticOut",duration:this.settings.zoomDuration},function(){i.currentWheelDirection=0}),this.currentWheelDirection=u,this.lastWheelTriggerTime=h))}}}},{key:"setSettings",value:function(r){this.settings=r}}])})(Ey),GL=["dragTimeout","inertiaDuration","inertiaRatio","doubleClickTimeout","doubleClickZoomingRatio","doubleClickZoomingDuration","tapMoveTolerance"],ML=GL.reduce(function(t,e){return xe(xe({},t),{},le({},e,Id[e]))},{}),OL=(function(t){function e(n,r){var i;return xt(this,e),i=Jt(this,e,[n,r]),le(i,"enabled",!0),le(i,"isMoving",!1),le(i,"hasMoved",!1),le(i,"touchMode",0),le(i,"startTouchesPositions",[]),le(i,"lastTouches",[]),le(i,"lastTap",null),le(i,"settings",ML),i.handleStart=i.handleStart.bind(i),i.handleLeave=i.handleLeave.bind(i),i.handleMove=i.handleMove.bind(i),n.addEventListener("touchstart",i.handleStart,{capture:!1}),n.addEventListener("touchcancel",i.handleLeave,{capture:!1}),document.addEventListener("touchend",i.handleLeave,{capture:!1,passive:!1}),document.addEventListener("touchmove",i.handleMove,{capture:!1,passive:!1}),i}return Qt(e,t),Ct(e,[{key:"kill",value:function(){var r=this.container;r.removeEventListener("touchstart",this.handleStart),r.removeEventListener("touchcancel",this.handleLeave),document.removeEventListener("touchend",this.handleLeave),document.removeEventListener("touchmove",this.handleMove)}},{key:"getDimensions",value:function(){return{width:this.container.offsetWidth,height:this.container.offsetHeight}}},{key:"handleStart",value:function(r){var i=this;if(this.enabled){r.preventDefault();var s=ko(r.touches);if(this.touchMode=s.length,this.startCameraState=this.renderer.getCamera().getState(),this.startTouchesPositions=s.map(function(f){return sn(f,i.container)}),this.touchMode===2){var o=Ei(this.startTouchesPositions,2),a=o[0],l=a.x,c=a.y,d=o[1],u=d.x,h=d.y;this.startTouchesAngle=Math.atan2(h-c,u-l),this.startTouchesDistance=Math.sqrt(Math.pow(u-l,2)+Math.pow(h-c,2))}this.emit("touchdown",$i(r,this.lastTouches,this.container)),this.lastTouches=s,this.lastTouchesPositions=this.startTouchesPositions}}},{key:"handleLeave",value:function(r){if(!(!this.enabled||!this.startTouchesPositions.length)){switch(r.cancelable&&r.preventDefault(),this.movingTimeout&&(this.isMoving=!1,clearTimeout(this.movingTimeout)),this.touchMode){case 2:if(r.touches.length===1){this.handleStart(r),r.preventDefault();break}case 1:if(this.isMoving){var i=this.renderer.getCamera(),s=i.getState(),o=i.getPreviousState()||{x:0,y:0};i.animate({x:s.x+this.settings.inertiaRatio*(s.x-o.x),y:s.y+this.settings.inertiaRatio*(s.y-o.y)},{duration:this.settings.inertiaDuration,easing:"quadraticOut"})}this.hasMoved=!1,this.isMoving=!1,this.touchMode=0;break}if(this.emit("touchup",$i(r,this.lastTouches,this.container)),!r.touches.length){var a=sn(this.lastTouches[0],this.container),l=this.startTouchesPositions[0],c=Math.pow(a.x-l.x,2)+Math.pow(a.y-l.y,2);if(!r.touches.length&&c<Math.pow(this.settings.tapMoveTolerance,2))if(this.lastTap&&Date.now()-this.lastTap.time<this.settings.doubleClickTimeout){var d=$i(r,this.lastTouches,this.container);if(this.emit("doubletap",d),this.lastTap=null,!d.sigmaDefaultPrevented){var u=this.renderer.getCamera(),h=u.getBoundedRatio(u.getState().ratio/this.settings.doubleClickZoomingRatio);u.animate(this.renderer.getViewportZoomedState(a,h),{easing:"quadraticInOut",duration:this.settings.doubleClickZoomingDuration})}}else{var f=$i(r,this.lastTouches,this.container);this.emit("tap",f),this.lastTap={time:Date.now(),position:f.touches[0]||f.previousTouches[0]}}}this.lastTouches=ko(r.touches),this.startTouchesPositions=[]}}},{key:"handleMove",value:function(r){var i=this;if(!(!this.enabled||!this.startTouchesPositions.length)){r.preventDefault();var s=ko(r.touches),o=s.map(function(_e){return sn(_e,i.container)}),a=this.lastTouches;this.lastTouches=s,this.lastTouchesPositions=o;var l=$i(r,a,this.container);if(this.emit("touchmove",l),!l.sigmaDefaultPrevented&&(this.hasMoved||(this.hasMoved=o.some(function(_e,ye){var ae=i.startTouchesPositions[ye];return ae&&(_e.x!==ae.x||_e.y!==ae.y)})),!!this.hasMoved)){this.isMoving=!0,this.movingTimeout&&clearTimeout(this.movingTimeout),this.movingTimeout=window.setTimeout(function(){i.isMoving=!1},this.settings.dragTimeout);var c=this.renderer.getCamera(),d=this.startCameraState,u=this.renderer.getSetting("stagePadding");switch(this.touchMode){case 1:{var h=this.renderer.viewportToFramedGraph((this.startTouchesPositions||[])[0]),f=h.x,p=h.y,y=this.renderer.viewportToFramedGraph(o[0]),w=y.x,b=y.y;c.setState({x:d.x+f-w,y:d.y+p-b});break}case 2:{var E={x:.5,y:.5,angle:0,ratio:1},k=o[0],_=k.x,x=k.y,T=o[1],L=T.x,O=T.y,F=Math.atan2(O-x,L-_)-this.startTouchesAngle,$=Math.hypot(O-x,L-_)/this.startTouchesDistance,j=c.getBoundedRatio(d.ratio/$);E.ratio=j,E.angle=d.angle+F;var z=this.getDimensions(),I=this.renderer.viewportToFramedGraph((this.startTouchesPositions||[])[0],{cameraState:d}),A=Math.min(z.width,z.height)-2*u,D=A/z.width,C=A/z.height,S=j/A,U=_-A/2/D,H=x-A/2/C,ne=[U*Math.cos(-E.angle)-H*Math.sin(-E.angle),H*Math.cos(-E.angle)+U*Math.sin(-E.angle)];U=ne[0],H=ne[1],E.x=I.x-U*S,E.y=I.y+H*S,c.setState(E);break}}}}}},{key:"setSettings",value:function(r){this.settings=r}}])})(Ey);function FL(t){if(Array.isArray(t))return Ac(t)}function $L(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function zL(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _f(t){return FL(t)||$L(t)||ty(t)||zL()}function BL(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function vl(t,e){if(t==null)return{};var n,r,i=BL(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}var bf=(function(){function t(e,n){xt(this,t),this.key=e,this.size=n}return Ct(t,null,[{key:"compare",value:function(n,r){return n.size>r.size?-1:n.size<r.size||n.key>r.key?1:-1}}])})(),wf=(function(){function t(){xt(this,t),le(this,"width",0),le(this,"height",0),le(this,"cellSize",0),le(this,"columns",0),le(this,"rows",0),le(this,"cells",{})}return Ct(t,[{key:"resizeAndClear",value:function(n,r){this.width=n.width,this.height=n.height,this.cellSize=r,this.columns=Math.ceil(n.width/r),this.rows=Math.ceil(n.height/r),this.cells={}}},{key:"getIndex",value:function(n){var r=Math.floor(n.x/this.cellSize),i=Math.floor(n.y/this.cellSize);return i*this.columns+r}},{key:"add",value:function(n,r,i){var s=new bf(n,r),o=this.getIndex(i),a=this.cells[o];a||(a=[],this.cells[o]=a),a.push(s)}},{key:"organize",value:function(){for(var n in this.cells){var r=this.cells[n];r.sort(bf.compare)}}},{key:"getLabelsToDisplay",value:function(n,r){var i=this.cellSize*this.cellSize,s=i/n/n,o=s*r/i,a=Math.ceil(o),l=[];for(var c in this.cells)for(var d=this.cells[c],u=0;u<Math.min(a,d.length);u++)l.push(d[u].key);return l}}])})();function VL(t){var e=t.graph,n=t.hoveredNode,r=t.highlightedNodes,i=t.displayedNodeLabels,s=[];return e.forEachEdge(function(o,a,l,c){(l===n||c===n||r.has(l)||r.has(c)||i.has(l)&&i.has(c))&&s.push(o)}),s}var Ef=150,kf=50,Un=Object.prototype.hasOwnProperty;function UL(t,e,n){if(!Un.call(n,"x")||!Un.call(n,"y"))throw new Error('Sigma: could not find a valid position (x, y) for node "'.concat(e,'". All your nodes must have a number "x" and "y". Maybe your forgot to apply a layout or your "nodeReducer" is not returning the correct data?'));return n.color||(n.color=t.defaultNodeColor),!n.label&&n.label!==""&&(n.label=null),n.label!==void 0&&n.label!==null?n.label=""+n.label:n.label=null,n.size||(n.size=2),Un.call(n,"hidden")||(n.hidden=!1),Un.call(n,"highlighted")||(n.highlighted=!1),Un.call(n,"forceLabel")||(n.forceLabel=!1),(!n.type||n.type==="")&&(n.type=t.defaultNodeType),n.zIndex||(n.zIndex=0),n}function jL(t,e,n){return n.color||(n.color=t.defaultEdgeColor),n.label||(n.label=""),n.size||(n.size=.5),Un.call(n,"hidden")||(n.hidden=!1),Un.call(n,"forceLabel")||(n.forceLabel=!1),(!n.type||n.type==="")&&(n.type=t.defaultEdgeType),n.zIndex||(n.zIndex=0),n}var HL=(function(t){function e(n,r){var i,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(xt(this,e),i=Jt(this,e),le(i,"elements",{}),le(i,"canvasContexts",{}),le(i,"webGLContexts",{}),le(i,"pickingLayers",new Set),le(i,"textures",{}),le(i,"frameBuffers",{}),le(i,"activeListeners",{}),le(i,"labelGrid",new wf),le(i,"nodeDataCache",{}),le(i,"edgeDataCache",{}),le(i,"nodeProgramIndex",{}),le(i,"edgeProgramIndex",{}),le(i,"nodesWithForcedLabels",new Set),le(i,"edgesWithForcedLabels",new Set),le(i,"nodeExtent",{x:[0,1],y:[0,1]}),le(i,"nodeZExtent",[1/0,-1/0]),le(i,"edgeZExtent",[1/0,-1/0]),le(i,"matrix",tn()),le(i,"invMatrix",tn()),le(i,"correctionRatio",1),le(i,"customBBox",null),le(i,"normalizationFunction",mf({x:[0,1],y:[0,1]})),le(i,"graphToViewportRatio",1),le(i,"itemIDsIndex",{}),le(i,"nodeIndices",{}),le(i,"edgeIndices",{}),le(i,"width",0),le(i,"height",0),le(i,"pixelRatio",gf()),le(i,"pickingDownSizingRatio",2*i.pixelRatio),le(i,"displayedNodeLabels",new Set),le(i,"displayedEdgeLabels",new Set),le(i,"highlightedNodes",new Set),le(i,"hoveredNode",null),le(i,"hoveredEdge",null),le(i,"renderFrame",null),le(i,"renderHighlightedNodesFrame",null),le(i,"needToProcess",!1),le(i,"checkEdgesEventsFrame",null),le(i,"nodePrograms",{}),le(i,"nodeHoverPrograms",{}),le(i,"edgePrograms",{}),i.settings=NL(s),yl(i.settings),xL(n),!(r instanceof HTMLElement))throw new Error("Sigma: container should be an html element.");i.graph=n,i.container=r,i.createWebGLContext("edges",{picking:s.enableEdgeEvents}),i.createCanvasContext("edgeLabels"),i.createWebGLContext("nodes",{picking:!0}),i.createCanvasContext("labels"),i.createCanvasContext("hovers"),i.createWebGLContext("hoverNodes"),i.createCanvasContext("mouse",{style:{touchAction:"none",userSelect:"none"}}),i.resize();for(var o in i.settings.nodeProgramClasses)i.registerNodeProgram(o,i.settings.nodeProgramClasses[o],i.settings.nodeHoverProgramClasses[o]);for(var a in i.settings.edgeProgramClasses)i.registerEdgeProgram(a,i.settings.edgeProgramClasses[a]);return i.camera=new vf,i.bindCameraHandlers(),i.mouseCaptor=new PL(i.elements.mouse,i),i.mouseCaptor.setSettings(i.settings),i.touchCaptor=new OL(i.elements.mouse,i),i.touchCaptor.setSettings(i.settings),i.bindEventHandlers(),i.bindGraphHandlers(),i.handleSettingsUpdate(),i.refresh(),i}return Qt(e,t),Ct(e,[{key:"registerNodeProgram",value:function(r,i,s){return this.nodePrograms[r]&&this.nodePrograms[r].kill(),this.nodeHoverPrograms[r]&&this.nodeHoverPrograms[r].kill(),this.nodePrograms[r]=new i(this.webGLContexts.nodes,this.frameBuffers.nodes,this),this.nodeHoverPrograms[r]=new(s||i)(this.webGLContexts.hoverNodes,null,this),this}},{key:"registerEdgeProgram",value:function(r,i){return this.edgePrograms[r]&&this.edgePrograms[r].kill(),this.edgePrograms[r]=new i(this.webGLContexts.edges,this.frameBuffers.edges,this),this}},{key:"unregisterNodeProgram",value:function(r){if(this.nodePrograms[r]){var i=this.nodePrograms,s=i[r],o=vl(i,[r].map(rs));s.kill(),this.nodePrograms=o}if(this.nodeHoverPrograms[r]){var a=this.nodeHoverPrograms,l=a[r],c=vl(a,[r].map(rs));l.kill(),this.nodePrograms=c}return this}},{key:"unregisterEdgeProgram",value:function(r){if(this.edgePrograms[r]){var i=this.edgePrograms,s=i[r],o=vl(i,[r].map(rs));s.kill(),this.edgePrograms=o}return this}},{key:"resetWebGLTexture",value:function(r){var i=this.webGLContexts[r],s=this.frameBuffers[r],o=this.textures[r];o&&i.deleteTexture(o);var a=i.createTexture();return i.bindFramebuffer(i.FRAMEBUFFER,s),i.bindTexture(i.TEXTURE_2D,a),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,this.width,this.height,0,i.RGBA,i.UNSIGNED_BYTE,null),i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,a,0),this.textures[r]=a,this}},{key:"bindCameraHandlers",value:function(){var r=this;return this.activeListeners.camera=function(){r.scheduleRender()},this.camera.on("updated",this.activeListeners.camera),this}},{key:"unbindCameraHandlers",value:function(){return this.camera.removeListener("updated",this.activeListeners.camera),this}},{key:"getNodeAtPosition",value:function(r){var i=r.x,s=r.y,o=ef(this.webGLContexts.nodes,this.frameBuffers.nodes,i,s,this.pixelRatio,this.pickingDownSizingRatio),a=Qh.apply(void 0,_f(o)),l=this.itemIDsIndex[a];return l&&l.type==="node"?l.id:null}},{key:"bindEventHandlers",value:function(){var r=this;this.activeListeners.handleResize=function(){r.scheduleRefresh()},window.addEventListener("resize",this.activeListeners.handleResize),this.activeListeners.handleMove=function(s){var o=Fi(s),a={event:o,preventSigmaDefault:function(){o.preventSigmaDefault()}},l=r.getNodeAtPosition(o);if(l&&r.hoveredNode!==l&&!r.nodeDataCache[l].hidden){r.hoveredNode&&r.emit("leaveNode",xe(xe({},a),{},{node:r.hoveredNode})),r.hoveredNode=l,r.emit("enterNode",xe(xe({},a),{},{node:l})),r.scheduleHighlightedNodesRender();return}if(r.hoveredNode&&r.getNodeAtPosition(o)!==r.hoveredNode){var c=r.hoveredNode;r.hoveredNode=null,r.emit("leaveNode",xe(xe({},a),{},{node:c})),r.scheduleHighlightedNodesRender();return}if(r.settings.enableEdgeEvents){var d=r.hoveredNode?null:r.getEdgeAtPoint(a.event.x,a.event.y);d!==r.hoveredEdge&&(r.hoveredEdge&&r.emit("leaveEdge",xe(xe({},a),{},{edge:r.hoveredEdge})),d&&r.emit("enterEdge",xe(xe({},a),{},{edge:d})),r.hoveredEdge=d)}},this.activeListeners.handleMoveBody=function(s){var o=Fi(s);r.emit("moveBody",{event:o,preventSigmaDefault:function(){o.preventSigmaDefault()}})},this.activeListeners.handleLeave=function(s){var o=Fi(s),a={event:o,preventSigmaDefault:function(){o.preventSigmaDefault()}};r.hoveredNode&&(r.emit("leaveNode",xe(xe({},a),{},{node:r.hoveredNode})),r.scheduleHighlightedNodesRender()),r.settings.enableEdgeEvents&&r.hoveredEdge&&(r.emit("leaveEdge",xe(xe({},a),{},{edge:r.hoveredEdge})),r.scheduleHighlightedNodesRender()),r.emit("leaveStage",xe({},a))},this.activeListeners.handleEnter=function(s){var o=Fi(s),a={event:o,preventSigmaDefault:function(){o.preventSigmaDefault()}};r.emit("enterStage",xe({},a))};var i=function(o){return function(a){var l=Fi(a),c={event:l,preventSigmaDefault:function(){l.preventSigmaDefault()}},d=r.getNodeAtPosition(l);if(d)return r.emit("".concat(o,"Node"),xe(xe({},c),{},{node:d}));if(r.settings.enableEdgeEvents){var u=r.getEdgeAtPoint(l.x,l.y);if(u)return r.emit("".concat(o,"Edge"),xe(xe({},c),{},{edge:u}))}return r.emit("".concat(o,"Stage"),c)}};return this.activeListeners.handleClick=i("click"),this.activeListeners.handleRightClick=i("rightClick"),this.activeListeners.handleDoubleClick=i("doubleClick"),this.activeListeners.handleWheel=i("wheel"),this.activeListeners.handleDown=i("down"),this.activeListeners.handleUp=i("up"),this.mouseCaptor.on("mousemove",this.activeListeners.handleMove),this.mouseCaptor.on("mousemovebody",this.activeListeners.handleMoveBody),this.mouseCaptor.on("click",this.activeListeners.handleClick),this.mouseCaptor.on("rightClick",this.activeListeners.handleRightClick),this.mouseCaptor.on("doubleClick",this.activeListeners.handleDoubleClick),this.mouseCaptor.on("wheel",this.activeListeners.handleWheel),this.mouseCaptor.on("mousedown",this.activeListeners.handleDown),this.mouseCaptor.on("mouseup",this.activeListeners.handleUp),this.mouseCaptor.on("mouseleave",this.activeListeners.handleLeave),this.mouseCaptor.on("mouseenter",this.activeListeners.handleEnter),this.touchCaptor.on("touchdown",this.activeListeners.handleDown),this.touchCaptor.on("touchdown",this.activeListeners.handleMove),this.touchCaptor.on("touchup",this.activeListeners.handleUp),this.touchCaptor.on("touchmove",this.activeListeners.handleMove),this.touchCaptor.on("tap",this.activeListeners.handleClick),this.touchCaptor.on("doubletap",this.activeListeners.handleDoubleClick),this.touchCaptor.on("touchmove",this.activeListeners.handleMoveBody),this}},{key:"bindGraphHandlers",value:function(){var r=this,i=this.graph,s=new Set(["x","y","zIndex","type"]);return this.activeListeners.eachNodeAttributesUpdatedGraphUpdate=function(o){var a,l=(a=o.hints)===null||a===void 0?void 0:a.attributes;r.graph.forEachNode(function(d){return r.updateNode(d)});var c=!l||l.some(function(d){return s.has(d)});r.refresh({partialGraph:{nodes:i.nodes()},skipIndexation:!c,schedule:!0})},this.activeListeners.eachEdgeAttributesUpdatedGraphUpdate=function(o){var a,l=(a=o.hints)===null||a===void 0?void 0:a.attributes;r.graph.forEachEdge(function(d){return r.updateEdge(d)});var c=l&&["zIndex","type"].some(function(d){return l?.includes(d)});r.refresh({partialGraph:{edges:i.edges()},skipIndexation:!c,schedule:!0})},this.activeListeners.addNodeGraphUpdate=function(o){var a=o.key;r.addNode(a),r.refresh({partialGraph:{nodes:[a]},skipIndexation:!1,schedule:!0})},this.activeListeners.updateNodeGraphUpdate=function(o){var a=o.key;r.refresh({partialGraph:{nodes:[a]},skipIndexation:!1,schedule:!0})},this.activeListeners.dropNodeGraphUpdate=function(o){var a=o.key;r.removeNode(a),r.refresh({schedule:!0})},this.activeListeners.addEdgeGraphUpdate=function(o){var a=o.key;r.addEdge(a),r.refresh({partialGraph:{edges:[a]},schedule:!0})},this.activeListeners.updateEdgeGraphUpdate=function(o){var a=o.key;r.refresh({partialGraph:{edges:[a]},skipIndexation:!1,schedule:!0})},this.activeListeners.dropEdgeGraphUpdate=function(o){var a=o.key;r.removeEdge(a),r.refresh({schedule:!0})},this.activeListeners.clearEdgesGraphUpdate=function(){r.clearEdgeState(),r.clearEdgeIndices(),r.refresh({schedule:!0})},this.activeListeners.clearGraphUpdate=function(){r.clearEdgeState(),r.clearNodeState(),r.clearEdgeIndices(),r.clearNodeIndices(),r.refresh({schedule:!0})},i.on("nodeAdded",this.activeListeners.addNodeGraphUpdate),i.on("nodeDropped",this.activeListeners.dropNodeGraphUpdate),i.on("nodeAttributesUpdated",this.activeListeners.updateNodeGraphUpdate),i.on("eachNodeAttributesUpdated",this.activeListeners.eachNodeAttributesUpdatedGraphUpdate),i.on("edgeAdded",this.activeListeners.addEdgeGraphUpdate),i.on("edgeDropped",this.activeListeners.dropEdgeGraphUpdate),i.on("edgeAttributesUpdated",this.activeListeners.updateEdgeGraphUpdate),i.on("eachEdgeAttributesUpdated",this.activeListeners.eachEdgeAttributesUpdatedGraphUpdate),i.on("edgesCleared",this.activeListeners.clearEdgesGraphUpdate),i.on("cleared",this.activeListeners.clearGraphUpdate),this}},{key:"unbindGraphHandlers",value:function(){var r=this.graph;r.removeListener("nodeAdded",this.activeListeners.addNodeGraphUpdate),r.removeListener("nodeDropped",this.activeListeners.dropNodeGraphUpdate),r.removeListener("nodeAttributesUpdated",this.activeListeners.updateNodeGraphUpdate),r.removeListener("eachNodeAttributesUpdated",this.activeListeners.eachNodeAttributesUpdatedGraphUpdate),r.removeListener("edgeAdded",this.activeListeners.addEdgeGraphUpdate),r.removeListener("edgeDropped",this.activeListeners.dropEdgeGraphUpdate),r.removeListener("edgeAttributesUpdated",this.activeListeners.updateEdgeGraphUpdate),r.removeListener("eachEdgeAttributesUpdated",this.activeListeners.eachEdgeAttributesUpdatedGraphUpdate),r.removeListener("edgesCleared",this.activeListeners.clearEdgesGraphUpdate),r.removeListener("cleared",this.activeListeners.clearGraphUpdate)}},{key:"getEdgeAtPoint",value:function(r,i){var s=ef(this.webGLContexts.edges,this.frameBuffers.edges,r,i,this.pixelRatio,this.pickingDownSizingRatio),o=Qh.apply(void 0,_f(s)),a=this.itemIDsIndex[o];return a&&a.type==="edge"?a.id:null}},{key:"process",value:function(){var r=this;this.emit("beforeProcess");var i=this.graph,s=this.settings,o=this.getDimensions();if(this.nodeExtent=AL(this.graph),!this.settings.autoRescale){var a=o.width,l=o.height,c=this.nodeExtent,d=c.x,u=c.y;this.nodeExtent={x:[(d[0]+d[1])/2-a/2,(d[0]+d[1])/2+a/2],y:[(u[0]+u[1])/2-l/2,(u[0]+u[1])/2+l/2]}}this.normalizationFunction=mf(this.customBBox||this.nodeExtent);var h=new vf,f=Oi(h.getState(),o,this.getGraphDimensions(),this.getStagePadding());this.labelGrid.resizeAndClear(o,s.labelGridCellSize);for(var p={},y={},w={},b={},E=1,k=i.nodes(),_=0,x=k.length;_<x;_++){var T=k[_],L=this.nodeDataCache[T],O=i.getNodeAttributes(T);L.x=O.x,L.y=O.y,this.normalizationFunction.applyTo(L),typeof L.label=="string"&&!L.hidden&&this.labelGrid.add(T,L.size,this.framedGraphToViewport(L,{matrix:f})),p[L.type]=(p[L.type]||0)+1}this.labelGrid.organize();for(var F in this.nodePrograms){if(!Un.call(this.nodePrograms,F))throw new Error('Sigma: could not find a suitable program for node type "'.concat(F,'"!'));this.nodePrograms[F].reallocate(p[F]||0),p[F]=0}this.settings.zIndex&&this.nodeZExtent[0]!==this.nodeZExtent[1]&&(k=pf(this.nodeZExtent,function(se){return r.nodeDataCache[se].zIndex},k));for(var $=0,j=k.length;$<j;$++){var z=k[$];y[z]=E,b[y[z]]={type:"node",id:z},E++;var I=this.nodeDataCache[z];this.addNodeToProgram(z,y[z],p[I.type]++)}for(var A={},D=i.edges(),C=0,S=D.length;C<S;C++){var U=D[C],H=this.edgeDataCache[U];A[H.type]=(A[H.type]||0)+1}this.settings.zIndex&&this.edgeZExtent[0]!==this.edgeZExtent[1]&&(D=pf(this.edgeZExtent,function(se){return r.edgeDataCache[se].zIndex},D));for(var ne in this.edgePrograms){if(!Un.call(this.edgePrograms,ne))throw new Error('Sigma: could not find a suitable program for edge type "'.concat(ne,'"!'));this.edgePrograms[ne].reallocate(A[ne]||0),A[ne]=0}for(var _e=0,ye=D.length;_e<ye;_e++){var ae=D[_e];w[ae]=E,b[w[ae]]={type:"edge",id:ae},E++;var W=this.edgeDataCache[ae];this.addEdgeToProgram(ae,w[ae],A[W.type]++)}return this.itemIDsIndex=b,this.nodeIndices=y,this.edgeIndices=w,this.emit("afterProcess"),this}},{key:"handleSettingsUpdate",value:function(r){var i=this,s=this.settings;if(this.camera.minRatio=s.minCameraRatio,this.camera.maxRatio=s.maxCameraRatio,this.camera.enabledZooming=s.enableCameraZooming,this.camera.enabledPanning=s.enableCameraPanning,this.camera.enabledRotation=s.enableCameraRotation,s.cameraPanBoundaries?this.camera.clean=function(d){return i.cleanCameraState(d,s.cameraPanBoundaries&&Sc(s.cameraPanBoundaries)==="object"?s.cameraPanBoundaries:{})}:this.camera.clean=null,this.camera.setState(this.camera.validateState(this.camera.getState())),r){if(r.edgeProgramClasses!==s.edgeProgramClasses){for(var o in s.edgeProgramClasses)s.edgeProgramClasses[o]!==r.edgeProgramClasses[o]&&this.registerEdgeProgram(o,s.edgeProgramClasses[o]);for(var a in r.edgeProgramClasses)s.edgeProgramClasses[a]||this.unregisterEdgeProgram(a)}if(r.nodeProgramClasses!==s.nodeProgramClasses||r.nodeHoverProgramClasses!==s.nodeHoverProgramClasses){for(var l in s.nodeProgramClasses)(s.nodeProgramClasses[l]!==r.nodeProgramClasses[l]||s.nodeHoverProgramClasses[l]!==r.nodeHoverProgramClasses[l])&&this.registerNodeProgram(l,s.nodeProgramClasses[l],s.nodeHoverProgramClasses[l]);for(var c in r.nodeProgramClasses)s.nodeProgramClasses[c]||this.unregisterNodeProgram(c)}}return this.mouseCaptor.setSettings(this.settings),this.touchCaptor.setSettings(this.settings),this}},{key:"cleanCameraState",value:function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=i.tolerance,o=s===void 0?0:s,a=i.boundaries,l=xe({},r),c=a||this.nodeExtent,d=Ei(c.x,2),u=d[0],h=d[1],f=Ei(c.y,2),p=f[0],y=f[1],w=[this.graphToViewport({x:u,y:p},{cameraState:r}),this.graphToViewport({x:h,y:p},{cameraState:r}),this.graphToViewport({x:u,y},{cameraState:r}),this.graphToViewport({x:h,y},{cameraState:r})],b=1/0,E=-1/0,k=1/0,_=-1/0;w.forEach(function(A){var D=A.x,C=A.y;b=Math.min(b,D),E=Math.max(E,D),k=Math.min(k,C),_=Math.max(_,C)});var x=E-b,T=_-k,L=this.getDimensions(),O=L.width,F=L.height,$=0,j=0;if(x>=O?E<O-o?$=E-(O-o):b>o&&($=b-o):E>O+o?$=E-(O+o):b<-o&&($=b+o),T>=F?_<F-o?j=_-(F-o):k>o&&(j=k-o):_>F+o?j=_-(F+o):k<-o&&(j=k+o),$||j){var z=this.viewportToFramedGraph({x:0,y:0},{cameraState:r}),I=this.viewportToFramedGraph({x:$,y:j},{cameraState:r});$=I.x-z.x,j=I.y-z.y,l.x+=$,l.y+=j}return l}},{key:"renderLabels",value:function(){if(!this.settings.renderLabels)return this;var r=this.camera.getState(),i=this.labelGrid.getLabelsToDisplay(r.ratio,this.settings.labelDensity);yf(i,this.nodesWithForcedLabels),this.displayedNodeLabels=new Set;for(var s=this.canvasContexts.labels,o=0,a=i.length;o<a;o++){var l=i[o],c=this.nodeDataCache[l];if(!this.displayedNodeLabels.has(l)&&!c.hidden){var d=this.framedGraphToViewport(c),u=d.x,h=d.y,f=this.scaleSize(c.size);if(!(!c.forceLabel&&f<this.settings.labelRenderedSizeThreshold)&&!(u<-Ef||u>this.width+Ef||h<-kf||h>this.height+kf)){this.displayedNodeLabels.add(l);var p=this.settings.defaultDrawNodeLabel,y=this.nodePrograms[c.type],w=y?.drawLabel||p;w(s,xe(xe({key:l},c),{},{size:f,x:u,y:h}),this.settings)}}}return this}},{key:"renderEdgeLabels",value:function(){if(!this.settings.renderEdgeLabels)return this;var r=this.canvasContexts.edgeLabels;r.clearRect(0,0,this.width,this.height);var i=VL({graph:this.graph,hoveredNode:this.hoveredNode,displayedNodeLabels:this.displayedNodeLabels,highlightedNodes:this.highlightedNodes});yf(i,this.edgesWithForcedLabels);for(var s=new Set,o=0,a=i.length;o<a;o++){var l=i[o],c=this.graph.extremities(l),d=this.nodeDataCache[c[0]],u=this.nodeDataCache[c[1]],h=this.edgeDataCache[l];if(!s.has(l)&&!(h.hidden||d.hidden||u.hidden)){var f=this.settings.defaultDrawEdgeLabel,p=this.edgePrograms[h.type],y=p?.drawLabel||f;y(r,xe(xe({key:l},h),{},{size:this.scaleSize(h.size)}),xe(xe(xe({key:c[0]},d),this.framedGraphToViewport(d)),{},{size:this.scaleSize(d.size)}),xe(xe(xe({key:c[1]},u),this.framedGraphToViewport(u)),{},{size:this.scaleSize(u.size)}),this.settings),s.add(l)}}return this.displayedEdgeLabels=s,this}},{key:"renderHighlightedNodes",value:function(){var r=this,i=this.canvasContexts.hovers;i.clearRect(0,0,this.width,this.height);var s=function(f){var p=r.nodeDataCache[f],y=r.framedGraphToViewport(p),w=y.x,b=y.y,E=r.scaleSize(p.size),k=r.settings.defaultDrawNodeHover,_=r.nodePrograms[p.type],x=_?.drawHover||k;x(i,xe(xe({key:f},p),{},{size:E,x:w,y:b}),r.settings)},o=[];this.hoveredNode&&!this.nodeDataCache[this.hoveredNode].hidden&&o.push(this.hoveredNode),this.highlightedNodes.forEach(function(h){h!==r.hoveredNode&&o.push(h)}),o.forEach(function(h){return s(h)});var a={};o.forEach(function(h){var f=r.nodeDataCache[h].type;a[f]=(a[f]||0)+1});for(var l in this.nodeHoverPrograms)this.nodeHoverPrograms[l].reallocate(a[l]||0),a[l]=0;o.forEach(function(h){var f=r.nodeDataCache[h];r.nodeHoverPrograms[f.type].process(0,a[f.type]++,f)}),this.webGLContexts.hoverNodes.clear(this.webGLContexts.hoverNodes.COLOR_BUFFER_BIT);var c=this.getRenderParams();for(var d in this.nodeHoverPrograms){var u=this.nodeHoverPrograms[d];u.render(c)}}},{key:"scheduleHighlightedNodesRender",value:function(){var r=this;this.renderHighlightedNodesFrame||this.renderFrame||(this.renderHighlightedNodesFrame=requestAnimationFrame(function(){r.renderHighlightedNodesFrame=null,r.renderHighlightedNodes(),r.renderEdgeLabels()}))}},{key:"render",value:function(){var r=this;this.emit("beforeRender");var i=function(){return r.emit("afterRender"),r};if(this.renderFrame&&(cancelAnimationFrame(this.renderFrame),this.renderFrame=null),this.resize(),this.needToProcess&&this.process(),this.needToProcess=!1,this.clear(),this.pickingLayers.forEach(function(w){return r.resetWebGLTexture(w)}),!this.graph.order)return i();var s=this.mouseCaptor,o=this.camera.isAnimated()||s.isMoving||s.draggedEvents||s.currentWheelDirection,a=this.camera.getState(),l=this.getDimensions(),c=this.getGraphDimensions(),d=this.getStagePadding();this.matrix=Oi(a,l,c,d),this.invMatrix=Oi(a,l,c,d,!0),this.correctionRatio=kL(this.matrix,a,l),this.graphToViewportRatio=this.getGraphToViewportRatio();var u=this.getRenderParams();for(var h in this.nodePrograms){var f=this.nodePrograms[h];f.render(u)}if(!this.settings.hideEdgesOnMove||!o)for(var p in this.edgePrograms){var y=this.edgePrograms[p];y.render(u)}return this.settings.hideLabelsOnMove&&o||(this.renderLabels(),this.renderEdgeLabels(),this.renderHighlightedNodes()),i()}},{key:"addNode",value:function(r){var i=Object.assign({},this.graph.getNodeAttributes(r));this.settings.nodeReducer&&(i=this.settings.nodeReducer(r,i));var s=UL(this.settings,r,i);this.nodeDataCache[r]=s,this.nodesWithForcedLabels.delete(r),s.forceLabel&&!s.hidden&&this.nodesWithForcedLabels.add(r),this.highlightedNodes.delete(r),s.highlighted&&!s.hidden&&this.highlightedNodes.add(r),this.settings.zIndex&&(s.zIndex<this.nodeZExtent[0]&&(this.nodeZExtent[0]=s.zIndex),s.zIndex>this.nodeZExtent[1]&&(this.nodeZExtent[1]=s.zIndex))}},{key:"updateNode",value:function(r){this.addNode(r);var i=this.nodeDataCache[r];this.normalizationFunction.applyTo(i)}},{key:"removeNode",value:function(r){delete this.nodeDataCache[r],delete this.nodeProgramIndex[r],this.highlightedNodes.delete(r),this.hoveredNode===r&&(this.hoveredNode=null),this.nodesWithForcedLabels.delete(r)}},{key:"addEdge",value:function(r){var i=Object.assign({},this.graph.getEdgeAttributes(r));this.settings.edgeReducer&&(i=this.settings.edgeReducer(r,i));var s=jL(this.settings,r,i);this.edgeDataCache[r]=s,this.edgesWithForcedLabels.delete(r),s.forceLabel&&!s.hidden&&this.edgesWithForcedLabels.add(r),this.settings.zIndex&&(s.zIndex<this.edgeZExtent[0]&&(this.edgeZExtent[0]=s.zIndex),s.zIndex>this.edgeZExtent[1]&&(this.edgeZExtent[1]=s.zIndex))}},{key:"updateEdge",value:function(r){this.addEdge(r)}},{key:"removeEdge",value:function(r){delete this.edgeDataCache[r],delete this.edgeProgramIndex[r],this.hoveredEdge===r&&(this.hoveredEdge=null),this.edgesWithForcedLabels.delete(r)}},{key:"clearNodeIndices",value:function(){this.labelGrid=new wf,this.nodeExtent={x:[0,1],y:[0,1]},this.nodeDataCache={},this.edgeProgramIndex={},this.nodesWithForcedLabels=new Set,this.nodeZExtent=[1/0,-1/0],this.highlightedNodes=new Set}},{key:"clearEdgeIndices",value:function(){this.edgeDataCache={},this.edgeProgramIndex={},this.edgesWithForcedLabels=new Set,this.edgeZExtent=[1/0,-1/0]}},{key:"clearIndices",value:function(){this.clearEdgeIndices(),this.clearNodeIndices()}},{key:"clearNodeState",value:function(){this.displayedNodeLabels=new Set,this.highlightedNodes=new Set,this.hoveredNode=null}},{key:"clearEdgeState",value:function(){this.displayedEdgeLabels=new Set,this.highlightedNodes=new Set,this.hoveredEdge=null}},{key:"clearState",value:function(){this.clearEdgeState(),this.clearNodeState()}},{key:"addNodeToProgram",value:function(r,i,s){var o=this.nodeDataCache[r],a=this.nodePrograms[o.type];if(!a)throw new Error('Sigma: could not find a suitable program for node type "'.concat(o.type,'"!'));a.process(i,s,o),this.nodeProgramIndex[r]=s}},{key:"addEdgeToProgram",value:function(r,i,s){var o=this.edgeDataCache[r],a=this.edgePrograms[o.type];if(!a)throw new Error('Sigma: could not find a suitable program for edge type "'.concat(o.type,'"!'));var l=this.graph.extremities(r),c=this.nodeDataCache[l[0]],d=this.nodeDataCache[l[1]];a.process(i,s,c,d,o),this.edgeProgramIndex[r]=s}},{key:"getRenderParams",value:function(){return{matrix:this.matrix,invMatrix:this.invMatrix,width:this.width,height:this.height,pixelRatio:this.pixelRatio,zoomRatio:this.camera.ratio,cameraAngle:this.camera.angle,sizeRatio:1/this.scaleSize(),correctionRatio:this.correctionRatio,downSizingRatio:this.pickingDownSizingRatio,minEdgeThickness:this.settings.minEdgeThickness,antiAliasingFeather:this.settings.antiAliasingFeather}}},{key:"getStagePadding",value:function(){var r=this.settings,i=r.stagePadding,s=r.autoRescale;return s&&i||0}},{key:"createLayer",value:function(r,i){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(this.elements[r])throw new Error('Sigma: a layer named "'.concat(r,'" already exists'));var o=CL(i,{position:"absolute"},{class:"sigma-".concat(r)});return s.style&&Object.assign(o.style,s.style),this.elements[r]=o,"beforeLayer"in s&&s.beforeLayer?this.elements[s.beforeLayer].before(o):"afterLayer"in s&&s.afterLayer?this.elements[s.afterLayer].after(o):this.container.appendChild(o),o}},{key:"createCanvas",value:function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.createLayer(r,"canvas",i)}},{key:"createCanvasContext",value:function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=this.createCanvas(r,i),o={preserveDrawingBuffer:!1,antialias:!1};return this.canvasContexts[r]=s.getContext("2d",o),this}},{key:"createWebGLContext",value:function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=i?.canvas||this.createCanvas(r,i);i.hidden&&s.remove();var o=xe({preserveDrawingBuffer:!1,antialias:!1},i),a;a=s.getContext("webgl2",o),a||(a=s.getContext("webgl",o)),a||(a=s.getContext("experimental-webgl",o));var l=a;if(this.webGLContexts[r]=l,l.blendFunc(l.ONE,l.ONE_MINUS_SRC_ALPHA),i.picking){this.pickingLayers.add(r);var c=l.createFramebuffer();if(!c)throw new Error("Sigma: cannot create a new frame buffer for layer ".concat(r));this.frameBuffers[r]=c}return l}},{key:"killLayer",value:function(r){var i=this.elements[r];if(!i)throw new Error("Sigma: cannot kill layer ".concat(r,", which does not exist"));if(this.webGLContexts[r]){var s,o=this.webGLContexts[r];(s=o.getExtension("WEBGL_lose_context"))===null||s===void 0||s.loseContext(),delete this.webGLContexts[r]}else this.canvasContexts[r]&&delete this.canvasContexts[r];return i.remove(),delete this.elements[r],this}},{key:"getCamera",value:function(){return this.camera}},{key:"setCamera",value:function(r){this.unbindCameraHandlers(),this.camera=r,this.bindCameraHandlers()}},{key:"getContainer",value:function(){return this.container}},{key:"getGraph",value:function(){return this.graph}},{key:"setGraph",value:function(r){r!==this.graph&&(this.hoveredNode&&!r.hasNode(this.hoveredNode)&&(this.hoveredNode=null),this.hoveredEdge&&!r.hasEdge(this.hoveredEdge)&&(this.hoveredEdge=null),this.unbindGraphHandlers(),this.checkEdgesEventsFrame!==null&&(cancelAnimationFrame(this.checkEdgesEventsFrame),this.checkEdgesEventsFrame=null),this.graph=r,this.bindGraphHandlers(),this.refresh())}},{key:"getMouseCaptor",value:function(){return this.mouseCaptor}},{key:"getTouchCaptor",value:function(){return this.touchCaptor}},{key:"getDimensions",value:function(){return{width:this.width,height:this.height}}},{key:"getGraphDimensions",value:function(){var r=this.customBBox||this.nodeExtent;return{width:r.x[1]-r.x[0]||1,height:r.y[1]-r.y[0]||1}}},{key:"getNodeDisplayData",value:function(r){var i=this.nodeDataCache[r];return i?Object.assign({},i):void 0}},{key:"getEdgeDisplayData",value:function(r){var i=this.edgeDataCache[r];return i?Object.assign({},i):void 0}},{key:"getNodeDisplayedLabels",value:function(){return new Set(this.displayedNodeLabels)}},{key:"getEdgeDisplayedLabels",value:function(){return new Set(this.displayedEdgeLabels)}},{key:"getSettings",value:function(){return xe({},this.settings)}},{key:"getSetting",value:function(r){return this.settings[r]}},{key:"setSetting",value:function(r,i){var s=xe({},this.settings);return this.settings[r]=i,yl(this.settings),this.handleSettingsUpdate(s),this.scheduleRefresh(),this}},{key:"updateSetting",value:function(r,i){return this.setSetting(r,i(this.settings[r])),this}},{key:"setSettings",value:function(r){var i=xe({},this.settings);return this.settings=xe(xe({},this.settings),r),yl(this.settings),this.handleSettingsUpdate(i),this.scheduleRefresh(),this}},{key:"resize",value:function(r){var i=this.width,s=this.height;if(this.width=this.container.offsetWidth,this.height=this.container.offsetHeight,this.pixelRatio=gf(),this.width===0)if(this.settings.allowInvalidContainer)this.width=1;else throw new Error("Sigma: Container has no width. You can set the allowInvalidContainer setting to true to stop seeing this error.");if(this.height===0)if(this.settings.allowInvalidContainer)this.height=1;else throw new Error("Sigma: Container has no height. You can set the allowInvalidContainer setting to true to stop seeing this error.");if(!r&&i===this.width&&s===this.height)return this;for(var o in this.elements){var a=this.elements[o];a.style.width=this.width+"px",a.style.height=this.height+"px"}for(var l in this.canvasContexts)this.elements[l].setAttribute("width",this.width*this.pixelRatio+"px"),this.elements[l].setAttribute("height",this.height*this.pixelRatio+"px"),this.pixelRatio!==1&&this.canvasContexts[l].scale(this.pixelRatio,this.pixelRatio);for(var c in this.webGLContexts){this.elements[c].setAttribute("width",this.width*this.pixelRatio+"px"),this.elements[c].setAttribute("height",this.height*this.pixelRatio+"px");var d=this.webGLContexts[c];if(d.viewport(0,0,this.width*this.pixelRatio,this.height*this.pixelRatio),this.pickingLayers.has(c)){var u=this.textures[c];u&&d.deleteTexture(u)}}return this.emit("resize"),this}},{key:"clear",value:function(){return this.emit("beforeClear"),this.webGLContexts.nodes.bindFramebuffer(WebGLRenderingContext.FRAMEBUFFER,null),this.webGLContexts.nodes.clear(WebGLRenderingContext.COLOR_BUFFER_BIT),this.webGLContexts.edges.bindFramebuffer(WebGLRenderingContext.FRAMEBUFFER,null),this.webGLContexts.edges.clear(WebGLRenderingContext.COLOR_BUFFER_BIT),this.webGLContexts.hoverNodes.clear(WebGLRenderingContext.COLOR_BUFFER_BIT),this.canvasContexts.labels.clearRect(0,0,this.width,this.height),this.canvasContexts.hovers.clearRect(0,0,this.width,this.height),this.canvasContexts.edgeLabels.clearRect(0,0,this.width,this.height),this.emit("afterClear"),this}},{key:"refresh",value:function(r){var i=this,s=r?.skipIndexation!==void 0?r?.skipIndexation:!1,o=r?.schedule!==void 0?r.schedule:!1,a=!r||!r.partialGraph;if(a)this.clearEdgeIndices(),this.clearNodeIndices(),this.graph.forEachNode(function(_){return i.addNode(_)}),this.graph.forEachEdge(function(_){return i.addEdge(_)});else{for(var l,c,d=((l=r.partialGraph)===null||l===void 0?void 0:l.nodes)||[],u=0,h=d?.length||0;u<h;u++){var f=d[u];if(this.updateNode(f),s){var p=this.nodeProgramIndex[f];if(p===void 0)throw new Error('Sigma: node "'.concat(f,`" can't be repaint`));this.addNodeToProgram(f,this.nodeIndices[f],p)}}for(var y=(r==null||(c=r.partialGraph)===null||c===void 0?void 0:c.edges)||[],w=0,b=y.length;w<b;w++){var E=y[w];if(this.updateEdge(E),s){var k=this.edgeProgramIndex[E];if(k===void 0)throw new Error('Sigma: edge "'.concat(E,`" can't be repaint`));this.addEdgeToProgram(E,this.edgeIndices[E],k)}}}return(a||!s)&&(this.needToProcess=!0),o?this.scheduleRender():this.render(),this}},{key:"scheduleRender",value:function(){var r=this;return this.renderFrame||(this.renderFrame=requestAnimationFrame(function(){r.render()})),this}},{key:"scheduleRefresh",value:function(r){return this.refresh(xe(xe({},r),{},{schedule:!0}))}},{key:"getViewportZoomedState",value:function(r,i){var s=this.camera.getState(),o=s.ratio,a=s.angle,l=s.x,c=s.y,d=this.settings,u=d.minCameraRatio,h=d.maxCameraRatio;typeof h=="number"&&(i=Math.min(i,h)),typeof u=="number"&&(i=Math.max(i,u));var f=i/o,p={x:this.width/2,y:this.height/2},y=this.viewportToFramedGraph(r),w=this.viewportToFramedGraph(p);return{angle:a,x:(y.x-w.x)*(1-f)+l,y:(y.y-w.y)*(1-f)+c,ratio:i}}},{key:"viewRectangle",value:function(){var r=this.viewportToFramedGraph({x:0,y:0}),i=this.viewportToFramedGraph({x:this.width,y:0}),s=this.viewportToFramedGraph({x:0,y:this.height});return{x1:r.x,y1:r.y,x2:i.x,y2:i.y,height:i.y-s.y}}},{key:"framedGraphToViewport",value:function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=!!i.cameraState||!!i.viewportDimensions||!!i.graphDimensions,o=i.matrix?i.matrix:s?Oi(i.cameraState||this.camera.getState(),i.viewportDimensions||this.getDimensions(),i.graphDimensions||this.getGraphDimensions(),i.padding||this.getStagePadding()):this.matrix,a=Cc(o,r);return{x:(1+a.x)*this.width/2,y:(1-a.y)*this.height/2}}},{key:"viewportToFramedGraph",value:function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=!!i.cameraState||!!i.viewportDimensions||!i.graphDimensions,o=i.matrix?i.matrix:s?Oi(i.cameraState||this.camera.getState(),i.viewportDimensions||this.getDimensions(),i.graphDimensions||this.getGraphDimensions(),i.padding||this.getStagePadding(),!0):this.invMatrix,a=Cc(o,{x:r.x/this.width*2-1,y:1-r.y/this.height*2});return isNaN(a.x)&&(a.x=0),isNaN(a.y)&&(a.y=0),a}},{key:"viewportToGraph",value:function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.normalizationFunction.inverse(this.viewportToFramedGraph(r,i))}},{key:"graphToViewport",value:function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.framedGraphToViewport(this.normalizationFunction(r),i)}},{key:"getGraphToViewportRatio",value:function(){var r={x:0,y:0},i={x:1,y:1},s=Math.sqrt(Math.pow(r.x-i.x,2)+Math.pow(r.y-i.y,2)),o=this.graphToViewport(r),a=this.graphToViewport(i),l=Math.sqrt(Math.pow(o.x-a.x,2)+Math.pow(o.y-a.y,2));return l/s}},{key:"getBBox",value:function(){return this.nodeExtent}},{key:"getCustomBBox",value:function(){return this.customBBox}},{key:"setCustomBBox",value:function(r){return this.customBBox=r,this.scheduleRender(),this}},{key:"kill",value:function(){this.emit("kill"),this.removeAllListeners(),this.unbindCameraHandlers(),window.removeEventListener("resize",this.activeListeners.handleResize),this.mouseCaptor.kill(),this.touchCaptor.kill(),this.unbindGraphHandlers(),this.clearIndices(),this.clearState(),this.nodeDataCache={},this.edgeDataCache={},this.highlightedNodes.clear(),this.renderFrame&&(cancelAnimationFrame(this.renderFrame),this.renderFrame=null),this.renderHighlightedNodesFrame&&(cancelAnimationFrame(this.renderHighlightedNodesFrame),this.renderHighlightedNodesFrame=null);for(var r=this.container;r.firstChild;)r.removeChild(r.firstChild);for(var i in this.nodePrograms)this.nodePrograms[i].kill();for(var s in this.nodeHoverPrograms)this.nodeHoverPrograms[s].kill();for(var o in this.edgePrograms)this.edgePrograms[o].kill();this.nodePrograms={},this.nodeHoverPrograms={},this.edgePrograms={};for(var a in this.elements)this.killLayer(a);this.canvasContexts={},this.webGLContexts={},this.elements={}}},{key:"scaleSize",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.camera.ratio;return r/this.settings.zoomToSizeRatioFunction(i)*(this.getSetting("itemSizesReference")==="positions"?i*this.graphToViewportRatio:1)}},{key:"getCanvases",value:function(){var r={};for(var i in this.elements)this.elements[i]instanceof HTMLCanvasElement&&(r[i]=this.elements[i]);return r}}])})(Ld),WL=HL,_l,Af;function Dd(){if(Af)return _l;Af=1;function t(e){if(typeof e!="function")throw new Error("obliterator/iterator: expecting a function!");this.next=e}return typeof Symbol<"u"&&(t.prototype[Symbol.iterator]=function(){return this}),t.of=function(){var e=arguments,n=e.length,r=0;return new t(function(){return r>=n?{done:!0}:{done:!1,value:e[r++]}})},t.empty=function(){var e=new t(function(){return{done:!0}});return e},t.fromSequence=function(e){var n=0,r=e.length;return new t(function(){return n>=r?{done:!0}:{done:!1,value:e[n++]}})},t.is=function(e){return e instanceof t?!0:typeof e=="object"&&e!==null&&typeof e.next=="function"},_l=t,_l}var qL=Dd();const Zt=Ps(qL);var so={},xf;function KL(){return xf||(xf=1,so.ARRAY_BUFFER_SUPPORT=typeof ArrayBuffer<"u",so.SYMBOL_SUPPORT=typeof Symbol<"u"),so}var bl,Cf;function ky(){if(Cf)return bl;Cf=1;var t=Dd(),e=KL(),n=e.ARRAY_BUFFER_SUPPORT,r=e.SYMBOL_SUPPORT;function i(s){return typeof s=="string"||Array.isArray(s)||n&&ArrayBuffer.isView(s)?t.fromSequence(s):typeof s!="object"||s===null?null:r&&typeof s[Symbol.iterator]=="function"?s[Symbol.iterator]():typeof s.next=="function"?s:null}return bl=function(o){var a=i(o);if(!a)throw new Error("obliterator: target is not iterable nor a valid iterator.");return a},bl}var wl,Sf;function XL(){if(Sf)return wl;Sf=1;var t=ky();return wl=function(n,r){for(var i=arguments.length>1?r:1/0,s=i!==1/0?new Array(i):[],o,a=0,l=t(n);;){if(a===i)return s;if(o=l.next(),o.done)return a!==r&&(s.length=a),s;s[a++]=o.value}},wl}var ZL=XL();const Ay=Ps(ZL);var El,Tf;function YL(){if(Tf)return El;Tf=1;var t=Dd(),e=ky();return El=function(){var r=arguments,i=null,s=-1;return new t(function(){var a=null;do{if(i===null){if(s++,s>=r.length)return{done:!0};i=e(r[s])}if(a=i.next(),a.done===!0){i=null;continue}break}while(!0);return a})},El}var JL=YL();const Wn=Ps(JL);function QL(){const t=arguments[0];for(let e=1,n=arguments.length;e<n;e++)if(arguments[e])for(const r in arguments[e])t[r]=arguments[e][r];return t}let at=QL;typeof Object.assign=="function"&&(at=Object.assign);function Kt(t,e,n,r){const i=t._nodes.get(e);let s=null;return i&&(r==="mixed"?s=i.out&&i.out[n]||i.undirected&&i.undirected[n]:r==="directed"?s=i.out&&i.out[n]:s=i.undirected&&i.undirected[n]),s}function ft(t){return typeof t=="object"&&t!==null}function xy(t){let e;for(e in t)return!1;return!0}function jt(t,e,n){Object.defineProperty(t,e,{enumerable:!1,configurable:!1,writable:!0,value:n})}function en(t,e,n){const r={enumerable:!0,configurable:!0};typeof n=="function"?r.get=n:(r.value=n,r.writable=!1),Object.defineProperty(t,e,r)}function Nf(t){return!(!ft(t)||t.attributes&&!Array.isArray(t.attributes))}function eI(){let t=Math.floor(Math.random()*256)&255;return()=>t++}class Pd extends Error{constructor(e){super(),this.name="GraphError",this.message=e}}class we extends Pd{constructor(e){super(e),this.name="InvalidArgumentsGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,we.prototype.constructor)}}class ge extends Pd{constructor(e){super(e),this.name="NotFoundGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,ge.prototype.constructor)}}class Te extends Pd{constructor(e){super(e),this.name="UsageGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,Te.prototype.constructor)}}function Cy(t,e){this.key=t,this.attributes=e,this.clear()}Cy.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.undirectedDegree=0,this.undirectedLoops=0,this.directedLoops=0,this.in={},this.out={},this.undirected={}};function Sy(t,e){this.key=t,this.attributes=e,this.clear()}Sy.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.directedLoops=0,this.in={},this.out={}};function Ty(t,e){this.key=t,this.attributes=e,this.clear()}Ty.prototype.clear=function(){this.undirectedDegree=0,this.undirectedLoops=0,this.undirected={}};function Ci(t,e,n,r,i){this.key=e,this.attributes=i,this.undirected=t,this.source=n,this.target=r}Ci.prototype.attach=function(){let t="out",e="in";this.undirected&&(t=e="undirected");const n=this.source.key,r=this.target.key;this.source[t][r]=this,!(this.undirected&&n===r)&&(this.target[e][n]=this)};Ci.prototype.attachMulti=function(){let t="out",e="in";const n=this.source.key,r=this.target.key;this.undirected&&(t=e="undirected");const i=this.source[t],s=i[r];if(typeof s>"u"){i[r]=this,this.undirected&&n===r||(this.target[e][n]=this);return}s.previous=this,this.next=s,i[r]=this,this.target[e][n]=this};Ci.prototype.detach=function(){const t=this.source.key,e=this.target.key;let n="out",r="in";this.undirected&&(n=r="undirected"),delete this.source[n][e],delete this.target[r][t]};Ci.prototype.detachMulti=function(){const t=this.source.key,e=this.target.key;let n="out",r="in";this.undirected&&(n=r="undirected"),this.previous===void 0?this.next===void 0?(delete this.source[n][e],delete this.target[r][t]):(this.next.previous=void 0,this.source[n][e]=this.next,this.target[r][t]=this.next):(this.previous.next=this.next,this.next!==void 0&&(this.next.previous=this.previous))};const Ny=0,Ry=1,tI=2,Ly=3;function Qn(t,e,n,r,i,s,o){let a,l,c,d;if(r=""+r,n===Ny){if(a=t._nodes.get(r),!a)throw new ge(`Graph.${e}: could not find the "${r}" node in the graph.`);c=i,d=s}else if(n===Ly){if(i=""+i,l=t._edges.get(i),!l)throw new ge(`Graph.${e}: could not find the "${i}" edge in the graph.`);const u=l.source.key,h=l.target.key;if(r===u)a=l.target;else if(r===h)a=l.source;else throw new ge(`Graph.${e}: the "${r}" node is not attached to the "${i}" edge (${u}, ${h}).`);c=s,d=o}else{if(l=t._edges.get(r),!l)throw new ge(`Graph.${e}: could not find the "${r}" edge in the graph.`);n===Ry?a=l.source:a=l.target,c=i,d=s}return[a,c,d]}function nI(t,e,n){t.prototype[e]=function(r,i,s){const[o,a]=Qn(this,e,n,r,i,s);return o.attributes[a]}}function rI(t,e,n){t.prototype[e]=function(r,i){const[s]=Qn(this,e,n,r,i);return s.attributes}}function iI(t,e,n){t.prototype[e]=function(r,i,s){const[o,a]=Qn(this,e,n,r,i,s);return o.attributes.hasOwnProperty(a)}}function sI(t,e,n){t.prototype[e]=function(r,i,s,o){const[a,l,c]=Qn(this,e,n,r,i,s,o);return a.attributes[l]=c,this.emit("nodeAttributesUpdated",{key:a.key,type:"set",attributes:a.attributes,name:l}),this}}function oI(t,e,n){t.prototype[e]=function(r,i,s,o){const[a,l,c]=Qn(this,e,n,r,i,s,o);if(typeof c!="function")throw new we(`Graph.${e}: updater should be a function.`);const d=a.attributes,u=c(d[l]);return d[l]=u,this.emit("nodeAttributesUpdated",{key:a.key,type:"set",attributes:a.attributes,name:l}),this}}function aI(t,e,n){t.prototype[e]=function(r,i,s){const[o,a]=Qn(this,e,n,r,i,s);return delete o.attributes[a],this.emit("nodeAttributesUpdated",{key:o.key,type:"remove",attributes:o.attributes,name:a}),this}}function lI(t,e,n){t.prototype[e]=function(r,i,s){const[o,a]=Qn(this,e,n,r,i,s);if(!ft(a))throw new we(`Graph.${e}: provided attributes are not a plain object.`);return o.attributes=a,this.emit("nodeAttributesUpdated",{key:o.key,type:"replace",attributes:o.attributes}),this}}function cI(t,e,n){t.prototype[e]=function(r,i,s){const[o,a]=Qn(this,e,n,r,i,s);if(!ft(a))throw new we(`Graph.${e}: provided attributes are not a plain object.`);return at(o.attributes,a),this.emit("nodeAttributesUpdated",{key:o.key,type:"merge",attributes:o.attributes,data:a}),this}}function dI(t,e,n){t.prototype[e]=function(r,i,s){const[o,a]=Qn(this,e,n,r,i,s);if(typeof a!="function")throw new we(`Graph.${e}: provided updater is not a function.`);return o.attributes=a(o.attributes),this.emit("nodeAttributesUpdated",{key:o.key,type:"update",attributes:o.attributes}),this}}const uI=[{name:t=>`get${t}Attribute`,attacher:nI},{name:t=>`get${t}Attributes`,attacher:rI},{name:t=>`has${t}Attribute`,attacher:iI},{name:t=>`set${t}Attribute`,attacher:sI},{name:t=>`update${t}Attribute`,attacher:oI},{name:t=>`remove${t}Attribute`,attacher:aI},{name:t=>`replace${t}Attributes`,attacher:lI},{name:t=>`merge${t}Attributes`,attacher:cI},{name:t=>`update${t}Attributes`,attacher:dI}];function hI(t){uI.forEach(function({name:e,attacher:n}){n(t,e("Node"),Ny),n(t,e("Source"),Ry),n(t,e("Target"),tI),n(t,e("Opposite"),Ly)})}function fI(t,e,n){t.prototype[e]=function(r,i){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Te(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Te(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+r,a=""+i;if(i=arguments[2],s=Kt(this,o,a,n),!s)throw new ge(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new Te(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,s=this._edges.get(r),!s)throw new ge(`Graph.${e}: could not find the "${r}" edge in the graph.`)}return s.attributes[i]}}function gI(t,e,n){t.prototype[e]=function(r){let i;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Te(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>1){if(this.multi)throw new Te(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+r,o=""+arguments[1];if(i=Kt(this,s,o,n),!i)throw new ge(`Graph.${e}: could not find an edge for the given path ("${s}" - "${o}").`)}else{if(n!=="mixed")throw new Te(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,i=this._edges.get(r),!i)throw new ge(`Graph.${e}: could not find the "${r}" edge in the graph.`)}return i.attributes}}function pI(t,e,n){t.prototype[e]=function(r,i){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Te(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Te(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+r,a=""+i;if(i=arguments[2],s=Kt(this,o,a,n),!s)throw new ge(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new Te(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,s=this._edges.get(r),!s)throw new ge(`Graph.${e}: could not find the "${r}" edge in the graph.`)}return s.attributes.hasOwnProperty(i)}}function mI(t,e,n){t.prototype[e]=function(r,i,s){let o;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Te(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new Te(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+r,l=""+i;if(i=arguments[2],s=arguments[3],o=Kt(this,a,l,n),!o)throw new ge(`Graph.${e}: could not find an edge for the given path ("${a}" - "${l}").`)}else{if(n!=="mixed")throw new Te(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,o=this._edges.get(r),!o)throw new ge(`Graph.${e}: could not find the "${r}" edge in the graph.`)}return o.attributes[i]=s,this.emit("edgeAttributesUpdated",{key:o.key,type:"set",attributes:o.attributes,name:i}),this}}function yI(t,e,n){t.prototype[e]=function(r,i,s){let o;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Te(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new Te(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+r,l=""+i;if(i=arguments[2],s=arguments[3],o=Kt(this,a,l,n),!o)throw new ge(`Graph.${e}: could not find an edge for the given path ("${a}" - "${l}").`)}else{if(n!=="mixed")throw new Te(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,o=this._edges.get(r),!o)throw new ge(`Graph.${e}: could not find the "${r}" edge in the graph.`)}if(typeof s!="function")throw new we(`Graph.${e}: updater should be a function.`);return o.attributes[i]=s(o.attributes[i]),this.emit("edgeAttributesUpdated",{key:o.key,type:"set",attributes:o.attributes,name:i}),this}}function vI(t,e,n){t.prototype[e]=function(r,i){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Te(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Te(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+r,a=""+i;if(i=arguments[2],s=Kt(this,o,a,n),!s)throw new ge(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new Te(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,s=this._edges.get(r),!s)throw new ge(`Graph.${e}: could not find the "${r}" edge in the graph.`)}return delete s.attributes[i],this.emit("edgeAttributesUpdated",{key:s.key,type:"remove",attributes:s.attributes,name:i}),this}}function _I(t,e,n){t.prototype[e]=function(r,i){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Te(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Te(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+r,a=""+i;if(i=arguments[2],s=Kt(this,o,a,n),!s)throw new ge(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new Te(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,s=this._edges.get(r),!s)throw new ge(`Graph.${e}: could not find the "${r}" edge in the graph.`)}if(!ft(i))throw new we(`Graph.${e}: provided attributes are not a plain object.`);return s.attributes=i,this.emit("edgeAttributesUpdated",{key:s.key,type:"replace",attributes:s.attributes}),this}}function bI(t,e,n){t.prototype[e]=function(r,i){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Te(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Te(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+r,a=""+i;if(i=arguments[2],s=Kt(this,o,a,n),!s)throw new ge(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new Te(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,s=this._edges.get(r),!s)throw new ge(`Graph.${e}: could not find the "${r}" edge in the graph.`)}if(!ft(i))throw new we(`Graph.${e}: provided attributes are not a plain object.`);return at(s.attributes,i),this.emit("edgeAttributesUpdated",{key:s.key,type:"merge",attributes:s.attributes,data:i}),this}}function wI(t,e,n){t.prototype[e]=function(r,i){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Te(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Te(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+r,a=""+i;if(i=arguments[2],s=Kt(this,o,a,n),!s)throw new ge(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new Te(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,s=this._edges.get(r),!s)throw new ge(`Graph.${e}: could not find the "${r}" edge in the graph.`)}if(typeof i!="function")throw new we(`Graph.${e}: provided updater is not a function.`);return s.attributes=i(s.attributes),this.emit("edgeAttributesUpdated",{key:s.key,type:"update",attributes:s.attributes}),this}}const EI=[{name:t=>`get${t}Attribute`,attacher:fI},{name:t=>`get${t}Attributes`,attacher:gI},{name:t=>`has${t}Attribute`,attacher:pI},{name:t=>`set${t}Attribute`,attacher:mI},{name:t=>`update${t}Attribute`,attacher:yI},{name:t=>`remove${t}Attribute`,attacher:vI},{name:t=>`replace${t}Attributes`,attacher:_I},{name:t=>`merge${t}Attributes`,attacher:bI},{name:t=>`update${t}Attributes`,attacher:wI}];function kI(t){EI.forEach(function({name:e,attacher:n}){n(t,e("Edge"),"mixed"),n(t,e("DirectedEdge"),"directed"),n(t,e("UndirectedEdge"),"undirected")})}const AI=[{name:"edges",type:"mixed"},{name:"inEdges",type:"directed",direction:"in"},{name:"outEdges",type:"directed",direction:"out"},{name:"inboundEdges",type:"mixed",direction:"in"},{name:"outboundEdges",type:"mixed",direction:"out"},{name:"directedEdges",type:"directed"},{name:"undirectedEdges",type:"undirected"}];function xI(t,e,n,r){let i=!1;for(const s in e){if(s===r)continue;const o=e[s];if(i=n(o.key,o.attributes,o.source.key,o.target.key,o.source.attributes,o.target.attributes,o.undirected),t&&i)return o.key}}function CI(t,e,n,r){let i,s,o,a=!1;for(const l in e)if(l!==r){i=e[l];do{if(s=i.source,o=i.target,a=n(i.key,i.attributes,s.key,o.key,s.attributes,o.attributes,i.undirected),t&&a)return i.key;i=i.next}while(i!==void 0)}}function kl(t,e){const n=Object.keys(t),r=n.length;let i,s=0;return new Zt(function(){do if(i)i=i.next;else{if(s>=r)return{done:!0};const a=n[s++];if(a===e){i=void 0;continue}i=t[a]}while(!i);return{done:!1,value:{edge:i.key,attributes:i.attributes,source:i.source.key,target:i.target.key,sourceAttributes:i.source.attributes,targetAttributes:i.target.attributes,undirected:i.undirected}}})}function SI(t,e,n,r){const i=e[n];if(!i)return;const s=i.source,o=i.target;if(r(i.key,i.attributes,s.key,o.key,s.attributes,o.attributes,i.undirected)&&t)return i.key}function TI(t,e,n,r){let i=e[n];if(!i)return;let s=!1;do{if(s=r(i.key,i.attributes,i.source.key,i.target.key,i.source.attributes,i.target.attributes,i.undirected),t&&s)return i.key;i=i.next}while(i!==void 0)}function Al(t,e){let n=t[e];return n.next!==void 0?new Zt(function(){if(!n)return{done:!0};const r={edge:n.key,attributes:n.attributes,source:n.source.key,target:n.target.key,sourceAttributes:n.source.attributes,targetAttributes:n.target.attributes,undirected:n.undirected};return n=n.next,{done:!1,value:r}}):Zt.of({edge:n.key,attributes:n.attributes,source:n.source.key,target:n.target.key,sourceAttributes:n.source.attributes,targetAttributes:n.target.attributes,undirected:n.undirected})}function NI(t,e){if(t.size===0)return[];if(e==="mixed"||e===t.type)return typeof Array.from=="function"?Array.from(t._edges.keys()):Ay(t._edges.keys(),t._edges.size);const n=e==="undirected"?t.undirectedSize:t.directedSize,r=new Array(n),i=e==="undirected",s=t._edges.values();let o=0,a,l;for(;a=s.next(),a.done!==!0;)l=a.value,l.undirected===i&&(r[o++]=l.key);return r}function Iy(t,e,n,r){if(e.size===0)return;const i=n!=="mixed"&&n!==e.type,s=n==="undirected";let o,a,l=!1;const c=e._edges.values();for(;o=c.next(),o.done!==!0;){if(a=o.value,i&&a.undirected!==s)continue;const{key:d,attributes:u,source:h,target:f}=a;if(l=r(d,u,h.key,f.key,h.attributes,f.attributes,a.undirected),t&&l)return d}}function RI(t,e){if(t.size===0)return Zt.empty();const n=e!=="mixed"&&e!==t.type,r=e==="undirected",i=t._edges.values();return new Zt(function(){let o,a;for(;;){if(o=i.next(),o.done)return o;if(a=o.value,!(n&&a.undirected!==r))break}return{value:{edge:a.key,attributes:a.attributes,source:a.source.key,target:a.target.key,sourceAttributes:a.source.attributes,targetAttributes:a.target.attributes,undirected:a.undirected},done:!1}})}function Gd(t,e,n,r,i,s){const o=e?CI:xI;let a;if(n!=="undirected"&&(r!=="out"&&(a=o(t,i.in,s),t&&a)||r!=="in"&&(a=o(t,i.out,s,r?void 0:i.key),t&&a))||n!=="directed"&&(a=o(t,i.undirected,s),t&&a))return a}function LI(t,e,n,r){const i=[];return Gd(!1,t,e,n,r,function(s){i.push(s)}),i}function II(t,e,n){let r=Zt.empty();return t!=="undirected"&&(e!=="out"&&typeof n.in<"u"&&(r=Wn(r,kl(n.in))),e!=="in"&&typeof n.out<"u"&&(r=Wn(r,kl(n.out,e?void 0:n.key)))),t!=="directed"&&typeof n.undirected<"u"&&(r=Wn(r,kl(n.undirected))),r}function Md(t,e,n,r,i,s,o){const a=n?TI:SI;let l;if(e!=="undirected"&&(typeof i.in<"u"&&r!=="out"&&(l=a(t,i.in,s,o),t&&l)||typeof i.out<"u"&&r!=="in"&&(r||i.key!==s)&&(l=a(t,i.out,s,o),t&&l))||e!=="directed"&&typeof i.undirected<"u"&&(l=a(t,i.undirected,s,o),t&&l))return l}function DI(t,e,n,r,i){const s=[];return Md(!1,t,e,n,r,i,function(o){s.push(o)}),s}function PI(t,e,n,r){let i=Zt.empty();return t!=="undirected"&&(typeof n.in<"u"&&e!=="out"&&r in n.in&&(i=Wn(i,Al(n.in,r))),typeof n.out<"u"&&e!=="in"&&r in n.out&&(e||n.key!==r)&&(i=Wn(i,Al(n.out,r)))),t!=="directed"&&typeof n.undirected<"u"&&r in n.undirected&&(i=Wn(i,Al(n.undirected,r))),i}function GI(t,e){const{name:n,type:r,direction:i}=e;t.prototype[n]=function(s,o){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return[];if(!arguments.length)return NI(this,r);if(arguments.length===1){s=""+s;const a=this._nodes.get(s);if(typeof a>"u")throw new ge(`Graph.${n}: could not find the "${s}" node in the graph.`);return LI(this.multi,r==="mixed"?this.type:r,i,a)}if(arguments.length===2){s=""+s,o=""+o;const a=this._nodes.get(s);if(!a)throw new ge(`Graph.${n}:  could not find the "${s}" source node in the graph.`);if(!this._nodes.has(o))throw new ge(`Graph.${n}:  could not find the "${o}" target node in the graph.`);return DI(r,this.multi,i,a,o)}throw new we(`Graph.${n}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function MI(t,e){const{name:n,type:r,direction:i}=e,s="forEach"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[s]=function(c,d,u){if(!(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)){if(arguments.length===1)return u=c,Iy(!1,this,r,u);if(arguments.length===2){c=""+c,u=d;const h=this._nodes.get(c);if(typeof h>"u")throw new ge(`Graph.${s}: could not find the "${c}" node in the graph.`);return Gd(!1,this.multi,r==="mixed"?this.type:r,i,h,u)}if(arguments.length===3){c=""+c,d=""+d;const h=this._nodes.get(c);if(!h)throw new ge(`Graph.${s}:  could not find the "${c}" source node in the graph.`);if(!this._nodes.has(d))throw new ge(`Graph.${s}:  could not find the "${d}" target node in the graph.`);return Md(!1,r,this.multi,i,h,d,u)}throw new we(`Graph.${s}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)}};const o="map"+n[0].toUpperCase()+n.slice(1);t.prototype[o]=function(){const c=Array.prototype.slice.call(arguments),d=c.pop();let u;if(c.length===0){let h=0;r!=="directed"&&(h+=this.undirectedSize),r!=="undirected"&&(h+=this.directedSize),u=new Array(h);let f=0;c.push((p,y,w,b,E,k,_)=>{u[f++]=d(p,y,w,b,E,k,_)})}else u=[],c.push((h,f,p,y,w,b,E)=>{u.push(d(h,f,p,y,w,b,E))});return this[s].apply(this,c),u};const a="filter"+n[0].toUpperCase()+n.slice(1);t.prototype[a]=function(){const c=Array.prototype.slice.call(arguments),d=c.pop(),u=[];return c.push((h,f,p,y,w,b,E)=>{d(h,f,p,y,w,b,E)&&u.push(h)}),this[s].apply(this,c),u};const l="reduce"+n[0].toUpperCase()+n.slice(1);t.prototype[l]=function(){let c=Array.prototype.slice.call(arguments);if(c.length<2||c.length>4)throw new we(`Graph.${l}: invalid number of arguments (expecting 2, 3 or 4 and got ${c.length}).`);if(typeof c[c.length-1]=="function"&&typeof c[c.length-2]!="function")throw new we(`Graph.${l}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let d,u;c.length===2?(d=c[0],u=c[1],c=[]):c.length===3?(d=c[1],u=c[2],c=[c[0]]):c.length===4&&(d=c[2],u=c[3],c=[c[0],c[1]]);let h=u;return c.push((f,p,y,w,b,E,k)=>{h=d(h,f,p,y,w,b,E,k)}),this[s].apply(this,c),h}}function OI(t,e){const{name:n,type:r,direction:i}=e,s="find"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[s]=function(l,c,d){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return!1;if(arguments.length===1)return d=l,Iy(!0,this,r,d);if(arguments.length===2){l=""+l,d=c;const u=this._nodes.get(l);if(typeof u>"u")throw new ge(`Graph.${s}: could not find the "${l}" node in the graph.`);return Gd(!0,this.multi,r==="mixed"?this.type:r,i,u,d)}if(arguments.length===3){l=""+l,c=""+c;const u=this._nodes.get(l);if(!u)throw new ge(`Graph.${s}:  could not find the "${l}" source node in the graph.`);if(!this._nodes.has(c))throw new ge(`Graph.${s}:  could not find the "${c}" target node in the graph.`);return Md(!0,r,this.multi,i,u,c,d)}throw new we(`Graph.${s}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)};const o="some"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[o]=function(){const l=Array.prototype.slice.call(arguments),c=l.pop();return l.push((u,h,f,p,y,w,b)=>c(u,h,f,p,y,w,b)),!!this[s].apply(this,l)};const a="every"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[a]=function(){const l=Array.prototype.slice.call(arguments),c=l.pop();return l.push((u,h,f,p,y,w,b)=>!c(u,h,f,p,y,w,b)),!this[s].apply(this,l)}}function FI(t,e){const{name:n,type:r,direction:i}=e,s=n.slice(0,-1)+"Entries";t.prototype[s]=function(o,a){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return Zt.empty();if(!arguments.length)return RI(this,r);if(arguments.length===1){o=""+o;const l=this._nodes.get(o);if(!l)throw new ge(`Graph.${s}: could not find the "${o}" node in the graph.`);return II(r,i,l)}if(arguments.length===2){o=""+o,a=""+a;const l=this._nodes.get(o);if(!l)throw new ge(`Graph.${s}:  could not find the "${o}" source node in the graph.`);if(!this._nodes.has(a))throw new ge(`Graph.${s}:  could not find the "${a}" target node in the graph.`);return PI(r,i,l,a)}throw new we(`Graph.${s}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function $I(t){AI.forEach(e=>{GI(t,e),MI(t,e),OI(t,e),FI(t,e)})}const zI=[{name:"neighbors",type:"mixed"},{name:"inNeighbors",type:"directed",direction:"in"},{name:"outNeighbors",type:"directed",direction:"out"},{name:"inboundNeighbors",type:"mixed",direction:"in"},{name:"outboundNeighbors",type:"mixed",direction:"out"},{name:"directedNeighbors",type:"directed"},{name:"undirectedNeighbors",type:"undirected"}];function Ra(){this.A=null,this.B=null}Ra.prototype.wrap=function(t){this.A===null?this.A=t:this.B===null&&(this.B=t)};Ra.prototype.has=function(t){return this.A!==null&&t in this.A||this.B!==null&&t in this.B};function zi(t,e,n,r,i){for(const s in r){const o=r[s],a=o.source,l=o.target,c=a===n?l:a;if(e&&e.has(c.key))continue;const d=i(c.key,c.attributes);if(t&&d)return c.key}}function Od(t,e,n,r,i){if(e!=="mixed"){if(e==="undirected")return zi(t,null,r,r.undirected,i);if(typeof n=="string")return zi(t,null,r,r[n],i)}const s=new Ra;let o;if(e!=="undirected"){if(n!=="out"){if(o=zi(t,null,r,r.in,i),t&&o)return o;s.wrap(r.in)}if(n!=="in"){if(o=zi(t,s,r,r.out,i),t&&o)return o;s.wrap(r.out)}}if(e!=="directed"&&(o=zi(t,s,r,r.undirected,i),t&&o))return o}function BI(t,e,n){if(t!=="mixed"){if(t==="undirected")return Object.keys(n.undirected);if(typeof e=="string")return Object.keys(n[e])}const r=[];return Od(!1,t,e,n,function(i){r.push(i)}),r}function Bi(t,e,n){const r=Object.keys(n),i=r.length;let s=0;return new Zt(function(){let a=null;do{if(s>=i)return t&&t.wrap(n),{done:!0};const l=n[r[s++]],c=l.source,d=l.target;if(a=c===e?d:c,t&&t.has(a.key)){a=null;continue}}while(a===null);return{done:!1,value:{neighbor:a.key,attributes:a.attributes}}})}function VI(t,e,n){if(t!=="mixed"){if(t==="undirected")return Bi(null,n,n.undirected);if(typeof e=="string")return Bi(null,n,n[e])}let r=Zt.empty();const i=new Ra;return t!=="undirected"&&(e!=="out"&&(r=Wn(r,Bi(i,n,n.in))),e!=="in"&&(r=Wn(r,Bi(i,n,n.out)))),t!=="directed"&&(r=Wn(r,Bi(i,n,n.undirected))),r}function UI(t,e){const{name:n,type:r,direction:i}=e;t.prototype[n]=function(s){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return[];s=""+s;const o=this._nodes.get(s);if(typeof o>"u")throw new ge(`Graph.${n}: could not find the "${s}" node in the graph.`);return BI(r==="mixed"?this.type:r,i,o)}}function jI(t,e){const{name:n,type:r,direction:i}=e,s="forEach"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[s]=function(c,d){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return;c=""+c;const u=this._nodes.get(c);if(typeof u>"u")throw new ge(`Graph.${s}: could not find the "${c}" node in the graph.`);Od(!1,r==="mixed"?this.type:r,i,u,d)};const o="map"+n[0].toUpperCase()+n.slice(1);t.prototype[o]=function(c,d){const u=[];return this[s](c,(h,f)=>{u.push(d(h,f))}),u};const a="filter"+n[0].toUpperCase()+n.slice(1);t.prototype[a]=function(c,d){const u=[];return this[s](c,(h,f)=>{d(h,f)&&u.push(h)}),u};const l="reduce"+n[0].toUpperCase()+n.slice(1);t.prototype[l]=function(c,d,u){if(arguments.length<3)throw new we(`Graph.${l}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let h=u;return this[s](c,(f,p)=>{h=d(h,f,p)}),h}}function HI(t,e){const{name:n,type:r,direction:i}=e,s=n[0].toUpperCase()+n.slice(1,-1),o="find"+s;t.prototype[o]=function(c,d){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return;c=""+c;const u=this._nodes.get(c);if(typeof u>"u")throw new ge(`Graph.${o}: could not find the "${c}" node in the graph.`);return Od(!0,r==="mixed"?this.type:r,i,u,d)};const a="some"+s;t.prototype[a]=function(c,d){return!!this[o](c,d)};const l="every"+s;t.prototype[l]=function(c,d){return!this[o](c,(h,f)=>!d(h,f))}}function WI(t,e){const{name:n,type:r,direction:i}=e,s=n.slice(0,-1)+"Entries";t.prototype[s]=function(o){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return Zt.empty();o=""+o;const a=this._nodes.get(o);if(typeof a>"u")throw new ge(`Graph.${s}: could not find the "${o}" node in the graph.`);return VI(r==="mixed"?this.type:r,i,a)}}function qI(t){zI.forEach(e=>{UI(t,e),jI(t,e),HI(t,e),WI(t,e)})}function oo(t,e,n,r,i){const s=r._nodes.values(),o=r.type;let a,l,c,d,u,h;for(;a=s.next(),a.done!==!0;){let f=!1;if(l=a.value,o!=="undirected"){d=l.out;for(c in d){u=d[c];do h=u.target,f=!0,i(l.key,h.key,l.attributes,h.attributes,u.key,u.attributes,u.undirected),u=u.next;while(u)}}if(o!=="directed"){d=l.undirected;for(c in d)if(!(e&&l.key>c)){u=d[c];do h=u.target,h.key!==c&&(h=u.source),f=!0,i(l.key,h.key,l.attributes,h.attributes,u.key,u.attributes,u.undirected),u=u.next;while(u)}}n&&!f&&i(l.key,null,l.attributes,null,null,null,null)}}function KI(t,e){const n={key:t};return xy(e.attributes)||(n.attributes=at({},e.attributes)),n}function XI(t,e,n){const r={key:e,source:n.source.key,target:n.target.key};return xy(n.attributes)||(r.attributes=at({},n.attributes)),t==="mixed"&&n.undirected&&(r.undirected=!0),r}function ZI(t){if(!ft(t))throw new we('Graph.import: invalid serialized node. A serialized node should be a plain object with at least a "key" property.');if(!("key"in t))throw new we("Graph.import: serialized node is missing its key.");if("attributes"in t&&(!ft(t.attributes)||t.attributes===null))throw new we("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.")}function YI(t){if(!ft(t))throw new we('Graph.import: invalid serialized edge. A serialized edge should be a plain object with at least a "source" & "target" property.');if(!("source"in t))throw new we("Graph.import: serialized edge is missing its source.");if(!("target"in t))throw new we("Graph.import: serialized edge is missing its target.");if("attributes"in t&&(!ft(t.attributes)||t.attributes===null))throw new we("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.");if("undirected"in t&&typeof t.undirected!="boolean")throw new we("Graph.import: invalid undirectedness information. Undirected should be boolean or omitted.")}const JI=eI(),QI=new Set(["directed","undirected","mixed"]),Rf=new Set(["domain","_events","_eventsCount","_maxListeners"]),e2=[{name:t=>`${t}Edge`,generateKey:!0},{name:t=>`${t}DirectedEdge`,generateKey:!0,type:"directed"},{name:t=>`${t}UndirectedEdge`,generateKey:!0,type:"undirected"},{name:t=>`${t}EdgeWithKey`},{name:t=>`${t}DirectedEdgeWithKey`,type:"directed"},{name:t=>`${t}UndirectedEdgeWithKey`,type:"undirected"}],t2={allowSelfLoops:!0,multi:!1,type:"mixed"};function n2(t,e,n){if(n&&!ft(n))throw new we(`Graph.addNode: invalid attributes. Expecting an object but got "${n}"`);if(e=""+e,n=n||{},t._nodes.has(e))throw new Te(`Graph.addNode: the "${e}" node already exist in the graph.`);const r=new t.NodeDataClass(e,n);return t._nodes.set(e,r),t.emit("nodeAdded",{key:e,attributes:n}),r}function Lf(t,e,n){const r=new t.NodeDataClass(e,n);return t._nodes.set(e,r),t.emit("nodeAdded",{key:e,attributes:n}),r}function Dy(t,e,n,r,i,s,o,a){if(!r&&t.type==="undirected")throw new Te(`Graph.${e}: you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead.`);if(r&&t.type==="directed")throw new Te(`Graph.${e}: you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead.`);if(a&&!ft(a))throw new we(`Graph.${e}: invalid attributes. Expecting an object but got "${a}"`);if(s=""+s,o=""+o,a=a||{},!t.allowSelfLoops&&s===o)throw new Te(`Graph.${e}: source & target are the same ("${s}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);const l=t._nodes.get(s),c=t._nodes.get(o);if(!l)throw new ge(`Graph.${e}: source node "${s}" not found.`);if(!c)throw new ge(`Graph.${e}: target node "${o}" not found.`);const d={key:null,undirected:r,source:s,target:o,attributes:a};if(n)i=t._edgeKeyGenerator();else if(i=""+i,t._edges.has(i))throw new Te(`Graph.${e}: the "${i}" edge already exists in the graph.`);if(!t.multi&&(r?typeof l.undirected[o]<"u":typeof l.out[o]<"u"))throw new Te(`Graph.${e}: an edge linking "${s}" to "${o}" already exists. If you really want to add multiple edges linking those nodes, you should create a multi graph by using the 'multi' option.`);const u=new Ci(r,i,l,c,a);t._edges.set(i,u);const h=s===o;return r?(l.undirectedDegree++,c.undirectedDegree++,h&&(l.undirectedLoops++,t._undirectedSelfLoopCount++)):(l.outDegree++,c.inDegree++,h&&(l.directedLoops++,t._directedSelfLoopCount++)),t.multi?u.attachMulti():u.attach(),r?t._undirectedSize++:t._directedSize++,d.key=i,t.emit("edgeAdded",d),i}function r2(t,e,n,r,i,s,o,a,l){if(!r&&t.type==="undirected")throw new Te(`Graph.${e}: you cannot merge/update a directed edge to an undirected graph. Use the #.mergeEdge/#.updateEdge or #.addUndirectedEdge instead.`);if(r&&t.type==="directed")throw new Te(`Graph.${e}: you cannot merge/update an undirected edge to a directed graph. Use the #.mergeEdge/#.updateEdge or #.addDirectedEdge instead.`);if(a){if(l){if(typeof a!="function")throw new we(`Graph.${e}: invalid updater function. Expecting a function but got "${a}"`)}else if(!ft(a))throw new we(`Graph.${e}: invalid attributes. Expecting an object but got "${a}"`)}s=""+s,o=""+o;let c;if(l&&(c=a,a=void 0),!t.allowSelfLoops&&s===o)throw new Te(`Graph.${e}: source & target are the same ("${s}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);let d=t._nodes.get(s),u=t._nodes.get(o),h,f;if(!n&&(h=t._edges.get(i),h)){if((h.source.key!==s||h.target.key!==o)&&(!r||h.source.key!==o||h.target.key!==s))throw new Te(`Graph.${e}: inconsistency detected when attempting to merge the "${i}" edge with "${s}" source & "${o}" target vs. ("${h.source.key}", "${h.target.key}").`);f=h}if(!f&&!t.multi&&d&&(f=r?d.undirected[o]:d.out[o]),f){const E=[f.key,!1,!1,!1];if(l?!c:!a)return E;if(l){const k=f.attributes;f.attributes=c(k),t.emit("edgeAttributesUpdated",{type:"replace",key:f.key,attributes:f.attributes})}else at(f.attributes,a),t.emit("edgeAttributesUpdated",{type:"merge",key:f.key,attributes:f.attributes,data:a});return E}a=a||{},l&&c&&(a=c(a));const p={key:null,undirected:r,source:s,target:o,attributes:a};if(n)i=t._edgeKeyGenerator();else if(i=""+i,t._edges.has(i))throw new Te(`Graph.${e}: the "${i}" edge already exists in the graph.`);let y=!1,w=!1;d||(d=Lf(t,s,{}),y=!0,s===o&&(u=d,w=!0)),u||(u=Lf(t,o,{}),w=!0),h=new Ci(r,i,d,u,a),t._edges.set(i,h);const b=s===o;return r?(d.undirectedDegree++,u.undirectedDegree++,b&&(d.undirectedLoops++,t._undirectedSelfLoopCount++)):(d.outDegree++,u.inDegree++,b&&(d.directedLoops++,t._directedSelfLoopCount++)),t.multi?h.attachMulti():h.attach(),r?t._undirectedSize++:t._directedSize++,p.key=i,t.emit("edgeAdded",p),[i,!0,y,w]}function jr(t,e){t._edges.delete(e.key);const{source:n,target:r,attributes:i}=e,s=e.undirected,o=n===r;s?(n.undirectedDegree--,r.undirectedDegree--,o&&(n.undirectedLoops--,t._undirectedSelfLoopCount--)):(n.outDegree--,r.inDegree--,o&&(n.directedLoops--,t._directedSelfLoopCount--)),t.multi?e.detachMulti():e.detach(),s?t._undirectedSize--:t._directedSize--,t.emit("edgeDropped",{key:e.key,attributes:i,source:n.key,target:r.key,undirected:s})}class Ve extends _y.EventEmitter{constructor(e){if(super(),e=at({},t2,e),typeof e.multi!="boolean")throw new we(`Graph.constructor: invalid 'multi' option. Expecting a boolean but got "${e.multi}".`);if(!QI.has(e.type))throw new we(`Graph.constructor: invalid 'type' option. Should be one of "mixed", "directed" or "undirected" but got "${e.type}".`);if(typeof e.allowSelfLoops!="boolean")throw new we(`Graph.constructor: invalid 'allowSelfLoops' option. Expecting a boolean but got "${e.allowSelfLoops}".`);const n=e.type==="mixed"?Cy:e.type==="directed"?Sy:Ty;jt(this,"NodeDataClass",n);const r="geid_"+JI()+"_";let i=0;const s=()=>{let o;do o=r+i++;while(this._edges.has(o));return o};jt(this,"_attributes",{}),jt(this,"_nodes",new Map),jt(this,"_edges",new Map),jt(this,"_directedSize",0),jt(this,"_undirectedSize",0),jt(this,"_directedSelfLoopCount",0),jt(this,"_undirectedSelfLoopCount",0),jt(this,"_edgeKeyGenerator",s),jt(this,"_options",e),Rf.forEach(o=>jt(this,o,this[o])),en(this,"order",()=>this._nodes.size),en(this,"size",()=>this._edges.size),en(this,"directedSize",()=>this._directedSize),en(this,"undirectedSize",()=>this._undirectedSize),en(this,"selfLoopCount",()=>this._directedSelfLoopCount+this._undirectedSelfLoopCount),en(this,"directedSelfLoopCount",()=>this._directedSelfLoopCount),en(this,"undirectedSelfLoopCount",()=>this._undirectedSelfLoopCount),en(this,"multi",this._options.multi),en(this,"type",this._options.type),en(this,"allowSelfLoops",this._options.allowSelfLoops),en(this,"implementation",()=>"graphology")}_resetInstanceCounters(){this._directedSize=0,this._undirectedSize=0,this._directedSelfLoopCount=0,this._undirectedSelfLoopCount=0}hasNode(e){return this._nodes.has(""+e)}hasDirectedEdge(e,n){if(this.type==="undirected")return!1;if(arguments.length===1){const r=""+e,i=this._edges.get(r);return!!i&&!i.undirected}else if(arguments.length===2){e=""+e,n=""+n;const r=this._nodes.get(e);return r?r.out.hasOwnProperty(n):!1}throw new we(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasUndirectedEdge(e,n){if(this.type==="directed")return!1;if(arguments.length===1){const r=""+e,i=this._edges.get(r);return!!i&&i.undirected}else if(arguments.length===2){e=""+e,n=""+n;const r=this._nodes.get(e);return r?r.undirected.hasOwnProperty(n):!1}throw new we(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasEdge(e,n){if(arguments.length===1){const r=""+e;return this._edges.has(r)}else if(arguments.length===2){e=""+e,n=""+n;const r=this._nodes.get(e);return r?typeof r.out<"u"&&r.out.hasOwnProperty(n)||typeof r.undirected<"u"&&r.undirected.hasOwnProperty(n):!1}throw new we(`Graph.hasEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}directedEdge(e,n){if(this.type==="undirected")return;if(e=""+e,n=""+n,this.multi)throw new Te("Graph.directedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.directedEdges instead.");const r=this._nodes.get(e);if(!r)throw new ge(`Graph.directedEdge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(n))throw new ge(`Graph.directedEdge: could not find the "${n}" target node in the graph.`);const i=r.out&&r.out[n]||void 0;if(i)return i.key}undirectedEdge(e,n){if(this.type==="directed")return;if(e=""+e,n=""+n,this.multi)throw new Te("Graph.undirectedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.undirectedEdges instead.");const r=this._nodes.get(e);if(!r)throw new ge(`Graph.undirectedEdge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(n))throw new ge(`Graph.undirectedEdge: could not find the "${n}" target node in the graph.`);const i=r.undirected&&r.undirected[n]||void 0;if(i)return i.key}edge(e,n){if(this.multi)throw new Te("Graph.edge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.edges instead.");e=""+e,n=""+n;const r=this._nodes.get(e);if(!r)throw new ge(`Graph.edge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(n))throw new ge(`Graph.edge: could not find the "${n}" target node in the graph.`);const i=r.out&&r.out[n]||r.undirected&&r.undirected[n]||void 0;if(i)return i.key}areDirectedNeighbors(e,n){e=""+e,n=""+n;const r=this._nodes.get(e);if(!r)throw new ge(`Graph.areDirectedNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:n in r.in||n in r.out}areOutNeighbors(e,n){e=""+e,n=""+n;const r=this._nodes.get(e);if(!r)throw new ge(`Graph.areOutNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:n in r.out}areInNeighbors(e,n){e=""+e,n=""+n;const r=this._nodes.get(e);if(!r)throw new ge(`Graph.areInNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:n in r.in}areUndirectedNeighbors(e,n){e=""+e,n=""+n;const r=this._nodes.get(e);if(!r)throw new ge(`Graph.areUndirectedNeighbors: could not find the "${e}" node in the graph.`);return this.type==="directed"?!1:n in r.undirected}areNeighbors(e,n){e=""+e,n=""+n;const r=this._nodes.get(e);if(!r)throw new ge(`Graph.areNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&(n in r.in||n in r.out)||this.type!=="directed"&&n in r.undirected}areInboundNeighbors(e,n){e=""+e,n=""+n;const r=this._nodes.get(e);if(!r)throw new ge(`Graph.areInboundNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&n in r.in||this.type!=="directed"&&n in r.undirected}areOutboundNeighbors(e,n){e=""+e,n=""+n;const r=this._nodes.get(e);if(!r)throw new ge(`Graph.areOutboundNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&n in r.out||this.type!=="directed"&&n in r.undirected}inDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ge(`Graph.inDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree}outDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ge(`Graph.outDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.outDegree}directedDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ge(`Graph.directedDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree+n.outDegree}undirectedDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ge(`Graph.undirectedDegree: could not find the "${e}" node in the graph.`);return this.type==="directed"?0:n.undirectedDegree}inboundDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ge(`Graph.inboundDegree: could not find the "${e}" node in the graph.`);let r=0;return this.type!=="directed"&&(r+=n.undirectedDegree),this.type!=="undirected"&&(r+=n.inDegree),r}outboundDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ge(`Graph.outboundDegree: could not find the "${e}" node in the graph.`);let r=0;return this.type!=="directed"&&(r+=n.undirectedDegree),this.type!=="undirected"&&(r+=n.outDegree),r}degree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ge(`Graph.degree: could not find the "${e}" node in the graph.`);let r=0;return this.type!=="directed"&&(r+=n.undirectedDegree),this.type!=="undirected"&&(r+=n.inDegree+n.outDegree),r}inDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ge(`Graph.inDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree-n.directedLoops}outDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ge(`Graph.outDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.outDegree-n.directedLoops}directedDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ge(`Graph.directedDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree+n.outDegree-n.directedLoops*2}undirectedDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ge(`Graph.undirectedDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="directed"?0:n.undirectedDegree-n.undirectedLoops*2}inboundDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ge(`Graph.inboundDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let r=0,i=0;return this.type!=="directed"&&(r+=n.undirectedDegree,i+=n.undirectedLoops*2),this.type!=="undirected"&&(r+=n.inDegree,i+=n.directedLoops),r-i}outboundDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ge(`Graph.outboundDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let r=0,i=0;return this.type!=="directed"&&(r+=n.undirectedDegree,i+=n.undirectedLoops*2),this.type!=="undirected"&&(r+=n.outDegree,i+=n.directedLoops),r-i}degreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ge(`Graph.degreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let r=0,i=0;return this.type!=="directed"&&(r+=n.undirectedDegree,i+=n.undirectedLoops*2),this.type!=="undirected"&&(r+=n.inDegree+n.outDegree,i+=n.directedLoops*2),r-i}source(e){e=""+e;const n=this._edges.get(e);if(!n)throw new ge(`Graph.source: could not find the "${e}" edge in the graph.`);return n.source.key}target(e){e=""+e;const n=this._edges.get(e);if(!n)throw new ge(`Graph.target: could not find the "${e}" edge in the graph.`);return n.target.key}extremities(e){e=""+e;const n=this._edges.get(e);if(!n)throw new ge(`Graph.extremities: could not find the "${e}" edge in the graph.`);return[n.source.key,n.target.key]}opposite(e,n){e=""+e,n=""+n;const r=this._edges.get(n);if(!r)throw new ge(`Graph.opposite: could not find the "${n}" edge in the graph.`);const i=r.source.key,s=r.target.key;if(e===i)return s;if(e===s)return i;throw new ge(`Graph.opposite: the "${e}" node is not attached to the "${n}" edge (${i}, ${s}).`)}hasExtremity(e,n){e=""+e,n=""+n;const r=this._edges.get(e);if(!r)throw new ge(`Graph.hasExtremity: could not find the "${e}" edge in the graph.`);return r.source.key===n||r.target.key===n}isUndirected(e){e=""+e;const n=this._edges.get(e);if(!n)throw new ge(`Graph.isUndirected: could not find the "${e}" edge in the graph.`);return n.undirected}isDirected(e){e=""+e;const n=this._edges.get(e);if(!n)throw new ge(`Graph.isDirected: could not find the "${e}" edge in the graph.`);return!n.undirected}isSelfLoop(e){e=""+e;const n=this._edges.get(e);if(!n)throw new ge(`Graph.isSelfLoop: could not find the "${e}" edge in the graph.`);return n.source===n.target}addNode(e,n){return n2(this,e,n).key}mergeNode(e,n){if(n&&!ft(n))throw new we(`Graph.mergeNode: invalid attributes. Expecting an object but got "${n}"`);e=""+e,n=n||{};let r=this._nodes.get(e);return r?(n&&(at(r.attributes,n),this.emit("nodeAttributesUpdated",{type:"merge",key:e,attributes:r.attributes,data:n})),[e,!1]):(r=new this.NodeDataClass(e,n),this._nodes.set(e,r),this.emit("nodeAdded",{key:e,attributes:n}),[e,!0])}updateNode(e,n){if(n&&typeof n!="function")throw new we(`Graph.updateNode: invalid updater function. Expecting a function but got "${n}"`);e=""+e;let r=this._nodes.get(e);if(r){if(n){const s=r.attributes;r.attributes=n(s),this.emit("nodeAttributesUpdated",{type:"replace",key:e,attributes:r.attributes})}return[e,!1]}const i=n?n({}):{};return r=new this.NodeDataClass(e,i),this._nodes.set(e,r),this.emit("nodeAdded",{key:e,attributes:i}),[e,!0]}dropNode(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ge(`Graph.dropNode: could not find the "${e}" node in the graph.`);let r;if(this.type!=="undirected"){for(const i in n.out){r=n.out[i];do jr(this,r),r=r.next;while(r)}for(const i in n.in){r=n.in[i];do jr(this,r),r=r.next;while(r)}}if(this.type!=="directed")for(const i in n.undirected){r=n.undirected[i];do jr(this,r),r=r.next;while(r)}this._nodes.delete(e),this.emit("nodeDropped",{key:e,attributes:n.attributes})}dropEdge(e){let n;if(arguments.length>1){const r=""+arguments[0],i=""+arguments[1];if(n=Kt(this,r,i,this.type),!n)throw new ge(`Graph.dropEdge: could not find the "${r}" -> "${i}" edge in the graph.`)}else if(e=""+e,n=this._edges.get(e),!n)throw new ge(`Graph.dropEdge: could not find the "${e}" edge in the graph.`);return jr(this,n),this}dropDirectedEdge(e,n){if(arguments.length<2)throw new Te("Graph.dropDirectedEdge: it does not make sense to try and drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new Te("Graph.dropDirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");e=""+e,n=""+n;const r=Kt(this,e,n,"directed");if(!r)throw new ge(`Graph.dropDirectedEdge: could not find a "${e}" -> "${n}" edge in the graph.`);return jr(this,r),this}dropUndirectedEdge(e,n){if(arguments.length<2)throw new Te("Graph.dropUndirectedEdge: it does not make sense to drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new Te("Graph.dropUndirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");const r=Kt(this,e,n,"undirected");if(!r)throw new ge(`Graph.dropUndirectedEdge: could not find a "${e}" -> "${n}" edge in the graph.`);return jr(this,r),this}clear(){this._edges.clear(),this._nodes.clear(),this._resetInstanceCounters(),this.emit("cleared")}clearEdges(){const e=this._nodes.values();let n;for(;n=e.next(),n.done!==!0;)n.value.clear();this._edges.clear(),this._resetInstanceCounters(),this.emit("edgesCleared")}getAttribute(e){return this._attributes[e]}getAttributes(){return this._attributes}hasAttribute(e){return this._attributes.hasOwnProperty(e)}setAttribute(e,n){return this._attributes[e]=n,this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:e}),this}updateAttribute(e,n){if(typeof n!="function")throw new we("Graph.updateAttribute: updater should be a function.");const r=this._attributes[e];return this._attributes[e]=n(r),this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:e}),this}removeAttribute(e){return delete this._attributes[e],this.emit("attributesUpdated",{type:"remove",attributes:this._attributes,name:e}),this}replaceAttributes(e){if(!ft(e))throw new we("Graph.replaceAttributes: provided attributes are not a plain object.");return this._attributes=e,this.emit("attributesUpdated",{type:"replace",attributes:this._attributes}),this}mergeAttributes(e){if(!ft(e))throw new we("Graph.mergeAttributes: provided attributes are not a plain object.");return at(this._attributes,e),this.emit("attributesUpdated",{type:"merge",attributes:this._attributes,data:e}),this}updateAttributes(e){if(typeof e!="function")throw new we("Graph.updateAttributes: provided updater is not a function.");return this._attributes=e(this._attributes),this.emit("attributesUpdated",{type:"update",attributes:this._attributes}),this}updateEachNodeAttributes(e,n){if(typeof e!="function")throw new we("Graph.updateEachNodeAttributes: expecting an updater function.");if(n&&!Nf(n))throw new we("Graph.updateEachNodeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const r=this._nodes.values();let i,s;for(;i=r.next(),i.done!==!0;)s=i.value,s.attributes=e(s.key,s.attributes);this.emit("eachNodeAttributesUpdated",{hints:n||null})}updateEachEdgeAttributes(e,n){if(typeof e!="function")throw new we("Graph.updateEachEdgeAttributes: expecting an updater function.");if(n&&!Nf(n))throw new we("Graph.updateEachEdgeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const r=this._edges.values();let i,s,o,a;for(;i=r.next(),i.done!==!0;)s=i.value,o=s.source,a=s.target,s.attributes=e(s.key,s.attributes,o.key,a.key,o.attributes,a.attributes,s.undirected);this.emit("eachEdgeAttributesUpdated",{hints:n||null})}forEachAdjacencyEntry(e){if(typeof e!="function")throw new we("Graph.forEachAdjacencyEntry: expecting a callback.");oo(!1,!1,!1,this,e)}forEachAdjacencyEntryWithOrphans(e){if(typeof e!="function")throw new we("Graph.forEachAdjacencyEntryWithOrphans: expecting a callback.");oo(!1,!1,!0,this,e)}forEachAssymetricAdjacencyEntry(e){if(typeof e!="function")throw new we("Graph.forEachAssymetricAdjacencyEntry: expecting a callback.");oo(!1,!0,!1,this,e)}forEachAssymetricAdjacencyEntryWithOrphans(e){if(typeof e!="function")throw new we("Graph.forEachAssymetricAdjacencyEntryWithOrphans: expecting a callback.");oo(!1,!0,!0,this,e)}nodes(){return typeof Array.from=="function"?Array.from(this._nodes.keys()):Ay(this._nodes.keys(),this._nodes.size)}forEachNode(e){if(typeof e!="function")throw new we("Graph.forEachNode: expecting a callback.");const n=this._nodes.values();let r,i;for(;r=n.next(),r.done!==!0;)i=r.value,e(i.key,i.attributes)}findNode(e){if(typeof e!="function")throw new we("Graph.findNode: expecting a callback.");const n=this._nodes.values();let r,i;for(;r=n.next(),r.done!==!0;)if(i=r.value,e(i.key,i.attributes))return i.key}mapNodes(e){if(typeof e!="function")throw new we("Graph.mapNode: expecting a callback.");const n=this._nodes.values();let r,i;const s=new Array(this.order);let o=0;for(;r=n.next(),r.done!==!0;)i=r.value,s[o++]=e(i.key,i.attributes);return s}someNode(e){if(typeof e!="function")throw new we("Graph.someNode: expecting a callback.");const n=this._nodes.values();let r,i;for(;r=n.next(),r.done!==!0;)if(i=r.value,e(i.key,i.attributes))return!0;return!1}everyNode(e){if(typeof e!="function")throw new we("Graph.everyNode: expecting a callback.");const n=this._nodes.values();let r,i;for(;r=n.next(),r.done!==!0;)if(i=r.value,!e(i.key,i.attributes))return!1;return!0}filterNodes(e){if(typeof e!="function")throw new we("Graph.filterNodes: expecting a callback.");const n=this._nodes.values();let r,i;const s=[];for(;r=n.next(),r.done!==!0;)i=r.value,e(i.key,i.attributes)&&s.push(i.key);return s}reduceNodes(e,n){if(typeof e!="function")throw new we("Graph.reduceNodes: expecting a callback.");if(arguments.length<2)throw new we("Graph.reduceNodes: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.");let r=n;const i=this._nodes.values();let s,o;for(;s=i.next(),s.done!==!0;)o=s.value,r=e(r,o.key,o.attributes);return r}nodeEntries(){const e=this._nodes.values();return new Zt(()=>{const n=e.next();if(n.done)return n;const r=n.value;return{value:{node:r.key,attributes:r.attributes},done:!1}})}export(){const e=new Array(this._nodes.size);let n=0;this._nodes.forEach((i,s)=>{e[n++]=KI(s,i)});const r=new Array(this._edges.size);return n=0,this._edges.forEach((i,s)=>{r[n++]=XI(this.type,s,i)}),{options:{type:this.type,multi:this.multi,allowSelfLoops:this.allowSelfLoops},attributes:this.getAttributes(),nodes:e,edges:r}}import(e,n=!1){if(e instanceof Ve)return e.forEachNode((l,c)=>{n?this.mergeNode(l,c):this.addNode(l,c)}),e.forEachEdge((l,c,d,u,h,f,p)=>{n?p?this.mergeUndirectedEdgeWithKey(l,d,u,c):this.mergeDirectedEdgeWithKey(l,d,u,c):p?this.addUndirectedEdgeWithKey(l,d,u,c):this.addDirectedEdgeWithKey(l,d,u,c)}),this;if(!ft(e))throw new we("Graph.import: invalid argument. Expecting a serialized graph or, alternatively, a Graph instance.");if(e.attributes){if(!ft(e.attributes))throw new we("Graph.import: invalid attributes. Expecting a plain object.");n?this.mergeAttributes(e.attributes):this.replaceAttributes(e.attributes)}let r,i,s,o,a;if(e.nodes){if(s=e.nodes,!Array.isArray(s))throw new we("Graph.import: invalid nodes. Expecting an array.");for(r=0,i=s.length;r<i;r++){o=s[r],ZI(o);const{key:l,attributes:c}=o;n?this.mergeNode(l,c):this.addNode(l,c)}}if(e.edges){let l=!1;if(this.type==="undirected"&&(l=!0),s=e.edges,!Array.isArray(s))throw new we("Graph.import: invalid edges. Expecting an array.");for(r=0,i=s.length;r<i;r++){a=s[r],YI(a);const{source:c,target:d,attributes:u,undirected:h=l}=a;let f;"key"in a?(f=n?h?this.mergeUndirectedEdgeWithKey:this.mergeDirectedEdgeWithKey:h?this.addUndirectedEdgeWithKey:this.addDirectedEdgeWithKey,f.call(this,a.key,c,d,u)):(f=n?h?this.mergeUndirectedEdge:this.mergeDirectedEdge:h?this.addUndirectedEdge:this.addDirectedEdge,f.call(this,c,d,u))}}return this}nullCopy(e){const n=new Ve(at({},this._options,e));return n.replaceAttributes(at({},this.getAttributes())),n}emptyCopy(e){const n=this.nullCopy(e);return this._nodes.forEach((r,i)=>{const s=at({},r.attributes);r=new n.NodeDataClass(i,s),n._nodes.set(i,r)}),n}copy(e){if(e=e||{},typeof e.type=="string"&&e.type!==this.type&&e.type!=="mixed")throw new Te(`Graph.copy: cannot create an incompatible copy from "${this.type}" type to "${e.type}" because this would mean losing information about the current graph.`);if(typeof e.multi=="boolean"&&e.multi!==this.multi&&e.multi!==!0)throw new Te("Graph.copy: cannot create an incompatible copy by downgrading a multi graph to a simple one because this would mean losing information about the current graph.");if(typeof e.allowSelfLoops=="boolean"&&e.allowSelfLoops!==this.allowSelfLoops&&e.allowSelfLoops!==!0)throw new Te("Graph.copy: cannot create an incompatible copy from a graph allowing self loops to one that does not because this would mean losing information about the current graph.");const n=this.emptyCopy(e),r=this._edges.values();let i,s;for(;i=r.next(),i.done!==!0;)s=i.value,Dy(n,"copy",!1,s.undirected,s.key,s.source.key,s.target.key,at({},s.attributes));return n}toJSON(){return this.export()}toString(){return"[object Graph]"}inspect(){const e={};this._nodes.forEach((s,o)=>{e[o]=s.attributes});const n={},r={};this._edges.forEach((s,o)=>{const a=s.undirected?"--":"->";let l="",c=s.source.key,d=s.target.key,u;s.undirected&&c>d&&(u=c,c=d,d=u);const h=`(${c})${a}(${d})`;o.startsWith("geid_")?this.multi&&(typeof r[h]>"u"?r[h]=0:r[h]++,l+=`${r[h]}. `):l+=`[${o}]: `,l+=h,n[l]=s.attributes});const i={};for(const s in this)this.hasOwnProperty(s)&&!Rf.has(s)&&typeof this[s]!="function"&&typeof s!="symbol"&&(i[s]=this[s]);return i.attributes=this._attributes,i.nodes=e,i.edges=n,jt(i,"constructor",this.constructor),i}}typeof Symbol<"u"&&(Ve.prototype[Symbol.for("nodejs.util.inspect.custom")]=Ve.prototype.inspect);e2.forEach(t=>{["add","merge","update"].forEach(e=>{const n=t.name(e),r=e==="add"?Dy:r2;t.generateKey?Ve.prototype[n]=function(i,s,o){return r(this,n,!0,(t.type||this.type)==="undirected",null,i,s,o,e==="update")}:Ve.prototype[n]=function(i,s,o,a){return r(this,n,!1,(t.type||this.type)==="undirected",i,s,o,a,e==="update")}})});hI(Ve);kI(Ve);$I(Ve);qI(Ve);class Py extends Ve{constructor(e){const n=at({type:"directed"},e);if("multi"in n&&n.multi!==!1)throw new we("DirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(n.type!=="directed")throw new we('DirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class Gy extends Ve{constructor(e){const n=at({type:"undirected"},e);if("multi"in n&&n.multi!==!1)throw new we("UndirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(n.type!=="undirected")throw new we('UndirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class My extends Ve{constructor(e){const n=at({multi:!0},e);if("multi"in n&&n.multi!==!0)throw new we("MultiGraph.from: inconsistent indication that the graph should be simple in given options!");super(n)}}class Oy extends Ve{constructor(e){const n=at({type:"directed",multi:!0},e);if("multi"in n&&n.multi!==!0)throw new we("MultiDirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(n.type!=="directed")throw new we('MultiDirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class Fy extends Ve{constructor(e){const n=at({type:"undirected",multi:!0},e);if("multi"in n&&n.multi!==!0)throw new we("MultiUndirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(n.type!=="undirected")throw new we('MultiUndirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}function Si(t){t.from=function(e,n){const r=at({},e.options,n),i=new t(r);return i.import(e),i}}Si(Ve);Si(Py);Si(Gy);Si(My);Si(Oy);Si(Fy);Ve.Graph=Ve;Ve.DirectedGraph=Py;Ve.UndirectedGraph=Gy;Ve.MultiGraph=My;Ve.MultiDirectedGraph=Oy;Ve.MultiUndirectedGraph=Fy;Ve.InvalidArgumentsGraphError=we;Ve.NotFoundGraphError=ge;Ve.UsageGraphError=Te;function i2(t){if(Array.isArray(t))return t}function s2(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,o,a=[],l=!0,c=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(l=(r=s.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(d){c=!0,i=d}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return a}}function Tc(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function $y(t,e){if(t){if(typeof t=="string")return Tc(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Tc(t,e):void 0}}function o2(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function a2(t,e){return i2(t)||s2(t,e)||$y(t,e)||o2()}function l2(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c2(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function zy(t){var e=c2(t,"string");return typeof e=="symbol"?e:e+""}function d2(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,zy(r.key),r)}}function u2(t,e,n){return e&&d2(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function ea(t){return ea=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ea(t)}function By(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(By=function(){return!!t})()}function Nc(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function h2(t,e){if(e&&(typeof e=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Nc(t)}function f2(t,e,n){return e=ea(e),h2(t,By()?Reflect.construct(e,n||[],ea(t).constructor):e.apply(t,n))}function Rc(t,e){return Rc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},Rc(t,e)}function g2(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Rc(t,e)}function Xr(t,e,n){return(e=zy(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function p2(t){if(Array.isArray(t))return Tc(t)}function m2(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function y2(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xl(t){return p2(t)||m2(t)||$y(t)||y2()}function If(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Df(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?If(Object(n),!0).forEach(function(r){Xr(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):If(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var v2="relative",_2={drawLabel:void 0,drawHover:void 0,borders:[{size:{value:.1},color:{attribute:"borderColor"}},{size:{fill:!0},color:{attribute:"color"}}]},b2="#000000";function w2(t){var e=t.borders,n=rf(e.filter(function(i){var s=i.size;return"fill"in s}).length),r=`
precision highp float;

varying vec2 v_diffVector;
varying float v_radius;

#ifdef PICKING_MODE
varying vec4 v_color;
#else
// For normal mode, we use the border colors defined in the program:
`.concat(e.flatMap(function(i,s){var o=i.size;return"attribute"in o?["varying float v_borderSize_".concat(s+1,";")]:[]}).join(`
`),`
`).concat(e.flatMap(function(i,s){var o=i.color;return"attribute"in o?["varying vec4 v_borderColor_".concat(s+1,";")]:"value"in o?["uniform vec4 u_borderColor_".concat(s+1,";")]:[]}).join(`
`),`
#endif

uniform float u_correctionRatio;

const float bias = 255.0 / 254.0;
const vec4 transparent = vec4(0.0, 0.0, 0.0, 0.0);

void main(void) {
  float dist = length(v_diffVector);
  float aaBorder = 2.0 * u_correctionRatio;
  float v_borderSize_0 = v_radius;
  vec4 v_borderColor_0 = transparent;

  // No antialiasing for picking mode:
  #ifdef PICKING_MODE
  if (dist > v_radius)
    gl_FragColor = transparent;
  else {
    gl_FragColor = v_color;
    gl_FragColor.a *= bias;
  }
  #else
  // Sizes:
`).concat(e.flatMap(function(i,s){var o=i.size;if("fill"in o)return[];o=o;var a="attribute"in o?"v_borderSize_".concat(s+1):rf(o.value),l=(o.mode||v2)==="pixels"?"u_correctionRatio":"v_radius";return["  float borderSize_".concat(s+1," = ").concat(l," * ").concat(a,";")]}).join(`
`),`
  // Now, let's split the remaining space between "fill" borders:
  float fillBorderSize = (v_radius - (`).concat(e.flatMap(function(i,s){var o=i.size;return"fill"in o?[]:["borderSize_".concat(s+1)]}).join(" + "),") ) / ").concat(n,`;
`).concat(e.flatMap(function(i,s){var o=i.size;return"fill"in o?["  float borderSize_".concat(s+1," = fillBorderSize;")]:[]}).join(`
`),`

  // Finally, normalize all border sizes, to start from the full size and to end with the smallest:
  float adjustedBorderSize_0 = v_radius;
`).concat(e.map(function(i,s){return"  float adjustedBorderSize_".concat(s+1," = adjustedBorderSize_").concat(s," - borderSize_").concat(s+1,";")}).join(`
`),`

  // Colors:
  vec4 borderColor_0 = transparent;
`).concat(e.map(function(i,s){var o=i.color,a=[];return"attribute"in o?a.push("  vec4 borderColor_".concat(s+1," = v_borderColor_").concat(s+1,";")):"transparent"in o?a.push("  vec4 borderColor_".concat(s+1," = vec4(0.0, 0.0, 0.0, 0.0);")):a.push("  vec4 borderColor_".concat(s+1," = u_borderColor_").concat(s+1,";")),a.push("  borderColor_".concat(s+1,".a *= bias;")),a.push("  if (borderSize_".concat(s+1," <= 1.0 * u_correctionRatio) { borderColor_").concat(s+1," = borderColor_").concat(s,"; }")),a.join(`
`)}).join(`
`),`
  if (dist > adjustedBorderSize_0) {
    gl_FragColor = borderColor_0;
  } else `).concat(e.map(function(i,s){return"if (dist > adjustedBorderSize_".concat(s,` - aaBorder) {
    gl_FragColor = mix(borderColor_`).concat(s+1,", borderColor_").concat(s,", (dist - adjustedBorderSize_").concat(s,` + aaBorder) / aaBorder);
  } else if (dist > adjustedBorderSize_`).concat(s+1,`) {
    gl_FragColor = borderColor_`).concat(s+1,`;
  } else `)}).join(""),` { /* Nothing to add here */ }
  #endif
}
`);return r}function E2(t){var e=t.borders,n=`
attribute vec2 a_position;
attribute float a_size;
attribute float a_angle;

uniform mat3 u_matrix;
uniform float u_sizeRatio;
uniform float u_correctionRatio;

varying vec2 v_diffVector;
varying float v_radius;

#ifdef PICKING_MODE
attribute vec4 a_id;
varying vec4 v_color;
#else
`.concat(e.flatMap(function(r,i){var s=r.size;return"attribute"in s?["attribute float a_borderSize_".concat(i+1,";"),"varying float v_borderSize_".concat(i+1,";")]:[]}).join(`
`),`
`).concat(e.flatMap(function(r,i){var s=r.color;return"attribute"in s?["attribute vec4 a_borderColor_".concat(i+1,";"),"varying vec4 v_borderColor_".concat(i+1,";")]:[]}).join(`
`),`
#endif

const float bias = 255.0 / 254.0;
const vec4 transparent = vec4(0.0, 0.0, 0.0, 0.0);

void main() {
  float size = a_size * u_correctionRatio / u_sizeRatio * 4.0;
  vec2 diffVector = size * vec2(cos(a_angle), sin(a_angle));
  vec2 position = a_position + diffVector;
  gl_Position = vec4(
    (u_matrix * vec3(position, 1)).xy,
    0,
    1
  );

  v_radius = size / 2.0;
  v_diffVector = diffVector;

  #ifdef PICKING_MODE
  v_color = a_id;
  #else
`).concat(e.flatMap(function(r,i){var s=r.size;return"attribute"in s?["  v_borderSize_".concat(i+1," = a_borderSize_").concat(i+1,";")]:[]}).join(`
`),`
`).concat(e.flatMap(function(r,i){var s=r.color;return"attribute"in s?["  v_borderColor_".concat(i+1," = a_borderColor_").concat(i+1,";")]:[]}).join(`
`),`
  #endif
}
`);return n}var Vy=WebGLRenderingContext,Pf=Vy.UNSIGNED_BYTE,ao=Vy.FLOAT;function Uy(t){var e,n=Df(Df({},_2),t||{}),r=n.borders,i=n.drawLabel,s=n.drawHover,o=["u_sizeRatio","u_correctionRatio","u_matrix"].concat(xl(r.flatMap(function(a,l){var c=a.color;return"value"in c?["u_borderColor_".concat(l+1)]:[]})));return e=(function(a){g2(l,a);function l(){var c;l2(this,l);for(var d=arguments.length,u=new Array(d),h=0;h<d;h++)u[h]=arguments[h];return c=f2(this,l,[].concat(u)),Xr(Nc(c),"drawLabel",i),Xr(Nc(c),"drawHover",s),c}return u2(l,[{key:"getDefinition",value:function(){return{VERTICES:3,VERTEX_SHADER_SOURCE:E2(n),FRAGMENT_SHADER_SOURCE:w2(n),METHOD:WebGLRenderingContext.TRIANGLES,UNIFORMS:o,ATTRIBUTES:[{name:"a_position",size:2,type:ao},{name:"a_id",size:4,type:Pf,normalized:!0},{name:"a_size",size:1,type:ao}].concat(xl(r.flatMap(function(d,u){var h=d.color;return"attribute"in h?[{name:"a_borderColor_".concat(u+1),size:4,type:Pf,normalized:!0}]:[]})),xl(r.flatMap(function(d,u){var h=d.size;return"attribute"in h?[{name:"a_borderSize_".concat(u+1),size:1,type:ao}]:[]}))),CONSTANT_ATTRIBUTES:[{name:"a_angle",size:1,type:ao}],CONSTANT_DATA:[[l.ANGLE_1],[l.ANGLE_2],[l.ANGLE_3]]}}},{key:"processVisibleItem",value:function(d,u,h){var f=this.array;f[u++]=h.x,f[u++]=h.y,f[u++]=d,f[u++]=h.size,r.forEach(function(p){var y=p.color;"attribute"in y&&(f[u++]=Br(h[y.attribute]||y.defaultValue||b2))}),r.forEach(function(p){var y=p.size;"attribute"in y&&(f[u++]=h[y.attribute]||y.defaultValue)})}},{key:"setUniforms",value:function(d,u){var h=u.gl,f=u.uniformLocations,p=f.u_sizeRatio,y=f.u_correctionRatio,w=f.u_matrix;h.uniform1f(y,d.correctionRatio),h.uniform1f(p,d.sizeRatio),h.uniformMatrix3fv(w,!1,d.matrix),r.forEach(function(b,E){var k=b.color;if("value"in k){var _=f["u_borderColor_".concat(E+1)],x=IR(k.value),T=a2(x,4),L=T[0],O=T[1],F=T[2],$=T[3];h.uniform4f(_,L/255,O/255,F/255,$/255)}})}}]),l})(cy),Xr(e,"ANGLE_1",0),Xr(e,"ANGLE_2",2*Math.PI/3),Xr(e,"ANGLE_3",4*Math.PI/3),e}Uy();var Vi={},Gf;function k2(){if(Gf)return Vi;Gf=1;function t(r){return typeof r!="number"||isNaN(r)?1:r}function e(r,i){var s={},o=function(c){return typeof c>"u"?i:c};typeof i=="function"&&(o=i);var a=function(c){return o(c[r])},l=function(){return o(void 0)};return typeof r=="string"?(s.fromAttributes=a,s.fromGraph=function(c,d){return a(c.getNodeAttributes(d))},s.fromEntry=function(c,d){return a(d)}):typeof r=="function"?(s.fromAttributes=function(){throw new Error("graphology-utils/getters/createNodeValueGetter: irrelevant usage.")},s.fromGraph=function(c,d){return o(r(d,c.getNodeAttributes(d)))},s.fromEntry=function(c,d){return o(r(c,d))}):(s.fromAttributes=l,s.fromGraph=l,s.fromEntry=l),s}function n(r,i){var s={},o=function(c){return typeof c>"u"?i:c};typeof i=="function"&&(o=i);var a=function(c){return o(c[r])},l=function(){return o(void 0)};return typeof r=="string"?(s.fromAttributes=a,s.fromGraph=function(c,d){return a(c.getEdgeAttributes(d))},s.fromEntry=function(c,d){return a(d)},s.fromPartialEntry=s.fromEntry,s.fromMinimalEntry=s.fromEntry):typeof r=="function"?(s.fromAttributes=function(){throw new Error("graphology-utils/getters/createEdgeValueGetter: irrelevant usage.")},s.fromGraph=function(c,d){var u=c.extremities(d);return o(r(d,c.getEdgeAttributes(d),u[0],u[1],c.getNodeAttributes(u[0]),c.getNodeAttributes(u[1]),c.isUndirected(d)))},s.fromEntry=function(c,d,u,h,f,p,y){return o(r(c,d,u,h,f,p,y))},s.fromPartialEntry=function(c,d,u,h){return o(r(c,d,u,h))},s.fromMinimalEntry=function(c,d){return o(r(c,d))}):(s.fromAttributes=l,s.fromGraph=l,s.fromEntry=l,s.fromMinimalEntry=l),s}return Vi.createNodeValueGetter=e,Vi.createEdgeValueGetter=n,Vi.createEdgeWeightGetter=function(r){return n(r,t)},Vi}var Cl,Mf;function A2(){if(Mf)return Cl;Mf=1;var t=0,e=1,n=2,r=3,i=4,s=5,o=6,a=7,l=8,c=9,d=0,u=1,h=2,f=0,p=1,y=2,w=3,b=4,E=5,k=6,_=7,x=8,T=3,L=10,O=3,F=9,$=10;return Cl=function(z,I,A){var D,C,S,U,H,ne,_e,ye,ae,W,se=I.length,be=A.length,q=z.adjustSizes,oe=z.barnesHutTheta*z.barnesHutTheta,B,Q,J,N,P,G,V,M=[];for(S=0;S<se;S+=L)I[S+i]=I[S+n],I[S+s]=I[S+r],I[S+n]=0,I[S+r]=0;if(z.outboundAttractionDistribution){for(B=0,S=0;S<se;S+=L)B+=I[S+o];B/=se/L}if(z.barnesHutOptimize){var Z=1/0,ie=-1/0,he=1/0,de=-1/0,te,ke,ve;for(S=0;S<se;S+=L)Z=Math.min(Z,I[S+t]),ie=Math.max(ie,I[S+t]),he=Math.min(he,I[S+e]),de=Math.max(de,I[S+e]);var Ae=ie-Z,Ce=de-he;for(Ae>Ce?(he-=(Ae-Ce)/2,de=he+Ae):(Z-=(Ce-Ae)/2,ie=Z+Ce),M[0+f]=-1,M[0+p]=(Z+ie)/2,M[0+y]=(he+de)/2,M[0+w]=Math.max(ie-Z,de-he),M[0+b]=-1,M[0+E]=-1,M[0+k]=0,M[0+_]=0,M[0+x]=0,D=1,S=0;S<se;S+=L)for(C=0,ve=T;;)if(M[C+E]>=0){I[S+t]<M[C+p]?I[S+e]<M[C+y]?te=M[C+E]:te=M[C+E]+F:I[S+e]<M[C+y]?te=M[C+E]+F*2:te=M[C+E]+F*3,M[C+_]=(M[C+_]*M[C+k]+I[S+t]*I[S+o])/(M[C+k]+I[S+o]),M[C+x]=(M[C+x]*M[C+k]+I[S+e]*I[S+o])/(M[C+k]+I[S+o]),M[C+k]+=I[S+o],C=te;continue}else if(M[C+f]<0){M[C+f]=S;break}else{if(M[C+E]=D*F,ye=M[C+w]/2,ae=M[C+E],M[ae+f]=-1,M[ae+p]=M[C+p]-ye,M[ae+y]=M[C+y]-ye,M[ae+w]=ye,M[ae+b]=ae+F,M[ae+E]=-1,M[ae+k]=0,M[ae+_]=0,M[ae+x]=0,ae+=F,M[ae+f]=-1,M[ae+p]=M[C+p]-ye,M[ae+y]=M[C+y]+ye,M[ae+w]=ye,M[ae+b]=ae+F,M[ae+E]=-1,M[ae+k]=0,M[ae+_]=0,M[ae+x]=0,ae+=F,M[ae+f]=-1,M[ae+p]=M[C+p]+ye,M[ae+y]=M[C+y]-ye,M[ae+w]=ye,M[ae+b]=ae+F,M[ae+E]=-1,M[ae+k]=0,M[ae+_]=0,M[ae+x]=0,ae+=F,M[ae+f]=-1,M[ae+p]=M[C+p]+ye,M[ae+y]=M[C+y]+ye,M[ae+w]=ye,M[ae+b]=M[C+b],M[ae+E]=-1,M[ae+k]=0,M[ae+_]=0,M[ae+x]=0,D+=4,I[M[C+f]+t]<M[C+p]?I[M[C+f]+e]<M[C+y]?te=M[C+E]:te=M[C+E]+F:I[M[C+f]+e]<M[C+y]?te=M[C+E]+F*2:te=M[C+E]+F*3,M[C+k]=I[M[C+f]+o],M[C+_]=I[M[C+f]+t],M[C+x]=I[M[C+f]+e],M[te+f]=M[C+f],M[C+f]=-1,I[S+t]<M[C+p]?I[S+e]<M[C+y]?ke=M[C+E]:ke=M[C+E]+F:I[S+e]<M[C+y]?ke=M[C+E]+F*2:ke=M[C+E]+F*3,te===ke)if(ve--){C=te;continue}else{ve=T;break}M[ke+f]=S;break}}if(z.barnesHutOptimize)for(Q=z.scalingRatio,S=0;S<se;S+=L)for(C=0;;)if(M[C+E]>=0)if(G=Math.pow(I[S+t]-M[C+_],2)+Math.pow(I[S+e]-M[C+x],2),W=M[C+w],4*W*W/G<oe){if(J=I[S+t]-M[C+_],N=I[S+e]-M[C+x],q===!0?G>0?(V=Q*I[S+o]*M[C+k]/G,I[S+n]+=J*V,I[S+r]+=N*V):G<0&&(V=-Q*I[S+o]*M[C+k]/Math.sqrt(G),I[S+n]+=J*V,I[S+r]+=N*V):G>0&&(V=Q*I[S+o]*M[C+k]/G,I[S+n]+=J*V,I[S+r]+=N*V),C=M[C+b],C<0)break;continue}else{C=M[C+E];continue}else{if(ne=M[C+f],ne>=0&&ne!==S&&(J=I[S+t]-I[ne+t],N=I[S+e]-I[ne+e],G=J*J+N*N,q===!0?G>0?(V=Q*I[S+o]*I[ne+o]/G,I[S+n]+=J*V,I[S+r]+=N*V):G<0&&(V=-Q*I[S+o]*I[ne+o]/Math.sqrt(G),I[S+n]+=J*V,I[S+r]+=N*V):G>0&&(V=Q*I[S+o]*I[ne+o]/G,I[S+n]+=J*V,I[S+r]+=N*V)),C=M[C+b],C<0)break;continue}else for(Q=z.scalingRatio,U=0;U<se;U+=L)for(H=0;H<U;H+=L)J=I[U+t]-I[H+t],N=I[U+e]-I[H+e],q===!0?(G=Math.sqrt(J*J+N*N)-I[U+l]-I[H+l],G>0?(V=Q*I[U+o]*I[H+o]/G/G,I[U+n]+=J*V,I[U+r]+=N*V,I[H+n]-=J*V,I[H+r]-=N*V):G<0&&(V=100*Q*I[U+o]*I[H+o],I[U+n]+=J*V,I[U+r]+=N*V,I[H+n]-=J*V,I[H+r]-=N*V)):(G=Math.sqrt(J*J+N*N),G>0&&(V=Q*I[U+o]*I[H+o]/G/G,I[U+n]+=J*V,I[U+r]+=N*V,I[H+n]-=J*V,I[H+r]-=N*V));for(ae=z.gravity/z.scalingRatio,Q=z.scalingRatio,S=0;S<se;S+=L)V=0,J=I[S+t],N=I[S+e],G=Math.sqrt(Math.pow(J,2)+Math.pow(N,2)),z.strongGravityMode?G>0&&(V=Q*I[S+o]*ae):G>0&&(V=Q*I[S+o]*ae/G),I[S+n]-=J*V,I[S+r]-=N*V;for(Q=1*(z.outboundAttractionDistribution?B:1),_e=0;_e<be;_e+=O)U=A[_e+d],H=A[_e+u],ye=A[_e+h],P=Math.pow(ye,z.edgeWeightInfluence),J=I[U+t]-I[H+t],N=I[U+e]-I[H+e],q===!0?(G=Math.sqrt(J*J+N*N)-I[U+l]-I[H+l],z.linLogMode?z.outboundAttractionDistribution?G>0&&(V=-Q*P*Math.log(1+G)/G/I[U+o]):G>0&&(V=-Q*P*Math.log(1+G)/G):z.outboundAttractionDistribution?G>0&&(V=-Q*P/I[U+o]):G>0&&(V=-Q*P)):(G=Math.sqrt(Math.pow(J,2)+Math.pow(N,2)),z.linLogMode?z.outboundAttractionDistribution?G>0&&(V=-Q*P*Math.log(1+G)/G/I[U+o]):G>0&&(V=-Q*P*Math.log(1+G)/G):z.outboundAttractionDistribution?(G=1,V=-Q*P/I[U+o]):(G=1,V=-Q*P)),G>0&&(I[U+n]+=J*V,I[U+r]+=N*V,I[H+n]-=J*V,I[H+r]-=N*V);var Ie,ee,re,X,pe,Le;if(q===!0)for(S=0;S<se;S+=L)I[S+c]!==1&&(Ie=Math.sqrt(Math.pow(I[S+n],2)+Math.pow(I[S+r],2)),Ie>$&&(I[S+n]=I[S+n]*$/Ie,I[S+r]=I[S+r]*$/Ie),ee=I[S+o]*Math.sqrt((I[S+i]-I[S+n])*(I[S+i]-I[S+n])+(I[S+s]-I[S+r])*(I[S+s]-I[S+r])),re=Math.sqrt((I[S+i]+I[S+n])*(I[S+i]+I[S+n])+(I[S+s]+I[S+r])*(I[S+s]+I[S+r]))/2,X=.1*Math.log(1+re)/(1+Math.sqrt(ee)),pe=I[S+t]+I[S+n]*(X/z.slowDown),I[S+t]=pe,Le=I[S+e]+I[S+r]*(X/z.slowDown),I[S+e]=Le);else for(S=0;S<se;S+=L)I[S+c]!==1&&(ee=I[S+o]*Math.sqrt((I[S+i]-I[S+n])*(I[S+i]-I[S+n])+(I[S+s]-I[S+r])*(I[S+s]-I[S+r])),re=Math.sqrt((I[S+i]+I[S+n])*(I[S+i]+I[S+n])+(I[S+s]+I[S+r])*(I[S+s]+I[S+r]))/2,X=I[S+a]*Math.log(1+re)/(1+Math.sqrt(ee)),I[S+a]=Math.min(1,Math.sqrt(X*(Math.pow(I[S+n],2)+Math.pow(I[S+r],2))/(1+Math.sqrt(ee)))),pe=I[S+t]+I[S+n]*(X/z.slowDown),I[S+t]=pe,Le=I[S+e]+I[S+r]*(X/z.slowDown),I[S+e]=Le);return{}},Cl}var Dn={},Of;function x2(){if(Of)return Dn;Of=1;var t=10,e=3;return Dn.assign=function(n){n=n||{};var r=Array.prototype.slice.call(arguments).slice(1),i,s,o;for(i=0,o=r.length;i<o;i++)if(r[i])for(s in r[i])n[s]=r[i][s];return n},Dn.validateSettings=function(n){return"linLogMode"in n&&typeof n.linLogMode!="boolean"?{message:"the `linLogMode` setting should be a boolean."}:"outboundAttractionDistribution"in n&&typeof n.outboundAttractionDistribution!="boolean"?{message:"the `outboundAttractionDistribution` setting should be a boolean."}:"adjustSizes"in n&&typeof n.adjustSizes!="boolean"?{message:"the `adjustSizes` setting should be a boolean."}:"edgeWeightInfluence"in n&&typeof n.edgeWeightInfluence!="number"?{message:"the `edgeWeightInfluence` setting should be a number."}:"scalingRatio"in n&&!(typeof n.scalingRatio=="number"&&n.scalingRatio>=0)?{message:"the `scalingRatio` setting should be a number >= 0."}:"strongGravityMode"in n&&typeof n.strongGravityMode!="boolean"?{message:"the `strongGravityMode` setting should be a boolean."}:"gravity"in n&&!(typeof n.gravity=="number"&&n.gravity>=0)?{message:"the `gravity` setting should be a number >= 0."}:"slowDown"in n&&!(typeof n.slowDown=="number"||n.slowDown>=0)?{message:"the `slowDown` setting should be a number >= 0."}:"barnesHutOptimize"in n&&typeof n.barnesHutOptimize!="boolean"?{message:"the `barnesHutOptimize` setting should be a boolean."}:"barnesHutTheta"in n&&!(typeof n.barnesHutTheta=="number"&&n.barnesHutTheta>=0)?{message:"the `barnesHutTheta` setting should be a number >= 0."}:null},Dn.graphToByteArrays=function(n,r){var i=n.order,s=n.size,o={},a,l=new Float32Array(i*t),c=new Float32Array(s*e);return a=0,n.forEachNode(function(d,u){o[d]=a,l[a]=u.x,l[a+1]=u.y,l[a+2]=0,l[a+3]=0,l[a+4]=0,l[a+5]=0,l[a+6]=1,l[a+7]=1,l[a+8]=u.size||1,l[a+9]=u.fixed?1:0,a+=t}),a=0,n.forEachEdge(function(d,u,h,f,p,y,w){var b=o[h],E=o[f],k=r(d,u,h,f,p,y,w);l[b+6]+=k,l[E+6]+=k,c[a]=b,c[a+1]=E,c[a+2]=k,a+=e}),{nodes:l,edges:c}},Dn.assignLayoutChanges=function(n,r,i){var s=0;n.updateEachNodeAttributes(function(o,a){return a.x=r[s],a.y=r[s+1],s+=t,i?i(o,a):a})},Dn.readGraphPositions=function(n,r){var i=0;n.forEachNode(function(s,o){r[i]=o.x,r[i+1]=o.y,i+=t})},Dn.collectLayoutChanges=function(n,r,i){for(var s=n.nodes(),o={},a=0,l=0,c=r.length;a<c;a+=t){if(i){var d=Object.assign({},n.getNodeAttributes(s[l]));d.x=r[a],d.y=r[a+1],d=i(s[l],d),o[s[l]]={x:d.x,y:d.y}}else o[s[l]]={x:r[a],y:r[a+1]};l++}return o},Dn.createWorker=function(r){var i=window.URL||window.webkitURL,s=r.toString(),o=i.createObjectURL(new Blob(["("+s+").call(this);"],{type:"text/javascript"})),a=new Worker(o);return i.revokeObjectURL(o),a},Dn}var Sl,Ff;function C2(){return Ff||(Ff=1,Sl={linLogMode:!1,outboundAttractionDistribution:!1,adjustSizes:!1,edgeWeightInfluence:1,scalingRatio:1,strongGravityMode:!1,gravity:1,slowDown:1,barnesHutOptimize:!1,barnesHutTheta:.5}),Sl}var Tl,$f;function S2(){if($f)return Tl;$f=1;var t=by(),e=k2().createEdgeWeightGetter,n=A2(),r=x2(),i=C2();function s(l,c,d){if(!t(c))throw new Error("graphology-layout-forceatlas2: the given graph is not a valid graphology instance.");typeof d=="number"&&(d={iterations:d});var u=d.iterations;if(typeof u!="number")throw new Error("graphology-layout-forceatlas2: invalid number of iterations.");if(u<=0)throw new Error("graphology-layout-forceatlas2: you should provide a positive number of iterations.");var h=e("getEdgeWeight"in d?d.getEdgeWeight:"weight").fromEntry,f=typeof d.outputReducer=="function"?d.outputReducer:null,p=r.assign({},i,d.settings),y=r.validateSettings(p);if(y)throw new Error("graphology-layout-forceatlas2: "+y.message);var w=r.graphToByteArrays(c,h),b;for(b=0;b<u;b++)n(p,w.nodes,w.edges);if(l){r.assignLayoutChanges(c,w.nodes,f);return}return r.collectLayoutChanges(c,w.nodes)}function o(l){var c=typeof l=="number"?l:l.order;return{barnesHutOptimize:c>2e3,strongGravityMode:!0,gravity:.05,scalingRatio:10,slowDown:1+Math.log(c)}}var a=s.bind(null,!1);return a.assign=s.bind(null,!0),a.inferSettings=o,Tl=a,Tl}var T2=S2();const N2=Ps(T2),zf=Ze({prefix:"GraphTooltip",level:"info"}),lo={MAX_WIDTH:300,PADDING:15,ANIMATION_DURATION:150,Z_INDEX:1e4};class R2{constructor(e={}){this.options={maxWidth:e.maxWidth||lo.MAX_WIDTH,padding:e.padding||lo.PADDING,animationDuration:e.animationDuration||lo.ANIMATION_DURATION,contentBuilder:e.contentBuilder||null,zIndex:e.zIndex||lo.Z_INDEX},this.element=null,this.currentNode=null,this.isDestroyed=!1,this.darkModeQuery=null,this.darkModeHandler=null,this._createTooltip()}isDarkMode(){return document.documentElement.classList.contains("dark")||document.body.classList.contains("dark")?!0:window.matchMedia?.("(prefers-color-scheme: dark)").matches||!1}_createTooltip(){this.element&&this.element.remove(),this.darkModeQuery&&this.darkModeHandler&&this.darkModeQuery.removeEventListener("change",this.darkModeHandler);const e=this.isDarkMode();this.element=document.createElement("div"),this.element.className="graph-tooltip",this.element.setAttribute("role","tooltip"),this.element.setAttribute("aria-hidden","true"),Object.assign(this.element.style,{position:"absolute",padding:"10px 14px",borderRadius:"8px",fontSize:"12px",fontFamily:"system-ui, -apple-system, sans-serif",pointerEvents:"none",opacity:"0",visibility:"hidden",zIndex:this.options.zIndex,maxWidth:`${this.options.maxWidth}px`,lineHeight:"1.6",backdropFilter:"blur(8px)",transition:`opacity ${this.options.animationDuration}ms ease, visibility ${this.options.animationDuration}ms ease`}),this._updateStyles(e),document.body.appendChild(this.element),window.matchMedia&&(this.darkModeQuery=window.matchMedia("(prefers-color-scheme: dark)"),this.darkModeHandler=n=>{!this.isDestroyed&&this.element&&this._updateStyles(this.isDarkMode())},this.darkModeQuery.addEventListener("change",this.darkModeHandler)),zf.debug("Tooltip created")}_updateStyles(e){this.element&&(e?Object.assign(this.element.style,{background:"rgba(30, 30, 35, 0.95)",color:"#f9fafb",border:"1px solid rgba(255, 255, 255, 0.1)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4), 0 2px 8px rgba(0, 0, 0, 0.3)"}):Object.assign(this.element.style,{background:"rgba(255, 255, 255, 0.98)",color:"#1a1a1a",border:"1px solid rgba(0, 0, 0, 0.08)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.12), 0 2px 8px rgba(0, 0, 0, 0.08)"}))}escapeHtml(e){if(typeof e!="string")return String(e);const n=document.createElement("div");return n.textContent=e,n.innerHTML}buildContent(e){if(!e)return"";if(this.options.contentBuilder)return this.options.contentBuilder(e);const n=[],r=this.isDarkMode();n.push(`<div style="font-weight: 600; margin-bottom: 6px; font-size: 13px;"> ${this.escapeHtml(String(e.id))}</div>`);const i=new Set(["id","x","y","fx","fy","vx","vy","index","__data__","__transition__","label","size","color","hidden","forceLabel","type","highlighted","zIndex"]),s=["relationship","gender","avatar","group","community"],o=["degree","eigenvector","betweenness","clustering","closeness","centrality","pagerank"];s.forEach(c=>{if(e[c]!==void 0&&e[c]!==null&&!i.has(c)){const d=e[c];if(c==="relationship")n.push(`<div style="margin-bottom: 3px;"><strong> Relationship:</strong> ${this.escapeHtml(d)}</div>`);else if(c==="gender"){const h={male:{emoji:"",text:"Male"},female:{emoji:"",text:"Female"},other:{emoji:"",text:"Other"}}[d]||{emoji:"",text:d};n.push(`<div style="margin-bottom: 3px;"><strong>Gender:</strong> ${h.emoji} ${h.text}</div>`)}else if(c==="avatar")n.push(`<div style="margin-bottom: 3px;"><strong>Avatar:</strong> ${d}</div>`);else if(c==="group")n.push(`<div style="margin-bottom: 3px;"><strong>Group:</strong> ${d}</div>`);else if(c==="community")n.push(`<div style="margin-bottom: 3px;"><strong> Community:</strong> ${d}</div>`);else{const u=c.charAt(0).toUpperCase()+c.slice(1).replace(/_/g," ");n.push(`<div style="margin-bottom: 3px;"><strong>${u}:</strong> ${this.escapeHtml(String(d))}</div>`)}}}),o.forEach(c=>{if(e[c]!==void 0&&e[c]!==null&&!i.has(c)){const d=e[c],u=c.charAt(0).toUpperCase()+c.slice(1).replace(/_/g," ");if(c==="centrality"&&e.eigenvector!==void 0)return;typeof d=="number"?n.push(`<div style="margin-bottom: 2px;"><strong>${u}:</strong> ${d.toFixed(4)}</div>`):n.push(`<div style="margin-bottom: 2px;"><strong>${u}:</strong> ${this.escapeHtml(String(d))}</div>`)}});const a=new Set([...s,...o]),l=Object.keys(e).filter(c=>!i.has(c)&&!a.has(c)&&e[c]!==void 0&&e[c]!==null&&typeof e[c]!="function"&&!c.startsWith("__")).sort();if(l.length>0){const c=r?"rgba(255,255,255,0.15)":"rgba(0,0,0,0.1)",d=r?"rgba(249,250,251,0.8)":"rgba(0,0,0,0.7)";n.push(`<div style="margin-top: 6px; padding-top: 6px; border-top: 1px solid ${c}; font-size: 11px;">`),n.push(`<div style="margin-bottom: 4px; font-weight: 600; color: ${d};">Other Properties:</div>`),l.forEach(u=>{const h=e[u];let f;typeof h=="object"&&h!==null?Array.isArray(h)?f=`[${h.length} items]`:f=`{${Object.keys(h).length} keys}`:f=String(h);const p=u.charAt(0).toUpperCase()+u.slice(1).replace(/_/g," ");n.push(`<div style="margin-bottom: 2px; font-family: monospace; font-size: 10px;"><strong>${p}:</strong> ${this.escapeHtml(f)}</div>`)}),n.push("</div>")}return n.join("")}show(e,n){if(!this.element||this.isDestroyed)return;const r=this.buildContent(n);this.element.innerHTML=r;const i=e.clientX??e.x??0,s=e.clientY??e.y??0;this.element.style.opacity="0",this.element.style.visibility="visible",this.element.setAttribute("aria-hidden","false");const o=this.element.offsetWidth||200,a=this.element.offsetHeight||100,l=this.options.padding;let c=i+l,d=s-a-l;const u=window.innerWidth,h=window.innerHeight;c+o>u-l&&(c=i-o-l),c<l&&(c=i+l),d<l&&(d=s+l),d+a>h-l&&(d=s-a-l),this.element.style.left=`${c}px`,this.element.style.top=`${d}px`,this.element.style.opacity="1",this.currentNode=n}updatePosition(e){!this.element||!this.currentNode||this.isDestroyed||this.show(e,this.currentNode)}hide(){this.element&&(this.element.style.opacity="0",this.element.style.visibility="hidden",this.element.setAttribute("aria-hidden","true"),this.currentNode=null)}destroy(){this.isDestroyed||(zf.debug("Destroying tooltip"),this.darkModeQuery&&this.darkModeHandler&&(this.darkModeQuery.removeEventListener("change",this.darkModeHandler),this.darkModeQuery=null,this.darkModeHandler=null),this.element&&(this.element.remove(),this.element=null),this.currentNode=null,this.isDestroyed=!0)}}const L2=Ze({prefix:"NetworkGraphSigma",level:"info"}),Dt={WIDTH:800,HEIGHT:600,NODE_SIZE:8,MIN_SIZE:5,MAX_SIZE:20,SIZE_EXPONENT:.4,EDGE_COLOR:"#aaa",NODE_COLOR:"#6366f1",HOVER_COLOR:"#ef4444",SELECTED_COLOR:"#f97316"},Bf={category10:["#3b82f6","#10b981","#f59e0b","#ef4444","#6366f1","#ec4899","#06b6d4","#f97316","#14b8a6","#a855f7"],pastel:["#a6cee3","#b2df8a","#fb9a99","#fdbf6f","#cab2d6","#ffff99","#b15928","#66c2a5","#fc8d62","#8da0cb"]};function Vf(t){return typeof t=="string"?t:t?.id||String(t)}class Uf{constructor(e,n={}){if(this.container=typeof e=="string"?document.querySelector(e):e,!this.container)throw new Error("NetworkGraphSigma: Container not found");this.options={width:n.width||this.container.clientWidth||Dt.WIDTH,height:n.height||this.container.clientHeight||Dt.HEIGHT,nodeSize:n.nodeRadius||Dt.NODE_SIZE,minSize:n.minRadius||Dt.MIN_SIZE,maxSize:n.maxRadius||Dt.MAX_SIZE,sizeExponent:n.sizeExponent||Dt.SIZE_EXPONENT,sizeBy:n.sizeBy||null,colorBy:n.colorBy||"group",colorScheme:n.colorScheme||"category10",showLabels:n.showLabels!==!1,...n},this.graph=null,this.sigma=null,this.data={nodes:[],links:[]},this.isReady=!1,this.isDestroyed=!1,this.selectedNode=null,this.hoveredNode=null,this.draggedNode=null,this.isDragging=!1,this.eventHandlers=new Map,this.interactionDisabled=!1,this.sizeScale=null,this.colorMap=null,this.tooltip=new R2({contentBuilder:n.tooltipBuilder||null}),this.lastMouseEvent=null,this.simulationRunning=!1,this.simulationFrame=null,this.simulationAlpha=1,this.simulationAlphaDecay=.02,this.simulationAlphaMin=.001,this.simulationSettings={iterations:1,settings:{gravity:.5,scalingRatio:20,slowDown:1,barnesHutOptimize:!0,barnesHutTheta:.5,adjustSizes:!1,strongGravityMode:!1,outboundAttractionDistribution:!1,linLogMode:!1}},this.log=L2,this._initContainer(),this._initGraph(),this.log.info("NetworkGraphSigma initialized",{width:this.options.width,height:this.options.height})}_initContainer(){this.container.style.width||(this.container.style.width=`${this.options.width}px`),this.container.style.height||(this.container.style.height=`${this.options.height}px`),this.container.style.position="relative"}_initGraph(){this.graph=new Ve({type:"undirected",allowSelfLoops:!1})}_initSigma(){this.sigma&&(this.sigma.kill(),this.sigma=null);const e=Uy({borders:[{size:{value:.06},color:{value:"#ffffff"}},{size:{fill:!0},color:{attribute:"color"}}]}),r=this.graph.order>5e3,i=this.options.showLabels&&!r;this.sigma=new WL(this.graph,this.container,{allowInvalidContainer:!0,renderLabels:i,labelRenderedSizeThreshold:r?20:4,labelFont:"Inter, system-ui, Arial, sans-serif",labelSize:11,labelWeight:"500",labelColor:{color:"#333"},defaultNodeColor:Dt.NODE_COLOR,defaultEdgeColor:r?"#99999933":"#99999966",defaultNodeType:"bordered",nodeProgramClasses:{bordered:e},defaultEdgeType:"line",minCameraRatio:.1,maxCameraRatio:10,stagePadding:50,renderEdgeLabels:!1,enableEdgeEvents:!1,zIndex:!0,allowInvalidContainer:!0,...r&&{nodeReducer:(s,o)=>({...o,label:i?o.label:void 0})}}),this._setupEventHandlers()}_setupEventHandlers(){this.sigma&&(this.sigma.on("clickNode",({node:e})=>{this.interactionDisabled||(this._selectNode(e),this.emit("nodeClick",{node:this.graph.getNodeAttributes(e),id:e}))}),this.sigma.on("enterNode",({node:e})=>{if(this.interactionDisabled)return;this.hoveredNode=e,this._updateNodeHighlight();const n=this.graph.getNodeAttributes(e),i={...this.data.nodes.find(s=>String(s.id)===String(e))||{},...n,id:e};this.lastMouseEvent&&this.tooltip.show(this.lastMouseEvent,i),this.emit("nodeHover",{node:i,id:e})}),this.sigma.on("leaveNode",({node:e})=>{this.interactionDisabled||(this.hoveredNode=null,this._updateNodeHighlight(),this.tooltip.hide(),this.emit("nodeLeave",{node:this.graph.getNodeAttributes(e),id:e}))}),this._mouseMoveHandler=e=>{this.lastMouseEvent={clientX:e.clientX,clientY:e.clientY},this.hoveredNode&&!this.isDragging&&this.tooltip.updatePosition(this.lastMouseEvent)},this.container.addEventListener("mousemove",this._mouseMoveHandler),this.sigma.on("downNode",({node:e,event:n})=>{if(this.interactionDisabled)return;this.draggedNode=e,this.isDragging=!0,n.x,n.y,this.tooltip.hide();const r=this.graph.getNodeAttributes(e);this.graph.setNodeAttribute(e,"fx",r.x),this.graph.setNodeAttribute(e,"fy",r.y),this.sigma.getCamera().disable(),this.emit("nodeDragStart",{node:r,id:e})}),this.sigma.getMouseCaptor().on("mousemovebody",e=>{if(this.interactionDisabled||!this.isDragging||!this.draggedNode)return;const n=this.sigma.viewportToGraph({x:e.x,y:e.y});this.graph.setNodeAttribute(this.draggedNode,"x",n.x),this.graph.setNodeAttribute(this.draggedNode,"y",n.y),this.graph.setNodeAttribute(this.draggedNode,"fx",n.x),this.graph.setNodeAttribute(this.draggedNode,"fy",n.y),this.emit("nodeDrag",{node:this.graph.getNodeAttributes(this.draggedNode),id:this.draggedNode})}),this.sigma.getMouseCaptor().on("mouseup",()=>{this.isDragging&&this.draggedNode&&this.emit("nodeDragEnd",{node:this.graph.getNodeAttributes(this.draggedNode),id:this.draggedNode}),this.isDragging=!1,this.draggedNode=null,this.sigma.getCamera().enable()}),this.sigma.on("clickStage",()=>{if(this.selectedNode){const e=this.selectedNode;this._deselectNode(),this.emit("nodeDeselected",{id:e})}}))}_updateNodeHighlight(){this.sigma&&(this.sigma.setSetting("nodeReducer",(e,n)=>{const r={...n};return e===this.selectedNode?(r.color=Dt.SELECTED_COLOR,r.highlighted=!0):e===this.hoveredNode&&(r.color=Dt.HOVER_COLOR,r.highlighted=!0),r}),this.sigma.refresh())}_selectNode(e){const n=this.selectedNode;this.selectedNode=e,n&&this.emit("nodeDeselected",{id:n}),this._updateNodeHighlight(),this.emit("nodeSelected",{node:this.graph.getNodeAttributes(e),id:e})}_deselectNode(){this.selectedNode=null,this._updateNodeHighlight()}startSimulation(){if(this.simulationRunning||!this.graph||this.graph.order===0)return;this.simulationRunning=!0,this.simulationAlpha=1,this.interactionDisabled=!0;const e=this.graph.order;this.graph.size;const n=e>1e3,r=e>5e3,i=e>1e4,s=Math.sqrt(e)*10;this.simulationSettings.settings.scalingRatio=Math.max(500,s),i?(this.simulationSettings.settings.gravity=1e-4,this.simulationSettings.settings.slowDown=Math.max(this.simulationSettings.settings.slowDown,10),this.simulationSettings.settings.barnesHutTheta=.8):r?(this.simulationSettings.settings.gravity=5e-4,this.simulationSettings.settings.slowDown=Math.max(this.simulationSettings.settings.slowDown,5),this.simulationSettings.settings.barnesHutTheta=.6):n?(this.simulationSettings.settings.gravity=5e-4,this.simulationSettings.settings.slowDown=Math.max(this.simulationSettings.settings.slowDown,3),this.simulationSettings.settings.barnesHutTheta=.5):this.simulationSettings.settings.gravity=.001,this.log.info("Starting ForceAtlas2 simulation",{nodeCount:e,scaleFactor:s,scalingRatio:this.simulationSettings.settings.scalingRatio});const o=()=>{if(!(!this.simulationRunning||this.isDestroyed||!this.graph)){if(this.simulationAlpha<this.simulationAlphaMin){this.log.info("Simulation reached equilibrium"),this.simulationRunning=!1,this.interactionDisabled=!1,setTimeout(()=>{this.fitView()},100),this.emit("simulationEnd");return}if(!this.isDragging){const a={...this.simulationSettings,settings:{...this.simulationSettings.settings,slowDown:this.simulationSettings.settings.slowDown/this.simulationAlpha}};N2.assign(this.graph,a);const l=this.graph.order,c=l>1e4?this.simulationAlphaDecay*1.5:l>5e3?this.simulationAlphaDecay*1.2:this.simulationAlphaDecay;this.simulationAlpha-=this.simulationAlpha*c}if(this.draggedNode&&this.graph.hasNode(this.draggedNode)){const a=this.graph.getNodeAttributes(this.draggedNode);a.fx!==void 0&&(this.graph.setNodeAttribute(this.draggedNode,"x",a.fx),this.graph.setNodeAttribute(this.draggedNode,"y",a.fy))}this.simulationFrame=requestAnimationFrame(o)}};this.simulationFrame=requestAnimationFrame(o)}stopSimulation(){this.simulationRunning&&(this.simulationRunning=!1,this.simulationFrame&&(cancelAnimationFrame(this.simulationFrame),this.simulationFrame=null),this.interactionDisabled=!1,this.log.info("Stopped ForceAtlas2 simulation"))}toggleSimulation(){return this.simulationRunning?this.stopSimulation():this.startSimulation(),this.simulationRunning}isSimulationRunning(){return this.simulationRunning}setData(e,n){if(this.isDestroyed){this.log.warn("Cannot set data on destroyed instance");return}if(!Array.isArray(e))throw new Error("NetworkGraphSigma: nodes must be an array");if(!Array.isArray(n))throw new Error("NetworkGraphSigma: links must be an array");this.log.debug("Setting graph data",{nodeCount:e.length,linkCount:n.length}),this.data.nodes=e,this.data.links=n.map(r=>({...r,source:Vf(r.source),target:Vf(r.target)})),this.selectedNode=null,this._buildGraph(),this.sigma||this._initSigma(),this.isReady=!0,this.startSimulation(),this.emit("ready")}_buildGraph(){this.graph.clear(),this._computeScales();const e=this.data.nodes.length,n=Math.sqrt(e)*200;for(let r=0;r<this.data.nodes.length;r++){const i=this.data.nodes[r],s=String(i.id),o=i.x!==void 0?i.x:(Math.random()-.5)*n,a=i.y!==void 0?i.y:(Math.random()-.5)*n;let l=this.options.nodeSize;this.sizeScale&&i[this.options.sizeBy]!==void 0&&(l=this.sizeScale(i[this.options.sizeBy]));let c=Dt.NODE_COLOR;this.colorMap&&i[this.options.colorBy]!==void 0&&(c=this.colorMap(i[this.options.colorBy])),this.graph.addNode(s,{x:o,y:a,size:l,color:c,label:String(i.label||i.id),...i})}for(const r of this.data.links){const i=String(r.source),s=String(r.target);if(!(!this.graph.hasNode(i)||!this.graph.hasNode(s))&&i!==s&&!this.graph.hasEdge(i,s))try{this.graph.addEdge(i,s,{weight:r.weight||1,size:Math.max(1,Math.log(r.weight||1)+1),color:Dt.EDGE_COLOR})}catch{}}this.log.info("Graph built",{nodes:this.graph.order,edges:this.graph.size})}_computeScales(){if(!this.data.nodes||this.data.nodes.length===0)return;if(this.options.sizeBy){const n=this.data.nodes.map(r=>r[this.options.sizeBy]).filter(r=>r!=null&&!isNaN(r));if(n.length>0){let r=Math.min(...n),i=Math.max(...n);r===i&&(i=r+1);const s=i-r,o=this.options.sizeExponent||Dt.SIZE_EXPONENT;this.sizeScale=a=>{const l=(a-r)/s,c=Math.pow(l,o);return this.options.minSize+c*(this.options.maxSize-this.options.minSize)}}}const e=this.options.colorBy;if(e){const n=this.data.nodes.map(o=>o[e]).filter(o=>o!=null),r=[...new Set(n)],i=Bf[this.options.colorScheme]||Bf.category10,s=new Map;r.forEach((o,a)=>{s.set(o,i[a%i.length])}),this.colorMap=o=>s.get(o)||Dt.NODE_COLOR}}updateVisualEncoding(e={}){e.sizeBy!==void 0&&(this.options.sizeBy=e.sizeBy),e.minRadius!==void 0&&(this.options.minSize=e.minRadius),e.maxRadius!==void 0&&(this.options.maxSize=e.maxRadius),e.minSize!==void 0&&(this.options.minSize=e.minSize),e.maxSize!==void 0&&(this.options.maxSize=e.maxSize),e.sizeExponent!==void 0&&(this.options.sizeExponent=e.sizeExponent),e.colorBy!==void 0&&(this.options.colorBy=e.colorBy),e.colorScheme!==void 0&&(this.options.colorScheme=e.colorScheme),this._computeScales(),this.graph.forEachNode((n,r)=>{const i=this.data.nodes.find(s=>String(s.id)===n);i&&(this.sizeScale&&i[this.options.sizeBy]!==void 0&&!r.lockedSize&&this.graph.setNodeAttribute(n,"size",this.sizeScale(i[this.options.sizeBy])),this.colorMap&&i[this.options.colorBy]!==void 0&&!r.lockedColor&&this.graph.setNodeAttribute(n,"color",this.colorMap(i[this.options.colorBy])))}),this.sigma&&this.sigma.refresh()}updateCliqueEdgeColors(e){if(!this.graph)return;const n="#ef4444",r=Dt.EDGE_COLOR,i=(s,o)=>{const a=this.graph.neighbors(s),l=this.graph.neighbors(o);for(const c of a)if(c!==o&&l.includes(c))return!0;return!1};this.graph.forEachEdge((s,o,a,l)=>{const c=e&&i(a,l)?n:r;this.graph.setEdgeAttribute(s,"color",c)}),this.sigma&&this.sigma.refresh(),this.log.debug("Updated clique edge colors",{enabled:e})}updateNodeStatistics(e,n="eigenvector",r=!0){for(const i of e){const s=String(i.id),o=this.data.nodes.find(a=>String(a.id)===s);if(o&&Object.assign(o,i),this.graph.hasNode(s))for(const[a,l]of Object.entries(i))a!=="id"&&this.graph.setNodeAttribute(s,a,l)}this.updateVisualEncoding({sizeBy:n})}updateGraph(){if(!(!this.graph||!this.sigma)){this.stopSimulation();for(const e of this.data.nodes){const n=String(e.id);this.graph.hasNode(n)&&(e.x!==void 0&&this.graph.setNodeAttribute(n,"x",e.x),e.y!==void 0&&this.graph.setNodeAttribute(n,"y",e.y),e.fx!==void 0&&this.graph.setNodeAttribute(n,"x",e.fx),e.fy!==void 0&&this.graph.setNodeAttribute(n,"y",e.fy))}this.sigma.refresh(),this.emit("ready")}}lockPositions(){if(!this.data.nodes||this.data.nodes.length===0){this.log.warn("No nodes to lock");return}this.data.nodes.forEach(e=>{const n=String(e.id);if(this.graph.hasNode(n)){const r=this.graph.getNodeAttribute(n,"x"),i=this.graph.getNodeAttribute(n,"y");e.fx=r,e.fy=i,e.x=r,e.y=i}}),this.log.debug("Locked all node positions")}unlockPositions(){if(!this.data.nodes||this.data.nodes.length===0){this.log.warn("No nodes to unlock");return}this.data.nodes.forEach(e=>{e.fx=null,e.fy=null}),this.log.debug("Unlocked all node positions")}getNodeIds(){return this.data.nodes.map(e=>e.id)}hasNode(e){return this.data.nodes.some(n=>String(n.id)===String(e))}getSelectedNode(){return this.selectedNode&&this.graph.hasNode(this.selectedNode)?{id:this.selectedNode,...this.graph.getNodeAttributes(this.selectedNode)}:null}fitView(){if(!this.sigma)return;this.sigma.getCamera().animatedReset({duration:300})}getCamera(){return this.sigma?.getCamera()}getGraph(){return this.graph}on(e,n){this.eventHandlers.has(e)||this.eventHandlers.set(e,new Set),this.eventHandlers.get(e).add(n)}off(e,n){this.eventHandlers.has(e)&&this.eventHandlers.get(e).delete(n)}emit(e,n){if(this.eventHandlers.has(e))for(const r of this.eventHandlers.get(e))try{r(n)}catch(i){this.log.error("Event handler error",{eventName:e,error:i.message})}}destroy(){this.isDestroyed||(this.log.info("Destroying NetworkGraphSigma instance"),this.stopSimulation(),this._mouseMoveHandler&&this.container&&(this.container.removeEventListener("mousemove",this._mouseMoveHandler),this._mouseMoveHandler=null),this.tooltip&&(this.tooltip.destroy(),this.tooltip=null),this.sigma&&(this.sigma.kill(),this.sigma=null),this.graph&&(this.graph.clear(),this.graph=null),this.data={nodes:[],links:[]},this.eventHandlers.clear(),this.isReady=!1,this.isDestroyed=!0)}}class La{constructor(){this.nodes=new Set,this.edges=[],this.adjacencyMap=new Map}addNode(e){return this.nodes.add(e),this}addNodesFrom(e){return e.forEach(n=>this.nodes.add(n)),this}removeNode(e){if(!this.nodes.has(e))throw new Error(`Node '${e}' does not exist in the graph`);return this.nodes.delete(e),this.edges=this.edges.filter(n=>n.u!==e&&n.v!==e),this.adjacencyMap.has(e)&&(Array.from(this.adjacencyMap.get(e).keys()).forEach(n=>{this.adjacencyMap.has(n)&&this.adjacencyMap.get(n).delete(e)}),this.adjacencyMap.delete(e)),this}hasNode(e){return this.nodes.has(e)}addEdgesFrom(e){return e.forEach(([n,r,i=1])=>{this.addEdge(n,r,i)}),this}addEdge(e,n,r=1){this.nodes.add(e),this.nodes.add(n);const i={u:e,v:n,weight:r};return this.edges.push(i),this.adjacencyMap.has(e)||this.adjacencyMap.set(e,new Map),this.adjacencyMap.has(n)||this.adjacencyMap.set(n,new Map),this.adjacencyMap.get(e).set(n,r),this.adjacencyMap.get(n).set(e,r),this}getNeighbors(e){return this.adjacencyMap.has(e)?Array.from(this.adjacencyMap.get(e).keys()):[]}getAllEdges(){return this.edges}getNodeList(){return Array.from(this.nodes)}numberOfNodes(){return this.nodes.size}numberOfEdges(){return this.edges.length}removeEdge(e,n){const r=this.edges.findIndex(i=>i.u===e&&i.v===n||i.u===n&&i.v===e);if(r===-1)throw new Error(`Edge between '${e}' and '${n}' does not exist`);return this.edges.splice(r,1),this.adjacencyMap.has(e)&&this.adjacencyMap.get(e).delete(n),this.adjacencyMap.has(n)&&this.adjacencyMap.get(n).delete(e),this}hasEdge(e,n){return this.adjacencyMap.has(e)&&this.adjacencyMap.get(e).has(n)}getEdgeWeight(e,n){return this.hasEdge(e,n)?this.adjacencyMap.get(e).get(n):null}updateEdgeWeight(e,n,r){if(!this.hasEdge(e,n))throw new Error(`Edge between '${e}' and '${n}' does not exist`);this.adjacencyMap.get(e).set(n,r),this.adjacencyMap.get(n).set(e,r);const i=this.edges.find(s=>s.u===e&&s.v===n||s.u===n&&s.v===e);return i&&(i.weight=r),this}degree(e){return this.adjacencyMap.has(e)?this.adjacencyMap.get(e).size:0}clear(){return this.nodes.clear(),this.edges=[],this.adjacencyMap.clear(),this}}class ki{constructor(e){this.workerScript=e,this.worker=null}static create(e){if(typeof globalThis<"u"&&globalThis.__USE_MOCK_WORKERS__)return new D2(e);if(typeof Worker<"u")return new Fd(e);if(typeof require<"u")try{return require.resolve("worker_threads"),new I2(e)}catch{throw new Error("Worker Threads not available in this Node.js version")}else throw new Error("No worker support available in this environment")}static isSupported(){if(typeof Worker<"u")return!0;if(typeof require<"u")try{return require.resolve("worker_threads"),!0}catch{return!1}return!1}postMessage(e,n=[]){throw new Error("Must implement postMessage")}onMessage(e){throw new Error("Must implement onMessage")}onError(e){throw new Error("Must implement onError")}terminate(){throw new Error("Must implement terminate")}}class Fd extends ki{constructor(e){super(e),this.worker=new Worker(e,{type:"module"})}static fromCode(e){const n=new Blob([e],{type:"application/javascript"}),r=URL.createObjectURL(n);return new Fd(r)}postMessage(e,n=[]){this.worker.postMessage(e,n)}onMessage(e){this.worker.onmessage=n=>e(n.data)}onError(e){this.worker.onerror=n=>{e(new Error(n.message||"Worker error"))}}terminate(){this.worker&&(this.worker.terminate(),this.worker=null)}}class I2 extends ki{constructor(e){super(e);const{Worker:n}=require("worker_threads");this.worker=new n(e)}postMessage(e,n=[]){this.worker.postMessage(e,n)}onMessage(e){this.worker.on("message",e)}onError(e){this.worker.on("error",n=>{e(n)}),this.worker.on("exit",n=>{n!==0&&e(new Error(`Worker stopped with exit code ${n}`))})}terminate(){this.worker&&(this.worker.terminate(),this.worker=null)}}class D2 extends ki{constructor(e){super(e),this.messageHandler=null}postMessage(e,n=[]){setTimeout(async()=>{if(this.messageHandler)try{const r=await this.executeSync(e);this.messageHandler({id:e.id,status:"complete",result:r})}catch(r){this.errorHandler?this.errorHandler(r):this.messageHandler({id:e.id,status:"error",error:r.message||"Unknown error",stack:r.stack})}},0)}onMessage(e){this.messageHandler=e}onError(e){this.errorHandler=e}terminate(){this.messageHandler=null,this.errorHandler=null}async executeSync(e){const{executeTask:n}=await R(async()=>{const{executeTask:r}=await import("./module-registry-C-ZrOdjI-BRYZ7eR_.js");return{executeTask:r}},[]);return n(e)}}class P2{constructor(e={}){this.maxWorkers=e.maxWorkers||this.detectCPUCount(),this.workerScript=e.workerScript||this.getDefaultWorkerScript(),this.taskTimeout=e.taskTimeout||3e5,this.verbose=e.verbose||!1,this.affinityCacheLimit=e.affinityCacheLimit||50,this.enableAffinity=e.enableAffinity!==!1,this.workers=[],this.availableWorkers=[],this.taskQueue=[],this.activeTasks=new Map,this.taskIdCounter=0,this.initialized=!1,this.affinityMetrics={hits:0,misses:0},this.log=Ze({prefix:"WorkerPool",level:this.verbose?"debug":"info"})}detectCPUCount(){if(typeof navigator<"u"&&navigator.hardwareConcurrency)return navigator.hardwareConcurrency;if(typeof require<"u")try{return require("os").cpus().length}catch{}return 4}getDefaultWorkerScript(){return typeof window<"u"?new URL("data:text/javascript;base64,LyoqCiAqIE5ldHdvcmsgV29ya2VyIC0gRXhlY3V0ZXMgY29tcHV0ZSBmdW5jdGlvbnMgZnJvbSBhbGdvcml0aG0gbW9kdWxlcwogKgogKiAqKkJ1bmRsZXItRnJpZW5kbHkgQXJjaGl0ZWN0dXJlOioqCiAqIC0gU3RhdGljYWxseSBpbXBvcnRzIGFsbCBhbGdvcml0aG0gbW9kdWxlcyB1cGZyb250CiAqIC0gQ3JlYXRlcyBhIHJlZ2lzdHJ5IHRoYXQgbWFwcyBtb2R1bGUgcGF0aHMgdG8gdGhlaXIgZXhwb3J0cwogKiAtIE1haW4gdGhyZWFkIHNlbmRzOiB7IGlkLCBtb2R1bGUsIGZ1bmN0aW9uTmFtZSwgYXJncyB9CiAqIC0gV29ya2VyIGxvb2tzIHVwIG1vZHVsZSBmcm9tIHJlZ2lzdHJ5IGFuZCBleGVjdXRlcyBmdW5jdGlvbgogKgogKiBUaGlzIGFwcHJvYWNoIHdvcmtzIHdpdGggYWxsIGJ1bmRsZXJzIChWaXRlLCBXZWJwYWNrLCBSb2xsdXApIGJlY2F1c2UKICogaW1wb3J0cyBhcmUga25vd24gYXQgYnVpbGQgdGltZS4KICoKICogQG1vZHVsZSBuZXR3b3JrLXdvcmtlcgogKi8KCmltcG9ydCB7IGNyZWF0ZUxvZ2dlciB9IGZyb20gJ0BndWluZXRpay9sb2dnZXInOwoKLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQovLyBTVEFUSUMgSU1QT1JUUyAtIEFsbCBhbGdvcml0aG0gbW9kdWxlcyBpbXBvcnRlZCB1cGZyb250Ci8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KCi8vIENyZWF0ZSBsb2dnZXIgZm9yIHdvcmtlciAocnVucyBpbiBzZXBhcmF0ZSBjb250ZXh0LCBubyB3aW5kb3cubG9nRmlsdGVyKQpjb25zdCBsb2cgPSBjcmVhdGVMb2dnZXIoewogIHByZWZpeDogJ25ldHdvcmstd29ya2VyJywKICBsZXZlbDogJ2luZm8nIC8vIFdvcmtlcnMgZGVmYXVsdCB0byBpbmZvIGxldmVsCn0pOwoKLy8gU3RhdGlzdGljcyBhbGdvcml0aG1zIChub2RlLWxldmVsIGFuZCBncmFwaC1sZXZlbCkKaW1wb3J0ICogYXMgbm9kZVN0YXRzQ29tcHV0ZSBmcm9tICcuLi9zdGF0aXN0aWNzL2FsZ29yaXRobXMvbm9kZS1zdGF0cy5qcyc7CmltcG9ydCAqIGFzIGdyYXBoU3RhdHNDb21wdXRlIGZyb20gJy4uL3N0YXRpc3RpY3MvYWxnb3JpdGhtcy9ncmFwaC1zdGF0cy5qcyc7CgovLyBDb21tdW5pdHkgZGV0ZWN0aW9uIGFsZ29yaXRobXMKaW1wb3J0ICogYXMgbG91dmFpbkNvbXB1dGUgZnJvbSAnLi4vY29tbXVuaXR5L2FsZ29yaXRobXMvbG91dmFpbi5qcyc7CgovLyBMYXlvdXQgYWxnb3JpdGhtcwppbXBvcnQgKiBhcyByYW5kb21Db21wdXRlIGZyb20gJy4uL2xheW91dHMvcmFuZG9tLmpzJzsKaW1wb3J0ICogYXMgY2lyY3VsYXJDb21wdXRlIGZyb20gJy4uL2xheW91dHMvY2lyY3VsYXIuanMnOwppbXBvcnQgKiBhcyBzcGlyYWxDb21wdXRlIGZyb20gJy4uL2xheW91dHMvc3BpcmFsLmpzJzsKaW1wb3J0ICogYXMgc2hlbGxDb21wdXRlIGZyb20gJy4uL2xheW91dHMvc2hlbGwuanMnOwppbXBvcnQgKiBhcyBzcGVjdHJhbENvbXB1dGUgZnJvbSAnLi4vbGF5b3V0cy9zcGVjdHJhbC5qcyc7CmltcG9ydCAqIGFzIGZvcmNlRGlyZWN0ZWRDb21wdXRlIGZyb20gJy4uL2xheW91dHMvZm9yY2UtZGlyZWN0ZWQuanMnOwppbXBvcnQgKiBhcyBrYW1hZGFLYXdhaUNvbXB1dGUgZnJvbSAnLi4vbGF5b3V0cy9rYW1hZGEta2F3YWkuanMnOwppbXBvcnQgKiBhcyBiaXBhcnRpdGVDb21wdXRlIGZyb20gJy4uL2xheW91dHMvYmlwYXJ0aXRlLmpzJzsKaW1wb3J0ICogYXMgbXVsdGlwYXJ0aXRlQ29tcHV0ZSBmcm9tICcuLi9sYXlvdXRzL211bHRpcGFydGl0ZS5qcyc7CmltcG9ydCAqIGFzIGJmc0NvbXB1dGUgZnJvbSAnLi4vbGF5b3V0cy9iZnMuanMnOwoKLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQovLyBNT0RVTEUgUkVHSVNUUlkgLSBNYXBzIG1vZHVsZSBwYXRocyB0byB0aGVpciBleHBvcnRzCi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KCmNvbnN0IE1PRFVMRV9SRUdJU1RSWSA9IHsKICAvLyBOb2RlLWxldmVsIHN0YXRpc3RpY3MgKGFsbCBpbiBvbmUgZmlsZSkKICAnLi4vc3RhdGlzdGljcy9hbGdvcml0aG1zL25vZGUtc3RhdHMuanMnOiBub2RlU3RhdHNDb21wdXRlLAoKICAvLyBHcmFwaC1sZXZlbCBzdGF0aXN0aWNzCiAgJy4uL3N0YXRpc3RpY3MvYWxnb3JpdGhtcy9ncmFwaC1zdGF0cy5qcyc6IGdyYXBoU3RhdHNDb21wdXRlLAoKICAvLyBDb21tdW5pdHkKICAnLi4vY29tbXVuaXR5L2FsZ29yaXRobXMvbG91dmFpbi5qcyc6IGxvdXZhaW5Db21wdXRlLAoKICAvLyBMYXlvdXRzCiAgJy4uL2xheW91dHMvcmFuZG9tLmpzJzogcmFuZG9tQ29tcHV0ZSwKICAnLi4vbGF5b3V0cy9jaXJjdWxhci5qcyc6IGNpcmN1bGFyQ29tcHV0ZSwKICAnLi4vbGF5b3V0cy9zcGlyYWwuanMnOiBzcGlyYWxDb21wdXRlLAogICcuLi9sYXlvdXRzL3NoZWxsLmpzJzogc2hlbGxDb21wdXRlLAogICcuLi9sYXlvdXRzL3NwZWN0cmFsLmpzJzogc3BlY3RyYWxDb21wdXRlLAogICcuLi9sYXlvdXRzL2ZvcmNlLWRpcmVjdGVkLmpzJzogZm9yY2VEaXJlY3RlZENvbXB1dGUsCiAgJy4uL2xheW91dHMva2FtYWRhLWthd2FpLmpzJzoga2FtYWRhS2F3YWlDb21wdXRlLAogICcuLi9sYXlvdXRzL2JpcGFydGl0ZS5qcyc6IGJpcGFydGl0ZUNvbXB1dGUsCiAgJy4uL2xheW91dHMvbXVsdGlwYXJ0aXRlLmpzJzogbXVsdGlwYXJ0aXRlQ29tcHV0ZSwKICAnLi4vbGF5b3V0cy9iZnMuanMnOiBiZnNDb21wdXRlCn07CgovLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ci8vIFdPUktFUiBNRVNTQUdFIEhBTkRMRVIKLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQoKLyoqCiAqIE1haW4gbWVzc2FnZSBoYW5kbGVyIC0gcmVjZWl2ZXMgdGFza3MgYW5kIGRlbGVnYXRlcyB0byBhbGdvcml0aG0gbW9kdWxlcwogKi8Kc2VsZi5vbm1lc3NhZ2UgPSBhc3luYyBmdW5jdGlvbihldmVudCkgewogIGNvbnN0IHsgaWQsIG1vZHVsZSwgZnVuY3Rpb25OYW1lLCBhcmdzID0gW10gfSA9IGV2ZW50LmRhdGE7CgogIHRyeSB7CiAgICAvLyBWYWxpZGF0ZSBtZXNzYWdlIGZvcm1hdAogICAgaWYgKCFtb2R1bGUgfHwgIWZ1bmN0aW9uTmFtZSkgewogICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgdGFzazogbW9kdWxlIGFuZCBmdW5jdGlvbk5hbWUgYXJlIHJlcXVpcmVkJyk7CiAgICB9CgogICAgbG9nLmRlYnVnKCdQcm9jZXNzaW5nIHRhc2snLCB7CiAgICAgIGlkLAogICAgICBtb2R1bGUsCiAgICAgIGZ1bmN0aW9uTmFtZSwKICAgICAgYXJnc0xlbmd0aDogYXJncz8ubGVuZ3RoIHx8IDAKICAgIH0pOwoKICAgIC8vIENyZWF0ZSBwcm9ncmVzcyBjYWxsYmFjayB0aGF0IHJlcG9ydHMgYmFjayB0byBtYWluIHRocmVhZAogICAgY29uc3QgcHJvZ3Jlc3NDYWxsYmFjayA9IChwcm9ncmVzcykgPT4gewogICAgICBzZWxmLnBvc3RNZXNzYWdlKHsKICAgICAgICBpZCwKICAgICAgICBzdGF0dXM6ICdwcm9ncmVzcycsCiAgICAgICAgcHJvZ3Jlc3M6IE1hdGgubWluKE1hdGgubWF4KHByb2dyZXNzLCAwKSwgMSkgLy8gQ2xhbXAgdG8gWzAsIDFdCiAgICAgIH0pOwogICAgfTsKCiAgICAvLyBMb29rIHVwIGFsZ29yaXRobSBtb2R1bGUgZnJvbSByZWdpc3RyeQogICAgY29uc3QgYWxnb3JpdGhtTW9kdWxlID0gTU9EVUxFX1JFR0lTVFJZW21vZHVsZV07CgogICAgaWYgKCFhbGdvcml0aG1Nb2R1bGUpIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKAogICAgICAgIGBNb2R1bGUgJyR7bW9kdWxlfScgbm90IGZvdW5kIGluIHJlZ2lzdHJ5LiBgICsKICAgICAgICBgQXZhaWxhYmxlIG1vZHVsZXM6ICR7T2JqZWN0LmtleXMoTU9EVUxFX1JFR0lTVFJZKS5qb2luKCcsICcpfWAKICAgICAgKTsKICAgIH0KCiAgICAvLyBHZXQgdGhlIGNvbXB1dGUgZnVuY3Rpb24KICAgIGNvbnN0IGNvbXB1dGVGdW5jdGlvbiA9IGFsZ29yaXRobU1vZHVsZVtmdW5jdGlvbk5hbWVdOwoKICAgIGlmICghY29tcHV0ZUZ1bmN0aW9uIHx8IHR5cGVvZiBjb21wdXRlRnVuY3Rpb24gIT09ICdmdW5jdGlvbicpIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKAogICAgICAgIGBGdW5jdGlvbiAnJHtmdW5jdGlvbk5hbWV9JyBub3QgZm91bmQgaW4gbW9kdWxlICcke21vZHVsZX0nLiBgICsKICAgICAgICBgQXZhaWxhYmxlIGZ1bmN0aW9uczogJHtPYmplY3Qua2V5cyhhbGdvcml0aG1Nb2R1bGUpLmpvaW4oJywgJyl9YAogICAgICApOwogICAgfQoKICAgIC8vIEV4ZWN1dGUgdGhlIGNvbXB1dGUgZnVuY3Rpb24KICAgIC8vIExhc3QgYXJnIGlzIGFsd2F5cyB0aGUgcHJvZ3Jlc3MgY2FsbGJhY2sKICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNvbXB1dGVGdW5jdGlvbiguLi5hcmdzLCBwcm9ncmVzc0NhbGxiYWNrKTsKCiAgICAvLyBTZW5kIHN1Y2Nlc3NmdWwgcmVzdWx0CiAgICBzZWxmLnBvc3RNZXNzYWdlKHsKICAgICAgaWQsCiAgICAgIHN0YXR1czogJ2NvbXBsZXRlJywKICAgICAgcmVzdWx0CiAgICB9KTsKCiAgfSBjYXRjaCAoZXJyb3IpIHsKICAgIC8vIFNlbmQgZXJyb3IKICAgIGxvZy5lcnJvcignVGFzayBmYWlsZWQnLCB7CiAgICAgIGlkLAogICAgICBlcnJvcjogZXJyb3IubWVzc2FnZSwKICAgICAgc3RhY2s6IGVycm9yLnN0YWNrCiAgICB9KTsKICAgIHNlbGYucG9zdE1lc3NhZ2UoewogICAgICBpZCwKICAgICAgc3RhdHVzOiAnZXJyb3InLAogICAgICBlcnJvcjogZXJyb3IubWVzc2FnZSB8fCAnVW5rbm93biBlcnJvcicsCiAgICAgIHN0YWNrOiBlcnJvci5zdGFjawogICAgfSk7CiAgfQp9OwoKLyoqCiAqIEhhbmRsZSB3b3JrZXIgZXJyb3JzCiAqLwpzZWxmLm9uZXJyb3IgPSBmdW5jdGlvbihlcnJvcikgewogIGxvZy5lcnJvcignV29ya2VyIGVycm9yJywgewogICAgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfHwgJ1dvcmtlciBlcnJvciBvY2N1cnJlZCcsCiAgICBzdGFjazogZXJyb3Iuc3RhY2sKICB9KTsKICBzZWxmLnBvc3RNZXNzYWdlKHsKICAgIHN0YXR1czogJ2Vycm9yJywKICAgIGVycm9yOiBlcnJvci5tZXNzYWdlIHx8ICdXb3JrZXIgZXJyb3Igb2NjdXJyZWQnCiAgfSk7Cn07CgovLyBMb2cgd29ya2VyIGluaXRpYWxpemF0aW9uCmxvZy5pbmZvKCdJbml0aWFsaXplZCcsIHsgbW9kdWxlQ291bnQ6IE9iamVjdC5rZXlzKE1PRFVMRV9SRUdJU1RSWSkubGVuZ3RoIH0pOwo=",import.meta.url).href:typeof require<"u"?require("path").join(__dirname,"network-worker.js"):"./network-worker.js"}async initialize(){if(!this.initialized){if(!ki.isSupported())throw new Error("Workers not supported in this environment");this.log.debug("Initializing worker pool",{maxWorkers:this.maxWorkers});try{for(let e=0;e<this.maxWorkers;e++){const n=await this.createWorker(e);this.workers.push(n),this.availableWorkers.push(n)}this.initialized=!0,this.log.info("Worker pool initialized successfully",{workerCount:this.maxWorkers})}catch(e){throw this.log.error("Failed to initialize worker pool",{error:e.message,stack:e.stack}),await this.terminate(),e}}}async createWorker(e){const n=ki.create(this.workerScript);return n.id=e,n.currentTaskId=null,n.cachedFunctions=new Set,n.tasksExecuted=0,n.lastTaskTime=0,n.onMessage(r=>{this.handleWorkerMessage(n,r)}),n.onError(r=>{this.handleWorkerError(n,r)}),this.log.debug("Worker created",{workerId:e}),n}async execute(e,n={}){if(!this.initialized)throw new Error("Worker pool not initialized. Call initialize() first.");return new Promise((r,i)=>{const s=`task_${this.taskIdCounter++}`,o={id:s,...e},a=n.timeout||this.taskTimeout,l=setTimeout(()=>{this.handleTaskTimeout(s)},a);this.activeTasks.set(s,{resolve:r,reject:i,onProgress:n.onProgress,timeoutId:l,startTime:Date.now(),task:o});const c=this._selectWorker(o);c?this.assignTask(c,o):(this.taskQueue.push(o),this.log.debug("Task queued",{taskId:s,queueLength:this.taskQueue.length}))})}assignTask(e,n){e.currentTaskId=n.id,e.postMessage(n)}_getAffinityKey(e){return e&&e.module&&e.functionName?`${e.module}:${e.functionName}`:null}_selectWorker(e){if(this.availableWorkers.length===0)return null;if(!this.enableAffinity){const i=this.availableWorkers.pop();return this.log.debug("Worker selected (affinity disabled)",{workerId:i.id,taskId:e.id}),i}const n=this._getAffinityKey(e);if(n){const i=this.availableWorkers.find(s=>s.cachedFunctions.has(n));if(i)return this._recordAffinityHit(),this.log.info(" Worker selected via affinity",{workerId:i.id,taskId:e.id,affinityKey:n,cachedFunctions:Array.from(i.cachedFunctions)}),this.log.debug("Worker selected via affinity (detailed)",{workerId:i.id,taskId:e.id,affinityKey:n,cachedFunctions:Array.from(i.cachedFunctions),tasksExecuted:i.tasksExecuted}),this._removeFromAvailable(i);this._recordAffinityMiss(),this.log.debug("No affinity match found",{taskId:e.id,affinityKey:n,availableWorkers:this.availableWorkers.length})}const r=this.availableWorkers.reduce((i,s)=>s.tasksExecuted<i.tasksExecuted?s:i);return this.log.debug("Worker selected (least loaded)",{workerId:r.id,taskId:e.id,tasksExecuted:r.tasksExecuted,affinityKey:n||"none"}),this._removeFromAvailable(r)}_removeFromAvailable(e){const n=this.availableWorkers.indexOf(e);return n>-1&&this.availableWorkers.splice(n,1),e}_recordAffinityHit(){this.affinityMetrics.hits++}_recordAffinityMiss(){this.affinityMetrics.misses++}_updateWorkerAffinity(e,n){const r=this._getAffinityKey(n);if(!r)return;const i=!e.cachedFunctions.has(r);if(e.cachedFunctions.add(r),e.tasksExecuted++,e.lastTaskTime=Date.now(),i&&(this.log.info(" Worker affinity cache updated",{workerId:e.id,affinityKey:r,cacheSize:e.cachedFunctions.size,tasksExecuted:e.tasksExecuted}),this.log.debug("Worker affinity cache updated (detailed)",{workerId:e.id,affinityKey:r,cacheSize:e.cachedFunctions.size,tasksExecuted:e.tasksExecuted,allCachedFunctions:Array.from(e.cachedFunctions)})),e.cachedFunctions.size>this.affinityCacheLimit){const s=e.cachedFunctions.size;this._evictAffinityEntries(e),this.log.debug("Worker affinity cache evicted",{workerId:e.id,beforeSize:s,afterSize:e.cachedFunctions.size,limit:this.affinityCacheLimit})}}_evictAffinityEntries(e){const n=Array.from(e.cachedFunctions),r=n.slice(0,Math.floor(n.length/2));r.forEach(i=>e.cachedFunctions.delete(i)),this.log.debug("Evicted affinity entries",{workerId:e.id,evicted:r.length,remaining:e.cachedFunctions.size})}handleWorkerMessage(e,n){const{id:r,status:i,result:s,progress:o,error:a}=n,l=this.activeTasks.get(r);if(!l){this.log.warn("Received message for unknown task",{taskId:r});return}if(i==="progress")l.onProgress&&l.onProgress(o),this.log.debug("Task progress",{taskId:r,progress:Math.round(o*100)});else if(i==="complete"){const c=Date.now()-l.startTime;this.log.debug("Task completed",{taskId:r,duration:c}),clearTimeout(l.timeoutId),l.resolve(s),l.task&&this._updateWorkerAffinity(e,l.task),this.activeTasks.delete(r),this.freeWorker(e)}else i==="error"&&(this.log.error("Task failed",{taskId:r,error:a}),clearTimeout(l.timeoutId),l.reject(new Error(a)),this.activeTasks.delete(r),this.freeWorker(e))}handleWorkerError(e,n){if(this.log.error("Worker error",{workerId:e.id,error:n.message,stack:n.stack}),e.currentTaskId){const r=this.activeTasks.get(e.currentTaskId);r&&(clearTimeout(r.timeoutId),r.reject(n),this.activeTasks.delete(e.currentTaskId))}this.restartWorker(e)}handleTaskTimeout(e){const n=this.activeTasks.get(e);if(!n)return;this.log.warn("Task timed out",{taskId:e,timeout:this.taskTimeout}),n.reject(new Error(`Task timed out after ${this.taskTimeout}ms`)),this.activeTasks.delete(e);const r=this.workers.find(i=>i.currentTaskId===e);r&&this.restartWorker(r)}freeWorker(e){if(e.currentTaskId=null,this.taskQueue.length>0){const n=this.taskQueue.shift();this.assignTask(e,n),this.log.debug("Task assigned from queue",{taskId:n.id,workerId:e.id})}else this.availableWorkers.push(e)}async restartWorker(e){const n=this.workers.indexOf(e);if(n!==-1){this.log.debug("Restarting worker",{workerId:e.id});try{e.terminate();const r=await this.createWorker(e.id);this.workers[n]=r,this.availableWorkers.push(r),this.log.info("Worker restarted successfully",{workerId:e.id,lostAffinityEntries:e.cachedFunctions?.size||0})}catch(r){this.log.error("Failed to restart worker",{workerId:e.id,error:r.message,stack:r.stack}),this.workers.splice(n,1)}}}async waitForActiveTasks(e=5e3){if(this.activeTasks.size!==0)return this.log.debug("Waiting for active tasks",{taskCount:this.activeTasks.size,timeout:e}),new Promise(n=>{const r=Date.now(),i=setInterval(()=>{(this.activeTasks.size===0||Date.now()-r>e)&&(clearInterval(i),this.log.debug("Wait complete",{remainingTasks:this.activeTasks.size}),n())},100)})}async terminate(e=!1){this.initialized&&(this.log.info("Terminating worker pool",{force:e}),e||await this.waitForActiveTasks(5e3),this.activeTasks.forEach((n,r)=>{clearTimeout(n.timeoutId),n.reject(new Error("Worker pool terminated"))}),this.activeTasks.clear(),this.workers.forEach(n=>{try{n.terminate()}catch(r){this.log.error("Error terminating worker",{workerId:n.id,error:r.message})}}),this.workers=[],this.availableWorkers=[],this.taskQueue=[],this.initialized=!1,this.log.info("Worker pool terminated"))}getStatus(){const e=this.getAffinityStats();return{initialized:this.initialized,totalWorkers:this.workers.length,availableWorkers:this.availableWorkers.length,busyWorkers:this.workers.length-this.availableWorkers.length,activeTasks:this.activeTasks.size,queuedTasks:this.taskQueue.length,affinity:{enabled:this.enableAffinity,cacheLimit:this.affinityCacheLimit,hitRate:e.hitRate}}}getAffinityStats(){const e=this.affinityMetrics.hits+this.affinityMetrics.misses;return{hits:this.affinityMetrics.hits,misses:this.affinityMetrics.misses,hitRate:e>0?this.affinityMetrics.hits/e:0,workerCaches:this.workers.map(n=>({workerId:n.id,cachedFunctions:Array.from(n.cachedFunctions||[]),tasksExecuted:n.tasksExecuted||0}))}}}class $n{constructor(){if($n.instance)return $n.instance;this.workerPool=null,this.initialized=!1,this.initPromise=null,this.log=Ze({prefix:"WorkerManager",level:"info"}),$n.instance=this}async initialize(e={}){if(this.initPromise)return this.initPromise;if(this.initialized&&this.workerPool)return Promise.resolve();this.initPromise=this._doInitialize(e);try{await this.initPromise}finally{this.initPromise=null}}async _doInitialize(e){const{maxWorkers:n,workerScript:r,taskTimeout:i=3e5,verbose:s=!1,enableAffinity:o=!0,affinityCacheLimit:a=50}=e;this.log.setLevel(s?"debug":"info");let l=r;if(!l)try{l=new URL("data:text/javascript;base64,LyoqCiAqIE5ldHdvcmsgV29ya2VyIC0gRXhlY3V0ZXMgY29tcHV0ZSBmdW5jdGlvbnMgZnJvbSBhbGdvcml0aG0gbW9kdWxlcwogKgogKiAqKkJ1bmRsZXItRnJpZW5kbHkgQXJjaGl0ZWN0dXJlOioqCiAqIC0gU3RhdGljYWxseSBpbXBvcnRzIGFsbCBhbGdvcml0aG0gbW9kdWxlcyB1cGZyb250CiAqIC0gQ3JlYXRlcyBhIHJlZ2lzdHJ5IHRoYXQgbWFwcyBtb2R1bGUgcGF0aHMgdG8gdGhlaXIgZXhwb3J0cwogKiAtIE1haW4gdGhyZWFkIHNlbmRzOiB7IGlkLCBtb2R1bGUsIGZ1bmN0aW9uTmFtZSwgYXJncyB9CiAqIC0gV29ya2VyIGxvb2tzIHVwIG1vZHVsZSBmcm9tIHJlZ2lzdHJ5IGFuZCBleGVjdXRlcyBmdW5jdGlvbgogKgogKiBUaGlzIGFwcHJvYWNoIHdvcmtzIHdpdGggYWxsIGJ1bmRsZXJzIChWaXRlLCBXZWJwYWNrLCBSb2xsdXApIGJlY2F1c2UKICogaW1wb3J0cyBhcmUga25vd24gYXQgYnVpbGQgdGltZS4KICoKICogQG1vZHVsZSBuZXR3b3JrLXdvcmtlcgogKi8KCmltcG9ydCB7IGNyZWF0ZUxvZ2dlciB9IGZyb20gJ0BndWluZXRpay9sb2dnZXInOwoKLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQovLyBTVEFUSUMgSU1QT1JUUyAtIEFsbCBhbGdvcml0aG0gbW9kdWxlcyBpbXBvcnRlZCB1cGZyb250Ci8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KCi8vIENyZWF0ZSBsb2dnZXIgZm9yIHdvcmtlciAocnVucyBpbiBzZXBhcmF0ZSBjb250ZXh0LCBubyB3aW5kb3cubG9nRmlsdGVyKQpjb25zdCBsb2cgPSBjcmVhdGVMb2dnZXIoewogIHByZWZpeDogJ25ldHdvcmstd29ya2VyJywKICBsZXZlbDogJ2luZm8nIC8vIFdvcmtlcnMgZGVmYXVsdCB0byBpbmZvIGxldmVsCn0pOwoKLy8gU3RhdGlzdGljcyBhbGdvcml0aG1zIChub2RlLWxldmVsIGFuZCBncmFwaC1sZXZlbCkKaW1wb3J0ICogYXMgbm9kZVN0YXRzQ29tcHV0ZSBmcm9tICcuLi9zdGF0aXN0aWNzL2FsZ29yaXRobXMvbm9kZS1zdGF0cy5qcyc7CmltcG9ydCAqIGFzIGdyYXBoU3RhdHNDb21wdXRlIGZyb20gJy4uL3N0YXRpc3RpY3MvYWxnb3JpdGhtcy9ncmFwaC1zdGF0cy5qcyc7CgovLyBDb21tdW5pdHkgZGV0ZWN0aW9uIGFsZ29yaXRobXMKaW1wb3J0ICogYXMgbG91dmFpbkNvbXB1dGUgZnJvbSAnLi4vY29tbXVuaXR5L2FsZ29yaXRobXMvbG91dmFpbi5qcyc7CgovLyBMYXlvdXQgYWxnb3JpdGhtcwppbXBvcnQgKiBhcyByYW5kb21Db21wdXRlIGZyb20gJy4uL2xheW91dHMvcmFuZG9tLmpzJzsKaW1wb3J0ICogYXMgY2lyY3VsYXJDb21wdXRlIGZyb20gJy4uL2xheW91dHMvY2lyY3VsYXIuanMnOwppbXBvcnQgKiBhcyBzcGlyYWxDb21wdXRlIGZyb20gJy4uL2xheW91dHMvc3BpcmFsLmpzJzsKaW1wb3J0ICogYXMgc2hlbGxDb21wdXRlIGZyb20gJy4uL2xheW91dHMvc2hlbGwuanMnOwppbXBvcnQgKiBhcyBzcGVjdHJhbENvbXB1dGUgZnJvbSAnLi4vbGF5b3V0cy9zcGVjdHJhbC5qcyc7CmltcG9ydCAqIGFzIGZvcmNlRGlyZWN0ZWRDb21wdXRlIGZyb20gJy4uL2xheW91dHMvZm9yY2UtZGlyZWN0ZWQuanMnOwppbXBvcnQgKiBhcyBrYW1hZGFLYXdhaUNvbXB1dGUgZnJvbSAnLi4vbGF5b3V0cy9rYW1hZGEta2F3YWkuanMnOwppbXBvcnQgKiBhcyBiaXBhcnRpdGVDb21wdXRlIGZyb20gJy4uL2xheW91dHMvYmlwYXJ0aXRlLmpzJzsKaW1wb3J0ICogYXMgbXVsdGlwYXJ0aXRlQ29tcHV0ZSBmcm9tICcuLi9sYXlvdXRzL211bHRpcGFydGl0ZS5qcyc7CmltcG9ydCAqIGFzIGJmc0NvbXB1dGUgZnJvbSAnLi4vbGF5b3V0cy9iZnMuanMnOwoKLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQovLyBNT0RVTEUgUkVHSVNUUlkgLSBNYXBzIG1vZHVsZSBwYXRocyB0byB0aGVpciBleHBvcnRzCi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KCmNvbnN0IE1PRFVMRV9SRUdJU1RSWSA9IHsKICAvLyBOb2RlLWxldmVsIHN0YXRpc3RpY3MgKGFsbCBpbiBvbmUgZmlsZSkKICAnLi4vc3RhdGlzdGljcy9hbGdvcml0aG1zL25vZGUtc3RhdHMuanMnOiBub2RlU3RhdHNDb21wdXRlLAoKICAvLyBHcmFwaC1sZXZlbCBzdGF0aXN0aWNzCiAgJy4uL3N0YXRpc3RpY3MvYWxnb3JpdGhtcy9ncmFwaC1zdGF0cy5qcyc6IGdyYXBoU3RhdHNDb21wdXRlLAoKICAvLyBDb21tdW5pdHkKICAnLi4vY29tbXVuaXR5L2FsZ29yaXRobXMvbG91dmFpbi5qcyc6IGxvdXZhaW5Db21wdXRlLAoKICAvLyBMYXlvdXRzCiAgJy4uL2xheW91dHMvcmFuZG9tLmpzJzogcmFuZG9tQ29tcHV0ZSwKICAnLi4vbGF5b3V0cy9jaXJjdWxhci5qcyc6IGNpcmN1bGFyQ29tcHV0ZSwKICAnLi4vbGF5b3V0cy9zcGlyYWwuanMnOiBzcGlyYWxDb21wdXRlLAogICcuLi9sYXlvdXRzL3NoZWxsLmpzJzogc2hlbGxDb21wdXRlLAogICcuLi9sYXlvdXRzL3NwZWN0cmFsLmpzJzogc3BlY3RyYWxDb21wdXRlLAogICcuLi9sYXlvdXRzL2ZvcmNlLWRpcmVjdGVkLmpzJzogZm9yY2VEaXJlY3RlZENvbXB1dGUsCiAgJy4uL2xheW91dHMva2FtYWRhLWthd2FpLmpzJzoga2FtYWRhS2F3YWlDb21wdXRlLAogICcuLi9sYXlvdXRzL2JpcGFydGl0ZS5qcyc6IGJpcGFydGl0ZUNvbXB1dGUsCiAgJy4uL2xheW91dHMvbXVsdGlwYXJ0aXRlLmpzJzogbXVsdGlwYXJ0aXRlQ29tcHV0ZSwKICAnLi4vbGF5b3V0cy9iZnMuanMnOiBiZnNDb21wdXRlCn07CgovLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ci8vIFdPUktFUiBNRVNTQUdFIEhBTkRMRVIKLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQoKLyoqCiAqIE1haW4gbWVzc2FnZSBoYW5kbGVyIC0gcmVjZWl2ZXMgdGFza3MgYW5kIGRlbGVnYXRlcyB0byBhbGdvcml0aG0gbW9kdWxlcwogKi8Kc2VsZi5vbm1lc3NhZ2UgPSBhc3luYyBmdW5jdGlvbihldmVudCkgewogIGNvbnN0IHsgaWQsIG1vZHVsZSwgZnVuY3Rpb25OYW1lLCBhcmdzID0gW10gfSA9IGV2ZW50LmRhdGE7CgogIHRyeSB7CiAgICAvLyBWYWxpZGF0ZSBtZXNzYWdlIGZvcm1hdAogICAgaWYgKCFtb2R1bGUgfHwgIWZ1bmN0aW9uTmFtZSkgewogICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgdGFzazogbW9kdWxlIGFuZCBmdW5jdGlvbk5hbWUgYXJlIHJlcXVpcmVkJyk7CiAgICB9CgogICAgbG9nLmRlYnVnKCdQcm9jZXNzaW5nIHRhc2snLCB7CiAgICAgIGlkLAogICAgICBtb2R1bGUsCiAgICAgIGZ1bmN0aW9uTmFtZSwKICAgICAgYXJnc0xlbmd0aDogYXJncz8ubGVuZ3RoIHx8IDAKICAgIH0pOwoKICAgIC8vIENyZWF0ZSBwcm9ncmVzcyBjYWxsYmFjayB0aGF0IHJlcG9ydHMgYmFjayB0byBtYWluIHRocmVhZAogICAgY29uc3QgcHJvZ3Jlc3NDYWxsYmFjayA9IChwcm9ncmVzcykgPT4gewogICAgICBzZWxmLnBvc3RNZXNzYWdlKHsKICAgICAgICBpZCwKICAgICAgICBzdGF0dXM6ICdwcm9ncmVzcycsCiAgICAgICAgcHJvZ3Jlc3M6IE1hdGgubWluKE1hdGgubWF4KHByb2dyZXNzLCAwKSwgMSkgLy8gQ2xhbXAgdG8gWzAsIDFdCiAgICAgIH0pOwogICAgfTsKCiAgICAvLyBMb29rIHVwIGFsZ29yaXRobSBtb2R1bGUgZnJvbSByZWdpc3RyeQogICAgY29uc3QgYWxnb3JpdGhtTW9kdWxlID0gTU9EVUxFX1JFR0lTVFJZW21vZHVsZV07CgogICAgaWYgKCFhbGdvcml0aG1Nb2R1bGUpIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKAogICAgICAgIGBNb2R1bGUgJyR7bW9kdWxlfScgbm90IGZvdW5kIGluIHJlZ2lzdHJ5LiBgICsKICAgICAgICBgQXZhaWxhYmxlIG1vZHVsZXM6ICR7T2JqZWN0LmtleXMoTU9EVUxFX1JFR0lTVFJZKS5qb2luKCcsICcpfWAKICAgICAgKTsKICAgIH0KCiAgICAvLyBHZXQgdGhlIGNvbXB1dGUgZnVuY3Rpb24KICAgIGNvbnN0IGNvbXB1dGVGdW5jdGlvbiA9IGFsZ29yaXRobU1vZHVsZVtmdW5jdGlvbk5hbWVdOwoKICAgIGlmICghY29tcHV0ZUZ1bmN0aW9uIHx8IHR5cGVvZiBjb21wdXRlRnVuY3Rpb24gIT09ICdmdW5jdGlvbicpIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKAogICAgICAgIGBGdW5jdGlvbiAnJHtmdW5jdGlvbk5hbWV9JyBub3QgZm91bmQgaW4gbW9kdWxlICcke21vZHVsZX0nLiBgICsKICAgICAgICBgQXZhaWxhYmxlIGZ1bmN0aW9uczogJHtPYmplY3Qua2V5cyhhbGdvcml0aG1Nb2R1bGUpLmpvaW4oJywgJyl9YAogICAgICApOwogICAgfQoKICAgIC8vIEV4ZWN1dGUgdGhlIGNvbXB1dGUgZnVuY3Rpb24KICAgIC8vIExhc3QgYXJnIGlzIGFsd2F5cyB0aGUgcHJvZ3Jlc3MgY2FsbGJhY2sKICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNvbXB1dGVGdW5jdGlvbiguLi5hcmdzLCBwcm9ncmVzc0NhbGxiYWNrKTsKCiAgICAvLyBTZW5kIHN1Y2Nlc3NmdWwgcmVzdWx0CiAgICBzZWxmLnBvc3RNZXNzYWdlKHsKICAgICAgaWQsCiAgICAgIHN0YXR1czogJ2NvbXBsZXRlJywKICAgICAgcmVzdWx0CiAgICB9KTsKCiAgfSBjYXRjaCAoZXJyb3IpIHsKICAgIC8vIFNlbmQgZXJyb3IKICAgIGxvZy5lcnJvcignVGFzayBmYWlsZWQnLCB7CiAgICAgIGlkLAogICAgICBlcnJvcjogZXJyb3IubWVzc2FnZSwKICAgICAgc3RhY2s6IGVycm9yLnN0YWNrCiAgICB9KTsKICAgIHNlbGYucG9zdE1lc3NhZ2UoewogICAgICBpZCwKICAgICAgc3RhdHVzOiAnZXJyb3InLAogICAgICBlcnJvcjogZXJyb3IubWVzc2FnZSB8fCAnVW5rbm93biBlcnJvcicsCiAgICAgIHN0YWNrOiBlcnJvci5zdGFjawogICAgfSk7CiAgfQp9OwoKLyoqCiAqIEhhbmRsZSB3b3JrZXIgZXJyb3JzCiAqLwpzZWxmLm9uZXJyb3IgPSBmdW5jdGlvbihlcnJvcikgewogIGxvZy5lcnJvcignV29ya2VyIGVycm9yJywgewogICAgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfHwgJ1dvcmtlciBlcnJvciBvY2N1cnJlZCcsCiAgICBzdGFjazogZXJyb3Iuc3RhY2sKICB9KTsKICBzZWxmLnBvc3RNZXNzYWdlKHsKICAgIHN0YXR1czogJ2Vycm9yJywKICAgIGVycm9yOiBlcnJvci5tZXNzYWdlIHx8ICdXb3JrZXIgZXJyb3Igb2NjdXJyZWQnCiAgfSk7Cn07CgovLyBMb2cgd29ya2VyIGluaXRpYWxpemF0aW9uCmxvZy5pbmZvKCdJbml0aWFsaXplZCcsIHsgbW9kdWxlQ291bnQ6IE9iamVjdC5rZXlzKE1PRFVMRV9SRUdJU1RSWSkubGVuZ3RoIH0pOwo=",import.meta.url).href}catch{l="/graph-js/src/compute/network-worker.js",this.log.warn("Could not resolve worker path from import.meta.url, using fallback",{workerPath:l})}if(!ki.isSupported())throw new Error("Web Workers are not supported in this environment. This library requires Web Worker support (browser) or Worker Threads (Node.js).");this.workerPool=new P2({maxWorkers:n||this._getDefaultWorkerCount(),workerScript:l,taskTimeout:i,verbose:s,enableAffinity:o,affinityCacheLimit:a}),await this.workerPool.initialize(),this.initialized=!0,this.log.info("Initialized successfully",{workerCount:this.workerPool.maxWorkers})}_getDefaultWorkerCount(){if(typeof navigator<"u"&&navigator.hardwareConcurrency)return navigator.hardwareConcurrency;try{return require("os").cpus().length}catch{return 4}}async execute(e,n={}){return this.initialized||await this.initialize(),this.workerPool.execute(e,n)}serializeGraph(e){return{nodes:Array.from(e.nodes),edges:e.edges.map(n=>({source:n.u,target:n.v,weight:n.weight}))}}getStatus(){return this.workerPool?this.workerPool.getStatus():null}getAffinityStats(){return this.workerPool?this.workerPool.getAffinityStats():null}async terminate(e=!1){this.workerPool&&(await this.workerPool.terminate(e),this.workerPool=null,this.initialized=!1)}static reset(){$n.instance&&($n.instance.terminate(!0),$n.instance=null)}}$n.instance=null;const An=new $n,$t=Ze({prefix:"compute-utils",level:"info"});function Qe(t){$t.debug("Starting reconstruction",{isObject:t&&typeof t=="object",hasNodes:t&&"nodes"in t,hasEdges:t&&"edges"in t,graphDataKeys:t?Object.keys(t):"N/A"});const e=new La;if(!t||typeof t!="object")return $t.error("Invalid graphData passed to reconstructGraph",{graphData:t}),e;if(t.nodes!==void 0&&t.nodes!==null){$t.debug("Processing nodes",{type:typeof t.nodes,isArray:Array.isArray(t.nodes),length:Array.isArray(t.nodes)?t.nodes.length:"N/A"});try{let n;if(Array.isArray(t.nodes))n=t.nodes;else if(t.nodes[Symbol.iterator])n=Array.from(t.nodes);else throw new Error(`nodes is not iterable: ${typeof t.nodes}`);$t.debug("Node array created",{length:n.length}),n.forEach(r=>{e.addNode(r)}),$t.debug("Nodes added successfully",{type:typeof e.nodes,size:e.nodes.size})}catch(n){throw $t.error("Error adding nodes",{error:n.message,stack:n.stack,nodesValue:t.nodes,nodesType:typeof t.nodes,nodesConstructor:t.nodes?.constructor?.name}),new Error(`Failed to reconstruct nodes: ${n.message}`)}}else $t.warn("No nodes found in graphData");if(t.edges!==void 0&&t.edges!==null){$t.debug("Processing edges",{type:typeof t.edges,isArray:Array.isArray(t.edges),length:Array.isArray(t.edges)?t.edges.length:"N/A"});try{let n;if(Array.isArray(t.edges))n=t.edges;else if(t.edges[Symbol.iterator])n=Array.from(t.edges);else throw new Error(`edges is not iterable: ${typeof t.edges}`);$t.debug("Edge array created",{length:n.length}),n.forEach(r=>{const i=r.source!==void 0?r.source:r.u,s=r.target!==void 0?r.target:r.v,o=r.weight||1;i!==void 0&&s!==void 0&&e.addEdge(i,s,o)}),$t.debug("Edges added successfully")}catch(n){throw $t.error("Error adding edges",{error:n.message,stack:n.stack,edgesValue:t.edges,edgesType:typeof t.edges}),new Error(`Failed to reconstruct edges: ${n.message}`)}}else $t.warn("No edges found in graphData");return $t.debug("Reconstruction complete",{nodes:e.nodes.size,edges:e.edges.length}),e}function fe(t,e){t&&typeof t=="function"&&t(Math.min(Math.max(e,0),1))}function G2(t,e){const n=new Map([[e,0]]),r=new Map([[e,1]]),i=new Map,s=[e],o=[];for(;s.length>0;){const a=s.shift();o.push(a);const l=t.getNeighbors(a),c=n.get(a);l.forEach(d=>{n.has(d)||(n.set(d,c+1),s.push(d)),n.get(d)===c+1&&(r.set(d,(r.get(d)||0)+r.get(a)),i.has(d)||i.set(d,[]),i.get(d).push(a))})}return{distance:n,pathCount:r,predecessors:i,stack:o}}function jy(t,e){const n=new Map,r=[e],i=new Set([e]);for(n.set(e,0);r.length>0;){const s=r.shift(),o=n.get(s);for(const a of t.getNeighbors(s))i.has(a)||(i.add(a),r.push(a),n.set(a,o+1))}return n}function Hy(t,e){const n=t.getNeighbors(e),r=n.length;if(r<2)return 0;let i=0;for(let s=0;s<n.length;s++)for(let o=s+1;o<n.length;o++)t.hasEdge(n[s],n[o])&&i++;return 2*i/(r*(r-1))}function M2(t,e){const n=t.getNeighbors(e);let r=0;for(let i=0;i<n.length;i++)for(let s=i+1;s<n.length;s++)t.hasEdge(n[i],n[s])&&r++;return r}function Cr(t){const e=Math.sqrt(Object.values(t).reduce((n,r)=>n+r*r,0));return e>0&&Object.keys(t).forEach(n=>{t[n]/=e}),t}function Wy(t,e){const n=Object.keys(t);let r=0;for(const i of n)r+=Math.abs((t[i]||0)-(e[i]||0));return r}class pt{constructor(e,n="",r="node",i=null){if(new.target===pt)throw new Error("StatisticAlgorithm is abstract and cannot be instantiated directly");if(r!=="node"&&r!=="graph")throw new Error(`Scope must be 'node' or 'graph', got: ${r}`);if(!i||!i.module||!i.functionName)throw new Error("computeConfig with module and functionName is required");this.name=e,this.description=n,this.scope=r,this.computeConfig=i,this.options={}}async calculate(e,n=null,r={}){const i=An.serializeGraph(e),s={module:this.computeConfig.module,functionName:this.computeConfig.functionName,args:[i,n,this.options]};return await An.execute(s,r)}getInfo(){return{name:this.name,description:this.description,scope:this.scope}}isNodeLevel(){return this.scope==="node"}isGraphLevel(){return this.scope==="graph"}}class qy extends pt{constructor(){super("degree","Number of connections per node","node",{module:"../statistics/algorithms/node-stats.js",functionName:"degreeCompute"})}}class Ky extends pt{constructor(e={}){super("closeness","Average distance to all other nodes (inverted)","node",{module:"../statistics/algorithms/node-stats.js",functionName:"closenessCompute"}),this.options={normalized:e.normalized!==!1}}}class Xy extends pt{constructor(e={}){super("ego-density","Density of connections among neighbors","node",{module:"../statistics/algorithms/node-stats.js",functionName:"egoDensityCompute"}),this.options={radius:e.radius||1}}}class Zy extends pt{constructor(){super("betweenness","Frequency on shortest paths between other nodes","node",{module:"../statistics/algorithms/node-stats.js",functionName:"betweennessCompute"})}}class Yy extends pt{constructor(){super("clustering","Local clustering coefficient","node",{module:"../statistics/algorithms/node-stats.js",functionName:"clusteringCompute"})}}class Jy extends pt{constructor(e={}){super("eigenvector","Importance based on neighbor importance","node",{module:"../statistics/algorithms/node-stats.js",functionName:"eigenvectorCompute"}),this.options={maxIter:e.maxIter||100,tolerance:e.tolerance||1e-6}}}class Qy extends pt{constructor(e={}){super("pagerank","PageRank importance score with damping","node",{module:"../statistics/algorithms/node-stats.js",functionName:"pageRankCompute"}),this.options={dampingFactor:e.dampingFactor??.85,maxIter:e.maxIter??100,tolerance:e.tolerance??1e-6}}}class ev extends pt{constructor(e={}){super("eigenvector-laplacian","X,Y coordinates from Laplacian eigenvectors","node",{module:"../statistics/algorithms/node-stats.js",functionName:"eigenvectorLaplacianCompute"}),this.options={maxIter:e.maxIter||100,tolerance:e.tolerance||1e-6}}}class tv extends pt{constructor(){super("cliques","Number of maximal cliques per node","node",{module:"../statistics/algorithms/node-stats.js",functionName:"cliquesCompute"})}}async function O2(t,e,n,r){const i=Qe(t),s=e||Array.from(i.nodes),o={};return s.forEach((a,l)=>{o[a]=i.degree(a),l%100===0&&fe(r,l/s.length)}),fe(r,1),o}async function F2(t,e,n,r){const i=Qe(t),s=e||Array.from(i.nodes),o=Array.from(i.nodes),a={};o.forEach(d=>{a[d]=0}),s.forEach((d,u)=>{const h=G2(i,d);$2(a,h,o,d),u%Math.max(1,Math.floor(s.length/10))===0&&fe(r,u/s.length)});const l=o.length,c=l>2?2/((l-1)*(l-2)):1;return o.forEach(d=>{a[d]*=c}),fe(r,1),a}function $2(t,e,n,r){const{pathCount:i,predecessors:s,stack:o}=e,a=new Map;for(n.forEach(l=>{a.set(l,0)});o.length>0;){const l=o.pop();(s.get(l)||[]).forEach(c=>{const d=i.get(c)/i.get(l)*(1+a.get(l));a.set(c,a.get(c)+d)}),l!==r&&(t[l]+=a.get(l))}}async function z2(t,e,n,r){const i=Qe(t),s=e||Array.from(i.nodes),o={};return s.forEach((a,l)=>{o[a]=Hy(i,a),l%100===0&&fe(r,l/s.length)}),fe(r,1),o}async function B2(t,e,n,r){const i=Qe(t),{maxIter:s=100,tolerance:o=1e-6}=n||{},a=Array.from(i.nodes),l=a.length;let c={};a.forEach(d=>{c[d]=1/l});for(let d=0;d<s;d++){const u={};a.forEach(f=>{u[f]=0}),a.forEach(f=>{i.getNeighbors(f).forEach(p=>{const y=i.adjacencyMap.get(f).get(p);u[p]+=c[f]*y})}),Cr(u);const h=Wy(u,c);if(c=u,d%10===0&&fe(r,d/s),h<o)break}return fe(r,1),c}async function V2(t,e,n,r){const i=Qe(t),{dampingFactor:s=.85,maxIter:o=100,tolerance:a=1e-6}=n||{},l=Array.from(i.nodes),c=l.length;if(c===0)return fe(r,1),{};let d={};l.forEach(y=>{d[y]=1/c});const u={};l.forEach(y=>{u[y]=i.getNeighbors(y).length});const h=l.filter(y=>u[y]===0),f=(1-s)/c;for(let y=0;y<o;y++){const w={};let b=0;h.forEach(_=>{b+=d[_]});const E=s*b/c;l.forEach(_=>{w[_]=f+E}),l.forEach(_=>{const x=i.getNeighbors(_);if(x.length>0){const T=s*d[_]/x.length;x.forEach(L=>{w[L]+=T})}});const k=Wy(w,d);if(d=w,y%10===0&&fe(r,y/o),k<a)break}const p=Object.values(d).reduce((y,w)=>y+w,0);return p>0&&l.forEach(y=>{d[y]/=p}),fe(r,1),d}async function U2(t,e,n,r){const i=Qe(t),s=e||Array.from(i.nodes),o={};return s.forEach((a,l)=>{o[a]=M2(i,a),l%100===0&&fe(r,l/s.length)}),fe(r,1),o}async function j2(t,e,n,r){const i=Qe(t),s=e||Array.from(i.nodes),o=Array.from(i.nodes).length,a={},l=n?.normalized!==!1;return s.forEach((c,d)=>{const u=new Map,h=[c],f=new Set([c]);for(u.set(c,0);h.length>0;){const y=h.shift(),w=u.get(y);for(const b of i.getNeighbors(y))f.has(b)||(f.add(b),h.push(b),u.set(b,w+1))}const p=u.size-1;if(p===0)a[c]=0;else{const y=Array.from(u.values()).reduce((w,b)=>w+b,0);if(y===0)a[c]=0;else{const w=p/y;a[c]=l?w*(p/(o-1)):w}}d%100===0&&fe(r,d/s.length)}),fe(r,1),a}async function H2(t,e,n,r){const i=Qe(t),s=e||Array.from(i.nodes),o={};return s.forEach((a,l)=>{const c=i.getNeighbors(a),d=c.length;if(d<2)o[a]=0;else{let u=0;for(let f=0;f<d;f++)for(let p=f+1;p<d;p++)i.hasEdge(c[f],c[p])&&u++;const h=d*(d-1)/2;o[a]=u/h}l%100===0&&fe(r,l/s.length)}),fe(r,1),o}async function W2(t,e,n,r){const i=Qe(t),s=Array.from(i.nodes),o=s.length;if(o<3){const p={};return s.forEach(y=>{p[y]={laplacian_x:Math.random()*2-1,laplacian_y:Math.random()*2-1}}),fe(r,1),p}const{maxIter:a=100,tolerance:l=1e-6}=n||{},c=Array(o).fill(null).map(()=>Array(o).fill(0)),d=new Map;s.forEach((p,y)=>d.set(p,y));for(let p=0;p<o;p++){const y=s[p],w=i.getNeighbors(y);c[p][p]=w.length,w.forEach(b=>{const E=d.get(b);E!==void 0&&(c[p][E]=-1)})}fe(r,.2);const u=Array(o).fill(0).map(()=>Math.random()),h=Array(o).fill(0).map(()=>Math.random());Cr(u),Cr(h);for(let p=0;p<a;p++){const y=jf(c,u);Cr(y);let w=0;for(let b=0;b<o;b++)w+=Math.abs(y[b]-u[b]);if(w<l)break;for(let b=0;b<o;b++)u[b]=y[b];p%20===0&&fe(r,.2+p/a*.4)}fe(r,.6),Nl(h,u),Cr(h);for(let p=0;p<a;p++){const y=jf(c,h);Cr(y),Nl(y,u),Nl(y,h),Cr(y);let w=0;for(let b=0;b<o;b++)w+=Math.abs(y[b]-h[b]);if(w<l)break;for(let b=0;b<o;b++)h[b]=y[b];p%20===0&&fe(r,.6+p/a*.39)}fe(r,.99);const f={};return s.forEach((p,y)=>{f[p]={laplacian_x:u[y],laplacian_y:h[y]}}),fe(r,1),f}function jf(t,e){const n=t.length,r=Array(n).fill(0);for(let i=0;i<n;i++)for(let s=0;s<n;s++)r[i]+=t[i][s]*e[s];return r}function Nl(t,e){let n=0;for(let r=0;r<t.length;r++)n+=t[r]*e[r];for(let r=0;r<t.length;r++)t[r]-=n*e[r]}const N6=Object.freeze(Object.defineProperty({__proto__:null,BetweennessStatistic:Zy,CliquesStatistic:tv,ClosenessStatistic:Ky,ClusteringStatistic:Yy,DegreeStatistic:qy,EgoDensityStatistic:Xy,EigenvectorLaplacianStatistic:ev,EigenvectorStatistic:Jy,PageRankStatistic:Qy,betweennessCompute:F2,cliquesCompute:U2,closenessCompute:j2,clusteringCompute:z2,degreeCompute:O2,egoDensityCompute:H2,eigenvectorCompute:B2,eigenvectorLaplacianCompute:W2,pageRankCompute:V2},Symbol.toStringTag,{value:"Module"}));class nv extends pt{constructor(){super("density","Ratio of actual edges to possible edges","graph",{module:"../statistics/algorithms/graph-stats.js",functionName:"densityCompute"})}}class rv extends pt{constructor(){super("diameter","Longest shortest path in the graph","graph",{module:"../statistics/algorithms/graph-stats.js",functionName:"diameterCompute"})}}class iv extends pt{constructor(){super("average_clustering","Mean clustering coefficient across all nodes","graph",{module:"../statistics/algorithms/graph-stats.js",functionName:"averageClusteringCompute"})}}class sv extends pt{constructor(){super("average_shortest_path","Mean distance between all node pairs","graph",{module:"../statistics/algorithms/graph-stats.js",functionName:"averageShortestPathCompute"})}}class ov extends pt{constructor(){super("connected_components","Number of disconnected subgraphs","graph",{module:"../statistics/algorithms/graph-stats.js",functionName:"connectedComponentsCompute"})}}class av extends pt{constructor(){super("average_degree","Mean number of connections per node","graph",{module:"../statistics/algorithms/graph-stats.js",functionName:"averageDegreeCompute"})}}async function q2(t,e,n,r){const i=Qe(t),s=i.nodes.size,o=i.edges.length;if(s<2)return 0;const a=s*(s-1)/2,l=o/a;return fe(r,1),l}async function K2(t,e,n,r){const i=Qe(t),s=Array.from(i.nodes);let o=0;return s.forEach((a,l)=>{const c=jy(i,a);for(const d of c.values())d>o&&(o=d);l%Math.max(1,Math.floor(s.length/10))===0&&fe(r,l/s.length)}),fe(r,1),o}async function X2(t,e,n,r){const i=Qe(t),s=Array.from(i.nodes);let o=0;return s.forEach((a,l)=>{o+=Hy(i,a),l%100===0&&fe(r,l/s.length)}),fe(r,1),s.length>0?o/s.length:0}async function Z2(t,e,n,r){const i=Qe(t),s=Array.from(i.nodes);let o=0,a=0;return s.forEach((l,c)=>{jy(i,l).forEach((d,u)=>{u!==l&&(a+=d,o++)}),c%Math.max(1,Math.floor(s.length/10))===0&&fe(r,c/s.length)}),fe(r,1),o>0?a/o:0}async function Y2(t,e,n,r){const i=Qe(t),s=Array.from(i.nodes),o=new Set,a={};let l=0;return s.forEach(c=>{if(!o.has(c)){const d=[c];for(o.add(c),a[c]=l;d.length>0;){const u=d.shift();for(const h of i.getNeighbors(u))o.has(h)||(o.add(h),d.push(h),a[h]=l)}l++}}),fe(r,1),{count:l,components:a}}async function J2(t,e,n,r){const i=Qe(t),s=Array.from(i.nodes);let o=0;return s.forEach(a=>{o+=i.getNeighbors(a).length}),fe(r,1),s.length>0?o/s.length:0}const R6=Object.freeze(Object.defineProperty({__proto__:null,AverageClusteringStatistic:iv,AverageDegreeStatistic:av,AverageShortestPathStatistic:sv,ConnectedComponentsStatistic:ov,DensityStatistic:nv,DiameterStatistic:rv,averageClusteringCompute:X2,averageDegreeCompute:J2,averageShortestPathCompute:Z2,connectedComponentsCompute:Y2,densityCompute:q2,diameterCompute:K2},Symbol.toStringTag,{value:"Module"}));class Ia{constructor(e,n="",r=null){if(new.target===Ia)throw new Error("CommunityAlgorithm is abstract and cannot be instantiated directly");if(!r||!r.module||!r.functionName)throw new Error("computeConfig with module and functionName is required");this.name=e,this.description=n,this.computeConfig=r,this.options={}}async detect(e,n={}){const r=An.serializeGraph(e),i={module:this.computeConfig.module,functionName:this.computeConfig.functionName,args:[r,this.options]};return{...await An.execute(i,n),algorithm:this.name}}getInfo(){return{name:this.name,description:this.description}}}class Es extends Ia{constructor(e={}){super("louvain","Louvain method for community detection using modularity optimization",{module:"../community/algorithms/louvain.js",functionName:"louvainCompute"}),this.options={resolution:e.resolution||1,maxIterations:e.maxIterations||100}}}async function Q2(t,e,n){const r=Qe(t),{resolution:i=1,maxIterations:s=100}=e||{},o=Array.from(r.nodes),a=b=>{const E=r.getNeighbors(b);let k=0;return E.forEach(_=>{k+=r.getEdgeWeight(b,_)}),k};let l=0;r.edges.forEach(b=>{l+=b.weight});const c=2*l,d={};o.forEach(b=>{d[b]=b});let u=!0,h=0;for(;u&&h<s;){u=!1,h++;for(const b of o){const E=d[b],k=r.getNeighbors(b),_=new Set;k.forEach(O=>{_.add(d[O])});const x=a(b);let T=E,L=0;_.forEach(O=>{if(O===E)return;const F=eD(r,b,E,O,d,c,i,x,a);F>L&&(L=F,T=O)}),T!==E&&(d[b]=T,u=!0)}if(fe(n,Math.min(h/s,.9)),!u)break}const f=Array.from(new Set(Object.values(d))),p={};f.forEach((b,E)=>{p[b]=E});const y={};Object.keys(d).forEach(b=>{y[b]=p[d[b]]});const w=tD(r,y,l,a);return fe(n,1),{communities:y,modularity:w,numCommunities:f.length,iterations:h}}function eD(t,e,n,r,i,s,o,a,l){const c=t.getNeighbors(e);let d=0,u=0;c.forEach(y=>{const w=t.getEdgeWeight(e,y);i[y]===r&&(d+=w),i[y]===n&&y!==e&&(u+=w)});const h=Array.from(t.nodes);let f=0,p=0;return h.forEach(y=>{i[y]===r&&(f+=l(y)),i[y]===n&&(p+=l(y))}),d/s-o*(f*a)/(s*s)-(u/s-o*(p*a)/(s*s))}function tD(t,e,n,r){if(n===0)return 0;const i=2*n,s=new Set(Object.values(e));let o=0;return s.forEach(a=>{let l=0,c=0;Object.keys(e).filter(d=>e[d]===a).forEach(d=>{c+=r(d)}),t.edges.forEach(d=>{const u=d.u,h=d.v,f=d.weight;e[u]===a&&e[h]===a&&(l+=f)}),o+=l/i-Math.pow(c/i,2)}),o}const L6=Object.freeze(Object.defineProperty({__proto__:null,LouvainAlgorithm:Es,default:Es,louvainCompute:Q2},Symbol.toStringTag,{value:"Module"}));class Da{constructor(e=null){this.graph=e}setGraph(e){return this.graph=e,this}async detectCommunities(e="louvain",n={}){if(!this.graph)throw new Error("No graph set. Use setGraph() or provide graph in constructor.");let r;if(e instanceof Ia)r=e;else if(typeof e=="string")r=this._createAlgorithmFromName(e,n);else throw new Error("Algorithm must be a CommunityAlgorithm instance or a string name");return await r.detect(this.graph,{onProgress:n.onProgress})}_createAlgorithmFromName(e,n={}){switch(e.toLowerCase()){case"louvain":return new Es(n);default:throw new Error(`Unknown community detection algorithm: ${e}`)}}calculateModularity(e){if(!this.graph)throw new Error("No graph set");const n=this.graph.numberOfEdges();if(n===0)return 0;let r=0;const i=Array.from(this.graph.nodes.keys());for(const s of i)for(const o of i)if(e[s]===e[o]){const a=this.graph.hasEdge(s,o)?this.graph.getEdgeWeight(s,o):0,l=this.graph.degree(s),c=this.graph.degree(o);r+=a-l*c/(2*n)}return r/(2*n)}static getNodesInCommunity(e,n){return Object.keys(e).filter(r=>e[r]===n)}static getCommunityGroups(e){const n={};for(const[r,i]of Object.entries(e))n[i]||(n[i]=[]),n[i].push(r);return n}static graphFromData(e){const n=new La;for(const r of e.nodes)n.addNode(r.id);for(const r of e.edges)n.addEdge(r.source,r.target,r.weight||1);return n}static async detect(e,n="louvain",r={}){const i=this.graphFromData(e);return await new Da(i).detectCommunities(n,r)}}const Hf={algorithms:[{id:"louvain",name:"Louvain Method",description:"Fast greedy algorithm that optimizes modularity",category:"modularity",complexity:"O(n log n)",bestFor:["General graphs","Large networks","Hierarchical communities"],supportsWeighted:!0,supportsDirected:!1,defaultOptions:{resolution:1,maxIterations:100}}],getAll(){return[...this.algorithms]},get(t){return this.algorithms.find(e=>e.id===t)||null},filter(t){return this.algorithms.filter(t)},getIds(){return this.algorithms.map(t=>t.id)}};class Sn{constructor(e,n={},r=null){if(!e)throw new Error("Graph is required for layout computation");if(!r||!r.module||!r.functionName)throw new Error("computeConfig with module and functionName is required");this.graph=e,this.options=n,this.computeConfig=r,this._positions=null}async computePositions(e={}){const n={...this.options,...e},{onProgress:r,timeout:i,...s}=n,o=An.serializeGraph(this.graph),a={module:this.computeConfig.module,functionName:this.computeConfig.functionName,args:[o,s]};return await An.execute(a,{onProgress:r,timeout:i})}async getPositions(e={},n=!1){return(!this._positions||n)&&(this._positions=await this.computePositions(e)),this._positions}async updateLayout(e=1){return this.getPositions({},!0)}reset(){this._positions=null}getNodes(){return this.graph.getNodeList()}getNodeCount(){return this.graph.numberOfNodes()}}class Lc extends Sn{constructor(e,n={}){super(e,{scale:100,center:{x:0,y:0},seed:null,...n},{module:"../layouts/random.js",functionName:"randomCompute"})}}async function nD(t,e,n){const r=Array.from(t.nodes||[]),{scale:i=1,center:s={x:0,y:0},seed:o=null}=e||{},a={};let l;return o!==null?l=(function(c){return function(){let d=c+=1831565813;return d=Math.imul(d^d>>>15,d|1),d^=d+Math.imul(d^d>>>7,d|61),((d^d>>>14)>>>0)/4294967296}})(o):l=Math.random,r.forEach(c=>{const d=(l()*2-1)*i+s.x,u=(l()*2-1)*i+s.y;a[c]={x:d,y:u}}),fe(n,1),a}const I6=Object.freeze(Object.defineProperty({__proto__:null,RandomLayout:Lc,default:Lc,randomCompute:nD},Symbol.toStringTag,{value:"Module"}));class Ic extends Sn{constructor(e,n={}){super(e,{scale:100,center:{x:0,y:0},sortBy:null,...n},{module:"../layouts/circular.js",functionName:"circularCompute"})}}async function rD(t,e,n){const r=Qe(t),{scale:i=1,center:s={x:0,y:0},sortBy:o=null}=e||{};let a=Array.from(r.nodes);const l=a.length;if(l===0)return fe(n,1),{};if(l===1){const d={[a[0]]:{x:s.x,y:s.y}};return fe(n,1),d}o&&typeof o=="function"&&(a=a.sort(o));const c={};return a.forEach((d,u)=>{const h=2*Math.PI*u/l;c[d]={x:Math.cos(h)*i+s.x,y:Math.sin(h)*i+s.y}}),fe(n,1),c}const D6=Object.freeze(Object.defineProperty({__proto__:null,CircularLayout:Ic,circularCompute:rD,default:Ic},Symbol.toStringTag,{value:"Module"}));class Dc extends Sn{constructor(e,n={}){super(e,{scale:100,center:{x:0,y:0},resolution:.35,equidistant:!1,...n},{module:"../layouts/spiral.js",functionName:"spiralCompute"})}}function iD(t,e=1){if(t.length===0)return t;let n=1/0,r=-1/0,i=1/0,s=-1/0;for(const[d,u]of t)n=Math.min(n,d),r=Math.max(r,d),i=Math.min(i,u),s=Math.max(s,u);const o=r-n||1,a=s-i||1,l=Math.max(o,a),c=2*e/l;return t.map(([d,u])=>[(d-n-o/2)*c+e,(u-i-a/2)*c+e])}async function sD(t,e,n){const r=Array.from(t.nodes||[]),i=r.length,{scale:s=1,center:o={x:0,y:0},resolution:a=.35,equidistant:l=!1}=e||{};if(i===0)return fe(n,1),{};if(i===1){const u={[r[0]]:{x:o.x,y:o.y}};return fe(n,1),u}let c=[];if(l){let u=.5,h=a;h+=1/(u*h);for(let f=0;f<i;f++){const p=u*h;h+=1/p,c.push([Math.cos(h)*p,Math.sin(h)*p])}}else for(let u=0;u<i;u++){const h=a*u,f=u;c.push([Math.cos(h)*f,Math.sin(h)*f])}c=iD(c,s);const d={};return r.forEach((u,h)=>{d[u]={x:c[h][0]+o.x,y:c[h][1]+o.y}}),fe(n,1),d}const P6=Object.freeze(Object.defineProperty({__proto__:null,SpiralLayout:Dc,default:Dc,spiralCompute:sD},Symbol.toStringTag,{value:"Module"}));class Pc extends Sn{constructor(e,n={}){super(e,{scale:100,center:{x:0,y:0},nlist:null,rotate:null,nodeProperties:null,...n},{module:"../layouts/shell.js",functionName:"shellCompute"})}}async function oD(t,e,n){const r=Array.from(t.nodes||[]),i=r.length,{scale:s=1,center:o={x:0,y:0},nlist:a=null,rotate:l=null,nodeProperties:c=null}=e||{},d=c instanceof Map,u=c&&typeof c=="object"&&!d,h=d?c.size>0:u?Object.keys(c).length>0:!1,f=_=>d?c.get(_):u?c[_]:null;if(i===0)return fe(n,1),{};if(i===1){const _={[r[0]]:{x:o.x,y:o.y}};return fe(n,1),_}let p;if(a&&Array.isArray(a))p=a;else{let _=new Map;if(h)r.forEach(T=>{const L=f(T),O=L&&typeof L=="object"&&L.degree||0;_.set(T,O)});else if(r.forEach(T=>{_.set(T,0)}),t.edges)for(const T of t.edges){const L=T.u!==void 0?T.u:T.source!==void 0?T.source:T[0],O=T.v!==void 0?T.v:T.target!==void 0?T.target:T[1];_.has(L)&&_.set(L,_.get(L)+1),_.has(O)&&_.set(O,_.get(O)+1)}const x=new Map;r.forEach(T=>{const L=_.get(T)||0;x.has(L)||x.set(L,[]),x.get(L).push(T)}),p=Array.from(x.keys()).sort((T,L)=>L-T).map(T=>x.get(T))}const y=s/p.length;let w;p[0].length===1?w=0:w=y;let b;l===null?b=Math.PI/p.length:b=l;const E={};let k=b;for(const _ of p){const x=_.length;if(x===0)continue;const T=[];for(let L=0;L<x;L++)T.push(2*Math.PI*L/x+k);_.forEach((L,O)=>{const F=T[O],$=w*Math.cos(F)+o.x,j=w*Math.sin(F)+o.y;E[L]={x:$,y:j}}),w+=y,k+=b}return fe(n,1),E}const G6=Object.freeze(Object.defineProperty({__proto__:null,ShellLayout:Pc,default:Pc,shellCompute:oD},Symbol.toStringTag,{value:"Module"}));class Gc extends Sn{constructor(e,n={}){super(e,{scale:100,center:{x:0,y:0},...n},{module:"../layouts/spectral.js",functionName:"spectralCompute"})}}async function aD(t,e,n){const r=Array.from(t.nodes||[]),i=r.length;console.log("[spectralCompute] Starting with",i,"nodes"),console.log("[spectralCompute] Raw options:",e),console.log("[spectralCompute] Raw options keys:",e?Object.keys(e):"null"),console.log("[spectralCompute] nodeProperties in options:",e?.nodeProperties);const{scale:s=1,center:o={x:0,y:0},nodeProperties:a=null}=e||{},l=a instanceof Map,c=a&&typeof a=="object"&&!l,d=l?a.size>0:c?Object.keys(a).length>0:!1;if(console.log("[spectralCompute] nodeProperties:",l?`Map with ${a.size} entries`:c?`Object with ${Object.keys(a).length} entries`:"null"),i===0)return fe(n,1),{};if(i===1){const w={[r[0]]:{x:o.x,y:o.y}};return fe(n,1),w}const u={},h=[],f=w=>l?a.get(w):c?a[w]:null;console.log("[spectralCompute] Processing",i,"nodes for eigenvector extraction");const p=[];for(const w of r){let b,E;if(d){const k=f(w);k&&k.laplacian_x!==void 0&&k.laplacian_y!==void 0?(b=k.laplacian_x,E=k.laplacian_y):(p.push(w),b=(Math.random()-.5)*.1,E=(Math.random()-.5)*.1,console.log(`[spectralCompute] Node "${w}" missing laplacian data, using fallback position`))}else throw new Error("Spectral layout requires eigenvector-laplacian stat. Include 'eigenvector-laplacian' in analyze() features.");h.push([b,E])}p.length>0&&console.log(`[spectralCompute] ${p.length} nodes missing laplacian data, used fallback positions`),console.log("[spectralCompute] Extracted",h.length,"coordinates. Sample:",h[0]),fe(n,.5),console.log("[spectralCompute] Starting rescaleLayout...");const y=lD(h,s);return console.log("[spectralCompute] Rescaled. Sample:",y[0]),fe(n,.99),r.forEach((w,b)=>{u[w]={x:y[b][0]+o.x,y:y[b][1]+o.y}}),console.log("[spectralCompute] Created positions for",Object.keys(u).length,"nodes"),fe(n,1),console.log("[spectralCompute] Completed successfully"),u}function lD(t,e=1){if(t.length===0)return t;let n=1/0,r=-1/0,i=1/0,s=-1/0;for(const[d,u]of t)n=Math.min(n,d),r=Math.max(r,d),i=Math.min(i,u),s=Math.max(s,u);const o=r-n||1,a=s-i||1,l=Math.max(o,a),c=2*e/l;return t.map(([d,u])=>[(d-n-o/2)*c+e,(u-i-a/2)*c+e])}const M6=Object.freeze(Object.defineProperty({__proto__:null,SpectralLayout:Gc,default:Gc,spectralCompute:aD},Symbol.toStringTag,{value:"Module"}));function Gs(t,e,n=1,r={x:0,y:0}){if(e.length===0)return t;let i=0,s=0;e.forEach(u=>{i+=t[u].x,s+=t[u].y});const o=i/e.length,a=s/e.length,l={};e.forEach(u=>{l[u]={x:t[u].x-o,y:t[u].y-a}});let c=0;e.forEach(u=>{const h=Math.abs(l[u].x),f=Math.abs(l[u].y);c=Math.max(c,h,f)});const d={};if(c>0){const u=n/c;e.forEach(h=>{d[h]={x:l[h].x*u+r.x,y:l[h].y*u+r.y}})}else e.forEach(u=>{d[u]={x:r.x,y:r.y}});return d}class Mc extends Sn{constructor(e,n={}){super(e,{iterations:50,k:null,scale:1,center:{x:0,y:0},initialPositions:null,threshold:1e-4,...n},{module:"../layouts/force-directed.js",functionName:"forceDirectedCompute"})}}async function cD(t,e,n){const r=Qe(t),{iterations:i=50,k:s=null,scale:o=1,center:a={x:0,y:0},initialPositions:l=null,threshold:c=1e-4}=e||{},d=Array.from(r.nodes),u=d.length;if(u===0)return fe(n,1),{};if(u===1){const T={[d[0]]:{x:a.x,y:a.y}};return fe(n,1),T}let h={};l?h={...l}:d.forEach(T=>{h[T]={x:Math.random(),y:Math.random()}});const f=s!==null?s:Math.sqrt(1/u);let p=1/0,y=-1/0,w=1/0,b=-1/0;d.forEach(T=>{const L=h[T];p=Math.min(p,L.x),y=Math.max(y,L.x),w=Math.min(w,L.y),b=Math.max(b,L.y)});let E=Math.max(y-p,b-w)*.1;const k=E/(i+1),_=new Map;d.forEach(T=>{const L=new Set(r.getNeighbors(T));_.set(T,L)});for(let T=0;T<i;T++){const L={};d.forEach(F=>{L[F]={x:0,y:0}}),d.forEach(F=>{const $=h[F];let j=0,z=0;d.forEach(I=>{if(I!==F){const A=h[I],D=$.x-A.x,C=$.y-A.y;let S=Math.sqrt(D*D+C*C);S<.01&&(S=.01);const U=_.get(F).has(I),H=f*f/(S*S),ne=U?S/f:0,_e=H-ne;j+=D/S*_e,z+=C/S*_e}}),L[F]={x:j,y:z}});let O=0;if(d.forEach(F=>{const $=L[F],j=Math.sqrt($.x*$.x+$.y*$.y);if(j>0){const z=Math.max(j,.01),I=E/z;h[F].x+=$.x*I,h[F].y+=$.y*I,O+=j}}),E-=k,O/u<c){fe(n,1);break}T%10===0&&fe(n,T/i)}const x=Gs(h,d,o,a);return fe(n,1),x}const O6=Object.freeze(Object.defineProperty({__proto__:null,ForceDirectedLayout:Mc,default:Mc,forceDirectedCompute:cD},Symbol.toStringTag,{value:"Module"}));class Oc extends Sn{constructor(e,n={}){super(e,{iterations:1e3,scale:1,center:{x:0,y:0},initialPositions:null,threshold:1e-4,K:null,...n},{module:"../layouts/kamada-kawai.js",functionName:"kamadaKawaiCompute"})}}async function dD(t,e,n){console.log("[Kamada-Kawai] Received graphData:",{hasNodes:"nodes"in t,nodesType:typeof t.nodes,nodesIsArray:Array.isArray(t.nodes),hasEdges:"edges"in t,edgesType:typeof t.edges,edgesIsArray:Array.isArray(t.edges)});const r=Qe(t);console.log("[Kamada-Kawai] After reconstructGraph, graph.nodes:",{type:typeof r.nodes,isSet:r.nodes instanceof Set,size:r.nodes?.size||"N/A"});const{iterations:i=100,scale:s=1,center:o={x:0,y:0},initialPositions:a=null,threshold:l=1e-4,K:c=null}=e||{},d=Array.from(r.nodes),u=d.length;if(console.log("[Kamada-Kawai] Nodes array:",{length:d.length,isArray:Array.isArray(d),sample:d.slice(0,3)}),u===0)return fe(n,1),{};if(u===1){const A={[d[0]]:{x:o.x,y:o.y}};return fe(n,1),A}fe(n,.1),console.log("[Kamada-Kawai] About to compute all-pairs shortest paths:",{nodesLength:d.length,nodesIsArray:Array.isArray(d),nodesType:typeof d});let h;try{h=uD(r,d),console.log("[Kamada-Kawai] All-pairs shortest paths computed successfully");let A=!1,D=!1,C=0,S=0;for(let U=0;U<h.length;U++)for(let H=0;H<h[U].length;H++)isFinite(h[U][H])||(A=h[U][H]===1/0,D=isNaN(h[U][H]),A&&C++,D&&S++);(C>0||S>0)&&console.warn("[Kamada-Kawai] Distances contain problematic values:",{infinityCount:C,nanCount:S,totalDistances:h.length*h[0].length,sample:h[0].slice(0,5)})}catch(A){throw console.error("[Kamada-Kawai] Error in computeAllPairsShortestPaths:",A.message,A.stack),A}fe(n,.3),console.log("[Kamada-Kawai] About to initialize positions");let f;try{f=hD(d,a),console.log("[Kamada-Kawai] Positions initialized successfully, pos:",{type:typeof f,isArray:Array.isArray(f),length:f?.length||"N/A"})}catch(A){throw console.error("[Kamada-Kawai] Error in initializePositions:",A.message,A.stack),A}const p=h.flat().filter(A=>isFinite(A)&&A>0);p.length===0&&console.warn("[Kamada-Kawai] All distances are placeholder (disconnected)!");const y=p.length>0?p.reduce((A,D)=>Math.max(A,D),0):1,w=Math.sqrt(u),b=w/y,E=c!==null?c:u;console.log("[Kamada-Kawai] Distance matrix stats:",{totalPairs:h.flat().length,finitePairs:p.length,infinitePairs:h.flat().length-p.length,max_dij:y,L0:w,L:b,kkconst:E,isKvalFinite:isFinite(E)&&isFinite(b),avgDij:p.reduce((A,D)=>A+D,0)/p.length}),fe(n,.4);const k=Array(u).fill(null).map(()=>Array(u).fill(0)),_=Array(u).fill(null).map(()=>Array(u).fill(0));for(let A=0;A<u;A++)for(let D=0;D<u;D++){if(A===D)continue;const C=h[A][D];k[A][D]=E/(C*C),_[A][D]=b*C}if(u>1){const A=Math.sqrt(Math.pow(f[0][0]-f[1][0],2)+Math.pow(f[0][1]-f[1][1],2));console.log("[Kamada-Kawai] Sample spring values:",{"graph_dist[0,1]":h[0][1],"spring_const_kij[0,1]":k[0][1].toExponential(4),"desired_dist_lij[0,1]":_[0][1].toFixed(4),initial_euclidean_dist:A.toFixed(4),stress_ratio:(A/_[0][1]).toFixed(4),force:(k[0][1]*Math.abs(A-_[0][1])).toExponential(4)})}const x=Array(u).fill(0),T=Array(u).fill(0);for(let A=0;A<u;A++)for(let D=0;D<u;D++){if(D===A)continue;const C=f[A][0]-f[D][0],S=f[A][1]-f[D][1],U=Math.sqrt(C*C+S*S);U!==0&&(x[A]+=k[A][D]*(C-_[A][D]*C/U),T[A]+=k[A][D]*(S-_[A][D]*S/U))}const L=x.map((A,D)=>Math.sqrt(A*A+T[D]*T[D])),O=Math.max(...L),F=L.reduce((A,D)=>A+D,0)/u;console.log("[Kamada-Kawai] Initial gradient stats:",{maxEnergy:O.toFixed(4),avgEnergy:F.toFixed(4),threshold:Math.sqrt(l).toFixed(6)});for(let A=0;A<i;A++){let D=0,C=-1;for(let B=0;B<u;B++){const Q=x[B]*x[B]+T[B]*T[B];Q>C&&(D=B,C=Q)}if(C<l){console.log(`[Kamada-Kawai] Converged at iteration ${A}/${i} with max_delta ${Math.sqrt(C).toFixed(6)} (threshold: ${Math.sqrt(l).toFixed(6)})`);break}fe(n,.4+.6*(A+1)/i),(A%500===0||A<5||A===i-1)&&console.log(`[Kamada-Kawai] Iteration ${A}/${i}: max_delta = ${Math.sqrt(C).toFixed(6)}, node ${D}`);const S=f[D][0],U=f[D][1];let H=0,ne=0,_e=0;for(let B=0;B<u;B++){if(B===D)continue;const Q=S-f[B][0],J=U-f[B][1],N=Math.sqrt(Q*Q+J*J);if(N===0)continue;const P=N*(Q*Q+J*J);H+=k[D][B]*(1-_[D][B]*J*J/P),ne+=k[D][B]*_[D][B]*Q*J/P,_e+=k[D][B]*(1-_[D][B]*Q*Q/P)}let ye=0,ae=0;const W=1e-13,se=x[D],be=T[D];if(se*se+be*be>=W*W){const B=_e*H-ne*ne;Math.abs(B)>1e-10?(ae=(ne*se-H*be)/B,ye=(ne*be-_e*se)/B):A<5&&console.warn(`[Kamada-Kawai] Iteration ${A}: Singular matrix (det=${B.toExponential(2)}) for node ${D}`)}else A<5&&console.warn(`[Kamada-Kawai] Iteration ${A}: Gradient too small for node ${D}`);A<3&&D===0&&console.log(`[Kamada-Kawai] Iteration ${A}, node ${D}:`,{A:H.toFixed(4),B:ne.toFixed(4),C:_e.toFixed(4),det:(_e*H-ne*ne).toExponential(4),myD1:se.toFixed(4),myD2:be.toFixed(4),delta_x:ye.toFixed(6),delta_y:ae.toFixed(6),old_pos:[S.toFixed(2),U.toFixed(2)]});const q=S+ye,oe=U+ae;x[D]=0,T[D]=0;for(let B=0;B<u;B++){if(B===D)continue;const Q=S-f[B][0],J=U-f[B][1],N=Math.sqrt(Q*Q+J*J),P=q-f[B][0],G=oe-f[B][1],V=Math.sqrt(P*P+G*G);N===0||V===0||(x[B]-=k[D][B]*(-Q+_[D][B]*Q/N),T[B]-=k[D][B]*(-J+_[D][B]*J/N),x[B]+=k[D][B]*(-P+_[D][B]*P/V),T[B]+=k[D][B]*(-G+_[D][B]*G/V),x[D]+=k[D][B]*(P-_[D][B]*P/V),T[D]+=k[D][B]*(G-_[D][B]*G/V))}f[D][0]=q,f[D][1]=oe}fe(n,.95),console.log("[Kamada-Kawai] Before rescaling - preparing positions");const $={};d.forEach((A,D)=>{$[A]={x:f[D][0],y:f[D][1]}});const j=d[0];console.log("[Kamada-Kawai] Sample positions BEFORE rescaling:",{sample:j,value:$[j],allCount:Object.keys($).length,minMax:(()=>{let A=1/0,D=-1/0,C=1/0,S=-1/0;return Object.values($).forEach(U=>{A=Math.min(A,U.x),D=Math.max(D,U.x),C=Math.min(C,U.y),S=Math.max(S,U.y)}),{minX:A,maxX:D,minY:C,maxY:S,rangeX:D-A,rangeY:S-C}})()}),console.log("[Kamada-Kawai] Calling rescaleLayout with correct signature, scale:",s,"center:",o);const z=Gs($,d,s,o);console.log("[Kamada-Kawai] rescaleLayout completed successfully"),console.log("[Kamada-Kawai] Sample positions AFTER rescaling:",{sample:j,value:z[j],minMax:(()=>{let A=1/0,D=-1/0,C=1/0,S=-1/0;return Object.values(z).forEach(U=>{A=Math.min(A,U.x),D=Math.max(D,U.x),C=Math.min(C,U.y),S=Math.max(S,U.y)}),{minX:A,maxX:D,minY:C,maxY:S,rangeX:D-A,rangeY:S-C}})()});const I={};console.log("[Kamada-Kawai] Creating final positions dictionary");try{Object.entries(z).forEach(([C,S])=>{I[C]={x:S.x,y:S.y}}),console.log("[Kamada-Kawai] Final positions dictionary created successfully, count:",Object.keys(I).length);const A=d.slice(0,3),D={};A.forEach(C=>{D[C]=I[C]}),console.log("[Kamada-Kawai] Sample final positions:",D)}catch(A){throw console.error("[Kamada-Kawai] Error creating positions dictionary:",A.message),console.error("  rescaledDict:",z),A}return fe(n,1),I}function uD(t,e){const n=e.length,r=Array(n).fill(null).map(()=>Array(n).fill(1/0)),i={};e.forEach((o,a)=>{i[o]=a,r[a][a]=0});for(let o=0;o<n;o++){const a=e[o],l=[[a,0]],c=new Set([a]);for(;l.length>0;){const[d,u]=l.shift(),h=i[d];h!==void 0&&(r[o][h]=u);const f=t.getNeighbors(d)||[];for(const p of f)c.has(p)||(c.add(p),l.push([p,u+1]))}}let s=0;for(let o=0;o<n;o++)for(let a=o+1;a<n;a++)isFinite(r[o][a])&&r[o][a]>s&&(s=r[o][a]);for(let o=0;o<n;o++)for(let a=0;a<n;a++)r[o][a]>s&&(r[o][a]=s);return r}function hD(t,e){const n=t.length,r=[];if(e&&Object.keys(e).length>0)t.forEach(i=>{const s=e[i];s?r.push([s.x||0,s.y||0]):r.push([Math.random(),Math.random()])});else{const i=Math.sqrt(n);if(n>100){const s=i*3;console.log(`[Kamada-Kawai] Random initialization: spread=${s.toFixed(2)}, L0=${i.toFixed(2)}`);for(let o=0;o<n;o++){const a=(Math.random()-.5)*s,l=(Math.random()-.5)*s;r.push([a,l])}}else{const s=2*Math.PI/n,o=i*2;console.log(`[Kamada-Kawai] Circular initialization: radius=${o.toFixed(2)}, L0=${i.toFixed(2)}`);for(let a=0;a<n;a++){const l=o*Math.cos(a*s),c=o*Math.sin(a*s);r.push([l,c])}}}return r}const F6=Object.freeze(Object.defineProperty({__proto__:null,KamadaKawaiLayout:Oc,default:Oc,kamadaKawaiCompute:dD},Symbol.toStringTag,{value:"Module"}));class Fc extends Sn{constructor(e,n={}){super(e,{partition:null,align:"vertical",scale:1,aspectRatio:4/3,center:{x:0,y:0},...n},{module:"../layouts/bipartite.js",functionName:"bipartiteCompute"})}}async function fD(t,e,n){const r=Qe(t),{partition:i=null,align:s="vertical",scale:o=1,aspectRatio:a=4/3,center:l={x:0,y:0}}=e||{},c=Array.from(r.nodes),d=c.length;if(d===0)return fe(n,1),{};if(d===1){const $={[c[0]]:{x:l.x,y:l.y}};return fe(n,1),$}fe(n,.3);let u,h;i&&i.length>0?(u=new Set(i),h=new Set(c.filter($=>!u.has($)))):(u=new Set,h=new Set,c.forEach(($,j)=>{j%2===0?u.add($):h.add($)})),fe(n,.5);const f=Array.from(u),p=Array.from(h),y=[],w=f.length-1||1,b=p.length-1||1,E=a*2,k=2,_=E/2,x=k/2;f.forEach(($,j)=>{const z=-_,I=w>0?j*k/w-x:0;y.push([z,I])}),p.forEach(($,j)=>{const z=_,I=b>0?j*k/b-x:0;y.push([z,I])}),fe(n,.7);const T=[...f,...p],L={};T.forEach(($,j)=>{L[$]={x:y[j][0],y:y[j][1]}});const O=Gs(L,T,o,l);fe(n,.9);const F={};return T.forEach($=>{F[$]=O[$]}),s==="horizontal"&&Object.keys(F).forEach($=>{const j=F[$].x;F[$].x=F[$].y,F[$].y=j}),fe(n,1),F}const $6=Object.freeze(Object.defineProperty({__proto__:null,BipartiteLayout:Fc,bipartiteCompute:fD,default:Fc},Symbol.toStringTag,{value:"Module"}));class $c extends Sn{constructor(e,n={}){super(e,{subsets:null,align:"vertical",scale:1,center:{x:0,y:0},...n},{module:"../layouts/multipartite.js",functionName:"multipartiteCompute"})}}async function gD(t,e,n){const r=Qe(t),{subsets:i=null,align:s="vertical",scale:o=1,center:a={x:0,y:0}}=e||{},l=Array.from(r.nodes),c=l.length;if(c===0)return fe(n,1),{};if(c===1){const E={[l[0]]:{x:a.x,y:a.y}};return fe(n,1),E}fe(n,.3);let d;if(i&&Object.keys(i).length>0)d=Object.keys(i).sort((E,k)=>{const _=parseInt(E),x=parseInt(k);return isNaN(_)?1:isNaN(x)?-1:_-x}).map(E=>i[E]);else{const E=new Map;l.forEach((k,_)=>{const x=_%3;E.has(x)||E.set(x,[]),E.get(x).push(k)}),d=Array.from(E.values())}fe(n,.5);const u=[],h={},f=d.length,p=f*2-1;d.forEach((E,k)=>{const _=E.length-1||1,x=(k*2-p/2)/(f-1||1);E.forEach((T,L)=>{const O=_>0?2*L/_-1:0;u.push([x,O])})}),fe(n,.7);const y=[];d.forEach(E=>{E.forEach(k=>{y.push(k)})});const w={};y.forEach((E,k)=>{w[E]={x:u[k][0],y:u[k][1]}});const b=Gs(w,y,o,a);return fe(n,.9),y.forEach(E=>{h[E]=b[E]}),s==="horizontal"&&Object.keys(h).forEach(E=>{const k=h[E].x;h[E].x=h[E].y,h[E].y=k}),fe(n,1),h}const z6=Object.freeze(Object.defineProperty({__proto__:null,MultipartiteLayout:$c,default:$c,multipartiteCompute:gD},Symbol.toStringTag,{value:"Module"}));class zc extends Sn{constructor(e,n={}){super(e,{startNode:null,align:"vertical",scale:1,center:{x:0,y:0},...n},{module:"../layouts/bfs.js",functionName:"bfsCompute"})}}async function pD(t,e,n){const r=Qe(t),{startNode:i=null,align:s="vertical",scale:o=1,center:a={x:0,y:0}}=e||{},l=Array.from(r.nodes),c=l.length;if(c===0)return fe(n,1),{};if(c===1){const k={[l[0]]:{x:a.x,y:a.y}};return fe(n,1),k}fe(n,.2);let d=i;(!d||!l.includes(d))&&(d=l[0]),fe(n,.3);const u=mD(r,d);fe(n,.6);const h=new Set;if(u.forEach(k=>{k.forEach(_=>h.add(_))}),h.size!==c){const k=l.filter(_=>!h.has(_));k.length>0&&u.push(k)}fe(n,.7);const f=[],p=u.length;Math.max(...u.map(k=>k.length)),u.forEach((k,_)=>{const x=p>1?2*_/(p-1)-1:0,T=k.length-1||1;k.forEach((L,O)=>{const F=T>0?2*O/T-1:0;f.push([x,F])})}),fe(n,.85);const y=[];u.forEach(k=>{k.forEach(_=>{y.push(_)})});const w={};y.forEach((k,_)=>{w[k]={x:f[_][0],y:f[_][1]}});const b=Gs(w,y,o,a);fe(n,.95);const E={};return y.forEach(k=>{E[k]=b[k]}),s==="horizontal"&&Object.keys(E).forEach(k=>{const _=E[k].x;E[k].x=E[k].y,E[k].y=_}),fe(n,1),E}function mD(t,e,n){const r=[],i=new Set,s=[e];let o=[];for(i.add(e);s.length>0;){const u=s.shift();o.push(u);const h=(t.getNeighbors(u)||[]).filter(f=>!i.has(f));h.forEach(f=>{i.add(f),s.push(f)}),(s.length===0||h.length>0)&&o.length>0&&(r.push([...o]),o=[])}r.length=0,o=[];const a=new Map,l=[e];let c=0;a.set(e,0);let d=0;for(;c<l.length;){const u=l[c],h=a.get(u);h>d&&(o.length>0&&(r.push([...o]),o=[]),d=h),o.push(u),(t.getNeighbors(u)||[]).forEach(f=>{a.has(f)||(a.set(f,h+1),l.push(f))}),c++}return o.length>0&&r.push([...o]),r}const B6=Object.freeze(Object.defineProperty({__proto__:null,BFSLayout:zc,bfsCompute:pD,default:zc},Symbol.toStringTag,{value:"Module"})),yD={layouts:[{id:"none",name:"None (D3 Physics)",description:"D3's built-in force-directed physics simulation",category:"physics",complexity:"O(iterations)",bestFor:["General graphs","Interactive exploration"],requiresStats:!1},{id:"random",name:"Random",description:"Random node positioning",category:"simple",complexity:"O(n)",bestFor:["Testing","Initial visualization"],requiresStats:!1},{id:"circular",name:"Circular",description:"Nodes arranged in a circle",category:"simple",complexity:"O(n)",bestFor:["Symmetric graphs","Ring topologies"],requiresStats:!1},{id:"spiral",name:"Spiral",description:"Archimedean spiral arrangement",category:"simple",complexity:"O(n)",bestFor:["Linear structures","Sequences"],requiresStats:!1},{id:"shell",name:"Shell",description:"Concentric circles by degree",category:"simple",complexity:"O(n)",bestFor:["Star-like graphs","Hub structures"],requiresStats:!0},{id:"spectral",name:"Spectral",description:"Laplacian eigenvector layout",category:"spectral",complexity:"O(n)",bestFor:["Community detection visualization","Graph topology"],requiresStats:!0,requiredStat:"eigenvector-laplacian"},{id:"force-directed",name:"Force-Directed",description:"Spring-electrical model (Fruchterman-Reingold)",category:"physics",complexity:"O(iterations  n)",bestFor:["General graphs","Complex networks"],requiresStats:!1},{id:"kamada-kawai",name:"Kamada-Kawai",description:"Energy minimization based on shortest paths",category:"energy",complexity:"O(n + iterations  n)",bestFor:["Small-medium graphs","Trees","Planar graphs"],requiresStats:!1},{id:"bipartite",name:"Bipartite",description:"Two-line layout for bipartite graphs",category:"hierarchical",complexity:"O(n)",bestFor:["Bipartite graphs","Two-level hierarchies"],requiresStats:!1},{id:"multipartite",name:"Multipartite",description:"Multi-layer layout for hierarchical structures",category:"hierarchical",complexity:"O(n)",bestFor:["DAGs","Organizational hierarchies"],requiresStats:!1},{id:"bfs",name:"BFS Layout",description:"Layer-by-layer breadth-first search",category:"hierarchical",complexity:"O(n + m)",bestFor:["Trees","Network exploration"],requiresStats:!1}],getAll(){return[...this.layouts]},get(t){return this.layouts.find(e=>e.id===t)||null},filter(t){return this.layouts.filter(t)},byCategory(t){return this.layouts.filter(e=>e.category===t)},withoutStatRequirements(){return this.layouts.filter(t=>!t.requiresStats)},exists(t){return this.layouts.some(e=>e.id===t)}},vD=Ze({prefix:"Adapter",level:"info"});class $d{static fromFormat(e,n={}){throw new Error("Adapter.fromFormat() must be implemented by subclass")}static toFormat(e,n={}){throw new Error("Adapter.toFormat() must be implemented by subclass")}static validateGraphData(e){if(!e||typeof e!="object")throw new Error("GraphData must be an object");if(!Array.isArray(e.nodes))throw new Error("GraphData.nodes must be an array");if(!Array.isArray(e.edges))throw new Error("GraphData.edges must be an array");for(const n of e.nodes)if(!n.id&&n.id!==0)throw new Error("All nodes must have an id property");for(const n of e.edges){if(!n.source&&n.source!==0)throw new Error("All edges must have a source property");if(!n.target&&n.target!==0)throw new Error("All edges must have a target property")}return!0}static normalizeIds(e){return{nodes:e.nodes.map(n=>({...n,id:String(n.id)})),edges:e.edges.map(n=>({...n,source:String(n.source),target:String(n.target)}))}}static getNodeIdSet(e){return new Set(e.map(n=>String(n.id)))}static filterInvalidEdges(e,n=!0){const r=this.getNodeIdSet(e.nodes),i=[],s=[];for(const o of e.edges){const a=String(o.source),l=String(o.target);r.has(a)&&r.has(l)?i.push(o):s.push(o)}return n&&s.length>0&&vD.warn("Filtered out edges referencing non-existent nodes",{invalidEdgeCount:s.length,totalEdges:e.edges.length}),{nodes:e.nodes,edges:i}}}const Wf=Ze({prefix:"CSVAdapter",level:"info"});class ks extends $d{static parseCSV(e,n=","){const r=[],i=e.trim().split(`
`);for(const s of i){const o=[];let a="",l=!1;for(let c=0;c<s.length;c++){const d=s[c];d==='"'?l=!l:d===n&&!l?(o.push(a.trim()),a=""):a+=d}o.push(a.trim()),r.push(o)}return r}static fromEdgeList(e,n={}){const{header:r=!0,delimiter:i=",",weighted:s=!0}=n,o=this.parseCSV(e,i),a=r?o.slice(1):o,l=new Set,c=[];for(const d of a){if(d.length<2)continue;const u=d[0],h=d[1],f=s&&d[2]?parseFloat(d[2]):1;l.add(u),l.add(h),c.push({source:u,target:h,weight:isNaN(f)?1:f})}return{nodes:Array.from(l).map(d=>({id:d,group:1})),edges:c}}static fromNodes(e,n={}){const{header:r=!0,delimiter:i=","}=n,s=this.parseCSV(e,i);if(s.length===0)return[];const o=r?s[0]:["id","group","label"];return(r?s.slice(1):s).map(a=>{const l={};for(let c=0;c<o.length;c++){const d=o[c],u=a[c];d==="group"&&u?l[d]=parseInt(u,10):!isNaN(u)&&u!==""?l[d]=parseFloat(u):l[d]=u}return l})}static fromFormat(e,n=null,r={}){const{nodes:i,edges:s}=this.fromEdgeList(e,r);if(n){const a=this.fromNodes(n,r),l=new Map(a.map(d=>[String(d.id),d])),c={nodes:i.map(d=>{const u=l.get(String(d.id));return u?{...d,...u}:d}),edges:s};return this.filterInvalidEdges(c)}const o={nodes:i,edges:s};return this.filterInvalidEdges(o)}static async loadFromURL(e,n=null,r={}){try{const i=await fetch(e);if(!i.ok)throw new Error(`Failed to fetch edges: ${i.statusText}`);const s=await i.text();let o=null;if(n){const a=await fetch(n);a.ok&&(o=await a.text())}return this.fromFormat(s,o,r)}catch(i){throw Wf.error("Error loading CSV",{edgeURL:e,nodeURL:n,error:i.message,stack:i.stack}),i}}static async loadFromFiles(e,n=null,r={}){try{const i=await e.text();let s=null;return n&&(s=await n.text()),this.fromFormat(i,s,r)}catch(i){throw Wf.error("Error reading file",{edgeFileName:e?.name,nodeFileName:n?.name,error:i.message,stack:i.stack}),i}}static toEdgeList(e,n={}){const{header:r=!0,delimiter:i=","}=n,s=[];r&&s.push(["source","target","weight"].join(i));for(const o of e.edges){const a=o.source?.id||o.source,l=o.target?.id||o.target,c=o.weight||1;s.push([a,l,c].join(i))}return s.join(`
`)}static toNodes(e,n={}){const{header:r=!0,delimiter:i=","}=n,{nodes:s}=e;if(s.length===0)return"";const o=[],a=new Set;s.forEach(c=>{Object.keys(c).forEach(d=>a.add(d))});const l=Array.from(a);r&&o.push(l.join(i));for(const c of s){const d=l.map(u=>{const h=c[u];return typeof h=="string"&&(h.includes(i)||h.includes('"'))?`"${h.replace(/"/g,'""')}"`:h??""});o.push(d.join(i))}return o.join(`
`)}static toFormat(e,n={}){return this.validateGraphData(e),{edges:this.toEdgeList(e,n),nodes:this.toNodes(e,n)}}}const _D=Ze({prefix:"JSONAdapter",level:"info"});class Bc extends $d{static fromD3(e){if(!e||!e.nodes)throw new Error("Invalid D3 data: must have nodes array");const n=e.nodes.map(s=>({...s,id:String(s.id)})),r=(e.links||[]).map(s=>({...s,source:String(s.source?.id||s.source),target:String(s.target?.id||s.target),weight:s.weight||s.value||1})),i={nodes:n,edges:r};return this.filterInvalidEdges(i)}static fromCytoscape(e){if(!e||!Array.isArray(e.nodes))throw new Error("Invalid Cytoscape data: must have nodes array");const n=e.nodes.map(s=>({id:String(s.data.id),...s.data})),r=(e.edges||[]).map(s=>({source:String(s.data.source),target:String(s.data.target),weight:s.data.weight||1,...s.data})),i={nodes:n,edges:r};return this.filterInvalidEdges(i)}static fromFormat(e){if(!e||typeof e!="object")throw new Error("Invalid JSON data");if(e.nodes&&e.edges)return this.normalizeIds(e);if(e.nodes&&e.links)return this.fromD3(e);if(Array.isArray(e.nodes)&&e.nodes[0]?.data)return this.fromCytoscape(e);if(e.nodes&&(e.links||e.edges))return this.fromD3({nodes:e.nodes,links:e.links||e.edges});throw new Error("Unknown JSON format - cannot auto-detect")}static toD3(e){return this.validateGraphData(e),{nodes:e.nodes.map(n=>({...n})),links:e.edges.map(n=>({source:n.source,target:n.target,value:n.weight,...n}))}}static toCytoscape(e){return this.validateGraphData(e),{nodes:e.nodes.map(n=>({data:{...n}})),edges:e.edges.map((n,r)=>({data:{id:`e${r}`,source:n.source,target:n.target,weight:n.weight||1,...n}}))}}static toFormat(e,n={}){const{format:r="standard",pretty:i=!1}=n;let s;switch(r){case"d3":s=this.toD3(e);break;case"cytoscape":s=this.toCytoscape(e);break;case"standard":default:this.validateGraphData(e),s=e}return JSON.stringify(s,null,i?2:0)}static async loadFromURL(e){try{const n=await fetch(e);if(!n.ok)throw new Error(`Failed to fetch: ${n.statusText}`);const r=await n.json();return this.fromFormat(r)}catch(n){throw _D.error("Error loading JSON",{url:e,error:n.message,stack:n.stack}),n}}}class bD extends $d{static fromNodeLink(e){if(!e||!Array.isArray(e.nodes))throw new Error("Invalid NetworkX node-link data: must have nodes array");const n=e.nodes.map(s=>({id:String(s.id),...s})),r=(e.links||[]).map(s=>({source:String(s.source),target:String(s.target),weight:s.weight||1,...s})),i={nodes:n,edges:r};return this.filterInvalidEdges(i)}static fromAdjacency(e){if(!Array.isArray(e))throw new Error("Invalid NetworkX adjacency data: must be array");const n=[],r=[],i=new Set;for(const o of e){const a=String(o.id);if(n.push({id:a,...o}),o.adjacency&&Array.isArray(o.adjacency))for(const l of o.adjacency){const c=String(l.id),d=`${a}-${c}`,u=`${c}-${a}`;!i.has(d)&&!i.has(u)&&(r.push({source:a,target:c,weight:l.weight||1,...l}),i.add(d))}}const s={nodes:n,edges:r};return this.filterInvalidEdges(s)}static fromFormat(e){if(!e||typeof e!="object")throw new Error("Invalid NetworkX data");if(e.nodes&&Array.isArray(e.nodes)&&(e.links||e.edges))return this.fromNodeLink({...e,links:e.links||e.edges});if(Array.isArray(e)&&e[0]?.adjacency)return this.fromAdjacency(e);throw new Error("Unknown NetworkX format")}static toNodeLink(e,n={}){this.validateGraphData(e);const{directed:r=!1,multigraph:i=!1}=n;return{directed:r,multigraph:i,graph:{},nodes:e.nodes.map(s=>({...s})),links:e.edges.map(s=>({source:s.source,target:s.target,weight:s.weight||1,...s}))}}static toAdjacency(e){this.validateGraphData(e);const n=new Map;for(const r of e.nodes)n.set(String(r.id),{...r,adjacency:[]});for(const r of e.edges){const i=String(r.source),s=String(r.target),o=n.get(i);o&&o.adjacency.push({id:s,weight:r.weight||1,...r});const a=n.get(s);a&&i!==s&&a.adjacency.push({id:i,weight:r.weight||1,...r})}return Array.from(n.values())}static toFormat(e,n={}){const{format:r="node-link"}=n;switch(r){case"adjacency":return this.toAdjacency(e);case"node-link":default:return this.toNodeLink(e,n)}}}class tt{static FEATURES={EIGENVECTOR:"eigenvector",EIGENVECTOR_LAPLACIAN:"eigenvector-laplacian",MODULARITY:"modularity",BETWEENNESS:"betweenness",CLUSTERING:"clustering",CLIQUES:"cliques",DEGREE:"degree",CLOSENESS:"closeness",EGO_DENSITY:"ego-density",PAGERANK:"pagerank",ALL:["degree","betweenness","clustering","eigenvector","eigenvector-laplacian","cliques","closeness","ego-density","pagerank"]};static GRAPH_STATS={DENSITY:"density",DIAMETER:"diameter",AVERAGE_CLUSTERING:"average_clustering",AVERAGE_SHORTEST_PATH:"average_shortest_path",CONNECTED_COMPONENTS:"connected_components",AVERAGE_DEGREE:"average_degree",ALL:["density","diameter","average_clustering","average_shortest_path","connected_components","average_degree"]};static COMMUNITY_DETECTION={LOUVAIN:"louvain",ALL:["louvain"]};constructor(e={}){this.options={verbose:e.verbose!==void 0?e.verbose:!0,maxWorkers:e.maxWorkers,taskTimeout:e.taskTimeout||3e5,workerScript:e.workerScript,enableAffinity:e.enableAffinity!==void 0?e.enableAffinity:!0,affinityCacheLimit:e.affinityCacheLimit||50,maxIter:e.maxIter,tolerance:e.tolerance,...e},this.log=Ze({prefix:"NetworkStats",level:this.options.verbose?"debug":"info"}),An.initialize({maxWorkers:this.options.maxWorkers,taskTimeout:this.options.taskTimeout,verbose:this.options.verbose,workerScript:this.options.workerScript,enableAffinity:this.options.enableAffinity,affinityCacheLimit:this.options.affinityCacheLimit}).catch(n=>{this.log.error("Failed to initialize workers:",n)}),this.statisticClasses={[tt.FEATURES.DEGREE]:qy,[tt.FEATURES.BETWEENNESS]:Zy,[tt.FEATURES.CLUSTERING]:Yy,[tt.FEATURES.EIGENVECTOR]:Jy,[tt.FEATURES.EIGENVECTOR_LAPLACIAN]:ev,[tt.FEATURES.CLIQUES]:tv,[tt.FEATURES.CLOSENESS]:Ky,[tt.FEATURES.EGO_DENSITY]:Xy,[tt.FEATURES.PAGERANK]:Qy,[tt.FEATURES.MODULARITY]:"modularity"},this.graphStatClasses={[tt.GRAPH_STATS.DENSITY]:nv,[tt.GRAPH_STATS.DIAMETER]:rv,[tt.GRAPH_STATS.AVERAGE_CLUSTERING]:iv,[tt.GRAPH_STATS.AVERAGE_SHORTEST_PATH]:sv,[tt.GRAPH_STATS.CONNECTED_COMPONENTS]:ov,[tt.GRAPH_STATS.AVERAGE_DEGREE]:av}}async analyze(e,n,r={}){this.log.time("networkAnalysis"),this.log.info(`Analyzing network with ${e.length} edges`),n=n||tt.FEATURES.ALL,typeof n=="string"&&(n=[n]);const{graph:i,nodes:s}=this._prepareNetwork(e);this.log.info(`Graph: ${s.length} nodes, ${i.edges.length} edges`);const o=await this._calculateNodeStats(i,s,n,r);if(r.includeGraphStats){const a=await this._calculateGraphStats(i,r.graphStats,r);return this.log.timeEnd("networkAnalysis"),{nodes:o,graph:a}}return this.log.timeEnd("networkAnalysis"),o}async _calculateNodeStats(e,n,r,i){const s={};for(const o of r)if(o===tt.FEATURES.MODULARITY)s[o]=await this._calculateModularity(e,i);else if(this.statisticClasses[o]){const a=this.statisticClasses[o],l=this.options.maxIter||this.options.tolerance?{maxIter:this.options.maxIter,tolerance:this.options.tolerance}:{},c=new a(l);this.log.debug(`Calculating ${o}...`);const d=await c.calculate(e,null,{onProgress:i.onProgress});s[o]=d}else this.log.warn(`Unknown feature: ${o}`);return this._normalizeNodeStats(s,n)}async _calculateGraphStats(e,n,r={}){const i=n||tt.GRAPH_STATS.ALL,s={};for(const o of i){const a=this.graphStatClasses[o];if(a){this.log.debug(`Calculating graph stat: ${o}...`);const l=new a;s[o]=await l.calculate(e,null,{onProgress:r.onProgress})}else this.log.warn(`Unknown graph stat: ${o}`)}return s}async _calculateModularity(e,n={}){const r=new Da(e),i=new Es;return this.log.debug("Running Louvain community detection..."),(await r.detectCommunities(i,{onProgress:n.onProgress})).communities}_prepareNetwork(e){const n=new Set;for(const s of e)n.add(s.source),n.add(s.target);const r=Array.from(n),i=new La;for(const s of r)i.addNode(s);for(const s of e){const o=s.weight!==void 0?s.weight:1;i.addEdge(s.source,s.target,o)}return{graph:i,nodes:r}}_normalizeNodeStats(e,n){const r=[];for(const i of n){const s={id:i};for(const[o,a]of Object.entries(e))typeof a=="object"&&a!==null&&(s[o]=a[i]);r.push(s)}return r}async dispose(){await An.terminate()}}const wD=async()=>"/assets/network-worker.js";class ED{constructor(){this.analyzer=null,this.initPromise=null,this.lastAnalysisResults=null,this.workerUrl=null,this.log=Ze({prefix:"NetworkAnalyzer",level:"info"})}async _ensureInitialized(){if(!this.analyzer){if(this.initPromise)return this.initPromise;this.initPromise=(async()=>{this.workerUrl=await wD(),this.log.debug("Initializing with worker",{workerUrl:this.workerUrl}),this.analyzer=new tt({verbose:!0,workerScript:this.workerUrl}),await new Promise(e=>setTimeout(e,500)),this.log.info("Initialized successfully")})(),await this.initPromise}}_toEdgeList(e,n){return n.map(r=>({source:typeof r.source=="object"?r.source.id:r.source,target:typeof r.target=="object"?r.target.id:r.target,weight:r.weight||1}))}_buildGraph(e,n){const r=new La;return e.forEach(i=>{r.addNode(i.id)}),n.forEach(i=>{const s=typeof i.source=="object"?i.source.id:i.source,o=typeof i.target=="object"?i.target.id:i.target;r.addEdge(s,o,i.weight||1)}),r}async analyzeGraph(e,n,r={}){await this._ensureInitialized(),this.log.debug("Starting analysis",{nodeCount:e.length,linkCount:n.length,features:r.features,includeGraphStats:r.includeGraphStats});const i=this._toEdgeList(e,n),s=r.features||["degree","eigenvector"],o={onProgress:r.onProgress};r.includeGraphStats&&(o.includeGraphStats=!0,o.graphStats=r.graphStats||["density","diameter","average_clustering","average_shortest_path","connected_components","average_degree"]);const a=await this.analyzer.analyze(i,s,o);let l,c=null;Array.isArray(a)?l=a:a.nodes&&a.graph?(l=a.nodes,c=a.graph):l=a,this.log.info("Analysis complete",{resultsCount:l.length,hasGraphStats:c!==null}),this.lastAnalysisResults=l,e.forEach(u=>{const h=l.find(p=>p.id===u.id);if(!h){this.log.warn("No stats found for node",{nodeId:u.id}),u.centrality=.5;return}const f=h.eigenvector!==void 0?h.eigenvector:h.degree!==void 0?h.degree/10:.5;Object.assign(u,h,{centrality:f})}),this.log.debug("Nodes enriched",{sampleNode:e[0]});const d={nodes:e,links:n};return c&&(d.graphStats=c),d}async applyLayout(e,n,r,i={}){await this._ensureInitialized(),this.log.debug("Applying layout",{layoutId:e});const s=i.width||800,o=i.height||600,a=Math.min(s,o)/1.2,l={x:s/2,y:o/2},c=this._buildGraph(n,r);let d;const u={scale:a,center:l};switch(e){case"random":d=new Lc(c,u);break;case"circular":d=new Ic(c,u);break;case"spiral":d=new Dc(c,{...u,resolution:.15});break;case"shell":const f={};let p=!1;n.forEach(_=>{_.degree!==void 0&&(f[_.id]={degree:_.degree},p=!0)}),d=new Pc(c,{...u,nodeProperties:p?f:null});break;case"spectral":if(!n.some(_=>{const x=_["eigenvector-laplacian"];return x&&typeof x=="object"&&x.laplacian_x!==void 0&&x.laplacian_y!==void 0}))throw new Error('Spectral layout requires eigenvector-laplacian analysis. Please run analysis with ["eigenvector-laplacian"] first.');const w={};n.forEach(_=>{const x=_["eigenvector-laplacian"];x&&typeof x=="object"&&x.laplacian_x!==void 0&&x.laplacian_y!==void 0&&(w[_.id]={laplacian_x:x.laplacian_x,laplacian_y:x.laplacian_y})}),this.log.debug("Spectral layout nodeProperties:",{propCount:Object.keys(w).length,sampleKey:Object.keys(w)[0],sampleValue:w[Object.keys(w)[0]]}),d=new Gc(c,{...u,nodeProperties:w});break;case"force-directed":const b=n.length,E=Math.sqrt(1/b)*2.5;d=new Mc(c,{iterations:50,k:E,...u});break;case"kamada-kawai":d=new Oc(c,{iterations:300,...u});break;case"bipartite":d=new Fc(c,{align:"vertical",...u});break;case"multipartite":d=new $c(c,{align:"vertical",...u});break;case"bfs":const k=n[0]?.id||Array.from(c.nodes)[0];d=new zc(c,{startNode:k,align:"vertical",...u});break;default:throw new Error(`Unknown layout: ${e}`)}const h=await d.getPositions({onProgress:i.onProgress});return this.log.info("Layout complete",{positionCount:Object.keys(h).length}),h}getAvailableLayouts(){return yD.getAll()}getAvailableCommunityAlgorithms(){return Hf.getAll()}async detectCommunities(e,n,r,i={}){await this._ensureInitialized(),this.log.debug("Detecting communities",{algorithmId:e});const s=this._buildGraph(n,r),o=Hf.get(e);if(!o)throw new Error(`Unknown community detection algorithm: ${e}`);let a;switch(e){case"louvain":a=new Es(o.defaultOptions);break;default:throw new Error(`Unsupported algorithm: ${e}`)}const c=await new Da(s).detectCommunities(a,{onProgress:i.onProgress});return this.log.info("Community detection complete",{numCommunities:c.numCommunities,modularity:c.modularity}),n.forEach(d=>{const u=c.communities[d.id];u!==void 0&&(d.community=u)}),c}getAffinityStats(){return An.getAffinityStats()}getWorkerStatus(){return An.getStatus()}async dispose(){if(this.analyzer)try{await this.analyzer.dispose(),this.analyzer=null}catch(e){this.log.warn("Error disposing analyzer",{error:e.message}),this.analyzer=null}}}const Re=Ze({prefix:"useNetworkGraph",level:"info"});function Pa(t={}){const e=ce(null),n=ce(null),r=ce(null),i=ce(!1),s=ce(null),o=ce(null),a=ce(0),l=ce(t.renderer||"d3"),c=t.autoComputeCentrality!==!1,d=()=>{if(!e.value){Re.warn("Container ref not ready");return}if(n.value){Re.warn("Graph already initialized");return}try{i.value=!0,Re.debug("Initializing graph",{options:t});const A=e.value.getBoundingClientRect(),D=A.width||t.width||800,C=A.height||t.height||600,S=l.value==="sigma"?Uf:Yh;n.value=new S(e.value,{width:D,height:C,...t}),Re.debug("Created renderer instance",{renderer:l.value}),r.value=new ED,n.value.on("nodeHover",U=>{o.value=U}),n.value.on("nodeLeave",()=>{o.value=null}),i.value=!1,Re.info("Graph and analyzer initialized successfully")}catch(A){Re.error("Failed to initialize graph",{error:A.message,stack:A.stack}),s.value=A.message,i.value=!1}},u=(A,D)=>{if(!n.value){Re.warn("Graph not initialized yet");return}try{i.value=!0,Re.debug("Loading data into graph",{nodeCount:A.length,linkCount:D.length});const C=()=>{i.value=!1,n.value.off("ready",C),Re.info("Graph ready and fitted to view"),c&&n.value?.data?.nodes?.length>=2&&requestAnimationFrame(()=>{h()})};n.value.on("ready",C),n.value.setData(A,D)}catch(C){Re.error("Failed to load data",{error:C.message,stack:C.stack}),s.value=C.message,i.value=!1}},h=async()=>{if(!(!c||!n.value||!r.value)&&!(!n.value.data||n.value.data.nodes.length<2))try{Re.debug("Auto-computing eigenvector centrality");const A=n.value.data,D=await r.value.analyzeGraph(A.nodes,A.links,{features:["eigenvector"],onProgress:()=>{}});D&&D.nodes&&n.value.updateNodeStatistics&&(n.value.updateNodeStatistics(D.nodes,"eigenvector",!0),Re.debug("Auto-computed eigenvector centrality and updated node sizes"))}catch(A){Re.debug("Auto-compute eigenvector failed (non-critical)",{error:A.message})}},f=async(A=[],D=null,C=null,S=!1)=>{if(!n.value)return Re.warn("Graph not initialized yet"),null;try{Re.debug("Adding node",{neighborIds:A,nodeId:D,group:C,incremental:S});let U;return S&&n.value.addNodeIncremental?U=n.value.addNodeIncremental(A,D,C):U=n.value.addNode(A,D,C),U&&c&&requestAnimationFrame(()=>{h()}),U}catch(U){return Re.error("Failed to add node",{error:U.message,stack:U.stack}),s.value=U.message,null}},p=(A=null,D=!1)=>{if(!n.value)return Re.warn("Graph not initialized yet"),!1;try{Re.debug("Removing node",{nodeId:A,incremental:D});let C;return D&&n.value.removeNodeIncremental?C=n.value.removeNodeIncremental(A):C=n.value.removeNode(A),C&&c&&requestAnimationFrame(()=>{h()}),C}catch(C){return Re.error("Failed to remove node",{error:C.message,stack:C.stack}),s.value=C.message,!1}},y=async(A,D,C=!1)=>{if(!n.value)return Re.warn("Graph not initialized yet"),!1;try{let S;return C&&n.value.addLinkIncremental?S=n.value.addLinkIncremental(A,D):S=n.value.addLink(A,D),S&&c&&requestAnimationFrame(()=>{h()}),S}catch(S){return Re.error("Failed to add link",{error:S.message,stack:S.stack}),s.value=S.message,!1}},w=()=>n.value?n.value.getNodeIds():[],b=A=>n.value?n.value.hasNode(A):!1,E=async(A=["degree","eigenvector"],D={})=>{if(!n.value||!r.value)return Re.warn("Graph or analyzer not initialized"),null;try{i.value=!0,a.value=0,Re.debug("Starting graph analysis",{features:A,options:D});const C=n.value.data,S=await r.value.analyzeGraph(C.nodes,C.links,{features:A,includeGraphStats:D.includeGraphStats||!1,graphStats:D.graphStats,onProgress:H=>{a.value=H}});return Re.info("Analysis complete, updating visualization",{nodeCount:S.nodes.length,hasGraphStats:!!S.graphStats}),A.includes("eigenvector")&&S.nodes.some(H=>H.eigenvector!==void 0)?(Re.debug("Sizing nodes by eigenvector centrality"),n.value.updateVisualEncoding({sizeBy:"eigenvector",minRadius:5,maxRadius:20})):n.value.updateGraph(),i.value=!1,a.value=0,S}catch(C){return Re.error("Failed to analyze graph",{error:C.message,stack:C.stack,features:A}),s.value=C.message,i.value=!1,a.value=0,null}},k=async A=>{if(!n.value||!r.value)return Re.warn("Graph or analyzer not initialized"),!1;try{if(i.value=!0,a.value=0,Re.debug("Applying layout",{layoutId:A}),A==="none")return typeof n.value.startSimulation=="function"?(n.value.data.nodes.forEach(ne=>{ne.fx=null,ne.fy=null}),n.value.startSimulation()):typeof n.value.unlockPositions=="function"?n.value.unlockPositions():n.value.updateGraph(),i.value=!1,a.value=0,Re.info("Simulation restarted (none layout)"),!0;const D=n.value.data,C=e.value.getBoundingClientRect(),S=await r.value.applyLayout(A,D.nodes,D.links,{width:C.width||800,height:C.height||600,onProgress:H=>{a.value=H}});D.nodes.forEach(H=>{const ne=S[H.id];ne&&(H.x=ne.x,H.y=ne.y,H.fx=ne.x,H.fy=ne.y)});const U=()=>{i.value=!1,a.value=0,n.value.off("ready",U),Re.info("Layout applied successfully",{layoutId:A})};return n.value.on("ready",U),n.value.updateGraph(),!0}catch(D){return Re.error("Failed to apply layout",{layoutId:A,error:D.message,stack:D.stack}),s.value=D.message,i.value=!1,a.value=0,!1}},_=()=>r.value?r.value.getAvailableLayouts():[],x=()=>r.value?r.value.getAvailableCommunityAlgorithms():[],T=async A=>{if(!n.value||!r.value)return Re.warn("Graph or analyzer not initialized"),null;try{i.value=!0,a.value=0,Re.debug("Detecting communities",{algorithmId:A});const D=n.value.data,C=await r.value.detectCommunities(A,D.nodes,D.links,{onProgress:S=>{a.value=S}});return Re.info("Community detection complete, updating colors",{numCommunities:C.numCommunities,modularity:C.modularity}),n.value.updateVisualEncoding({colorBy:"community",colorScheme:"categorical",preserveZoom:!0}),i.value=!1,a.value=0,C}catch(D){return Re.error("Failed to detect communities",{algorithmId:A,error:D.message,stack:D.stack}),s.value=D.message,i.value=!1,a.value=0,null}},L=(A={})=>{if(!n.value){Re.warn("Cannot update visual encoding - no graph instance");return}n.value.updateVisualEncoding(A)},O=()=>{if(!n.value){Re.warn("Graph not initialized yet");return}n.value.lockPositions()},F=()=>{if(!n.value){Re.warn("Graph not initialized yet");return}n.value.unlockPositions()},$=(A="network-graph.png")=>{if(!n.value){Re.warn("Graph not initialized yet");return}n.value.saveAsPNG(A)},j=()=>n.value?n.value.getSelectedNode():(Re.warn("Graph not initialized yet"),null),z=async()=>{if(n.value&&(n.value.destroy(),n.value=null,Re.info("Graph destroyed")),r.value)try{await r.value.dispose(),r.value=null,Re.info("Analyzer disposed")}catch(A){Re.warn("Error disposing analyzer",{error:A.message}),r.value=null}},I=async A=>{if(A===l.value)return Re.debug("Already using renderer",{rendererType:A}),!0;if(!["d3","sigma"].includes(A))return Re.error("Invalid renderer type",{rendererType:A}),!1;try{i.value=!0,Re.info("Switching renderer",{from:l.value,to:A});const D=n.value?.data?{nodes:n.value.data.nodes.map(C=>{const{x:S,y:U,fx:H,fy:ne,vx:_e,vy:ye,index:ae,...W}=C;return W}),links:[...n.value.data.links]}:null;if(n.value&&(n.value.destroy(),n.value=null),l.value=A,await Gr(),e.value){const C=e.value.getBoundingClientRect(),S=C.width||t.width||800,U=C.height||t.height||600,H=A==="sigma"?Uf:Yh;return n.value=new H(e.value,{width:S,height:U,...t}),n.value.on("nodeHover",ne=>{o.value=ne}),n.value.on("nodeLeave",()=>{o.value=null}),D&&D.nodes.length>0?u(D.nodes,D.links):i.value=!1,Re.info("Renderer switched successfully",{renderer:A}),!0}return i.value=!1,!1}catch(D){return Re.error("Failed to switch renderer",{error:D.message,stack:D.stack}),s.value=D.message,i.value=!1,!1}};return Yt(async()=>{await Gr(),e.value&&d()}),$r(()=>{z()}),{graphContainer:e,graphInstance:n,loading:i,error:s,nodeInfo:o,analysisProgress:a,currentRenderer:l,initGraph:d,loadData:u,destroyGraph:z,addNode:f,removeNode:p,addLink:y,getNodeIds:w,hasNode:b,analyzeGraph:E,applyLayout:k,getAvailableLayouts:_,detectCommunities:T,getAvailableCommunityAlgorithms:x,updateVisualEncoding:L,lockPositions:O,unlockPositions:F,saveAsPNG:$,getSelectedNode:j,switchRenderer:I}}const Hr={NAVIGATION:"navigation",DATA_MANAGEMENT:"data_management",ANALYSIS:"analysis",GRAPH_INTERACTION:"graph_interaction",FAMILY_TREE:"family_tree",SHOWCASE:"showcase"},Vc={SAMPLE_NETWORK_LOAD:"sample_network_load",FILE_UPLOAD:"file_upload",DATASET_SELECT:"dataset_select"},fr={LAYOUT_CHANGE:"layout_change",COMMUNITY_DETECTION:"community_detection",ANALYSIS_RUN:"analysis_run"},kD={RENDERER_SWITCH:"renderer_switch"},mt={RELATIVE_ADD:"relative_add",TREE_SAVE:"tree_save",TREE_EXPORT:"tree_export",TREE_RESET:"tree_reset",GRAPH_LOCK:"graph_lock",GRAPH_UNLOCK:"graph_unlock",RENDER_MODE_CHANGE:"render_mode_change",UNDO_ACTION:"undo_action",REDO_ACTION:"redo_action"},Rl={NODE_ADD:"showcase_node_add",NODE_REMOVE:"showcase_node_remove"},AD={home:"Home",showcase:"Showcase",explorer:"Network Explorer",degrees:"Degrees",family:"Family Tree",docs:"Documentation"},dr=Ze({prefix:"Analytics",level:"warn"});let Jr=!1,ui=!1,Ui=null;const xD=()=>!0,CD=()=>{if(Jr){dr.warn("Analytics already initialized");return}if(Ui="G-Q54F1BV32E",!Ui){dr.warn("GA Measurement ID not configured (VITE_GA_MEASUREMENT_ID)"),Jr=!0,ui=!1;return}if(ui=xD(),!ui){dr.info("Analytics disabled in development mode (set VITE_GA_DEBUG=true to enable)"),Jr=!0;return}window.dataLayer=window.dataLayer||[],window.gtag=function(){window.dataLayer.push(arguments)},window.gtag("js",new Date),window.gtag("config",Ui,{send_page_view:!0,page_location:window.location.href,page_path:window.location.pathname,page_title:document.title});const t=document.createElement("script");t.async=!0,t.src=`https://www.googletagmanager.com/gtag/js?id=${Ui}`,document.head.appendChild(t),Jr=!0,dr.info("Google Analytics initialized",{measurementId:Ui})},Er=(t,e={})=>{if(!Jr){dr.warn("Analytics not initialized, call initializeAnalytics() first");return}if(ui)try{window.gtag("event",t,e)}catch(n){dr.error("Failed to track event",{eventName:t,error:n.message})}},SD=(t,e)=>{if(!Jr){dr.warn("Analytics not initialized");return}if(ui)try{window.gtag("event","page_view",{page_path:t,page_title:e,page_location:window.location.href})}catch(n){dr.error("Failed to track page view",{pagePath:t,error:n.message})}};function Ga(){return{trackEvent:Er,trackPageView:SD,isEnabled:()=>ui,trackNavigation:(t,e={})=>{Er(t,{event_category:Hr.NAVIGATION,...e})},trackDataAction:(t,e={})=>{Er(t,{event_category:Hr.DATA_MANAGEMENT,...e})},trackAnalysis:(t,e={})=>{Er(t,{event_category:Hr.ANALYSIS,...e})},trackGraphInteraction:(t,e={})=>{Er(t,{event_category:Hr.GRAPH_INTERACTION,...e})},trackFamilyAction:(t,e={})=>{Er(t,{event_category:Hr.FAMILY_TREE,...e})},trackShowcaseAction:(t,e={})=>{Er(t,{event_category:Hr.SHOWCASE,...e})}}}class TD{constructor({graphManager:e,onStatusChange:n=null,translate:r=null}){this.graphManager=e,this.onStatusChange=n,this.translate=r||(i=>i),this.log=Ze({prefix:"ShowcaseController",level:"info"}),this.datasets={default:{name:"Default",loader:()=>this._loadDefaultDataset()},karate:{name:"Karate Club",loader:()=>this._loadKarateDataset()},miserables:{name:"Les Misrables",loader:()=>this._loadMiserablesDataset()},kevinbacon:{name:"Kevin Bacon",loader:()=>this._loadKevinBaconDataset()}}}getInitialDataset(){return{nodes:[{id:"Alice",group:1},{id:"Bob",group:1},{id:"Charlie",group:2},{id:"David",group:2},{id:"Eve",group:3},{id:"Frank",group:3},{id:"Grace",group:1},{id:"Henry",group:2},{id:"Isabel",group:4},{id:"John",group:4},{id:"Kate",group:5},{id:"Luke",group:5},{id:"Mary",group:6},{id:"Nick",group:6},{id:"Oliver",group:7}],links:[{source:"Alice",target:"Bob"},{source:"Alice",target:"Charlie"},{source:"Bob",target:"Charlie"},{source:"Charlie",target:"David"},{source:"Eve",target:"Frank"},{source:"Eve",target:"Alice"},{source:"Grace",target:"Alice"},{source:"Henry",target:"Bob"},{source:"Henry",target:"Eve"},{source:"Isabel",target:"John"},{source:"Isabel",target:"Kate"},{source:"John",target:"Luke"},{source:"Kate",target:"Mary"},{source:"Luke",target:"Nick"},{source:"Mary",target:"Oliver"},{source:"Nick",target:"Oliver"},{source:"Oliver",target:"Alice"},{source:"Frank",target:"Mary"},{source:"David",target:"Isabel"},{source:"Grace",target:"Kate"}]}}async _loadDefaultDataset(){return this.getInitialDataset()}async _loadKarateDataset(){const e=await Bc.loadFromURL("/data/karateclub.json");return e.nodes=e.nodes.map(n=>({...n,group:n.club==="Mr. Hi"?1:2})),{nodes:e.nodes,links:e.edges}}async _loadMiserablesDataset(){const e=await ks.loadFromURL("/data/les_miserables.csv");return e.nodes=e.nodes.map(n=>({...n,group:n.group||1})),{nodes:e.nodes,links:e.edges}}async _loadKevinBaconDataset(){const e=await ks.loadFromURL("/data/kevin_bacon_edges.csv","/data/kevin_bacon_nodes.csv");return e.nodes=e.nodes.map(n=>({...n,group:n.category==="movie"?1:2})),{nodes:e.nodes,links:e.edges}}async loadDataset(e){const n=this.datasets[e];if(!n)return{success:!1,error:`Unknown dataset: ${e}`};try{this.log.debug("Loading dataset",{datasetKey:e,datasetName:n.name}),this._updateStatus("Loading dataset...","info");const r=await n.loader();this.graphManager.loadData(r.nodes,r.links),e==="kevinbacon"&&this.graphManager.updateVisualEncoding({colorBy:"category",colorScheme:"categorical"});const i=this.translate("showcase.messages.loadedDataset",{name:n.name,nodes:r.nodes.length,edges:r.links.length});return this.log.info("Dataset loaded successfully",{name:n.name,nodeCount:r.nodes.length,edgeCount:r.links.length}),this._updateStatus(i,"success"),{success:!0,data:r,name:n.name,nodeCount:r.nodes.length,edgeCount:r.links.length}}catch(r){const i=this.translate("showcase.messages.failedToLoadDataset",{error:r.message});return this.log.error("Failed to load dataset",{datasetKey:e,error:r.message,stack:r.stack}),this._updateStatus(i,"error"),{success:!1,error:r.message}}}addRandomNode(){if(!this.graphManager.graphInstance.value)return{success:!1,error:"Graph not initialized"};const e=this.graphManager.getNodeIds();if(e.length===0)return{success:!1,error:"No nodes available to connect to"};const n=e[Math.floor(Math.random()*e.length)],r=this.graphManager.addNode([n],null,null,!0);if(r){const i=this.translate("showcase.messages.addedNode",{nodeId:r.id,connectedTo:n});return this.log.debug("Added random node",{nodeId:r.id,connectedTo:n}),this._updateStatus(i,"success"),{success:!0,node:r,connectedTo:n}}return this.log.warn("Failed to add random node"),{success:!1,error:"Failed to add node"}}addNodeToSelected(){if(!this.graphManager.graphInstance.value)return{success:!1,error:"Graph not initialized"};const e=this.graphManager.getSelectedNode();if(!e){const i=this.translate("showcase.messages.noNodeSelected");return this.log.warn("No node selected"),this._updateStatus(i,"error"),{success:!1,error:"No node selected"}}const n=e.id,r=this.graphManager.addNode([n],null,null,!0);if(r){const i=this.translate("showcase.messages.addedNode",{nodeId:r.id,connectedTo:n});return this.log.debug("Added node connected to selected",{nodeId:r.id,targetNodeId:n}),this._updateStatus(i,"success"),{success:!0,node:r,connectedTo:n}}return this.log.warn("Failed to add node connected to selected",{targetNodeId:n}),{success:!1,error:"Failed to add node"}}removeRandomNode(){if(!this.graphManager.graphInstance.value)return{success:!1,error:"Graph not initialized"};const e=this.graphManager.getNodeIds();if(e.length===0){const i=this.translate("showcase.messages.noNodesToRemove");return this._updateStatus(i,"error"),{success:!1,error:"No nodes to remove"}}const n=e[Math.floor(Math.random()*e.length)];if(this.graphManager.removeNode(n,!0)){const i=this.translate("showcase.messages.removedNode",{nodeId:n});return this.log.debug("Removed random node",{nodeId:n}),this._updateStatus(i,"info"),{success:!0,removedNodeId:n}}return this.log.warn("Failed to remove random node"),{success:!1,error:"Failed to remove node"}}async analyzeGraph(e=["degree","eigenvector","betweenness"]){try{this.log.debug("Starting graph analysis",{metrics:e}),this._updateStatus("Analyzing network using workers...","info");const n=await this.graphManager.analyzeGraph(e);if(n){const r=this.translate("showcase.messages.analysisComplete",{count:n.nodes.length});return this.log.info("Graph analysis complete",{nodeCount:n.nodes.length,metrics:e}),this._updateStatus(r,"success"),{success:!0,results:n,nodeCount:n.nodes.length,metrics:e}}return this.log.warn("Analysis returned no results"),{success:!1,error:"Analysis returned no results"}}catch(n){const r=this.translate("showcase.messages.analysisFailed",{error:n.message});return this.log.error("Graph analysis failed",{error:n.message,stack:n.stack,metrics:e}),this._updateStatus(r,"error"),{success:!1,error:n.message}}}async applyLayout(e){if(e==="none"){const n=this.translate("showcase.messages.usingD3Physics");return this.log.debug("Using default D3 physics simulation"),this._updateStatus(n,"info"),this.graphManager.unlockPositions(),{success:!0,layoutId:"none",message:"Using default D3 physics simulation"}}try{if(this.log.debug("Applying layout algorithm",{layoutId:e}),this._updateStatus(`Applying ${e} layout...`,"info"),await this.graphManager.applyLayout(e)){const r=this.translate("showcase.messages.appliedLayout",{layout:e});return this.log.info("Layout applied successfully",{layoutId:e}),this._updateStatus(r,"success"),{success:!0,layoutId:e}}return this.log.warn("Layout application failed",{layoutId:e}),{success:!1,error:"Layout application failed"}}catch(n){const r=this.translate("showcase.messages.layoutFailed",{error:n.message});return this.log.error("Layout application failed",{layoutId:e,error:n.message,stack:n.stack}),this._updateStatus(r,"error"),{success:!1,error:n.message}}}getAvailableLayouts(){return this.graphManager.getAvailableLayouts()}_updateStatus(e,n){this.onStatusChange&&this.onStatusChange(e,n)}isGraphReady(){return this.graphManager.graphInstance.value!==null}getNodeCount(){return this.graphManager.getNodeIds().length}getAvailableCommunityAlgorithms(){return this.graphManager.getAvailableCommunityAlgorithms()}async detectCommunities(e){if(!this.isGraphReady())return this._updateStatus(this.translate("showcase.messages.graphNotInitialized"),"error"),null;if(this.getNodeCount()===0)return this._updateStatus(this.translate("showcase.messages.graphIsEmpty"),"error"),null;try{this._updateStatus(`Detecting communities using ${e}...`,"info");const r=await this.graphManager.detectCommunities(e);if(r){const i=this.translate("showcase.messages.foundCommunities",{count:r.numCommunities,modularity:r.modularity.toFixed(3)});return this._updateStatus(i,"success"),r}else return this._updateStatus(this.translate("showcase.messages.communityDetectionFailed"),"error"),null}catch(r){return this.log.error("Community detection failed",{algorithmId:e,error:r.message,stack:r.stack}),this._updateStatus(`Error: ${r.message}`,"error"),null}}getSelectedNode(){return this.graphManager.getSelectedNode()}}const ND={class:"demo-controls-header"},RD={class:"demo-controls-title"},LD={class:"demo-controls-description"},ID={class:"info-box-blue mb-4"},DD={class:"text-lg font-semibold text-blue-900 dark:text-blue-300 mb-2"},PD=["innerHTML"],GD={class:"sticky top-0 z-20 bg-white/98 dark:bg-gray-800/98 backdrop-blur-md border-b border-[var(--color-border)] pb-4 mb-4 -mx-6 px-6 pt-4 -mt-2 overflow-x-hidden"},MD={class:"demo-controls-section-title mb-3"},OD={class:"bg-[var(--color-bg-secondary)] rounded-md p-4 text-sm shadow-sm border border-[var(--color-border)]"},FD={key:0,class:"text-secondary text-center py-2"},$D={class:"text-xs"},zD={class:"text-xs mt-1 opacity-60"},BD={key:1,class:"space-y-2"},VD={class:"flex-shrink-0 mt-0.5"},UD={key:0},jD={key:1},HD={key:2},WD={class:"flex-1 break-words"},qD={class:"demo-controls-section border-t border-[var(--color-border)] pt-4"},KD={class:"demo-controls-section-title"},XD={class:"grid grid-cols-3 gap-2"},ZD=["title"],YD=["disabled","title"],JD=["title"],QD={class:"demo-controls-section border-t border-[var(--color-border)] pt-4"},eP={class:"demo-controls-section-title"},tP={class:"space-y-2"},nP={class:"block text-sm font-medium text-secondary"},rP={value:"default"},iP={value:"karate"},sP={value:"miserables"},oP={value:"kevinbacon"},aP=["disabled"],lP={key:0},cP={key:1},dP={class:"demo-controls-section border-t border-[var(--color-border)] pt-4"},uP={class:"demo-controls-section-title"},hP={class:"info-box-green mt-3"},fP=["innerHTML"],gP={class:"demo-controls-section border-t border-[var(--color-border)] pt-4"},pP={class:"demo-controls-section-title"},mP={class:"demo-controls-section border-t border-[var(--color-border)] pt-4"},yP={class:"demo-controls-section-title"},vP={key:0,class:"info-box-green mt-3"},_P={class:"text-sm text-green-800 dark:text-green-200 space-y-1"},bP={class:"text-xs mt-2"},wP={key:1,class:"info-box-yellow mt-3"},EP={class:"text-xs text-yellow-800 dark:text-yellow-200"},kP={class:"info-box-purple"},AP={class:"text-sm font-semibold text-purple-900 dark:text-purple-300 mb-2"},xP={class:"text-sm text-purple-800 dark:text-purple-200 space-y-1"},CP=["innerHTML"],SP=["innerHTML"],TP=["innerHTML"],NP=["innerHTML"],RP=["innerHTML"],LP=["innerHTML"],IP={key:0,class:"absolute inset-0 flex items-center justify-center bg-white/90 dark:bg-gray-900/90 backdrop-blur-md z-10"},DP={class:"text-center"},PP={class:"text-secondary"},GP={__name:"ShowcasePage",setup(t){const e=Ze({prefix:"ShowcasePage",level:"info"}),{t:n}=hn(),{trackShowcaseAction:r,trackDataAction:i,trackAnalysis:s}=Ga(),o=Pa(),{graphContainer:a,graphInstance:l,loading:c,loadData:d,addNode:u,removeNode:h,hasNode:f,getNodeIds:p,analysisProgress:y,analyzeGraph:w,applyLayout:b,getAvailableLayouts:E,detectCommunities:k,getAvailableCommunityAlgorithms:_,getSelectedNode:x,unlockPositions:T,updateVisualEncoding:L}=o,O=ce("default"),F=ce("none"),$=ce([]),j=ce("louvain"),z=ce([]),I=ce(null),A=ce(["degree","eigenvector","betweenness"]),D=ce(""),C=ce(""),S=ce("info"),U=ce("");let H=null;const ne=(B,Q)=>{C.value=B,S.value=Q},_e=()=>{const B={graphInstance:l,loadData:d,addNode:u,removeNode:h,hasNode:f,getNodeIds:p,analyzeGraph:w,applyLayout:b,getAvailableLayouts:E,detectCommunities:k,getAvailableCommunityAlgorithms:_,getSelectedNode:x,unlockPositions:T,updateVisualEncoding:L};H=new TD({graphManager:B,onStatusChange:ne,translate:(J,N)=>n(J,N)});const Q=H.getInitialDataset();U.value=n("showcase.messages.loadingGraph"),d(Q.nodes,Q.links),$.value=H.getAvailableLayouts(),z.value=H.getAvailableCommunityAlgorithms(),e.info("Initial data loaded",{layouts:$.value.length,communityAlgorithms:z.value.length,nodes:Q.nodes.length})},ye=()=>{H&&(r(Rl.NODE_ADD,{method:"random"}),H.addRandomNode())},ae=()=>{H&&(r(Rl.NODE_ADD,{method:"to_selected"}),H.addNodeToSelected())},W=()=>{H&&(r(Rl.NODE_REMOVE,{method:"random"}),H.removeRandomNode())},se=async()=>{if(H){i(Vc.DATASET_SELECT,{dataset:O.value});try{U.value=n("showcase.messages.loadingDataset").replace("{dataset}",O.value);const B=await H.loadDataset(O.value);B.success&&(U.value=n("showcase.messages.loadingDatasetName").replace("{name}",B.name))}catch(B){e.error("Failed to load dataset",{error:B.message,stack:B.stack}),c.value=!1}}},be=async()=>{if(H){s(fr.ANALYSIS_RUN,{metrics:A.value.join(",")});try{U.value=n("showcase.messages.analyzing"),await H.analyzeGraph(A.value)}catch(B){e.error("Analysis error",{error:B.message,stack:B.stack})}}},q=async()=>{if(H){s(fr.LAYOUT_CHANGE,{layout:F.value});try{U.value=n("showcase.messages.applyingLayout").replace("{layout}",F.value),await H.applyLayout(F.value)}catch(B){e.error("Layout error",{error:B.message,stack:B.stack})}}},oe=async()=>{if(H){s(fr.COMMUNITY_DETECTION,{algorithm:j.value});try{U.value=n("showcase.messages.detectingCommunities").replace("{algorithm}",j.value);const B=await H.detectCommunities(j.value);B&&(I.value=B)}catch(B){e.error("Community detection error",{error:B.message,stack:B.stack})}}};return ut(D,B=>{B&&l.value&&(e.debug("Size metric changed",{metric:B}),L({sizeBy:B,minRadius:5,maxRadius:20}))}),ut(l,B=>{B&&!H&&_e()},{immediate:!0}),(B,Q)=>(K(),Zn(_a,null,{controls:Ue(()=>[g("div",ND,[g("h1",RD,v(m(n)("showcase.header.title")),1),g("p",LD,v(m(n)("showcase.header.subtitle")),1)]),g("div",ID,[g("h2",DD,v(m(n)("showcase.whatIs.title")),1),g("p",{class:"text-sm text-blue-800 dark:text-blue-200",innerHTML:m(n)("showcase.whatIs.description")},null,8,PD)]),g("div",GD,[g("h2",MD,v(m(n)("showcase.status.title")),1),g("div",OD,[C.value?(K(),Y("div",BD,[g("div",{class:Ke({"flex items-start space-x-2":!0,"text-green-600 dark:text-green-400":S.value==="success","text-red-600 dark:text-red-400":S.value==="error","text-blue-600 dark:text-blue-400":S.value==="info"})},[g("div",VD,[S.value==="success"?(K(),Y("span",UD,"")):S.value==="error"?(K(),Y("span",jD,"")):(K(),Y("span",HD,""))]),g("div",WD,v(C.value),1)],2)])):(K(),Y("div",FD,[g("div",$D,v(m(n)("showcase.status.ready")),1),g("div",zD,v(m(n)("showcase.status.hover")),1)]))])]),g("div",qD,[g("h2",KD,v(m(n)("showcase.controls.title")),1),g("div",XD,[g("button",{onClick:ye,class:"btn-primary text-sm px-2 py-2 whitespace-nowrap",title:m(n)("showcase.controls.addRandom")},"  "+v(m(n)("showcase.buttons.add")),9,ZD),g("button",{onClick:ae,class:"btn-secondary text-sm px-2 py-2 whitespace-nowrap",disabled:!m(x)(),title:m(x)()?m(n)("showcase.controls.addToSelected").replace("{name}",m(x)().id):m(n)("showcase.controls.selectNodeFirst")},"  "+v(m(n)("showcase.buttons.toSelected")),9,YD),g("button",{onClick:W,class:"btn-primary bg-red-600 hover:bg-red-700 text-sm px-2 py-2 whitespace-nowrap",title:m(n)("showcase.controls.removeRandom")},"  "+v(m(n)("showcase.buttons.remove")),9,JD)])]),g("div",QD,[g("h2",eP,v(m(n)("showcase.dataLoading.title")),1),g("div",tP,[g("label",nP,v(m(n)("showcase.dataLoading.choose")),1),Wt(g("select",{"onUpdate:modelValue":Q[0]||(Q[0]=J=>O.value=J),class:"w-full bg-secondary text-primary border border-color px-3 py-2 rounded-md"},[g("option",rP,v(m(n)("showcase.dataLoading.default")),1),g("option",iP,v(m(n)("showcase.dataLoading.karate")),1),g("option",sP,v(m(n)("showcase.dataLoading.miserables")),1),g("option",oP,v(m(n)("showcase.dataLoading.kevinbacon")),1)],512),[[up,O.value]])]),g("button",{onClick:se,disabled:m(c),class:"w-full btn-primary mt-3"},[m(c)?(K(),Y("span",cP,v(m(n)("showcase.dataLoading.loading")),1)):(K(),Y("span",lP,v(m(n)("showcase.dataLoading.loadButton")),1))],8,aP)]),g("div",dP,[g("h2",uP,v(m(n)("showcase.networkAnalysis.title")),1),Ee(wa,{"selected-metrics":A.value,"onUpdate:selectedMetrics":Q[1]||(Q[1]=J=>A.value=J),"size-metric":D.value,"onUpdate:sizeMetric":Q[2]||(Q[2]=J=>D.value=J),analyzing:m(c),progress:m(y),onAnalyze:be},null,8,["selected-metrics","size-metric","analyzing","progress"]),g("div",hP,[g("p",{class:"text-xs text-green-800 dark:text-green-200",innerHTML:m(n)("showcase.networkAnalysis.description")},null,8,fP)])]),g("div",gP,[g("h2",pP,v(m(n)("showcase.layoutAlgorithm.title")),1),Ee(ba,{modelValue:F.value,"onUpdate:modelValue":Q[3]||(Q[3]=J=>F.value=J),"available-layouts":$.value,loading:m(c),onApply:q},null,8,["modelValue","available-layouts","loading"])]),g("div",mP,[g("h2",yP,v(m(n)("showcase.communityDetection.title")),1),Ee(pm,{modelValue:j.value,"onUpdate:modelValue":Q[4]||(Q[4]=J=>j.value=J),"available-algorithms":z.value,detecting:m(c),onDetect:oe},{results:Ue(()=>[I.value?(K(),Y("div",vP,[g("div",_P,[g("div",null,[g("strong",null,v(m(n)("showcase.communityDetection.communitiesFound")),1),Se(" "+v(I.value.numCommunities),1)]),g("div",null,[g("strong",null,v(m(n)("showcase.communityDetection.modularity")),1),Se(" "+v(I.value.modularity.toFixed(3)),1)]),g("div",bP,v(m(n)("showcase.communityDetection.nodeColorsAssignments")),1)])])):Ge("",!0),z.value.length>0&&!I.value?(K(),Y("div",wP,[g("p",EP,[g("strong",null,v(z.value.find(J=>J.id===j.value)?.name)+":",1),Se(" "+v(z.value.find(J=>J.id===j.value)?.description),1)])])):Ge("",!0)]),_:1},8,["modelValue","available-algorithms","detecting"])]),g("div",kP,[g("h3",AP,v(m(n)("showcase.instructions.title")),1),g("ul",xP,[g("li",{innerHTML:m(n)("showcase.instructions.dragNodes")},null,8,CP),g("li",{innerHTML:m(n)("showcase.instructions.scroll")},null,8,SP),g("li",{innerHTML:m(n)("showcase.instructions.dragBackground")},null,8,TP),g("li",{innerHTML:m(n)("showcase.instructions.hoverNodes")},null,8,NP),g("li",{innerHTML:m(n)("showcase.instructions.nodeSize")},null,8,RP),g("li",{innerHTML:m(n)("showcase.instructions.color")},null,8,LP)])])]),graph:Ue(()=>[m(c)?(K(),Y("div",IP,[g("div",DP,[Q[5]||(Q[5]=g("div",{class:"inline-block animate-spin rounded-full h-12 w-12 border-4 border-purple-600 border-t-transparent mb-4"},null,-1)),g("p",PP,v(U.value),1)])])):Ge("",!0),g("div",{ref_key:"graphContainer",ref:a,class:"w-full h-full"},null,512)]),_:1}))}};class MP{constructor({graphManager:e,onStatusChange:n=null,translate:r=null}){this.graphManager=e,this.onStatusChange=n,this.translate=r||(i=>i),this.log=Ze({prefix:"ExplorerController",level:"info"}),this.sampleNetworks={caruaru:{name:"Caruaru",file:"/data/network_caruaru.json",description:"Small network (~130 edges)",type:"json"},rj:{name:"Rio de Janeiro",file:"/data/network_rj.json",description:"Medium network (~1,900 edges)",type:"json"},niteroi:{name:"Niteri",file:"/data/network_niteroi.json",description:"Large network (~18,500 edges)",type:"json"},karate:{name:"Karate Club",file:"/data/karateclub.json",description:"Classic social network (34 nodes, 78 edges)",type:"json"},miserables:{name:"Les Misrables",file:"/data/les_miserables.csv",description:"Character co-occurrence network (77 nodes, 254 edges)",type:"csv"},kevinbacon:{name:"Kevin Bacon",file:"/data/kevin_bacon_edges.csv",nodeFile:"/data/kevin_bacon_nodes.csv",description:"Kevin Bacon network (128 nodes, 128 edges)",type:"csv"}},this.workersSupported=typeof Worker<"u",this.workerCount=navigator.hardwareConcurrency||4}async loadSampleNetwork(e){const n=this.sampleNetworks[e];if(!n)return{success:!1,error:`Unknown network: ${e}`};try{this.log.debug("Loading sample network",{networkKey:e,networkName:n.name}),this._updateStatus(this.translate("explorer.messages.loadingNetworkData"),"info");let r;if(n.type==="csv"){const s=await ks.loadFromURL(n.file,n.nodeFile||null);r={nodes:s.nodes.map(a=>({...a,group:a.group||(a.category==="movie"?1:a.category==="actor"?2:1)})),links:s.edges}}else if(e==="karate"){const s=await Bc.loadFromURL(n.file);r={nodes:s.nodes.map(a=>({...a,group:a.club==="Mr. Hi"?1:2})),links:s.edges}}else{const s=await fetch(n.file);if(!s.ok)throw new Error(`Failed to fetch: ${s.statusText}`);const o=await s.json(),a=new Set,l=[];o.forEach(d=>{a.add(d.source),a.add(d.target),l.push({source:String(d.source),target:String(d.target),weight:d.weight||1})}),r={nodes:Array.from(a).map(d=>({id:String(d),group:1})),links:l.map(d=>({source:d.source,target:d.target,weight:d.weight}))}}this.graphManager.loadData(r.nodes,r.links),e==="kevinbacon"&&this.graphManager.updateVisualEncoding({colorBy:"category",colorScheme:"categorical"});const i=this.translate("explorer.messages.loadedNetwork",{name:n.name,nodes:r.nodes.length,edges:r.links.length});return this.log.info("Sample network loaded successfully",{name:n.name,nodeCount:r.nodes.length,edgeCount:r.links.length}),this._updateStatus(i,"success"),{success:!0,data:r,name:n.name,nodeCount:r.nodes.length,edgeCount:r.links.length,description:n.description,useWorkers:r.nodes.length>=500&&this.workersSupported}}catch(r){const i=this.translate("explorer.messages.failedToLoadNetwork",{error:r.message});return this.log.error("Failed to load sample network",{networkKey:e,error:r.message,stack:r.stack}),this._updateStatus(i,"error"),{success:!1,error:r.message}}}async loadUploadedNetwork(e,n,r,i){try{this.log.debug("Loading uploaded network",{format:e}),this._updateStatus(this.translate("explorer.messages.loadingUploadedFile"),"info");let s;if(e==="csv"){if(!n)throw new Error("Edges CSV file is required");this.log.debug("Loading CSV files",{edgeFile:n.name,nodeFile:r?.name}),s=await ks.loadFromFiles(n,r||null)}else if(e==="json"){if(!i)throw new Error("JSON file is required");this.log.debug("Loading JSON file",{fileName:i.name});const d=await i.text(),u=JSON.parse(d);if(Array.isArray(u)&&u.length>0&&u[0].source&&u[0].target){this.log.debug("Detected raw edge list array format");const h=new Set;u.forEach(f=>{h.add(f.source),h.add(f.target)}),s={nodes:Array.from(h).map(f=>({id:String(f),group:1})),edges:u.map(f=>({source:String(f.source),target:String(f.target),weight:f.weight||1}))}}else s=Bc.fromFormat(u)}else if(e==="networkx"){if(!i)throw new Error("NetworkX JSON file is required");this.log.debug("Loading NetworkX file",{fileName:i.name});const d=await i.text(),u=JSON.parse(d);s=bD.fromFormat(u)}else throw new Error(`Unknown format: ${e}`);this.log.info("Parsed graph data",{nodes:s.nodes.length,edges:s.edges.length});const o=s.nodes.map(d=>({...d,id:String(d.id),group:d.group||1})),a=s.edges.map(d=>({source:String(d.source),target:String(d.target),weight:d.weight||1}));this.graphManager.loadData(o,a);const l=i?.name||n?.name||"uploaded file",c=this.translate("explorer.messages.loadedFile",{fileName:l,nodes:o.length,edges:a.length});return this.log.info("Uploaded network loaded successfully",{fileName:l,nodeCount:o.length,edgeCount:a.length}),this._updateStatus(c,"success"),{success:!0,data:{nodes:o,links:a},name:l,nodeCount:o.length,edgeCount:a.length,description:`Uploaded ${e.toUpperCase()} file`,useWorkers:o.length>=500&&this.workersSupported}}catch(s){const o=this.translate("explorer.messages.failedToLoadFile",{error:s.message});return this.log.error("Failed to load uploaded network",{format:e,error:s.message,stack:s.stack}),this._updateStatus(o,"error"),{success:!1,error:s.message}}}async analyzeGraph(e=["degree","eigenvector"],n=null){try{this.log.debug("Starting graph analysis",{metrics:e,sizeMetric:n}),this._updateStatus(this.translate("explorer.messages.analyzingNetwork"),"info");const r=await this.graphManager.analyzeGraph(e,{includeGraphStats:!0,graphStats:["density","diameter","average_clustering","average_shortest_path","connected_components","average_degree"]});if(r){const i=r.nodes.length,s=r.links.length,o=(2*s/i).toFixed(2);n&&r.nodes.some(l=>l[n]!==void 0)&&this.graphManager.updateVisualEncoding({sizeBy:n,minRadius:5,maxRadius:20});const a=this.translate("explorer.messages.analysisComplete",{count:i});return this.log.info("Graph analysis complete",{nodeCount:i,metrics:e,hasGraphStats:!!r.graphStats}),this._updateStatus(a,"success"),{success:!0,results:r,nodeCount:i,linkCount:s,avgDegree:o,metrics:e,graphStats:r.graphStats||{average_degree:parseFloat(o)}}}return this.log.warn("Analysis returned no results"),{success:!1,error:"Analysis returned no results"}}catch(r){const i=this.translate("explorer.messages.analysisFailed",{error:r.message});return this.log.error("Graph analysis failed",{error:r.message,stack:r.stack,metrics:e}),this._updateStatus(i,"error"),{success:!1,error:r.message}}}async applyLayout(e){if(e==="none"){const n=this.translate("explorer.messages.usingD3Physics");return this.log.debug("Using default D3 physics simulation"),this._updateStatus(n,"info"),this.graphManager.unlockPositions(),{success:!0,layoutId:"none",message:"Using default D3 physics simulation"}}try{if(this.log.debug("Applying layout algorithm",{layoutId:e}),this._updateStatus(this.translate("explorer.messages.applyingLayout",{layout:e}),"info"),await this.graphManager.applyLayout(e)){const r=this.translate("explorer.messages.appliedLayout",{layout:e});return this.log.info("Layout applied successfully",{layoutId:e}),this._updateStatus(r,"success"),{success:!0,layoutId:e}}return this.log.warn("Layout application failed",{layoutId:e}),{success:!1,error:"Layout application failed"}}catch(n){const r=this.translate("explorer.messages.layoutFailed",{error:n.message});return this.log.error("Layout application failed",{layoutId:e,error:n.message,stack:n.stack}),this._updateStatus(r,"error"),{success:!1,error:n.message}}}async detectCommunities(e){if(!this.graphManager.graphInstance.value)return this._updateStatus(this.translate("explorer.messages.graphNotInitialized"),"error"),null;if(this.graphManager.getNodeIds().length===0)return this._updateStatus(this.translate("explorer.messages.graphIsEmpty"),"error"),null;try{this._updateStatus(this.translate("explorer.messages.detectingCommunities",{algorithm:e}),"info");const r=await this.graphManager.detectCommunities(e);if(r){const i=this.translate("explorer.messages.foundCommunities",{count:r.numCommunities,modularity:r.modularity.toFixed(3)});return this._updateStatus(i,"success"),r}else return this._updateStatus(this.translate("explorer.messages.communityDetectionFailed"),"error"),null}catch(r){return this.log.error("Community detection failed",{algorithmId:e,error:r.message,stack:r.stack}),this._updateStatus(this.translate("explorer.messages.analysisFailed",{error:r.message}),"error"),null}}getAvailableLayouts(){return this.graphManager.getAvailableLayouts()}getAvailableCommunityAlgorithms(){return this.graphManager.getAvailableCommunityAlgorithms()}getWorkerInfo(){return{supported:this.workersSupported,count:this.workerCount}}_updateStatus(e,n){this.onStatusChange&&this.onStatusChange(e,n)}}const OP={class:"demo-controls-header"},FP={class:"demo-controls-title"},$P={class:"demo-controls-description"},zP={class:"info-box-blue mb-4"},BP={class:"text-lg font-semibold text-blue-900 dark:text-blue-300 mb-2"},VP=["innerHTML"],UP={class:"flex items-center gap-2 text-xs"},jP={key:0},HP={key:1},WP={key:0,class:"badge badge-yellow"},qP={class:"demo-controls-section mb-4"},KP={class:"demo-controls-section-title"},XP={class:"flex gap-2 bg-gray-100 dark:bg-gray-800 p-1 rounded-lg"},ZP=["disabled"],YP=["disabled"],JP={class:"text-xs text-secondary mt-2"},QP={class:"sticky top-0 z-20 bg-white/98 dark:bg-gray-800/98 backdrop-blur-md border-b border-[var(--color-border)] pb-4 mb-4 -mx-6 px-6 pt-4 -mt-2 shadow-sm"},eG={class:"demo-controls-section-title mb-3"},tG={class:"bg-[var(--color-bg-secondary)] rounded-md p-4 text-sm shadow-sm border border-[var(--color-border)]"},nG={key:0,class:"text-secondary text-center py-2"},rG={class:"text-xs"},iG={class:"text-xs mt-1 opacity-60"},sG={key:1,class:"space-y-2"},oG={class:"flex-shrink-0 mt-0.5"},aG={key:0},lG={key:1},cG={key:2},dG={class:"flex-1 break-words"},uG={class:"demo-controls-section border-t border-[var(--color-border)] pt-4"},hG={class:"demo-controls-section-title"},fG={class:"flex gap-2 bg-gray-100 dark:bg-gray-800 p-1 rounded-lg mb-4"},gG={class:"space-y-2"},pG={class:"block text-sm font-medium text-secondary"},mG=["disabled"],yG={key:0},vG={key:1},_G={class:"space-y-3"},bG={class:"space-y-2"},wG={class:"block text-sm font-medium text-secondary"},EG={class:"space-y-2"},kG={class:"block text-sm font-medium text-secondary"},AG={class:"block text-sm font-medium text-secondary mt-2"},xG=["innerHTML"],CG={class:"space-y-2"},SG={class:"block text-sm font-medium text-secondary"},TG={key:0},NG={key:1},RG={key:0,class:"text-xs text-secondary bg-[var(--color-bg-secondary)] rounded p-2"},LG={key:1,class:"text-xs text-secondary bg-[var(--color-bg-secondary)] rounded p-2"},IG=["disabled"],DG={key:0},PG={key:1},GG={class:"demo-controls-section border-t border-[var(--color-border)] pt-4"},MG={class:"demo-controls-section-title"},OG={key:0,class:"demo-controls-section border-t border-[var(--color-border)] pt-4"},FG={class:"demo-controls-section-title"},$G={class:"metrics-grid-row mb-3"},zG={class:"metric-card"},BG={class:"text-xs text-secondary"},VG={class:"text-xl font-bold text-purple-600 dark:text-purple-400"},UG={class:"metric-card"},jG={class:"text-xs text-secondary"},HG={class:"text-xl font-bold text-pink-600 dark:text-pink-400"},WG={class:"metric-card"},qG={class:"text-xs text-secondary"},KG={class:"text-xl font-bold text-blue-600 dark:text-blue-400"},XG={class:"metric-card"},ZG={class:"text-xs text-secondary"},YG={class:"text-xl font-bold text-green-600 dark:text-green-400"},JG={key:0,class:"metric-card"},QG={class:"text-xs text-secondary"},eM={class:"text-xl font-bold text-orange-600 dark:text-orange-400"},tM={key:1,class:"metric-card"},nM={class:"text-xs text-secondary"},rM={class:"text-xl font-bold text-cyan-600 dark:text-cyan-400"},iM={key:2,class:"metric-card"},sM={class:"text-xs text-secondary"},oM={class:"text-xl font-bold text-indigo-600 dark:text-indigo-400"},aM={key:3,class:"metric-card"},lM={class:"text-xs text-secondary"},cM={class:"text-xl font-bold text-violet-600 dark:text-violet-400"},dM={key:4,class:"metric-card"},uM={class:"text-xs text-secondary"},hM={class:"text-xl font-bold text-fuchsia-600 dark:text-fuchsia-400"},fM={key:5,class:"metric-card"},gM={class:"text-xs text-secondary"},pM={class:"text-xl font-bold text-rose-600 dark:text-rose-400"},mM={key:6,class:"metric-card"},yM={class:"text-xs text-secondary"},vM={class:"text-xl font-bold text-sky-600 dark:text-sky-400"},_M={key:0,class:"info-box-green text-xs"},bM={class:"font-semibold text-green-800 dark:text-green-300"},wM={class:"text-green-700 dark:text-green-400"},EM={key:1,class:"info-box-yellow text-xs"},kM={class:"font-semibold text-yellow-800 dark:text-yellow-300"},AM={class:"text-yellow-700 dark:text-yellow-400"},xM={class:"demo-controls-section border-t border-[var(--color-border)] pt-4"},CM={class:"demo-controls-section-title"},SM={class:"info-box-yellow mt-3"},TM={class:"text-xs text-yellow-800 dark:text-yellow-200"},NM={key:0,class:"italic"},RM={class:"demo-controls-section border-t border-[var(--color-border)] pt-4"},LM={class:"demo-controls-section-title"},IM={key:1,class:"demo-controls-section border-t border-[var(--color-border)] pt-4"},DM={class:"bg-gradient-to-br from-orange-50 to-pink-50 dark:from-orange-900/30 dark:to-pink-900/30 rounded-lg p-4 border-2 border-orange-200 dark:border-orange-700"},PM={class:"text-sm font-semibold text-orange-900 dark:text-orange-300 mb-3 flex items-center gap-2"},GM={class:"space-y-2"},MM={class:"flex justify-between items-center"},OM={class:"text-sm text-orange-800 dark:text-orange-200"},FM={class:"text-lg font-bold text-orange-600 dark:text-orange-400"},$M={class:"flex justify-between items-center"},zM={class:"text-sm text-orange-800 dark:text-orange-200"},BM={class:"text-lg font-bold text-orange-600 dark:text-orange-400"},VM={class:"flex justify-between items-center"},UM={class:"text-sm text-orange-800 dark:text-orange-200"},jM={class:"text-sm font-semibold text-orange-600 dark:text-orange-400"},HM={class:"flex justify-between items-center"},WM={class:"text-sm text-orange-800 dark:text-orange-200"},qM={class:"text-sm font-semibold text-orange-600 dark:text-orange-400"},KM={class:"mt-3 pt-3 border-t border-orange-200 dark:border-orange-700"},XM={class:"text-xs text-orange-700 dark:text-orange-300"},ZM={class:"info-box-purple"},YM={class:"text-sm font-semibold text-purple-900 dark:text-purple-300 mb-2"},JM={class:"text-sm text-purple-800 dark:text-purple-200 space-y-1"},QM=["innerHTML"],eO=["innerHTML"],tO=["innerHTML"],nO=["innerHTML"],rO=["innerHTML"],iO=["innerHTML"],sO={key:0,class:"absolute inset-0 flex items-center justify-center bg-white/90 dark:bg-gray-900/90 backdrop-blur-md z-10"},oO={class:"text-center"},aO={class:"text-secondary"},lO={__name:"ExplorerPage",setup(t){const e=Ze({prefix:"ExplorerPage",level:"info"}),{t:n}=hn(),{trackDataAction:r,trackAnalysis:i,trackGraphInteraction:s}=Ga(),o=Pa(),{graphContainer:a,graphInstance:l,loading:c,loadData:d,analysisProgress:u,analyzeGraph:h,applyLayout:f,getAvailableLayouts:p,detectCommunities:y,getAvailableCommunityAlgorithms:w,updateVisualEncoding:b,getNodeIds:E,unlockPositions:k,currentRenderer:_,switchRenderer:x}=o,T=ce("sample"),L=ce(""),O=ce("json"),F=ce(null),$=ce(null),j=ce(null),z=ce("none"),I=ce([]),A=ce([]),D=ce(""),C=ce(!1),S=ce(!1),U=ce("louvain"),H=ce([]),ne=ce(!1),_e=ce(!1),ye=ce(!1),ae=ce(""),W=ce("info"),se=ce("Loading graph..."),be=ce(null),q=ce("-"),oe=ce(!1),B=ce(null),Q=ce(!1),J=ce(!1),N=ce({nodes:0,edges:0,avgDegree:0,analysisTime:"-",communities:null,modularity:null}),P=ce({type:"default",message:"Select a network to begin...",details:null});let G=null;const V=ce({supported:typeof Worker<"u",count:navigator.hardwareConcurrency||4}),M=Je(()=>O.value==="csv"?F.value!==null:j.value!==null),Z=(ee,re)=>{ae.value=ee,W.value=re},ie=(ee,re,X=null)=>{P.value={type:ee,message:re,details:X}},he=()=>{const ee={graphInstance:l,loadData:d,analyzeGraph:h,applyLayout:f,getAvailableLayouts:p,detectCommunities:y,getAvailableCommunityAlgorithms:w,updateVisualEncoding:b,getNodeIds:E,unlockPositions:k};G=new MP({graphManager:ee,onStatusChange:Z,translate:(re,X)=>n(re,X)}),I.value=G.getAvailableLayouts(),H.value=G.getAvailableCommunityAlgorithms(),l.value&&(l.value.on("nodeHover",re=>{ie("node-hover",`Node: ${re.id}`,{id:re.id,group:re.group||1,community:oe.value?re.community:null,centrality:re.centrality?.toFixed(4)||"N/A",degree:re.degree||"N/A",betweenness:re.betweenness?.toFixed(4),clustering:re.clustering?.toFixed(3),eigenvector:re.eigenvector?.toFixed(4),closeness:re.closeness?.toFixed(4),egoDensity:re["ego-density"]?.toFixed(3),cliques:re.cliques})}),l.value.on("nodeLeave",()=>{ne.value?ie("default","Hover over a node to see details..."):ie("default","Select a network to begin...")})),de()},de=()=>{const ee={nodes:[{id:"Alice",group:1},{id:"Bob",group:1},{id:"Charlie",group:2},{id:"David",group:2},{id:"Eve",group:3},{id:"Frank",group:3},{id:"Grace",group:1},{id:"Henry",group:2},{id:"Isabel",group:4},{id:"John",group:4},{id:"Kate",group:5},{id:"Luke",group:5},{id:"Mary",group:6},{id:"Nick",group:6},{id:"Oliver",group:7}],links:[{source:"Alice",target:"Bob"},{source:"Alice",target:"Charlie"},{source:"Bob",target:"Charlie"},{source:"Charlie",target:"David"},{source:"Eve",target:"Frank"},{source:"Eve",target:"Alice"},{source:"Grace",target:"Alice"},{source:"Henry",target:"Bob"},{source:"Henry",target:"Eve"},{source:"Isabel",target:"John"},{source:"Isabel",target:"Kate"},{source:"John",target:"Luke"},{source:"Kate",target:"Mary"},{source:"Luke",target:"Nick"},{source:"Mary",target:"Oliver"},{source:"Nick",target:"Oliver"},{source:"Oliver",target:"Alice"},{source:"Frank",target:"Mary"},{source:"David",target:"Isabel"},{source:"Grace",target:"Kate"}]};d(ee.nodes,ee.links),ne.value=!0,A.value=[],D.value="",C.value=!1,S.value=!1,l.value&&typeof l.value.updateCliqueEdgeColors=="function"&&l.value.updateCliqueEdgeColors(!1),N.value={nodes:ee.nodes.length,edges:ee.links.length,avgDegree:(2*ee.links.length/ee.nodes.length).toFixed(2),analysisTime:"-",communities:null,modularity:null},ie("default","Default network loaded. Hover over a node to see details...")},te=async()=>{if(!(!G||!L.value)){r(Vc.SAMPLE_NETWORK_LOAD,{network:L.value});try{c.value=!0,se.value=`Loading ${L.value} network...`,ie("loading","Loading network data...");const ee=await G.loadSampleNetwork(L.value);ee.success?(ne.value=!0,J.value=ee.useWorkers||!1,z.value="none",A.value=[],D.value="",C.value=!1,S.value=!1,l.value&&typeof l.value.updateCliqueEdgeColors=="function"&&l.value.updateCliqueEdgeColors(!1),N.value={nodes:ee.nodeCount,edges:ee.edgeCount,avgDegree:(2*ee.edgeCount/ee.nodeCount).toFixed(2),analysisTime:"-",communities:null,modularity:null},ie("success",`Loaded: ${ee.name}`,{nodes:ee.nodeCount,edges:ee.edgeCount,description:ee.description})):(c.value=!1,ie("error",`Failed to load network: ${ee.error||"Unknown error"}`))}catch(ee){e.error("Failed to load sample network",{error:ee.message,stack:ee.stack}),c.value=!1,ie("error",`Failed to load network: ${ee.message}`)}}},ke=async()=>{if(!(!G||!M.value)){r(Vc.FILE_UPLOAD,{format:O.value});try{c.value=!0,se.value="Loading uploaded file...",ie("loading","Loading uploaded file...");const ee=await G.loadUploadedNetwork(O.value,F.value,$.value,j.value);ee.success?(ne.value=!0,J.value=ee.useWorkers||!1,z.value="none",A.value=[],D.value="",C.value=!1,S.value=!1,l.value&&typeof l.value.updateCliqueEdgeColors=="function"&&l.value.updateCliqueEdgeColors(!1),N.value={nodes:ee.nodeCount,edges:ee.edgeCount,avgDegree:(2*ee.edgeCount/ee.nodeCount).toFixed(2),analysisTime:"-",communities:null,modularity:null},ie("success",`Loaded: ${ee.name}`,{nodes:ee.nodeCount,edges:ee.edgeCount,description:ee.description})):(c.value=!1,ie("error",`Failed to load file: ${ee.error||"Unknown error"}`))}catch(ee){e.error("Failed to load uploaded network",{error:ee.message,stack:ee.stack}),c.value=!1,ie("error",`Failed to load file: ${ee.message}`)}}},ve=async()=>{if(!(!G||!ne.value)){i(fr.ANALYSIS_RUN,{metrics:A.value.join(",")});try{_e.value=!0,se.value="Analyzing network using workers...",ie("loading","Running network analysis...");const ee=performance.now(),re=await G.analyzeGraph(A.value,D.value),X=performance.now()-ee;N.value.analysisTime=`${(X/1e3).toFixed(2)}s`,re.success?(S.value=A.value.includes("cliques"),re.graphStats&&(B.value=re.graphStats,Q.value=!0),ie("success","Analysis complete",{nodes:re.nodeCount,edges:re.linkCount,time:N.value.analysisTime,metric:D.value||A.value[0]})):e.warn("Analysis completed but returned unsuccessful",{result:re})}catch(ee){e.error("Analysis error",{error:ee.message,stack:ee.stack}),ie("error",`Analysis failed: ${ee.message}`)}finally{_e.value=!1}}},Ae=async()=>{if(!(!G||!ne.value)){i(fr.LAYOUT_CHANGE,{layout:z.value});try{se.value=`Applying ${z.value} layout...`,ae.value=`Applying ${z.value} layout...`,W.value="info";const ee=await G.applyLayout(z.value);if(ee.success)ae.value=` Applied ${z.value} layout`,W.value="success",ie("layout-applied",`Layout Applied: ${z.value}`,{description:z.value==="none"?"Using D3's built-in force simulation":"Nodes fixed in position (D3 physics disabled)"});else{const re=ee.error||"Layout application failed";ae.value=` ${re}`,W.value="error",ie("error",`Layout failed: ${re}`)}}catch(ee){e.error("Layout error",{error:ee.message,stack:ee.stack});const re=ee.message||"Layout failed";ae.value=` ${re}`,W.value="error",ie("error",`Layout failed: ${re}`)}}},Ce=async()=>{if(!(!G||!ne.value)){i(fr.COMMUNITY_DETECTION,{algorithm:U.value});try{ye.value=!0,se.value=`Detecting communities using ${U.value}...`,ie("loading","Detecting communities...");const ee=performance.now(),re=await G.detectCommunities(U.value),X=performance.now()-ee;re&&(be.value=re,q.value=`${(X/1e3).toFixed(2)}s`,oe.value=!0,N.value.communities=re.numCommunities,N.value.modularity=re.modularity.toFixed(3),ie("default","Hover over a node to see details..."))}catch(ee){e.error("Community detection error",{error:ee.message,stack:ee.stack}),ie("error",`Community detection failed: ${ee.message}`)}finally{ye.value=!1}}},Ie=async ee=>{if(ee!==_.value){s(kD.RENDERER_SWITCH,{renderer:ee});try{se.value=`Switching to ${ee==="d3"?"D3.js (SVG)":"Sigma.js (WebGL)"} renderer...`,ae.value=se.value,W.value="info",await x(ee)?(ae.value=`Switched to ${ee==="d3"?"D3.js (SVG)":"Sigma.js (WebGL)"} renderer`,W.value="success",l.value&&(l.value.on("nodeHover",X=>{ie("node-hover",`Node: ${X.id}`,{id:X.id,group:X.group||1,community:oe.value?X.community:null,centrality:X.centrality?.toFixed(4)||"N/A",degree:X.degree||"N/A",betweenness:X.betweenness?.toFixed(4),clustering:X.clustering?.toFixed(3),eigenvector:X.eigenvector?.toFixed(4),closeness:X.closeness?.toFixed(4),egoDensity:X["ego-density"]?.toFixed(3),cliques:X.cliques})}),l.value.on("nodeLeave",()=>{ne.value?ie("default","Hover over a node to see details..."):ie("default","Select a network to begin...")}),C.value&&S.value&&typeof l.value.updateCliqueEdgeColors=="function"&&setTimeout(()=>{l.value.updateCliqueEdgeColors(!0)},100),L.value==="kevinbacon"&&setTimeout(()=>{b({colorBy:"category",colorScheme:"categorical"})},100))):(ae.value="Failed to switch renderer",W.value="error")}catch(re){e.error("Renderer switch error",{error:re.message,stack:re.stack}),ae.value=`Failed to switch renderer: ${re.message}`,W.value="error"}}};return ut(C,ee=>{l.value&&S.value&&typeof l.value.updateCliqueEdgeColors=="function"&&l.value.updateCliqueEdgeColors(ee)}),ut(D,ee=>{ee&&l.value&&(e.debug("Size metric changed",{metric:ee}),b({sizeBy:ee,minRadius:5,maxRadius:20}))}),ut(l,(ee,re)=>{ee&&!G&&he(),ee&&C.value&&S.value&&typeof ee.updateCliqueEdgeColors=="function"&&setTimeout(()=>{ee.updateCliqueEdgeColors(!0)},100)},{immediate:!0}),(ee,re)=>(K(),Zn(_a,null,{controls:Ue(()=>[g("div",OP,[g("h1",FP,v(m(n)("explorer.header.title")),1),g("p",$P,v(m(n)("explorer.header.subtitle")),1)]),g("div",zP,[g("h2",BP,v(m(n)("explorer.parallelComputation.title")),1),g("p",{class:"text-sm text-blue-800 dark:text-blue-200 mb-3",innerHTML:m(n)("explorer.parallelComputation.description")},null,8,VP),g("div",UP,[g("span",{class:Ke(V.value.supported?"badge badge-green":"badge badge-red")},[V.value.supported?(K(),Y("span",jP,v(m(n)("explorer.parallelComputation.workersSupported")),1)):(K(),Y("span",HP,v(m(n)("explorer.parallelComputation.workersNotSupported")),1))],2),V.value.supported?(K(),Y("span",WP,v(V.value.count)+" "+v(m(n)("explorer.parallelComputation.cores")),1)):Ge("",!0)])]),g("div",qP,[g("h2",KP,v(m(n)("explorer.renderer.title")),1),g("div",XP,[g("button",{onClick:re[0]||(re[0]=X=>Ie("d3")),disabled:m(c),class:Ke(["flex-1 px-3 py-2 rounded-md text-sm font-medium transition-colors",m(_)==="d3"?"bg-white dark:bg-gray-700 shadow text-purple-700 dark:text-purple-300":"hover:bg-gray-200 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300"])},v(m(n)("explorer.renderer.d3")),11,ZP),g("button",{onClick:re[1]||(re[1]=X=>Ie("sigma")),disabled:m(c),class:Ke(["flex-1 px-3 py-2 rounded-md text-sm font-medium transition-colors",m(_)==="sigma"?"bg-white dark:bg-gray-700 shadow text-purple-700 dark:text-purple-300":"hover:bg-gray-200 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300"])},v(m(n)("explorer.renderer.sigma")),11,YP)]),g("p",JP,v(m(_)==="d3"?m(n)("explorer.renderer.d3Description"):m(n)("explorer.renderer.sigmaDescription")),1)]),g("div",QP,[g("h2",eG,v(m(n)("explorer.status.title")),1),g("div",tG,[ae.value?(K(),Y("div",sG,[g("div",{class:Ke({"flex items-start space-x-2":!0,"text-green-600 dark:text-green-400":W.value==="success","text-red-600 dark:text-red-400":W.value==="error","text-blue-600 dark:text-blue-400":W.value==="info"})},[g("div",oG,[W.value==="success"?(K(),Y("span",aG,"")):W.value==="error"?(K(),Y("span",lG,"")):(K(),Y("span",cG,""))]),g("div",dG,v(ae.value),1)],2)])):(K(),Y("div",nG,[g("div",rG,v(m(n)("explorer.status.ready")),1),g("div",iG,v(m(n)("explorer.status.loadNetwork")),1)]))])]),g("div",uG,[g("h2",hG,v(m(n)("explorer.dataLoading.title")),1),g("div",fG,[g("button",{onClick:re[2]||(re[2]=X=>T.value="sample"),class:Ke([T.value==="sample"?"bg-white dark:bg-gray-700 shadow":"hover:bg-gray-200 dark:hover:bg-gray-700","flex-1 px-3 py-2 rounded-md text-sm font-medium text-gray-700 dark:text-gray-300 transition-colors"])},v(m(n)("explorer.dataLoading.sampleNetworks")),3),g("button",{onClick:re[3]||(re[3]=X=>T.value="upload"),class:Ke([T.value==="upload"?"bg-white dark:bg-gray-700 shadow":"hover:bg-gray-200 dark:hover:bg-gray-700","flex-1 px-3 py-2 rounded-md text-sm font-medium text-gray-700 dark:text-gray-300 transition-colors"])},v(m(n)("explorer.dataLoading.uploadFile")),3)]),Wt(g("div",gG,[g("label",pG,v(m(n)("explorer.dataLoading.chooseNetwork")),1),Ee(Mr,{modelValue:L.value,"onUpdate:modelValue":re[4]||(re[4]=X=>L.value=X),options:[{value:"karate",label:m(n)("explorer.dataLoading.karate")},{value:"miserables",label:m(n)("explorer.dataLoading.miserables")},{value:"kevinbacon",label:m(n)("explorer.dataLoading.kevinbacon")},{value:"caruaru",label:m(n)("explorer.dataLoading.caruaru")},{value:"rj",label:m(n)("explorer.dataLoading.rj")},{value:"niteroi",label:m(n)("explorer.dataLoading.niteroi")}],placeholder:m(n)("explorer.dataLoading.chooseCity")},null,8,["modelValue","options","placeholder"]),g("button",{onClick:te,disabled:!L.value||m(c),class:"w-full btn-primary mt-3"},[m(c)?(K(),Y("span",vG,v(m(n)("explorer.dataLoading.loading")),1)):(K(),Y("span",yG,v(m(n)("explorer.dataLoading.loadNetwork")),1))],8,mG)],512),[[Bs,T.value==="sample"]]),Wt(g("div",_G,[g("div",bG,[g("label",wG,v(m(n)("explorer.dataLoading.fileFormat")),1),Ee(Mr,{modelValue:O.value,"onUpdate:modelValue":re[5]||(re[5]=X=>O.value=X),options:[{value:"json",label:m(n)("explorer.dataLoading.formatJSON")},{value:"csv",label:m(n)("explorer.dataLoading.formatCSV")},{value:"networkx",label:m(n)("explorer.dataLoading.formatNetworkX")}]},null,8,["modelValue","options"])]),Wt(g("div",EG,[g("label",kG,v(m(n)("explorer.dataLoading.edgesCSV")),1),g("input",{type:"file",accept:".csv",onChange:re[6]||(re[6]=X=>F.value=X.target.files[0]),class:"w-full text-sm text-secondary file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-purple-50 file:text-purple-700 hover:file:bg-purple-100 dark:file:bg-purple-900/30 dark:file:text-purple-300"},null,32),g("label",AG,v(m(n)("explorer.dataLoading.nodesCSV")),1),g("input",{type:"file",accept:".csv",onChange:re[7]||(re[7]=X=>$.value=X.target.files[0]),class:"w-full text-sm text-secondary file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-purple-50 file:text-purple-700 hover:file:bg-purple-100 dark:file:bg-purple-900/30 dark:file:text-purple-300"},null,32),g("div",{class:"text-xs text-secondary bg-[var(--color-bg-secondary)] rounded p-2",innerHTML:m(n)("explorer.dataLoading.edgeCSVFormat")},null,8,xG)],512),[[Bs,O.value==="csv"]]),Wt(g("div",CG,[g("label",SG,[O.value==="json"?(K(),Y("span",TG,v(m(n)("explorer.dataLoading.jsonFile")),1)):(K(),Y("span",NG,v(m(n)("explorer.dataLoading.networkxFile")),1))]),g("input",{type:"file",accept:".json",onChange:re[8]||(re[8]=X=>j.value=X.target.files[0]),class:"w-full text-sm text-secondary file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-purple-50 file:text-purple-700 hover:file:bg-purple-100 dark:file:bg-purple-900/30 dark:file:text-purple-300"},null,32),O.value==="json"?(K(),Y("div",RG,v(m(n)("explorer.dataLoading.jsonSupports")),1)):(K(),Y("div",LG,v(m(n)("explorer.dataLoading.networkxSupports")),1))],512),[[Bs,O.value==="json"||O.value==="networkx"]]),g("button",{onClick:ke,disabled:!M.value||m(c),class:"w-full bg-green-600 hover:bg-green-700 disabled:bg-gray-400 text-white px-4 py-3 rounded-md font-semibold transition-colors mt-3"},[m(c)?(K(),Y("span",PG,v(m(n)("explorer.dataLoading.loading")),1)):(K(),Y("span",DG,v(m(n)("explorer.dataLoading.loadUploadedFile")),1))],8,IG)],512),[[Bs,T.value==="upload"]])]),g("div",GG,[g("h2",MG,v(m(n)("explorer.networkAnalysis.title")),1),Ee(wa,{"selected-metrics":A.value,"onUpdate:selectedMetrics":re[9]||(re[9]=X=>A.value=X),"size-metric":D.value,"onUpdate:sizeMetric":re[10]||(re[10]=X=>D.value=X),"show-clique-edges":C.value,"onUpdate:showCliqueEdges":re[11]||(re[11]=X=>C.value=X),analyzing:_e.value,disabled:!ne.value,progress:m(u),"show-spectral-metric":!0,"has-cliques":S.value,onAnalyze:ve},null,8,["selected-metrics","size-metric","show-clique-edges","analyzing","disabled","progress","has-cliques"])]),ne.value?(K(),Y("div",OG,[g("h2",FG,v(m(n)("explorer.networkStats.title")),1),g("div",$G,[g("div",zG,[g("div",BG,v(m(n)("explorer.networkStats.nodes")),1),g("div",VG,v(N.value.nodes),1)]),g("div",UG,[g("div",jG,v(m(n)("explorer.networkStats.edges")),1),g("div",HG,v(N.value.edges),1)]),g("div",WG,[g("div",qG,v(m(n)("explorer.networkStats.avgDegree")),1),g("div",KG,v(N.value.avgDegree),1)]),g("div",XG,[g("div",ZG,v(m(n)("explorer.networkStats.analysisTime")),1),g("div",YG,v(N.value.analysisTime),1)]),N.value.communities?(K(),Y("div",JG,[g("div",QG,v(m(n)("explorer.networkStats.communities")),1),g("div",eM,v(N.value.communities),1)])):Ge("",!0),N.value.modularity?(K(),Y("div",tM,[g("div",nM,v(m(n)("explorer.networkStats.modularity")),1),g("div",rM,v(N.value.modularity),1)])):Ge("",!0),B.value?.density!==void 0?(K(),Y("div",iM,[g("div",sM,v(m(n)("explorer.graphStats.density")),1),g("div",oM,v(B.value.density?.toFixed(4)||"-"),1)])):Ge("",!0),B.value?.diameter!==void 0?(K(),Y("div",aM,[g("div",lM,v(m(n)("explorer.graphStats.diameter")),1),g("div",cM,v(B.value.diameter===1/0?"":B.value.diameter||"-"),1)])):Ge("",!0),B.value?.average_clustering!==void 0?(K(),Y("div",dM,[g("div",uM,v(m(n)("explorer.graphStats.avgClustering")),1),g("div",hM,v(B.value.average_clustering?.toFixed(4)||"-"),1)])):Ge("",!0),B.value?.average_shortest_path!==void 0?(K(),Y("div",fM,[g("div",gM,v(m(n)("explorer.graphStats.avgPathLength")),1),g("div",pM,v(B.value.average_shortest_path===1/0?"":B.value.average_shortest_path?.toFixed(2)||"-"),1)])):Ge("",!0),B.value?.connected_components!==void 0?(K(),Y("div",mM,[g("div",yM,v(m(n)("explorer.graphStats.connectedComponents")),1),g("div",vM,v(B.value.connected_components?.count??"-"),1)])):Ge("",!0)]),J.value?(K(),Y("div",_M,[g("span",bM,v(m(n)("explorer.networkStats.usingParallel")),1),g("span",wM," - "+v(V.value.count)+" "+v(m(n)("explorer.networkStats.workersActive")),1)])):Ge("",!0),!J.value&&ne.value?(K(),Y("div",EM,[g("span",kM,v(m(n)("explorer.networkStats.singleThreaded")),1),g("span",AM," - "+v(m(n)("explorer.networkStats.networkTooSmall")),1)])):Ge("",!0)])):Ge("",!0),g("div",xM,[g("h2",CM,v(m(n)("explorer.layoutAlgorithm.title")),1),Ee(ba,{modelValue:z.value,"onUpdate:modelValue":re[12]||(re[12]=X=>z.value=X),"available-layouts":I.value,loading:m(c),disabled:!ne.value,onApply:Ae},null,8,["modelValue","available-layouts","loading","disabled"]),g("div",SM,[g("p",TM,[(K(!0),Y(qe,null,an(I.value,X=>(K(),Y("div",{key:X.id},[g("strong",null,v(X.name)+":",1),Se(" "+v(X.description)+" ",1),X.requiresStats?(K(),Y("span",NM," ("+v(m(n)("explorer.layoutAlgorithm.requiresAnalysis"))+")",1)):Ge("",!0),re[14]||(re[14]=g("br",null,null,-1))]))),128))])])]),g("div",RM,[g("h2",LM,v(m(n)("explorer.communityDetection.title")),1),Ee(pm,{modelValue:U.value,"onUpdate:modelValue":re[13]||(re[13]=X=>U.value=X),"available-algorithms":H.value,detecting:ye.value,disabled:!ne.value,label:m(n)("explorer.communityDetection.algorithm"),onDetect:Ce},null,8,["modelValue","available-algorithms","detecting","disabled","label"])]),oe.value?(K(),Y("div",IM,[g("div",DM,[g("h3",PM,v(m(n)("explorer.communityResults.title")),1),g("div",GM,[g("div",MM,[g("span",OM,v(m(n)("explorer.communityResults.communitiesFound")),1),g("span",FM,v(be.value?.numCommunities||"-"),1)]),g("div",$M,[g("span",zM,v(m(n)("explorer.communityResults.modularityScore")),1),g("span",BM,v(be.value?.modularity?.toFixed(3)||"-"),1)]),g("div",VM,[g("span",UM,v(m(n)("explorer.communityResults.computationTime")),1),g("span",jM,v(q.value||"-"),1)]),g("div",HM,[g("span",WM,v(m(n)("explorer.communityResults.algorithm")),1),g("span",qM,v(U.value),1)])]),g("div",KM,[g("p",XM,v(m(n)("explorer.communityResults.nodeColorsRepresent")),1)])])])):Ge("",!0),g("div",ZM,[g("h3",YM,v(m(n)("explorer.instructions.title")),1),g("ul",JM,[g("li",{innerHTML:m(n)("explorer.instructions.dragNodes")},null,8,QM),g("li",{innerHTML:m(n)("explorer.instructions.scroll")},null,8,eO),g("li",{innerHTML:m(n)("explorer.instructions.dragBackground")},null,8,tO),g("li",{innerHTML:m(n)("explorer.instructions.hoverNodes")},null,8,nO),g("li",{innerHTML:m(n)("explorer.instructions.nodeSize")},null,8,rO),g("li",{innerHTML:m(n)("explorer.instructions.color")},null,8,iO)])])]),graph:Ue(()=>[m(c)?(K(),Y("div",sO,[g("div",oO,[re[15]||(re[15]=g("div",{class:"inline-block animate-spin rounded-full h-12 w-12 border-4 border-purple-600 border-t-transparent mb-4"},null,-1)),g("p",aO,v(se.value),1)])])):Ge("",!0),g("div",{ref_key:"graphContainer",ref:a,class:"w-full h-full"},null,512)]),_:1}))}},cO=xn(lO,[["__scopeId","data-v-134f6a77"]]),dO=["aria-labelledby"],uO={class:"px-6 pt-6 pb-4 border-b border-gray-200 dark:border-gray-700"},hO=["id"],fO={class:"px-6 py-4"},gO={class:"space-y-4"},pO=["for"],mO={key:0,class:"text-red-500"},yO=["id","onUpdate:modelValue","required"],vO=["id","onUpdate:modelValue","required"],_O={value:"",disabled:""},bO=["value"],wO=["aria-labelledby"],EO=["name","value","onUpdate:modelValue","required"],kO={class:"text-2xl"},AO={class:"text-sm font-medium text-gray-700 dark:text-gray-300"},xO=["id","onUpdate:modelValue","placeholder","required"],CO={__name:"DialogForm",props:{visible:{type:Boolean,default:!1},title:{type:String,required:!0},fields:{type:Array,required:!0,default:()=>[]}},emits:["confirm","cancel"],setup(t,{emit:e}){const n=t,r=e,{t:i}=hn(),s=`dialog-${Math.random().toString(36).substr(2,9)}`,o=ce([]),a=()=>{o.value=n.fields.map(()=>"")},l=()=>{if(!n.fields.every((u,h)=>!(u.required&&!o.value[h]?.trim()))){alert("Please fill in all required fields");return}r("confirm",[...o.value])},c=()=>{a(),r("cancel")};return ut(()=>n.visible,d=>{d&&(a(),Gr(()=>{const u=document.querySelector("#field-0");u&&(u.focus(),u.tagName==="INPUT"&&u.select())}))}),Yt(()=>{a()}),(d,u)=>(K(),Zn(n0,{to:"body"},[t.visible?(K(),Y("div",{key:0,class:"dialog-overlay fixed inset-0 z-[9999] flex items-center justify-center",style:{"z-index":"9999 !important",position:"fixed !important"},onClick:Zr(c,["self"])},[u[0]||(u[0]=g("div",{class:"absolute inset-0 bg-black/50 backdrop-blur-sm",style:{"z-index":"9998"}},null,-1)),g("div",{class:"dialog-content relative bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-lg w-full mx-4 max-h-[90vh] overflow-y-auto",style:{"z-index":"10000 !important",position:"relative !important"},role:"dialog","aria-modal":"true","aria-labelledby":`dialog-title-${s}`},[g("div",uO,[g("h3",{id:`dialog-title-${s}`,class:"text-lg font-semibold text-gray-900 dark:text-gray-100"},v(t.title),9,hO)]),g("div",fO,[g("div",gO,[(K(!0),Y(qe,null,an(t.fields,(h,f)=>(K(),Y("div",{key:f,class:"space-y-2"},[g("label",{for:`field-${f}`,class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},[Se(v(h.label)+" ",1),h.required?(K(),Y("span",mO,"*")):Ge("",!0)],8,pO),h.type==="text"||!h.type?Wt((K(),Y("input",{key:0,id:`field-${f}`,"onUpdate:modelValue":p=>o.value[f]=p,type:"text",required:h.required,class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent",onKeyup:[Vn(l,["enter"]),Vn(c,["esc"])]},null,40,yO)),[[Kl,o.value[f]]]):h.type==="select"?Wt((K(),Y("select",{key:1,id:`field-${f}`,"onUpdate:modelValue":p=>o.value[f]=p,required:h.required,class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent",onKeyup:Vn(c,["esc"])},[g("option",_O,v(m(i)("family.dialogs.selectOption")),1),(K(!0),Y(qe,null,an(h.options,p=>(K(),Y("option",{key:p.value,value:p.value},v(p.text),9,bO))),128))],40,vO)),[[up,o.value[f]]]):h.type==="radio"?(K(),Y("div",{key:2,class:"flex flex-wrap gap-2",role:"radiogroup","aria-labelledby":`field-${f}-label`},[(K(!0),Y(qe,null,an(h.options,p=>(K(),Y("label",{key:p.value,class:Ke(["flex items-center gap-2 cursor-pointer px-3 py-2 border-2 rounded-lg transition-all flex-1 min-w-[120px]",{"border-green-500 bg-green-50 dark:bg-green-900/20":o.value[f]===p.value,"border-gray-300 dark:border-gray-600 hover:border-green-300":o.value[f]!==p.value}])},[Wt(g("input",{type:"radio",name:`field-${f}`,value:p.value,"onUpdate:modelValue":y=>o.value[f]=y,required:h.required,class:"text-green-600 focus:ring-green-500"},null,8,EO),[[Xl,o.value[f]]]),g("span",kO,v(p.emoji),1),g("span",AO,v(p.text),1)],2))),128))],8,wO)):h.type==="emoji"?Wt((K(),Y("input",{key:3,id:`field-${f}`,"onUpdate:modelValue":p=>o.value[f]=p,type:"text",placeholder:h.placeholder||"Type an emoji ",required:h.required,maxlength:"10",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent text-2xl text-center",onKeyup:[Vn(l,["enter"]),Vn(c,["esc"])]},null,40,xO)),[[Kl,o.value[f]]]):Ge("",!0)]))),128))])]),g("div",{class:"px-6 py-4 border-t border-gray-200 dark:border-gray-700 flex justify-end gap-3"},[g("button",{type:"button",onClick:c,class:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-md transition-colors"}," Cancel "),g("button",{type:"button",onClick:l,class:"px-4 py-2 text-sm font-medium text-white bg-green-600 hover:bg-green-700 rounded-md transition-colors"}," OK ")])],8,dO)])):Ge("",!0)]))}},SO=xn(CO,[["__scopeId","data-v-8db90550"]]),me={YOU:1,PARENT:2,SIBLING:3,UNCLE_AUNT:4,COUSIN:5,GRANDPARENT:6,NIECE_NEPHEW:7,CHILD:8,PARTNER:9},bt={MALE:"male",FEMALE:"female",OTHER:"other"},Ll={[bt.MALE]:"",[bt.FEMALE]:"",[bt.OTHER]:""},TO={[me.YOU]:"#6366f1",[me.PARENT]:"#ec4899",[me.SIBLING]:"#3b82f6",[me.UNCLE_AUNT]:"#f97316",[me.COUSIN]:"#a855f7",[me.GRANDPARENT]:"#b45309",[me.NIECE_NEPHEW]:"#06b6d4",[me.CHILD]:"#14b8a6",[me.PARTNER]:"#f43f5e"};function Qr(t,e=null){const n=e===bt.FEMALE,r=e===bt.MALE||e===bt.OTHER;switch(t){case me.YOU:return"You";case me.PARENT:return n?"Mother":r?"Father":"Parent";case me.SIBLING:return n?"Sister":r?"Brother":"Sibling";case me.UNCLE_AUNT:return n?"Aunt":r?"Uncle":"Uncle/Aunt";case me.COUSIN:return"Cousin";case me.GRANDPARENT:return n?"Grandmother":r?"Grandfather":"Grandparent";case me.NIECE_NEPHEW:return n?"Niece":r?"Nephew":"Niece/Nephew";case me.CHILD:return n?"Daughter":r?"Son":"Child";case me.PARTNER:return n?"Wife":r?"Husband":"Partner/Spouse";default:return"Relative"}}const NO={nodes:[{id:"YOU",group:me.YOU,relationship:"You"}],links:[]},Il="familyTree";function qf(t){return typeof t=="string"?t:t?.id||String(t)}class RO{constructor(e,n=r=>r){this.getGraphInstance=e,this.t=n}canAddParents(){const e=this.getGraphInstance();if(!e?.data)return{canAdd:!1,existingCount:0,message:"Graph not initialized"};const n=e.data.nodes.filter(r=>r.group===me.PARENT);return n.length>=2?{canAdd:!1,existingCount:n.length,message:this.t("family.operations.validation.maxParents")}:{canAdd:!0,existingCount:n.length,remainingSlots:2-n.length}}canAddGrandparents(e){const n=this.getGraphInstance();if(!n?.data)return{canAdd:!1,existingCount:0,message:"Graph not initialized"};const i=n.data.links.filter(s=>qf(s.target)===e).map(s=>{const o=qf(s.source);return n.data.nodes.find(a=>a.id===o)}).filter(s=>s&&s.group===me.GRANDPARENT);return i.length>=2?{canAdd:!1,existingCount:i.length,message:`${e} already has 2 grandparents. Cannot add more.`}:{canAdd:!0,existingCount:i.length,remainingSlots:2-i.length}}hasPartner(e){const n=this.getGraphInstance();return n?.data?n.data.nodes.filter(i=>i.group===me.PARTNER&&i.partnerOf===e).length>0:!1}getEligibleParents(){const e=this.getGraphInstance();return e?.data?e.data.nodes.filter(n=>{const r=n.group;return r!==me.GRANDPARENT&&r!==me.UNCLE_AUNT&&r!==me.PARENT}):[]}getEligibleForPartner(){const e=this.getGraphInstance();return e?.data?e.data.nodes.filter(n=>{const r=n.group;return(r===me.YOU||r===me.SIBLING||r===me.COUSIN||r===me.UNCLE_AUNT||r===me.NIECE_NEPHEW||r===me.CHILD)&&!this.hasPartner(n.id)}):[]}}function et(t){return typeof t=="string"?t:t?.id||String(t)}class LO{constructor(e,n,r,i){this.graphManager=e,this.getGraphInstance=n,this.validation=r,this.saveFamily=i}addNodeWithRelationship(e,n,r,i=null,s=null,o=null){const a=o||Qr(r,i),l=this.getGraphInstance(),c=this.graphManager.addNode(e,n,r,!0);if(c&&typeof c.then=="function")return c.then(u=>(this._setNodeProperties(u,a,i,s,l),u));const d=c;return this._setNodeProperties(d,a,i,s,l),d}_setNodeProperties(e,n,r,i,s){this._setNodeProperty(e,"relationship",n,s),r&&this._setNodeProperty(e,"gender",r,s),i&&this._setNodeProperty(e,"avatar",i,s),requestAnimationFrame(()=>{if(s?.data){const o=s.data.nodes.find(a=>a.id===e.id);o&&(o.relationship||(o.relationship=n),r&&!o.gender&&(o.gender=r),i&&!o.avatar&&(o.avatar=i),i&&s.options?.renderMode==="avatars"&&this._updateNodeAvatarElement(e.id,i,s))}})}_updateNodeAvatarElement(e,n,r){r?.nodeGroup&&r.nodeGroup.selectAll("text").filter(i=>i.id===e).text(n)}_setNodeProperty(e,n,r,i){if(e&&(e[n]=r,i?.data)){let s=i.data.nodes.find(o=>o.id===e.id);s?(s[n]=r,s!==e&&(e[n]=r)):requestAnimationFrame(()=>{if(i?.data){const o=i.data.nodes.find(a=>a.id===e.id);o&&(o[n]=r)}})}}_setRelationshipOnNode(e,n,r){this._setNodeProperty(e,"relationship",n,r),requestAnimationFrame(()=>{if(r?.data){const i=r.data.nodes.find(s=>s.id===e.id);i&&!i.relationship&&(i.relationship=n)}})}addParents(e,n,r=null,i=null){const s=this.validation.canAddParents();if(!s.canAdd)return{success:!1,message:s.message};if(!e?.trim()&&!n?.trim())return{success:!1,message:"At least one parent name is required"};const o=s.remainingSlots;if(!this.getGraphInstance())return{success:!1,message:"Graph not initialized"};let l=null;e?.trim()&&o>=1&&(l=this.addNodeWithRelationship(["YOU"],e.trim(),me.PARENT,bt.FEMALE,r?.trim()||null)?.id||e.trim());let c=null;const d=l?o>=2:o>=1;if(n?.trim()&&d)c=this.addNodeWithRelationship(["YOU"],n.trim(),me.PARENT,bt.MALE,i?.trim()||null)?.id||n.trim();else if(n?.trim()&&!d)return{success:!0,message:"Only one parent slot available. Added only the mother."};return l&&c&&this.graphManager.addLink?requestAnimationFrame(()=>{this.graphManager.addLink(l,c)&&this.saveFamily()}):this.saveFamily(),{success:!0}}addSibling(e,n,r=null){if(!e?.trim())return{success:!1,message:"Sibling name is required"};if(!n)return{success:!1,message:"Gender is required"};const i=this.getGraphInstance();if(!i?.data)return{success:!1,message:"Graph not initialized"};const o=i.data.links.filter(u=>{const h=et(u.source),f=et(u.target);return h==="YOU"||f==="YOU"}).map(u=>{const h=et(u.source),f=et(u.target);return h==="YOU"?f:h}).map(u=>{const h=i.data.nodes.find(f=>f.id===u);return h&&h.group===me.PARENT?u:null}).filter(u=>u!==null),a=i.data.nodes.filter(u=>u.group===me.SIBLING||u.id==="YOU").map(u=>u.id),l=[];o.length>0?l.push(...o):l.push("YOU"),a.forEach(u=>{l.includes(u)||l.push(u)});const c=this.addNodeWithRelationship(l,e.trim(),me.SIBLING,n,r?.trim()||null);if(!c)return{success:!1,message:"Failed to add sibling"};const d=c.id||e.trim();return this.graphManager.addLink&&a.forEach(u=>{u!==d&&requestAnimationFrame(()=>{this.graphManager.addLink(d,u,!0)})}),this.saveFamily(),{success:!0}}addGrandparents(e,n,r,i=null,s=null){if(!this.graphManager?.hasNode||!this.graphManager.hasNode(e))return{success:!1,message:"Parent not found"};const o=this.validation.canAddGrandparents(e);if(!o.canAdd)return{success:!1,message:o.message};if(!n?.trim()&&!r?.trim())return{success:!1,message:"At least one grandparent name is required"};const a=o.remainingSlots;if(!this.getGraphInstance())return{success:!1,message:"Graph not initialized"};let c=null;n?.trim()&&a>=1&&(c=this.addNodeWithRelationship([e],n.trim(),me.GRANDPARENT,bt.FEMALE,i?.trim()||null)?.id||n.trim());let d=null;const u=c?a>=2:a>=1;if(r?.trim()&&u)d=this.addNodeWithRelationship([e],r.trim(),me.GRANDPARENT,bt.MALE,s?.trim()||null)?.id||r.trim();else if(r?.trim()&&!u)return{success:!0,message:"Only one grandparent slot available for this parent. Added only the grandmother."};return c&&d&&this.graphManager.addLink?requestAnimationFrame(()=>{this.graphManager.addLink(c,d)&&this.saveFamily()}):this.saveFamily(),{success:!0}}addUncleAunt(e,n,r,i=null){if(!this.graphManager?.hasNode||!this.graphManager.hasNode(e))return{success:!1,message:"Parent not found"};if(!n?.trim())return{success:!1,message:"Uncle/aunt name is required"};if(!r)return{success:!1,message:"Gender is required"};const s=this.getGraphInstance();if(!s?.data)return{success:!1,message:"Graph not initialized"};const o=s.data.links,a=o.filter(f=>(et(f.source),et(f.target)===e)).map(f=>{const p=et(f.source);return s.data.nodes.find(y=>y.id===p)}).filter(f=>f&&f.group===me.GRANDPARENT).map(f=>f.id),l=[];if(a.length>0){const f=o.filter(p=>{const y=et(p.source);return a.includes(y)}).map(p=>{const y=et(p.target);return s.data.nodes.find(w=>w.id===y)}).filter(p=>p&&(p.group===me.PARENT||p.group===me.UNCLE_AUNT)).map(p=>p.id);l.push(...f)}else l.push(e);const c=[...new Set(l)],d=[...a,...c],u=this.addNodeWithRelationship(d,n.trim(),me.UNCLE_AUNT,r,i?.trim()||null);if(!u)return{success:!1,message:"Failed to add uncle/aunt"};const h=u.id||n.trim();return this.graphManager.addLink&&c.forEach(f=>{f!==h&&requestAnimationFrame(()=>{this.graphManager.addLink(h,f,!0)})}),this.saveFamily(),{success:!0}}addCousin(e,n,r,i=null){if(!this.graphManager?.hasNode||!this.graphManager.hasNode(e))return{success:!1,message:"Uncle/aunt not found"};if(!r)return{success:!1,message:"Gender is required"};if(!n?.trim())return{success:!1,message:"Cousin name is required"};const s=this.getGraphInstance();if(!s?.data)return{success:!1,message:"Graph not initialized"};const o=s.data.nodes.find(h=>h.group===me.PARTNER&&h.partnerOf===e),a=s.data.links,l=s.data.nodes.filter(h=>{if(h.group!==me.COUSIN)return!1;const f=a.some(p=>{const y=et(p.source),w=et(p.target);return y===h.id&&w===e||w===h.id&&y===e});if(o){const p=a.some(y=>{const w=et(y.source),b=et(y.target);return w===h.id&&b===o.id||b===h.id&&w===o.id});return f||p}return f}).map(h=>h.id),c=[e];o&&c.push(o.id),l.forEach(h=>{c.includes(h)||c.push(h)});const d=this.addNodeWithRelationship(c,n.trim(),me.COUSIN,r,i?.trim()||null);if(!d)return{success:!1,message:"Failed to add cousin"};const u=d.id||n.trim();return this.graphManager.addLink&&l.forEach(h=>{h!==u&&requestAnimationFrame(()=>{this.graphManager.addLink(u,h,!0)})}),this.saveFamily(),{success:!0}}addChild(e,n,r,i=null){if(!this.graphManager?.hasNode||!this.graphManager.hasNode(e))return{success:!1,message:"Parent not found"};if(!n?.trim())return{success:!1,message:"Child name is required"};if(!r)return{success:!1,message:"Gender is required"};const s=this.getGraphInstance();if(!s?.data)return{success:!1,message:"Graph not initialized"};const o=s.data.nodes.find(p=>p.id===e);if(!o)return{success:!1,message:"Parent not found"};let a=me.CHILD;o.group===me.YOU||o.group===me.PARTNER?a=me.CHILD:o.group===me.SIBLING?a=me.NIECE_NEPHEW:a=me.CHILD;const l=s.data.nodes.find(p=>p.group===me.PARTNER&&p.partnerOf===e),c=s.data.links,d=s.data.nodes.filter(p=>{if(p.group!==a)return!1;const y=c.some(w=>{const b=et(w.source),E=et(w.target);return b===p.id&&E===e||E===p.id&&b===e});if(l){const w=c.some(b=>{const E=et(b.source),k=et(b.target);return E===p.id&&k===l.id||k===p.id&&E===l.id});return y||w}return y}).map(p=>p.id),u=[e];l&&u.push(l.id),d.forEach(p=>{u.includes(p)||u.push(p)});const h=this.addNodeWithRelationship(u,n.trim(),a,r,i?.trim()||null);if(!h)return{success:!1,message:"Failed to add child"};const f=h.id||n.trim();return this.graphManager.addLink&&d.forEach(p=>{p!==f&&requestAnimationFrame(()=>{this.graphManager.addLink(f,p,!0)})}),this.saveFamily(),{success:!0}}addNieceNephew(e,n,r,i=null){if(!this.graphManager?.hasNode||!this.graphManager.hasNode(e))return{success:!1,message:"Sibling not found"};if(!n?.trim())return{success:!1,message:"Niece/nephew name is required"};if(!r)return{success:!1,message:"Gender is required"};const s=this.getGraphInstance();if(!s?.data)return{success:!1,message:"Graph not initialized"};const o=s.data.nodes.find(h=>h.group===me.PARTNER&&h.partnerOf===e),a=s.data.links,l=s.data.nodes.filter(h=>{if(h.group!==me.NIECE_NEPHEW)return!1;const f=a.some(p=>{const y=et(p.source),w=et(p.target);return y===h.id&&w===e||w===h.id&&y===e});if(o){const p=a.some(y=>{const w=et(y.source),b=et(y.target);return w===h.id&&b===o.id||b===h.id&&w===o.id});return f||p}return f}).map(h=>h.id),c=[e];o&&c.push(o.id),l.forEach(h=>{c.includes(h)||c.push(h)});const d=this.addNodeWithRelationship(c,n.trim(),me.NIECE_NEPHEW,r,i?.trim()||null);if(!d)return{success:!1,message:"Failed to add niece/nephew"};const u=d.id||n.trim();return this.graphManager.addLink&&l.forEach(h=>{h!==u&&requestAnimationFrame(()=>{this.graphManager.addLink(u,h,!0)})}),this.saveFamily(),{success:!0}}addPartner(e,n,r,i=null){if(!this.graphManager?.hasNode||!this.graphManager.hasNode(e))return{success:!1,message:"Person not found"};if(!n?.trim())return{success:!1,message:"Partner name is required"};if(!r)return{success:!1,message:"Gender is required"};if(this.validation.hasPartner(e))return{success:!1,message:`${e} already has a partner!`};const s=this.getGraphInstance();let o=null;if(s?.data){const c=s.data.nodes.find(d=>d.id===e);if(c){const d=c.relationship||Qr(c.group);d==="You"?o="Your Partner/Spouse":o=`${d}'s Partner`}}const a=this.addNodeWithRelationship([e],n.trim(),me.PARTNER,r,i?.trim()||null,o),l=c=>{this._setNodeProperty(c,"partnerOf",e,s),requestAnimationFrame(()=>{if(s?.data){const d=s.data.nodes.find(u=>u.id===c.id);d&&(d.partnerOf=e)}this.saveFamily()})};return a&&typeof a.then=="function"?a.then(c=>{l(c)}):l(a),{success:!0}}}function Pn(t){return typeof t=="string"?t:t?.id||String(t)}class IO{constructor(e,n,r,i=s=>s){this.getGraphInstance=e,this.onStatusChange=n,this.log=r,this.t=i,this.autoSaveInterval=null,this.autoSaveIntervalMs=3e4}getInitialDataset(){return{...NO}}loadFamily(){try{const e=localStorage.getItem(Il);if(e){const n=JSON.parse(e);return n.links&&Array.isArray(n.links)&&(n.links=n.links.map(r=>({...r,source:Pn(r.source),target:Pn(r.target)}))),n.nodes&&Array.isArray(n.nodes)&&(n.nodes=n.nodes.filter(r=>r&&r.id),n.nodes.forEach(r=>{if(!r.relationship&&r.group!==void 0)if(r.group===me.PARTNER){const s=(n.links||[]).filter(o=>{const a=Pn(o.source),l=Pn(o.target);return a===r.id||l===r.id});if(s.length>0){const o=s[0],a=Pn(o.source)===r.id?Pn(o.target):Pn(o.source),l=n.nodes.find(c=>c.id===a);if(l){const c=l.relationship||Qr(l.group);c==="You"?r.relationship="Your Partner/Spouse":r.relationship=`${c}'s Partner`}else r.relationship=Qr(r.group)}else r.relationship=Qr(r.group)}else r.relationship=Qr(r.group)})),this.log.debug("Loaded family tree from storage",{nodeCount:n.nodes?.length||0,linkCount:n.links?.length||0}),n}}catch(e){this.log.error("Failed to load family tree",{error:e.message})}return null}saveFamily(){const e=this.getGraphInstance();if(!e?.data){this.log.warn("Cannot save - graph not initialized");return}try{const n=e.data.links.map(s=>({source:Pn(s.source),target:Pn(s.target)})),i={nodes:e.data.nodes.map(s=>{const{id:o,group:a,relationship:l,...c}=s,d={id:o,group:a};return l!==void 0&&(d.relationship=l),c.gender!==void 0&&(d.gender=c.gender),c.avatar!==void 0&&(d.avatar=c.avatar),c.partnerOf!==void 0&&(d.partnerOf=c.partnerOf),c.centrality!==void 0&&(d.centrality=c.centrality),c.community!==void 0&&(d.community=c.community),c.degree!==void 0&&(d.degree=c.degree),c.eigenvector!==void 0&&(d.eigenvector=c.eigenvector),c.betweenness!==void 0&&(d.betweenness=c.betweenness),d}),links:n};localStorage.setItem(Il,JSON.stringify(i)),this.log.debug("Family tree saved",{nodeCount:i.nodes.length,linkCount:i.links.length}),this.showStatus(this.t("family.storage.saved"),"success")}catch(n){this.log.error("Failed to save family tree",{error:n.message}),this.showStatus(this.t("family.storage.error"),"error")}}resetFamily(e,n){const r=!!this.autoSaveInterval;r&&this.stopAutoSave(),localStorage.removeItem(Il);const i=this.getInitialDataset(),s=n.value||n;if(s){const o=()=>{s.off("ready",o),r&&this.startAutoSave(),this.saveFamily()};s.on("ready",o)}e(i.nodes,i.links),this.log.info("Family tree reset"),this.showStatus(this.t("family.storage.reset"),"success")}startAutoSave(){this.autoSaveInterval||(this.autoSaveInterval=setInterval(()=>{document.visibilityState==="visible"&&this.saveFamily()},this.autoSaveIntervalMs),this.log.debug("Auto-save started",{intervalMs:this.autoSaveIntervalMs}))}stopAutoSave(){this.autoSaveInterval&&(clearInterval(this.autoSaveInterval),this.autoSaveInterval=null,this.log.debug("Auto-save stopped"))}showStatus(e,n="info"){this.onStatusChange&&this.onStatusChange(e,n)}}function Wr(t){return[{value:bt.MALE,emoji:Ll[bt.MALE],text:t("family.dialogs.genderOptions.male")},{value:bt.FEMALE,emoji:Ll[bt.FEMALE],text:t("family.dialogs.genderOptions.female")},{value:bt.OTHER,emoji:Ll[bt.OTHER],text:t("family.dialogs.genderOptions.other")}]}const Me={ADD_PARENTS:"addParents",ADD_SIBLING:"addSibling",ADD_GRANDPARENTS:"addGrandparents",ADD_UNCLE_AUNT:"addUncleAunt",ADD_COUSIN:"addCousin",ADD_CHILD:"addChild",ADD_NIECE_NEPHEW:"addNieceNephew",ADD_PARTNER:"addPartner"};class lv{constructor(e,n,r=i=>i){this.getGraphInstance=e,this.validation=n,this.t=r}getAddParentsDialog(){const e=this.validation.canAddParents();return e&&!e.canAdd?null:{title:this.t("family.dialogs.addParents"),fields:[{label:this.t("family.dialogs.fields.motherName"),type:"text",required:!1},{label:this.t("family.dialogs.fields.motherAvatar"),type:"emoji",required:!1,placeholder:this.t("family.dialogs.placeholders.mother")},{label:this.t("family.dialogs.fields.fatherName"),type:"text",required:!1},{label:this.t("family.dialogs.fields.fatherAvatar"),type:"emoji",required:!1,placeholder:this.t("family.dialogs.placeholders.father")}],action:Me.ADD_PARENTS}}getAddSiblingDialog(){return{title:this.t("family.dialogs.addSibling"),fields:[{label:this.t("family.dialogs.fields.siblingName"),type:"text",required:!0},{label:this.t("family.dialogs.fields.gender"),type:"radio",options:Wr(this.t),required:!0},{label:this.t("family.dialogs.fields.avatar"),type:"emoji",required:!1,placeholder:this.t("family.dialogs.placeholders.avatar")}],action:Me.ADD_SIBLING}}getAddGrandparentsDialog(){const e=this.getGraphInstance();if(!e?.data)return null;const n=e.data.nodes.filter(i=>i.group===me.PARENT);if(n.length===0)return null;const r=n.map(i=>({value:i.id,text:this.t("family.dropdownOptions.parentSideTemplate").replace("{name}",i.id)}));return{title:this.t("family.dialogs.addGrandparents"),fields:[{label:this.t("family.dialogs.fields.parentsSide"),type:"select",options:r,required:!0},{label:this.t("family.dialogs.fields.grandmotherName"),type:"text",required:!1},{label:this.t("family.dialogs.fields.grandmotherAvatar"),type:"emoji",required:!1,placeholder:this.t("family.dialogs.placeholders.grandmother")},{label:this.t("family.dialogs.fields.grandfatherName"),type:"text",required:!1},{label:this.t("family.dialogs.fields.grandfatherAvatar"),type:"emoji",required:!1,placeholder:this.t("family.dialogs.placeholders.grandfather")}],action:Me.ADD_GRANDPARENTS}}getAddUncleAuntDialog(){const e=this.getGraphInstance();if(!e?.data)return null;const n=e.data.nodes.filter(i=>i.group===me.PARENT);if(n.length===0)return null;const r=n.map(i=>({value:i.id,text:this.t("family.dropdownOptions.parentSideTemplate").replace("{name}",i.id)}));return{title:this.t("family.dialogs.addUncleAunt"),fields:[{label:this.t("family.dialogs.fields.parentsSide"),type:"select",options:r,required:!0},{label:this.t("family.dialogs.fields.name"),type:"text",required:!0},{label:this.t("family.dialogs.fields.gender"),type:"radio",options:Wr(this.t),required:!0},{label:this.t("family.dialogs.fields.avatar"),type:"emoji",required:!1,placeholder:this.t("family.dialogs.placeholders.avatar")}],action:Me.ADD_UNCLE_AUNT}}getAddCousinDialog(){const e=this.getGraphInstance();if(!e?.data)return null;const n=e.data.nodes.filter(i=>i.group===me.UNCLE_AUNT);if(n.length===0)return null;const r=n.map(i=>({value:i.id,text:this.t("family.dropdownOptions.uncleAuntChildTemplate").replace("{name}",i.id)}));return{title:this.t("family.dialogs.addCousin"),fields:[{label:this.t("family.dialogs.fields.uncleAuntField"),type:"select",options:r,required:!0},{label:this.t("family.dialogs.fields.name"),type:"text",required:!0},{label:this.t("family.dialogs.fields.gender"),type:"radio",options:Wr(this.t),required:!0},{label:this.t("family.dialogs.fields.avatar"),type:"emoji",required:!1,placeholder:this.t("family.dialogs.placeholders.avatar")}],action:Me.ADD_COUSIN}}getAddChildDialog(){const e=this.validation.getEligibleParents();if(e.length===0)return null;const n=e.map(r=>{let i="";switch(r.group){case me.YOU:i=this.t("family.dropdownOptions.yourChild");break;case me.SIBLING:i=this.t("family.dropdownOptions.nieceNephewTemplate").replace("{name}",r.id);break;case me.COUSIN:i=this.t("family.dropdownOptions.cousinChildTemplate").replace("{name}",r.id);break;case me.CHILD:i=this.t("family.dropdownOptions.grandchildTemplate").replace("{name}",r.id);break;case me.NIECE_NEPHEW:i=this.t("family.dropdownOptions.childTemplate").replace("{name}",r.id);break;case me.PARTNER:i=this.t("family.dropdownOptions.childTemplate").replace("{name}",r.id);break;default:i=this.t("family.dropdownOptions.childTemplate").replace("{name}",r.id)}return{value:r.id,text:i}});return{title:this.t("family.dialogs.addChild"),fields:[{label:this.t("family.dialogs.fields.parent"),type:"select",options:n,required:!0},{label:this.t("family.dialogs.fields.name"),type:"text",required:!0},{label:this.t("family.dialogs.fields.gender"),type:"radio",options:Wr(this.t),required:!0},{label:this.t("family.dialogs.fields.avatar"),type:"emoji",required:!1,placeholder:this.t("family.dialogs.placeholders.avatar")}],action:Me.ADD_CHILD}}getAddNieceNephewDialog(){const e=this.getGraphInstance();if(!e?.data)return null;const n=e.data.nodes.filter(i=>i.group===me.SIBLING);if(n.length===0)return null;const r=n.map(i=>({value:i.id,text:this.t("family.dropdownOptions.siblingChildTemplate").replace("{name}",i.id)}));return{title:this.t("family.dialogs.addNieceNephew"),fields:[{label:this.t("family.dialogs.fields.sibling"),type:"select",options:r,required:!0},{label:this.t("family.dialogs.fields.name"),type:"text",required:!0},{label:this.t("family.dialogs.fields.gender"),type:"radio",options:Wr(this.t),required:!0},{label:this.t("family.dialogs.fields.avatar"),type:"emoji",required:!1,placeholder:this.t("family.dialogs.placeholders.avatar")}],action:Me.ADD_NIECE_NEPHEW}}getAddPartnerDialog(){const e=this.validation.getEligibleForPartner();if(e.length===0)return null;const n=e.map(r=>{let i="";switch(r.group){case me.YOU:i=this.t("family.operations.relationships.yourPartner");break;case me.SIBLING:i=this.t("family.dropdownOptions.siblingPartnerTemplate").replace("{name}",r.id);break;case me.COUSIN:i=this.t("family.dropdownOptions.partnerTemplate").replace("{name}",r.id);break;case me.UNCLE_AUNT:i=this.t("family.dropdownOptions.partnerTemplate").replace("{name}",r.id);break;case me.NIECE_NEPHEW:i=this.t("family.dropdownOptions.partnerTemplate").replace("{name}",r.id);break;case me.CHILD:i=this.t("family.dropdownOptions.childPartnerTemplate").replace("{name}",r.id);break;default:i=this.t("family.dropdownOptions.partnerTemplate").replace("{name}",r.id)}return{value:r.id,text:i}});return{title:this.t("family.dialogs.addPartner"),fields:[{label:this.t("family.dialogs.fields.partnerOf"),type:"select",options:n,required:!0},{label:this.t("family.dialogs.fields.name"),type:"text",required:!0},{label:this.t("family.dialogs.fields.gender"),type:"radio",options:Wr(this.t),required:!0},{label:this.t("family.dialogs.fields.avatar"),type:"emoji",required:!1,placeholder:this.t("family.dialogs.placeholders.avatar")}],action:Me.ADD_PARTNER}}getValidationMessage(e){const n=this.getGraphInstance();switch(e){case Me.ADD_PARENTS:return this.validation.canAddParents()?.message||"Cannot add more parents (maximum 2)";case Me.ADD_GRANDPARENTS:return n?.data?.nodes.filter(i=>i.group===me.PARENT)?.length===0?"You must add parents first before adding grandparents":"No parents available";case Me.ADD_UNCLE_AUNT:return n?.data?.nodes.filter(i=>i.group===me.PARENT)?.length===0?"You must add parents first before adding uncles/aunts":"No parents available";case Me.ADD_COUSIN:return n?.data?.nodes.filter(i=>i.group===me.UNCLE_AUNT)?.length===0?"You must add uncles/aunts first before adding cousins":"No uncles/aunts available";case Me.ADD_CHILD:return"No eligible parents available to have children";case Me.ADD_NIECE_NEPHEW:return n?.data?.nodes.filter(i=>i.group===me.SIBLING)?.length===0?"You must add siblings first before adding nieces/nephews":"No siblings available";case Me.ADD_PARTNER:return"No eligible people available for partners (they may already have partners)";default:return"Operation cannot be performed"}}executeAction(e,n,r){switch(e){case Me.ADD_PARENTS:return r.addParents(n[0],n[2],n[1],n[3]);case Me.ADD_SIBLING:return r.addSibling(n[0],n[1],n[2]);case Me.ADD_GRANDPARENTS:return r.addGrandparents(n[0],n[1],n[3],n[2],n[4]);case Me.ADD_UNCLE_AUNT:return r.addUncleAunt(n[0],n[1],n[2],n[3]);case Me.ADD_COUSIN:return r.addCousin(n[0],n[1],n[2],n[3]);case Me.ADD_CHILD:return r.addChild(n[0],n[1],n[2],n[3]);case Me.ADD_NIECE_NEPHEW:return r.addNieceNephew(n[0],n[1],n[2],n[3]);case Me.ADD_PARTNER:return r.addPartner(n[0],n[1],n[2],n[3]);default:return{success:!1,message:`Unknown action: ${e}`}}}}class DO{constructor(e,n,r=""){this.nodes=JSON.parse(JSON.stringify(e)),this.links=n.map(i=>({source:typeof i.source=="string"?i.source:i.source.id,target:typeof i.target=="string"?i.target:i.target.id})),this.description=r,this.timestamp=Date.now()}getNodes(){return JSON.parse(JSON.stringify(this.nodes))}getLinks(){return JSON.parse(JSON.stringify(this.links))}getDescription(){return this.description}getTimestamp(){return this.timestamp}getSummary(){return{nodeCount:this.nodes.length,linkCount:this.links.length,description:this.description,timestamp:new Date(this.timestamp).toLocaleString()}}}class PO{constructor(e={}){this.undoStack=[],this.redoStack=[],this.maxHistorySize=e.maxHistorySize||10}saveState(e){this.undoStack.push(e),this.undoStack.length>this.maxHistorySize&&this.undoStack.shift(),this.redoStack=[]}undo(){if(this.undoStack.length===0)return null;const e=this.undoStack.pop();return this.redoStack.push(e),e}redo(){if(this.redoStack.length===0)return null;const e=this.redoStack.pop();return this.undoStack.push(e),e}canUndo(){return this.undoStack.length>0}canRedo(){return this.redoStack.length>0}getUndoCount(){return this.undoStack.length}getRedoCount(){return this.redoStack.length}getUndoDescription(){return this.undoStack.length===0?null:this.undoStack[this.undoStack.length-1].getDescription()}getRedoDescription(){return this.redoStack.length===0?null:this.redoStack[this.redoStack.length-1].getDescription()}clear(){this.undoStack=[],this.redoStack=[]}getHistorySummary(){return{undoCount:this.undoStack.length,redoCount:this.redoStack.length,canUndo:this.canUndo(),canRedo:this.canRedo(),nextUndo:this.getUndoDescription(),nextRedo:this.getRedoDescription()}}}class GO{constructor({graphManager:e,onStatusChange:n=null,lang:r="en"}){this.graphManager=e,this.onStatusChange=n,this.lang=r,this.log=Ze({prefix:"FamilyController",level:"info"});const i=()=>this.getGraphInstance(),s=o=>Cp(this.lang,o);this.validation=new RO(i,s),this.storage=new IO(i,n,this.log,s),this.operations=new LO(e,i,this.validation,()=>this.storage.saveFamily()),this.dialogService=new lv(i,this.validation,s),this.mementoHistory=new PO({maxHistorySize:10}),this.storage.startAutoSave()}getInitialDataset(){return this.storage.getInitialDataset()}loadFamily(){return this.storage.loadFamily()}getGraphInstance(){return this.graphManager?.graphInstance?this.graphManager.graphInstance.value||this.graphManager.graphInstance:null}saveFamily(){this.storage.saveFamily()}resetFamily(){this.storage.resetFamily(this.graphManager.loadData,this.graphManager.graphInstance)}lockGraph(){if(!this.graphManager?.lockPositions){this.log.warn("lockPositions not available");return}this.graphManager.lockPositions(),this.showStatus("Graph locked","success")}unlockGraph(){if(!this.graphManager?.unlockPositions){this.log.warn("unlockPositions not available");return}this.graphManager.unlockPositions(),this.showStatus("Graph unlocked","success")}saveAsPNG(e="family-tree.png"){if(!this.graphManager?.saveAsPNG){this.log.warn("saveAsPNG not available");return}this.graphManager.saveAsPNG(e),this.showStatus("Image saved!","success")}canAddParents(){return this.validation.canAddParents()}getEligibleParents(){return this.validation.getEligibleParents()}getEligibleForPartner(){return this.validation.getEligibleForPartner()}addParents(e,n=null){return this.operations.addParents(e,n)}addSibling(e){return this.operations.addSibling(e)}addGrandparents(e,n,r=null){return this.operations.addGrandparents(e,n,r)}addUncleAunt(e,n){return this.operations.addUncleAunt(e,n)}addCousin(e,n){return this.operations.addCousin(e,n)}addChild(e,n){return this.operations.addChild(e,n)}addNieceNephew(e,n){return this.operations.addNieceNephew(e,n)}addPartner(e,n){return this.operations.addPartner(e,n)}getDialogService(){return this.dialogService}getOperations(){return this.operations}async applyLayout(e){if(e==="none"){const n=" Using D3 physics simulation (no layout algorithm)";return this.log.debug("Using default D3 physics simulation"),this.showStatus(n,"info"),this.graphManager?.unlockPositions&&this.graphManager.unlockPositions(),{success:!0,layoutId:"none",message:"Using default D3 physics simulation"}}try{if(this.log.debug("Applying layout algorithm",{layoutId:e}),this.showStatus(`Applying ${e} layout...`,"info"),!this.graphManager?.applyLayout)return{success:!1,error:"Layout functionality not available"};if(await this.graphManager.applyLayout(e)){const r=` Applied ${e} layout algorithm`;return this.log.info("Layout applied successfully",{layoutId:e}),this.showStatus(r,"success"),{success:!0,layoutId:e}}return this.log.warn("Layout application failed",{layoutId:e}),{success:!1,error:"Layout application failed"}}catch(n){const r=` Layout failed: ${n.message}`;return this.log.error("Layout application failed",{layoutId:e,error:n.message,stack:n.stack}),this.showStatus(r,"error"),{success:!1,error:n.message}}}getAvailableLayouts(){return this.graphManager?.getAvailableLayouts?this.graphManager.getAvailableLayouts():[]}showStatus(e,n="info"){this.onStatusChange&&this.onStatusChange(e,n)}saveStateBeforeOperation(e){const n=this.getGraphInstance();if(!n||!n.data){this.log.warn("Cannot save state: graph not available");return}const r=new DO(n.data.nodes,n.data.links,e);this.mementoHistory.saveState(r),this.log.debug("State saved",{description:e,summary:r.getSummary()})}undo(){if(!this.mementoHistory.canUndo())return{success:!1,message:"Nothing to undo"};const e=this.mementoHistory.undo();if(!e)return{success:!1,message:"Failed to undo"};if(!this.getGraphInstance())return{success:!1,message:"Graph not available"};const r=e.getNodes(),i=e.getLinks();this.graphManager.loadData(r,i);const s=`Undid: ${e.getDescription()}`;return this.log.info("Undo successful",{description:e.getDescription()}),this.showStatus(s,"info"),{success:!0,message:s}}redo(){if(!this.mementoHistory.canRedo())return{success:!1,message:"Nothing to redo"};const e=this.mementoHistory.redo();if(!e)return{success:!1,message:"Failed to redo"};if(!this.getGraphInstance())return{success:!1,message:"Graph not available"};const r=e.getNodes(),i=e.getLinks();this.graphManager.loadData(r,i);const s=`Redid: ${e.getDescription()}`;return this.log.info("Redo successful",{description:e.getDescription()}),this.showStatus(s,"info"),{success:!0,message:s}}canUndo(){return this.mementoHistory.canUndo()}canRedo(){return this.mementoHistory.canRedo()}getHistorySummary(){return this.mementoHistory.getHistorySummary()}dispose(){this.storage.stopAutoSave(),this.log.info("FamilyController disposed")}}const MO={class:"family-page"},OO={class:"demo-controls-header"},FO={class:"demo-controls-title"},$O={class:"demo-controls-description"},zO={class:"info-box-green mb-4"},BO={class:"info-box-title-green"},VO={class:"info-box-text-green"},UO={class:"status-section"},jO={class:"demo-controls-section-title mb-3"},HO={class:"status-box"},WO={key:0,class:"status-empty"},qO={class:"text-xs"},KO={class:"text-xs mt-1 opacity-60"},XO={key:1,class:"space-y-2"},ZO={class:"status-icon"},YO={key:0},JO={key:1},QO={key:2},e3={class:"status-text"},t3={class:"controls-section-bordered"},n3={class:"demo-controls-section-title"},r3={class:"btn-grid"},i3={class:"controls-section-bordered"},s3={class:"demo-controls-section-title"},o3={class:"btn-grid"},a3=["disabled"],l3=["disabled"],c3={class:"controls-section-bordered"},d3={class:"demo-controls-section-title"},u3={class:"render-mode-container"},h3={class:"render-mode-text"},f3={class:"render-mode-text"},g3={class:"info-box-blue"},p3={class:"info-box-text-yellow"},m3={class:"controls-section-bordered"},y3={class:"demo-controls-section-title"},v3={class:"controls-section-bordered"},_3={class:"legend-title"},b3={class:"legend-list"},w3={class:"legend-item"},E3={class:"legend-text"},k3={class:"legend-item"},A3={class:"legend-text"},x3={class:"legend-item"},C3={class:"legend-text"},S3={class:"legend-item"},T3={class:"legend-text"},N3={class:"legend-item"},R3={class:"legend-text"},L3={class:"legend-item"},I3={class:"legend-text"},D3={class:"legend-item"},P3={class:"legend-text"},G3={class:"legend-item"},M3={class:"legend-text"},O3={class:"legend-item"},F3={class:"legend-text"},$3={class:"controls-section-bordered"},z3={class:"demo-controls-section-title"},B3={class:"info-box-yellow mt-3"},V3={class:"info-box-text-yellow"},U3={key:0,class:"italic"},j3={class:"info-box-blue"},H3={class:"info-box-title-blue text-sm"},W3={class:"info-box-text-blue space-y-1"},q3=["innerHTML"],K3=["innerHTML"],X3=["innerHTML"],Z3=["innerHTML"],Y3=["innerHTML"],J3=["innerHTML"],Q3=["innerHTML"],eF={key:0,class:"loading-overlay"},tF={class:"text-center"},nF={class:"text-secondary"},rF={__name:"FamilyPage",setup(t){const e=Ze({prefix:"FamilyPage",level:"info"}),{t:n,lang:r}=hn(),{trackFamilyAction:i,trackAnalysis:s}=Ga(),o=Pa({colorBy:"group",colorScheme:"categorical",showLabels:!0,autoComputeCentrality:!1,customColorFunction:X=>{const pe=X.group||0;return TO[pe]||null}}),{graphContainer:a,graphInstance:l,loading:c,loadData:d,addNode:u,addLink:h,hasNode:f,getNodeIds:p,lockPositions:y,unlockPositions:w,saveAsPNG:b,applyLayout:E,getAvailableLayouts:k,analyzeGraph:_,analysisProgress:x,updateVisualEncoding:T}=o,L=ce(""),O=ce("info"),F=ce("Loading graph..."),$=ce(!1),j=ce(""),z=ce([]),I=ce(null),A=ce("none"),D=ce([]),C=ce(!1),S=ce(!1),U=ce(!1),H=ce(["eigenvector"]),ne=ce("eigenvector"),_e=ce(!1),ye=ce("colors"),ae=ce(!1);let W=null;const se=(X,pe)=>{L.value=X,O.value=pe},be=()=>{W&&(S.value=W.canUndo(),U.value=W.canRedo())},q=X=>{(X.ctrlKey||X.metaKey)&&X.key==="z"&&!X.shiftKey?(X.preventDefault(),Ce()):((X.ctrlKey||X.metaKey)&&X.key==="y"||(X.ctrlKey||X.metaKey)&&X.shiftKey&&X.key==="z")&&(X.preventDefault(),Ie())},oe=()=>{const X={graphInstance:l,loadData:d,addNode:(Le,it,Tn)=>u(Le,it,Tn,!0),addLink:(Le,it)=>h(Le,it,!0),hasNode:f,getNodeIds:p,lockPositions:y,unlockPositions:w,saveAsPNG:b,applyLayout:E,getAvailableLayouts:k};W=new GO({graphManager:X,onStatusChange:se,lang:r.value}),D.value=W.getAvailableLayouts();const pe=W.loadFamily();if(pe)d(pe.nodes,pe.links);else{const Le=W.getInitialDataset();d(Le.nodes,Le.links)}},B=async(X,pe)=>{if(!W){se("Graph is still loading. Please wait...","error");return}const Le=W.getDialogService(),it=pe();if(!it){const Tn=Le.getValidationMessage(X);se(Tn,"error");return}j.value=it.title,z.value=it.fields,I.value=it.action,await Gr(),$.value=!0},Q=()=>{i(mt.RELATIVE_ADD,{type:"parents"}),B(Me.ADD_PARENTS,()=>W?.getDialogService().getAddParentsDialog())},J=()=>{i(mt.RELATIVE_ADD,{type:"sibling"}),B(Me.ADD_SIBLING,()=>W?.getDialogService().getAddSiblingDialog())},N=()=>{i(mt.RELATIVE_ADD,{type:"grandparents"}),B(Me.ADD_GRANDPARENTS,()=>W?.getDialogService().getAddGrandparentsDialog())},P=()=>{i(mt.RELATIVE_ADD,{type:"uncle_aunt"}),B(Me.ADD_UNCLE_AUNT,()=>W?.getDialogService().getAddUncleAuntDialog())},G=()=>{i(mt.RELATIVE_ADD,{type:"cousin"}),B(Me.ADD_COUSIN,()=>W?.getDialogService().getAddCousinDialog())},V=()=>{i(mt.RELATIVE_ADD,{type:"child"}),B(Me.ADD_CHILD,()=>W?.getDialogService().getAddChildDialog())},M=()=>{i(mt.RELATIVE_ADD,{type:"niece_nephew"}),B(Me.ADD_NIECE_NEPHEW,()=>W?.getDialogService().getAddNieceNephewDialog())},Z=()=>{i(mt.RELATIVE_ADD,{type:"partner"}),B(Me.ADD_PARTNER,()=>W?.getDialogService().getAddPartnerDialog())},ie=X=>{if(!W||!I.value)return;$.value=!1,W.saveStateBeforeOperation(j.value);const Le=W.getDialogService().executeAction(I.value,X,W.getOperations());Le.success?(Le.message&&se(Le.message,"info"),be()):se(Le.message||"Failed to add relative","error"),I.value=null},he=()=>{$.value=!1,I.value=null},de=()=>{W&&(i(mt.TREE_SAVE),W.saveFamily())},te=()=>{W&&(i(mt.TREE_EXPORT),W.saveAsPNG("family-tree.png"))},ke=()=>{W&&(i(mt.GRAPH_LOCK),W.lockGraph())},ve=()=>{W&&(i(mt.GRAPH_UNLOCK),W.unlockGraph())},Ae=()=>{W&&confirm("Are you sure you want to reset your family tree?")&&(i(mt.TREE_RESET),W.resetFamily(),be())},Ce=()=>{if(!W)return;i(mt.UNDO_ACTION);const X=W.undo();X.success?se(X.message,"info"):se(X.message||"Nothing to undo","error"),be()},Ie=()=>{if(!W)return;i(mt.REDO_ACTION);const X=W.redo();X.success?se(X.message,"info"):se(X.message||"Nothing to redo","error"),be()},ee=async()=>{if(!(!_||H.value.length===0)){s(fr.ANALYSIS_RUN,{metrics:H.value.join(",")});try{if(_e.value=!0,se("Analyzing network...","info"),await _(H.value,{includeGraphStats:!1})){const pe=ne.value||H.value[0];T({sizeBy:pe,minRadius:5,maxRadius:25,preserveZoom:!0}),se(` Analysis complete - sizing by ${pe}`,"success")}}catch(X){e.error("Analysis error",{error:X.message,stack:X.stack}),se(`Analysis failed: ${X.message}`,"error")}finally{_e.value=!1}}},re=async()=>{if(!(!W||!A.value)){s(fr.LAYOUT_CHANGE,{layout:A.value});try{C.value=!0;const X=await W.applyLayout(A.value);X.success||se(X.error||"Failed to apply layout","error")}catch(X){e.error("Layout error",{error:X.message,stack:X.stack}),se(`Layout failed: ${X.message}`,"error")}finally{C.value=!1}}};return ut(l,X=>{X&&!W&&(oe(),be())},{immediate:!0}),ut(r,X=>{if(W){W.lang=X;const pe=Le=>Cp(X,Le);W.dialogService=new lv(()=>W.getGraphInstance(),W.validation,pe),W.validation.t=pe,W.storage.t=pe}}),ut(ye,X=>{if(i(mt.RENDER_MODE_CHANGE,{mode:X}),l.value){ae.value=!0;const pe=()=>{ae.value=!1,l.value.off("ready",pe)};l.value.on("ready",pe),l.value.setRenderMode(X)}}),ut(ne,X=>{X&&l.value&&(e.debug("Size metric changed",{metric:X}),T({sizeBy:X,minRadius:5,maxRadius:20}))}),Yt(()=>{window.addEventListener("keydown",q)}),$r(()=>{window.removeEventListener("keydown",q),W&&W.dispose()}),(X,pe)=>(K(),Y("div",MO,[Ee(_a,null,{controls:Ue(()=>[g("div",OO,[g("h1",FO,v(m(n)("family.header.title")),1),g("p",$O,v(m(n)("family.header.subtitle")),1)]),g("div",zO,[g("h2",BO,v(m(n)("family.whatIs.title")),1),g("p",VO,v(m(n)("family.whatIs.description")),1)]),g("div",UO,[g("h2",jO,v(m(n)("family.status.title")),1),g("div",HO,[L.value?(K(),Y("div",XO,[g("div",{class:Ke({"status-message-success":O.value==="success","status-message-error":O.value==="error","status-message-info":O.value==="info"})},[g("div",ZO,[O.value==="success"?(K(),Y("span",YO,"")):O.value==="error"?(K(),Y("span",JO,"")):(K(),Y("span",QO,""))]),g("div",e3,v(L.value),1)],2)])):(K(),Y("div",WO,[g("div",qO,v(m(n)("family.status.ready")),1),g("div",KO,v(m(n)("family.status.clickToAdd")),1)]))])]),g("div",t3,[g("h2",n3,v(m(n)("family.addRelatives.title")),1),g("div",r3,[g("button",{onClick:Q,class:"action-btn-pink",type:"button"},v(m(n)("family.addRelatives.parents")),1),g("button",{onClick:N,class:"action-btn-amber"},v(m(n)("family.addRelatives.grandparents")),1),g("button",{onClick:J,class:"action-btn-blue"},v(m(n)("family.addRelatives.sibling")),1),g("button",{onClick:M,class:"action-btn-cyan"},v(m(n)("family.addRelatives.nieceNephew")),1),g("button",{onClick:P,class:"action-btn-orange"},v(m(n)("family.addRelatives.uncleAunt")),1),g("button",{onClick:G,class:"action-btn-purple"},v(m(n)("family.addRelatives.cousin")),1),g("button",{onClick:Z,class:"action-btn-rose"},v(m(n)("family.addRelatives.partner")),1),g("button",{onClick:V,class:"action-btn-teal"},v(m(n)("family.addRelatives.child")),1)])]),g("div",i3,[g("h2",s3,v(m(n)("family.actions.title")),1),g("div",o3,[g("button",{onClick:de,class:"action-btn-gray"},v(m(n)("family.actions.saveFamily")),1),g("button",{onClick:te,class:"action-btn-emerald"},v(m(n)("family.actions.saveImage")),1),g("button",{onClick:ke,class:"action-btn-indigo"},v(m(n)("family.actions.lockGraph")),1),g("button",{onClick:ve,class:"action-btn-amber"},v(m(n)("family.actions.unlockGraph")),1),g("button",{onClick:Ce,disabled:!S.value,class:"action-btn-violet action-btn-disabled"},v(m(n)("family.actions.undo")),9,a3),g("button",{onClick:Ie,disabled:!U.value,class:"action-btn-fuchsia action-btn-disabled"},v(m(n)("family.actions.redo")),9,l3),g("button",{onClick:Ae,class:"action-btn-red col-span-2"},v(m(n)("family.actions.resetTree")),1)])]),g("div",c3,[g("h2",d3,v(m(n)("family.renderNodes.title")),1),g("div",u3,[g("label",{class:Ke(["render-mode-label",ye.value==="colors"?"render-mode-label-active":"render-mode-label-inactive"])},[Wt(g("input",{type:"radio",name:"renderMode",value:"colors","onUpdate:modelValue":pe[0]||(pe[0]=Le=>ye.value=Le),class:"render-mode-radio"},null,512),[[Xl,ye.value]]),pe[5]||(pe[5]=g("span",{class:"render-mode-icon"},"",-1)),g("span",h3,v(m(n)("family.renderNodes.colors")),1)],2),g("label",{class:Ke(["render-mode-label",ye.value==="avatars"?"render-mode-label-active":"render-mode-label-inactive"])},[Wt(g("input",{type:"radio",name:"renderMode",value:"avatars","onUpdate:modelValue":pe[1]||(pe[1]=Le=>ye.value=Le),class:"render-mode-radio"},null,512),[[Xl,ye.value]]),pe[6]||(pe[6]=g("span",{class:"render-mode-icon"},"",-1)),g("span",f3,v(m(n)("family.renderNodes.avatars")),1)],2)]),g("div",g3,[g("p",p3,[g("strong",null,v(m(n)("family.renderNodes.colors"))+":",1),Se(" "+v(m(n)("family.renderNodes.colorsDesc")),1),pe[7]||(pe[7]=g("br",null,null,-1)),g("strong",null,v(m(n)("family.renderNodes.avatars"))+":",1),Se(" "+v(m(n)("family.renderNodes.avatarsDesc")),1)])])]),g("div",m3,[g("h2",y3,v(m(n)("family.networkAnalysis.title")),1),Ee(wa,{"selected-metrics":H.value,"onUpdate:selectedMetrics":pe[2]||(pe[2]=Le=>H.value=Le),"size-metric":ne.value,"onUpdate:sizeMetric":pe[3]||(pe[3]=Le=>ne.value=Le),analyzing:_e.value,progress:m(x),onAnalyze:ee},null,8,["selected-metrics","size-metric","analyzing","progress"])]),g("div",v3,[g("h3",_3,v(m(n)("family.relationshipColors.title")),1),g("div",b3,[g("div",w3,[pe[8]||(pe[8]=g("div",{class:"legend-dot bg-indigo-500"},null,-1)),g("span",E3,v(m(n)("family.relationshipColors.you")),1)]),g("div",k3,[pe[9]||(pe[9]=g("div",{class:"legend-dot bg-pink-500"},null,-1)),g("span",A3,v(m(n)("family.relationshipColors.parents")),1)]),g("div",x3,[pe[10]||(pe[10]=g("div",{class:"legend-dot bg-blue-500"},null,-1)),g("span",C3,v(m(n)("family.relationshipColors.siblings")),1)]),g("div",S3,[pe[11]||(pe[11]=g("div",{class:"legend-dot bg-orange-500"},null,-1)),g("span",T3,v(m(n)("family.relationshipColors.unclesAunts")),1)]),g("div",N3,[pe[12]||(pe[12]=g("div",{class:"legend-dot bg-purple-500"},null,-1)),g("span",R3,v(m(n)("family.relationshipColors.cousins")),1)]),g("div",L3,[pe[13]||(pe[13]=g("div",{class:"legend-dot bg-amber-700"},null,-1)),g("span",I3,v(m(n)("family.relationshipColors.grandparents")),1)]),g("div",D3,[pe[14]||(pe[14]=g("div",{class:"legend-dot bg-cyan-500"},null,-1)),g("span",P3,v(m(n)("family.relationshipColors.nieces")),1)]),g("div",G3,[pe[15]||(pe[15]=g("div",{class:"legend-dot bg-rose-500"},null,-1)),g("span",M3,v(m(n)("family.relationshipColors.partners")),1)]),g("div",O3,[pe[16]||(pe[16]=g("div",{class:"legend-dot bg-teal-500"},null,-1)),g("span",F3,v(m(n)("family.relationshipColors.children")),1)])])]),g("div",$3,[g("h2",z3,v(m(n)("family.layoutAlgorithm.title")),1),Ee(ba,{modelValue:A.value,"onUpdate:modelValue":pe[4]||(pe[4]=Le=>A.value=Le),"available-layouts":D.value,loading:m(c)||C.value,onApply:re},null,8,["modelValue","available-layouts","loading"]),g("div",B3,[g("p",V3,[(K(!0),Y(qe,null,an(D.value,Le=>(K(),Y("div",{key:Le.id},[g("strong",null,v(Le.name)+":",1),Se(" "+v(Le.description)+" ",1),Le.requiresStats?(K(),Y("span",U3," (requires analysis)")):Ge("",!0),pe[17]||(pe[17]=g("br",null,null,-1))]))),128))])])]),g("div",j3,[g("h3",H3,v(m(n)("family.instructions.title")),1),g("ul",W3,[g("li",{innerHTML:m(n)("family.instructions.dragNodes")},null,8,q3),g("li",{innerHTML:m(n)("family.instructions.autoSaves")},null,8,K3),g("li",{innerHTML:m(n)("family.instructions.lock")},null,8,X3),g("li",{innerHTML:m(n)("family.instructions.download")},null,8,Z3),g("li",{innerHTML:m(n)("family.instructions.analyze")},null,8,Y3),g("li",{innerHTML:m(n)("family.instructions.layouts")},null,8,J3),g("li",{innerHTML:m(n)("family.instructions.undoRedo")},null,8,Q3)])])]),graph:Ue(()=>[m(c)||ae.value?(K(),Y("div",eF,[g("div",tF,[pe[18]||(pe[18]=g("div",{class:"loading-spinner"},null,-1)),g("p",nF,v(ae.value?"Switching render mode...":F.value),1)])])):Ge("",!0),g("div",{ref_key:"graphContainer",ref:a,class:"w-full h-full"},null,512)]),_:1}),(K(),Zn(SO,{key:`dialog-${I.value||"default"}`,visible:$.value,title:j.value,fields:z.value,onConfirm:ie,onCancel:he},null,8,["visible","title","fields"]))]))}},iF={class:"bacon-finder"},sF={class:"bacon-finder-title"},oF={class:"bacon-search-container"},aF={class:"bacon-search-input-wrapper"},lF=["placeholder","onKeydown"],cF={key:0,class:"bacon-suggestions"},dF=["onMousedown","onMouseenter"],uF={class:"bacon-suggestion-icon"},hF={class:"bacon-suggestion-text"},fF={class:"bacon-suggestion-category"},gF={key:0,class:"bacon-result"},pF={key:0,class:"bacon-result-found"},mF={class:"bacon-number-display"},yF={class:"bacon-number-value"},vF={class:"bacon-path"},_F={class:"bacon-path-nodes"},bF={key:0,class:"bacon-path-arrow"},wF={key:1,class:"bacon-result-not-found"},EF={key:1,class:"bacon-hint"},kF={__name:"BaconFinder",props:{nodes:{type:Array,required:!0},edges:{type:Array,required:!0},centerNode:{type:String,default:"Kevin Bacon"},title:{type:String,default:"Find Bacon Number"},placeholder:{type:String,default:"Search actor or movie..."}},emits:["pathFound","pathCleared"],setup(t,{emit:e}){const n=t,r=e,i=ce(""),s=ce(!1),o=ce(-1),a=ce(null),l=ce(null),c=Je(()=>{if(!i.value||i.value.length<2)return[];const x=i.value.toLowerCase();return n.nodes.filter(T=>{const L=String(T.id||"");return L!==n.centerNode&&L.toLowerCase().includes(x)}).slice(0,10)}),d=()=>{const x=new Map;return n.nodes.forEach(T=>{x.set(T.id,[])}),n.edges.forEach(T=>{const L=typeof T.source=="object"?T.source.id:T.source,O=typeof T.target=="object"?T.target.id:T.target;x.has(L)&&x.get(L).push(O),x.has(O)&&x.get(O).push(L)}),x},u=x=>{if(x===n.centerNode)return{found:!0,path:[{id:n.centerNode,category:h(n.centerNode)}],baconNumber:0,pathEdges:[]};const T=d(),L=new Set,O=new Map,F=[x];for(L.add(x);F.length>0;){const $=F.shift();if($===n.centerNode){const z=[],I=[];let A=$;for(;A!==void 0;){z.unshift({id:A,category:h(A)});const C=O.get(A);C!==void 0&&I.push({source:C,target:A}),A=C}const D=Math.floor((z.length-1)/2);return{found:!0,path:z,baconNumber:D,pathEdges:I}}const j=T.get($)||[];for(const z of j)L.has(z)||(L.add(z),O.set(z,$),F.push(z))}return{found:!1,path:[],baconNumber:-1,pathEdges:[]}},h=x=>n.nodes.find(L=>L.id===x)?.category||"unknown",f=()=>{o.value=-1,a.value=null,r("pathCleared")},p=x=>{c.value.length!==0&&(o.value+=x,o.value<0?o.value=c.value.length-1:o.value>=c.value.length&&(o.value=0))},y=()=>{o.value>=0&&o.value<c.value.length&&w(c.value[o.value])},w=x=>{i.value=x.id,s.value=!1,o.value=-1,a.value=u(x.id),a.value.found&&r("pathFound",{sourceNode:x.id,path:a.value.path,pathEdges:a.value.pathEdges,baconNumber:a.value.baconNumber})},b=()=>{s.value=!1,o.value=-1},E=()=>{i.value="",a.value=null,s.value=!1,o.value=-1,r("pathCleared")},k=()=>{r("pathCleared")},_=x=>{l.value&&!l.value.contains(x.target)&&b()};return Yt(()=>{document.addEventListener("click",_)}),$r(()=>{document.removeEventListener("click",_)}),(x,T)=>(K(),Y("div",iF,[g("h3",sF,v(t.title),1),g("div",oF,[g("div",aF,[Wt(g("input",{ref_key:"searchInput",ref:l,"onUpdate:modelValue":T[0]||(T[0]=L=>i.value=L),type:"text",placeholder:t.placeholder,class:"bacon-search-input",onInput:f,onFocus:T[1]||(T[1]=L=>s.value=!0),onKeydown:[T[2]||(T[2]=Vn(Zr(L=>p(1),["prevent"]),["down"])),T[3]||(T[3]=Vn(Zr(L=>p(-1),["prevent"]),["up"])),Vn(Zr(y,["prevent"]),["enter"]),Vn(b,["escape"])]},null,40,lF),[[Kl,i.value]]),i.value?(K(),Y("button",{key:0,class:"bacon-clear-btn",onClick:E},"  ")):Ge("",!0)]),s.value&&c.value.length>0?(K(),Y("div",cF,[(K(!0),Y(qe,null,an(c.value,(L,O)=>(K(),Y("div",{key:L.id,class:Ke(["bacon-suggestion-item",{"bacon-suggestion-highlighted":O===o.value}]),onMousedown:Zr(F=>w(L),["prevent"]),onMouseenter:F=>o.value=O},[g("span",uF,v(L.category==="movie"?"":""),1),g("span",hF,v(L.id),1),g("span",fF,v(L.category),1)],42,dF))),128))])):Ge("",!0)]),a.value?(K(),Y("div",gF,[a.value.found?(K(),Y("div",pF,[g("div",mF,[T[4]||(T[4]=g("span",{class:"bacon-number-icon"},"",-1)),T[5]||(T[5]=g("span",{class:"bacon-number-label"},"Bacon Number:",-1)),g("span",yF,v(a.value.baconNumber),1)]),g("div",vF,[T[6]||(T[6]=g("div",{class:"bacon-path-label"},"Path:",-1)),g("div",_F,[(K(!0),Y(qe,null,an(a.value.path,(L,O)=>(K(),Y(qe,{key:O},[g("span",{class:Ke(["bacon-path-node",{"bacon-path-actor":L.category==="actor","bacon-path-movie":L.category==="movie","bacon-path-kevin":L.id===t.centerNode}])},v(L.id),3),O<a.value.path.length-1?(K(),Y("span",bF,"")):Ge("",!0)],64))),128))])]),g("button",{class:"bacon-clear-path-btn",onClick:k}," Clear Highlight ")])):(K(),Y("div",wF,[T[7]||(T[7]=g("span",{class:"bacon-not-found-icon"},"",-1)),g("span",null,"No connection found to "+v(t.centerNode),1)]))])):(K(),Y("div",EF,[g("p",null,"Search for an actor or movie to find their connection to "+v(t.centerNode)+".",1)]))]))}},AF=xn(kF,[["__scopeId","data-v-2f687661"]]),xF={class:"degrees-page"},CF={class:"demo-controls-header"},SF={class:"demo-controls-title"},TF={class:"demo-controls-description"},NF={class:"info-box-green mb-4"},RF={class:"info-box-title-green"},LF=["innerHTML"],IF={class:"status-section"},DF={class:"demo-controls-section-title mb-3"},PF={class:"status-box"},GF={key:0,class:"status-empty"},MF={class:"text-xs"},OF={key:1,class:"space-y-2"},FF={class:"status-icon"},$F={key:0},zF={key:1},BF={key:2},VF={class:"status-text"},UF={key:0,class:"controls-section-bordered"},jF={class:"demo-controls-section-title"},HF={class:"grid grid-cols-2 gap-3 text-sm"},WF={class:"stat-box"},qF={class:"stat-value"},KF={class:"stat-label"},XF={class:"stat-box"},ZF={class:"stat-value"},YF={class:"stat-label"},JF={class:"stat-box"},QF={class:"stat-value"},e4={class:"stat-label"},t4={class:"stat-box"},n4={class:"stat-value"},r4={class:"stat-label"},i4={class:"controls-section-bordered"},s4={class:"legend-title"},o4={class:"legend-list"},a4={class:"legend-item"},l4={class:"legend-text"},c4={class:"legend-item"},d4={class:"legend-text"},u4={class:"legend-item"},h4={class:"legend-text"},f4={class:"mt-3 text-xs text-secondary"},g4={key:1,class:"controls-section-bordered"},p4={class:"controls-section-bordered"},m4={class:"demo-controls-section-title"},y4={class:"controls-section-bordered"},v4={class:"demo-controls-section-title"},_4={class:"info-box-blue"},b4={class:"info-box-title-blue"},w4={class:"info-box-text-blue space-y-1"},E4=["innerHTML"],k4=["innerHTML"],A4=["innerHTML"],x4={key:0,class:"loading-overlay"},C4={class:"text-center"},S4={class:"text-secondary"},T4="#f59e0b",N4=5,R4="#ff6600",L4=25,I4=999,D4={__name:"DegreesPage",setup(t){const e=Ze({prefix:"DegreesPage",level:"info"}),{t:n}=hn(),r=Pa({renderer:"sigma",colorBy:"category",colorScheme:"categorical",showLabels:!0}),{graphContainer:i,graphInstance:s,loading:o,loadData:a,applyLayout:l,getAvailableLayouts:c,analyzeGraph:d,analysisProgress:u,updateVisualEncoding:h}=r,f=ce(""),p=ce("info"),y=ce("Loading Six Degrees network..."),w=ce(!1),b=ce(!1),E=ce(!1),k=ce("none"),_=ce([]),x=ce(["degree","betweenness","eigenvector","eigenvector-laplacian"]),T=ce("degree"),L=ce(0),O=ce(0),F=ce(0),$=ce(0),j=ce([]),z=ce([]),I=ce(null),A=ce(new Map),D=ce(new Map),C=()=>{if(s.value)try{const W=s.value.getGraph();W&&W.hasNode("Kevin Bacon")&&(W.setNodeAttribute("Kevin Bacon","color",R4),W.setNodeAttribute("Kevin Bacon","size",L4),W.setNodeAttribute("Kevin Bacon","zIndex",I4),W.setNodeAttribute("Kevin Bacon","forceLabel",!0),W.setNodeAttribute("Kevin Bacon","highlighted",!0),W.setNodeAttribute("Kevin Bacon","lockedColor",!0),W.setNodeAttribute("Kevin Bacon","lockedSize",!0),e.debug("Kevin Bacon highlighted as network center"))}catch(W){e.warn("Could not highlight Kevin Bacon",{error:W.message})}},S=W=>{if(s.value?.sigma)try{s.value.sigma.setSetting("renderLabels",W),e.debug("Labels visibility set to",W)}catch(se){e.warn("Could not toggle labels",{error:se.message})}},U=({sourceNode:W,path:se,pathEdges:be,baconNumber:q})=>{if(s.value)try{const oe=s.value.getGraph();if(!oe)return;H(),I.value={sourceNode:W,path:se,pathEdges:be,baconNumber:q};const B=new Set(se.map(J=>J.id)),Q=new Set;be.forEach(J=>{Q.add(`${J.source}-${J.target}`),Q.add(`${J.target}-${J.source}`)}),oe.forEachNode((J,N)=>{A.value.set(J,{color:N.color,size:N.size,hidden:N.hidden,forceLabel:N.forceLabel,zIndex:N.zIndex}),B.has(J)?(oe.setNodeAttribute(J,"hidden",!1),oe.setNodeAttribute(J,"zIndex",100),oe.setNodeAttribute(J,"forceLabel",!0)):oe.setNodeAttribute(J,"hidden",!0)}),oe.forEachEdge((J,N,P,G)=>{D.value.set(J,{color:N.color,size:N.size,hidden:N.hidden,zIndex:N.zIndex});const V=`${P}-${G}`;Q.has(V)?(oe.setEdgeAttribute(J,"color",T4),oe.setEdgeAttribute(J,"size",N4),oe.setEdgeAttribute(J,"hidden",!1),oe.setEdgeAttribute(J,"zIndex",100)):oe.setEdgeAttribute(J,"hidden",!0)}),s.value.sigma&&s.value.sigma.refresh(),f.value=`Found path! Bacon Number: ${q}`,p.value="success",e.debug("Path highlighted",{sourceNode:W,baconNumber:q,pathLength:se.length})}catch(oe){e.error("Failed to highlight path",{error:oe.message})}},H=()=>{if(s.value)try{const W=s.value.getGraph();if(!W)return;A.value.forEach((se,be)=>{W.hasNode(be)&&(W.setNodeAttribute(be,"color",se.color),W.setNodeAttribute(be,"size",se.size),W.setNodeAttribute(be,"hidden",!1),W.setNodeAttribute(be,"zIndex",se.zIndex||1),be!=="Kevin Bacon"&&W.setNodeAttribute(be,"forceLabel",se.forceLabel||!1))}),D.value.forEach((se,be)=>{W.hasEdge(be)&&(W.setEdgeAttribute(be,"color",se.color||"#999"),W.setEdgeAttribute(be,"size",se.size||1),W.setEdgeAttribute(be,"hidden",!1),W.setEdgeAttribute(be,"zIndex",se.zIndex||1))}),A.value.clear(),D.value.clear(),I.value=null,C(),s.value.sigma&&s.value.sigma.refresh(),e.debug("Path highlighting cleared")}catch(W){e.error("Failed to clear path highlighting",{error:W.message})}},ne=async()=>{try{y.value="Loading Six Degrees of Kevin Bacon...",f.value="Loading network data...",p.value="info";const W=await ks.loadFromURL("/data/six_degrees_edges.csv","/data/six_degrees_nodes.csv"),se=W.nodes.map(be=>({...be,group:be.category==="movie"?1:2}));j.value=se,z.value=W.edges,L.value=se.length,O.value=W.edges.length,F.value=se.filter(be=>be.category==="movie").length,$.value=se.filter(be=>be.category==="actor").length,a(se,W.edges),setTimeout(()=>{S(!1),h({colorBy:"category",colorScheme:"categorical"}),C(),s.value&&s.value.on("simulationEnd",()=>{S(!0),C(),f.value="Simulation complete - graph stabilized",p.value="success"})},100),w.value=!0,f.value=`Loaded ${L.value} nodes and ${O.value} edges`,p.value="success",e.info("Six Degrees network loaded",{nodes:L.value,edges:O.value,movies:F.value,actors:$.value})}catch(W){e.error("Failed to load Six Degrees data",{error:W.message}),f.value=`Failed to load: ${W.message}`,p.value="error"}},_e=ce(!1),ye=async()=>{if(!s.value)return;const W=k.value;if(!(!W||W==="none")){W==="spectral"&&!_e.value&&(f.value="Spectral layout requires analysis first. Running analysis...",p.value="info",x.value.includes("eigenvector-laplacian")||(x.value=[...x.value,"eigenvector-laplacian"]),await ae());try{E.value=!0,f.value=`Applying ${W} layout...`,p.value="info",await l(W),C(),f.value=`Applied ${W} layout`,p.value="success"}catch(se){f.value=`Layout failed: ${se.message}`,p.value="error"}finally{E.value=!1}}},ae=async()=>{if(s.value)try{b.value=!0,f.value="Analyzing network...",p.value="info",await d(x.value),T.value&&h({sizeBy:T.value,minRadius:3,maxRadius:20}),C(),_e.value=!0,f.value="Analysis complete",p.value="success"}catch(W){f.value=`Analysis failed: ${W.message}`,p.value="error"}finally{b.value=!1}};return Yt(async()=>{await ne(),_.value=c()}),(W,se)=>(K(),Y("div",xF,[Ee(_a,null,{controls:Ue(()=>[g("div",CF,[g("h1",SF,v(m(n)("degrees.header.title")),1),g("p",TF,v(m(n)("degrees.header.subtitle")),1)]),g("div",NF,[g("h2",RF,v(m(n)("degrees.whatIs.title")),1),g("p",{class:"info-box-text-green",innerHTML:m(n)("degrees.whatIs.description")},null,8,LF)]),g("div",IF,[g("h2",DF,v(m(n)("degrees.status.title")),1),g("div",PF,[f.value?(K(),Y("div",OF,[g("div",{class:Ke({"status-message-success":p.value==="success","status-message-error":p.value==="error","status-message-info":p.value==="info"})},[g("div",FF,[p.value==="success"?(K(),Y("span",$F,"")):p.value==="error"?(K(),Y("span",zF,"")):(K(),Y("span",BF,""))]),g("div",VF,v(f.value),1)],2)])):(K(),Y("div",GF,[g("div",MF,v(m(n)("degrees.status.ready")),1)]))])]),w.value?(K(),Y("div",UF,[g("h2",jF,v(m(n)("degrees.stats.title")),1),g("div",HF,[g("div",WF,[g("div",qF,v(L.value),1),g("div",KF,v(m(n)("degrees.stats.nodes")),1)]),g("div",XF,[g("div",ZF,v(O.value),1),g("div",YF,v(m(n)("degrees.stats.edges")),1)]),g("div",JF,[g("div",QF,v(F.value),1),g("div",e4,v(m(n)("degrees.stats.movies")),1)]),g("div",t4,[g("div",n4,v($.value),1),g("div",r4,v(m(n)("degrees.stats.actors")),1)])])])):Ge("",!0),g("div",i4,[g("h3",s4,v(m(n)("degrees.legend.title")),1),g("div",o4,[g("div",a4,[se[3]||(se[3]=g("div",{class:"legend-dot legend-dot-kevin",style:{"background-color":"#ff6600"}},null,-1)),g("span",l4,[g("strong",null,v(m(n)("degrees.legend.kevinBacon")),1)])]),g("div",c4,[se[4]||(se[4]=g("div",{class:"legend-dot",style:{"background-color":"#3b82f6"}},null,-1)),g("span",d4,v(m(n)("degrees.legend.actors")),1)]),g("div",u4,[se[5]||(se[5]=g("div",{class:"legend-dot",style:{"background-color":"#10b981"}},null,-1)),g("span",h4,v(m(n)("degrees.legend.movies")),1)])]),g("div",f4,[g("p",null,[g("strong",null,v(m(n)("degrees.legend.degree1"))+":",1),Se(" "+v(m(n)("degrees.legend.degree1Desc")),1)]),g("p",null,[g("strong",null,v(m(n)("degrees.legend.degree2"))+":",1),Se(" "+v(m(n)("degrees.legend.degree2Desc")),1)])])]),w.value?(K(),Y("div",g4,[Ee(AF,{nodes:j.value,edges:z.value,"center-node":"Kevin Bacon",title:m(n)("degrees.baconFinder.title"),placeholder:m(n)("degrees.baconFinder.placeholder"),onPathFound:U,onPathCleared:H},null,8,["nodes","edges","title","placeholder"])])):Ge("",!0),g("div",p4,[g("h2",m4,v(m(n)("degrees.layout.title")),1),Ee(ba,{modelValue:k.value,"onUpdate:modelValue":se[0]||(se[0]=be=>k.value=be),"available-layouts":_.value,loading:m(o)||E.value,onApply:ye},null,8,["modelValue","available-layouts","loading"])]),g("div",y4,[g("h2",v4,v(m(n)("degrees.analysis.title")),1),Ee(wa,{"selected-metrics":x.value,"onUpdate:selectedMetrics":se[1]||(se[1]=be=>x.value=be),"size-metric":T.value,"onUpdate:sizeMetric":se[2]||(se[2]=be=>T.value=be),analyzing:b.value,progress:m(u),"show-spectral-metric":!0,onAnalyze:ae},null,8,["selected-metrics","size-metric","analyzing","progress"])]),g("div",_4,[g("h3",b4,v(m(n)("degrees.instructions.title")),1),g("ul",w4,[g("li",{innerHTML:m(n)("degrees.instructions.hover")},null,8,E4),g("li",{innerHTML:m(n)("degrees.instructions.drag")},null,8,k4),g("li",{innerHTML:m(n)("degrees.instructions.zoom")},null,8,A4)])])]),graph:Ue(()=>[m(o)?(K(),Y("div",x4,[g("div",C4,[se[6]||(se[6]=g("div",{class:"loading-spinner"},null,-1)),g("p",S4,v(y.value),1)])])):Ge("",!0),g("div",{ref_key:"graphContainer",ref:i,class:"w-full h-full"},null,512)]),_:1})]))}},P4=xn(D4,[["__scopeId","data-v-34a987ab"]]),G4={class:"page-content"},M4={class:"docs-page-header"},O4={class:"docs-page-title"},F4={class:"section-description"},$4={class:"docs-toc"},z4={class:"docs-toc-grid"},B4={href:"#quick-start",class:"docs-toc-link"},V4={href:"#core-classes",class:"docs-toc-link"},U4={href:"#workers",class:"docs-toc-link"},j4={href:"#adapters",class:"docs-toc-link"},H4={href:"#layouts",class:"docs-toc-link"},W4={href:"#community",class:"docs-toc-link"},q4={href:"#examples",class:"docs-toc-link"},K4={id:"quick-start",class:"docs-section"},X4={class:"docs-section-header"},Z4={class:"docs-card"},Y4={class:"docs-card-description"},J4={class:"docs-subsection-title-accent"},Q4={class:"docs-code-block"},e$={class:"docs-code-block-green"},t$={class:"docs-subsection-title-accent"},n$={id:"core-classes",class:"docs-section"},r$={class:"docs-section-header"},i$={class:"docs-card"},s$={class:"docs-card-title"},o$={class:"docs-card-description"},a$={class:"docs-subsection-title"},l$={class:"docs-method-list"},c$={class:"docs-method-item"},d$={class:"docs-method-name"},u$={class:"docs-method-description"},h$={class:"docs-method-item"},f$={class:"docs-method-name"},g$={class:"docs-method-description"},p$={class:"docs-method-item"},m$={class:"docs-method-name"},y$={class:"docs-method-description"},v$={class:"docs-method-item"},_$={class:"docs-method-name"},b$={class:"docs-method-description"},w$={class:"docs-method-item"},E$={class:"docs-method-name"},k$={class:"docs-method-description"},A$={class:"docs-method-item"},x$={class:"docs-method-name"},C$={class:"docs-method-description"},S$={class:"docs-method-item"},T$={class:"docs-method-name"},N$={class:"docs-method-description"},R$={class:"docs-card"},L$={class:"docs-card-title"},I$={class:"docs-card-description"},D$={class:"docs-subsection-title"},P$={class:"list-disc pl-6 space-y-2 text-secondary mb-6"},G$={class:"docs-subsection-title"},M$={class:"text-secondary mb-3"},O$={class:"docs-subsection-title"},F$={class:"docs-feature-grid-item"},$$={class:"docs-feature-item"},z$={class:"docs-feature-description"},B$={class:"docs-feature-item"},V$={class:"docs-feature-description"},U$={class:"docs-feature-item"},j$={class:"docs-feature-description"},H$={class:"docs-feature-item"},W$={class:"docs-feature-description"},q$={class:"docs-feature-item"},K$={class:"docs-feature-description"},X$={class:"docs-feature-item"},Z$={class:"docs-feature-description"},Y$={class:"docs-feature-item"},J$={class:"docs-feature-description"},Q$={class:"docs-feature-item"},e5={class:"docs-feature-description"},t5={class:"docs-feature-item"},n5={class:"docs-feature-description"},r5={id:"workers",class:"docs-section"},i5={class:"docs-section-header"},s5={class:"docs-section-intro"},o5={class:"docs-card"},a5={class:"docs-card-title"},l5={class:"docs-method-list"},c5={class:"docs-method-item"},d5={class:"docs-method-name"},u5={class:"docs-method-description"},h5={class:"docs-method-item"},f5={class:"docs-method-name"},g5={class:"docs-method-description"},p5={class:"docs-method-item"},m5={class:"docs-method-name"},y5={class:"docs-method-description"},v5={class:"docs-card"},_5={class:"docs-card-title-purple"},b5={class:"docs-card-description"},w5={class:"docs-subsection-title"},E5={class:"list-disc pl-6 space-y-2 text-secondary mb-6"},k5={class:"docs-subsection-title"},A5={class:"list-decimal pl-6 space-y-2 text-secondary mb-6"},x5={class:"docs-card"},C5={class:"docs-card-title-green"},S5={class:"docs-options-box mt-4"},T5={class:"docs-options-list"},N5={class:"docs-card"},R5={class:"docs-card-title-blue"},L5={class:"docs-card-description"},I5={id:"adapters",class:"docs-section"},D5={class:"docs-section-header"},P5={class:"docs-section-intro"},G5={class:"docs-card"},M5={class:"docs-card-title-blue"},O5={class:"docs-card-description"},F5={class:"docs-subsection-title"},$5={class:"docs-method-list"},z5={class:"docs-method-item-blue"},B5={class:"docs-method-name"},V5={class:"docs-method-description"},U5={class:"docs-method-returns"},j5={class:"docs-method-item-blue"},H5={class:"docs-method-name"},W5={class:"docs-method-description"},q5={class:"docs-method-returns"},K5={class:"docs-method-item-blue"},X5={class:"docs-method-name"},Z5={class:"docs-method-description"},Y5={class:"docs-method-returns"},J5={class:"docs-method-item-blue"},Q5={class:"docs-method-name"},e9={class:"docs-method-description"},t9={class:"docs-method-returns"},n9={class:"docs-method-item-blue"},r9={class:"docs-method-name"},i9={class:"docs-method-description"},s9={class:"docs-method-returns"},o9={class:"docs-card"},a9={class:"docs-card-title-green"},l9={class:"docs-card-description"},c9={class:"docs-subsection-title"},d9={class:"docs-method-list"},u9={class:"docs-method-item-green"},h9={class:"docs-method-name"},f9={class:"docs-method-description"},g9={class:"docs-method-returns"},p9={class:"docs-method-item-green"},m9={class:"docs-method-name"},y9={class:"docs-method-description"},v9={class:"docs-method-returns"},_9={class:"docs-method-item-green"},b9={class:"docs-method-name"},w9={class:"docs-method-description"},E9={class:"docs-method-returns"},k9={class:"docs-method-item-green"},A9={class:"docs-method-name"},x9={class:"docs-method-description"},C9={class:"docs-method-returns"},S9={class:"docs-method-item-green"},T9={class:"docs-method-name"},N9={class:"docs-method-description"},R9={class:"docs-method-returns"},L9={class:"docs-method-item-green"},I9={class:"docs-method-name"},D9={class:"docs-method-description"},P9={class:"docs-method-returns"},G9={class:"docs-card"},M9={class:"docs-card-title-yellow"},O9={class:"docs-card-description"},F9={class:"docs-subsection-title"},$9={class:"docs-method-list"},z9={class:"docs-method-item-yellow"},B9={class:"docs-method-name"},V9={class:"docs-method-description"},U9={class:"docs-method-returns"},j9={class:"docs-method-item-yellow"},H9={class:"docs-method-name"},W9={class:"docs-method-description"},q9={class:"docs-method-returns"},K9={class:"docs-method-item-yellow"},X9={class:"docs-method-name"},Z9={class:"docs-method-description"},Y9={class:"docs-method-returns"},J9={class:"docs-method-item-yellow"},Q9={class:"docs-method-name"},ez={class:"docs-method-description"},tz={class:"docs-method-returns"},nz={id:"layouts",class:"docs-section"},rz={class:"docs-section-header"},iz={class:"docs-section-intro"},sz={class:"docs-note"},oz={class:"docs-card"},az={class:"docs-card-title-purple"},lz={class:"text-secondary mb-2"},cz={class:"docs-complexity"},dz={class:"docs-best-for"},uz={class:"docs-subsection-title-lg"},hz={class:"docs-options-box"},fz={class:"docs-options-list"},gz={class:"docs-card"},pz={class:"docs-card-title-indigo"},mz={class:"text-secondary mb-2"},yz={class:"docs-complexity"},vz={class:"docs-best-for"},_z={class:"docs-subsection-title-lg"},bz={class:"docs-options-box"},wz={class:"docs-options-list"},Ez={class:"docs-card"},kz={class:"docs-card-title-pink"},Az={class:"text-secondary mb-2"},xz={class:"docs-complexity"},Cz={class:"text-sm text-accent mb-2"},Sz={class:"docs-warning"},Tz={class:"docs-feature-grid"},Nz={class:"docs-card-compact"},Rz={class:"docs-card-title-sm text-blue-600 dark:text-blue-400"},Lz={class:"docs-feature-description mb-2"},Iz={class:"text-xs text-gray-600 dark:text-gray-400 mb-2"},Dz={class:"text-xs text-accent"},Pz={class:"docs-card-compact"},Gz={class:"docs-card-title-sm text-green-600 dark:text-green-400"},Mz={class:"docs-feature-description mb-2"},Oz={class:"text-xs text-gray-600 dark:text-gray-400 mb-2"},Fz={class:"text-xs text-accent mb-1"},$z={class:"text-xs text-red-600 dark:text-red-400"},zz={class:"docs-card-compact"},Bz={class:"docs-card-title-sm text-yellow-600 dark:text-yellow-400"},Vz={class:"docs-feature-description mb-2"},Uz={class:"text-xs text-gray-600 dark:text-gray-400 mb-2"},jz={class:"text-xs text-accent"},Hz={class:"docs-card-compact"},Wz={class:"docs-card-title-sm text-red-600 dark:text-red-400"},qz={class:"docs-feature-description mb-2"},Kz={class:"text-xs text-gray-600 dark:text-gray-400 mb-2"},Xz={class:"text-xs text-accent"},Zz={class:"docs-card-compact"},Yz={class:"docs-card-title-sm text-teal-600 dark:text-teal-400"},Jz={class:"docs-feature-description mb-2"},Qz={class:"text-xs text-gray-600 dark:text-gray-400 mb-2"},e8={class:"text-xs text-accent"},t8={class:"docs-card-compact"},n8={class:"docs-card-title-sm text-gray-600 dark:text-gray-400"},r8={class:"docs-feature-description mb-2"},i8={class:"text-xs text-gray-600 dark:text-gray-400 mb-2"},s8={class:"text-xs text-accent"},o8={class:"docs-tip-box"},a8={class:"docs-subsection-title-lg"},l8={class:"text-sm text-secondary mb-3"},c8={id:"community",class:"docs-section"},d8={class:"docs-section-header"},u8={class:"docs-section-intro"},h8={class:"docs-card"},f8={class:"docs-card-title"},g8={class:"docs-card-description"},p8={class:"docs-subsection-title"},m8={class:"docs-method-list"},y8={class:"docs-method-item"},v8={class:"docs-method-name"},_8={class:"docs-method-description"},b8={class:"docs-method-returns"},w8={class:"docs-method-item"},E8={class:"docs-method-name"},k8={class:"docs-method-description"},A8={class:"docs-method-returns"},x8={class:"docs-method-list"},C8={class:"docs-method-item-purple"},S8={class:"docs-method-name"},T8={class:"docs-method-description"},N8={class:"docs-method-returns"},R8={class:"docs-method-item-purple"},L8={class:"docs-method-name"},I8={class:"docs-method-description"},D8={class:"docs-method-item-purple"},P8={class:"docs-method-name"},G8={class:"docs-method-description"},M8={class:"docs-card"},O8={class:"docs-card-title-orange"},F8={class:"text-secondary mb-2"},$8={class:"docs-complexity"},z8={class:"docs-card-description"},B8={class:"docs-subsection-title-lg"},V8={class:"docs-options-box"},U8={class:"docs-options-list"},j8={class:"docs-card"},H8={class:"docs-card-title-green"},W8={class:"docs-card-description"},q8={class:"docs-options-box"},K8={class:"docs-options-list space-y-2"},X8={id:"examples",class:"docs-section"},Z8={class:"docs-section-header"},Y8={class:"docs-section-intro"},J8={class:"docs-card"},Q8={class:"docs-card-title"},e6={class:"text-secondary mb-4"},t6={class:"docs-card"},n6={class:"docs-card-title-blue"},r6={class:"text-secondary mb-4"},i6={class:"docs-card"},s6={class:"docs-card-title-purple"},o6={class:"text-secondary mb-4"},a6=`import NetworkStats from '@guinetik/graph-js';

const network = [
  { source: 'Alice', target: 'Bob' },
  { source: 'Bob', target: 'Charlie' },
  { source: 'Charlie', target: 'Alice' }
];

const analyzer = new NetworkStats({ verbose: false });
const results = await analyzer.analyze(network, ['degree', 'eigenvector']);

console.log(results);
// [
//   { id: 'Alice', degree: 2, eigenvector: 0.577 },
//   { id: 'Bob', degree: 2, eigenvector: 0.577 },
//   { id: 'Charlie', degree: 2, eigenvector: 0.577 }
// ]`,l6=`import { Graph } from '@guinetik/graph-js';

const graph = new Graph();
graph.addNodesFrom(['A', 'B', 'C']);
graph.addEdge('A', 'B', 1);
graph.addEdge('B', 'C', 2);

console.log(graph.getNeighbors('B')); // ['A', 'C']
console.log(graph.numberOfNodes());    // 3
console.log(graph.numberOfEdges());    // 2`,c6=`import NetworkStats from '@guinetik/graph-js';

const analyzer = new NetworkStats({
  maxWorkers: 4,              // Max workers (default: auto-detect)
  enableAffinity: true,       // Enable worker affinity (default: true)
  affinityCacheLimit: 50,     // Max cached functions per worker
  taskTimeout: 300000,        // 5 minute timeout
  verbose: true               // See affinity logs:  hits,  updates
});

// Run analysis - affinity routing happens automatically
const results = await analyzer.analyze(network, ['degree', 'eigenvector']);

// Cleanup when done
await analyzer.dispose();`,d6="import WorkerManager from '@guinetik/graph-js';\n\n// Get pool status\nconst status = WorkerManager.getStatus();\nconsole.log(`Workers: ${status.availableWorkers}/${status.totalWorkers}`);\nconsole.log(`Affinity hit rate: ${(status.affinity.hitRate * 100).toFixed(1)}%`);\n\n// Get detailed affinity stats\nconst stats = WorkerManager.getAffinityStats();\nconsole.log(`Hits: ${stats.hits}, Misses: ${stats.misses}`);\n\n// Per-worker cache info\nstats.workerCaches.forEach(w => {\n  console.log(`Worker ${w.workerId}: ${w.cachedFunctions.length} cached`);\n  console.log(`  Functions: ${w.cachedFunctions.join(', ')}`);\n});",u6=`import { CSVAdapter } from '@guinetik/graph-js';

// Load from URLs
const graphData = await CSVAdapter.loadFromURL(
  '../data/edges.csv',
  '../data/nodes.csv'
);

// Export to CSV
const edgesCSV = CSVAdapter.toEdgeList(graphData);
const nodesCSV = CSVAdapter.toNodes(graphData);`,h6=`import { JSONAdapter } from '@guinetik/graph-js';

// Convert D3 format to GraphData
const graphData = JSONAdapter.fromD3(d3Data);

// Convert to Cytoscape format
const cytoData = JSONAdapter.toCytoscape(graphData);

// Auto-detect format
const data = JSONAdapter.fromFormat(unknownJSON);`,f6=`import { NetworkXAdapter } from '@guinetik/graph-js';

// From Python: nx.node_link_data(G)
const graphData = NetworkXAdapter.fromNodeLink(nxData);

// To Python: G = nx.node_link_graph(nxData)
const nxData = NetworkXAdapter.toNodeLink(graphData, {
  directed: false,
  multigraph: false
});`,g6=`import { Graph, ForceDirectedLayout } from '@guinetik/graph-js';

const graph = new Graph();
graph.addNodesFrom(['A', 'B', 'C']);
graph.addEdge('A', 'B');
graph.addEdge('B', 'C');

const layout = new ForceDirectedLayout(graph, {
  iterations: 100,
  scale: 200
});
const positions = await layout.getPositions();
// { 'A': {x: 120, y: 45}, 'B': {x: -30, y: 90}, ... }`,p6=`import { KamadaKawaiLayout } from '@guinetik/graph-js';

const layout = new KamadaKawaiLayout(graph, {
  iterations: 100,
  scale: 200
});
const positions = await layout.getPositions();`,m6=`import { NetworkStats, Graph, SpectralLayout } from '@guinetik/graph-js';

// First compute eigenvector-laplacian
const analyzer = new NetworkStats();
await analyzer.analyze(edges, ['eigenvector-laplacian']);

// Then apply layout
const layout = new SpectralLayout(graph, { scale: 200 });
const positions = await layout.getPositions();`,y6=`// All layouts follow this pattern
const layout = new SomeLayout(graph, options);
const positions = await layout.getPositions({
  onProgress: (progress) => console.log(\`\${progress * 100}%\`)
});`,v6=`import { CommunityDetection, LouvainAlgorithm } from '@guinetik/graph-js';

// Method 1: Direct detection from GraphData
const result = await CommunityDetection.detect(graphData, 'louvain', {
  resolution: 1.0,
  onProgress: (p) => console.log(\`\${Math.round(p * 100)}%\`)
});

// Method 2: Using algorithm instance
const detector = new CommunityDetection(graph);
const algorithm = new LouvainAlgorithm({ resolution: 1.0 });
const result = await detector.detectCommunities(algorithm);

console.log(result.communities);     // { 'A': 0, 'B': 0, 'C': 1 }
console.log(result.modularity);      // 0.42
console.log(result.numCommunities);  // 2`,_6=`import NetworkStats from '@guinetik/graph-js';

const network = [
  { source: 'Alice', target: 'Bob', weight: 1 },
  { source: 'Bob', target: 'Carol', weight: 2 },
  { source: 'Carol', target: 'Dave', weight: 1 }
];

const analyzer = new NetworkStats({ verbose: true });
const results = await analyzer.analyze(network, ['degree', 'eigenvector', 'betweenness']);

console.log(results);
// [
//   { id: 'Alice', degree: 1, eigenvector: 0.34, betweenness: 0 },
//   { id: 'Bob', degree: 2, eigenvector: 0.58, betweenness: 0.67 },
//   ...
// ]

await analyzer.dispose(); // Cleanup workers`,b6=`import { CSVAdapter } from '@guinetik/graph-js';
import NetworkStats from '@guinetik/graph-js';

// Load CSV data
const graphData = await CSVAdapter.loadFromURL(
  '../data/edges.csv',
  '../data/nodes.csv'
);

// Convert to edge list for analysis
const network = graphData.edges;

// Analyze
const analyzer = new NetworkStats();
const results = await analyzer.analyze(network, ['degree', 'clustering']);
await analyzer.dispose();`,w6=`import NetworkStats, {
  CSVAdapter,
  Graph,
  KamadaKawaiLayout,
  CommunityDetection
} from '@guinetik/graph-js';

// 1. Load data
const graphData = await CSVAdapter.loadFromURL('../data/edges.csv');

// 2. Analyze network
const analyzer = new NetworkStats();
const nodeMetrics = await analyzer.analyze(graphData.edges, [
  'degree',
  'eigenvector',
  'betweenness'
]);

// 3. Apply layout
const graph = new Graph();
graphData.edges.forEach(e => {
  graph.addNode(e.source);
  graph.addNode(e.target);
  graph.addEdge(e.source, e.target, e.weight || 1);
});

const layout = new KamadaKawaiLayout(graph, { scale: 200 });
const positions = await layout.getPositions();

// 4. Detect communities
const communityResult = await CommunityDetection.detect(
  graphData,
  'louvain'
);

// 5. Combine results
const finalData = nodeMetrics.map(node => ({
  ...node,
  x: positions[node.id].x,
  y: positions[node.id].y,
  community: communityResult.communities[node.id]
}));

console.log('Analysis complete!', finalData);
console.log('Modularity:', communityResult.modularity);

await analyzer.dispose();`,E6={__name:"DocsPage",setup(t){const{t:e}=hn();return(n,r)=>(K(),Y("div",G4,[g("div",M4,[g("h1",O4,v(m(e)("docs.title")),1),g("p",F4,v(m(e)("docs.subtitle")),1)]),g("div",$4,[r[7]||(r[7]=g("h2",{class:"docs-toc-title"}," Contents",-1)),g("div",z4,[g("a",B4,[r[0]||(r[0]=g("span",{class:"docs-toc-icon"},"",-1)),g("span",null,v(m(e)("docs.sections.quickStart")),1)]),g("a",V4,[r[1]||(r[1]=g("span",{class:"docs-toc-icon"},"",-1)),g("span",null,v(m(e)("docs.sections.coreClasses")),1)]),g("a",U4,[r[2]||(r[2]=g("span",{class:"docs-toc-icon"},"",-1)),g("span",null,v(m(e)("docs.sections.workers")),1)]),g("a",j4,[r[3]||(r[3]=g("span",{class:"docs-toc-icon"},"",-1)),g("span",null,v(m(e)("docs.sections.adapters")),1)]),g("a",H4,[r[4]||(r[4]=g("span",{class:"docs-toc-icon"},"",-1)),g("span",null,v(m(e)("docs.sections.layouts")),1)]),g("a",W4,[r[5]||(r[5]=g("span",{class:"docs-toc-icon"},"",-1)),g("span",null,v(m(e)("docs.sections.community")),1)]),g("a",q4,[r[6]||(r[6]=g("span",{class:"docs-toc-icon"},"",-1)),g("span",null,v(m(e)("docs.sections.examples")),1)])])]),g("section",K4,[g("h2",X4,[r[8]||(r[8]=g("span",{class:"docs-section-header-icon"},"",-1)),g("span",null,v(m(e)("docs.quickStart.title")),1)]),g("div",Z4,[g("p",Y4,v(m(e)("docs.quickStart.description")),1),g("h3",J4,v(m(e)("docs.quickStart.install")),1),g("div",Q4,[g("code",e$,v(m(e)("docs.quickStart.installCmd")),1)]),g("h3",t$,v(m(e)("docs.quickStart.basicUsage")),1),Ee(vt,{code:a6,language:"javascript"})])]),g("section",n$,[g("h2",r$,[r[9]||(r[9]=g("span",{class:"docs-section-header-icon"},"",-1)),g("span",null,v(m(e)("docs.sections.coreClasses")),1)]),g("div",i$,[g("h3",s$,v(m(e)("docs.graph.title")),1),g("p",o$,v(m(e)("docs.graph.description")),1),r[10]||(r[10]=g("div",{class:"docs-code-block"},[g("code",{class:"docs-code-block-text"},"const graph = new Graph();")],-1)),g("h4",a$,v(m(e)("docs.graph.methods")),1),g("div",l$,[g("div",c$,[g("code",d$,v(m(e)("docs.graph.methodsList.addNode.name")),1),g("p",u$,v(m(e)("docs.graph.methodsList.addNode.description")),1)]),g("div",h$,[g("code",f$,v(m(e)("docs.graph.methodsList.addNodesFrom.name")),1),g("p",g$,v(m(e)("docs.graph.methodsList.addNodesFrom.description")),1)]),g("div",p$,[g("code",m$,v(m(e)("docs.graph.methodsList.addEdge.name")),1),g("p",y$,v(m(e)("docs.graph.methodsList.addEdge.description")),1)]),g("div",v$,[g("code",_$,v(m(e)("docs.graph.methodsList.removeNode.name")),1),g("p",b$,v(m(e)("docs.graph.methodsList.removeNode.description")),1)]),g("div",w$,[g("code",E$,v(m(e)("docs.graph.methodsList.getNeighbors.name")),1),g("p",k$,v(m(e)("docs.graph.methodsList.getNeighbors.description")),1)]),g("div",A$,[g("code",x$,v(m(e)("docs.graph.methodsList.hasEdge.name")),1),g("p",C$,v(m(e)("docs.graph.methodsList.hasEdge.description")),1)]),g("div",S$,[g("code",T$,v(m(e)("docs.graph.methodsList.numberOfNodes.name")),1),g("p",N$,v(m(e)("docs.graph.methodsList.numberOfNodes.description")),1)])]),Ee(vt,{code:l6,language:"javascript"})]),g("div",R$,[g("h3",L$,v(m(e)("docs.networkStats.title")),1),g("p",I$,v(m(e)("docs.networkStats.description")),1),g("h4",D$,v(m(e)("docs.networkStats.constructor")),1),r[22]||(r[22]=g("div",{class:"docs-code-block"},[g("code",{class:"docs-code-block-text"},"new NetworkStats(options?)")],-1)),g("ul",P$,[g("li",null,[r[11]||(r[11]=g("code",{class:"docs-code-inline-xs"},"maxIter:",-1)),Se(" "+v(m(e)("docs.networkStats.constructorParams.maxIter")),1)]),g("li",null,[r[12]||(r[12]=g("code",{class:"docs-code-inline-xs"},"verbose:",-1)),Se(" "+v(m(e)("docs.networkStats.constructorParams.verbose")),1)])]),g("h4",G$,v(m(e)("docs.networkStats.analyze.title")),1),g("p",M$,v(m(e)("docs.networkStats.analyze.description")),1),r[23]||(r[23]=g("div",{class:"docs-code-block"},[g("code",{class:"docs-code-block-text"},"analyzer.analyze(network, features?)")],-1)),g("h4",O$,v(m(e)("docs.networkStats.features.title")),1),g("div",F$,[g("div",$$,[r[13]||(r[13]=g("span",{class:"docs-feature-badge"},"degree",-1)),g("span",z$,v(m(e)("docs.networkStats.features.degree")),1)]),g("div",B$,[r[14]||(r[14]=g("span",{class:"docs-feature-badge"},"eigenvector",-1)),g("span",V$,v(m(e)("docs.networkStats.features.eigenvector")),1)]),g("div",U$,[r[15]||(r[15]=g("span",{class:"docs-feature-badge"},"eigenvector-laplacian",-1)),g("span",j$,v(m(e)("docs.networkStats.features.eigenvectorLaplacian")),1)]),g("div",H$,[r[16]||(r[16]=g("span",{class:"docs-feature-badge"},"betweenness",-1)),g("span",W$,v(m(e)("docs.networkStats.features.betweenness")),1)]),g("div",q$,[r[17]||(r[17]=g("span",{class:"docs-feature-badge"},"clustering",-1)),g("span",K$,v(m(e)("docs.networkStats.features.clustering")),1)]),g("div",X$,[r[18]||(r[18]=g("span",{class:"docs-feature-badge"},"closeness",-1)),g("span",Z$,v(m(e)("docs.networkStats.features.closeness")),1)]),g("div",Y$,[r[19]||(r[19]=g("span",{class:"docs-feature-badge"},"cliques",-1)),g("span",J$,v(m(e)("docs.networkStats.features.cliques")),1)]),g("div",Q$,[r[20]||(r[20]=g("span",{class:"docs-feature-badge"},"ego-density",-1)),g("span",e5,v(m(e)("docs.networkStats.features.egoDensity")),1)]),g("div",t5,[r[21]||(r[21]=g("span",{class:"docs-feature-badge"},"modularity",-1)),g("span",n5,v(m(e)("docs.networkStats.features.modularity")),1)])])])]),g("section",r5,[g("h2",i5,[r[24]||(r[24]=g("span",{class:"docs-section-header-icon"},"",-1)),g("span",null,v(m(e)("docs.workers.title")),1)]),g("p",s5,v(m(e)("docs.workers.description")),1),g("div",o5,[g("h3",a5,v(m(e)("docs.workers.components.title")),1),g("div",l5,[g("div",c5,[g("code",d5,v(m(e)("docs.workers.components.workerManager.name")),1),g("p",u5,v(m(e)("docs.workers.components.workerManager.description")),1)]),g("div",h5,[g("code",f5,v(m(e)("docs.workers.components.workerPool.name")),1),g("p",g5,v(m(e)("docs.workers.components.workerPool.description")),1)]),g("div",p5,[g("code",m5,v(m(e)("docs.workers.components.workerAdapter.name")),1),g("p",y5,v(m(e)("docs.workers.components.workerAdapter.description")),1)])])]),g("div",v5,[g("h3",_5,v(m(e)("docs.workers.affinity.title")),1),g("p",b5,v(m(e)("docs.workers.affinity.description")),1),g("h4",w5,v(m(e)("docs.workers.affinity.howItWorks")),1),g("ul",E5,[(K(!0),Y(qe,null,an(m(e)("docs.workers.affinity.howItWorksSteps"),(i,s)=>(K(),Y("li",{key:"how-"+s},v(i),1))),128))]),g("h4",k5,v(m(e)("docs.workers.affinity.selectionTitle")),1),g("ul",A5,[(K(!0),Y(qe,null,an(m(e)("docs.workers.affinity.selectionSteps"),(i,s)=>(K(),Y("li",{key:"sel-"+s},v(i),1))),128))])]),g("div",x5,[g("h3",C5,v(m(e)("docs.workers.config.title")),1),Ee(vt,{code:c6,language:"javascript"}),g("div",S5,[r[29]||(r[29]=g("h5",{class:"docs-options-title"},"Options:",-1)),g("ul",T5,[g("li",null,[r[25]||(r[25]=g("code",{class:"docs-options-code"},"maxWorkers:",-1)),Se(" "+v(m(e)("docs.workers.config.options.maxWorkers")),1)]),g("li",null,[r[26]||(r[26]=g("code",{class:"docs-options-code"},"enableAffinity:",-1)),Se(" "+v(m(e)("docs.workers.config.options.enableAffinity")),1)]),g("li",null,[r[27]||(r[27]=g("code",{class:"docs-options-code"},"affinityCacheLimit:",-1)),Se(" "+v(m(e)("docs.workers.config.options.affinityCacheLimit")),1)]),g("li",null,[r[28]||(r[28]=g("code",{class:"docs-options-code"},"taskTimeout:",-1)),Se(" "+v(m(e)("docs.workers.config.options.taskTimeout")),1)])])])]),g("div",N5,[g("h3",R5,v(m(e)("docs.workers.monitoring.title")),1),g("p",L5,v(m(e)("docs.workers.monitoring.description")),1),Ee(vt,{code:d6,language:"javascript"})])]),g("section",I5,[g("h2",D5,[r[30]||(r[30]=g("span",{class:"docs-section-header-icon"},"",-1)),g("span",null,v(m(e)("docs.adapters.title")),1)]),g("p",P5,v(m(e)("docs.adapters.description")),1),g("div",G5,[g("h3",M5,v(m(e)("docs.adapters.csv.title")),1),g("p",O5,v(m(e)("docs.adapters.csv.description")),1),g("h4",F5,v(m(e)("docs.adapters.csv.methods")),1),g("div",$5,[g("div",z5,[g("code",B5,v(m(e)("docs.adapters.csv.methodsList.fromEdgeList.name")),1),g("p",V5,v(m(e)("docs.adapters.csv.methodsList.fromEdgeList.description")),1),g("p",U5,v(m(e)("docs.adapters.csv.methodsList.fromEdgeList.returns")),1)]),g("div",j5,[g("code",H5,v(m(e)("docs.adapters.csv.methodsList.fromNodes.name")),1),g("p",W5,v(m(e)("docs.adapters.csv.methodsList.fromNodes.description")),1),g("p",q5,v(m(e)("docs.adapters.csv.methodsList.fromNodes.returns")),1)]),g("div",K5,[g("code",X5,v(m(e)("docs.adapters.csv.methodsList.loadFromURL.name")),1),g("p",Z5,v(m(e)("docs.adapters.csv.methodsList.loadFromURL.description")),1),g("p",Y5,v(m(e)("docs.adapters.csv.methodsList.loadFromURL.returns")),1)]),g("div",J5,[g("code",Q5,v(m(e)("docs.adapters.csv.methodsList.toEdgeList.name")),1),g("p",e9,v(m(e)("docs.adapters.csv.methodsList.toEdgeList.description")),1),g("p",t9,v(m(e)("docs.adapters.csv.methodsList.toEdgeList.returns")),1)]),g("div",n9,[g("code",r9,v(m(e)("docs.adapters.csv.methodsList.toNodes.name")),1),g("p",i9,v(m(e)("docs.adapters.csv.methodsList.toNodes.description")),1),g("p",s9,v(m(e)("docs.adapters.csv.methodsList.toNodes.returns")),1)])]),Ee(vt,{code:u6,language:"javascript"})]),g("div",o9,[g("h3",a9,v(m(e)("docs.adapters.json.title")),1),g("p",l9,v(m(e)("docs.adapters.json.description")),1),g("h4",c9,v(m(e)("docs.adapters.json.methods")),1),g("div",d9,[g("div",u9,[g("code",h9,v(m(e)("docs.adapters.json.methodsList.fromD3.name")),1),g("p",f9,v(m(e)("docs.adapters.json.methodsList.fromD3.description")),1),g("p",g9,v(m(e)("docs.adapters.json.methodsList.fromD3.returns")),1)]),g("div",p9,[g("code",m9,v(m(e)("docs.adapters.json.methodsList.fromCytoscape.name")),1),g("p",y9,v(m(e)("docs.adapters.json.methodsList.fromCytoscape.description")),1),g("p",v9,v(m(e)("docs.adapters.json.methodsList.fromCytoscape.returns")),1)]),g("div",_9,[g("code",b9,v(m(e)("docs.adapters.json.methodsList.fromFormat.name")),1),g("p",w9,v(m(e)("docs.adapters.json.methodsList.fromFormat.description")),1),g("p",E9,v(m(e)("docs.adapters.json.methodsList.fromFormat.returns")),1)]),g("div",k9,[g("code",A9,v(m(e)("docs.adapters.json.methodsList.toD3.name")),1),g("p",x9,v(m(e)("docs.adapters.json.methodsList.toD3.description")),1),g("p",C9,v(m(e)("docs.adapters.json.methodsList.toD3.returns")),1)]),g("div",S9,[g("code",T9,v(m(e)("docs.adapters.json.methodsList.toCytoscape.name")),1),g("p",N9,v(m(e)("docs.adapters.json.methodsList.toCytoscape.description")),1),g("p",R9,v(m(e)("docs.adapters.json.methodsList.toCytoscape.returns")),1)]),g("div",L9,[g("code",I9,v(m(e)("docs.adapters.json.methodsList.loadFromURL.name")),1),g("p",D9,v(m(e)("docs.adapters.json.methodsList.loadFromURL.description")),1),g("p",P9,v(m(e)("docs.adapters.json.methodsList.loadFromURL.returns")),1)])]),Ee(vt,{code:h6,language:"javascript"})]),g("div",G9,[g("h3",M9,v(m(e)("docs.adapters.networkx.title")),1),g("p",O9,v(m(e)("docs.adapters.networkx.description")),1),g("h4",F9,v(m(e)("docs.adapters.networkx.methods")),1),g("div",$9,[g("div",z9,[g("code",B9,v(m(e)("docs.adapters.networkx.methodsList.fromNodeLink.name")),1),g("p",V9,v(m(e)("docs.adapters.networkx.methodsList.fromNodeLink.description")),1),g("p",U9,v(m(e)("docs.adapters.networkx.methodsList.fromNodeLink.returns")),1)]),g("div",j9,[g("code",H9,v(m(e)("docs.adapters.networkx.methodsList.fromAdjacency.name")),1),g("p",W9,v(m(e)("docs.adapters.networkx.methodsList.fromAdjacency.description")),1),g("p",q9,v(m(e)("docs.adapters.networkx.methodsList.fromAdjacency.returns")),1)]),g("div",K9,[g("code",X9,v(m(e)("docs.adapters.networkx.methodsList.toNodeLink.name")),1),g("p",Z9,v(m(e)("docs.adapters.networkx.methodsList.toNodeLink.description")),1),g("p",Y9,v(m(e)("docs.adapters.networkx.methodsList.toNodeLink.returns")),1)]),g("div",J9,[g("code",Q9,v(m(e)("docs.adapters.networkx.methodsList.toAdjacency.name")),1),g("p",ez,v(m(e)("docs.adapters.networkx.methodsList.toAdjacency.description")),1),g("p",tz,v(m(e)("docs.adapters.networkx.methodsList.toAdjacency.returns")),1)])]),Ee(vt,{code:f6,language:"javascript"})])]),g("section",nz,[g("h2",rz,[r[31]||(r[31]=g("span",{class:"docs-section-header-icon"},"",-1)),g("span",null,v(m(e)("docs.layouts.title")),1)]),g("p",iz,v(m(e)("docs.layouts.description")),1),g("p",sz," "+v(m(e)("docs.layouts.note")),1),g("div",oz,[g("h3",az,v(m(e)("docs.layouts.forceDirected.title")),1),g("p",lz,v(m(e)("docs.layouts.forceDirected.description")),1),g("p",cz,v(m(e)("docs.layouts.forceDirected.complexity")),1),g("p",dz,v(m(e)("docs.layouts.forceDirected.bestFor")),1),g("h4",uz,v(m(e)("docs.layouts.forceDirected.constructor")),1),g("div",hz,[r[38]||(r[38]=g("h5",{class:"docs-options-title"},"Options:",-1)),g("ul",fz,[g("li",null,[r[32]||(r[32]=g("code",{class:"docs-options-code"},"iterations:",-1)),Se(" "+v(m(e)("docs.layouts.forceDirected.options.iterations")),1)]),g("li",null,[r[33]||(r[33]=g("code",{class:"docs-options-code"},"k:",-1)),Se(" "+v(m(e)("docs.layouts.forceDirected.options.k")),1)]),g("li",null,[r[34]||(r[34]=g("code",{class:"docs-options-code"},"scale:",-1)),Se(" "+v(m(e)("docs.layouts.forceDirected.options.scale")),1)]),g("li",null,[r[35]||(r[35]=g("code",{class:"docs-options-code"},"center:",-1)),Se(" "+v(m(e)("docs.layouts.forceDirected.options.center")),1)]),g("li",null,[r[36]||(r[36]=g("code",{class:"docs-options-code"},"initialPositions:",-1)),Se(" "+v(m(e)("docs.layouts.forceDirected.options.initialPositions")),1)]),g("li",null,[r[37]||(r[37]=g("code",{class:"docs-options-code"},"threshold:",-1)),Se(" "+v(m(e)("docs.layouts.forceDirected.options.threshold")),1)])])]),Ee(vt,{code:g6,language:"javascript"})]),g("div",gz,[g("h3",pz,v(m(e)("docs.layouts.kamadaKawai.title")),1),g("p",mz,v(m(e)("docs.layouts.kamadaKawai.description")),1),g("p",yz,v(m(e)("docs.layouts.kamadaKawai.complexity")),1),g("p",vz,v(m(e)("docs.layouts.kamadaKawai.bestFor")),1),g("h4",_z,v(m(e)("docs.layouts.kamadaKawai.constructor")),1),g("div",bz,[r[45]||(r[45]=g("h5",{class:"docs-options-title"},"Options:",-1)),g("ul",wz,[g("li",null,[r[39]||(r[39]=g("code",{class:"docs-options-code"},"iterations:",-1)),Se(" "+v(m(e)("docs.layouts.kamadaKawai.options.iterations")),1)]),g("li",null,[r[40]||(r[40]=g("code",{class:"docs-options-code"},"scale:",-1)),Se(" "+v(m(e)("docs.layouts.kamadaKawai.options.scale")),1)]),g("li",null,[r[41]||(r[41]=g("code",{class:"docs-options-code"},"center:",-1)),Se(" "+v(m(e)("docs.layouts.kamadaKawai.options.center")),1)]),g("li",null,[r[42]||(r[42]=g("code",{class:"docs-options-code"},"initialPositions:",-1)),Se(" "+v(m(e)("docs.layouts.kamadaKawai.options.initialPositions")),1)]),g("li",null,[r[43]||(r[43]=g("code",{class:"docs-options-code"},"threshold:",-1)),Se(" "+v(m(e)("docs.layouts.kamadaKawai.options.threshold")),1)]),g("li",null,[r[44]||(r[44]=g("code",{class:"docs-options-code"},"K:",-1)),Se(" "+v(m(e)("docs.layouts.kamadaKawai.options.K")),1)])])]),Ee(vt,{code:p6,language:"javascript"})]),g("div",Ez,[g("h3",kz,v(m(e)("docs.layouts.spectral.title")),1),g("p",Az,v(m(e)("docs.layouts.spectral.description")),1),g("p",xz,v(m(e)("docs.layouts.spectral.complexity")),1),g("p",Cz,v(m(e)("docs.layouts.spectral.bestFor")),1),g("p",Sz," "+v(m(e)("docs.layouts.spectral.requires")),1),Ee(vt,{code:m6,language:"javascript"})]),g("div",Tz,[g("div",Nz,[g("h3",Rz,v(m(e)("docs.layouts.circular.title")),1),g("p",Lz,v(m(e)("docs.layouts.circular.description")),1),g("p",Iz,v(m(e)("docs.layouts.circular.complexity")),1),g("p",Dz,v(m(e)("docs.layouts.circular.bestFor")),1)]),g("div",Pz,[g("h3",Gz,v(m(e)("docs.layouts.shell.title")),1),g("p",Mz,v(m(e)("docs.layouts.shell.description")),1),g("p",Oz,v(m(e)("docs.layouts.shell.complexity")),1),g("p",Fz,v(m(e)("docs.layouts.shell.bestFor")),1),g("p",$z," "+v(m(e)("docs.layouts.shell.requires")),1)]),g("div",zz,[g("h3",Bz,v(m(e)("docs.layouts.spiral.title")),1),g("p",Vz,v(m(e)("docs.layouts.spiral.description")),1),g("p",Uz,v(m(e)("docs.layouts.spiral.complexity")),1),g("p",jz,v(m(e)("docs.layouts.spiral.bestFor")),1)]),g("div",Hz,[g("h3",Wz,v(m(e)("docs.layouts.bfs.title")),1),g("p",qz,v(m(e)("docs.layouts.bfs.description")),1),g("p",Kz,v(m(e)("docs.layouts.bfs.complexity")),1),g("p",Xz,v(m(e)("docs.layouts.bfs.bestFor")),1)]),g("div",Zz,[g("h3",Yz,v(m(e)("docs.layouts.bipartite.title")),1),g("p",Jz,v(m(e)("docs.layouts.bipartite.description")),1),g("p",Qz,v(m(e)("docs.layouts.bipartite.complexity")),1),g("p",e8,v(m(e)("docs.layouts.bipartite.bestFor")),1)]),g("div",t8,[g("h3",n8,v(m(e)("docs.layouts.random.title")),1),g("p",r8,v(m(e)("docs.layouts.random.description")),1),g("p",i8,v(m(e)("docs.layouts.random.complexity")),1),g("p",s8,v(m(e)("docs.layouts.random.bestFor")),1)])]),g("div",o8,[g("h4",a8,v(m(e)("docs.layouts.usage")),1),g("p",l8,v(m(e)("docs.layouts.usageDescription")),1),Ee(vt,{code:y6,language:"javascript"})])]),g("section",c8,[g("h2",d8,[r[46]||(r[46]=g("span",{class:"docs-section-header-icon"},"",-1)),g("span",null,v(m(e)("docs.community.title")),1)]),g("p",u8,v(m(e)("docs.community.description")),1),g("div",h8,[g("h3",f8,v(m(e)("docs.community.mainClass.title")),1),g("p",g8,v(m(e)("docs.community.mainClass.description")),1),g("h4",p8,v(m(e)("docs.community.mainClass.constructor")),1),r[47]||(r[47]=g("div",{class:"docs-code-block"},[g("code",{class:"docs-code-block-text"},"new CommunityDetection(graph)")],-1)),r[48]||(r[48]=g("h4",{class:"docs-subsection-title"},"Methods",-1)),g("div",m8,[g("div",y8,[g("code",v8,v(m(e)("docs.community.mainClass.methods.detectCommunities.name")),1),g("p",_8,v(m(e)("docs.community.mainClass.methods.detectCommunities.description")),1),g("p",b8,v(m(e)("docs.community.mainClass.methods.detectCommunities.returns")),1)]),g("div",w8,[g("code",E8,v(m(e)("docs.community.mainClass.methods.calculateModularity.name")),1),g("p",k8,v(m(e)("docs.community.mainClass.methods.calculateModularity.description")),1),g("p",A8,v(m(e)("docs.community.mainClass.methods.calculateModularity.returns")),1)])]),r[49]||(r[49]=g("h4",{class:"docs-subsection-title"},"Static Methods",-1)),g("div",x8,[g("div",C8,[g("code",S8,v(m(e)("docs.community.mainClass.staticMethods.detect.name")),1),g("p",T8,v(m(e)("docs.community.mainClass.staticMethods.detect.description")),1),g("p",N8,v(m(e)("docs.community.mainClass.staticMethods.detect.returns")),1)]),g("div",R8,[g("code",L8,v(m(e)("docs.community.mainClass.staticMethods.getNodesInCommunity.name")),1),g("p",I8,v(m(e)("docs.community.mainClass.staticMethods.getNodesInCommunity.description")),1)]),g("div",D8,[g("code",P8,v(m(e)("docs.community.mainClass.staticMethods.getCommunityGroups.name")),1),g("p",G8,v(m(e)("docs.community.mainClass.staticMethods.getCommunityGroups.description")),1)])])]),g("div",M8,[g("h3",O8,v(m(e)("docs.community.louvain.title")),1),g("p",F8,v(m(e)("docs.community.louvain.description")),1),g("p",$8,v(m(e)("docs.community.louvain.complexity")),1),g("p",z8,v(m(e)("docs.community.louvain.bestFor")),1),g("h4",B8,v(m(e)("docs.community.louvain.constructor")),1),g("div",V8,[r[52]||(r[52]=g("h5",{class:"docs-options-title"},"Options:",-1)),g("ul",U8,[g("li",null,[r[50]||(r[50]=g("code",{class:"docs-options-code"},"resolution:",-1)),Se(" "+v(m(e)("docs.community.louvain.options.resolution")),1)]),g("li",null,[r[51]||(r[51]=g("code",{class:"docs-options-code"},"maxIterations:",-1)),Se(" "+v(m(e)("docs.community.louvain.options.maxIterations")),1)])])]),Ee(vt,{code:v6,language:"javascript"})]),g("div",j8,[g("h3",H8,v(m(e)("docs.community.result.title")),1),g("p",W8,v(m(e)("docs.community.result.description")),1),g("div",q8,[r[58]||(r[58]=g("h5",{class:"docs-options-title"},"Properties:",-1)),g("ul",K8,[g("li",null,[r[53]||(r[53]=g("code",{class:"docs-options-code"},"communities:",-1)),Se(" "+v(m(e)("docs.community.result.properties.communities")),1)]),g("li",null,[r[54]||(r[54]=g("code",{class:"docs-options-code"},"modularity:",-1)),Se(" "+v(m(e)("docs.community.result.properties.modularity")),1)]),g("li",null,[r[55]||(r[55]=g("code",{class:"docs-options-code"},"numCommunities:",-1)),Se(" "+v(m(e)("docs.community.result.properties.numCommunities")),1)]),g("li",null,[r[56]||(r[56]=g("code",{class:"docs-options-code"},"algorithm:",-1)),Se(" "+v(m(e)("docs.community.result.properties.algorithm")),1)]),g("li",null,[r[57]||(r[57]=g("code",{class:"docs-options-code"},"metadata:",-1)),Se(" "+v(m(e)("docs.community.result.properties.metadata")),1)])])])])]),g("section",X8,[g("h2",Z8,[r[59]||(r[59]=g("span",{class:"docs-section-header-icon"},"",-1)),g("span",null,v(m(e)("docs.examples.title")),1)]),g("p",Y8,v(m(e)("docs.examples.description")),1),g("div",J8,[g("h3",Q8,v(m(e)("docs.examples.basic.title")),1),g("p",e6,v(m(e)("docs.examples.basic.description")),1),Ee(vt,{code:_6,language:"javascript"})]),g("div",t6,[g("h3",n6,v(m(e)("docs.examples.csv.title")),1),g("p",r6,v(m(e)("docs.examples.csv.description")),1),Ee(vt,{code:b6,language:"javascript"})]),g("div",i6,[g("h3",s6,v(m(e)("docs.examples.complete.title")),1),g("p",o6,v(m(e)("docs.examples.complete.description")),1),Ee(vt,{code:w6,language:"javascript"})])]),r[60]||(r[60]=g("div",{class:"docs-footer"},[g("p",{class:"text-secondary"},[Se("  For more details, check out the "),g("a",{href:"https://github.com/guinetik/graph-js",class:"docs-footer-link",target:"_blank"}," GitHub repository ")])],-1))]))}},k6=[{path:"/",name:"home",component:_A},{path:"/showcase",name:"showcase",component:GP},{path:"/explorer",name:"explorer",component:cO},{path:"/family",name:"family",component:rF},{path:"/degrees",name:"degrees",component:P4},{path:"/docs",name:"docs",component:E6}],cv=Ub({history:wb(),routes:k6});cv.afterEach(t=>{const{trackPageView:e}=Ga(),n=AD[t.name]||t.name||"Unknown";e(t.fullPath,n)});const A6=Ze({prefix:"App",level:"info"});CD();const dv=G_(Pw);dv.use(cv);dv.mount("#app");A6.info("Vue app started");export{N6 as B,B6 as D,R6 as F,D6 as J,P6 as K,L6 as M,z6 as Q,O6 as U,M6 as V,G6 as Y,F6 as _,$6 as q,I6 as z};
