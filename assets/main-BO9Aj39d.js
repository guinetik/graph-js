const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/angular-html-CU67Zn6k.js","assets/html-GMplVEZG.js","assets/javascript-wDzz0qaB.js","assets/css-DPfMkruS.js","assets/angular-ts-BwZT4LLn.js","assets/scss-OYdSNvt2.js","assets/apl-dKokRX4l.js","assets/xml-sdJ4AIDG.js","assets/java-CylS5w8V.js","assets/json-Cp-IABpG.js","assets/astro-CbQHKStN.js","assets/typescript-BPQ3VLAy.js","assets/postcss-CXtECtnM.js","assets/tsx-COt5Ahok.js","assets/blade-DVc8C-J4.js","assets/html-derivative-BFtXZ54Q.js","assets/sql-BLtJtn59.js","assets/bsl-BO_Y6i37.js","assets/sdbl-DVxCFoDh.js","assets/cairo-KRGpt6FW.js","assets/python-B6aJPvgy.js","assets/cobol-nwyudZeR.js","assets/coffee-Ch7k5sss.js","assets/cpp-CofmeUqb.js","assets/regexp-CDVJQ6XC.js","assets/glsl-DplSGwfg.js","assets/c-BIGW1oBm.js","assets/crystal-tKQVLTB8.js","assets/shellscript-Yzrsuije.js","assets/edge-BkV0erSs.js","assets/elixir-CDX3lj18.js","assets/elm-DbKCFpqz.js","assets/erb-BOJIQeun.js","assets/ruby-BvKwtOVI.js","assets/haml-B8DHNrY2.js","assets/graphql-ChdNCCLP.js","assets/jsx-g9-lgVsj.js","assets/lua-BbnMAYS6.js","assets/yaml-Buea-lGh.js","assets/erlang-DsQrWhSR.js","assets/markdown-Cvjx9yec.js","assets/fortran-fixed-form-BZjJHVRy.js","assets/fortran-free-form-D22FLkUw.js","assets/fsharp-CXgrBDvD.js","assets/gdresource-B7Tvp0Sc.js","assets/gdshader-DkwncUOv.js","assets/gdscript-DTMYz4Jt.js","assets/git-commit-F4YmCXRG.js","assets/diff-D97Zzqfu.js","assets/git-rebase-r7XF79zn.js","assets/glimmer-js-Rg0-pVw9.js","assets/glimmer-ts-U6CK756n.js","assets/hack-CaT9iCJl.js","assets/handlebars-BL8al0AC.js","assets/http-jrhK8wxY.js","assets/hurl-irOxFIW8.js","assets/csv-fuZLfV_i.js","assets/hxml-Bvhsp5Yf.js","assets/haxe-CzTSHFRz.js","assets/jinja-4LBKfQ-Z.js","assets/jison-wvAkD_A8.js","assets/julia-C8NyazO9.js","assets/r-DiinP2Uv.js","assets/latex-BdAV_C_H.js","assets/tex-CxkMU7Pf.js","assets/liquid-DYVedYrR.js","assets/marko-CPi9NSCl.js","assets/less-B1dDrJ26.js","assets/mdc-DUICxH0z.js","assets/nginx-DknmC5AR.js","assets/nim-CVrawwO9.js","assets/perl-C0TMdlhV.js","assets/php-CDn_0X-4.js","assets/pug-CGlum2m_.js","assets/qml-3beO22l8.js","assets/razor-CE9lU5zL.js","assets/csharp-K5feNrxe.js","assets/rst-B0xPkSld.js","assets/cmake-D1j8_8rp.js","assets/sas-cz2c8ADy.js","assets/shaderlab-Dg9Lc6iA.js","assets/hlsl-D3lLCCz7.js","assets/shellsession-BADoaaVG.js","assets/soy-Brmx7dQM.js","assets/sparql-rVzFXLq3.js","assets/turtle-BsS91CYL.js","assets/stata-BH5u7GGu.js","assets/svelte-3Dk4HxPD.js","assets/templ-W15q3VgB.js","assets/go-Dn2_MT6a.js","assets/ts-tags-zn1MmPIZ.js","assets/twig-CO9l9SDP.js","assets/vue-DnHKYNfI.js","assets/vue-html-CChd_i61.js","assets/vue-vine-8moa0y9V.js","assets/stylus-BEDo0Tqx.js","assets/xsl-CtQFsRM5.js"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function Oc(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const Ve={},Xr=[],vn=()=>{},qf=()=>!1,Jo=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Fc=t=>t.startsWith("onUpdate:"),dt=Object.assign,$c=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},dv=Object.prototype.hasOwnProperty,$e=(t,e)=>dv.call(t,e),Se=Array.isArray,Zr=t=>ws(t)==="[object Map]",Qo=t=>ws(t)==="[object Set]",Bd=t=>ws(t)==="[object Date]",Le=t=>typeof t=="function",qe=t=>typeof t=="string",on=t=>typeof t=="symbol",ze=t=>t!==null&&typeof t=="object",Kf=t=>(ze(t)||Le(t))&&Le(t.then)&&Le(t.catch),Xf=Object.prototype.toString,ws=t=>Xf.call(t),uv=t=>ws(t).slice(8,-1),Zf=t=>ws(t)==="[object Object]",zc=t=>qe(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Wi=Oc(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),ea=t=>{const e=Object.create(null);return(n=>e[n]||(e[n]=t(n)))},hv=/-\w/g,Xt=ea(t=>t.replace(hv,e=>e.slice(1).toUpperCase())),fv=/\B([A-Z])/g,hr=ea(t=>t.replace(fv,"-$1").toLowerCase()),ta=ea(t=>t.charAt(0).toUpperCase()+t.slice(1)),Ra=ea(t=>t?`on${ta(t)}`:""),lr=(t,e)=>!Object.is(t,e),ao=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},Yf=(t,e,n,r=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:r,value:n})},na=t=>{const e=parseFloat(t);return isNaN(e)?t:e},pv=t=>{const e=qe(t)?Number(t):NaN;return isNaN(e)?t:e};let Vd;const ra=()=>Vd||(Vd=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Es(t){if(Se(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],i=qe(r)?vv(r):Es(r);if(i)for(const s in i)e[s]=i[s]}return e}else if(qe(t)||ze(t))return t}const gv=/;(?![^(]*\))/g,mv=/:([^]+)/,yv=/\/\*[^]*?\*\//g;function vv(t){const e={};return t.replace(yv,"").split(gv).forEach(n=>{if(n){const r=n.split(mv);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function yt(t){let e="";if(qe(t))e=t;else if(Se(t))for(let n=0;n<t.length;n++){const r=yt(t[n]);r&&(e+=r+" ")}else if(ze(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const _v="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",bv=Oc(_v);function Jf(t){return!!t||t===""}function wv(t,e){if(t.length!==e.length)return!1;let n=!0;for(let r=0;n&&r<t.length;r++)n=ai(t[r],e[r]);return n}function ai(t,e){if(t===e)return!0;let n=Bd(t),r=Bd(e);if(n||r)return n&&r?t.getTime()===e.getTime():!1;if(n=on(t),r=on(e),n||r)return t===e;if(n=Se(t),r=Se(e),n||r)return n&&r?wv(t,e):!1;if(n=ze(t),r=ze(e),n||r){if(!n||!r)return!1;const i=Object.keys(t).length,s=Object.keys(e).length;if(i!==s)return!1;for(const o in t){const a=t.hasOwnProperty(o),l=e.hasOwnProperty(o);if(a&&!l||!a&&l||!ai(t[o],e[o]))return!1}}return String(t)===String(e)}function Ev(t,e){return t.findIndex(n=>ai(n,e))}const Qf=t=>!!(t&&t.__v_isRef===!0),_=t=>qe(t)?t:t==null?"":Se(t)||ze(t)&&(t.toString===Xf||!Le(t.toString))?Qf(t)?_(t.value):JSON.stringify(t,ep,2):String(t),ep=(t,e)=>Qf(e)?ep(t,e.value):Zr(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,i],s)=>(n[Na(r,s)+" =>"]=i,n),{})}:Qo(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>Na(n))}:on(e)?Na(e):ze(e)&&!Se(e)&&!Zf(e)?String(e):e,Na=(t,e="")=>{var n;return on(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};let Dt;class Av{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Dt,!e&&Dt&&(this.index=(Dt.scopes||(Dt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=Dt;try{return Dt=this,e()}finally{Dt=n}}}on(){++this._on===1&&(this.prevScope=Dt,Dt=this)}off(){this._on>0&&--this._on===0&&(Dt=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function kv(){return Dt}let je;const La=new WeakSet;class tp{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Dt&&Dt.active&&Dt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,La.has(this)&&(La.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||rp(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Ud(this),ip(this);const e=je,n=sn;je=this,sn=!0;try{return this.fn()}finally{sp(this),je=e,sn=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)Uc(e);this.deps=this.depsTail=void 0,Ud(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?La.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Cl(this)&&this.run()}get dirty(){return Cl(this)}}let np=0,qi,Ki;function rp(t,e=!1){if(t.flags|=8,e){t.next=Ki,Ki=t;return}t.next=qi,qi=t}function Bc(){np++}function Vc(){if(--np>0)return;if(Ki){let e=Ki;for(Ki=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;qi;){let e=qi;for(qi=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){t||(t=r)}e=n}}if(t)throw t}function ip(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function sp(t){let e,n=t.depsTail,r=n;for(;r;){const i=r.prevDep;r.version===-1?(r===n&&(n=i),Uc(r),xv(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=i}t.deps=e,t.depsTail=n}function Cl(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(op(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function op(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===ns)||(t.globalVersion=ns,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!Cl(t))))return;t.flags|=2;const e=t.dep,n=je,r=sn;je=t,sn=!0;try{ip(t);const i=t.fn(t._value);(e.version===0||lr(i,t._value))&&(t.flags|=128,t._value=i,e.version++)}catch(i){throw e.version++,i}finally{je=n,sn=r,sp(t),t.flags&=-3}}function Uc(t,e=!1){const{dep:n,prevSub:r,nextSub:i}=t;if(r&&(r.nextSub=i,t.prevSub=void 0),i&&(i.prevSub=r,t.nextSub=void 0),n.subs===t&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let s=n.computed.deps;s;s=s.nextDep)Uc(s,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function xv(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let sn=!0;const ap=[];function Un(){ap.push(sn),sn=!1}function jn(){const t=ap.pop();sn=t===void 0?!0:t}function Ud(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=je;je=void 0;try{e()}finally{je=n}}}let ns=0;class Cv{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class jc{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!je||!sn||je===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==je)n=this.activeLink=new Cv(je,this),je.deps?(n.prevDep=je.depsTail,je.depsTail.nextDep=n,je.depsTail=n):je.deps=je.depsTail=n,lp(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=je.depsTail,n.nextDep=void 0,je.depsTail.nextDep=n,je.depsTail=n,je.deps===n&&(je.deps=r)}return n}trigger(e){this.version++,ns++,this.notify(e)}notify(e){Bc();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{Vc()}}}function lp(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)lp(r)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const Sl=new WeakMap,Tr=Symbol(""),Tl=Symbol(""),rs=Symbol("");function vt(t,e,n){if(sn&&je){let r=Sl.get(t);r||Sl.set(t,r=new Map);let i=r.get(n);i||(r.set(n,i=new jc),i.map=r,i.key=n),i.track()}}function On(t,e,n,r,i,s){const o=Sl.get(t);if(!o){ns++;return}const a=l=>{l&&l.trigger()};if(Bc(),e==="clear")o.forEach(a);else{const l=Se(t),c=l&&zc(n);if(l&&n==="length"){const d=Number(r);o.forEach((u,h)=>{(h==="length"||h===rs||!on(h)&&h>=d)&&a(u)})}else switch((n!==void 0||o.has(void 0))&&a(o.get(n)),c&&a(o.get(rs)),e){case"add":l?c&&a(o.get("length")):(a(o.get(Tr)),Zr(t)&&a(o.get(Tl)));break;case"delete":l||(a(o.get(Tr)),Zr(t)&&a(o.get(Tl)));break;case"set":Zr(t)&&a(o.get(Tr));break}}Vc()}function Fr(t){const e=Me(t);return e===t?e:(vt(e,"iterate",rs),qt(t)?e:e.map(an))}function ia(t){return vt(t=Me(t),"iterate",rs),t}function tr(t,e){return Hn(t)?Rr(t)?li(an(e)):li(e):an(e)}const Sv={__proto__:null,[Symbol.iterator](){return Ia(this,Symbol.iterator,t=>tr(this,t))},concat(...t){return Fr(this).concat(...t.map(e=>Se(e)?Fr(e):e))},entries(){return Ia(this,"entries",t=>(t[1]=tr(this,t[1]),t))},every(t,e){return Cn(this,"every",t,e,void 0,arguments)},filter(t,e){return Cn(this,"filter",t,e,n=>n.map(r=>tr(this,r)),arguments)},find(t,e){return Cn(this,"find",t,e,n=>tr(this,n),arguments)},findIndex(t,e){return Cn(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return Cn(this,"findLast",t,e,n=>tr(this,n),arguments)},findLastIndex(t,e){return Cn(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return Cn(this,"forEach",t,e,void 0,arguments)},includes(...t){return Da(this,"includes",t)},indexOf(...t){return Da(this,"indexOf",t)},join(t){return Fr(this).join(t)},lastIndexOf(...t){return Da(this,"lastIndexOf",t)},map(t,e){return Cn(this,"map",t,e,void 0,arguments)},pop(){return xi(this,"pop")},push(...t){return xi(this,"push",t)},reduce(t,...e){return jd(this,"reduce",t,e)},reduceRight(t,...e){return jd(this,"reduceRight",t,e)},shift(){return xi(this,"shift")},some(t,e){return Cn(this,"some",t,e,void 0,arguments)},splice(...t){return xi(this,"splice",t)},toReversed(){return Fr(this).toReversed()},toSorted(t){return Fr(this).toSorted(t)},toSpliced(...t){return Fr(this).toSpliced(...t)},unshift(...t){return xi(this,"unshift",t)},values(){return Ia(this,"values",t=>tr(this,t))}};function Ia(t,e,n){const r=ia(t),i=r[e]();return r!==t&&!qt(t)&&(i._next=i.next,i.next=()=>{const s=i._next();return s.done||(s.value=n(s.value)),s}),i}const Tv=Array.prototype;function Cn(t,e,n,r,i,s){const o=ia(t),a=o!==t&&!qt(t),l=o[e];if(l!==Tv[e]){const u=l.apply(t,s);return a?an(u):u}let c=n;o!==t&&(a?c=function(u,h){return n.call(this,tr(t,u),h,t)}:n.length>2&&(c=function(u,h){return n.call(this,u,h,t)}));const d=l.call(o,c,r);return a&&i?i(d):d}function jd(t,e,n,r){const i=ia(t);let s=n;return i!==t&&(qt(t)?n.length>3&&(s=function(o,a,l){return n.call(this,o,a,l,t)}):s=function(o,a,l){return n.call(this,o,tr(t,a),l,t)}),i[e](s,...r)}function Da(t,e,n){const r=Me(t);vt(r,"iterate",rs);const i=r[e](...n);return(i===-1||i===!1)&&qc(n[0])?(n[0]=Me(n[0]),r[e](...n)):i}function xi(t,e,n=[]){Un(),Bc();const r=Me(t)[e].apply(t,n);return Vc(),jn(),r}const Rv=Oc("__proto__,__v_isRef,__isVue"),cp=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(on));function Nv(t){on(t)||(t=String(t));const e=Me(this);return vt(e,"has",t),e.hasOwnProperty(t)}class dp{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,r){if(n==="__v_skip")return e.__v_skip;const i=this._isReadonly,s=this._isShallow;if(n==="__v_isReactive")return!i;if(n==="__v_isReadonly")return i;if(n==="__v_isShallow")return s;if(n==="__v_raw")return r===(i?s?zv:pp:s?fp:hp).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const o=Se(e);if(!i){let l;if(o&&(l=Sv[n]))return l;if(n==="hasOwnProperty")return Nv}const a=Reflect.get(e,n,ct(e)?e:r);if((on(n)?cp.has(n):Rv(n))||(i||vt(e,"get",n),s))return a;if(ct(a)){const l=o&&zc(n)?a:a.value;return i&&ze(l)?Nl(l):l}return ze(a)?i?Nl(a):As(a):a}}class up extends dp{constructor(e=!1){super(!1,e)}set(e,n,r,i){let s=e[n];const o=Se(e)&&zc(n);if(!this._isShallow){const c=Hn(s);if(!qt(r)&&!Hn(r)&&(s=Me(s),r=Me(r)),!o&&ct(s)&&!ct(r))return c||(s.value=r),!0}const a=o?Number(n)<e.length:$e(e,n),l=Reflect.set(e,n,r,ct(e)?e:i);return e===Me(i)&&(a?lr(r,s)&&On(e,"set",n,r):On(e,"add",n,r)),l}deleteProperty(e,n){const r=$e(e,n);e[n];const i=Reflect.deleteProperty(e,n);return i&&r&&On(e,"delete",n,void 0),i}has(e,n){const r=Reflect.has(e,n);return(!on(n)||!cp.has(n))&&vt(e,"has",n),r}ownKeys(e){return vt(e,"iterate",Se(e)?"length":Tr),Reflect.ownKeys(e)}}class Lv extends dp{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const Iv=new up,Dv=new Lv,Pv=new up(!0);const Rl=t=>t,Ps=t=>Reflect.getPrototypeOf(t);function Gv(t,e,n){return function(...r){const i=this.__v_raw,s=Me(i),o=Zr(s),a=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,c=i[t](...r),d=n?Rl:e?li:an;return!e&&vt(s,"iterate",l?Tl:Tr),{next(){const{value:u,done:h}=c.next();return h?{value:u,done:h}:{value:a?[d(u[0]),d(u[1])]:d(u),done:h}},[Symbol.iterator](){return this}}}}function Gs(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function Mv(t,e){const n={get(i){const s=this.__v_raw,o=Me(s),a=Me(i);t||(lr(i,a)&&vt(o,"get",i),vt(o,"get",a));const{has:l}=Ps(o),c=e?Rl:t?li:an;if(l.call(o,i))return c(s.get(i));if(l.call(o,a))return c(s.get(a));s!==o&&s.get(i)},get size(){const i=this.__v_raw;return!t&&vt(Me(i),"iterate",Tr),i.size},has(i){const s=this.__v_raw,o=Me(s),a=Me(i);return t||(lr(i,a)&&vt(o,"has",i),vt(o,"has",a)),i===a?s.has(i):s.has(i)||s.has(a)},forEach(i,s){const o=this,a=o.__v_raw,l=Me(a),c=e?Rl:t?li:an;return!t&&vt(l,"iterate",Tr),a.forEach((d,u)=>i.call(s,c(d),c(u),o))}};return dt(n,t?{add:Gs("add"),set:Gs("set"),delete:Gs("delete"),clear:Gs("clear")}:{add(i){!e&&!qt(i)&&!Hn(i)&&(i=Me(i));const s=Me(this);return Ps(s).has.call(s,i)||(s.add(i),On(s,"add",i,i)),this},set(i,s){!e&&!qt(s)&&!Hn(s)&&(s=Me(s));const o=Me(this),{has:a,get:l}=Ps(o);let c=a.call(o,i);c||(i=Me(i),c=a.call(o,i));const d=l.call(o,i);return o.set(i,s),c?lr(s,d)&&On(o,"set",i,s):On(o,"add",i,s),this},delete(i){const s=Me(this),{has:o,get:a}=Ps(s);let l=o.call(s,i);l||(i=Me(i),l=o.call(s,i)),a&&a.call(s,i);const c=s.delete(i);return l&&On(s,"delete",i,void 0),c},clear(){const i=Me(this),s=i.size!==0,o=i.clear();return s&&On(i,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(i=>{n[i]=Gv(i,t,e)}),n}function Hc(t,e){const n=Mv(t,e);return(r,i,s)=>i==="__v_isReactive"?!t:i==="__v_isReadonly"?t:i==="__v_raw"?r:Reflect.get($e(n,i)&&i in r?n:r,i,s)}const Ov={get:Hc(!1,!1)},Fv={get:Hc(!1,!0)},$v={get:Hc(!0,!1)};const hp=new WeakMap,fp=new WeakMap,pp=new WeakMap,zv=new WeakMap;function Bv(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Vv(t){return t.__v_skip||!Object.isExtensible(t)?0:Bv(uv(t))}function As(t){return Hn(t)?t:Wc(t,!1,Iv,Ov,hp)}function gp(t){return Wc(t,!1,Pv,Fv,fp)}function Nl(t){return Wc(t,!0,Dv,$v,pp)}function Wc(t,e,n,r,i){if(!ze(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const s=Vv(t);if(s===0)return t;const o=i.get(t);if(o)return o;const a=new Proxy(t,s===2?r:n);return i.set(t,a),a}function Rr(t){return Hn(t)?Rr(t.__v_raw):!!(t&&t.__v_isReactive)}function Hn(t){return!!(t&&t.__v_isReadonly)}function qt(t){return!!(t&&t.__v_isShallow)}function qc(t){return t?!!t.__v_raw:!1}function Me(t){const e=t&&t.__v_raw;return e?Me(e):t}function Uv(t){return!$e(t,"__v_skip")&&Object.isExtensible(t)&&Yf(t,"__v_skip",!0),t}const an=t=>ze(t)?As(t):t,li=t=>ze(t)?Nl(t):t;function ct(t){return t?t.__v_isRef===!0:!1}function ge(t){return mp(t,!1)}function jv(t){return mp(t,!0)}function mp(t,e){return ct(t)?t:new Hv(t,e)}class Hv{constructor(e,n){this.dep=new jc,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:Me(e),this._value=n?e:an(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,r=this.__v_isShallow||qt(e)||Hn(e);e=r?e:Me(e),lr(e,n)&&(this._rawValue=e,this._value=r?e:an(e),this.dep.trigger())}}function m(t){return ct(t)?t.value:t}const Wv={get:(t,e,n)=>e==="__v_raw"?t:m(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const i=t[e];return ct(i)&&!ct(n)?(i.value=n,!0):Reflect.set(t,e,n,r)}};function yp(t){return Rr(t)?t:new Proxy(t,Wv)}class qv{constructor(e,n,r){this.fn=e,this.setter=n,this._value=void 0,this.dep=new jc(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=ns-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&je!==this)return rp(this,!0),!0}get value(){const e=this.dep.track();return op(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function Kv(t,e,n=!1){let r,i;return Le(t)?r=t:(r=t.get,i=t.set),new qv(r,i,n)}const Ms={},Eo=new WeakMap;let br;function Xv(t,e=!1,n=br){if(n){let r=Eo.get(n);r||Eo.set(n,r=[]),r.push(t)}}function Zv(t,e,n=Ve){const{immediate:r,deep:i,once:s,scheduler:o,augmentJob:a,call:l}=n,c=v=>i?v:qt(v)||i===!1||i===0?Fn(v,1):Fn(v);let d,u,h,f,g=!1,y=!1;if(ct(t)?(u=()=>t.value,g=qt(t)):Rr(t)?(u=()=>c(t),g=!0):Se(t)?(y=!0,g=t.some(v=>Rr(v)||qt(v)),u=()=>t.map(v=>{if(ct(v))return v.value;if(Rr(v))return c(v);if(Le(v))return l?l(v,2):v()})):Le(t)?e?u=l?()=>l(t,2):t:u=()=>{if(h){Un();try{h()}finally{jn()}}const v=br;br=d;try{return l?l(t,3,[f]):t(f)}finally{br=v}}:u=vn,e&&i){const v=u,S=i===!0?1/0:i;u=()=>Fn(v(),S)}const w=kv(),b=()=>{d.stop(),w&&w.active&&$c(w.effects,d)};if(s&&e){const v=e;e=(...S)=>{v(...S),b()}}let E=y?new Array(t.length).fill(Ms):Ms;const A=v=>{if(!(!(d.flags&1)||!d.dirty&&!v))if(e){const S=d.run();if(i||g||(y?S.some((L,G)=>lr(L,E[G])):lr(S,E))){h&&h();const L=br;br=d;try{const G=[S,E===Ms?void 0:y&&E[0]===Ms?[]:E,f];E=S,l?l(e,3,G):e(...G)}finally{br=L}}}else d.run()};return a&&a(A),d=new tp(u),d.scheduler=o?()=>o(A,!1):A,f=v=>Xv(v,!1,d),h=d.onStop=()=>{const v=Eo.get(d);if(v){if(l)l(v,4);else for(const S of v)S();Eo.delete(d)}},e?r?A(!0):E=d.run():o?o(A.bind(null,!0),!0):d.run(),b.pause=d.pause.bind(d),b.resume=d.resume.bind(d),b.stop=b,b}function Fn(t,e=1/0,n){if(e<=0||!ze(t)||t.__v_skip||(n=n||new Map,(n.get(t)||0)>=e))return t;if(n.set(t,e),e--,ct(t))Fn(t.value,e,n);else if(Se(t))for(let r=0;r<t.length;r++)Fn(t[r],e,n);else if(Qo(t)||Zr(t))t.forEach(r=>{Fn(r,e,n)});else if(Zf(t)){for(const r in t)Fn(t[r],e,n);for(const r of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,r)&&Fn(t[r],e,n)}return t}function ks(t,e,n,r){try{return r?t(...r):t()}catch(i){sa(i,e,n)}}function ln(t,e,n,r){if(Le(t)){const i=ks(t,e,n,r);return i&&Kf(i)&&i.catch(s=>{sa(s,e,n)}),i}if(Se(t)){const i=[];for(let s=0;s<t.length;s++)i.push(ln(t[s],e,n,r));return i}}function sa(t,e,n,r=!0){const i=e?e.vnode:null,{errorHandler:s,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||Ve;if(e){let a=e.parent;const l=e.proxy,c=`https://vuejs.org/error-reference/#runtime-${n}`;for(;a;){const d=a.ec;if(d){for(let u=0;u<d.length;u++)if(d[u](t,l,c)===!1)return}a=a.parent}if(s){Un(),ks(s,null,10,[t,l,c]),jn();return}}Yv(t,n,i,r,o)}function Yv(t,e,n,r=!0,i=!1){if(i)throw t;console.error(t)}const Tt=[];let gn=-1;const Yr=[];let nr=null,Ur=0;const vp=Promise.resolve();let Ao=null;function Ir(t){const e=Ao||vp;return t?e.then(this?t.bind(this):t):e}function Jv(t){let e=gn+1,n=Tt.length;for(;e<n;){const r=e+n>>>1,i=Tt[r],s=is(i);s<t||s===t&&i.flags&2?e=r+1:n=r}return e}function Kc(t){if(!(t.flags&1)){const e=is(t),n=Tt[Tt.length-1];!n||!(t.flags&2)&&e>=is(n)?Tt.push(t):Tt.splice(Jv(e),0,t),t.flags|=1,_p()}}function _p(){Ao||(Ao=vp.then(wp))}function Qv(t){Se(t)?Yr.push(...t):nr&&t.id===-1?nr.splice(Ur+1,0,t):t.flags&1||(Yr.push(t),t.flags|=1),_p()}function Hd(t,e,n=gn+1){for(;n<Tt.length;n++){const r=Tt[n];if(r&&r.flags&2){if(t&&r.id!==t.uid)continue;Tt.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function bp(t){if(Yr.length){const e=[...new Set(Yr)].sort((n,r)=>is(n)-is(r));if(Yr.length=0,nr){nr.push(...e);return}for(nr=e,Ur=0;Ur<nr.length;Ur++){const n=nr[Ur];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}nr=null,Ur=0}}const is=t=>t.id==null?t.flags&2?-1:1/0:t.id;function wp(t){try{for(gn=0;gn<Tt.length;gn++){const e=Tt[gn];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),ks(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;gn<Tt.length;gn++){const e=Tt[gn];e&&(e.flags&=-2)}gn=-1,Tt.length=0,bp(),Ao=null,(Tt.length||Yr.length)&&wp()}}let ht=null,Ep=null;function ko(t){const e=ht;return ht=t,Ep=t&&t.type.__scopeId||null,e}function Xe(t,e=ht,n){if(!e||t._n)return t;const r=(...i)=>{r._d&&So(-1);const s=ko(e);let o;try{o=t(...i)}finally{ko(s),r._d&&So(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function Rt(t,e){if(ht===null)return t;const n=da(ht),r=t.dirs||(t.dirs=[]);for(let i=0;i<e.length;i++){let[s,o,a,l=Ve]=e[i];s&&(Le(s)&&(s={mounted:s,updated:s}),s.deep&&Fn(o),r.push({dir:s,instance:n,value:o,oldValue:void 0,arg:a,modifiers:l}))}return t}function fr(t,e,n,r){const i=t.dirs,s=e&&e.dirs;for(let o=0;o<i.length;o++){const a=i[o];s&&(a.oldValue=s[o].value);let l=a.dir[r];l&&(Un(),ln(l,n,8,[t.el,a,t,e]),jn())}}const Ap=Symbol("_vte"),kp=t=>t.__isTeleport,Xi=t=>t&&(t.disabled||t.disabled===""),Wd=t=>t&&(t.defer||t.defer===""),qd=t=>typeof SVGElement<"u"&&t instanceof SVGElement,Kd=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,Ll=(t,e)=>{const n=t&&t.to;return qe(n)?e?e(n):null:n},xp={name:"Teleport",__isTeleport:!0,process(t,e,n,r,i,s,o,a,l,c){const{mc:d,pc:u,pbc:h,o:{insert:f,querySelector:g,createText:y,createComment:w}}=c,b=Xi(e.props);let{shapeFlag:E,children:A,dynamicChildren:v}=e;if(t==null){const S=e.el=y(""),L=e.anchor=y("");f(S,n,r),f(L,n,r);const G=(F,$)=>{E&16&&d(A,F,$,i,s,o,a,l)},V=()=>{const F=e.target=Ll(e.props,g),$=Cp(F,e,y,f);F&&(o!=="svg"&&qd(F)?o="svg":o!=="mathml"&&Kd(F)&&(o="mathml"),i&&i.isCE&&(i.ce._teleportTargets||(i.ce._teleportTargets=new Set)).add(F),b||(G(F,$),lo(e,!1)))};b&&(G(n,L),lo(e,!0)),Wd(e.props)?(e.el.__isMounted=!1,Ct(()=>{V(),delete e.el.__isMounted},s)):V()}else{if(Wd(e.props)&&t.el.__isMounted===!1){Ct(()=>{xp.process(t,e,n,r,i,s,o,a,l,c)},s);return}e.el=t.el,e.targetStart=t.targetStart;const S=e.anchor=t.anchor,L=e.target=t.target,G=e.targetAnchor=t.targetAnchor,V=Xi(t.props),F=V?n:L,$=V?S:G;if(o==="svg"||qd(L)?o="svg":(o==="mathml"||Kd(L))&&(o="mathml"),v?(h(t.dynamicChildren,v,F,i,s,o,a),Yc(t,e,!0)):l||u(t,e,F,$,i,s,o,a,!1),b)V?e.props&&t.props&&e.props.to!==t.props.to&&(e.props.to=t.props.to):Os(e,n,S,c,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const H=e.target=Ll(e.props,g);H&&Os(e,H,null,c,0)}else V&&Os(e,L,G,c,1);lo(e,b)}},remove(t,e,n,{um:r,o:{remove:i}},s){const{shapeFlag:o,children:a,anchor:l,targetStart:c,targetAnchor:d,target:u,props:h}=t;if(u&&(i(c),i(d)),s&&i(l),o&16){const f=s||!Xi(h);for(let g=0;g<a.length;g++){const y=a[g];r(y,e,n,f,!!y.dynamicChildren)}}},move:Os,hydrate:e0};function Os(t,e,n,{o:{insert:r},m:i},s=2){s===0&&r(t.targetAnchor,e,n);const{el:o,anchor:a,shapeFlag:l,children:c,props:d}=t,u=s===2;if(u&&r(o,e,n),(!u||Xi(d))&&l&16)for(let h=0;h<c.length;h++)i(c[h],e,n,2);u&&r(a,e,n)}function e0(t,e,n,r,i,s,{o:{nextSibling:o,parentNode:a,querySelector:l,insert:c,createText:d}},u){function h(y,w,b,E){w.anchor=u(o(y),w,a(y),n,r,i,s),w.targetStart=b,w.targetAnchor=E}const f=e.target=Ll(e.props,l),g=Xi(e.props);if(f){const y=f._lpa||f.firstChild;if(e.shapeFlag&16)if(g)h(t,e,y,y&&o(y));else{e.anchor=o(t);let w=y;for(;w;){if(w&&w.nodeType===8){if(w.data==="teleport start anchor")e.targetStart=w;else if(w.data==="teleport anchor"){e.targetAnchor=w,f._lpa=e.targetAnchor&&o(e.targetAnchor);break}}w=o(w)}e.targetAnchor||Cp(f,e,d,c),u(y&&o(y),e,f,n,r,i,s)}lo(e,g)}else g&&e.shapeFlag&16&&h(t,e,t,o(t));return e.anchor&&o(e.anchor)}const t0=xp;function lo(t,e){const n=t.ctx;if(n&&n.ut){let r,i;for(e?(r=t.el,i=t.anchor):(r=t.targetStart,i=t.targetAnchor);r&&r!==i;)r.nodeType===1&&r.setAttribute("data-v-owner",n.uid),r=r.nextSibling;n.ut()}}function Cp(t,e,n,r){const i=e.targetStart=n(""),s=e.targetAnchor=n("");return i[Ap]=s,t&&(r(i,t),r(s,t)),s}const Gn=Symbol("_leaveCb"),Fs=Symbol("_enterCb");function n0(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Xn(()=>{t.isMounted=!0}),Gp(()=>{t.isUnmounting=!0}),t}const Ut=[Function,Array],Sp={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Ut,onEnter:Ut,onAfterEnter:Ut,onEnterCancelled:Ut,onBeforeLeave:Ut,onLeave:Ut,onAfterLeave:Ut,onLeaveCancelled:Ut,onBeforeAppear:Ut,onAppear:Ut,onAfterAppear:Ut,onAppearCancelled:Ut},Tp=t=>{const e=t.subTree;return e.component?Tp(e.component):e},r0={name:"BaseTransition",props:Sp,setup(t,{slots:e}){const n=ig(),r=n0();return()=>{const i=e.default&&Lp(e.default(),!0);if(!i||!i.length)return;const s=Rp(i),o=Me(t),{mode:a}=o;if(r.isLeaving)return Pa(s);const l=Xd(s);if(!l)return Pa(s);let c=Il(l,o,r,n,u=>c=u);l.type!==bt&&ss(l,c);let d=n.subTree&&Xd(n.subTree);if(d&&d.type!==bt&&!kr(d,l)&&Tp(n).type!==bt){let u=Il(d,o,r,n);if(ss(d,u),a==="out-in"&&l.type!==bt)return r.isLeaving=!0,u.afterLeave=()=>{r.isLeaving=!1,n.job.flags&8||n.update(),delete u.afterLeave,d=void 0},Pa(s);a==="in-out"&&l.type!==bt?u.delayLeave=(h,f,g)=>{const y=Np(r,d);y[String(d.key)]=d,h[Gn]=()=>{f(),h[Gn]=void 0,delete c.delayedLeave,d=void 0},c.delayedLeave=()=>{g(),delete c.delayedLeave,d=void 0}}:d=void 0}else d&&(d=void 0);return s}}};function Rp(t){let e=t[0];if(t.length>1){for(const n of t)if(n.type!==bt){e=n;break}}return e}const i0=r0;function Np(t,e){const{leavingVNodes:n}=t;let r=n.get(e.type);return r||(r=Object.create(null),n.set(e.type,r)),r}function Il(t,e,n,r,i){const{appear:s,mode:o,persisted:a=!1,onBeforeEnter:l,onEnter:c,onAfterEnter:d,onEnterCancelled:u,onBeforeLeave:h,onLeave:f,onAfterLeave:g,onLeaveCancelled:y,onBeforeAppear:w,onAppear:b,onAfterAppear:E,onAppearCancelled:A}=e,v=String(t.key),S=Np(n,t),L=(F,$)=>{F&&ln(F,r,9,$)},G=(F,$)=>{const H=$[1];L(F,$),Se(F)?F.every(z=>z.length<=1)&&H():F.length<=1&&H()},V={mode:o,persisted:a,beforeEnter(F){let $=l;if(!n.isMounted)if(s)$=w||l;else return;F[Gn]&&F[Gn](!0);const H=S[v];H&&kr(t,H)&&H.el[Gn]&&H.el[Gn](),L($,[F])},enter(F){let $=c,H=d,z=u;if(!n.isMounted)if(s)$=b||c,H=E||d,z=A||u;else return;let N=!1;const k=F[Fs]=I=>{N||(N=!0,I?L(z,[F]):L(H,[F]),V.delayedLeave&&V.delayedLeave(),F[Fs]=void 0)};$?G($,[F,k]):k()},leave(F,$){const H=String(t.key);if(F[Fs]&&F[Fs](!0),n.isUnmounting)return $();L(h,[F]);let z=!1;const N=F[Gn]=k=>{z||(z=!0,$(),k?L(y,[F]):L(g,[F]),F[Gn]=void 0,S[H]===t&&delete S[H])};S[H]=t,f?G(f,[F,N]):N()},clone(F){const $=Il(F,e,n,r,i);return i&&i($),$}};return V}function Pa(t){if(oa(t))return t=ur(t),t.children=null,t}function Xd(t){if(!oa(t))return kp(t.type)&&t.children?Rp(t.children):t;if(t.component)return t.component.subTree;const{shapeFlag:e,children:n}=t;if(n){if(e&16)return n[0];if(e&32&&Le(n.default))return n.default()}}function ss(t,e){t.shapeFlag&6&&t.component?(t.transition=e,ss(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function Lp(t,e=!1,n){let r=[],i=0;for(let s=0;s<t.length;s++){let o=t[s];const a=n==null?o.key:String(n)+String(o.key!=null?o.key:s);o.type===We?(o.patchFlag&128&&i++,r=r.concat(Lp(o.children,e,a))):(e||o.type!==bt)&&r.push(a!=null?ur(o,{key:a}):o)}if(i>1)for(let s=0;s<r.length;s++)r[s].patchFlag=-2;return r}function Ip(t,e){return Le(t)?dt({name:t.name},e,{setup:t}):t}function Dp(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}const xo=new WeakMap;function Zi(t,e,n,r,i=!1){if(Se(t)){t.forEach((g,y)=>Zi(g,e&&(Se(e)?e[y]:e),n,r,i));return}if(Jr(r)&&!i){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&Zi(t,e,n,r.component.subTree);return}const s=r.shapeFlag&4?da(r.component):r.el,o=i?null:s,{i:a,r:l}=t,c=e&&e.r,d=a.refs===Ve?a.refs={}:a.refs,u=a.setupState,h=Me(u),f=u===Ve?qf:g=>$e(h,g);if(c!=null&&c!==l){if(Zd(e),qe(c))d[c]=null,f(c)&&(u[c]=null);else if(ct(c)){c.value=null;const g=e;g.k&&(d[g.k]=null)}}if(Le(l))ks(l,a,12,[o,d]);else{const g=qe(l),y=ct(l);if(g||y){const w=()=>{if(t.f){const b=g?f(l)?u[l]:d[l]:l.value;if(i)Se(b)&&$c(b,s);else if(Se(b))b.includes(s)||b.push(s);else if(g)d[l]=[s],f(l)&&(u[l]=d[l]);else{const E=[s];l.value=E,t.k&&(d[t.k]=E)}}else g?(d[l]=o,f(l)&&(u[l]=o)):y&&(l.value=o,t.k&&(d[t.k]=o))};if(o){const b=()=>{w(),xo.delete(t)};b.id=-1,xo.set(t,b),Ct(b,n)}else Zd(t),w()}}}function Zd(t){const e=xo.get(t);e&&(e.flags|=8,xo.delete(t))}ra().requestIdleCallback;ra().cancelIdleCallback;const Jr=t=>!!t.type.__asyncLoader,oa=t=>t.type.__isKeepAlive;function s0(t,e){Pp(t,"a",e)}function o0(t,e){Pp(t,"da",e)}function Pp(t,e,n=wt){const r=t.__wdc||(t.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return t()});if(aa(e,r,n),n){let i=n.parent;for(;i&&i.parent;)oa(i.parent.vnode)&&a0(r,e,n,i),i=i.parent}}function a0(t,e,n,r){const i=aa(e,t,r,!0);xs(()=>{$c(r[e],i)},n)}function aa(t,e,n=wt,r=!1){if(n){const i=n[t]||(n[t]=[]),s=e.__weh||(e.__weh=(...o)=>{Un();const a=Cs(n),l=ln(e,n,t,o);return a(),jn(),l});return r?i.unshift(s):i.push(s),s}}const Kn=t=>(e,n=wt)=>{(!ls||t==="sp")&&aa(t,(...r)=>e(...r),n)},l0=Kn("bm"),Xn=Kn("m"),c0=Kn("bu"),d0=Kn("u"),Gp=Kn("bum"),xs=Kn("um"),u0=Kn("sp"),h0=Kn("rtg"),f0=Kn("rtc");function p0(t,e=wt){aa("ec",t,e)}const Mp="components";function Dl(t,e){return Fp(Mp,t,!0,e)||t}const Op=Symbol.for("v-ndc");function g0(t){return qe(t)?Fp(Mp,t,!1)||t:t||Op}function Fp(t,e,n=!0,r=!1){const i=ht||wt;if(i){const s=i.type;{const a=n_(s,!1);if(a&&(a===e||a===Xt(e)||a===ta(Xt(e))))return s}const o=Yd(i[t]||s[t],e)||Yd(i.appContext[t],e);return!o&&r?s:o}}function Yd(t,e){return t&&(t[e]||t[Xt(e)]||t[ta(Xt(e))])}function _n(t,e,n,r){let i;const s=n,o=Se(t);if(o||qe(t)){const a=o&&Rr(t);let l=!1,c=!1;a&&(l=!qt(t),c=Hn(t),t=ia(t)),i=new Array(t.length);for(let d=0,u=t.length;d<u;d++)i[d]=e(l?c?li(an(t[d])):an(t[d]):t[d],d,void 0,s)}else if(typeof t=="number"){i=new Array(t);for(let a=0;a<t;a++)i[a]=e(a+1,a,void 0,s)}else if(ze(t))if(t[Symbol.iterator])i=Array.from(t,(a,l)=>e(a,l,void 0,s));else{const a=Object.keys(t);i=new Array(a.length);for(let l=0,c=a.length;l<c;l++){const d=a[l];i[l]=e(t[d],d,l,s)}}else i=[];return i}function Pl(t,e,n={},r,i){if(ht.ce||ht.parent&&Jr(ht.parent)&&ht.parent.ce){const c=Object.keys(n).length>0;return e!=="default"&&(n.name=e),Y(),Wn(We,null,[ke("slot",n,r)],c?-2:64)}let s=t[e];s&&s._c&&(s._d=!1),Y();const o=s&&$p(s(n)),a=n.key||o&&o.key,l=Wn(We,{key:(a&&!on(a)?a:`_${e}`)+(!o&&r?"_fb":"")},o||[],o&&t._===1?64:-2);return!i&&l.scopeId&&(l.slotScopeIds=[l.scopeId+"-s"]),s&&s._c&&(s._d=!0),l}function $p(t){return t.some(e=>as(e)?!(e.type===bt||e.type===We&&!$p(e.children)):!0)?t:null}const Gl=t=>t?sg(t)?da(t):Gl(t.parent):null,Yi=dt(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Gl(t.parent),$root:t=>Gl(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>Bp(t),$forceUpdate:t=>t.f||(t.f=()=>{Kc(t.update)}),$nextTick:t=>t.n||(t.n=Ir.bind(t.proxy)),$watch:t=>C0.bind(t)}),Ga=(t,e)=>t!==Ve&&!t.__isScriptSetup&&$e(t,e),m0={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:r,data:i,props:s,accessCache:o,type:a,appContext:l}=t;if(e[0]!=="$"){const h=o[e];if(h!==void 0)switch(h){case 1:return r[e];case 2:return i[e];case 4:return n[e];case 3:return s[e]}else{if(Ga(r,e))return o[e]=1,r[e];if(i!==Ve&&$e(i,e))return o[e]=2,i[e];if($e(s,e))return o[e]=3,s[e];if(n!==Ve&&$e(n,e))return o[e]=4,n[e];Ml&&(o[e]=0)}}const c=Yi[e];let d,u;if(c)return e==="$attrs"&&vt(t.attrs,"get",""),c(t);if((d=a.__cssModules)&&(d=d[e]))return d;if(n!==Ve&&$e(n,e))return o[e]=4,n[e];if(u=l.config.globalProperties,$e(u,e))return u[e]},set({_:t},e,n){const{data:r,setupState:i,ctx:s}=t;return Ga(i,e)?(i[e]=n,!0):r!==Ve&&$e(r,e)?(r[e]=n,!0):$e(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(s[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:i,props:s,type:o}},a){let l;return!!(n[a]||t!==Ve&&a[0]!=="$"&&$e(t,a)||Ga(e,a)||$e(s,a)||$e(r,a)||$e(Yi,a)||$e(i.config.globalProperties,a)||(l=o.__cssModules)&&l[a])},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:$e(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function Jd(t){return Se(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let Ml=!0;function y0(t){const e=Bp(t),n=t.proxy,r=t.ctx;Ml=!1,e.beforeCreate&&Qd(e.beforeCreate,t,"bc");const{data:i,computed:s,methods:o,watch:a,provide:l,inject:c,created:d,beforeMount:u,mounted:h,beforeUpdate:f,updated:g,activated:y,deactivated:w,beforeDestroy:b,beforeUnmount:E,destroyed:A,unmounted:v,render:S,renderTracked:L,renderTriggered:G,errorCaptured:V,serverPrefetch:F,expose:$,inheritAttrs:H,components:z,directives:N,filters:k}=e;if(c&&v0(c,r,null),o)for(const x in o){const O=o[x];Le(O)&&(r[x]=O.bind(n))}if(i){const x=i.call(n,n);ze(x)&&(t.data=As(x))}if(Ml=!0,s)for(const x in s){const O=s[x],X=Le(O)?O.bind(n,n):Le(O.get)?O.get.bind(n,n):vn,re=!Le(O)&&Le(O.set)?O.set.bind(n):vn,fe=st({get:X,set:re});Object.defineProperty(r,x,{enumerable:!0,configurable:!0,get:()=>fe.value,set:me=>fe.value=me})}if(a)for(const x in a)zp(a[x],r,n,x);if(l){const x=Le(l)?l.call(n):l;Reflect.ownKeys(x).forEach(O=>{co(O,x[O])})}d&&Qd(d,t,"c");function C(x,O){Se(O)?O.forEach(X=>x(X.bind(n))):O&&x(O.bind(n))}if(C(l0,u),C(Xn,h),C(c0,f),C(d0,g),C(s0,y),C(o0,w),C(p0,V),C(f0,L),C(h0,G),C(Gp,E),C(xs,v),C(u0,F),Se($))if($.length){const x=t.exposed||(t.exposed={});$.forEach(O=>{Object.defineProperty(x,O,{get:()=>n[O],set:X=>n[O]=X,enumerable:!0})})}else t.exposed||(t.exposed={});S&&t.render===vn&&(t.render=S),H!=null&&(t.inheritAttrs=H),z&&(t.components=z),N&&(t.directives=N),F&&Dp(t)}function v0(t,e,n=vn){Se(t)&&(t=Ol(t));for(const r in t){const i=t[r];let s;ze(i)?"default"in i?s=bn(i.from||r,i.default,!0):s=bn(i.from||r):s=bn(i),ct(s)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>s.value,set:o=>s.value=o}):e[r]=s}}function Qd(t,e,n){ln(Se(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function zp(t,e,n,r){let i=r.includes(".")?jp(n,r):()=>n[r];if(qe(t)){const s=e[t];Le(s)&&Mt(i,s)}else if(Le(t))Mt(i,t.bind(n));else if(ze(t))if(Se(t))t.forEach(s=>zp(s,e,n,r));else{const s=Le(t.handler)?t.handler.bind(n):e[t.handler];Le(s)&&Mt(i,s,t)}}function Bp(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:i,optionsCache:s,config:{optionMergeStrategies:o}}=t.appContext,a=s.get(e);let l;return a?l=a:!i.length&&!n&&!r?l=e:(l={},i.length&&i.forEach(c=>Co(l,c,o,!0)),Co(l,e,o)),ze(e)&&s.set(e,l),l}function Co(t,e,n,r=!1){const{mixins:i,extends:s}=e;s&&Co(t,s,n,!0),i&&i.forEach(o=>Co(t,o,n,!0));for(const o in e)if(!(r&&o==="expose")){const a=_0[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const _0={data:eu,props:tu,emits:tu,methods:Vi,computed:Vi,beforeCreate:xt,created:xt,beforeMount:xt,mounted:xt,beforeUpdate:xt,updated:xt,beforeDestroy:xt,beforeUnmount:xt,destroyed:xt,unmounted:xt,activated:xt,deactivated:xt,errorCaptured:xt,serverPrefetch:xt,components:Vi,directives:Vi,watch:w0,provide:eu,inject:b0};function eu(t,e){return e?t?function(){return dt(Le(t)?t.call(this,this):t,Le(e)?e.call(this,this):e)}:e:t}function b0(t,e){return Vi(Ol(t),Ol(e))}function Ol(t){if(Se(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function xt(t,e){return t?[...new Set([].concat(t,e))]:e}function Vi(t,e){return t?dt(Object.create(null),t,e):e}function tu(t,e){return t?Se(t)&&Se(e)?[...new Set([...t,...e])]:dt(Object.create(null),Jd(t),Jd(e??{})):e}function w0(t,e){if(!t)return e;if(!e)return t;const n=dt(Object.create(null),t);for(const r in e)n[r]=xt(t[r],e[r]);return n}function Vp(){return{app:null,config:{isNativeTag:qf,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let E0=0;function A0(t,e){return function(r,i=null){Le(r)||(r=dt({},r)),i!=null&&!ze(i)&&(i=null);const s=Vp(),o=new WeakSet,a=[];let l=!1;const c=s.app={_uid:E0++,_component:r,_props:i,_container:null,_context:s,_instance:null,version:i_,get config(){return s.config},set config(d){},use(d,...u){return o.has(d)||(d&&Le(d.install)?(o.add(d),d.install(c,...u)):Le(d)&&(o.add(d),d(c,...u))),c},mixin(d){return s.mixins.includes(d)||s.mixins.push(d),c},component(d,u){return u?(s.components[d]=u,c):s.components[d]},directive(d,u){return u?(s.directives[d]=u,c):s.directives[d]},mount(d,u,h){if(!l){const f=c._ceVNode||ke(r,i);return f.appContext=s,h===!0?h="svg":h===!1&&(h=void 0),t(f,d,h),l=!0,c._container=d,d.__vue_app__=c,da(f.component)}},onUnmount(d){a.push(d)},unmount(){l&&(ln(a,c._instance,16),t(null,c._container),delete c._container.__vue_app__)},provide(d,u){return s.provides[d]=u,c},runWithContext(d){const u=Qr;Qr=c;try{return d()}finally{Qr=u}}};return c}}let Qr=null;function co(t,e){if(wt){let n=wt.provides;const r=wt.parent&&wt.parent.provides;r===n&&(n=wt.provides=Object.create(r)),n[t]=e}}function bn(t,e,n=!1){const r=ig();if(r||Qr){let i=Qr?Qr._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(i&&t in i)return i[t];if(arguments.length>1)return n&&Le(e)?e.call(r&&r.proxy):e}}const k0=Symbol.for("v-scx"),x0=()=>bn(k0);function Mt(t,e,n){return Up(t,e,n)}function Up(t,e,n=Ve){const{immediate:r,deep:i,flush:s,once:o}=n,a=dt({},n),l=e&&r||!e&&s!=="post";let c;if(ls){if(s==="sync"){const f=x0();c=f.__watcherHandles||(f.__watcherHandles=[])}else if(!l){const f=()=>{};return f.stop=vn,f.resume=vn,f.pause=vn,f}}const d=wt;a.call=(f,g,y)=>ln(f,d,g,y);let u=!1;s==="post"?a.scheduler=f=>{Ct(f,d&&d.suspense)}:s!=="sync"&&(u=!0,a.scheduler=(f,g)=>{g?f():Kc(f)}),a.augmentJob=f=>{e&&(f.flags|=4),u&&(f.flags|=2,d&&(f.id=d.uid,f.i=d))};const h=Zv(t,e,a);return ls&&(c?c.push(h):l&&h()),h}function C0(t,e,n){const r=this.proxy,i=qe(t)?t.includes(".")?jp(r,t):()=>r[t]:t.bind(r,r);let s;Le(e)?s=e:(s=e.handler,n=e);const o=Cs(this),a=Up(i,s.bind(r),n);return o(),a}function jp(t,e){const n=e.split(".");return()=>{let r=t;for(let i=0;i<n.length&&r;i++)r=r[n[i]];return r}}const S0=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${Xt(e)}Modifiers`]||t[`${hr(e)}Modifiers`];function T0(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||Ve;let i=n;const s=e.startsWith("update:"),o=s&&S0(r,e.slice(7));o&&(o.trim&&(i=n.map(d=>qe(d)?d.trim():d)),o.number&&(i=n.map(na)));let a,l=r[a=Ra(e)]||r[a=Ra(Xt(e))];!l&&s&&(l=r[a=Ra(hr(e))]),l&&ln(l,t,6,i);const c=r[a+"Once"];if(c){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,ln(c,t,6,i)}}const R0=new WeakMap;function Hp(t,e,n=!1){const r=n?R0:e.emitsCache,i=r.get(t);if(i!==void 0)return i;const s=t.emits;let o={},a=!1;if(!Le(t)){const l=c=>{const d=Hp(c,e,!0);d&&(a=!0,dt(o,d))};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!s&&!a?(ze(t)&&r.set(t,null),null):(Se(s)?s.forEach(l=>o[l]=null):dt(o,s),ze(t)&&r.set(t,o),o)}function la(t,e){return!t||!Jo(e)?!1:(e=e.slice(2).replace(/Once$/,""),$e(t,e[0].toLowerCase()+e.slice(1))||$e(t,hr(e))||$e(t,e))}function nu(t){const{type:e,vnode:n,proxy:r,withProxy:i,propsOptions:[s],slots:o,attrs:a,emit:l,render:c,renderCache:d,props:u,data:h,setupState:f,ctx:g,inheritAttrs:y}=t,w=ko(t);let b,E;try{if(n.shapeFlag&4){const v=i||r,S=v;b=mn(c.call(S,v,d,u,f,h,g)),E=a}else{const v=e;b=mn(v.length>1?v(u,{attrs:a,slots:o,emit:l}):v(u,null)),E=e.props?a:N0(a)}}catch(v){Ji.length=0,sa(v,t,1),b=ke(bt)}let A=b;if(E&&y!==!1){const v=Object.keys(E),{shapeFlag:S}=A;v.length&&S&7&&(s&&v.some(Fc)&&(E=L0(E,s)),A=ur(A,E,!1,!0))}return n.dirs&&(A=ur(A,null,!1,!0),A.dirs=A.dirs?A.dirs.concat(n.dirs):n.dirs),n.transition&&ss(A,n.transition),b=A,ko(w),b}const N0=t=>{let e;for(const n in t)(n==="class"||n==="style"||Jo(n))&&((e||(e={}))[n]=t[n]);return e},L0=(t,e)=>{const n={};for(const r in t)(!Fc(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function I0(t,e,n){const{props:r,children:i,component:s}=t,{props:o,children:a,patchFlag:l}=e,c=s.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return r?ru(r,o,c):!!o;if(l&8){const d=e.dynamicProps;for(let u=0;u<d.length;u++){const h=d[u];if(o[h]!==r[h]&&!la(c,h))return!0}}}else return(i||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?ru(r,o,c):!0:!!o;return!1}function ru(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let i=0;i<r.length;i++){const s=r[i];if(e[s]!==t[s]&&!la(n,s))return!0}return!1}function D0({vnode:t,parent:e},n){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=n,e=e.parent;else break}}const Wp={},qp=()=>Object.create(Wp),Kp=t=>Object.getPrototypeOf(t)===Wp;function P0(t,e,n,r=!1){const i={},s=qp();t.propsDefaults=Object.create(null),Xp(t,e,i,s);for(const o in t.propsOptions[0])o in i||(i[o]=void 0);n?t.props=r?i:gp(i):t.type.props?t.props=i:t.props=s,t.attrs=s}function G0(t,e,n,r){const{props:i,attrs:s,vnode:{patchFlag:o}}=t,a=Me(i),[l]=t.propsOptions;let c=!1;if((r||o>0)&&!(o&16)){if(o&8){const d=t.vnode.dynamicProps;for(let u=0;u<d.length;u++){let h=d[u];if(la(t.emitsOptions,h))continue;const f=e[h];if(l)if($e(s,h))f!==s[h]&&(s[h]=f,c=!0);else{const g=Xt(h);i[g]=Fl(l,a,g,f,t,!1)}else f!==s[h]&&(s[h]=f,c=!0)}}}else{Xp(t,e,i,s)&&(c=!0);let d;for(const u in a)(!e||!$e(e,u)&&((d=hr(u))===u||!$e(e,d)))&&(l?n&&(n[u]!==void 0||n[d]!==void 0)&&(i[u]=Fl(l,a,u,void 0,t,!0)):delete i[u]);if(s!==a)for(const u in s)(!e||!$e(e,u))&&(delete s[u],c=!0)}c&&On(t.attrs,"set","")}function Xp(t,e,n,r){const[i,s]=t.propsOptions;let o=!1,a;if(e)for(let l in e){if(Wi(l))continue;const c=e[l];let d;i&&$e(i,d=Xt(l))?!s||!s.includes(d)?n[d]=c:(a||(a={}))[d]=c:la(t.emitsOptions,l)||(!(l in r)||c!==r[l])&&(r[l]=c,o=!0)}if(s){const l=Me(n),c=a||Ve;for(let d=0;d<s.length;d++){const u=s[d];n[u]=Fl(i,l,u,c[u],t,!$e(c,u))}}return o}function Fl(t,e,n,r,i,s){const o=t[n];if(o!=null){const a=$e(o,"default");if(a&&r===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&Le(l)){const{propsDefaults:c}=i;if(n in c)r=c[n];else{const d=Cs(i);r=c[n]=l.call(null,e),d()}}else r=l;i.ce&&i.ce._setProp(n,r)}o[0]&&(s&&!a?r=!1:o[1]&&(r===""||r===hr(n))&&(r=!0))}return r}const M0=new WeakMap;function Zp(t,e,n=!1){const r=n?M0:e.propsCache,i=r.get(t);if(i)return i;const s=t.props,o={},a=[];let l=!1;if(!Le(t)){const d=u=>{l=!0;const[h,f]=Zp(u,e,!0);dt(o,h),f&&a.push(...f)};!n&&e.mixins.length&&e.mixins.forEach(d),t.extends&&d(t.extends),t.mixins&&t.mixins.forEach(d)}if(!s&&!l)return ze(t)&&r.set(t,Xr),Xr;if(Se(s))for(let d=0;d<s.length;d++){const u=Xt(s[d]);iu(u)&&(o[u]=Ve)}else if(s)for(const d in s){const u=Xt(d);if(iu(u)){const h=s[d],f=o[u]=Se(h)||Le(h)?{type:h}:dt({},h),g=f.type;let y=!1,w=!0;if(Se(g))for(let b=0;b<g.length;++b){const E=g[b],A=Le(E)&&E.name;if(A==="Boolean"){y=!0;break}else A==="String"&&(w=!1)}else y=Le(g)&&g.name==="Boolean";f[0]=y,f[1]=w,(y||$e(f,"default"))&&a.push(u)}}const c=[o,a];return ze(t)&&r.set(t,c),c}function iu(t){return t[0]!=="$"&&!Wi(t)}const Xc=t=>t==="_"||t==="_ctx"||t==="$stable",Zc=t=>Se(t)?t.map(mn):[mn(t)],O0=(t,e,n)=>{if(e._n)return e;const r=Xe((...i)=>Zc(e(...i)),n);return r._c=!1,r},Yp=(t,e,n)=>{const r=t._ctx;for(const i in t){if(Xc(i))continue;const s=t[i];if(Le(s))e[i]=O0(i,s,r);else if(s!=null){const o=Zc(s);e[i]=()=>o}}},Jp=(t,e)=>{const n=Zc(e);t.slots.default=()=>n},Qp=(t,e,n)=>{for(const r in e)(n||!Xc(r))&&(t[r]=e[r])},F0=(t,e,n)=>{const r=t.slots=qp();if(t.vnode.shapeFlag&32){const i=e._;i?(Qp(r,e,n),n&&Yf(r,"_",i,!0)):Yp(e,r)}else e&&Jp(t,e)},$0=(t,e,n)=>{const{vnode:r,slots:i}=t;let s=!0,o=Ve;if(r.shapeFlag&32){const a=e._;a?n&&a===1?s=!1:Qp(i,e,n):(s=!e.$stable,Yp(e,i)),o=e}else e&&(Jp(t,e),o={default:1});if(s)for(const a in i)!Xc(a)&&o[a]==null&&delete i[a]},Ct=j0;function z0(t){return B0(t)}function B0(t,e){const n=ra();n.__VUE__=!0;const{insert:r,remove:i,patchProp:s,createElement:o,createText:a,createComment:l,setText:c,setElementText:d,parentNode:u,nextSibling:h,setScopeId:f=vn,insertStaticContent:g}=t,y=(T,D,P,B=null,M=null,Z=null,ie=void 0,le=null,oe=!!D.dynamicChildren)=>{if(T===D)return;T&&!kr(T,D)&&(B=q(T),me(T,M,Z,!0),T=null),D.patchFlag===-2&&(oe=!1,D.dynamicChildren=null);const{type:Q,ref:be,shapeFlag:pe}=D;switch(Q){case ca:w(T,D,P,B);break;case bt:b(T,D,P,B);break;case Oa:T==null&&E(D,P,B,ie);break;case We:z(T,D,P,B,M,Z,ie,le,oe);break;default:pe&1?S(T,D,P,B,M,Z,ie,le,oe):pe&6?N(T,D,P,B,M,Z,ie,le,oe):(pe&64||pe&128)&&Q.process(T,D,P,B,M,Z,ie,le,oe,ee)}be!=null&&M?Zi(be,T&&T.ref,Z,D||T,!D):be==null&&T&&T.ref!=null&&Zi(T.ref,null,Z,T,!0)},w=(T,D,P,B)=>{if(T==null)r(D.el=a(D.children),P,B);else{const M=D.el=T.el;D.children!==T.children&&c(M,D.children)}},b=(T,D,P,B)=>{T==null?r(D.el=l(D.children||""),P,B):D.el=T.el},E=(T,D,P,B)=>{[T.el,T.anchor]=g(T.children,D,P,B,T.el,T.anchor)},A=({el:T,anchor:D},P,B)=>{let M;for(;T&&T!==D;)M=h(T),r(T,P,B),T=M;r(D,P,B)},v=({el:T,anchor:D})=>{let P;for(;T&&T!==D;)P=h(T),i(T),T=P;i(D)},S=(T,D,P,B,M,Z,ie,le,oe)=>{if(D.type==="svg"?ie="svg":D.type==="math"&&(ie="mathml"),T==null)L(D,P,B,M,Z,ie,le,oe);else{const Q=T.el&&T.el._isVueCE?T.el:null;try{Q&&Q._beginPatch(),F(T,D,M,Z,ie,le,oe)}finally{Q&&Q._endPatch()}}},L=(T,D,P,B,M,Z,ie,le)=>{let oe,Q;const{props:be,shapeFlag:pe,transition:_e,dirs:Ae}=T;if(oe=T.el=o(T.type,Z,be&&be.is,be),pe&8?d(oe,T.children):pe&16&&V(T.children,oe,null,B,M,Ma(T,Z),ie,le),Ae&&fr(T,null,B,"created"),G(oe,T,T.scopeId,ie,B),be){for(const te in be)te!=="value"&&!Wi(te)&&s(oe,te,null,be[te],Z,B);"value"in be&&s(oe,"value",null,be.value,Z),(Q=be.onVnodeBeforeMount)&&hn(Q,B,T)}Ae&&fr(T,null,B,"beforeMount");const Ne=V0(M,_e);Ne&&_e.beforeEnter(oe),r(oe,D,P),((Q=be&&be.onVnodeMounted)||Ne||Ae)&&Ct(()=>{Q&&hn(Q,B,T),Ne&&_e.enter(oe),Ae&&fr(T,null,B,"mounted")},M)},G=(T,D,P,B,M)=>{if(P&&f(T,P),B)for(let Z=0;Z<B.length;Z++)f(T,B[Z]);if(M){let Z=M.subTree;if(D===Z||tg(Z.type)&&(Z.ssContent===D||Z.ssFallback===D)){const ie=M.vnode;G(T,ie,ie.scopeId,ie.slotScopeIds,M.parent)}}},V=(T,D,P,B,M,Z,ie,le,oe=0)=>{for(let Q=oe;Q<T.length;Q++){const be=T[Q]=le?rr(T[Q]):mn(T[Q]);y(null,be,D,P,B,M,Z,ie,le)}},F=(T,D,P,B,M,Z,ie)=>{const le=D.el=T.el;let{patchFlag:oe,dynamicChildren:Q,dirs:be}=D;oe|=T.patchFlag&16;const pe=T.props||Ve,_e=D.props||Ve;let Ae;if(P&&pr(P,!1),(Ae=_e.onVnodeBeforeUpdate)&&hn(Ae,P,D,T),be&&fr(D,T,P,"beforeUpdate"),P&&pr(P,!0),(pe.innerHTML&&_e.innerHTML==null||pe.textContent&&_e.textContent==null)&&d(le,""),Q?$(T.dynamicChildren,Q,le,P,B,Ma(D,M),Z):ie||O(T,D,le,null,P,B,Ma(D,M),Z,!1),oe>0){if(oe&16)H(le,pe,_e,P,M);else if(oe&2&&pe.class!==_e.class&&s(le,"class",null,_e.class,M),oe&4&&s(le,"style",pe.style,_e.style,M),oe&8){const Ne=D.dynamicProps;for(let te=0;te<Ne.length;te++){const j=Ne[te],K=pe[j],Ce=_e[j];(Ce!==K||j==="value")&&s(le,j,K,Ce,M,P)}}oe&1&&T.children!==D.children&&d(le,D.children)}else!ie&&Q==null&&H(le,pe,_e,P,M);((Ae=_e.onVnodeUpdated)||be)&&Ct(()=>{Ae&&hn(Ae,P,D,T),be&&fr(D,T,P,"updated")},B)},$=(T,D,P,B,M,Z,ie)=>{for(let le=0;le<D.length;le++){const oe=T[le],Q=D[le],be=oe.el&&(oe.type===We||!kr(oe,Q)||oe.shapeFlag&198)?u(oe.el):P;y(oe,Q,be,null,B,M,Z,ie,!0)}},H=(T,D,P,B,M)=>{if(D!==P){if(D!==Ve)for(const Z in D)!Wi(Z)&&!(Z in P)&&s(T,Z,D[Z],null,M,B);for(const Z in P){if(Wi(Z))continue;const ie=P[Z],le=D[Z];ie!==le&&Z!=="value"&&s(T,Z,le,ie,M,B)}"value"in P&&s(T,"value",D.value,P.value,M)}},z=(T,D,P,B,M,Z,ie,le,oe)=>{const Q=D.el=T?T.el:a(""),be=D.anchor=T?T.anchor:a("");let{patchFlag:pe,dynamicChildren:_e,slotScopeIds:Ae}=D;Ae&&(le=le?le.concat(Ae):Ae),T==null?(r(Q,P,B),r(be,P,B),V(D.children||[],P,be,M,Z,ie,le,oe)):pe>0&&pe&64&&_e&&T.dynamicChildren?($(T.dynamicChildren,_e,P,M,Z,ie,le),(D.key!=null||M&&D===M.subTree)&&Yc(T,D,!0)):O(T,D,P,be,M,Z,ie,le,oe)},N=(T,D,P,B,M,Z,ie,le,oe)=>{D.slotScopeIds=le,T==null?D.shapeFlag&512?M.ctx.activate(D,P,B,ie,oe):k(D,P,B,M,Z,ie,oe):I(T,D,oe)},k=(T,D,P,B,M,Z,ie)=>{const le=T.component=Y0(T,B,M);if(oa(T)&&(le.ctx.renderer=ee),J0(le,!1,ie),le.asyncDep){if(M&&M.registerDep(le,C,ie),!T.el){const oe=le.subTree=ke(bt);b(null,oe,D,P),T.placeholder=oe.el}}else C(le,T,D,P,M,Z,ie)},I=(T,D,P)=>{const B=D.component=T.component;if(I0(T,D,P))if(B.asyncDep&&!B.asyncResolved){x(B,D,P);return}else B.next=D,B.update();else D.el=T.el,B.vnode=D},C=(T,D,P,B,M,Z,ie)=>{const le=()=>{if(T.isMounted){let{next:pe,bu:_e,u:Ae,parent:Ne,vnode:te}=T;{const It=eg(T);if(It){pe&&(pe.el=te.el,x(T,pe,ie)),It.asyncDep.then(()=>{T.isUnmounted||le()});return}}let j=pe,K;pr(T,!1),pe?(pe.el=te.el,x(T,pe,ie)):pe=te,_e&&ao(_e),(K=pe.props&&pe.props.onVnodeBeforeUpdate)&&hn(K,Ne,pe,te),pr(T,!0);const Ce=nu(T),He=T.subTree;T.subTree=Ce,y(He,Ce,u(He.el),q(He),T,M,Z),pe.el=Ce.el,j===null&&D0(T,Ce.el),Ae&&Ct(Ae,M),(K=pe.props&&pe.props.onVnodeUpdated)&&Ct(()=>hn(K,Ne,pe,te),M)}else{let pe;const{el:_e,props:Ae}=D,{bm:Ne,m:te,parent:j,root:K,type:Ce}=T,He=Jr(D);pr(T,!1),Ne&&ao(Ne),!He&&(pe=Ae&&Ae.onVnodeBeforeMount)&&hn(pe,j,D),pr(T,!0);{K.ce&&K.ce._def.shadowRoot!==!1&&K.ce._injectChildStyle(Ce);const It=T.subTree=nu(T);y(null,It,P,B,T,M,Z),D.el=It.el}if(te&&Ct(te,M),!He&&(pe=Ae&&Ae.onVnodeMounted)){const It=D;Ct(()=>hn(pe,j,It),M)}(D.shapeFlag&256||j&&Jr(j.vnode)&&j.vnode.shapeFlag&256)&&T.a&&Ct(T.a,M),T.isMounted=!0,D=P=B=null}};T.scope.on();const oe=T.effect=new tp(le);T.scope.off();const Q=T.update=oe.run.bind(oe),be=T.job=oe.runIfDirty.bind(oe);be.i=T,be.id=T.uid,oe.scheduler=()=>Kc(be),pr(T,!0),Q()},x=(T,D,P)=>{D.component=T;const B=T.vnode.props;T.vnode=D,T.next=null,G0(T,D.props,B,P),$0(T,D.children,P),Un(),Hd(T),jn()},O=(T,D,P,B,M,Z,ie,le,oe=!1)=>{const Q=T&&T.children,be=T?T.shapeFlag:0,pe=D.children,{patchFlag:_e,shapeFlag:Ae}=D;if(_e>0){if(_e&128){re(Q,pe,P,B,M,Z,ie,le,oe);return}else if(_e&256){X(Q,pe,P,B,M,Z,ie,le,oe);return}}Ae&8?(be&16&&De(Q,M,Z),pe!==Q&&d(P,pe)):be&16?Ae&16?re(Q,pe,P,B,M,Z,ie,le,oe):De(Q,M,Z,!0):(be&8&&d(P,""),Ae&16&&V(pe,P,B,M,Z,ie,le,oe))},X=(T,D,P,B,M,Z,ie,le,oe)=>{T=T||Xr,D=D||Xr;const Q=T.length,be=D.length,pe=Math.min(Q,be);let _e;for(_e=0;_e<pe;_e++){const Ae=D[_e]=oe?rr(D[_e]):mn(D[_e]);y(T[_e],Ae,P,null,M,Z,ie,le,oe)}Q>be?De(T,M,Z,!0,!1,pe):V(D,P,B,M,Z,ie,le,oe,pe)},re=(T,D,P,B,M,Z,ie,le,oe)=>{let Q=0;const be=D.length;let pe=T.length-1,_e=be-1;for(;Q<=pe&&Q<=_e;){const Ae=T[Q],Ne=D[Q]=oe?rr(D[Q]):mn(D[Q]);if(kr(Ae,Ne))y(Ae,Ne,P,null,M,Z,ie,le,oe);else break;Q++}for(;Q<=pe&&Q<=_e;){const Ae=T[pe],Ne=D[_e]=oe?rr(D[_e]):mn(D[_e]);if(kr(Ae,Ne))y(Ae,Ne,P,null,M,Z,ie,le,oe);else break;pe--,_e--}if(Q>pe){if(Q<=_e){const Ae=_e+1,Ne=Ae<be?D[Ae].el:B;for(;Q<=_e;)y(null,D[Q]=oe?rr(D[Q]):mn(D[Q]),P,Ne,M,Z,ie,le,oe),Q++}}else if(Q>_e)for(;Q<=pe;)me(T[Q],M,Z,!0),Q++;else{const Ae=Q,Ne=Q,te=new Map;for(Q=Ne;Q<=_e;Q++){const Ft=D[Q]=oe?rr(D[Q]):mn(D[Q]);Ft.key!=null&&te.set(Ft.key,Q)}let j,K=0;const Ce=_e-Ne+1;let He=!1,It=0;const ki=new Array(Ce);for(Q=0;Q<Ce;Q++)ki[Q]=0;for(Q=Ae;Q<=pe;Q++){const Ft=T[Q];if(K>=Ce){me(Ft,M,Z,!0);continue}let un;if(Ft.key!=null)un=te.get(Ft.key);else for(j=Ne;j<=_e;j++)if(ki[j-Ne]===0&&kr(Ft,D[j])){un=j;break}un===void 0?me(Ft,M,Z,!0):(ki[un-Ne]=Q+1,un>=It?It=un:He=!0,y(Ft,D[un],P,null,M,Z,ie,le,oe),K++)}const Fd=He?U0(ki):Xr;for(j=Fd.length-1,Q=Ce-1;Q>=0;Q--){const Ft=Ne+Q,un=D[Ft],$d=D[Ft+1],zd=Ft+1<be?$d.el||$d.placeholder:B;ki[Q]===0?y(null,un,P,zd,M,Z,ie,le,oe):He&&(j<0||Q!==Fd[j]?fe(un,P,zd,2):j--)}}},fe=(T,D,P,B,M=null)=>{const{el:Z,type:ie,transition:le,children:oe,shapeFlag:Q}=T;if(Q&6){fe(T.component.subTree,D,P,B);return}if(Q&128){T.suspense.move(D,P,B);return}if(Q&64){ie.move(T,D,P,ee);return}if(ie===We){r(Z,D,P);for(let pe=0;pe<oe.length;pe++)fe(oe[pe],D,P,B);r(T.anchor,D,P);return}if(ie===Oa){A(T,D,P);return}if(B!==2&&Q&1&&le)if(B===0)le.beforeEnter(Z),r(Z,D,P),Ct(()=>le.enter(Z),M);else{const{leave:pe,delayLeave:_e,afterLeave:Ae}=le,Ne=()=>{T.ctx.isUnmounted?i(Z):r(Z,D,P)},te=()=>{Z._isLeaving&&Z[Gn](!0),pe(Z,()=>{Ne(),Ae&&Ae()})};_e?_e(Z,Ne,te):te()}else r(Z,D,P)},me=(T,D,P,B=!1,M=!1)=>{const{type:Z,props:ie,ref:le,children:oe,dynamicChildren:Q,shapeFlag:be,patchFlag:pe,dirs:_e,cacheIndex:Ae}=T;if(pe===-2&&(M=!1),le!=null&&(Un(),Zi(le,null,P,T,!0),jn()),Ae!=null&&(D.renderCache[Ae]=void 0),be&256){D.ctx.deactivate(T);return}const Ne=be&1&&_e,te=!Jr(T);let j;if(te&&(j=ie&&ie.onVnodeBeforeUnmount)&&hn(j,D,T),be&6)Ee(T.component,P,B);else{if(be&128){T.suspense.unmount(P,B);return}Ne&&fr(T,null,D,"beforeUnmount"),be&64?T.type.remove(T,D,P,ee,B):Q&&!Q.hasOnce&&(Z!==We||pe>0&&pe&64)?De(Q,D,P,!1,!0):(Z===We&&pe&384||!M&&be&16)&&De(oe,D,P),B&&W(T)}(te&&(j=ie&&ie.onVnodeUnmounted)||Ne)&&Ct(()=>{j&&hn(j,D,T),Ne&&fr(T,null,D,"unmounted")},P)},W=T=>{const{type:D,el:P,anchor:B,transition:M}=T;if(D===We){ve(P,B);return}if(D===Oa){v(T);return}const Z=()=>{i(P),M&&!M.persisted&&M.afterLeave&&M.afterLeave()};if(T.shapeFlag&1&&M&&!M.persisted){const{leave:ie,delayLeave:le}=M,oe=()=>ie(P,Z);le?le(T.el,Z,oe):oe()}else Z()},ve=(T,D)=>{let P;for(;T!==D;)P=h(T),i(T),T=P;i(D)},Ee=(T,D,P)=>{const{bum:B,scope:M,job:Z,subTree:ie,um:le,m:oe,a:Q}=T;su(oe),su(Q),B&&ao(B),M.stop(),Z&&(Z.flags|=8,me(ie,T,D,P)),le&&Ct(le,D),Ct(()=>{T.isUnmounted=!0},D)},De=(T,D,P,B=!1,M=!1,Z=0)=>{for(let ie=Z;ie<T.length;ie++)me(T[ie],D,P,B,M)},q=T=>{if(T.shapeFlag&6)return q(T.component.subTree);if(T.shapeFlag&128)return T.suspense.next();const D=h(T.anchor||T.el),P=D&&D[Ap];return P?h(P):D};let J=!1;const U=(T,D,P)=>{T==null?D._vnode&&me(D._vnode,null,null,!0):y(D._vnode||null,T,D,null,null,null,P),D._vnode=T,J||(J=!0,Hd(),bp(),J=!1)},ee={p:y,um:me,m:fe,r:W,mt:k,mc:V,pc:O,pbc:$,n:q,o:t};return{render:U,hydrate:void 0,createApp:A0(U)}}function Ma({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function pr({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function V0(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function Yc(t,e,n=!1){const r=t.children,i=e.children;if(Se(r)&&Se(i))for(let s=0;s<r.length;s++){const o=r[s];let a=i[s];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=i[s]=rr(i[s]),a.el=o.el),!n&&a.patchFlag!==-2&&Yc(o,a)),a.type===ca&&a.patchFlag!==-1&&(a.el=o.el),a.type===bt&&!a.el&&(a.el=o.el)}}function U0(t){const e=t.slice(),n=[0];let r,i,s,o,a;const l=t.length;for(r=0;r<l;r++){const c=t[r];if(c!==0){if(i=n[n.length-1],t[i]<c){e[r]=i,n.push(r);continue}for(s=0,o=n.length-1;s<o;)a=s+o>>1,t[n[a]]<c?s=a+1:o=a;c<t[n[s]]&&(s>0&&(e[r]=n[s-1]),n[s]=r)}}for(s=n.length,o=n[s-1];s-- >0;)n[s]=o,o=e[o];return n}function eg(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:eg(e)}function su(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const tg=t=>t.__isSuspense;function j0(t,e){e&&e.pendingBranch?Se(t)?e.effects.push(...t):e.effects.push(t):Qv(t)}const We=Symbol.for("v-fgt"),ca=Symbol.for("v-txt"),bt=Symbol.for("v-cmt"),Oa=Symbol.for("v-stc"),Ji=[];let Bt=null;function Y(t=!1){Ji.push(Bt=t?null:[])}function H0(){Ji.pop(),Bt=Ji[Ji.length-1]||null}let os=1;function So(t,e=!1){os+=t,t<0&&Bt&&e&&(Bt.hasOnce=!0)}function ng(t){return t.dynamicChildren=os>0?Bt||Xr:null,H0(),os>0&&Bt&&Bt.push(t),t}function ne(t,e,n,r,i,s){return ng(p(t,e,n,r,i,s,!0))}function Wn(t,e,n,r,i){return ng(ke(t,e,n,r,i,!0))}function as(t){return t?t.__v_isVNode===!0:!1}function kr(t,e){return t.type===e.type&&t.key===e.key}const rg=({key:t})=>t??null,uo=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?qe(t)||ct(t)||Le(t)?{i:ht,r:t,k:e,f:!!n}:t:null);function p(t,e=null,n=null,r=0,i=null,s=t===We?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&rg(e),ref:e&&uo(e),scopeId:Ep,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:ht};return a?(Jc(l,n),s&128&&t.normalize(l)):n&&(l.shapeFlag|=qe(n)?8:16),os>0&&!o&&Bt&&(l.patchFlag>0||s&6)&&l.patchFlag!==32&&Bt.push(l),l}const ke=W0;function W0(t,e=null,n=null,r=0,i=null,s=!1){if((!t||t===Op)&&(t=bt),as(t)){const a=ur(t,e,!0);return n&&Jc(a,n),os>0&&!s&&Bt&&(a.shapeFlag&6?Bt[Bt.indexOf(t)]=a:Bt.push(a)),a.patchFlag=-2,a}if(r_(t)&&(t=t.__vccOpts),e){e=q0(e);let{class:a,style:l}=e;a&&!qe(a)&&(e.class=yt(a)),ze(l)&&(qc(l)&&!Se(l)&&(l=dt({},l)),e.style=Es(l))}const o=qe(t)?1:tg(t)?128:kp(t)?64:ze(t)?4:Le(t)?2:0;return p(t,e,n,r,i,o,s,!0)}function q0(t){return t?qc(t)||Kp(t)?dt({},t):t:null}function ur(t,e,n=!1,r=!1){const{props:i,ref:s,patchFlag:o,children:a,transition:l}=t,c=e?K0(i||{},e):i,d={__v_isVNode:!0,__v_skip:!0,type:t.type,props:c,key:c&&rg(c),ref:e&&e.ref?n&&s?Se(s)?s.concat(uo(e)):[s,uo(e)]:uo(e):s,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==We?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:l,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&ur(t.ssContent),ssFallback:t.ssFallback&&ur(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l&&r&&ss(d,l.clone(d)),d}function Re(t=" ",e=0){return ke(ca,null,t,e)}function Pe(t="",e=!1){return e?(Y(),Wn(bt,null,t)):ke(bt,null,t)}function mn(t){return t==null||typeof t=="boolean"?ke(bt):Se(t)?ke(We,null,t.slice()):as(t)?rr(t):ke(ca,null,String(t))}function rr(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:ur(t)}function Jc(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(Se(e))n=16;else if(typeof e=="object")if(r&65){const i=e.default;i&&(i._c&&(i._d=!1),Jc(t,i()),i._c&&(i._d=!0));return}else{n=32;const i=e._;!i&&!Kp(e)?e._ctx=ht:i===3&&ht&&(ht.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Le(e)?(e={default:e,_ctx:ht},n=32):(e=String(e),r&64?(n=16,e=[Re(e)]):n=8);t.children=e,t.shapeFlag|=n}function K0(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const i in r)if(i==="class")e.class!==r.class&&(e.class=yt([e.class,r.class]));else if(i==="style")e.style=Es([e.style,r.style]);else if(Jo(i)){const s=e[i],o=r[i];o&&s!==o&&!(Se(s)&&s.includes(o))&&(e[i]=s?[].concat(s,o):o)}else i!==""&&(e[i]=r[i])}return e}function hn(t,e,n,r=null){ln(t,e,7,[n,r])}const X0=Vp();let Z0=0;function Y0(t,e,n){const r=t.type,i=(e?e.appContext:t.appContext)||X0,s={uid:Z0++,vnode:t,type:r,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Av(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Zp(r,i),emitsOptions:Hp(r,i),emit:null,emitted:null,propsDefaults:Ve,inheritAttrs:r.inheritAttrs,ctx:Ve,data:Ve,props:Ve,attrs:Ve,slots:Ve,refs:Ve,setupState:Ve,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=e?e.root:s,s.emit=T0.bind(null,s),t.ce&&t.ce(s),s}let wt=null;const ig=()=>wt||ht;let To,$l;{const t=ra(),e=(n,r)=>{let i;return(i=t[n])||(i=t[n]=[]),i.push(r),s=>{i.length>1?i.forEach(o=>o(s)):i[0](s)}};To=e("__VUE_INSTANCE_SETTERS__",n=>wt=n),$l=e("__VUE_SSR_SETTERS__",n=>ls=n)}const Cs=t=>{const e=wt;return To(t),t.scope.on(),()=>{t.scope.off(),To(e)}},ou=()=>{wt&&wt.scope.off(),To(null)};function sg(t){return t.vnode.shapeFlag&4}let ls=!1;function J0(t,e=!1,n=!1){e&&$l(e);const{props:r,children:i}=t.vnode,s=sg(t);P0(t,r,s,e),F0(t,i,n||e);const o=s?Q0(t,e):void 0;return e&&$l(!1),o}function Q0(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,m0);const{setup:r}=n;if(r){Un();const i=t.setupContext=r.length>1?t_(t):null,s=Cs(t),o=ks(r,t,0,[t.props,i]),a=Kf(o);if(jn(),s(),(a||t.sp)&&!Jr(t)&&Dp(t),a){if(o.then(ou,ou),e)return o.then(l=>{au(t,l)}).catch(l=>{sa(l,t,0)});t.asyncDep=o}else au(t,o)}else og(t)}function au(t,e,n){Le(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:ze(e)&&(t.setupState=yp(e)),og(t)}function og(t,e,n){const r=t.type;t.render||(t.render=r.render||vn);{const i=Cs(t);Un();try{y0(t)}finally{jn(),i()}}}const e_={get(t,e){return vt(t,"get",""),t[e]}};function t_(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,e_),slots:t.slots,emit:t.emit,expose:e}}function da(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(yp(Uv(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in Yi)return Yi[n](t)},has(e,n){return n in e||n in Yi}})):t.proxy}function n_(t,e=!0){return Le(t)?t.displayName||t.name:t.name||e&&t.__name}function r_(t){return Le(t)&&"__vccOpts"in t}const st=(t,e)=>Kv(t,e,ls);function Qc(t,e,n){try{So(-1);const r=arguments.length;return r===2?ze(e)&&!Se(e)?as(e)?ke(t,null,[e]):ke(t,e):ke(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&as(n)&&(n=[n]),ke(t,e,n))}finally{So(1)}}const i_="3.5.25";let zl;const lu=typeof window<"u"&&window.trustedTypes;if(lu)try{zl=lu.createPolicy("vue",{createHTML:t=>t})}catch{}const ag=zl?t=>zl.createHTML(t):t=>t,s_="http://www.w3.org/2000/svg",o_="http://www.w3.org/1998/Math/MathML",Dn=typeof document<"u"?document:null,cu=Dn&&Dn.createElement("template"),a_={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const i=e==="svg"?Dn.createElementNS(s_,t):e==="mathml"?Dn.createElementNS(o_,t):n?Dn.createElement(t,{is:n}):Dn.createElement(t);return t==="select"&&r&&r.multiple!=null&&i.setAttribute("multiple",r.multiple),i},createText:t=>Dn.createTextNode(t),createComment:t=>Dn.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Dn.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,i,s){const o=n?n.previousSibling:e.lastChild;if(i&&(i===s||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),n),!(i===s||!(i=i.nextSibling)););else{cu.innerHTML=ag(r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t);const a=cu.content;if(r==="svg"||r==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},Yn="transition",Ci="animation",cs=Symbol("_vtc"),lg={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},l_=dt({},Sp,lg),c_=t=>(t.displayName="Transition",t.props=l_,t),Bl=c_((t,{slots:e})=>Qc(i0,d_(t),e)),gr=(t,e=[])=>{Se(t)?t.forEach(n=>n(...e)):t&&t(...e)},du=t=>t?Se(t)?t.some(e=>e.length>1):t.length>1:!1;function d_(t){const e={};for(const z in t)z in lg||(e[z]=t[z]);if(t.css===!1)return e;const{name:n="v",type:r,duration:i,enterFromClass:s=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:l=s,appearActiveClass:c=o,appearToClass:d=a,leaveFromClass:u=`${n}-leave-from`,leaveActiveClass:h=`${n}-leave-active`,leaveToClass:f=`${n}-leave-to`}=t,g=u_(i),y=g&&g[0],w=g&&g[1],{onBeforeEnter:b,onEnter:E,onEnterCancelled:A,onLeave:v,onLeaveCancelled:S,onBeforeAppear:L=b,onAppear:G=E,onAppearCancelled:V=A}=e,F=(z,N,k,I)=>{z._enterCancelled=I,mr(z,N?d:a),mr(z,N?c:o),k&&k()},$=(z,N)=>{z._isLeaving=!1,mr(z,u),mr(z,f),mr(z,h),N&&N()},H=z=>(N,k)=>{const I=z?G:E,C=()=>F(N,z,k);gr(I,[N,C]),uu(()=>{mr(N,z?l:s),Sn(N,z?d:a),du(I)||hu(N,r,y,C)})};return dt(e,{onBeforeEnter(z){gr(b,[z]),Sn(z,s),Sn(z,o)},onBeforeAppear(z){gr(L,[z]),Sn(z,l),Sn(z,c)},onEnter:H(!1),onAppear:H(!0),onLeave(z,N){z._isLeaving=!0;const k=()=>$(z,N);Sn(z,u),z._enterCancelled?(Sn(z,h),gu(z)):(gu(z),Sn(z,h)),uu(()=>{z._isLeaving&&(mr(z,u),Sn(z,f),du(v)||hu(z,r,w,k))}),gr(v,[z,k])},onEnterCancelled(z){F(z,!1,void 0,!0),gr(A,[z])},onAppearCancelled(z){F(z,!0,void 0,!0),gr(V,[z])},onLeaveCancelled(z){$(z),gr(S,[z])}})}function u_(t){if(t==null)return null;if(ze(t))return[Fa(t.enter),Fa(t.leave)];{const e=Fa(t);return[e,e]}}function Fa(t){return pv(t)}function Sn(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[cs]||(t[cs]=new Set)).add(e)}function mr(t,e){e.split(/\s+/).forEach(r=>r&&t.classList.remove(r));const n=t[cs];n&&(n.delete(e),n.size||(t[cs]=void 0))}function uu(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let h_=0;function hu(t,e,n,r){const i=t._endId=++h_,s=()=>{i===t._endId&&r()};if(n!=null)return setTimeout(s,n);const{type:o,timeout:a,propCount:l}=f_(t,e);if(!o)return r();const c=o+"end";let d=0;const u=()=>{t.removeEventListener(c,h),s()},h=f=>{f.target===t&&++d>=l&&u()};setTimeout(()=>{d<l&&u()},a+1),t.addEventListener(c,h)}function f_(t,e){const n=window.getComputedStyle(t),r=g=>(n[g]||"").split(", "),i=r(`${Yn}Delay`),s=r(`${Yn}Duration`),o=fu(i,s),a=r(`${Ci}Delay`),l=r(`${Ci}Duration`),c=fu(a,l);let d=null,u=0,h=0;e===Yn?o>0&&(d=Yn,u=o,h=s.length):e===Ci?c>0&&(d=Ci,u=c,h=l.length):(u=Math.max(o,c),d=u>0?o>c?Yn:Ci:null,h=d?d===Yn?s.length:l.length:0);const f=d===Yn&&/\b(?:transform|all)(?:,|$)/.test(r(`${Yn}Property`).toString());return{type:d,timeout:u,propCount:h,hasTransform:f}}function fu(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,r)=>pu(n)+pu(t[r])))}function pu(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function gu(t){return(t?t.ownerDocument:document).body.offsetHeight}function p_(t,e,n){const r=t[cs];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const Ro=Symbol("_vod"),cg=Symbol("_vsh"),$s={name:"show",beforeMount(t,{value:e},{transition:n}){t[Ro]=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):Si(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:r}){!e!=!n&&(r?e?(r.beforeEnter(t),Si(t,!0),r.enter(t)):r.leave(t,()=>{Si(t,!1)}):Si(t,e))},beforeUnmount(t,{value:e}){Si(t,e)}};function Si(t,e){t.style.display=e?t[Ro]:"none",t[cg]=!e}const g_=Symbol(""),m_=/(?:^|;)\s*display\s*:/;function y_(t,e,n){const r=t.style,i=qe(n);let s=!1;if(n&&!i){if(e)if(qe(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&ho(r,a,"")}else for(const o in e)n[o]==null&&ho(r,o,"");for(const o in n)o==="display"&&(s=!0),ho(r,o,n[o])}else if(i){if(e!==n){const o=r[g_];o&&(n+=";"+o),r.cssText=n,s=m_.test(n)}}else e&&t.removeAttribute("style");Ro in t&&(t[Ro]=s?r.display:"",t[cg]&&(r.display="none"))}const mu=/\s*!important$/;function ho(t,e,n){if(Se(n))n.forEach(r=>ho(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=v_(t,e);mu.test(n)?t.setProperty(hr(r),n.replace(mu,""),"important"):t[r]=n}}const yu=["Webkit","Moz","ms"],$a={};function v_(t,e){const n=$a[e];if(n)return n;let r=Xt(e);if(r!=="filter"&&r in t)return $a[e]=r;r=ta(r);for(let i=0;i<yu.length;i++){const s=yu[i]+r;if(s in t)return $a[e]=s}return e}const vu="http://www.w3.org/1999/xlink";function _u(t,e,n,r,i,s=bv(e)){r&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(vu,e.slice(6,e.length)):t.setAttributeNS(vu,e,n):n==null||s&&!Jf(n)?t.removeAttribute(e):t.setAttribute(e,s?"":on(n)?String(n):n)}function bu(t,e,n,r,i){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?ag(n):n);return}const s=t.tagName;if(e==="value"&&s!=="PROGRESS"&&!s.includes("-")){const a=s==="OPTION"?t.getAttribute("value")||"":t.value,l=n==null?t.type==="checkbox"?"on":"":String(n);(a!==l||!("_value"in t))&&(t.value=l),n==null&&t.removeAttribute(e),t._value=n;return}let o=!1;if(n===""||n==null){const a=typeof t[e];a==="boolean"?n=Jf(n):n==null&&a==="string"?(n="",o=!0):a==="number"&&(n=0,o=!0)}try{t[e]=n}catch{}o&&t.removeAttribute(i||e)}function sr(t,e,n,r){t.addEventListener(e,n,r)}function __(t,e,n,r){t.removeEventListener(e,n,r)}const wu=Symbol("_vei");function b_(t,e,n,r,i=null){const s=t[wu]||(t[wu]={}),o=s[e];if(r&&o)o.value=r;else{const[a,l]=w_(e);if(r){const c=s[e]=k_(r,i);sr(t,a,c,l)}else o&&(__(t,a,o,l),s[e]=void 0)}}const Eu=/(?:Once|Passive|Capture)$/;function w_(t){let e;if(Eu.test(t)){e={};let r;for(;r=t.match(Eu);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):hr(t.slice(2)),e]}let za=0;const E_=Promise.resolve(),A_=()=>za||(E_.then(()=>za=0),za=Date.now());function k_(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;ln(x_(r,n.value),e,5,[r])};return n.value=t,n.attached=A_(),n}function x_(t,e){if(Se(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>i=>!i._stopped&&r&&r(i))}else return e}const Au=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,C_=(t,e,n,r,i,s)=>{const o=i==="svg";e==="class"?p_(t,r,o):e==="style"?y_(t,n,r):Jo(e)?Fc(e)||b_(t,e,n,r,s):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):S_(t,e,r,o))?(bu(t,e,r),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&_u(t,e,r,o,s,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!qe(r))?bu(t,Xt(e),r,s,e):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),_u(t,e,r,o))};function S_(t,e,n,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&Au(e)&&Le(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="sandbox"&&t.tagName==="IFRAME"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const i=t.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return Au(e)&&qe(n)?!1:e in t}const ci=t=>{const e=t.props["onUpdate:modelValue"]||!1;return Se(e)?n=>ao(e,n):e};function T_(t){t.target.composing=!0}function ku(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Bn=Symbol("_assign");function xu(t,e,n){return e&&(t=t.trim()),n&&(t=na(t)),t}const Cu={created(t,{modifiers:{lazy:e,trim:n,number:r}},i){t[Bn]=ci(i);const s=r||i.props&&i.props.type==="number";sr(t,e?"change":"input",o=>{o.target.composing||t[Bn](xu(t.value,n,s))}),(n||s)&&sr(t,"change",()=>{t.value=xu(t.value,n,s)}),e||(sr(t,"compositionstart",T_),sr(t,"compositionend",ku),sr(t,"change",ku))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:r,trim:i,number:s}},o){if(t[Bn]=ci(o),t.composing)return;const a=(s||t.type==="number")&&!/^0\d/.test(t.value)?na(t.value):t.value,l=e??"";a!==l&&(document.activeElement===t&&t.type!=="range"&&(r&&e===n||i&&t.value.trim()===l)||(t.value=l))}},Vl={created(t,{value:e},n){t.checked=ai(e,n.props.value),t[Bn]=ci(n),sr(t,"change",()=>{t[Bn](ds(t))})},beforeUpdate(t,{value:e,oldValue:n},r){t[Bn]=ci(r),e!==n&&(t.checked=ai(e,r.props.value))}},di={deep:!0,created(t,{value:e,modifiers:{number:n}},r){const i=Qo(e);sr(t,"change",()=>{const s=Array.prototype.filter.call(t.options,o=>o.selected).map(o=>n?na(ds(o)):ds(o));t[Bn](t.multiple?i?new Set(s):s:s[0]),t._assigning=!0,Ir(()=>{t._assigning=!1})}),t[Bn]=ci(r)},mounted(t,{value:e}){Su(t,e)},beforeUpdate(t,e,n){t[Bn]=ci(n)},updated(t,{value:e}){t._assigning||Su(t,e)}};function Su(t,e){const n=t.multiple,r=Se(e);if(!(n&&!r&&!Qo(e))){for(let i=0,s=t.options.length;i<s;i++){const o=t.options[i],a=ds(o);if(n)if(r){const l=typeof a;l==="string"||l==="number"?o.selected=e.some(c=>String(c)===String(a)):o.selected=Ev(e,a)>-1}else o.selected=e.has(a);else if(ai(ds(o),e)){t.selectedIndex!==i&&(t.selectedIndex=i);return}}!n&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function ds(t){return"_value"in t?t._value:t.value}const R_=["ctrl","shift","alt","meta"],N_={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>R_.some(n=>t[`${n}Key`]&&!e.includes(n))},dg=(t,e)=>{const n=t._withMods||(t._withMods={}),r=e.join(".");return n[r]||(n[r]=((i,...s)=>{for(let o=0;o<e.length;o++){const a=N_[e[o]];if(a&&a(i,e))return}return t(i,...s)}))},L_={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Ti=(t,e)=>{const n=t._withKeys||(t._withKeys={}),r=e.join(".");return n[r]||(n[r]=(i=>{if(!("key"in i))return;const s=hr(i.key);if(e.some(o=>o===s||L_[o]===s))return t(i)}))},I_=dt({patchProp:C_},a_);let Tu;function D_(){return Tu||(Tu=z0(I_))}const P_=((...t)=>{const e=D_().createApp(...t),{mount:n}=e;return e.mount=r=>{const i=M_(r);if(!i)return;const s=e._component;!Le(s)&&!s.render&&!s.template&&(s.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const o=n(i,!1,G_(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},e});function G_(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function M_(t){return qe(t)?document.querySelector(t):t}const jr=typeof document<"u";function ug(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function O_(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&ug(t.default)}const Fe=Object.assign;function Ba(t,e){const n={};for(const r in e){const i=e[r];n[r]=cn(i)?i.map(t):t(i)}return n}const Qi=()=>{},cn=Array.isArray;function Ru(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}const hg=/#/g,F_=/&/g,$_=/\//g,z_=/=/g,B_=/\?/g,fg=/\+/g,V_=/%5B/g,U_=/%5D/g,pg=/%5E/g,j_=/%60/g,gg=/%7B/g,H_=/%7C/g,mg=/%7D/g,W_=/%20/g;function ed(t){return t==null?"":encodeURI(""+t).replace(H_,"|").replace(V_,"[").replace(U_,"]")}function q_(t){return ed(t).replace(gg,"{").replace(mg,"}").replace(pg,"^")}function Ul(t){return ed(t).replace(fg,"%2B").replace(W_,"+").replace(hg,"%23").replace(F_,"%26").replace(j_,"`").replace(gg,"{").replace(mg,"}").replace(pg,"^")}function K_(t){return Ul(t).replace(z_,"%3D")}function X_(t){return ed(t).replace(hg,"%23").replace(B_,"%3F")}function Z_(t){return X_(t).replace($_,"%2F")}function us(t){if(t==null)return null;try{return decodeURIComponent(""+t)}catch{}return""+t}const Y_=/\/$/,J_=t=>t.replace(Y_,"");function Va(t,e,n="/"){let r,i={},s="",o="";const a=e.indexOf("#");let l=e.indexOf("?");return l=a>=0&&l>a?-1:l,l>=0&&(r=e.slice(0,l),s=e.slice(l,a>0?a:e.length),i=t(s.slice(1))),a>=0&&(r=r||e.slice(0,a),o=e.slice(a,e.length)),r=nb(r??e,n),{fullPath:r+s+o,path:r,query:i,hash:us(o)}}function Q_(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function Nu(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function eb(t,e,n){const r=e.matched.length-1,i=n.matched.length-1;return r>-1&&r===i&&ui(e.matched[r],n.matched[i])&&yg(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function ui(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function yg(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!tb(t[n],e[n]))return!1;return!0}function tb(t,e){return cn(t)?Lu(t,e):cn(e)?Lu(e,t):t===e}function Lu(t,e){return cn(e)?t.length===e.length&&t.every((n,r)=>n===e[r]):t.length===1&&t[0]===e}function nb(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/"),i=r[r.length-1];(i===".."||i===".")&&r.push("");let s=n.length-1,o,a;for(o=0;o<r.length;o++)if(a=r[o],a!==".")if(a==="..")s>1&&s--;else break;return n.slice(0,s).join("/")+"/"+r.slice(o).join("/")}const Jn={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let jl=(function(t){return t.pop="pop",t.push="push",t})({}),Ua=(function(t){return t.back="back",t.forward="forward",t.unknown="",t})({});function rb(t){if(!t)if(jr){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),J_(t)}const ib=/^[^#]+#/;function sb(t,e){return t.replace(ib,"#")+e}function ob(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}const ua=()=>({left:window.scrollX,top:window.scrollY});function ab(t){let e;if("el"in t){const n=t.el,r=typeof n=="string"&&n.startsWith("#"),i=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!i)return;e=ob(i,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function Iu(t,e){return(history.state?history.state.position-e:-1)+t}const Hl=new Map;function lb(t,e){Hl.set(t,e)}function cb(t){const e=Hl.get(t);return Hl.delete(t),e}function db(t){return typeof t=="string"||t&&typeof t=="object"}function vg(t){return typeof t=="string"||typeof t=="symbol"}let Ke=(function(t){return t[t.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",t[t.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",t[t.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",t[t.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",t[t.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",t})({});const _g=Symbol("");Ke.MATCHER_NOT_FOUND+"",Ke.NAVIGATION_GUARD_REDIRECT+"",Ke.NAVIGATION_ABORTED+"",Ke.NAVIGATION_CANCELLED+"",Ke.NAVIGATION_DUPLICATED+"";function hi(t,e){return Fe(new Error,{type:t,[_g]:!0},e)}function Tn(t,e){return t instanceof Error&&_g in t&&(e==null||!!(t.type&e))}const ub=["params","query","hash"];function hb(t){if(typeof t=="string")return t;if(t.path!=null)return t.path;const e={};for(const n of ub)n in t&&(e[n]=t[n]);return JSON.stringify(e,null,2)}function fb(t){const e={};if(t===""||t==="?")return e;const n=(t[0]==="?"?t.slice(1):t).split("&");for(let r=0;r<n.length;++r){const i=n[r].replace(fg," "),s=i.indexOf("="),o=us(s<0?i:i.slice(0,s)),a=s<0?null:us(i.slice(s+1));if(o in e){let l=e[o];cn(l)||(l=e[o]=[l]),l.push(a)}else e[o]=a}return e}function Du(t){let e="";for(let n in t){const r=t[n];if(n=K_(n),r==null){r!==void 0&&(e+=(e.length?"&":"")+n);continue}(cn(r)?r.map(i=>i&&Ul(i)):[r&&Ul(r)]).forEach(i=>{i!==void 0&&(e+=(e.length?"&":"")+n,i!=null&&(e+="="+i))})}return e}function pb(t){const e={};for(const n in t){const r=t[n];r!==void 0&&(e[n]=cn(r)?r.map(i=>i==null?null:""+i):r==null?r:""+r)}return e}const gb=Symbol(""),Pu=Symbol(""),td=Symbol(""),nd=Symbol(""),Wl=Symbol("");function Ri(){let t=[];function e(r){return t.push(r),()=>{const i=t.indexOf(r);i>-1&&t.splice(i,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function ir(t,e,n,r,i,s=o=>o()){const o=r&&(r.enterCallbacks[i]=r.enterCallbacks[i]||[]);return()=>new Promise((a,l)=>{const c=h=>{h===!1?l(hi(Ke.NAVIGATION_ABORTED,{from:n,to:e})):h instanceof Error?l(h):db(h)?l(hi(Ke.NAVIGATION_GUARD_REDIRECT,{from:e,to:h})):(o&&r.enterCallbacks[i]===o&&typeof h=="function"&&o.push(h),a())},d=s(()=>t.call(r&&r.instances[i],e,n,c));let u=Promise.resolve(d);t.length<3&&(u=u.then(c)),u.catch(h=>l(h))})}function ja(t,e,n,r,i=s=>s()){const s=[];for(const o of t)for(const a in o.components){let l=o.components[a];if(!(e!=="beforeRouteEnter"&&!o.instances[a]))if(ug(l)){const c=(l.__vccOpts||l)[e];c&&s.push(ir(c,n,r,o,a,i))}else{let c=l();s.push(()=>c.then(d=>{if(!d)throw new Error(`Couldn't resolve component "${a}" at "${o.path}"`);const u=O_(d)?d.default:d;o.mods[a]=d,o.components[a]=u;const h=(u.__vccOpts||u)[e];return h&&ir(h,n,r,o,a,i)()}))}}return s}function mb(t,e){const n=[],r=[],i=[],s=Math.max(e.matched.length,t.matched.length);for(let o=0;o<s;o++){const a=e.matched[o];a&&(t.matched.find(c=>ui(c,a))?r.push(a):n.push(a));const l=t.matched[o];l&&(e.matched.find(c=>ui(c,l))||i.push(l))}return[n,r,i]}let yb=()=>location.protocol+"//"+location.host;function bg(t,e){const{pathname:n,search:r,hash:i}=e,s=t.indexOf("#");if(s>-1){let o=i.includes(t.slice(s))?t.slice(s).length:1,a=i.slice(o);return a[0]!=="/"&&(a="/"+a),Nu(a,"")}return Nu(n,t)+r+i}function vb(t,e,n,r){let i=[],s=[],o=null;const a=({state:h})=>{const f=bg(t,location),g=n.value,y=e.value;let w=0;if(h){if(n.value=f,e.value=h,o&&o===g){o=null;return}w=y?h.position-y.position:0}else r(f);i.forEach(b=>{b(n.value,g,{delta:w,type:jl.pop,direction:w?w>0?Ua.forward:Ua.back:Ua.unknown})})};function l(){o=n.value}function c(h){i.push(h);const f=()=>{const g=i.indexOf(h);g>-1&&i.splice(g,1)};return s.push(f),f}function d(){if(document.visibilityState==="hidden"){const{history:h}=window;if(!h.state)return;h.replaceState(Fe({},h.state,{scroll:ua()}),"")}}function u(){for(const h of s)h();s=[],window.removeEventListener("popstate",a),window.removeEventListener("pagehide",d),document.removeEventListener("visibilitychange",d)}return window.addEventListener("popstate",a),window.addEventListener("pagehide",d),document.addEventListener("visibilitychange",d),{pauseListeners:l,listen:c,destroy:u}}function Gu(t,e,n,r=!1,i=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:i?ua():null}}function _b(t){const{history:e,location:n}=window,r={value:bg(t,n)},i={value:e.state};i.value||s(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function s(l,c,d){const u=t.indexOf("#"),h=u>-1?(n.host&&document.querySelector("base")?t:t.slice(u))+l:yb()+t+l;try{e[d?"replaceState":"pushState"](c,"",h),i.value=c}catch(f){console.error(f),n[d?"replace":"assign"](h)}}function o(l,c){s(l,Fe({},e.state,Gu(i.value.back,l,i.value.forward,!0),c,{position:i.value.position}),!0),r.value=l}function a(l,c){const d=Fe({},i.value,e.state,{forward:l,scroll:ua()});s(d.current,d,!0),s(l,Fe({},Gu(r.value,l,null),{position:d.position+1},c),!1),r.value=l}return{location:r,state:i,push:a,replace:o}}function bb(t){t=rb(t);const e=_b(t),n=vb(t,e.state,e.location,e.replace);function r(s,o=!0){o||n.pauseListeners(),history.go(s)}const i=Fe({location:"",base:t,go:r,createHref:sb.bind(null,t)},e,n);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>e.state.value}),i}let xr=(function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.Group=2]="Group",t})({});var nt=(function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.ParamRegExp=2]="ParamRegExp",t[t.ParamRegExpEnd=3]="ParamRegExpEnd",t[t.EscapeNext=4]="EscapeNext",t})(nt||{});const wb={type:xr.Static,value:""},Eb=/[a-zA-Z0-9_]/;function Ab(t){if(!t)return[[]];if(t==="/")return[[wb]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(f){throw new Error(`ERR (${n})/"${c}": ${f}`)}let n=nt.Static,r=n;const i=[];let s;function o(){s&&i.push(s),s=[]}let a=0,l,c="",d="";function u(){c&&(n===nt.Static?s.push({type:xr.Static,value:c}):n===nt.Param||n===nt.ParamRegExp||n===nt.ParamRegExpEnd?(s.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),s.push({type:xr.Param,value:c,regexp:d,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),c="")}function h(){c+=l}for(;a<t.length;){if(l=t[a++],l==="\\"&&n!==nt.ParamRegExp){r=n,n=nt.EscapeNext;continue}switch(n){case nt.Static:l==="/"?(c&&u(),o()):l===":"?(u(),n=nt.Param):h();break;case nt.EscapeNext:h(),n=r;break;case nt.Param:l==="("?n=nt.ParamRegExp:Eb.test(l)?h():(u(),n=nt.Static,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case nt.ParamRegExp:l===")"?d[d.length-1]=="\\"?d=d.slice(0,-1)+l:n=nt.ParamRegExpEnd:d+=l;break;case nt.ParamRegExpEnd:u(),n=nt.Static,l!=="*"&&l!=="?"&&l!=="+"&&a--,d="";break;default:e("Unknown state");break}}return n===nt.ParamRegExp&&e(`Unfinished custom RegExp for param "${c}"`),u(),o(),i}const Mu="[^/]+?",kb={sensitive:!1,strict:!1,start:!0,end:!0};var St=(function(t){return t[t._multiplier=10]="_multiplier",t[t.Root=90]="Root",t[t.Segment=40]="Segment",t[t.SubSegment=30]="SubSegment",t[t.Static=40]="Static",t[t.Dynamic=20]="Dynamic",t[t.BonusCustomRegExp=10]="BonusCustomRegExp",t[t.BonusWildcard=-50]="BonusWildcard",t[t.BonusRepeatable=-20]="BonusRepeatable",t[t.BonusOptional=-8]="BonusOptional",t[t.BonusStrict=.7000000000000001]="BonusStrict",t[t.BonusCaseSensitive=.25]="BonusCaseSensitive",t})(St||{});const xb=/[.+*?^${}()[\]/\\]/g;function Cb(t,e){const n=Fe({},kb,e),r=[];let i=n.start?"^":"";const s=[];for(const c of t){const d=c.length?[]:[St.Root];n.strict&&!c.length&&(i+="/");for(let u=0;u<c.length;u++){const h=c[u];let f=St.Segment+(n.sensitive?St.BonusCaseSensitive:0);if(h.type===xr.Static)u||(i+="/"),i+=h.value.replace(xb,"\\$&"),f+=St.Static;else if(h.type===xr.Param){const{value:g,repeatable:y,optional:w,regexp:b}=h;s.push({name:g,repeatable:y,optional:w});const E=b||Mu;if(E!==Mu){f+=St.BonusCustomRegExp;try{`${E}`}catch(v){throw new Error(`Invalid custom RegExp for param "${g}" (${E}): `+v.message)}}let A=y?`((?:${E})(?:/(?:${E}))*)`:`(${E})`;u||(A=w&&c.length<2?`(?:/${A})`:"/"+A),w&&(A+="?"),i+=A,f+=St.Dynamic,w&&(f+=St.BonusOptional),y&&(f+=St.BonusRepeatable),E===".*"&&(f+=St.BonusWildcard)}d.push(f)}r.push(d)}if(n.strict&&n.end){const c=r.length-1;r[c][r[c].length-1]+=St.BonusStrict}n.strict||(i+="/?"),n.end?i+="$":n.strict&&!i.endsWith("/")&&(i+="(?:/|$)");const o=new RegExp(i,n.sensitive?"":"i");function a(c){const d=c.match(o),u={};if(!d)return null;for(let h=1;h<d.length;h++){const f=d[h]||"",g=s[h-1];u[g.name]=f&&g.repeatable?f.split("/"):f}return u}function l(c){let d="",u=!1;for(const h of t){(!u||!d.endsWith("/"))&&(d+="/"),u=!1;for(const f of h)if(f.type===xr.Static)d+=f.value;else if(f.type===xr.Param){const{value:g,repeatable:y,optional:w}=f,b=g in c?c[g]:"";if(cn(b)&&!y)throw new Error(`Provided param "${g}" is an array but it is not repeatable (* or + modifiers)`);const E=cn(b)?b.join("/"):b;if(!E)if(w)h.length<2&&(d.endsWith("/")?d=d.slice(0,-1):u=!0);else throw new Error(`Missing required param "${g}"`);d+=E}}return d||"/"}return{re:o,score:r,keys:s,parse:a,stringify:l}}function Sb(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?t.length===1&&t[0]===St.Static+St.Segment?-1:1:t.length>e.length?e.length===1&&e[0]===St.Static+St.Segment?1:-1:0}function wg(t,e){let n=0;const r=t.score,i=e.score;for(;n<r.length&&n<i.length;){const s=Sb(r[n],i[n]);if(s)return s;n++}if(Math.abs(i.length-r.length)===1){if(Ou(r))return 1;if(Ou(i))return-1}return i.length-r.length}function Ou(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const Tb={strict:!1,end:!0,sensitive:!1};function Rb(t,e,n){const r=Cb(Ab(t.path),n),i=Fe(r,{record:t,parent:e,children:[],alias:[]});return e&&!i.record.aliasOf==!e.record.aliasOf&&e.children.push(i),i}function Nb(t,e){const n=[],r=new Map;e=Ru(Tb,e);function i(u){return r.get(u)}function s(u,h,f){const g=!f,y=$u(u);y.aliasOf=f&&f.record;const w=Ru(e,u),b=[y];if("alias"in u){const v=typeof u.alias=="string"?[u.alias]:u.alias;for(const S of v)b.push($u(Fe({},y,{components:f?f.record.components:y.components,path:S,aliasOf:f?f.record:y})))}let E,A;for(const v of b){const{path:S}=v;if(h&&S[0]!=="/"){const L=h.record.path,G=L[L.length-1]==="/"?"":"/";v.path=h.record.path+(S&&G+S)}if(E=Rb(v,h,w),f?f.alias.push(E):(A=A||E,A!==E&&A.alias.push(E),g&&u.name&&!zu(E)&&o(u.name)),Eg(E)&&l(E),y.children){const L=y.children;for(let G=0;G<L.length;G++)s(L[G],E,f&&f.children[G])}f=f||E}return A?()=>{o(A)}:Qi}function o(u){if(vg(u)){const h=r.get(u);h&&(r.delete(u),n.splice(n.indexOf(h),1),h.children.forEach(o),h.alias.forEach(o))}else{const h=n.indexOf(u);h>-1&&(n.splice(h,1),u.record.name&&r.delete(u.record.name),u.children.forEach(o),u.alias.forEach(o))}}function a(){return n}function l(u){const h=Db(u,n);n.splice(h,0,u),u.record.name&&!zu(u)&&r.set(u.record.name,u)}function c(u,h){let f,g={},y,w;if("name"in u&&u.name){if(f=r.get(u.name),!f)throw hi(Ke.MATCHER_NOT_FOUND,{location:u});w=f.record.name,g=Fe(Fu(h.params,f.keys.filter(A=>!A.optional).concat(f.parent?f.parent.keys.filter(A=>A.optional):[]).map(A=>A.name)),u.params&&Fu(u.params,f.keys.map(A=>A.name))),y=f.stringify(g)}else if(u.path!=null)y=u.path,f=n.find(A=>A.re.test(y)),f&&(g=f.parse(y),w=f.record.name);else{if(f=h.name?r.get(h.name):n.find(A=>A.re.test(h.path)),!f)throw hi(Ke.MATCHER_NOT_FOUND,{location:u,currentLocation:h});w=f.record.name,g=Fe({},h.params,u.params),y=f.stringify(g)}const b=[];let E=f;for(;E;)b.unshift(E.record),E=E.parent;return{name:w,path:y,params:g,matched:b,meta:Ib(b)}}t.forEach(u=>s(u));function d(){n.length=0,r.clear()}return{addRoute:s,resolve:c,removeRoute:o,clearRoutes:d,getRoutes:a,getRecordMatcher:i}}function Fu(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function $u(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:Lb(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function Lb(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]=typeof n=="object"?n[r]:n;return e}function zu(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function Ib(t){return t.reduce((e,n)=>Fe(e,n.meta),{})}function Db(t,e){let n=0,r=e.length;for(;n!==r;){const s=n+r>>1;wg(t,e[s])<0?r=s:n=s+1}const i=Pb(t);return i&&(r=e.lastIndexOf(i,r-1)),r}function Pb(t){let e=t;for(;e=e.parent;)if(Eg(e)&&wg(t,e)===0)return e}function Eg({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function Bu(t){const e=bn(td),n=bn(nd),r=st(()=>{const l=m(t.to);return e.resolve(l)}),i=st(()=>{const{matched:l}=r.value,{length:c}=l,d=l[c-1],u=n.matched;if(!d||!u.length)return-1;const h=u.findIndex(ui.bind(null,d));if(h>-1)return h;const f=Vu(l[c-2]);return c>1&&Vu(d)===f&&u[u.length-1].path!==f?u.findIndex(ui.bind(null,l[c-2])):h}),s=st(()=>i.value>-1&&$b(n.params,r.value.params)),o=st(()=>i.value>-1&&i.value===n.matched.length-1&&yg(n.params,r.value.params));function a(l={}){if(Fb(l)){const c=e[m(t.replace)?"replace":"push"](m(t.to)).catch(Qi);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>c),c}return Promise.resolve()}return{route:r,href:st(()=>r.value.href),isActive:s,isExactActive:o,navigate:a}}function Gb(t){return t.length===1?t[0]:t}const Mb=Ip({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:Bu,setup(t,{slots:e}){const n=As(Bu(t)),{options:r}=bn(td),i=st(()=>({[Uu(t.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[Uu(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const s=e.default&&Gb(e.default(n));return t.custom?s:Qc("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:i.value},s)}}}),Ob=Mb;function Fb(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function $b(t,e){for(const n in e){const r=e[n],i=t[n];if(typeof r=="string"){if(r!==i)return!1}else if(!cn(i)||i.length!==r.length||r.some((s,o)=>s!==i[o]))return!1}return!0}function Vu(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const Uu=(t,e,n)=>t??e??n,zb=Ip({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const r=bn(Wl),i=st(()=>t.route||r.value),s=bn(Pu,0),o=st(()=>{let c=m(s);const{matched:d}=i.value;let u;for(;(u=d[c])&&!u.components;)c++;return c}),a=st(()=>i.value.matched[o.value]);co(Pu,st(()=>o.value+1)),co(gb,a),co(Wl,i);const l=ge();return Mt(()=>[l.value,a.value,t.name],([c,d,u],[h,f,g])=>{d&&(d.instances[u]=c,f&&f!==d&&c&&c===h&&(d.leaveGuards.size||(d.leaveGuards=f.leaveGuards),d.updateGuards.size||(d.updateGuards=f.updateGuards))),c&&d&&(!f||!ui(d,f)||!h)&&(d.enterCallbacks[u]||[]).forEach(y=>y(c))},{flush:"post"}),()=>{const c=i.value,d=t.name,u=a.value,h=u&&u.components[d];if(!h)return ju(n.default,{Component:h,route:c});const f=u.props[d],g=f?f===!0?c.params:typeof f=="function"?f(c):f:null,w=Qc(h,Fe({},g,e,{onVnodeUnmounted:b=>{b.component.isUnmounted&&(u.instances[d]=null)},ref:l}));return ju(n.default,{Component:w,route:c})||w}}});function ju(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const Bb=zb;function Vb(t){const e=Nb(t.routes,t),n=t.parseQuery||fb,r=t.stringifyQuery||Du,i=t.history,s=Ri(),o=Ri(),a=Ri(),l=jv(Jn);let c=Jn;jr&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const d=Ba.bind(null,q=>""+q),u=Ba.bind(null,Z_),h=Ba.bind(null,us);function f(q,J){let U,ee;return vg(q)?(U=e.getRecordMatcher(q),ee=J):ee=q,e.addRoute(ee,U)}function g(q){const J=e.getRecordMatcher(q);J&&e.removeRoute(J)}function y(){return e.getRoutes().map(q=>q.record)}function w(q){return!!e.getRecordMatcher(q)}function b(q,J){if(J=Fe({},J||l.value),typeof q=="string"){const P=Va(n,q,J.path),B=e.resolve({path:P.path},J),M=i.createHref(P.fullPath);return Fe(P,B,{params:h(B.params),hash:us(P.hash),redirectedFrom:void 0,href:M})}let U;if(q.path!=null)U=Fe({},q,{path:Va(n,q.path,J.path).path});else{const P=Fe({},q.params);for(const B in P)P[B]==null&&delete P[B];U=Fe({},q,{params:u(P)}),J.params=u(J.params)}const ee=e.resolve(U,J),ce=q.hash||"";ee.params=d(h(ee.params));const T=Q_(r,Fe({},q,{hash:q_(ce),path:ee.path})),D=i.createHref(T);return Fe({fullPath:T,hash:ce,query:r===Du?pb(q.query):q.query||{}},ee,{redirectedFrom:void 0,href:D})}function E(q){return typeof q=="string"?Va(n,q,l.value.path):Fe({},q)}function A(q,J){if(c!==q)return hi(Ke.NAVIGATION_CANCELLED,{from:J,to:q})}function v(q){return G(q)}function S(q){return v(Fe(E(q),{replace:!0}))}function L(q,J){const U=q.matched[q.matched.length-1];if(U&&U.redirect){const{redirect:ee}=U;let ce=typeof ee=="function"?ee(q,J):ee;return typeof ce=="string"&&(ce=ce.includes("?")||ce.includes("#")?ce=E(ce):{path:ce},ce.params={}),Fe({query:q.query,hash:q.hash,params:ce.path!=null?{}:q.params},ce)}}function G(q,J){const U=c=b(q),ee=l.value,ce=q.state,T=q.force,D=q.replace===!0,P=L(U,ee);if(P)return G(Fe(E(P),{state:typeof P=="object"?Fe({},ce,P.state):ce,force:T,replace:D}),J||U);const B=U;B.redirectedFrom=J;let M;return!T&&eb(r,ee,U)&&(M=hi(Ke.NAVIGATION_DUPLICATED,{to:B,from:ee}),fe(ee,ee,!0,!1)),(M?Promise.resolve(M):$(B,ee)).catch(Z=>Tn(Z)?Tn(Z,Ke.NAVIGATION_GUARD_REDIRECT)?Z:re(Z):O(Z,B,ee)).then(Z=>{if(Z){if(Tn(Z,Ke.NAVIGATION_GUARD_REDIRECT))return G(Fe({replace:D},E(Z.to),{state:typeof Z.to=="object"?Fe({},ce,Z.to.state):ce,force:T}),J||B)}else Z=z(B,ee,!0,D,ce);return H(B,ee,Z),Z})}function V(q,J){const U=A(q,J);return U?Promise.reject(U):Promise.resolve()}function F(q){const J=ve.values().next().value;return J&&typeof J.runWithContext=="function"?J.runWithContext(q):q()}function $(q,J){let U;const[ee,ce,T]=mb(q,J);U=ja(ee.reverse(),"beforeRouteLeave",q,J);for(const P of ee)P.leaveGuards.forEach(B=>{U.push(ir(B,q,J))});const D=V.bind(null,q,J);return U.push(D),De(U).then(()=>{U=[];for(const P of s.list())U.push(ir(P,q,J));return U.push(D),De(U)}).then(()=>{U=ja(ce,"beforeRouteUpdate",q,J);for(const P of ce)P.updateGuards.forEach(B=>{U.push(ir(B,q,J))});return U.push(D),De(U)}).then(()=>{U=[];for(const P of T)if(P.beforeEnter)if(cn(P.beforeEnter))for(const B of P.beforeEnter)U.push(ir(B,q,J));else U.push(ir(P.beforeEnter,q,J));return U.push(D),De(U)}).then(()=>(q.matched.forEach(P=>P.enterCallbacks={}),U=ja(T,"beforeRouteEnter",q,J,F),U.push(D),De(U))).then(()=>{U=[];for(const P of o.list())U.push(ir(P,q,J));return U.push(D),De(U)}).catch(P=>Tn(P,Ke.NAVIGATION_CANCELLED)?P:Promise.reject(P))}function H(q,J,U){a.list().forEach(ee=>F(()=>ee(q,J,U)))}function z(q,J,U,ee,ce){const T=A(q,J);if(T)return T;const D=J===Jn,P=jr?history.state:{};U&&(ee||D?i.replace(q.fullPath,Fe({scroll:D&&P&&P.scroll},ce)):i.push(q.fullPath,ce)),l.value=q,fe(q,J,U,D),re()}let N;function k(){N||(N=i.listen((q,J,U)=>{if(!Ee.listening)return;const ee=b(q),ce=L(ee,Ee.currentRoute.value);if(ce){G(Fe(ce,{replace:!0,force:!0}),ee).catch(Qi);return}c=ee;const T=l.value;jr&&lb(Iu(T.fullPath,U.delta),ua()),$(ee,T).catch(D=>Tn(D,Ke.NAVIGATION_ABORTED|Ke.NAVIGATION_CANCELLED)?D:Tn(D,Ke.NAVIGATION_GUARD_REDIRECT)?(G(Fe(E(D.to),{force:!0}),ee).then(P=>{Tn(P,Ke.NAVIGATION_ABORTED|Ke.NAVIGATION_DUPLICATED)&&!U.delta&&U.type===jl.pop&&i.go(-1,!1)}).catch(Qi),Promise.reject()):(U.delta&&i.go(-U.delta,!1),O(D,ee,T))).then(D=>{D=D||z(ee,T,!1),D&&(U.delta&&!Tn(D,Ke.NAVIGATION_CANCELLED)?i.go(-U.delta,!1):U.type===jl.pop&&Tn(D,Ke.NAVIGATION_ABORTED|Ke.NAVIGATION_DUPLICATED)&&i.go(-1,!1)),H(ee,T,D)}).catch(Qi)}))}let I=Ri(),C=Ri(),x;function O(q,J,U){re(q);const ee=C.list();return ee.length?ee.forEach(ce=>ce(q,J,U)):console.error(q),Promise.reject(q)}function X(){return x&&l.value!==Jn?Promise.resolve():new Promise((q,J)=>{I.add([q,J])})}function re(q){return x||(x=!q,k(),I.list().forEach(([J,U])=>q?U(q):J()),I.reset()),q}function fe(q,J,U,ee){const{scrollBehavior:ce}=t;if(!jr||!ce)return Promise.resolve();const T=!U&&cb(Iu(q.fullPath,0))||(ee||!U)&&history.state&&history.state.scroll||null;return Ir().then(()=>ce(q,J,T)).then(D=>D&&ab(D)).catch(D=>O(D,q,J))}const me=q=>i.go(q);let W;const ve=new Set,Ee={currentRoute:l,listening:!0,addRoute:f,removeRoute:g,clearRoutes:e.clearRoutes,hasRoute:w,getRoutes:y,resolve:b,options:t,push:v,replace:S,go:me,back:()=>me(-1),forward:()=>me(1),beforeEach:s.add,beforeResolve:o.add,afterEach:a.add,onError:C.add,isReady:X,install(q){q.component("RouterLink",Ob),q.component("RouterView",Bb),q.config.globalProperties.$router=Ee,Object.defineProperty(q.config.globalProperties,"$route",{enumerable:!0,get:()=>m(l)}),jr&&!W&&l.value===Jn&&(W=!0,v(i.location).catch(ee=>{}));const J={};for(const ee in Jn)Object.defineProperty(J,ee,{get:()=>l.value[ee],enumerable:!0});q.provide(td,Ee),q.provide(nd,gp(J)),q.provide(Wl,l);const U=q.unmount;ve.add(q),q.unmount=function(){ve.delete(q),ve.size<1&&(c=Jn,N&&N(),N=null,l.value=Jn,W=!1,x=!1),U()}}};function De(q){return q.reduce((J,U)=>J.then(()=>F(U)),Promise.resolve())}return Ee}function Ub(t){return bn(nd)}const $r={ERROR:1,WARN:2,INFO:3,DEBUG:4,TRACE:5},jb="info",Hu="sandbox_logging_filters",Wu=["themeswitcher","codemirroreditor","editoradapter"];class Hb{constructor(e={}){this.enabled=e.enabled!==!1,this.level=e.level||jb,this.prefix=e.prefix||"",this.component=this.prefix,this.redactSecrets=e.redactSecrets||!1,this.showTimestamp=e.showTimestamp!==!1,this.format=e.format||"[{timestamp}] [{prefix}] {message}",this.currentLevel=$r[this.level.toUpperCase()]??$r.INFO,this.loggingManager=e.loggingManager,this.console=e.console||console,this.component&&this.loggingManager&&this.loggingManager.registerComponent(this.component)}shouldLog(e){if(e.toUpperCase()==="ERROR")return this.enabled&&$r[e.toUpperCase()]<=this.currentLevel;const n=!this.component||!this.loggingManager||this.loggingManager.isComponentEnabled(this.component);return this.enabled&&n&&$r[e.toUpperCase()]<=this.currentLevel}redactArgs(e){return this.redactSecrets?e.map(n=>this.redactValue(n)):e}redactValue(e){if(typeof e=="string")return e.replace(/\b[a-zA-Z0-9_-]{20,}\b/g,"[REDACTED]");if(Array.isArray(e))return e.map(n=>this.redactValue(n));if(e&&typeof e=="object"&&e.constructor===Object){const n={};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=this.redactValue(e[r]));return n}return e}getTimestamp(){return new Date().toISOString()}formatMessage(e,...n){const r=this.showTimestamp?this.getTimestamp():"",i=this.prefix;let s=this.format.replace("{timestamp}",r).replace("{prefix}",i).replace("{message}",e);this.showTimestamp||(s=s.replace(/\s*\[?\]\s*/g," ").replace(/\s+/g," ").trim());const o=this.redactArgs(n);return[s,...o]}error(e,...n){this.shouldLog("error")&&this.console.error(...this.formatMessage(e,...n))}warn(e,...n){this.shouldLog("warn")&&this.console.warn(...this.formatMessage(e,...n))}info(e,...n){this.shouldLog("info")&&this.console.info(...this.formatMessage(e,...n))}log(e,...n){this.shouldLog("info")&&this.console.log(...this.formatMessage(e,...n))}debug(e,...n){this.shouldLog("debug")&&this.console.debug(...this.formatMessage(e,...n))}trace(e,...n){if(this.shouldLog("trace")){const r=this.redactSecrets;this.redactSecrets=!0;const i=this.formatMessage(e,...n);this.redactSecrets=r,this.console.trace(...i)}}table(e,n){if(this.shouldLog("info")){const r=this.prefix?`[${this.prefix}]`:"";r&&this.console.log(r),this.console.table(e,n)}}group(e){this.shouldLog("info")&&this.console.group(...this.formatMessage(e))}groupCollapsed(e){this.shouldLog("info")&&this.console.groupCollapsed(...this.formatMessage(e))}groupEnd(){this.shouldLog("info")&&this.console.groupEnd()}time(e){this.shouldLog("debug")&&this.console.time(this.prefix?`[${this.prefix}] ${e}`:e)}timeEnd(e){this.shouldLog("debug")&&this.console.timeEnd(this.prefix?`[${this.prefix}] ${e}`:e)}setLevel(e){this.level=e,this.currentLevel=$r[e.toUpperCase()]??$r.INFO}enable(){this.enabled=!0}disable(){this.enabled=!1}isEnabled(){return this.enabled}}class Wb{constructor(e={}){this.storage=e.storage,this.console=e.console||console,this.allowedComponents=new Set,this.globalEnabled=!0,this.allowAll=!1,this.registeredComponents=new Set,this.storage&&this.loadFromStorage()}enable(...e){e.forEach(n=>this.allowedComponents.add(n.toLowerCase())),this.saveToStorage(),this.console.log(" Logging enabled for:",e.join(", "))}disable(...e){e.forEach(n=>this.allowedComponents.delete(n.toLowerCase())),this.saveToStorage(),this.console.log(" Logging disabled for:",e.join(", "))}enableAll(){this.allowAll=!0,this.saveToStorage(),this.console.log(" Logging enabled for ALL components")}disableAll(){this.allowAll=!1,this.allowedComponents.clear(),this.saveToStorage(),this.console.log(" Logging disabled for ALL components (errors still show)")}status(){this.console.log(" Logging Status:"),this.console.log("  Global enabled:",this.globalEnabled),this.console.log("  Allow all:",this.allowAll),this.console.log("  Enabled components:",Array.from(this.allowedComponents).join(", ")||"none")}listComponents(){this.console.log(" Available components to filter:"),Array.from(this.registeredComponents).sort().forEach(e=>{const n=this.isComponentEnabled(e);this.console.log(`  ${n?"":""} ${e}`)})}isComponentEnabled(e){return this.globalEnabled?this.allowAll?!0:this.allowedComponents.has(e.toLowerCase()):!1}registerComponent(e){this.registeredComponents.add(e)}saveToStorage(){if(this.storage)try{const e={allowedComponents:Array.from(this.allowedComponents),allowAll:this.allowAll,globalEnabled:this.globalEnabled};this.storage.setItem(Hu,JSON.stringify(e))}catch{}}loadFromStorage(){if(this.storage)try{const e=this.storage.getItem(Hu),n=JSON.parse(e||"{}");this.allowedComponents=new Set(n.allowedComponents||[]),this.allowAll=n.allowAll||!1,this.globalEnabled=n.globalEnabled!==!1,e||(this.allowedComponents=new Set(Wu))}catch{this.allowedComponents=new Set(Wu)}}}class Ag{getItem(e){throw new Error("StorageAdapter.getItem must be implemented")}setItem(e,n){throw new Error("StorageAdapter.setItem must be implemented")}removeItem(e){throw new Error("StorageAdapter.removeItem must be implemented")}}class qb extends Ag{constructor(){super(),this.storage=new Map}getItem(e){return this.storage.get(e)??null}setItem(e,n){this.storage.set(e,n)}removeItem(e){this.storage.delete(e)}}class Kb extends Ag{getItem(e){try{return localStorage.getItem(e)}catch{return null}}setItem(e,n){try{localStorage.setItem(e,n)}catch{}}removeItem(e){try{localStorage.removeItem(e)}catch{}}}function Xb(){return typeof localStorage<"u"?new Kb:new qb}let kg=class{getGlobal(){throw new Error("GlobalAdapter.getGlobal must be implemented")}setGlobalProperty(e,n){throw new Error("GlobalAdapter.setGlobalProperty must be implemented")}hasGlobalProperty(e){throw new Error("GlobalAdapter.hasGlobalProperty must be implemented")}};class Zb extends kg{getGlobal(){return window}setGlobalProperty(e,n){window[e]=n}hasGlobalProperty(e){return e in window}}class Yb extends kg{getGlobal(){return globalThis}setGlobalProperty(e,n){globalThis[e]=n}hasGlobalProperty(e){return e in globalThis}}function Jb(){return typeof window<"u"?new Zb:new Yb}const Qb=Xb(),qu=Jb(),wr=new Wb({storage:Qb,console});if(typeof window<"u"){const t={enable:(...e)=>wr.enable(...e),disable:(...e)=>wr.disable(...e),enableAll:()=>wr.enableAll(),disableAll:()=>wr.disableAll(),status:()=>wr.status(),list:()=>wr.listComponents()};qu.setGlobalProperty("logFilter",t),qu.setGlobalProperty("loggerjs",t)}function Ze(t={}){return new Hb({...t,loggingManager:wr})}const ew=Ze({prefix:"i18n",level:"info"}),ql={en:{nav:{home:"Home",showcase:"Features Showcase",explorer:"Network Explorer",family:"Family Tree",docs:"Documentation"},common:{loading:"Loading...",error:"Error",success:"Success",darkMode:"Toggle dark mode",language:"Language"},footer:{madeBy:"Made with",by:"by",license:"MIT License"},home:{hero:{title:"Modern Network Analysis for JavaScript",subtitle:"Powerful graph theory and network analysis with worker-first architecture",description:"Analyze social networks, family trees, and complex graphs with ease. Fast parallel computation, comprehensive metrics, and beautiful visualizations - all in pure JavaScript.",cta:"Get Started",github:"View on GitHub"},features:[{icon:"",title:"Network Analytics",description:"Compute centrality metrics, clustering coefficients, and graph-level statistics with comprehensive analysis tools"},{icon:"",title:"Interactive Explorer",description:"Explore networks with drag-and-drop, zoom, pan, and real-time analysis of nodes and communities"},{icon:"",title:"Multiple Layouts",description:"11 layout algorithms including force-directed, Kamada-Kawai, spectral, and hierarchical layouts"},{icon:"",title:"Worker Performance",description:"Non-blocking UI with web workers for parallel computation on large graphs with thousands of nodes"},{icon:"",title:"Community Detection",description:"Find clusters and groups in networks using Louvain algorithm with modularity optimization"},{icon:"",title:"Rich Metrics",description:"Degree, betweenness, eigenvector, clustering, closeness, and more statistical features"}],code:{title:"Quick Start Example",snippet:`npm install @guinetik/graph-js

import NetworkStats from '@guinetik/graph-js';

const network = [
  { source: 'Alice', target: 'Bob', weight: 1 },
  { source: 'Bob', target: 'Carol', weight: 2 },
  { source: 'Carol', target: 'Alice', weight: 1 }
];

const analyzer = new NetworkStats({ verbose: true });
const results = await analyzer.analyze(network, ['degree', 'eigenvector']);

console.log(results);
// Analysis runs in workers for optimal performance!`}},docs:{title:"Documentation",subtitle:"Complete API reference for @guinetik/graph-js",sections:{quickStart:"Quick Start",coreClasses:"Core Classes",workers:"Worker Architecture",adapters:"Data Adapters",layouts:"Graph Layouts",community:"Community Detection",examples:"Usage Examples"},quickStart:{title:"Quick Start",install:"Installation",installCmd:"npm install @guinetik/graph-js",basicUsage:"Basic Usage",description:"Get started with network analysis in just a few lines of code."},graph:{title:"Graph",description:"Core graph data structure using adjacency maps for efficient operations.",methods:"Methods",methodsList:{addNode:{name:"addNode(nodeId)",description:"Add a single node to the graph"},addNodesFrom:{name:"addNodesFrom(nodeIds)",description:"Add multiple nodes from an array"},addEdge:{name:"addEdge(source, target, weight?)",description:"Add an edge between two nodes"},removeNode:{name:"removeNode(nodeId)",description:"Remove a node and all its edges"},getNeighbors:{name:"getNeighbors(nodeId)",description:"Get array of neighbor node IDs"},hasEdge:{name:"hasEdge(source, target)",description:"Check if edge exists"},numberOfNodes:{name:"numberOfNodes()",description:"Get total number of nodes"}}},networkStats:{title:"NetworkStats",description:"Main class for analyzing networks and calculating statistical metrics. All computation happens in web workers for optimal performance.",constructor:"Constructor",constructorParams:{verbose:"Enable detailed logging (default: true)",maxWorkers:"Maximum number of workers (default: auto-detect CPU cores)",taskTimeout:"Task timeout in milliseconds (default: 60000)",workerScript:"Custom worker script path for bundlers like Vite"},analyze:{title:"analyze() Method",description:"Compute network statistics for all nodes"},features:{title:"Available Features",degree:"Number of connections per node",eigenvector:"Influence based on connection quality (like PageRank)",eigenvectorLaplacian:"Laplacian eigenvector centrality (for spectral layouts)",betweenness:"Bridge importance between groups",clustering:"How densely connected neighbors are",closeness:"Average distance to all other nodes in the network",cliques:"Number of complete subgraphs containing the node",egoDensity:"Density of the node's immediate neighborhood",modularity:"Community assignment (Louvain algorithm)"}},workers:{title:"Worker Architecture",description:"All computation runs in Web Workers for non-blocking UI and optimal performance. The worker system includes intelligent affinity routing for JIT optimization, inspired by samsantosb/BeeThreads.",components:{title:"Components",workerManager:{name:"WorkerManager",description:"Singleton manager that initializes and routes tasks to workers"},workerPool:{name:"WorkerPool",description:"Pool of workers that execute tasks with automatic load balancing"},workerAdapter:{name:"WorkerAdapter",description:"Cross-platform adapter for Web Workers (browser) and Worker Threads (Node.js)"}},affinity:{title:"Worker Affinity System",description:"Routes repeated algorithm calls to the same worker, leveraging JavaScript JIT compilation for 10-30% faster repeated operations.",howItWorks:"How It Works",howItWorksSteps:["When a worker executes an algorithm, the function is JIT-compiled","The worker tracks which functions it has cached","Future calls for the same algorithm are routed to that worker",'The "hot" JIT-optimized code path is reused'],selectionTitle:"Selection Priority",selectionSteps:["Affinity Match: Find worker that previously ran the same algorithm","Least Loaded: Select worker with fewest tasks executed","FIFO Fallback: If affinity disabled, use first-available"]},config:{title:"Configuration",options:{maxWorkers:"Maximum workers (default: auto-detect CPU cores)",enableAffinity:"Enable worker affinity routing (default: true)",affinityCacheLimit:"Max cached functions per worker (default: 50)",taskTimeout:"Task timeout in milliseconds (default: 300000)"}},monitoring:{title:"Monitoring",description:"Get real-time statistics about worker pool and affinity performance"}},adapters:{title:"Data Adapters",description:"Convert between various graph formats and the standard GraphData format. All adapters use static methods.",csv:{title:"CSVAdapter",description:"Load and convert CSV files to graph format. Supports edge lists and node property files.",methods:"Methods",methodsList:{fromEdgeList:{name:"fromEdgeList(csvText, options)",description:'Parse CSV edge list. Options: header (default: true), delimiter (default: ","), weighted (default: true)',returns:"Returns GraphData with nodes and edges"},fromNodes:{name:"fromNodes(csvText, options)",description:"Parse CSV node properties",returns:"Returns array of NodeData objects"},loadFromURL:{name:"loadFromURL(edgeURL, nodeURL, options)",description:"Async method to fetch and parse CSV from URLs",returns:"Returns Promise<GraphData>"},toEdgeList:{name:"toEdgeList(graphData, options)",description:"Export edges to CSV string",returns:"Returns CSV string"},toNodes:{name:"toNodes(graphData, options)",description:"Export nodes to CSV string",returns:"Returns CSV string"}}},json:{title:"JSONAdapter",description:"Support for D3.js, Cytoscape, and other JSON formats. Auto-detects format.",methods:"Methods",methodsList:{fromD3:{name:"fromD3(d3Data)",description:'Convert D3.js force-directed format (with "links") to GraphData',returns:"Returns GraphData"},fromCytoscape:{name:"fromCytoscape(cytoData)",description:"Convert Cytoscape.js format to GraphData",returns:"Returns GraphData"},fromFormat:{name:"fromFormat(jsonData)",description:"Auto-detect format (GraphData, D3, Cytoscape, NetworkX)",returns:"Returns GraphData"},toD3:{name:"toD3(graphData)",description:'Convert to D3.js format with "links" property',returns:"Returns D3GraphData"},toCytoscape:{name:"toCytoscape(graphData)",description:"Convert to Cytoscape.js format",returns:"Returns CytoscapeData"},loadFromURL:{name:"loadFromURL(url)",description:"Async method to fetch and parse JSON",returns:"Returns Promise<GraphData>"}}},networkx:{title:"NetworkXAdapter",description:"Python NetworkX interoperability. Supports node-link and adjacency formats.",methods:"Methods",methodsList:{fromNodeLink:{name:"fromNodeLink(nxData)",description:"Convert NetworkX node-link format (most common)",returns:"Returns GraphData"},fromAdjacency:{name:"fromAdjacency(nxData)",description:"Convert NetworkX adjacency format",returns:"Returns GraphData"},toNodeLink:{name:"toNodeLink(graphData, options)",description:"Convert to node-link format. Options: directed (default: false), multigraph (default: false)",returns:"Returns NetworkX node-link data"},toAdjacency:{name:"toAdjacency(graphData)",description:"Convert to adjacency format",returns:"Returns array of node objects with adjacency lists"}}}},layouts:{title:"Graph Layouts",description:"Position nodes in 2D space using various algorithms. All layouts use async computation in Web Workers for optimal performance.",note:"All layout methods are async and return Promise<Object> with node positions {nodeId: {x, y}}",forceDirected:{title:"ForceDirectedLayout",description:"Spring-electrical model using Fruchterman-Reingold algorithm. Good for general-purpose network visualization.",complexity:"Time Complexity: O(iterations  V)",bestFor:"Best for: General networks, social graphs",constructor:"new ForceDirectedLayout(graph, options)",options:{iterations:"Number of simulation steps (default: 50)",k:"Optimal distance between nodes (default: auto-calculated)",scale:"Scale factor for positions (default: 1)",center:"Center point {x, y} (default: {x:0, y:0})",initialPositions:"Starting positions (default: random)",threshold:"Convergence threshold (default: 1e-4)"}},kamadaKawai:{title:"KamadaKawaiLayout",description:"Energy minimization based on all-pairs shortest paths. Produces aesthetically pleasing layouts.",complexity:"Time Complexity: O(V + iterations  V)",bestFor:"Best for: Small-medium graphs (<1000 nodes), trees, planar graphs",constructor:"new KamadaKawaiLayout(graph, options)",options:{iterations:"Maximum iterations (default: 1000)",scale:"Scale factor (default: 1)",center:"Center point (default: {x:0, y:0})",initialPositions:"Starting positions (default: circular)",threshold:"Convergence threshold (default: 1e-4)",K:"Spring constant scaling (default: auto)"}},spectral:{title:"SpectralLayout",description:"Uses Laplacian eigenvectors as coordinates. Excellent for visualizing community structure.",complexity:"Time Complexity: O(V) using pre-computed eigenvectors",bestFor:"Best for: Community visualization, graph topology",requires:'Requires: "eigenvector-laplacian" statistic must be pre-computed',constructor:"new SpectralLayout(graph, options)",options:{scale:"Scale factor (default: 100)",center:"Center point (default: {x:0, y:0})"}},circular:{title:"CircularLayout",description:"Positions nodes in a circle. Simple and clean for small networks.",complexity:"Time Complexity: O(V)",bestFor:"Best for: Small networks, cycle graphs",constructor:"new CircularLayout(graph, options)",options:{scale:"Circle radius (default: 100)",center:"Center point (default: {x:0, y:0})",sortBy:"Optional sort function for node order"}},shell:{title:"ShellLayout",description:"Concentric circles based on node degree. High-degree nodes in center.",complexity:"Time Complexity: O(V)",bestFor:"Best for: Hub-and-spoke networks, star graphs",requires:'Requires: "degree" statistic must be pre-computed',constructor:"new ShellLayout(graph, options)"},spiral:{title:"SpiralLayout",description:"Archimedean spiral pattern. Aesthetically pleasing for ordered data.",complexity:"Time Complexity: O(V)",bestFor:"Best for: Sequential or temporal networks",constructor:"new SpiralLayout(graph, options)"},bfs:{title:"BFSLayout",description:"Breadth-first search layers. Shows distance from root node.",complexity:"Time Complexity: O(V + E)",bestFor:"Best for: Trees, hierarchies, showing propagation",constructor:"new BFSLayout(graph, options)"},bipartite:{title:"BipartiteLayout",description:"Two-layer layout for bipartite graphs.",complexity:"Time Complexity: O(V)",bestFor:"Best for: Two-mode networks, actor-event data",constructor:"new BipartiteLayout(graph, options)"},random:{title:"RandomLayout",description:"Random positions. Useful as starting point for other layouts.",complexity:"Time Complexity: O(V)",bestFor:"Best for: Initial positions, testing",constructor:"new RandomLayout(graph, options)"},usage:"Usage Pattern",usageDescription:"All layouts follow the same async pattern"},community:{title:"Community Detection",description:"Detect communities (clusters) in networks using various algorithms. All computation runs in Web Workers.",mainClass:{title:"CommunityDetection",description:"Main class for detecting communities in graphs",constructor:"new CommunityDetection(graph)",methods:{detectCommunities:{name:"detectCommunities(algorithm, options)",description:'Detect communities using specified algorithm. Algorithm can be instance or string ("louvain")',returns:"Returns Promise<CommunityResult> with communities, modularity, numCommunities"},calculateModularity:{name:"calculateModularity(communities)",description:"Calculate modularity score for a partition",returns:"Returns number (-1 to 1, higher is better)"}},staticMethods:{detect:{name:"CommunityDetection.detect(graphData, algorithm, options)",description:"Convenience method for direct detection from GraphData",returns:"Returns Promise<CommunityResult>"},getNodesInCommunity:{name:"CommunityDetection.getNodesInCommunity(communities, communityId)",description:"Get array of node IDs in a specific community"},getCommunityGroups:{name:"CommunityDetection.getCommunityGroups(communities)",description:"Get object mapping communityId to array of node IDs"}}},louvain:{title:"LouvainAlgorithm",description:"Fast modularity optimization using the Louvain method. The most popular community detection algorithm.",complexity:"Time Complexity: O(V log V)",bestFor:"Best for: Large networks, general-purpose community detection",constructor:"new LouvainAlgorithm(options)",options:{resolution:"Resolution parameter for modularity (default: 1.0). Higher values find smaller communities.",maxIterations:"Maximum iterations (default: 100)"}},result:{title:"CommunityResult",description:"Result object returned by community detection",properties:{communities:"Object mapping nodeId to communityId (number)",modularity:"Modularity score (-1 to 1, typically 0.3-0.7 for good partitions)",numCommunities:"Number of communities found",algorithm:"Algorithm name used",metadata:"Optional additional information"}},customAlgorithm:{title:"Custom Algorithms",description:"Extend CommunityAlgorithm base class to create your own algorithms",note:"Implement the detect() method and configure worker module path"}},examples:{title:"Usage Examples",description:"Complete code examples for common use cases",basic:{title:"Basic Network Analysis",description:"Analyze a simple network and compute centrality metrics"},csv:{title:"Loading CSV Data",description:"Import network data from CSV files and analyze"},json:{title:"Working with JSON",description:"Convert between JSON formats (D3, Cytoscape, NetworkX)"},layout:{title:"Applying Layouts",description:"Position nodes using layout algorithms"},community:{title:"Community Detection",description:"Find communities using Louvain algorithm"},complete:{title:"Complete Workflow",description:"End-to-end example: load data, analyze, layout, detect communities"}}},showcase:{title:"Features Showcase",description:"Explore all the features of @guinetik/graph-js",header:{title:" Interactive Network Graph",subtitle:"Explore network analysis in real-time. Add nodes, remove them, and watch the graph update dynamically."},whatIs:{title:"What is this?",description:"This interactive visualization demonstrates <strong>network analysis</strong>. Node size represents centrality: larger nodes are more influential in the network."},status:{title:"Status",ready:"Ready for operations",hover:"Hover over nodes to see details"},controls:{title:"Controls",addRandom:"Add a random node connected to a random existing node",addToSelected:"Add a node connected to {name}",selectNodeFirst:"Select a node first",removeRandom:"Remove a random node"},dataLoading:{title:"Load Dataset",choose:"Choose Dataset:",default:"Default Inline (15 nodes)",karate:"Karate Club JSON (34 nodes)",miserables:"Les Misrables CSV (77 nodes)",loadButton:" Load Dataset",loading:" Loading..."},networkAnalysis:{title:" Network Analysis (Node Sizes)",description:"<strong>Uses @guinetik/graph-js:</strong> Computes centrality metrics in web workers for optimal performance.",metricsTitle:"Metrics to Calculate:",selectAll:"Select All",unselectAll:"Unselect All",degreeCentrality:"Degree Centrality",degreeDescription:"Counts the number of direct connections to a node. The simplest centrality measure - identifies hubs and highly connected nodes.",betweennessCentrality:"Betweenness Centrality",betweennessDescription:"Measures how often a node appears on shortest paths between other nodes. Identifies bridge nodes and information bottlenecks.",clusteringCoefficient:"Clustering Coefficient",clusteringDescription:"Measures how connected a node's neighbors are to each other. Detects tightly-knit groups and local community structure.",eigenvectorCentrality:"Eigenvector Centrality",eigenvectorDescription:"Measures node importance based on the importance of its neighbors. Identifies influential nodes connected to other influential nodes.",pageRankCentrality:"PageRank Centrality",pagerankDescription:"Similar to eigenvector centrality, measures node importance based on connections. Popularized by Google's PageRank algorithm.",cliqueCount:"Clique Count",cliquesDescription:"Counts how many maximal cliques (complete subgraphs) a node belongs to. Identifies nodes in dense, tightly-knit communities. Warning: computationally expensive.",closenessCentrality:"Closeness Centrality",closenessDescription:"Measures how close a node is to all other nodes based on average shortest path length. Identifies nodes that can quickly reach the entire network.",egoDensity:"Ego Density",egoDensityDescription:"Measures the density of connections among a node's immediate neighbors. Quantifies local cohesion around a node.",eigenvectorLaplacian:"Eigenvector (Laplacian) - for Spectral layout",eigenvectorLaplacianDescription:"Laplacian eigenvector centrality used for spectral graph analysis. Useful for spectral layout algorithms.",nodeSizeLabel:"Node Size Based On:",selectMetric:"-- Select a metric --",analyzeButton:" Analyze Network",analyzingButton:" Analyzing...",degreeName:"Degree",betweennessName:"Betweenness",clusteringName:"Clustering",eigenvectorName:"Eigenvector",pageRankName:"PageRank",cliquesName:"Cliques",closenessName:"Closeness",egoDensityName:"Ego Density",highlightCliqueEdges:" Highlight Clique Edges",cliqueEdgesDescription:"Color edges that are part of triangles/cliques"},layoutAlgorithm:{title:"Layout Algorithm"},communityDetection:{title:" Community Detection",communitiesFound:"Communities Found:",modularity:"Modularity:",nodeColorsAssignments:"Node colors represent community assignments"},instructions:{title:" How to interact",dragNodes:" <strong>Drag nodes</strong> to reposition them",scroll:" <strong>Scroll</strong> to zoom in/out",dragBackground:" <strong>Drag background</strong> to pan",hoverNodes:" <strong>Hover nodes</strong> to see detailed information",nodeSize:" <strong>Node size</strong> = centrality",color:" <strong>Color</strong> = group/community"},buttons:{add:"Add",toSelected:"To Selected",remove:"Remove"},messages:{loadingGraph:"Loading graph...",loadingDataset:"Loading {dataset} dataset...",loadingDatasetName:"Loading {name} dataset...",analyzing:"Analyzing network using workers...",applyingLayout:"Applying {layout} layout...",detectingCommunities:"Detecting communities using {algorithm}...",loadedDataset:" Loaded {name} dataset ({nodes} nodes, {edges} edges)",failedToLoadDataset:" Failed to load dataset: {error}",addedNode:' Added node "{nodeId}" connected to "{connectedTo}"',noNodeSelected:" No node selected. Click on a node to select it first.",noNodesToRemove:" No nodes to remove",removedNode:' Removed node "{nodeId}"',analysisComplete:" Analysis complete! Computed {count} node metrics using web workers",analysisFailed:" Analysis failed: {error}",usingD3Physics:" Using D3 physics simulation (no layout algorithm)",appliedLayout:" Applied {layout} layout algorithm",layoutFailed:" Layout failed: {error}",foundCommunities:"Found {count} communities (modularity: {modularity})",communityDetectionFailed:"Community detection failed",graphNotInitialized:"Graph not initialized",graphIsEmpty:"Graph is empty"},layoutPicker:{chooseLayout:"Choose Layout:",applyButton:" Apply Layout",applyingButton:" Applying..."},communityPicker:{chooseAlgorithm:"Choose Algorithm:",detectButton:" Detect Communities",detectingButton:" Detecting..."}},explorer:{title:"Network Explorer",description:"Interactive network analysis and visualization",header:{title:" Network Explorer",subtitle:"Explore sample networks and upload your own files. Supports CSV, JSON, and NetworkX formats."},renderer:{title:"Graph Renderer",d3:"D3.js (SVG)",sigma:"Sigma.js (WebGL)",d3Description:"SVG-based rendering. Best for small-medium graphs (<1000 nodes). Supports rich interactions.",sigmaDescription:"WebGL-based rendering. Optimized for large graphs (10k+ nodes). Hardware-accelerated."},parallelComputation:{title:" Parallel Computation Demo",description:"This demo showcases <strong>Web Workers</strong> for parallel network analysis. Large networks are processed across multiple CPU cores for faster computation.",workersSupported:" Workers Supported",workersNotSupported:" Workers Not Supported",cores:"cores"},status:{title:"Status",ready:"Ready for operations",loadNetwork:"Load a network to begin"},dataLoading:{title:"Data Loading",sampleNetworks:" Sample Networks",uploadFile:" Upload File",chooseNetwork:"Choose Network:",chooseCity:"-- Choose a network --",caruaru:"Caruaru (~130 edges, small)",rj:"Rio de Janeiro (~1,900 edges, medium)",niteroi:"Niteri (~18,500 edges, large)",karate:"Karate Club (34 nodes, 78 edges)",miserables:"Les Misrables (77 nodes, 254 edges)",loadNetwork:" Load Network",loading:" Loading...",fileFormat:"File Format:",edgesCSV:"Edges CSV (Required):",nodesCSV:"Nodes CSV (Optional):",edgeCSVFormat:"<strong>Edge CSV format:</strong> source,target,weight<br><strong>Node CSV format:</strong> id,group,label,...",jsonFile:"JSON File:",networkxFile:"NetworkX JSON File:",jsonSupports:"Supports: Standard (nodes/edges), D3 (nodes/links), Cytoscape, or raw edge list array",networkxSupports:"Supports: node-link format, adjacency format",loadUploadedFile:" Load Uploaded File",formatJSON:"JSON (nodes/edges, D3, Cytoscape)",formatCSV:"CSV (edge list)",formatNetworkX:"NetworkX (node-link, adjacency)"},networkStats:{title:"Network Statistics",nodes:"Nodes",edges:"Edges",avgDegree:"Avg Degree",analysisTime:"Analysis Time",communities:"Communities",modularity:"Modularity",usingParallel:" Using parallel computation",workersActive:"workers active",singleThreaded:" Single-threaded mode",networkTooSmall:"Network too small for workers"},networkAnalysis:{title:" Network Analysis (Node Sizes)"},layoutAlgorithm:{title:" Layout Algorithm",requiresAnalysis:"requires analysis"},graphStats:{title:" Graph Statistics",density:"Density",diameter:"Diameter",avgClustering:"Avg Clustering",avgPathLength:"Avg Path Length",avgDegree:"Avg Degree",connectedComponents:"Components",calculated:"Calculated alongside node metrics"},communityDetection:{title:" Community Detection (Node Colors)",algorithm:"Algorithm:"},communityResults:{title:" Community Detection Results",communitiesFound:"Communities Found:",modularityScore:"Modularity Score:",computationTime:"Computation Time:",algorithm:"Algorithm:",nodeColorsRepresent:"Node colors represent their community assignments"},instructions:{title:" How to interact",dragNodes:" <strong>Drag nodes</strong> to reposition them",scroll:" <strong>Scroll</strong> to zoom in/out",dragBackground:" <strong>Drag background</strong> to pan",hoverNodes:" <strong>Hover nodes</strong> to see detailed information",nodeSize:" <strong>Node size</strong> = selected metric",color:" <strong>Color</strong> = community"},messages:{loadingNetworkData:"Loading network data...",loadedNetwork:" Loaded {name} ({nodes} nodes, {edges} edges)",failedToLoadNetwork:" Failed to load network: {error}",loadingUploadedFile:"Loading uploaded file...",loadedFile:" Loaded {fileName} ({nodes} nodes, {edges} edges)",failedToLoadFile:" Failed to load file: {error}",analyzingNetwork:"Analyzing network using workers...",analysisComplete:" Analysis complete! Computed {count} node metrics",analysisFailed:" Analysis failed: {error}",usingD3Physics:" Using D3 physics simulation (no layout algorithm)",applyingLayout:"Applying {layout} layout...",appliedLayout:" Applied {layout} layout algorithm",layoutFailed:" Layout failed: {error}",graphNotInitialized:"Graph not initialized",graphIsEmpty:"Graph is empty",detectingCommunities:"Detecting communities using {algorithm}...",foundCommunities:"Found {count} communities (modularity: {modularity})",communityDetectionFailed:"Community detection failed"}},family:{title:"Family Tree",subtitle:"Build and visualize your family tree interactively",description:"Visualize family relationships",header:{title:" Family Tree Builder",subtitle:"Build and visualize your family tree interactively. Start with yourself and add relatives to see the network grow."},whatIs:{title:"What is this?",description:"A network visualization of family relationships. Each color represents a different relationship type. The tree auto-saves to your browser's storage every 30 seconds."},status:{title:"Status",ready:"Ready for operations",clickToAdd:"Click buttons to add relatives"},addRelatives:{title:"Add Relatives",parents:" Parents",grandparents:" Grandparents",sibling:" Sibling",nieceNephew:" Niece/Nephew",uncleAunt:" Uncle/Aunt",cousin:" Cousin",partner:" Partner",child:" Child"},actions:{title:"Actions",saveFamily:" Save Family",saveImage:" Save as Image",lockGraph:" Lock Graph",unlockGraph:" Unlock Graph",undo:" Undo",redo:" Redo",resetTree:" Reset Tree"},renderNodes:{title:" Render Nodes",colors:" Colors",avatars:" Avatars",colorsDesc:"Nodes colored by relationship type.",avatarsDesc:"Nodes shown as emoji avatars (if set)."},networkAnalysis:{title:" Network Analysis (Node Sizes)"},relationshipColors:{title:"Relationship Colors",you:"You",parents:"Parents",siblings:"Siblings",unclesAunts:"Uncles/Aunts",cousins:"Cousins",grandparents:"Grandparents",nieces:"Nieces/Nephews",partners:"Partners/Spouses",children:"Children"},layoutAlgorithm:{title:" Layout Algorithm"},instructions:{title:" How to use",dragNodes:" <strong>Drag nodes</strong> to arrange your tree",autoSaves:" <strong>Auto-saves</strong> every 30 seconds",lock:" <strong>Lock</strong> to freeze positions",download:" <strong>Download</strong> as PNG image",analyze:" <strong>Analyze</strong> to size nodes by centrality metrics",layouts:" <strong>Apply layouts</strong> to visualize your tree differently",undoRedo:" <strong>Undo/Redo</strong> with buttons or Ctrl+Z / Ctrl+Y (up to 10 actions)"},dialogs:{selectOption:"Select an option",addParents:"Add Parents",addSibling:"Add Sibling",addGrandparents:"Add Grandparents",addUncleAunt:"Add Uncle/Aunt",addCousin:"Add Cousin",addChild:"Add Child",addNieceNephew:"Add Niece/Nephew",addPartner:"Add Partner/Spouse",fields:{motherName:"Mother Name",motherAvatar:"Mother Avatar (optional)",fatherName:"Father Name",fatherAvatar:"Father Avatar (optional)",siblingName:"Sibling Name",gender:"Gender",avatar:"Avatar (optional)",parentsSide:"Parent's Side",grandmotherName:"Grandmother Name",grandmotherAvatar:"Grandmother Avatar (optional)",grandfatherName:"Grandfather Name",grandfatherAvatar:"Grandfather Avatar (optional)",name:"Name",uncleAuntField:"Uncle/Aunt",sibling:"Sibling",parent:"Parent",partnerOf:"Partner Of"},genderOptions:{male:"Male",female:"Female",other:"Other"},placeholders:{mother:" Type an emoji",father:" Type an emoji",avatar:" Type an emoji",grandmother:" Type an emoji",grandfather:" Type an emoji"}},operations:{errors:{atLeastOneParent:"At least one parent name is required",onlyOneParentSlot:"Only one parent slot available. Added only the mother.",siblingNameRequired:"Sibling name is required",genderRequired:"Gender is required",graphNotInitialized:"Graph not initialized",failedToAddSibling:"Failed to add sibling",parentNotFound:"Parent not found",atLeastOneGrandparent:"At least one grandparent name is required",onlyOneGrandparentSlot:"Only one grandparent slot available for this parent. Added only the grandmother.",failedToAddGrandparents:"Failed to add grandparents",uncleAuntNameRequired:"Uncle/aunt name is required",failedToAddUncleAunt:"Failed to add uncle/aunt",cousinNameRequired:"Cousin name is required",failedToAddCousin:"Failed to add cousin",childNameRequired:"Child name is required",failedToAddChild:"Failed to add child",nieceNephewNameRequired:"Niece/nephew name is required",failedToAddNieceNephew:"Failed to add niece/nephew",partnerNameRequired:"Partner name is required",personNotFound:"Person not found",alreadyHasPartner:"already has a partner!"},success:{parentAdded:"Parent(s) added successfully",siblingAdded:"Sibling added successfully",grandparentsAdded:"Grandparent(s) added successfully",uncleAuntAdded:"Uncle/Aunt added successfully",cousinAdded:"Cousin added successfully",childAdded:"Child added successfully",nieceNephewAdded:"Niece/Nephew added successfully",partnerAdded:"Partner added successfully"},validation:{noParents:"You must add parents first before adding grandparents",noUnclesAunts:"You must add uncles/aunts first before adding cousins",noSiblings:"You must add siblings first before adding nieces/nephews",maxParents:"You already have 2 parents added. You cannot add more than 2 parents.",notEligibleForPartner:"No eligible people available for partners"}},storage:{saved:"Family tree saved!",loaded:"Family tree loaded",reset:"Family tree reset",error:"Error saving family tree"},history:{undone:"Action undone",redone:"Action redone",nothingToUndo:"Nothing to undo",nothingToRedo:"Nothing to redo"},relationships:{yourPartner:"Your Partner/Spouse",partnerOf:"'s Partner",yourChild:"Your child",siblingChild:"'s child (your niece/nephew)",cousinChild:"'s child (your cousin's child)",grandchild:"'s child (your grandchild)",siblingInLaw:"'s partner (your sibling-in-law)",childInLaw:"'s partner (your child-in-law)"},dropdownOptions:{yourChild:"Your child",childTemplate:"{name}'s child",nieceNephewTemplate:"{name}'s child (your niece/nephew)",cousinChildTemplate:"{name}'s child (your cousin's child)",grandchildTemplate:"{name}'s child (your grandchild)",partnerTemplate:"{name}'s partner",siblingPartnerTemplate:"{name}'s partner (your sibling-in-law)",childPartnerTemplate:"{name}'s partner (your child-in-law)",parentSideTemplate:"{name}'s sibling",uncleAuntChildTemplate:"{name}'s child",siblingChildTemplate:"{name}'s child"}}},pt:{nav:{home:"Incio",showcase:"Demonstrao",explorer:"Explorador de Redes",family:"rvore Genealgica",docs:"Documentao"},common:{loading:"Carregando...",error:"Erro",success:"Sucesso",darkMode:"Alternar modo escuro",language:"Idioma"},footer:{madeBy:"Feito com",by:"por",license:"Licena MIT"},showcase:{title:"Demonstrao",description:"Explore todos os recursos de @guinetik/graph-js",header:{title:" Grafo de Rede Interativo",subtitle:"Explore anlise de redes em tempo real. Adicione ns, remova-os e veja o grafo se atualizar dinamicamente."},whatIs:{title:"O que  isto?",description:"Esta visualizao interativa demonstra <strong>anlise de redes</strong>. O tamanho do n representa centralidade: ns maiores so mais influentes na rede."},status:{title:"Status",ready:"Pronto para operaes",hover:"Passe o mouse sobre ns para ver detalhes"},controls:{title:"Controles",addRandom:"Adicionar um n aleatrio conectado a um n existente aleatrio",addToSelected:"Adicionar um n conectado a {name}",selectNodeFirst:"Selecione um n primeiro",removeRandom:"Remover um n aleatrio"},dataLoading:{title:"Carregar Conjunto de Dados",choose:"Escolha um Conjunto de Dados:",default:"Padro Embutido (15 ns)",karate:"Karate Club JSON (34 ns)",miserables:"Os Miserveis CSV (77 ns)",loadButton:" Carregar Conjunto de Dados",loading:" Carregando..."},networkAnalysis:{title:" Anlise de Rede (Tamanhos de N)",description:"<strong>Usa @guinetik/graph-js:</strong> Calcula mtricas de centralidade em web workers para desempenho ideal.",metricsTitle:"Mtricas para Calcular:",selectAll:"Selecionar Todas",unselectAll:"Desselecionar Todas",degreeCentrality:"Centralidade de Grau",degreeDescription:"Conta o nmero de conexes diretas de um n. A medida de centralidade mais simples - identifica hubs e ns altamente conectados.",betweennessCentrality:"Centralidade de Intermediao",betweennessDescription:"Mede com que frequncia um n aparece nos caminhos mais curtos entre outros ns. Identifica ns ponte e gargalos de informao.",clusteringCoefficient:"Coeficiente de Agrupamento",clusteringDescription:"Mede o quo conectados os vizinhos de um n esto entre si. Detecta grupos coesos e estrutura de comunidade local.",eigenvectorCentrality:"Centralidade de Eigenvector",eigenvectorDescription:"Mede a importncia de um n com base na importncia de seus vizinhos. Identifica ns influentes conectados a outros ns influentes.",pageRankCentrality:"Centralidade PageRank",pagerankDescription:"Similar  centralidade de eigenvector, mede a importncia do n com base em conexes. Popularizado pelo algoritmo PageRank do Google.",cliqueCount:"Contagem de Cliques",cliquesDescription:"Conta quantos cliques maximais (subgrafos completos) um n pertence. Identifica ns em comunidades densas e coesas. Aviso: computacionalmente caro.",closenessCentrality:"Centralidade de Proximidade",closenessDescription:"Mede o quo prximo um n est de todos os outros ns com base no comprimento mdio do caminho mais curto. Identifica ns que podem alcanar rapidamente toda a rede.",egoDensity:"Densidade Ego",egoDensityDescription:"Mede a densidade de conexes entre os vizinhos imediatos de um n. Quantifica a coeso local ao redor de um n.",eigenvectorLaplacian:"Eigenvector (Laplaciano) - para layout Espectral",eigenvectorLaplacianDescription:"Centralidade de eigenvector Laplaciano usada para anlise espectral de grafos. til para algoritmos de layout espectral.",nodeSizeLabel:"Tamanho do N Baseado Em:",selectMetric:"-- Selecione uma mtrica --",analyzeButton:" Analisar Rede",analyzingButton:" Analisando...",degreeName:"Grau",betweennessName:"Intermediao",clusteringName:"Agrupamento",eigenvectorName:"Eigenvector",pageRankName:"PageRank",cliquesName:"Cliques",closenessName:"Proximidade",egoDensityName:"Densidade Ego",highlightCliqueEdges:" Destacar Arestas de Cliques",cliqueEdgesDescription:"Colorir arestas que fazem parte de tringulos/cliques"},layoutAlgorithm:{title:"Algoritmo de Layout"},communityDetection:{title:" Deteco de Comunidades",communitiesFound:"Comunidades Encontradas:",modularity:"Modularidade:",nodeColorsAssignments:"As cores dos ns representam as atribuies de comunidades"},instructions:{title:" Como interagir",dragNodes:" <strong>Arraste ns</strong> para reposicion-los",scroll:" <strong>Role</strong> para ampliar/reduzir",dragBackground:" <strong>Arraste o fundo</strong> para mover",hoverNodes:" <strong>Passe o mouse sobre ns</strong> para ver informaes detalhadas",nodeSize:" <strong>Tamanho do n</strong> = centralidade",color:" <strong>Cor</strong> = grupo/comunidade"},buttons:{add:"Adicionar",toSelected:"Para Selecionado",remove:"Remover"},messages:{loadingGraph:"Carregando grafo...",loadingDataset:"Carregando conjunto de dados {dataset}...",loadingDatasetName:"Carregando conjunto de dados {name}...",analyzing:"Analisando rede usando workers...",applyingLayout:"Aplicando layout {layout}...",detectingCommunities:"Detectando comunidades usando {algorithm}...",loadedDataset:" Conjunto de dados {name} carregado ({nodes} ns, {edges} arestas)",failedToLoadDataset:" Falha ao carregar conjunto de dados: {error}",addedNode:' N "{nodeId}" adicionado conectado a "{connectedTo}"',noNodeSelected:" Nenhum n selecionado. Clique em um n para selecion-lo primeiro.",noNodesToRemove:" Nenhum n para remover",removedNode:' N "{nodeId}" removido',analysisComplete:" Anlise completa! Computadas {count} mtricas de ns usando web workers",analysisFailed:" Anlise falhou: {error}",usingD3Physics:" Usando simulao de fsica D3 (sem algoritmo de layout)",appliedLayout:" Layout {layout} aplicado",layoutFailed:" Layout falhou: {error}",foundCommunities:"Encontradas {count} comunidades (modularidade: {modularity})",communityDetectionFailed:"Deteco de comunidades falhou",graphNotInitialized:"Grafo no inicializado",graphIsEmpty:"Grafo est vazio"},layoutPicker:{chooseLayout:"Escolha o Layout:",applyButton:" Aplicar Layout",applyingButton:" Aplicando..."},communityPicker:{chooseAlgorithm:"Escolha o Algoritmo:",detectButton:" Detectar Comunidades",detectingButton:" Detectando..."}},home:{hero:{title:"Anlise de Redes Moderna para JavaScript",subtitle:"Teoria de grafos e anlise de redes poderosa com arquitetura worker-first",description:"Analise redes sociais, rvores genealgicas e grafos complexos com facilidade. Computao paralela rpida, mtricas abrangentes e visualizaes bonitas - tudo em JavaScript puro.",cta:"Comear",github:"Ver no GitHub"},features:[{icon:"",title:"Anlise de Redes",description:"Calcule mtricas de centralidade, coeficientes de agrupamento e estatsticas de grafo com ferramentas de anlise abrangentes"},{icon:"",title:"Explorador Interativo",description:"Explore redes com arrastar e soltar, zoom, pan e anlise em tempo real de ns e comunidades"},{icon:"",title:"Mltiplos Layouts",description:"11 algoritmos de layout incluindo force-directed, Kamada-Kawai, spectral e layouts hierrquicos"},{icon:"",title:"Performance com Workers",description:"UI no bloqueante com web workers para computao paralela em grafos grandes com milhares de ns"},{icon:"",title:"Deteco de Comunidades",description:"Encontre clusters e grupos em redes usando algoritmo Louvain com otimizao de modularidade"},{icon:"",title:"Mtricas Ricas",description:"Grau, intermediao, eigenvector, agrupamento, proximidade e mais recursos estatsticos"}],code:{title:"Exemplo de Incio Rpido",snippet:`npm install @guinetik/graph-js

import NetworkStats from '@guinetik/graph-js';

const network = [
  { source: 'Alice', target: 'Bob', weight: 1 },
  { source: 'Bob', target: 'Carol', weight: 2 },
  { source: 'Carol', target: 'Alice', weight: 1 }
];

const analyzer = new NetworkStats({ verbose: true });
const results = await analyzer.analyze(network, ['degree', 'eigenvector']);

console.log(results);
// Anlise executada em workers para desempenho ideal!`}},docs:{title:"Documentao",subtitle:"Referncia completa da API para @guinetik/graph-js",sections:{quickStart:"Incio Rpido",coreClasses:"Classes Principais",workers:"Arquitetura de Workers",adapters:"Adaptadores de Dados",layouts:"Layouts de Grafos",community:"Deteco de Comunidades",examples:"Exemplos de Uso"},quickStart:{title:"Incio Rpido",install:"Instalao",installCmd:"npm install @guinetik/graph-js",basicUsage:"Uso Bsico",description:"Comece com anlise de redes em apenas algumas linhas de cdigo."},graph:{title:"Graph",description:"Estrutura de dados de grafo principal usando mapas de adjacncia.",methods:"Mtodos",methodsList:{addNode:{name:"addNode(nodeId)",description:"Adicionar um n ao grafo"},addNodesFrom:{name:"addNodesFrom(nodeIds)",description:"Adicionar mltiplos ns de um array"},addEdge:{name:"addEdge(source, target, weight?)",description:"Adicionar uma aresta entre dois ns"},removeNode:{name:"removeNode(nodeId)",description:"Remover um n e todas as suas arestas"},getNeighbors:{name:"getNeighbors(nodeId)",description:"Obter array de IDs de ns vizinhos"},hasEdge:{name:"hasEdge(source, target)",description:"Verificar se aresta existe"},numberOfNodes:{name:"numberOfNodes()",description:"Obter nmero total de ns"}}},networkStats:{title:"NetworkStats",description:"Classe principal para analisar redes e calcular mtricas estatsticas. Toda computao acontece em web workers para desempenho ideal.",constructor:"Construtor",constructorParams:{verbose:"Ativar logging detalhado (padro: true)",maxWorkers:"Nmero mximo de workers (padro: detecta ncleos da CPU automaticamente)",taskTimeout:"Timeout de tarefa em milissegundos (padro: 60000)",workerScript:"Caminho personalizado do script worker para bundlers como Vite"},analyze:{title:"Mtodo analyze()",description:"Computar estatsticas de rede para todos os ns"},features:{title:"Recursos Disponveis",degree:"Nmero de conexes por n",eigenvector:"Influncia baseada na qualidade das conexes (como PageRank)",eigenvectorLaplacian:"Centralidade eigenvector Laplaciano (para layouts espectrais)",betweenness:"Importncia de ponte entre grupos",clustering:"Quo densamente conectados esto os vizinhos",closeness:"Distncia mdia para todos os outros ns na rede",cliques:"Nmero de subgrafos completos contendo o n",egoDensity:"Densidade da vizinhana imediata do n",modularity:"Atribuio de comunidade (algoritmo Louvain)"}},workers:{title:"Arquitetura de Workers",description:"Todo o processamento roda em Web Workers para UI no-bloqueante e performance otimizada. O sistema inclui roteamento inteligente de afinidade para otimizao JIT, inspirado pelo BeeThreads.",components:{title:"Componentes",workerManager:{name:"WorkerManager",description:"Gerenciador singleton que inicializa e roteia tarefas para workers"},workerPool:{name:"WorkerPool",description:"Pool de workers que executam tarefas com balanceamento automtico de carga"},workerAdapter:{name:"WorkerAdapter",description:"Adaptador cross-platform para Web Workers (browser) e Worker Threads (Node.js)"}},affinity:{title:"Sistema de Afinidade de Workers",description:"Roteia chamadas repetidas do mesmo algoritmo para o mesmo worker, aproveitando compilao JIT do JavaScript para operaes 10-30% mais rpidas.",howItWorks:"Como Funciona",howItWorksSteps:["Quando um worker executa um algoritmo, a funo  compilada JIT","O worker rastreia quais funes ele tem em cache","Chamadas futuras do mesmo algoritmo so roteadas para esse worker",'O caminho de cdigo otimizado JIT "quente"  reutilizado'],selectionTitle:"Prioridade de Seleo",selectionSteps:["Match de Afinidade: Encontrar worker que j executou o mesmo algoritmo","Menos Carregado: Selecionar worker com menos tarefas executadas","Fallback FIFO: Se afinidade desabilitada, usar primeiro disponvel"]},config:{title:"Configurao",options:{maxWorkers:"Mximo de workers (padro: auto-detectar ncleos CPU)",enableAffinity:"Habilitar roteamento de afinidade (padro: true)",affinityCacheLimit:"Mximo de funes em cache por worker (padro: 50)",taskTimeout:"Timeout de tarefa em milissegundos (padro: 300000)"}},monitoring:{title:"Monitoramento",description:"Obtenha estatsticas em tempo real sobre pool de workers e performance de afinidade"}},adapters:{title:"Adaptadores de Dados",description:"Converter entre vrios formatos de grafo e o formato padro GraphData. Todos os adaptadores usam mtodos estticos.",csv:{title:"CSVAdapter",description:"Carregar e converter arquivos CSV para formato de grafo. Suporta listas de arestas e arquivos de propriedades de ns.",methods:"Mtodos",methodsList:{fromEdgeList:{name:"fromEdgeList(csvText, options)",description:'Analisar lista de arestas CSV. Opes: header (padro: true), delimiter (padro: ","), weighted (padro: true)',returns:"Retorna GraphData com ns e arestas"},fromNodes:{name:"fromNodes(csvText, options)",description:"Analisar propriedades de ns CSV",returns:"Retorna array de objetos NodeData"},loadFromURL:{name:"loadFromURL(edgeURL, nodeURL, options)",description:"Mtodo assncrono para buscar e analisar CSV de URLs",returns:"Retorna Promise<GraphData>"},toEdgeList:{name:"toEdgeList(graphData, options)",description:"Exportar arestas para string CSV",returns:"Retorna string CSV"},toNodes:{name:"toNodes(graphData, options)",description:"Exportar ns para string CSV",returns:"Retorna string CSV"}}},json:{title:"JSONAdapter",description:"Suporte para D3.js, Cytoscape e outros formatos JSON. Detecta formato automaticamente.",methods:"Mtodos",methodsList:{fromD3:{name:"fromD3(d3Data)",description:'Converter formato D3.js force-directed (com "links") para GraphData',returns:"Retorna GraphData"},fromCytoscape:{name:"fromCytoscape(cytoData)",description:"Converter formato Cytoscape.js para GraphData",returns:"Retorna GraphData"},fromFormat:{name:"fromFormat(jsonData)",description:"Detectar formato automaticamente (GraphData, D3, Cytoscape, NetworkX)",returns:"Retorna GraphData"},toD3:{name:"toD3(graphData)",description:'Converter para formato D3.js com propriedade "links"',returns:"Retorna D3GraphData"},toCytoscape:{name:"toCytoscape(graphData)",description:"Converter para formato Cytoscape.js",returns:"Retorna CytoscapeData"},loadFromURL:{name:"loadFromURL(url)",description:"Mtodo assncrono para buscar e analisar JSON",returns:"Retorna Promise<GraphData>"}}},networkx:{title:"NetworkXAdapter",description:"Interoperabilidade com Python NetworkX. Suporta formatos node-link e adjacncia.",methods:"Mtodos",methodsList:{fromNodeLink:{name:"fromNodeLink(nxData)",description:"Converter formato NetworkX node-link (mais comum)",returns:"Retorna GraphData"},fromAdjacency:{name:"fromAdjacency(nxData)",description:"Converter formato de adjacncia NetworkX",returns:"Retorna GraphData"},toNodeLink:{name:"toNodeLink(graphData, options)",description:"Converter para formato node-link. Opes: directed (padro: false), multigraph (padro: false)",returns:"Retorna dados node-link NetworkX"},toAdjacency:{name:"toAdjacency(graphData)",description:"Converter para formato de adjacncia",returns:"Retorna array de objetos de ns com listas de adjacncia"}}}},layouts:{title:"Layouts de Grafos",description:"Posicionar ns no espao 2D usando vrios algoritmos. Todos os layouts usam computao assncrona em Web Workers para desempenho ideal.",note:"Todos os mtodos de layout so assncronos e retornam Promise<Object> com posies de ns {nodeId: {x, y}}",forceDirected:{title:"ForceDirectedLayout",description:"Modelo spring-eltrico usando algoritmo Fruchterman-Reingold. Bom para visualizao geral de redes.",complexity:"Complexidade de Tempo: O(iterations  V)",bestFor:"Melhor para: Redes gerais, grafos sociais",constructor:"new ForceDirectedLayout(graph, options)",options:{iterations:"Nmero de passos de simulao (padro: 50)",k:"Distncia tima entre ns (padro: auto-calculado)",scale:"Fator de escala para posies (padro: 1)",center:"Ponto central {x, y} (padro: {x:0, y:0})",initialPositions:"Posies iniciais (padro: aleatrio)",threshold:"Limiar de convergncia (padro: 1e-4)"}},kamadaKawai:{title:"KamadaKawaiLayout",description:"Minimizao de energia baseada em caminhos mais curtos. Produz layouts esteticamente agradveis.",complexity:"Complexidade de Tempo: O(V + iterations  V)",bestFor:"Melhor para: Grafos pequenos-mdios (<1000 ns), rvores, grafos planares",constructor:"new KamadaKawaiLayout(graph, options)",options:{iterations:"Mximo de iteraes (padro: 1000)",scale:"Fator de escala (padro: 1)",center:"Ponto central (padro: {x:0, y:0})",initialPositions:"Posies iniciais (padro: circular)",threshold:"Limiar de convergncia (padro: 1e-4)",K:"Escala de constante de mola (padro: auto)"}},spectral:{title:"SpectralLayout",description:"Usa autovetores Laplacianos como coordenadas. Excelente para visualizar estrutura de comunidades.",complexity:"Complexidade de Tempo: O(V) usando autovetores pr-computados",bestFor:"Melhor para: Visualizao de comunidades, topologia de grafo",requires:'Requer: estatstica "eigenvector-laplacian" deve ser pr-computada',constructor:"new SpectralLayout(graph, options)",options:{scale:"Fator de escala (padro: 100)",center:"Ponto central (padro: {x:0, y:0})"}},circular:{title:"CircularLayout",description:"Posiciona ns em crculo. Simples e limpo para redes pequenas.",complexity:"Complexidade de Tempo: O(V)",bestFor:"Melhor para: Redes pequenas, grafos cclicos",constructor:"new CircularLayout(graph, options)",options:{scale:"Raio do crculo (padro: 100)",center:"Ponto central (padro: {x:0, y:0})",sortBy:"Funo de ordenao opcional para ordem dos ns"}},shell:{title:"ShellLayout",description:"Crculos concntricos baseados no grau do n. Ns de alto grau no centro.",complexity:"Complexidade de Tempo: O(V)",bestFor:"Melhor para: Redes hub-and-spoke, grafos estrela",requires:'Requer: estatstica "degree" deve ser pr-computada',constructor:"new ShellLayout(graph, options)"},spiral:{title:"SpiralLayout",description:"Padro de espiral arquimediana. Esteticamente agradvel para dados ordenados.",complexity:"Complexidade de Tempo: O(V)",bestFor:"Melhor para: Redes sequenciais ou temporais",constructor:"new SpiralLayout(graph, options)"},bfs:{title:"BFSLayout",description:"Camadas de busca em largura. Mostra distncia do n raiz.",complexity:"Complexidade de Tempo: O(V + E)",bestFor:"Melhor para: rvores, hierarquias, mostrando propagao",constructor:"new BFSLayout(graph, options)"},bipartite:{title:"BipartiteLayout",description:"Layout de duas camadas para grafos bipartidos.",complexity:"Complexidade de Tempo: O(V)",bestFor:"Melhor para: Redes de dois modos, dados ator-evento",constructor:"new BipartiteLayout(graph, options)"},random:{title:"RandomLayout",description:"Posies aleatrias. til como ponto de partida para outros layouts.",complexity:"Complexidade de Tempo: O(V)",bestFor:"Melhor para: Posies iniciais, testes",constructor:"new RandomLayout(graph, options)"},usage:"Padro de Uso",usageDescription:"Todos os layouts seguem o mesmo padro assncrono"},community:{title:"Deteco de Comunidades",description:"Detectar comunidades (clusters) em redes usando vrios algoritmos. Toda computao  executada em Web Workers.",mainClass:{title:"CommunityDetection",description:"Classe principal para detectar comunidades em grafos",constructor:"new CommunityDetection(graph)",methods:{detectCommunities:{name:"detectCommunities(algorithm, options)",description:'Detectar comunidades usando algoritmo especificado. Algoritmo pode ser instncia ou string ("louvain")',returns:"Retorna Promise<CommunityResult> com communities, modularity, numCommunities"},calculateModularity:{name:"calculateModularity(communities)",description:"Calcular pontuao de modularidade para uma partio",returns:"Retorna number (-1 a 1, maior  melhor)"}},staticMethods:{detect:{name:"CommunityDetection.detect(graphData, algorithm, options)",description:"Mtodo de convenincia para deteco direta de GraphData",returns:"Retorna Promise<CommunityResult>"},getNodesInCommunity:{name:"CommunityDetection.getNodesInCommunity(communities, communityId)",description:"Obter array de IDs de ns em uma comunidade especfica"},getCommunityGroups:{name:"CommunityDetection.getCommunityGroups(communities)",description:"Obter objeto mapeando communityId para array de IDs de ns"}}},louvain:{title:"LouvainAlgorithm",description:"Otimizao rpida de modularidade usando o mtodo Louvain. O algoritmo de deteco de comunidades mais popular.",complexity:"Complexidade de Tempo: O(V log V)",bestFor:"Melhor para: Redes grandes, deteco de comunidades de uso geral",constructor:"new LouvainAlgorithm(options)",options:{resolution:"Parmetro de resoluo para modularidade (padro: 1.0). Valores maiores encontram comunidades menores.",maxIterations:"Mximo de iteraes (padro: 100)"}},result:{title:"CommunityResult",description:"Objeto de resultado retornado pela deteco de comunidades",properties:{communities:"Objeto mapeando nodeId para communityId (nmero)",modularity:"Pontuao de modularidade (-1 a 1, tipicamente 0.3-0.7 para boas parties)",numCommunities:"Nmero de comunidades encontradas",algorithm:"Nome do algoritmo usado",metadata:"Informaes adicionais opcionais"}},customAlgorithm:{title:"Algoritmos Personalizados",description:"Estender classe base CommunityAlgorithm para criar seus prprios algoritmos",note:"Implementar o mtodo detect() e configurar caminho do mdulo worker"}},examples:{title:"Exemplos de Uso",description:"Exemplos de cdigo completos para casos de uso comuns",basic:{title:"Anlise Bsica de Redes",description:"Analisar uma rede simples e computar mtricas de centralidade"},csv:{title:"Carregando Dados CSV",description:"Importar dados de rede de arquivos CSV e analisar"},json:{title:"Trabalhando com JSON",description:"Converter entre formatos JSON (D3, Cytoscape, NetworkX)"},layout:{title:"Aplicando Layouts",description:"Posicionar ns usando algoritmos de layout"},community:{title:"Deteco de Comunidades",description:"Encontrar comunidades usando algoritmo Louvain"},complete:{title:"Fluxo Completo",description:"Exemplo ponta a ponta: carregar dados, analisar, aplicar layout, detectar comunidades"}}},explorer:{title:"Explorador de Redes",description:"Anlise e visualizao interativa de redes",header:{title:" Explorador de Redes",subtitle:"Explore redes de exemplo e carregue seus prprios arquivos. Suporta formatos CSV, JSON e NetworkX."},renderer:{title:"Renderizador de Grafo",d3:"D3.js (SVG)",sigma:"Sigma.js (WebGL)",d3Description:"Renderizao baseada em SVG. Melhor para grafos pequenos-mdios (<1000 ns). Suporta interaes ricas.",sigmaDescription:"Renderizao baseada em WebGL. Otimizado para grafos grandes (10k+ ns). Acelerao por hardware."},parallelComputation:{title:" Demonstrao de Computao Paralela",description:"Esta demonstrao apresenta <strong>Web Workers</strong> para anlise de redes paralela. Redes grandes so processadas em mltiplos ncleos de CPU para computao mais rpida.",workersSupported:" Workers Suportados",workersNotSupported:" Workers No Suportados",cores:"ncleos"},status:{title:"Status",ready:"Pronto para operaes",loadNetwork:"Carregue uma rede para comear"},dataLoading:{title:"Carregamento de Dados",sampleNetworks:" Redes de Exemplo",uploadFile:" Carregar Arquivo",chooseNetwork:"Escolha uma Rede:",chooseCity:"-- Escolha uma rede --",caruaru:"Caruaru (~130 arestas, pequena)",rj:"Rio de Janeiro (~1.900 arestas, mdia)",niteroi:"Niteri (~18.500 arestas, grande)",karate:"Karate Club (34 ns, 78 arestas)",miserables:"Les Misrables (77 ns, 254 arestas)",loadNetwork:" Carregar Rede",loading:" Carregando...",fileFormat:"Formato do Arquivo:",edgesCSV:"CSV de Arestas (Obrigatrio):",nodesCSV:"CSV de Ns (Opcional):",edgeCSVFormat:"<strong>Formato CSV de arestas:</strong> source,target,weight<br><strong>Formato CSV de ns:</strong> id,group,label,...",jsonFile:"Arquivo JSON:",networkxFile:"Arquivo JSON NetworkX:",jsonSupports:"Suporta: Padro (nodes/edges), D3 (nodes/links), Cytoscape, ou array de lista de arestas",networkxSupports:"Suporta: formato node-link, formato adjacency",loadUploadedFile:" Carregar Arquivo Enviado",formatJSON:"JSON (nodes/edges, D3, Cytoscape)",formatCSV:"CSV (lista de arestas)",formatNetworkX:"NetworkX (node-link, adjacency)"},networkStats:{title:"Estatsticas da Rede",nodes:"Ns",edges:"Arestas",avgDegree:"Grau Mdio",analysisTime:"Tempo de Anlise",communities:"Comunidades",modularity:"Modularidade",usingParallel:" Usando computao paralela",workersActive:"workers ativos",singleThreaded:" Modo single-thread",networkTooSmall:"Rede muito pequena para workers"},networkAnalysis:{title:" Anlise de Rede (Tamanhos de N)"},layoutAlgorithm:{title:" Algoritmo de Layout",requiresAnalysis:"requer anlise"},graphStats:{title:" Estatsticas do Grafo",density:"Densidade",diameter:"Dimetro",avgClustering:"Agrupamento Mdio",avgPathLength:"Comprimento Mdio do Caminho",avgDegree:"Grau Mdio",connectedComponents:"Componentes",calculated:"Calculado junto com mtricas de ns"},communityDetection:{title:" Deteco de Comunidades (Cores dos Ns)",algorithm:"Algoritmo:"},communityResults:{title:" Resultados da Deteco de Comunidades",communitiesFound:"Comunidades Encontradas:",modularityScore:"Pontuao de Modularidade:",computationTime:"Tempo de Computao:",algorithm:"Algoritmo:",nodeColorsRepresent:"As cores dos ns representam as atribuies de comunidades"},instructions:{title:" Como interagir",dragNodes:" <strong>Arraste ns</strong> para reposicion-los",scroll:" <strong>Role</strong> para ampliar/reduzir",dragBackground:" <strong>Arraste o fundo</strong> para mover",hoverNodes:" <strong>Passe o mouse sobre ns</strong> para ver informaes detalhadas",nodeSize:" <strong>Tamanho do n</strong> = mtrica selecionada",color:" <strong>Cor</strong> = comunidade"},messages:{loadingNetworkData:"Carregando dados da rede...",loadedNetwork:" {name} carregada ({nodes} ns, {edges} arestas)",failedToLoadNetwork:" Falha ao carregar rede: {error}",loadingUploadedFile:"Carregando arquivo enviado...",loadedFile:" {fileName} carregado ({nodes} ns, {edges} arestas)",failedToLoadFile:" Falha ao carregar arquivo: {error}",analyzingNetwork:"Analisando rede usando workers...",analysisComplete:" Anlise completa! Computadas {count} mtricas de ns",analysisFailed:" Anlise falhou: {error}",usingD3Physics:" Usando simulao de fsica D3 (sem algoritmo de layout)",applyingLayout:"Aplicando layout {layout}...",appliedLayout:" Layout {layout} aplicado",layoutFailed:" Layout falhou: {error}",graphNotInitialized:"Grafo no inicializado",graphIsEmpty:"Grafo est vazio",detectingCommunities:"Detectando comunidades usando {algorithm}...",foundCommunities:"Encontradas {count} comunidades (modularidade: {modularity})",communityDetectionFailed:"Deteco de comunidades falhou"}},family:{title:"rvore Genealgica",subtitle:"Construa e visualize sua rvore genealgica interativamente",description:"Visualize relaes familiares",header:{title:" Construtor de rvore Genealgica",subtitle:"Construa e visualize sua rvore genealgica interativamente. Comece com voc mesmo e adicione parentes para ver a rede crescer."},whatIs:{title:"O que  isso?",description:"Uma visualizao de rede de relaes familiares. Cada cor representa um tipo de relao diferente. A rvore  salva automaticamente no armazenamento do seu navegador a cada 30 segundos."},status:{title:"Status",ready:"Pronto para operaes",clickToAdd:"Clique nos botes para adicionar parentes"},addRelatives:{title:"Adicionar Parentes",parents:" Pais",grandparents:" Avs",sibling:" Irm/Irmo",nieceNephew:" Sobrinha/Sobrinho",uncleAunt:" Tio/Tia",cousin:" Primo/Prima",partner:" Parceiro/Parceira",child:" Filho/Filha"},actions:{title:"Aes",saveFamily:" Salvar Famlia",saveImage:" Salvar como Imagem",lockGraph:" Bloquear Grafo",unlockGraph:" Desbloquear Grafo",undo:" Desfazer",redo:" Refazer",resetTree:" Redefinir rvore"},renderNodes:{title:" Renderizar Ns",colors:" Cores",avatars:" Avatares",colorsDesc:"Ns coloridos por tipo de relao.",avatarsDesc:"Ns mostrados como avatares emoji (se definido)."},networkAnalysis:{title:" Anlise de Rede (Tamanhos de N)"},relationshipColors:{title:"Cores de Relao",you:"Voc",parents:"Pais",siblings:"Irmos",unclesAunts:"Tios/Tias",cousins:"Primos/Primas",grandparents:"Avs",nieces:"Sobrinhas/Sobrinhos",partners:"Parceiros/Parceiras",children:"Filhos/Filhas"},layoutAlgorithm:{title:" Algoritmo de Layout"},instructions:{title:" Como usar",dragNodes:" <strong>Arraste ns</strong> para organizar sua rvore",autoSaves:" <strong>Salva automaticamente</strong> a cada 30 segundos",lock:" <strong>Bloqueie</strong> para congelar posies",download:" <strong>Baixe</strong> como imagem PNG",analyze:" <strong>Analise</strong> para dimensionar ns por mtricas de centralidade",layouts:" <strong>Aplique layouts</strong> para visualizar sua rvore de forma diferente",undoRedo:" <strong>Desfazer/Refazer</strong> com botes ou Ctrl+Z / Ctrl+Y (at 10 aes)"},dialogs:{selectOption:"Selecione uma opo",addParents:"Adicionar Pais",addSibling:"Adicionar Irm/Irmo",addGrandparents:"Adicionar Avs",addUncleAunt:"Adicionar Tio/Tia",addCousin:"Adicionar Primo/Prima",addChild:"Adicionar Filho/Filha",addNieceNephew:"Adicionar Sobrinha/Sobrinho",addPartner:"Adicionar Parceiro/Parceira",fields:{motherName:"Nome da Me",motherAvatar:"Avatar da Me (opcional)",fatherName:"Nome do Pai",fatherAvatar:"Avatar do Pai (opcional)",siblingName:"Nome do Irm/Irmo",gender:"Gnero",avatar:"Avatar (opcional)",parentsSide:"Lado do Pai/Me",grandmotherName:"Nome da Av",grandmotherAvatar:"Avatar da Av (opcional)",grandfatherName:"Nome do Av",grandfatherAvatar:"Avatar do Av (opcional)",name:"Nome",uncleAuntField:"Tio/Tia",sibling:"Irm/Irmo",parent:"Pai/Me",partnerOf:"Parceiro/Parceira De"},genderOptions:{male:"Masculino",female:"Feminino",other:"Outro"},placeholders:{mother:" Digite um emoji",father:" Digite um emoji",avatar:" Digite um emoji",grandmother:" Digite um emoji",grandfather:" Digite um emoji"}},operations:{errors:{atLeastOneParent:"Pelo menos um nome de pai  necessrio",onlyOneParentSlot:"Apenas um slot de pai disponvel. Adicionada apenas a me.",siblingNameRequired:"Nome do irm/irmo  obrigatrio",genderRequired:"Gnero  obrigatrio",graphNotInitialized:"Grafo no inicializado",failedToAddSibling:"Falha ao adicionar irm/irmo",parentNotFound:"Pai/Me no encontrado",atLeastOneGrandparent:"Pelo menos um nome de av  necessrio",onlyOneGrandparentSlot:"Apenas um slot de av disponvel para este pai. Adicionada apenas a av.",failedToAddGrandparents:"Falha ao adicionar avs",uncleAuntNameRequired:"Nome do tio/tia  obrigatrio",failedToAddUncleAunt:"Falha ao adicionar tio/tia",cousinNameRequired:"Nome do primo/prima  obrigatrio",failedToAddCousin:"Falha ao adicionar primo/prima",childNameRequired:"Nome do filho/filha  obrigatrio",failedToAddChild:"Falha ao adicionar filho/filha",nieceNephewNameRequired:"Nome do sobrinha/sobrinho  obrigatrio",failedToAddNieceNephew:"Falha ao adicionar sobrinha/sobrinho",partnerNameRequired:"Nome do parceiro/parceira  obrigatrio",personNotFound:"Pessoa no encontrada",alreadyHasPartner:"j tem um parceiro/parceira!"},success:{parentAdded:"Pais adicionados com sucesso",siblingAdded:"Irm(o) adicionado(a) com sucesso",grandparentsAdded:"Avs adicionados com sucesso",uncleAuntAdded:"Tio(a) adicionado(a) com sucesso",cousinAdded:"Primo(a) adicionado(a) com sucesso",childAdded:"Filho(a) adicionado(a) com sucesso",nieceNephewAdded:"Sobrinho(a) adicionado(a) com sucesso",partnerAdded:"Parceiro(a) adicionado(a) com sucesso"},validation:{noParents:"Voc deve adicionar pais primeiro antes de adicionar avs",noUnclesAunts:"Voc deve adicionar tios/tias primeiro antes de adicionar primos",noSiblings:"Voc deve adicionar irmos primeiro antes de adicionar sobrinhos",maxParents:"Voc j tem 2 pais adicionados. Voc no pode adicionar mais de 2 pais.",notEligibleForPartner:"Nenhuma pessoa disponvel para parceiros"}},storage:{saved:"rvore genealgica salva!",loaded:"rvore genealgica carregada",reset:"rvore genealgica redefinida",error:"Erro ao salvar rvore genealgica"},history:{undone:"Ao desfeita",redone:"Ao refeita",nothingToUndo:"Nada para desfazer",nothingToRedo:"Nada para refazer"},relationships:{yourPartner:"Seu Parceiro/Parceira",partnerOf:"'s Parceiro/Parceira",yourChild:"Seu filho/filha",siblingChild:"'s filho/filha (seu sobrinha/sobrinho)",cousinChild:"'s filho/filha (filho/filha do seu primo/prima)",grandchild:"'s filho/filha (seu neto/neta)",siblingInLaw:"'s parceiro/parceira (seu cunhado/cunhada)",childInLaw:"'s parceiro/parceira (seu genro/nora)"},dropdownOptions:{yourChild:"Seu filho/filha",childTemplate:"Filho(a) de {name}",nieceNephewTemplate:"Filho(a) de {name} (seu sobrinho(a))",cousinChildTemplate:"Filho(a) de {name} (filho(a) do seu primo(a))",grandchildTemplate:"Filho(a) de {name} (seu neto(a))",partnerTemplate:"Parceiro(a) de {name}",siblingPartnerTemplate:"Parceiro(a) de {name} (seu cunhado(a))",childPartnerTemplate:"Parceiro(a) de {name} (seu genro/nora)",parentSideTemplate:"Irm(o) de {name}",uncleAuntChildTemplate:"Filho(a) de {name}",siblingChildTemplate:"Filho(a) de {name}"}}}};function xg(t,e,n={}){const r=e.split(".");let i=ql[t];for(const s of r)if(i=i?.[s],i===void 0)return ew.warn("Translation not found",{key:e,lang:t}),e;return typeof i=="string"&&Object.keys(n).length>0?i.replace(/\{(\w+)\}/g,(s,o)=>n[o]!==void 0?n[o]:s):i}const tw=Ze({prefix:"useI18n",level:"info"}),Ni=ge(localStorage.getItem("lang")||"en");function An(){return{lang:Ni,t:(n,r={})=>{const i=n.split(".");let s=ql[Ni.value];for(const o of i)if(s=s?.[o],s===void 0)return tw.warn("Translation not found",{key:n,lang:Ni.value}),n;return typeof s=="string"&&Object.keys(r).length>0?s.replace(/\{(\w+)\}/g,(o,a)=>r[a]!==void 0?r[a]:o):s},changeLanguage:n=>{Ni.value=n,localStorage.setItem("lang",n)},translations:st(()=>ql[Ni.value])}}const ei=ge(localStorage.getItem("darkMode")==="true"),nw=()=>{ei.value?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")};Mt(ei,()=>{localStorage.setItem("darkMode",ei.value),nw()},{immediate:!0});function Cg(){return{darkMode:ei,toggleDarkMode:()=>{ei.value=!ei.value}}}function rw(){const t=document.getElementById("particles");if(!t)return;const e=t.getContext("2d");t.width=window.innerWidth,t.height=window.innerHeight;const n=[],r=100,i=150;class s{constructor(){this.x=Math.random()*t.width,this.y=Math.random()*t.height,this.vx=(Math.random()-.5)*.5,this.vy=(Math.random()-.5)*.5,this.radius=Math.random()*2+1}update(){this.x+=this.vx,this.y+=this.vy,(this.x<0||this.x>t.width)&&(this.vx*=-1),(this.y<0||this.y>t.height)&&(this.vy*=-1)}draw(){const l=document.documentElement.classList.contains("dark");e.fillStyle=l?"rgba(167, 139, 250, 0.6)":"rgba(139, 92, 246, 0.5)",e.beginPath(),e.arc(this.x,this.y,this.radius,0,Math.PI*2),e.fill()}}for(let a=0;a<r;a++)n.push(new s);function o(){e.clearRect(0,0,t.width,t.height),n.forEach(l=>{l.update(),l.draw()});const a=document.documentElement.classList.contains("dark");n.forEach((l,c)=>{n.slice(c+1).forEach(d=>{const u=l.x-d.x,h=l.y-d.y,f=Math.sqrt(u*u+h*h);if(f<i){const g=(1-f/i)*.4;e.strokeStyle=a?`rgba(167, 139, 250, ${g})`:`rgba(139, 92, 246, ${g})`,e.lineWidth=1.5,e.beginPath(),e.moveTo(l.x,l.y),e.lineTo(d.x,d.y),e.stroke()}})}),requestAnimationFrame(o)}o(),window.addEventListener("resize",()=>{t.width=window.innerWidth,t.height=window.innerHeight})}const yr=As({visible:!1,text:"",x:0,y:0});function Sg(){const t=i=>{yr.text=i,yr.visible=!0},e=()=>{yr.visible=!1,yr.text=""},n=i=>{i&&(yr.x=i.clientX??0,yr.y=i.clientY??0)};return{showTooltip:t,hideTooltip:e,updatePosition:n,showTooltipAt:(i,s)=>{i&&n(i),t(s)},tooltipState:yr}}const Gr=(t,e)=>{const n=t.__vccOpts||t;for(const[r,i]of e)n[r]=i;return n},zs=15,Ku=288,Xu=120,iw={__name:"GlobalTooltip",setup(t){const{tooltipState:e}=Sg(),n=st(()=>{if(!e.visible)return{display:"none"};let i=e.x+zs,s=e.y+zs;return i+Ku>window.innerWidth&&(i=e.x-Ku-zs),s+Xu>window.innerHeight&&(s=e.y-Xu-zs),i<0&&(i=5),s<0&&(s=5),{left:`${i}px`,top:`${s}px`}}),r=i=>{e.visible&&(e.x=i.clientX,e.y=i.clientY)};return Xn(()=>{document.addEventListener("mousemove",r)}),xs(()=>{document.removeEventListener("mousemove",r)}),(i,s)=>(Y(),Wn(Bl,{name:"tooltip-fade"},{default:Xe(()=>[m(e).visible&&m(e).text?(Y(),ne("div",{key:0,class:"global-tooltip",style:Es(n.value)},_(m(e).text),5)):Pe("",!0)]),_:1}))}},sw=Gr(iw,[["__scopeId","data-v-637ae200"]]),ow={class:"content-wrapper"},aw={class:"header"},lw={class:"container-main header-content"},cw={class:"flex items-center gap-4"},dw={class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},uw={key:0,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"},hw={key:1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},fw={class:"nav hidden md:flex"},pw={class:"hidden md:flex items-center space-x-4"},gw=["title"],mw={key:0,class:"text-xl"},yw={key:1,class:"text-xl"},vw={class:"flex flex-col h-full p-6"},_w={class:"flex flex-col space-y-2 mb-8"},bw={class:"border-t border-[var(--color-border)] pt-6 space-y-4"},ww={class:"block text-sm font-medium mb-2"},Ew={class:"text-2xl"},Aw={class:"page"},kw={key:0,class:"footer"},xw={class:"container-main footer-content"},Cw={class:"mb-2"},Sw={class:"text-sm"},Tw={__name:"App",setup(t){const e=Ub(),{lang:n,t:r,changeLanguage:i}=An(),{darkMode:s,toggleDarkMode:o}=Cg(),a=ge(!1),l=()=>{a.value=!a.value},c=()=>{a.value=!1},d=st(()=>["showcase","explorer","family"].includes(e.name));return Mt(d,u=>{u?document.body.classList.add("demo-page"):document.body.classList.remove("demo-page")},{immediate:!0}),Xn(()=>{rw()}),(u,h)=>{const f=Dl("router-link"),g=Dl("router-view");return Y(),ne(We,null,[h[16]||(h[16]=p("canvas",{id:"particles"},null,-1)),p("div",ow,[p("header",aw,[p("div",lw,[p("div",cw,[ke(f,{to:"/",class:"logo"},{default:Xe(()=>[...h[7]||(h[7]=[Re(" @guinetik/graph-js ",-1)])]),_:1})]),p("button",{onClick:l,class:"md:hidden btn-icon","aria-label":"Toggle menu"},[(Y(),ne("svg",dw,[a.value?(Y(),ne("path",hw)):(Y(),ne("path",uw))]))]),p("nav",fw,[ke(f,{to:"/showcase",class:"nav-link","active-class":"nav-link-active"},{default:Xe(()=>[Re(_(m(r)("nav.showcase")),1)]),_:1}),ke(f,{to:"/explorer",class:"nav-link","active-class":"nav-link-active"},{default:Xe(()=>[Re(_(m(r)("nav.explorer")),1)]),_:1}),ke(f,{to:"/family",class:"nav-link","active-class":"nav-link-active"},{default:Xe(()=>[Re(_(m(r)("nav.family")),1)]),_:1}),ke(f,{to:"/docs",class:"nav-link","active-class":"nav-link-active"},{default:Xe(()=>[Re(_(m(r)("nav.docs")),1)]),_:1})]),p("div",pw,[Rt(p("select",{"onUpdate:modelValue":h[0]||(h[0]=y=>ct(n)?n.value=y:null),onChange:h[1]||(h[1]=y=>m(i)(m(n))),class:"px-3 py-1 rounded-md bg-secondary text-primary border border-color text-sm"},[...h[8]||(h[8]=[p("option",{value:"en"},"EN",-1),p("option",{value:"pt"},"PT",-1)])],544),[[di,m(n)]]),p("button",{onClick:h[2]||(h[2]=(...y)=>m(o)&&m(o)(...y)),class:"btn-icon",title:m(r)("common.darkMode")},[m(s)?(Y(),ne("span",yw,"")):(Y(),ne("span",mw,""))],8,gw),h[9]||(h[9]=p("a",{href:"https://github.com/guinetik/graph-js",target:"_blank",class:"btn-icon",title:"View on GitHub"},[p("svg",{class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24"},[p("path",{d:"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"})])],-1))])])]),ke(Bl,{name:"mobile-menu"},{default:Xe(()=>[a.value?(Y(),ne("div",{key:0,class:"fixed inset-0 z-50 md:hidden",onClick:c},[h[14]||(h[14]=p("div",{class:"absolute inset-0 bg-black/50"},null,-1)),p("div",{class:"absolute top-0 right-0 bottom-0 w-72 bg-[var(--color-bg-primary)] shadow-xl",onClick:h[6]||(h[6]=dg(()=>{},["stop"]))},[p("div",vw,[p("div",{class:"flex justify-between items-center mb-8"},[h[11]||(h[11]=p("h2",{class:"text-xl font-bold"},"Menu",-1)),p("button",{onClick:c,class:"btn-icon"},[...h[10]||(h[10]=[p("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[p("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),p("nav",_w,[ke(f,{to:"/showcase",class:"nav-link text-lg py-3 px-4 rounded-md hover:bg-[var(--color-bg-secondary)] transition-colors","active-class":"bg-[var(--color-bg-secondary)] text-accent",onClick:c},{default:Xe(()=>[Re(_(m(r)("nav.showcase")),1)]),_:1}),ke(f,{to:"/explorer",class:"nav-link text-lg py-3 px-4 rounded-md hover:bg-[var(--color-bg-secondary)] transition-colors","active-class":"bg-[var(--color-bg-secondary)] text-accent",onClick:c},{default:Xe(()=>[Re(_(m(r)("nav.explorer")),1)]),_:1}),ke(f,{to:"/family",class:"nav-link text-lg py-3 px-4 rounded-md hover:bg-[var(--color-bg-secondary)] transition-colors","active-class":"bg-[var(--color-bg-secondary)] text-accent",onClick:c},{default:Xe(()=>[Re(_(m(r)("nav.family")),1)]),_:1}),ke(f,{to:"/docs",class:"nav-link text-lg py-3 px-4 rounded-md hover:bg-[var(--color-bg-secondary)] transition-colors","active-class":"bg-[var(--color-bg-secondary)] text-accent",onClick:c},{default:Xe(()=>[Re(_(m(r)("nav.docs")),1)]),_:1})]),p("div",bw,[p("div",null,[p("label",ww,_(m(r)("common.language")),1),Rt(p("select",{"onUpdate:modelValue":h[3]||(h[3]=y=>ct(n)?n.value=y:null),onChange:h[4]||(h[4]=y=>m(i)(m(n))),class:"w-full px-3 py-2 rounded-md bg-secondary text-primary border border-color"},[...h[12]||(h[12]=[p("option",{value:"en"},"English",-1),p("option",{value:"pt"},"Portugus",-1)])],544),[[di,m(n)]])]),p("button",{onClick:h[5]||(h[5]=(...y)=>m(o)&&m(o)(...y)),class:"w-full flex items-center justify-between px-4 py-3 rounded-md bg-secondary hover:bg-[var(--color-bg-tertiary)] transition-colors"},[p("span",null,_(m(r)("common.darkMode")),1),p("span",Ew,_(m(s)?"":""),1)]),h[13]||(h[13]=p("a",{href:"https://github.com/guinetik/graph-js",target:"_blank",class:"flex items-center justify-between px-4 py-3 rounded-md bg-secondary hover:bg-[var(--color-bg-tertiary)] transition-colors"},[p("span",null,"View on GitHub"),p("svg",{class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24"},[p("path",{d:"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"})])],-1))])])])])):Pe("",!0)]),_:1}),p("main",Aw,[ke(g,null,{default:Xe(({Component:y})=>[ke(Bl,{name:"page-transition",mode:"out-in"},{default:Xe(()=>[(Y(),Wn(g0(y)))]),_:2},1024)]),_:1})]),d.value?Pe("",!0):(Y(),ne("footer",kw,[p("div",xw,[p("p",Cw,[Re(_(m(r)("footer.madeBy"))+"  "+_(m(r)("footer.by"))+" ",1),h[15]||(h[15]=p("a",{href:"https://github.com/guinetik",target:"_blank",class:"text-accent"},"@guinetik",-1))]),p("p",Sw,_(m(r)("footer.license")),1)])])),ke(sw)])],64)}}},Rw="modulepreload",Nw=function(t){return"/"+t},Zu={},R=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){let l=function(c){return Promise.all(c.map(d=>Promise.resolve(d).then(u=>({status:"fulfilled",value:u}),u=>({status:"rejected",reason:u}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=o?.nonce||o?.getAttribute("nonce");i=l(n.map(c=>{if(c=Nw(c),c in Zu)return;Zu[c]=!0;const d=c.endsWith(".css"),u=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":Rw,d||(h.as="script"),h.crossOrigin="",h.href=c,a&&h.setAttribute("nonce",a),document.head.appendChild(h),d)return new Promise((f,g)=>{h.addEventListener("load",f),h.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})};let tt=class extends Error{constructor(e){super(e),this.name="ShikiError"}};function Lw(t){return rd(t)}function rd(t){return Array.isArray(t)?Iw(t):t instanceof RegExp?t:typeof t=="object"?Dw(t):t}function Iw(t){let e=[];for(let n=0,r=t.length;n<r;n++)e[n]=rd(t[n]);return e}function Dw(t){let e={};for(let n in t)e[n]=rd(t[n]);return e}function Tg(t,...e){return e.forEach(n=>{for(let r in n)t[r]=n[r]}),t}function Rg(t){const e=~t.lastIndexOf("/")||~t.lastIndexOf("\\");return e===0?t:~e===t.length-1?Rg(t.substring(0,t.length-1)):t.substr(~e+1)}var Ha=/\$(\d+)|\${(\d+):\/(downcase|upcase)}/g,Bs=class{static hasCaptures(t){return t===null?!1:(Ha.lastIndex=0,Ha.test(t))}static replaceCaptures(t,e,n){return t.replace(Ha,(r,i,s,o)=>{let a=n[parseInt(i||s,10)];if(a){let l=e.substring(a.start,a.end);for(;l[0]===".";)l=l.substring(1);switch(o){case"downcase":return l.toLowerCase();case"upcase":return l.toUpperCase();default:return l}}else return r})}};function Ng(t,e){return t<e?-1:t>e?1:0}function Lg(t,e){if(t===null&&e===null)return 0;if(!t)return-1;if(!e)return 1;let n=t.length,r=e.length;if(n===r){for(let i=0;i<n;i++){let s=Ng(t[i],e[i]);if(s!==0)return s}return 0}return n-r}function Yu(t){return!!(/^#[0-9a-f]{6}$/i.test(t)||/^#[0-9a-f]{8}$/i.test(t)||/^#[0-9a-f]{3}$/i.test(t)||/^#[0-9a-f]{4}$/i.test(t))}function Ig(t){return t.replace(/[\-\\\{\}\*\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&")}var Dg=class{constructor(t){this.fn=t}cache=new Map;get(t){if(this.cache.has(t))return this.cache.get(t);const e=this.fn(t);return this.cache.set(t,e),e}},No=class{constructor(t,e,n){this._colorMap=t,this._defaults=e,this._root=n}static createFromRawTheme(t,e){return this.createFromParsedTheme(Mw(t),e)}static createFromParsedTheme(t,e){return Fw(t,e)}_cachedMatchRoot=new Dg(t=>this._root.match(t));getColorMap(){return this._colorMap.getColorMap()}getDefaults(){return this._defaults}match(t){if(t===null)return this._defaults;const e=t.scopeName,r=this._cachedMatchRoot.get(e).find(i=>Pw(t.parent,i.parentScopes));return r?new Pg(r.fontStyle,r.foreground,r.background):null}},Wa=class fo{constructor(e,n){this.parent=e,this.scopeName=n}static push(e,n){for(const r of n)e=new fo(e,r);return e}static from(...e){let n=null;for(let r=0;r<e.length;r++)n=new fo(n,e[r]);return n}push(e){return new fo(this,e)}getSegments(){let e=this;const n=[];for(;e;)n.push(e.scopeName),e=e.parent;return n.reverse(),n}toString(){return this.getSegments().join(" ")}extends(e){return this===e?!0:this.parent===null?!1:this.parent.extends(e)}getExtensionIfDefined(e){const n=[];let r=this;for(;r&&r!==e;)n.push(r.scopeName),r=r.parent;return r===e?n.reverse():void 0}};function Pw(t,e){if(e.length===0)return!0;for(let n=0;n<e.length;n++){let r=e[n],i=!1;if(r===">"){if(n===e.length-1)return!1;r=e[++n],i=!0}for(;t&&!Gw(t.scopeName,r);){if(i)return!1;t=t.parent}if(!t)return!1;t=t.parent}return!0}function Gw(t,e){return e===t||t.startsWith(e)&&t[e.length]==="."}var Pg=class{constructor(t,e,n){this.fontStyle=t,this.foregroundId=e,this.backgroundId=n}};function Mw(t){if(!t)return[];if(!t.settings||!Array.isArray(t.settings))return[];let e=t.settings,n=[],r=0;for(let i=0,s=e.length;i<s;i++){let o=e[i];if(!o.settings)continue;let a;if(typeof o.scope=="string"){let u=o.scope;u=u.replace(/^[,]+/,""),u=u.replace(/[,]+$/,""),a=u.split(",")}else Array.isArray(o.scope)?a=o.scope:a=[""];let l=-1;if(typeof o.settings.fontStyle=="string"){l=0;let u=o.settings.fontStyle.split(" ");for(let h=0,f=u.length;h<f;h++)switch(u[h]){case"italic":l=l|1;break;case"bold":l=l|2;break;case"underline":l=l|4;break;case"strikethrough":l=l|8;break}}let c=null;typeof o.settings.foreground=="string"&&Yu(o.settings.foreground)&&(c=o.settings.foreground);let d=null;typeof o.settings.background=="string"&&Yu(o.settings.background)&&(d=o.settings.background);for(let u=0,h=a.length;u<h;u++){let g=a[u].trim().split(" "),y=g[g.length-1],w=null;g.length>1&&(w=g.slice(0,g.length-1),w.reverse()),n[r++]=new Ow(y,w,i,l,c,d)}}return n}var Ow=class{constructor(t,e,n,r,i,s){this.scope=t,this.parentScopes=e,this.index=n,this.fontStyle=r,this.foreground=i,this.background=s}},Et=(t=>(t[t.NotSet=-1]="NotSet",t[t.None=0]="None",t[t.Italic=1]="Italic",t[t.Bold=2]="Bold",t[t.Underline=4]="Underline",t[t.Strikethrough=8]="Strikethrough",t))(Et||{});function Fw(t,e){t.sort((l,c)=>{let d=Ng(l.scope,c.scope);return d!==0||(d=Lg(l.parentScopes,c.parentScopes),d!==0)?d:l.index-c.index});let n=0,r="#000000",i="#ffffff";for(;t.length>=1&&t[0].scope==="";){let l=t.shift();l.fontStyle!==-1&&(n=l.fontStyle),l.foreground!==null&&(r=l.foreground),l.background!==null&&(i=l.background)}let s=new $w(e),o=new Pg(n,s.getId(r),s.getId(i)),a=new Bw(new Kl(0,null,-1,0,0),[]);for(let l=0,c=t.length;l<c;l++){let d=t[l];a.insert(0,d.scope,d.parentScopes,d.fontStyle,s.getId(d.foreground),s.getId(d.background))}return new No(s,o,a)}var $w=class{_isFrozen;_lastColorId;_id2color;_color2id;constructor(t){if(this._lastColorId=0,this._id2color=[],this._color2id=Object.create(null),Array.isArray(t)){this._isFrozen=!0;for(let e=0,n=t.length;e<n;e++)this._color2id[t[e]]=e,this._id2color[e]=t[e]}else this._isFrozen=!1}getId(t){if(t===null)return 0;t=t.toUpperCase();let e=this._color2id[t];if(e)return e;if(this._isFrozen)throw new Error(`Missing color in color map - ${t}`);return e=++this._lastColorId,this._color2id[t]=e,this._id2color[e]=t,e}getColorMap(){return this._id2color.slice(0)}},zw=Object.freeze([]),Kl=class Gg{scopeDepth;parentScopes;fontStyle;foreground;background;constructor(e,n,r,i,s){this.scopeDepth=e,this.parentScopes=n||zw,this.fontStyle=r,this.foreground=i,this.background=s}clone(){return new Gg(this.scopeDepth,this.parentScopes,this.fontStyle,this.foreground,this.background)}static cloneArr(e){let n=[];for(let r=0,i=e.length;r<i;r++)n[r]=e[r].clone();return n}acceptOverwrite(e,n,r,i){this.scopeDepth>e?console.log("how did this happen?"):this.scopeDepth=e,n!==-1&&(this.fontStyle=n),r!==0&&(this.foreground=r),i!==0&&(this.background=i)}},Bw=class Xl{constructor(e,n=[],r={}){this._mainRule=e,this._children=r,this._rulesWithParentScopes=n}_rulesWithParentScopes;static _cmpBySpecificity(e,n){if(e.scopeDepth!==n.scopeDepth)return n.scopeDepth-e.scopeDepth;let r=0,i=0;for(;e.parentScopes[r]===">"&&r++,n.parentScopes[i]===">"&&i++,!(r>=e.parentScopes.length||i>=n.parentScopes.length);){const s=n.parentScopes[i].length-e.parentScopes[r].length;if(s!==0)return s;r++,i++}return n.parentScopes.length-e.parentScopes.length}match(e){if(e!==""){let r=e.indexOf("."),i,s;if(r===-1?(i=e,s=""):(i=e.substring(0,r),s=e.substring(r+1)),this._children.hasOwnProperty(i))return this._children[i].match(s)}const n=this._rulesWithParentScopes.concat(this._mainRule);return n.sort(Xl._cmpBySpecificity),n}insert(e,n,r,i,s,o){if(n===""){this._doInsertHere(e,r,i,s,o);return}let a=n.indexOf("."),l,c;a===-1?(l=n,c=""):(l=n.substring(0,a),c=n.substring(a+1));let d;this._children.hasOwnProperty(l)?d=this._children[l]:(d=new Xl(this._mainRule.clone(),Kl.cloneArr(this._rulesWithParentScopes)),this._children[l]=d),d.insert(e+1,c,r,i,s,o)}_doInsertHere(e,n,r,i,s){if(n===null){this._mainRule.acceptOverwrite(e,r,i,s);return}for(let o=0,a=this._rulesWithParentScopes.length;o<a;o++){let l=this._rulesWithParentScopes[o];if(Lg(l.parentScopes,n)===0){l.acceptOverwrite(e,r,i,s);return}}r===-1&&(r=this._mainRule.fontStyle),i===0&&(i=this._mainRule.foreground),s===0&&(s=this._mainRule.background),this._rulesWithParentScopes.push(new Kl(e,n,r,i,s))}},fi=class Wt{static toBinaryStr(e){return e.toString(2).padStart(32,"0")}static print(e){const n=Wt.getLanguageId(e),r=Wt.getTokenType(e),i=Wt.getFontStyle(e),s=Wt.getForeground(e),o=Wt.getBackground(e);console.log({languageId:n,tokenType:r,fontStyle:i,foreground:s,background:o})}static getLanguageId(e){return(e&255)>>>0}static getTokenType(e){return(e&768)>>>8}static containsBalancedBrackets(e){return(e&1024)!==0}static getFontStyle(e){return(e&30720)>>>11}static getForeground(e){return(e&16744448)>>>15}static getBackground(e){return(e&4278190080)>>>24}static set(e,n,r,i,s,o,a){let l=Wt.getLanguageId(e),c=Wt.getTokenType(e),d=Wt.containsBalancedBrackets(e)?1:0,u=Wt.getFontStyle(e),h=Wt.getForeground(e),f=Wt.getBackground(e);return n!==0&&(l=n),r!==8&&(c=r),i!==null&&(d=i?1:0),s!==-1&&(u=s),o!==0&&(h=o),a!==0&&(f=a),(l<<0|c<<8|d<<10|u<<11|h<<15|f<<24)>>>0}};function Lo(t,e){const n=[],r=Vw(t);let i=r.next();for(;i!==null;){let l=0;if(i.length===2&&i.charAt(1)===":"){switch(i.charAt(0)){case"R":l=1;break;case"L":l=-1;break;default:console.log(`Unknown priority ${i} in scope selector`)}i=r.next()}let c=o();if(n.push({matcher:c,priority:l}),i!==",")break;i=r.next()}return n;function s(){if(i==="-"){i=r.next();const l=s();return c=>!!l&&!l(c)}if(i==="("){i=r.next();const l=a();return i===")"&&(i=r.next()),l}if(Ju(i)){const l=[];do l.push(i),i=r.next();while(Ju(i));return c=>e(l,c)}return null}function o(){const l=[];let c=s();for(;c;)l.push(c),c=s();return d=>l.every(u=>u(d))}function a(){const l=[];let c=o();for(;c&&(l.push(c),i==="|"||i===",");){do i=r.next();while(i==="|"||i===",");c=o()}return d=>l.some(u=>u(d))}}function Ju(t){return!!t&&!!t.match(/[\w\.:]+/)}function Vw(t){let e=/([LR]:|[\w\.:][\w\.:\-]*|[\,\|\-\(\)])/g,n=e.exec(t);return{next:()=>{if(!n)return null;const r=n[0];return n=e.exec(t),r}}}function Mg(t){typeof t.dispose=="function"&&t.dispose()}var hs=class{constructor(t){this.scopeName=t}toKey(){return this.scopeName}},Uw=class{constructor(t,e){this.scopeName=t,this.ruleName=e}toKey(){return`${this.scopeName}#${this.ruleName}`}},jw=class{_references=[];_seenReferenceKeys=new Set;get references(){return this._references}visitedRule=new Set;add(t){const e=t.toKey();this._seenReferenceKeys.has(e)||(this._seenReferenceKeys.add(e),this._references.push(t))}},Hw=class{constructor(t,e){this.repo=t,this.initialScopeName=e,this.seenFullScopeRequests.add(this.initialScopeName),this.Q=[new hs(this.initialScopeName)]}seenFullScopeRequests=new Set;seenPartialScopeRequests=new Set;Q;processQueue(){const t=this.Q;this.Q=[];const e=new jw;for(const n of t)Ww(n,this.initialScopeName,this.repo,e);for(const n of e.references)if(n instanceof hs){if(this.seenFullScopeRequests.has(n.scopeName))continue;this.seenFullScopeRequests.add(n.scopeName),this.Q.push(n)}else{if(this.seenFullScopeRequests.has(n.scopeName)||this.seenPartialScopeRequests.has(n.toKey()))continue;this.seenPartialScopeRequests.add(n.toKey()),this.Q.push(n)}}};function Ww(t,e,n,r){const i=n.lookup(t.scopeName);if(!i){if(t.scopeName===e)throw new Error(`No grammar provided for <${e}>`);return}const s=n.lookup(e);t instanceof hs?po({baseGrammar:s,selfGrammar:i},r):Zl(t.ruleName,{baseGrammar:s,selfGrammar:i,repository:i.repository},r);const o=n.injections(t.scopeName);if(o)for(const a of o)r.add(new hs(a))}function Zl(t,e,n){if(e.repository&&e.repository[t]){const r=e.repository[t];Io([r],e,n)}}function po(t,e){t.selfGrammar.patterns&&Array.isArray(t.selfGrammar.patterns)&&Io(t.selfGrammar.patterns,{...t,repository:t.selfGrammar.repository},e),t.selfGrammar.injections&&Io(Object.values(t.selfGrammar.injections),{...t,repository:t.selfGrammar.repository},e)}function Io(t,e,n){for(const r of t){if(n.visitedRule.has(r))continue;n.visitedRule.add(r);const i=r.repository?Tg({},e.repository,r.repository):e.repository;Array.isArray(r.patterns)&&Io(r.patterns,{...e,repository:i},n);const s=r.include;if(!s)continue;const o=Og(s);switch(o.kind){case 0:po({...e,selfGrammar:e.baseGrammar},n);break;case 1:po(e,n);break;case 2:Zl(o.ruleName,{...e,repository:i},n);break;case 3:case 4:const a=o.scopeName===e.selfGrammar.scopeName?e.selfGrammar:o.scopeName===e.baseGrammar.scopeName?e.baseGrammar:void 0;if(a){const l={baseGrammar:e.baseGrammar,selfGrammar:a,repository:i};o.kind===4?Zl(o.ruleName,l,n):po(l,n)}else o.kind===4?n.add(new Uw(o.scopeName,o.ruleName)):n.add(new hs(o.scopeName));break}}}var qw=class{kind=0},Kw=class{kind=1},Xw=class{constructor(t){this.ruleName=t}kind=2},Zw=class{constructor(t){this.scopeName=t}kind=3},Yw=class{constructor(t,e){this.scopeName=t,this.ruleName=e}kind=4};function Og(t){if(t==="$base")return new qw;if(t==="$self")return new Kw;const e=t.indexOf("#");if(e===-1)return new Zw(t);if(e===0)return new Xw(t.substring(1));{const n=t.substring(0,e),r=t.substring(e+1);return new Yw(n,r)}}var Jw=/\\(\d+)/,Qu=/\\(\d+)/g,Qw=-1,Fg=-2;var Ss=class{$location;id;_nameIsCapturing;_name;_contentNameIsCapturing;_contentName;constructor(t,e,n,r){this.$location=t,this.id=e,this._name=n||null,this._nameIsCapturing=Bs.hasCaptures(this._name),this._contentName=r||null,this._contentNameIsCapturing=Bs.hasCaptures(this._contentName)}get debugName(){const t=this.$location?`${Rg(this.$location.filename)}:${this.$location.line}`:"unknown";return`${this.constructor.name}#${this.id} @ ${t}`}getName(t,e){return!this._nameIsCapturing||this._name===null||t===null||e===null?this._name:Bs.replaceCaptures(this._name,t,e)}getContentName(t,e){return!this._contentNameIsCapturing||this._contentName===null?this._contentName:Bs.replaceCaptures(this._contentName,t,e)}},e1=class extends Ss{retokenizeCapturedWithRuleId;constructor(t,e,n,r,i){super(t,e,n,r),this.retokenizeCapturedWithRuleId=i}dispose(){}collectPatterns(t,e){throw new Error("Not supported!")}compile(t,e){throw new Error("Not supported!")}compileAG(t,e,n,r){throw new Error("Not supported!")}},t1=class extends Ss{_match;captures;_cachedCompiledPatterns;constructor(t,e,n,r,i){super(t,e,n,null),this._match=new fs(r,this.id),this.captures=i,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}get debugMatchRegExp(){return`${this._match.source}`}collectPatterns(t,e){e.push(this._match)}compile(t,e){return this._getCachedCompiledPatterns(t).compile(t)}compileAG(t,e,n,r){return this._getCachedCompiledPatterns(t).compileAG(t,n,r)}_getCachedCompiledPatterns(t){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new ps,this.collectPatterns(t,this._cachedCompiledPatterns)),this._cachedCompiledPatterns}},eh=class extends Ss{hasMissingPatterns;patterns;_cachedCompiledPatterns;constructor(t,e,n,r,i){super(t,e,n,r),this.patterns=i.patterns,this.hasMissingPatterns=i.hasMissingPatterns,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}collectPatterns(t,e){for(const n of this.patterns)t.getRule(n).collectPatterns(t,e)}compile(t,e){return this._getCachedCompiledPatterns(t).compile(t)}compileAG(t,e,n,r){return this._getCachedCompiledPatterns(t).compileAG(t,n,r)}_getCachedCompiledPatterns(t){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new ps,this.collectPatterns(t,this._cachedCompiledPatterns)),this._cachedCompiledPatterns}},Yl=class extends Ss{_begin;beginCaptures;_end;endHasBackReferences;endCaptures;applyEndPatternLast;hasMissingPatterns;patterns;_cachedCompiledPatterns;constructor(t,e,n,r,i,s,o,a,l,c){super(t,e,n,r),this._begin=new fs(i,this.id),this.beginCaptures=s,this._end=new fs(o||"",-1),this.endHasBackReferences=this._end.hasBackReferences,this.endCaptures=a,this.applyEndPatternLast=l||!1,this.patterns=c.patterns,this.hasMissingPatterns=c.hasMissingPatterns,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}get debugBeginRegExp(){return`${this._begin.source}`}get debugEndRegExp(){return`${this._end.source}`}getEndWithResolvedBackReferences(t,e){return this._end.resolveBackReferences(t,e)}collectPatterns(t,e){e.push(this._begin)}compile(t,e){return this._getCachedCompiledPatterns(t,e).compile(t)}compileAG(t,e,n,r){return this._getCachedCompiledPatterns(t,e).compileAG(t,n,r)}_getCachedCompiledPatterns(t,e){if(!this._cachedCompiledPatterns){this._cachedCompiledPatterns=new ps;for(const n of this.patterns)t.getRule(n).collectPatterns(t,this._cachedCompiledPatterns);this.applyEndPatternLast?this._cachedCompiledPatterns.push(this._end.hasBackReferences?this._end.clone():this._end):this._cachedCompiledPatterns.unshift(this._end.hasBackReferences?this._end.clone():this._end)}return this._end.hasBackReferences&&(this.applyEndPatternLast?this._cachedCompiledPatterns.setSource(this._cachedCompiledPatterns.length()-1,e):this._cachedCompiledPatterns.setSource(0,e)),this._cachedCompiledPatterns}},Do=class extends Ss{_begin;beginCaptures;whileCaptures;_while;whileHasBackReferences;hasMissingPatterns;patterns;_cachedCompiledPatterns;_cachedCompiledWhilePatterns;constructor(t,e,n,r,i,s,o,a,l){super(t,e,n,r),this._begin=new fs(i,this.id),this.beginCaptures=s,this.whileCaptures=a,this._while=new fs(o,Fg),this.whileHasBackReferences=this._while.hasBackReferences,this.patterns=l.patterns,this.hasMissingPatterns=l.hasMissingPatterns,this._cachedCompiledPatterns=null,this._cachedCompiledWhilePatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null),this._cachedCompiledWhilePatterns&&(this._cachedCompiledWhilePatterns.dispose(),this._cachedCompiledWhilePatterns=null)}get debugBeginRegExp(){return`${this._begin.source}`}get debugWhileRegExp(){return`${this._while.source}`}getWhileWithResolvedBackReferences(t,e){return this._while.resolveBackReferences(t,e)}collectPatterns(t,e){e.push(this._begin)}compile(t,e){return this._getCachedCompiledPatterns(t).compile(t)}compileAG(t,e,n,r){return this._getCachedCompiledPatterns(t).compileAG(t,n,r)}_getCachedCompiledPatterns(t){if(!this._cachedCompiledPatterns){this._cachedCompiledPatterns=new ps;for(const e of this.patterns)t.getRule(e).collectPatterns(t,this._cachedCompiledPatterns)}return this._cachedCompiledPatterns}compileWhile(t,e){return this._getCachedCompiledWhilePatterns(t,e).compile(t)}compileWhileAG(t,e,n,r){return this._getCachedCompiledWhilePatterns(t,e).compileAG(t,n,r)}_getCachedCompiledWhilePatterns(t,e){return this._cachedCompiledWhilePatterns||(this._cachedCompiledWhilePatterns=new ps,this._cachedCompiledWhilePatterns.push(this._while.hasBackReferences?this._while.clone():this._while)),this._while.hasBackReferences&&this._cachedCompiledWhilePatterns.setSource(0,e||""),this._cachedCompiledWhilePatterns}},$g=class gt{static createCaptureRule(e,n,r,i,s){return e.registerRule(o=>new e1(n,o,r,i,s))}static getCompiledRuleId(e,n,r){return e.id||n.registerRule(i=>{if(e.id=i,e.match)return new t1(e.$vscodeTextmateLocation,e.id,e.name,e.match,gt._compileCaptures(e.captures,n,r));if(typeof e.begin>"u"){e.repository&&(r=Tg({},r,e.repository));let s=e.patterns;return typeof s>"u"&&e.include&&(s=[{include:e.include}]),new eh(e.$vscodeTextmateLocation,e.id,e.name,e.contentName,gt._compilePatterns(s,n,r))}return e.while?new Do(e.$vscodeTextmateLocation,e.id,e.name,e.contentName,e.begin,gt._compileCaptures(e.beginCaptures||e.captures,n,r),e.while,gt._compileCaptures(e.whileCaptures||e.captures,n,r),gt._compilePatterns(e.patterns,n,r)):new Yl(e.$vscodeTextmateLocation,e.id,e.name,e.contentName,e.begin,gt._compileCaptures(e.beginCaptures||e.captures,n,r),e.end,gt._compileCaptures(e.endCaptures||e.captures,n,r),e.applyEndPatternLast,gt._compilePatterns(e.patterns,n,r))}),e.id}static _compileCaptures(e,n,r){let i=[];if(e){let s=0;for(const o in e){if(o==="$vscodeTextmateLocation")continue;const a=parseInt(o,10);a>s&&(s=a)}for(let o=0;o<=s;o++)i[o]=null;for(const o in e){if(o==="$vscodeTextmateLocation")continue;const a=parseInt(o,10);let l=0;e[o].patterns&&(l=gt.getCompiledRuleId(e[o],n,r)),i[a]=gt.createCaptureRule(n,e[o].$vscodeTextmateLocation,e[o].name,e[o].contentName,l)}}return i}static _compilePatterns(e,n,r){let i=[];if(e)for(let s=0,o=e.length;s<o;s++){const a=e[s];let l=-1;if(a.include){const c=Og(a.include);switch(c.kind){case 0:case 1:l=gt.getCompiledRuleId(r[a.include],n,r);break;case 2:let d=r[c.ruleName];d&&(l=gt.getCompiledRuleId(d,n,r));break;case 3:case 4:const u=c.scopeName,h=c.kind===4?c.ruleName:null,f=n.getExternalGrammar(u,r);if(f)if(h){let g=f.repository[h];g&&(l=gt.getCompiledRuleId(g,n,f.repository))}else l=gt.getCompiledRuleId(f.repository.$self,n,f.repository);break}}else l=gt.getCompiledRuleId(a,n,r);if(l!==-1){const c=n.getRule(l);let d=!1;if((c instanceof eh||c instanceof Yl||c instanceof Do)&&c.hasMissingPatterns&&c.patterns.length===0&&(d=!0),d)continue;i.push(l)}}return{patterns:i,hasMissingPatterns:(e?e.length:0)!==i.length}}},fs=class zg{source;ruleId;hasAnchor;hasBackReferences;_anchorCache;constructor(e,n){if(e&&typeof e=="string"){const r=e.length;let i=0,s=[],o=!1;for(let a=0;a<r;a++)if(e.charAt(a)==="\\"&&a+1<r){const c=e.charAt(a+1);c==="z"?(s.push(e.substring(i,a)),s.push("$(?!\\n)(?<!\\n)"),i=a+2):(c==="A"||c==="G")&&(o=!0),a++}this.hasAnchor=o,i===0?this.source=e:(s.push(e.substring(i,r)),this.source=s.join(""))}else this.hasAnchor=!1,this.source=e;this.hasAnchor?this._anchorCache=this._buildAnchorCache():this._anchorCache=null,this.ruleId=n,typeof this.source=="string"?this.hasBackReferences=Jw.test(this.source):this.hasBackReferences=!1}clone(){return new zg(this.source,this.ruleId)}setSource(e){this.source!==e&&(this.source=e,this.hasAnchor&&(this._anchorCache=this._buildAnchorCache()))}resolveBackReferences(e,n){if(typeof this.source!="string")throw new Error("This method should only be called if the source is a string");let r=n.map(i=>e.substring(i.start,i.end));return Qu.lastIndex=0,this.source.replace(Qu,(i,s)=>Ig(r[parseInt(s,10)]||""))}_buildAnchorCache(){if(typeof this.source!="string")throw new Error("This method should only be called if the source is a string");let e=[],n=[],r=[],i=[],s,o,a,l;for(s=0,o=this.source.length;s<o;s++)a=this.source.charAt(s),e[s]=a,n[s]=a,r[s]=a,i[s]=a,a==="\\"&&s+1<o&&(l=this.source.charAt(s+1),l==="A"?(e[s+1]="",n[s+1]="",r[s+1]="A",i[s+1]="A"):l==="G"?(e[s+1]="",n[s+1]="G",r[s+1]="",i[s+1]="G"):(e[s+1]=l,n[s+1]=l,r[s+1]=l,i[s+1]=l),s++);return{A0_G0:e.join(""),A0_G1:n.join(""),A1_G0:r.join(""),A1_G1:i.join("")}}resolveAnchors(e,n){return!this.hasAnchor||!this._anchorCache||typeof this.source!="string"?this.source:e?n?this._anchorCache.A1_G1:this._anchorCache.A1_G0:n?this._anchorCache.A0_G1:this._anchorCache.A0_G0}},ps=class{_items;_hasAnchors;_cached;_anchorCache;constructor(){this._items=[],this._hasAnchors=!1,this._cached=null,this._anchorCache={A0_G0:null,A0_G1:null,A1_G0:null,A1_G1:null}}dispose(){this._disposeCaches()}_disposeCaches(){this._cached&&(this._cached.dispose(),this._cached=null),this._anchorCache.A0_G0&&(this._anchorCache.A0_G0.dispose(),this._anchorCache.A0_G0=null),this._anchorCache.A0_G1&&(this._anchorCache.A0_G1.dispose(),this._anchorCache.A0_G1=null),this._anchorCache.A1_G0&&(this._anchorCache.A1_G0.dispose(),this._anchorCache.A1_G0=null),this._anchorCache.A1_G1&&(this._anchorCache.A1_G1.dispose(),this._anchorCache.A1_G1=null)}push(t){this._items.push(t),this._hasAnchors=this._hasAnchors||t.hasAnchor}unshift(t){this._items.unshift(t),this._hasAnchors=this._hasAnchors||t.hasAnchor}length(){return this._items.length}setSource(t,e){this._items[t].source!==e&&(this._disposeCaches(),this._items[t].setSource(e))}compile(t){if(!this._cached){let e=this._items.map(n=>n.source);this._cached=new th(t,e,this._items.map(n=>n.ruleId))}return this._cached}compileAG(t,e,n){return this._hasAnchors?e?n?(this._anchorCache.A1_G1||(this._anchorCache.A1_G1=this._resolveAnchors(t,e,n)),this._anchorCache.A1_G1):(this._anchorCache.A1_G0||(this._anchorCache.A1_G0=this._resolveAnchors(t,e,n)),this._anchorCache.A1_G0):n?(this._anchorCache.A0_G1||(this._anchorCache.A0_G1=this._resolveAnchors(t,e,n)),this._anchorCache.A0_G1):(this._anchorCache.A0_G0||(this._anchorCache.A0_G0=this._resolveAnchors(t,e,n)),this._anchorCache.A0_G0):this.compile(t)}_resolveAnchors(t,e,n){let r=this._items.map(i=>i.resolveAnchors(e,n));return new th(t,r,this._items.map(i=>i.ruleId))}},th=class{constructor(t,e,n){this.regExps=e,this.rules=n,this.scanner=t.createOnigScanner(e)}scanner;dispose(){typeof this.scanner.dispose=="function"&&this.scanner.dispose()}toString(){const t=[];for(let e=0,n=this.rules.length;e<n;e++)t.push("   - "+this.rules[e]+": "+this.regExps[e]);return t.join(`
`)}findNextMatchSync(t,e,n){const r=this.scanner.findNextMatchSync(t,e,n);return r?{ruleId:this.rules[r.index],captureIndices:r.captureIndices}:null}},qa=class{constructor(t,e){this.languageId=t,this.tokenType=e}},n1=class Jl{_defaultAttributes;_embeddedLanguagesMatcher;constructor(e,n){this._defaultAttributes=new qa(e,8),this._embeddedLanguagesMatcher=new r1(Object.entries(n||{}))}getDefaultAttributes(){return this._defaultAttributes}getBasicScopeAttributes(e){return e===null?Jl._NULL_SCOPE_METADATA:this._getBasicScopeAttributes.get(e)}static _NULL_SCOPE_METADATA=new qa(0,0);_getBasicScopeAttributes=new Dg(e=>{const n=this._scopeToLanguage(e),r=this._toStandardTokenType(e);return new qa(n,r)});_scopeToLanguage(e){return this._embeddedLanguagesMatcher.match(e)||0}_toStandardTokenType(e){const n=e.match(Jl.STANDARD_TOKEN_TYPE_REGEXP);if(!n)return 8;switch(n[1]){case"comment":return 1;case"string":return 2;case"regex":return 3;case"meta.embedded":return 0}throw new Error("Unexpected match for standard token type!")}static STANDARD_TOKEN_TYPE_REGEXP=/\b(comment|string|regex|meta\.embedded)\b/},r1=class{values;scopesRegExp;constructor(t){if(t.length===0)this.values=null,this.scopesRegExp=null;else{this.values=new Map(t);const e=t.map(([n,r])=>Ig(n));e.sort(),e.reverse(),this.scopesRegExp=new RegExp(`^((${e.join(")|(")}))($|\\.)`,"")}}match(t){if(!this.scopesRegExp)return;const e=t.match(this.scopesRegExp);if(e)return this.values.get(e[1])}},nh=class{constructor(t,e){this.stack=t,this.stoppedEarly=e}};function Bg(t,e,n,r,i,s,o,a){const l=e.content.length;let c=!1,d=-1;if(o){const f=i1(t,e,n,r,i,s);i=f.stack,r=f.linePos,n=f.isFirstLine,d=f.anchorPosition}const u=Date.now();for(;!c;){if(a!==0&&Date.now()-u>a)return new nh(i,!0);h()}return new nh(i,!1);function h(){const f=s1(t,e,n,r,i,d);if(!f){s.produce(i,l),c=!0;return}const g=f.captureIndices,y=f.matchedRuleId,w=g&&g.length>0?g[0].end>r:!1;if(y===Qw){const b=i.getRule(t);s.produce(i,g[0].start),i=i.withContentNameScopesList(i.nameScopesList),Ui(t,e,n,i,s,b.endCaptures,g),s.produce(i,g[0].end);const E=i;if(i=i.parent,d=E.getAnchorPos(),!w&&E.getEnterPos()===r){i=E,s.produce(i,l),c=!0;return}}else{const b=t.getRule(y);s.produce(i,g[0].start);const E=i,A=b.getName(e.content,g),v=i.contentNameScopesList.pushAttributed(A,t);if(i=i.push(y,r,d,g[0].end===l,null,v,v),b instanceof Yl){const S=b;Ui(t,e,n,i,s,S.beginCaptures,g),s.produce(i,g[0].end),d=g[0].end;const L=S.getContentName(e.content,g),G=v.pushAttributed(L,t);if(i=i.withContentNameScopesList(G),S.endHasBackReferences&&(i=i.withEndRule(S.getEndWithResolvedBackReferences(e.content,g))),!w&&E.hasSameRuleAs(i)){i=i.pop(),s.produce(i,l),c=!0;return}}else if(b instanceof Do){const S=b;Ui(t,e,n,i,s,S.beginCaptures,g),s.produce(i,g[0].end),d=g[0].end;const L=S.getContentName(e.content,g),G=v.pushAttributed(L,t);if(i=i.withContentNameScopesList(G),S.whileHasBackReferences&&(i=i.withEndRule(S.getWhileWithResolvedBackReferences(e.content,g))),!w&&E.hasSameRuleAs(i)){i=i.pop(),s.produce(i,l),c=!0;return}}else if(Ui(t,e,n,i,s,b.captures,g),s.produce(i,g[0].end),i=i.pop(),!w){i=i.safePop(),s.produce(i,l),c=!0;return}}g[0].end>r&&(r=g[0].end,n=!1)}}function i1(t,e,n,r,i,s){let o=i.beginRuleCapturedEOL?0:-1;const a=[];for(let l=i;l;l=l.pop()){const c=l.getRule(t);c instanceof Do&&a.push({rule:c,stack:l})}for(let l=a.pop();l;l=a.pop()){const{ruleScanner:c,findOptions:d}=l1(l.rule,t,l.stack.endRule,n,r===o),u=c.findNextMatchSync(e,r,d);if(u){if(u.ruleId!==Fg){i=l.stack.pop();break}u.captureIndices&&u.captureIndices.length&&(s.produce(l.stack,u.captureIndices[0].start),Ui(t,e,n,l.stack,s,l.rule.whileCaptures,u.captureIndices),s.produce(l.stack,u.captureIndices[0].end),o=u.captureIndices[0].end,u.captureIndices[0].end>r&&(r=u.captureIndices[0].end,n=!1))}else{i=l.stack.pop();break}}return{stack:i,linePos:r,anchorPosition:o,isFirstLine:n}}function s1(t,e,n,r,i,s){const o=o1(t,e,n,r,i,s),a=t.getInjections();if(a.length===0)return o;const l=a1(a,t,e,n,r,i,s);if(!l)return o;if(!o)return l;const c=o.captureIndices[0].start,d=l.captureIndices[0].start;return d<c||l.priorityMatch&&d===c?l:o}function o1(t,e,n,r,i,s){const o=i.getRule(t),{ruleScanner:a,findOptions:l}=Vg(o,t,i.endRule,n,r===s),c=a.findNextMatchSync(e,r,l);return c?{captureIndices:c.captureIndices,matchedRuleId:c.ruleId}:null}function a1(t,e,n,r,i,s,o){let a=Number.MAX_VALUE,l=null,c,d=0;const u=s.contentNameScopesList.getScopeNames();for(let h=0,f=t.length;h<f;h++){const g=t[h];if(!g.matcher(u))continue;const y=e.getRule(g.ruleId),{ruleScanner:w,findOptions:b}=Vg(y,e,null,r,i===o),E=w.findNextMatchSync(n,i,b);if(!E)continue;const A=E.captureIndices[0].start;if(!(A>=a)&&(a=A,l=E.captureIndices,c=E.ruleId,d=g.priority,a===i))break}return l?{priorityMatch:d===-1,captureIndices:l,matchedRuleId:c}:null}function Vg(t,e,n,r,i){return{ruleScanner:t.compileAG(e,n,r,i),findOptions:0}}function l1(t,e,n,r,i){return{ruleScanner:t.compileWhileAG(e,n,r,i),findOptions:0}}function Ui(t,e,n,r,i,s,o){if(s.length===0)return;const a=e.content,l=Math.min(s.length,o.length),c=[],d=o[0].end;for(let u=0;u<l;u++){const h=s[u];if(h===null)continue;const f=o[u];if(f.length===0)continue;if(f.start>d)break;for(;c.length>0&&c[c.length-1].endPos<=f.start;)i.produceFromScopes(c[c.length-1].scopes,c[c.length-1].endPos),c.pop();if(c.length>0?i.produceFromScopes(c[c.length-1].scopes,f.start):i.produce(r,f.start),h.retokenizeCapturedWithRuleId){const y=h.getName(a,o),w=r.contentNameScopesList.pushAttributed(y,t),b=h.getContentName(a,o),E=w.pushAttributed(b,t),A=r.push(h.retokenizeCapturedWithRuleId,f.start,-1,!1,null,w,E),v=t.createOnigString(a.substring(0,f.end));Bg(t,v,n&&f.start===0,f.start,A,i,!1,0),Mg(v);continue}const g=h.getName(a,o);if(g!==null){const w=(c.length>0?c[c.length-1].scopes:r.contentNameScopesList).pushAttributed(g,t);c.push(new c1(w,f.end))}}for(;c.length>0;)i.produceFromScopes(c[c.length-1].scopes,c[c.length-1].endPos),c.pop()}var c1=class{scopes;endPos;constructor(t,e){this.scopes=t,this.endPos=e}};function d1(t,e,n,r,i,s,o,a){return new h1(t,e,n,r,i,s,o,a)}function rh(t,e,n,r,i){const s=Lo(e,Po),o=$g.getCompiledRuleId(n,r,i.repository);for(const a of s)t.push({debugSelector:e,matcher:a.matcher,ruleId:o,grammar:i,priority:a.priority})}function Po(t,e){if(e.length<t.length)return!1;let n=0;return t.every(r=>{for(let i=n;i<e.length;i++)if(u1(e[i],r))return n=i+1,!0;return!1})}function u1(t,e){if(!t)return!1;if(t===e)return!0;const n=e.length;return t.length>n&&t.substr(0,n)===e&&t[n]==="."}var h1=class{constructor(t,e,n,r,i,s,o,a){if(this._rootScopeName=t,this.balancedBracketSelectors=s,this._onigLib=a,this._basicScopeAttributesProvider=new n1(n,r),this._rootId=-1,this._lastRuleId=0,this._ruleId2desc=[null],this._includedGrammars={},this._grammarRepository=o,this._grammar=ih(e,null),this._injections=null,this._tokenTypeMatchers=[],i)for(const l of Object.keys(i)){const c=Lo(l,Po);for(const d of c)this._tokenTypeMatchers.push({matcher:d.matcher,type:i[l]})}}_rootId;_lastRuleId;_ruleId2desc;_includedGrammars;_grammarRepository;_grammar;_injections;_basicScopeAttributesProvider;_tokenTypeMatchers;get themeProvider(){return this._grammarRepository}dispose(){for(const t of this._ruleId2desc)t&&t.dispose()}createOnigScanner(t){return this._onigLib.createOnigScanner(t)}createOnigString(t){return this._onigLib.createOnigString(t)}getMetadataForScope(t){return this._basicScopeAttributesProvider.getBasicScopeAttributes(t)}_collectInjections(){const t={lookup:i=>i===this._rootScopeName?this._grammar:this.getExternalGrammar(i),injections:i=>this._grammarRepository.injections(i)},e=[],n=this._rootScopeName,r=t.lookup(n);if(r){const i=r.injections;if(i)for(let o in i)rh(e,o,i[o],this,r);const s=this._grammarRepository.injections(n);s&&s.forEach(o=>{const a=this.getExternalGrammar(o);if(a){const l=a.injectionSelector;l&&rh(e,l,a,this,a)}})}return e.sort((i,s)=>i.priority-s.priority),e}getInjections(){return this._injections===null&&(this._injections=this._collectInjections()),this._injections}registerRule(t){const e=++this._lastRuleId,n=t(e);return this._ruleId2desc[e]=n,n}getRule(t){return this._ruleId2desc[t]}getExternalGrammar(t,e){if(this._includedGrammars[t])return this._includedGrammars[t];if(this._grammarRepository){const n=this._grammarRepository.lookup(t);if(n)return this._includedGrammars[t]=ih(n,e&&e.$base),this._includedGrammars[t]}}tokenizeLine(t,e,n=0){const r=this._tokenize(t,e,!1,n);return{tokens:r.lineTokens.getResult(r.ruleStack,r.lineLength),ruleStack:r.ruleStack,stoppedEarly:r.stoppedEarly}}tokenizeLine2(t,e,n=0){const r=this._tokenize(t,e,!0,n);return{tokens:r.lineTokens.getBinaryResult(r.ruleStack,r.lineLength),ruleStack:r.ruleStack,stoppedEarly:r.stoppedEarly}}_tokenize(t,e,n,r){this._rootId===-1&&(this._rootId=$g.getCompiledRuleId(this._grammar.repository.$self,this,this._grammar.repository),this.getInjections());let i;if(!e||e===Ql.NULL){i=!0;const c=this._basicScopeAttributesProvider.getDefaultAttributes(),d=this.themeProvider.getDefaults(),u=fi.set(0,c.languageId,c.tokenType,null,d.fontStyle,d.foregroundId,d.backgroundId),h=this.getRule(this._rootId).getName(null,null);let f;h?f=es.createRootAndLookUpScopeName(h,u,this):f=es.createRoot("unknown",u),e=new Ql(null,this._rootId,-1,-1,!1,null,f,f)}else i=!1,e.reset();t=t+`
`;const s=this.createOnigString(t),o=s.content.length,a=new p1(n,t,this._tokenTypeMatchers,this.balancedBracketSelectors),l=Bg(this,s,i,0,e,a,!0,r);return Mg(s),{lineLength:o,lineTokens:a,ruleStack:l.stack,stoppedEarly:l.stoppedEarly}}};function ih(t,e){return t=Lw(t),t.repository=t.repository||{},t.repository.$self={$vscodeTextmateLocation:t.$vscodeTextmateLocation,patterns:t.patterns,name:t.scopeName},t.repository.$base=e||t.repository.$self,t}var es=class fn{constructor(e,n,r){this.parent=e,this.scopePath=n,this.tokenAttributes=r}static fromExtension(e,n){let r=e,i=e?.scopePath??null;for(const s of n)i=Wa.push(i,s.scopeNames),r=new fn(r,i,s.encodedTokenAttributes);return r}static createRoot(e,n){return new fn(null,new Wa(null,e),n)}static createRootAndLookUpScopeName(e,n,r){const i=r.getMetadataForScope(e),s=new Wa(null,e),o=r.themeProvider.themeMatch(s),a=fn.mergeAttributes(n,i,o);return new fn(null,s,a)}get scopeName(){return this.scopePath.scopeName}toString(){return this.getScopeNames().join(" ")}equals(e){return fn.equals(this,e)}static equals(e,n){do{if(e===n||!e&&!n)return!0;if(!e||!n||e.scopeName!==n.scopeName||e.tokenAttributes!==n.tokenAttributes)return!1;e=e.parent,n=n.parent}while(!0)}static mergeAttributes(e,n,r){let i=-1,s=0,o=0;return r!==null&&(i=r.fontStyle,s=r.foregroundId,o=r.backgroundId),fi.set(e,n.languageId,n.tokenType,null,i,s,o)}pushAttributed(e,n){if(e===null)return this;if(e.indexOf(" ")===-1)return fn._pushAttributed(this,e,n);const r=e.split(/ /g);let i=this;for(const s of r)i=fn._pushAttributed(i,s,n);return i}static _pushAttributed(e,n,r){const i=r.getMetadataForScope(n),s=e.scopePath.push(n),o=r.themeProvider.themeMatch(s),a=fn.mergeAttributes(e.tokenAttributes,i,o);return new fn(e,s,a)}getScopeNames(){return this.scopePath.getSegments()}getExtensionIfDefined(e){const n=[];let r=this;for(;r&&r!==e;)n.push({encodedTokenAttributes:r.tokenAttributes,scopeNames:r.scopePath.getExtensionIfDefined(r.parent?.scopePath??null)}),r=r.parent;return r===e?n.reverse():void 0}},Ql=class Er{constructor(e,n,r,i,s,o,a,l){this.parent=e,this.ruleId=n,this.beginRuleCapturedEOL=s,this.endRule=o,this.nameScopesList=a,this.contentNameScopesList=l,this.depth=this.parent?this.parent.depth+1:1,this._enterPos=r,this._anchorPos=i}_stackElementBrand=void 0;static NULL=new Er(null,0,0,0,!1,null,null,null);_enterPos;_anchorPos;depth;equals(e){return e===null?!1:Er._equals(this,e)}static _equals(e,n){return e===n?!0:this._structuralEquals(e,n)?es.equals(e.contentNameScopesList,n.contentNameScopesList):!1}static _structuralEquals(e,n){do{if(e===n||!e&&!n)return!0;if(!e||!n||e.depth!==n.depth||e.ruleId!==n.ruleId||e.endRule!==n.endRule)return!1;e=e.parent,n=n.parent}while(!0)}clone(){return this}static _reset(e){for(;e;)e._enterPos=-1,e._anchorPos=-1,e=e.parent}reset(){Er._reset(this)}pop(){return this.parent}safePop(){return this.parent?this.parent:this}push(e,n,r,i,s,o,a){return new Er(this,e,n,r,i,s,o,a)}getEnterPos(){return this._enterPos}getAnchorPos(){return this._anchorPos}getRule(e){return e.getRule(this.ruleId)}toString(){const e=[];return this._writeString(e,0),"["+e.join(",")+"]"}_writeString(e,n){return this.parent&&(n=this.parent._writeString(e,n)),e[n++]=`(${this.ruleId}, ${this.nameScopesList?.toString()}, ${this.contentNameScopesList?.toString()})`,n}withContentNameScopesList(e){return this.contentNameScopesList===e?this:this.parent.push(this.ruleId,this._enterPos,this._anchorPos,this.beginRuleCapturedEOL,this.endRule,this.nameScopesList,e)}withEndRule(e){return this.endRule===e?this:new Er(this.parent,this.ruleId,this._enterPos,this._anchorPos,this.beginRuleCapturedEOL,e,this.nameScopesList,this.contentNameScopesList)}hasSameRuleAs(e){let n=this;for(;n&&n._enterPos===e._enterPos;){if(n.ruleId===e.ruleId)return!0;n=n.parent}return!1}toStateStackFrame(){return{ruleId:this.ruleId,beginRuleCapturedEOL:this.beginRuleCapturedEOL,endRule:this.endRule,nameScopesList:this.nameScopesList?.getExtensionIfDefined(this.parent?.nameScopesList??null)??[],contentNameScopesList:this.contentNameScopesList?.getExtensionIfDefined(this.nameScopesList)??[]}}static pushFrame(e,n){const r=es.fromExtension(e?.nameScopesList??null,n.nameScopesList);return new Er(e,n.ruleId,n.enterPos??-1,n.anchorPos??-1,n.beginRuleCapturedEOL,n.endRule,r,es.fromExtension(r,n.contentNameScopesList))}},f1=class{balancedBracketScopes;unbalancedBracketScopes;allowAny=!1;constructor(t,e){this.balancedBracketScopes=t.flatMap(n=>n==="*"?(this.allowAny=!0,[]):Lo(n,Po).map(r=>r.matcher)),this.unbalancedBracketScopes=e.flatMap(n=>Lo(n,Po).map(r=>r.matcher))}get matchesAlways(){return this.allowAny&&this.unbalancedBracketScopes.length===0}get matchesNever(){return this.balancedBracketScopes.length===0&&!this.allowAny}match(t){for(const e of this.unbalancedBracketScopes)if(e(t))return!1;for(const e of this.balancedBracketScopes)if(e(t))return!0;return this.allowAny}},p1=class{constructor(t,e,n,r){this.balancedBracketSelectors=r,this._emitBinaryTokens=t,this._tokenTypeOverrides=n,this._lineText=null,this._tokens=[],this._binaryTokens=[],this._lastTokenEndIndex=0}_emitBinaryTokens;_lineText;_tokens;_binaryTokens;_lastTokenEndIndex;_tokenTypeOverrides;produce(t,e){this.produceFromScopes(t.contentNameScopesList,e)}produceFromScopes(t,e){if(this._lastTokenEndIndex>=e)return;if(this._emitBinaryTokens){let r=t?.tokenAttributes??0,i=!1;if(this.balancedBracketSelectors?.matchesAlways&&(i=!0),this._tokenTypeOverrides.length>0||this.balancedBracketSelectors&&!this.balancedBracketSelectors.matchesAlways&&!this.balancedBracketSelectors.matchesNever){const s=t?.getScopeNames()??[];for(const o of this._tokenTypeOverrides)o.matcher(s)&&(r=fi.set(r,0,o.type,null,-1,0,0));this.balancedBracketSelectors&&(i=this.balancedBracketSelectors.match(s))}if(i&&(r=fi.set(r,0,8,i,-1,0,0)),this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-1]===r){this._lastTokenEndIndex=e;return}this._binaryTokens.push(this._lastTokenEndIndex),this._binaryTokens.push(r),this._lastTokenEndIndex=e;return}const n=t?.getScopeNames()??[];this._tokens.push({startIndex:this._lastTokenEndIndex,endIndex:e,scopes:n}),this._lastTokenEndIndex=e}getResult(t,e){return this._tokens.length>0&&this._tokens[this._tokens.length-1].startIndex===e-1&&this._tokens.pop(),this._tokens.length===0&&(this._lastTokenEndIndex=-1,this.produce(t,e),this._tokens[this._tokens.length-1].startIndex=0),this._tokens}getBinaryResult(t,e){this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-2]===e-1&&(this._binaryTokens.pop(),this._binaryTokens.pop()),this._binaryTokens.length===0&&(this._lastTokenEndIndex=-1,this.produce(t,e),this._binaryTokens[this._binaryTokens.length-2]=0);const n=new Uint32Array(this._binaryTokens.length);for(let r=0,i=this._binaryTokens.length;r<i;r++)n[r]=this._binaryTokens[r];return n}},g1=class{constructor(t,e){this._onigLib=e,this._theme=t}_grammars=new Map;_rawGrammars=new Map;_injectionGrammars=new Map;_theme;dispose(){for(const t of this._grammars.values())t.dispose()}setTheme(t){this._theme=t}getColorMap(){return this._theme.getColorMap()}addGrammar(t,e){this._rawGrammars.set(t.scopeName,t),e&&this._injectionGrammars.set(t.scopeName,e)}lookup(t){return this._rawGrammars.get(t)}injections(t){return this._injectionGrammars.get(t)}getDefaults(){return this._theme.getDefaults()}themeMatch(t){return this._theme.match(t)}grammarForScopeName(t,e,n,r,i){if(!this._grammars.has(t)){let s=this._rawGrammars.get(t);if(!s)return null;this._grammars.set(t,d1(t,s,e,n,r,i,this,this._onigLib))}return this._grammars.get(t)}},m1=class{_options;_syncRegistry;_ensureGrammarCache;constructor(e){this._options=e,this._syncRegistry=new g1(No.createFromRawTheme(e.theme,e.colorMap),e.onigLib),this._ensureGrammarCache=new Map}dispose(){this._syncRegistry.dispose()}setTheme(e,n){this._syncRegistry.setTheme(No.createFromRawTheme(e,n))}getColorMap(){return this._syncRegistry.getColorMap()}loadGrammarWithEmbeddedLanguages(e,n,r){return this.loadGrammarWithConfiguration(e,n,{embeddedLanguages:r})}loadGrammarWithConfiguration(e,n,r){return this._loadGrammar(e,n,r.embeddedLanguages,r.tokenTypes,new f1(r.balancedBracketSelectors||[],r.unbalancedBracketSelectors||[]))}loadGrammar(e){return this._loadGrammar(e,0,null,null,null)}_loadGrammar(e,n,r,i,s){const o=new Hw(this._syncRegistry,e);for(;o.Q.length>0;)o.Q.map(a=>this._loadSingleGrammar(a.scopeName)),o.processQueue();return this._grammarForScopeName(e,n,r,i,s)}_loadSingleGrammar(e){this._ensureGrammarCache.has(e)||(this._doLoadSingleGrammar(e),this._ensureGrammarCache.set(e,!0))}_doLoadSingleGrammar(e){const n=this._options.loadGrammar(e);if(n){const r=typeof this._options.getInjections=="function"?this._options.getInjections(e):void 0;this._syncRegistry.addGrammar(n,r)}}addGrammar(e,n=[],r=0,i=null){return this._syncRegistry.addGrammar(e,n),this._grammarForScopeName(e.scopeName,r,i)}_grammarForScopeName(e,n=0,r=null,i=null,s=null){return this._syncRegistry.grammarForScopeName(e,n,r,i,s)}},ec=Ql.NULL;const y1=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"];class Ts{constructor(e,n,r){this.normal=n,this.property=e,r&&(this.space=r)}}Ts.prototype.normal={};Ts.prototype.property={};Ts.prototype.space=void 0;function Ug(t,e){const n={},r={};for(const i of t)Object.assign(n,i.property),Object.assign(r,i.normal);return new Ts(n,r,e)}function tc(t){return t.toLowerCase()}class Ot{constructor(e,n){this.attribute=n,this.property=e}}Ot.prototype.attribute="";Ot.prototype.booleanish=!1;Ot.prototype.boolean=!1;Ot.prototype.commaOrSpaceSeparated=!1;Ot.prototype.commaSeparated=!1;Ot.prototype.defined=!1;Ot.prototype.mustUseProperty=!1;Ot.prototype.number=!1;Ot.prototype.overloadedBoolean=!1;Ot.prototype.property="";Ot.prototype.spaceSeparated=!1;Ot.prototype.space=void 0;let v1=0;const Ie=Mr(),et=Mr(),nc=Mr(),ae=Mr(),Ue=Mr(),ti=Mr(),zt=Mr();function Mr(){return 2**++v1}const rc=Object.freeze(Object.defineProperty({__proto__:null,boolean:Ie,booleanish:et,commaOrSpaceSeparated:zt,commaSeparated:ti,number:ae,overloadedBoolean:nc,spaceSeparated:Ue},Symbol.toStringTag,{value:"Module"})),Ka=Object.keys(rc);class id extends Ot{constructor(e,n,r,i){let s=-1;if(super(e,n),sh(this,"space",i),typeof r=="number")for(;++s<Ka.length;){const o=Ka[s];sh(this,Ka[s],(r&rc[o])===rc[o])}}}id.prototype.defined=!0;function sh(t,e,n){n&&(t[e]=n)}function bi(t){const e={},n={};for(const[r,i]of Object.entries(t.properties)){const s=new id(r,t.transform(t.attributes||{},r),i,t.space);t.mustUseProperty&&t.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),e[r]=s,n[tc(r)]=r,n[tc(s.attribute)]=r}return new Ts(e,n,t.space)}const jg=bi({properties:{ariaActiveDescendant:null,ariaAtomic:et,ariaAutoComplete:null,ariaBusy:et,ariaChecked:et,ariaColCount:ae,ariaColIndex:ae,ariaColSpan:ae,ariaControls:Ue,ariaCurrent:null,ariaDescribedBy:Ue,ariaDetails:null,ariaDisabled:et,ariaDropEffect:Ue,ariaErrorMessage:null,ariaExpanded:et,ariaFlowTo:Ue,ariaGrabbed:et,ariaHasPopup:null,ariaHidden:et,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Ue,ariaLevel:ae,ariaLive:null,ariaModal:et,ariaMultiLine:et,ariaMultiSelectable:et,ariaOrientation:null,ariaOwns:Ue,ariaPlaceholder:null,ariaPosInSet:ae,ariaPressed:et,ariaReadOnly:et,ariaRelevant:null,ariaRequired:et,ariaRoleDescription:Ue,ariaRowCount:ae,ariaRowIndex:ae,ariaRowSpan:ae,ariaSelected:et,ariaSetSize:ae,ariaSort:null,ariaValueMax:ae,ariaValueMin:ae,ariaValueNow:ae,ariaValueText:null,role:null},transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function Hg(t,e){return e in t?t[e]:e}function Wg(t,e){return Hg(t,e.toLowerCase())}const _1=bi({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:ti,acceptCharset:Ue,accessKey:Ue,action:null,allow:null,allowFullScreen:Ie,allowPaymentRequest:Ie,allowUserMedia:Ie,alt:null,as:null,async:Ie,autoCapitalize:null,autoComplete:Ue,autoFocus:Ie,autoPlay:Ie,blocking:Ue,capture:null,charSet:null,checked:Ie,cite:null,className:Ue,cols:ae,colSpan:null,content:null,contentEditable:et,controls:Ie,controlsList:Ue,coords:ae|ti,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Ie,defer:Ie,dir:null,dirName:null,disabled:Ie,download:nc,draggable:et,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Ie,formTarget:null,headers:Ue,height:ae,hidden:nc,high:ae,href:null,hrefLang:null,htmlFor:Ue,httpEquiv:Ue,id:null,imageSizes:null,imageSrcSet:null,inert:Ie,inputMode:null,integrity:null,is:null,isMap:Ie,itemId:null,itemProp:Ue,itemRef:Ue,itemScope:Ie,itemType:Ue,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Ie,low:ae,manifest:null,max:null,maxLength:ae,media:null,method:null,min:null,minLength:ae,multiple:Ie,muted:Ie,name:null,nonce:null,noModule:Ie,noValidate:Ie,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Ie,optimum:ae,pattern:null,ping:Ue,placeholder:null,playsInline:Ie,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Ie,referrerPolicy:null,rel:Ue,required:Ie,reversed:Ie,rows:ae,rowSpan:ae,sandbox:Ue,scope:null,scoped:Ie,seamless:Ie,selected:Ie,shadowRootClonable:Ie,shadowRootDelegatesFocus:Ie,shadowRootMode:null,shape:null,size:ae,sizes:null,slot:null,span:ae,spellCheck:et,src:null,srcDoc:null,srcLang:null,srcSet:null,start:ae,step:null,style:null,tabIndex:ae,target:null,title:null,translate:null,type:null,typeMustMatch:Ie,useMap:null,value:et,width:ae,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Ue,axis:null,background:null,bgColor:null,border:ae,borderColor:null,bottomMargin:ae,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Ie,declare:Ie,event:null,face:null,frame:null,frameBorder:null,hSpace:ae,leftMargin:ae,link:null,longDesc:null,lowSrc:null,marginHeight:ae,marginWidth:ae,noResize:Ie,noHref:Ie,noShade:Ie,noWrap:Ie,object:null,profile:null,prompt:null,rev:null,rightMargin:ae,rules:null,scheme:null,scrolling:et,standby:null,summary:null,text:null,topMargin:ae,valueType:null,version:null,vAlign:null,vLink:null,vSpace:ae,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Ie,disableRemotePlayback:Ie,prefix:null,property:null,results:ae,security:null,unselectable:null},space:"html",transform:Wg}),b1=bi({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:zt,accentHeight:ae,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:ae,amplitude:ae,arabicForm:null,ascent:ae,attributeName:null,attributeType:null,azimuth:ae,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:ae,by:null,calcMode:null,capHeight:ae,className:Ue,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:ae,diffuseConstant:ae,direction:null,display:null,dur:null,divisor:ae,dominantBaseline:null,download:Ie,dx:null,dy:null,edgeMode:null,editable:null,elevation:ae,enableBackground:null,end:null,event:null,exponent:ae,externalResourcesRequired:null,fill:null,fillOpacity:ae,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:ti,g2:ti,glyphName:ti,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:ae,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:ae,horizOriginX:ae,horizOriginY:ae,id:null,ideographic:ae,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:ae,k:ae,k1:ae,k2:ae,k3:ae,k4:ae,kernelMatrix:zt,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:ae,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:ae,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:ae,overlineThickness:ae,paintOrder:null,panose1:null,path:null,pathLength:ae,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Ue,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:ae,pointsAtY:ae,pointsAtZ:ae,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:zt,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:zt,rev:zt,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:zt,requiredFeatures:zt,requiredFonts:zt,requiredFormats:zt,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:ae,specularExponent:ae,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:ae,strikethroughThickness:ae,string:null,stroke:null,strokeDashArray:zt,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:ae,strokeOpacity:ae,strokeWidth:null,style:null,surfaceScale:ae,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:zt,tabIndex:ae,tableValues:null,target:null,targetX:ae,targetY:ae,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:zt,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:ae,underlineThickness:ae,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:ae,values:null,vAlphabetic:ae,vMathematical:ae,vectorEffect:null,vHanging:ae,vIdeographic:ae,version:null,vertAdvY:ae,vertOriginX:ae,vertOriginY:ae,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:ae,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:Hg}),qg=bi({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()}}),Kg=bi({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:Wg}),Xg=bi({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()}}),w1=/[A-Z]/g,oh=/-[a-z]/g,E1=/^data[-\w.:]+$/i;function A1(t,e){const n=tc(e);let r=e,i=Ot;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&E1.test(e)){if(e.charAt(4)==="-"){const s=e.slice(5).replace(oh,x1);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=e.slice(4);if(!oh.test(s)){let o=s.replace(w1,k1);o.charAt(0)!=="-"&&(o="-"+o),e="data"+o}}i=id}return new i(r,e)}function k1(t){return"-"+t.toLowerCase()}function x1(t){return t.charAt(1).toUpperCase()}const C1=Ug([jg,_1,qg,Kg,Xg],"html"),Zg=Ug([jg,b1,qg,Kg,Xg],"svg"),ah={}.hasOwnProperty;function S1(t,e){const n=e||{};function r(i,...s){let o=r.invalid;const a=r.handlers;if(i&&ah.call(i,t)){const l=String(i[t]);o=ah.call(a,l)?a[l]:r.unknown}if(o)return o.call(this,i,...s)}return r.handlers=n.handlers||{},r.invalid=n.invalid,r.unknown=n.unknown,r}const T1=/["&'<>`]/g,R1=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,N1=/[\x01-\t\v\f\x0E-\x1F\x7F\x81\x8D\x8F\x90\x9D\xA0-\uFFFF]/g,L1=/[|\\{}()[\]^$+*?.]/g,lh=new WeakMap;function I1(t,e){if(t=t.replace(e.subset?D1(e.subset):T1,r),e.subset||e.escapeOnly)return t;return t.replace(R1,n).replace(N1,r);function n(i,s,o){return e.format((i.charCodeAt(0)-55296)*1024+i.charCodeAt(1)-56320+65536,o.charCodeAt(s+2),e)}function r(i,s,o){return e.format(i.charCodeAt(0),o.charCodeAt(s+1),e)}}function D1(t){let e=lh.get(t);return e||(e=P1(t),lh.set(t,e)),e}function P1(t){const e=[];let n=-1;for(;++n<t.length;)e.push(t[n].replace(L1,"\\$&"));return new RegExp("(?:"+e.join("|")+")","g")}const G1=/[\dA-Fa-f]/;function M1(t,e,n){const r="&#x"+t.toString(16).toUpperCase();return n&&e&&!G1.test(String.fromCharCode(e))?r:r+";"}const O1=/\d/;function F1(t,e,n){const r="&#"+String(t);return n&&e&&!O1.test(String.fromCharCode(e))?r:r+";"}const $1=["AElig","AMP","Aacute","Acirc","Agrave","Aring","Atilde","Auml","COPY","Ccedil","ETH","Eacute","Ecirc","Egrave","Euml","GT","Iacute","Icirc","Igrave","Iuml","LT","Ntilde","Oacute","Ocirc","Ograve","Oslash","Otilde","Ouml","QUOT","REG","THORN","Uacute","Ucirc","Ugrave","Uuml","Yacute","aacute","acirc","acute","aelig","agrave","amp","aring","atilde","auml","brvbar","ccedil","cedil","cent","copy","curren","deg","divide","eacute","ecirc","egrave","eth","euml","frac12","frac14","frac34","gt","iacute","icirc","iexcl","igrave","iquest","iuml","laquo","lt","macr","micro","middot","nbsp","not","ntilde","oacute","ocirc","ograve","ordf","ordm","oslash","otilde","ouml","para","plusmn","pound","quot","raquo","reg","sect","shy","sup1","sup2","sup3","szlig","thorn","times","uacute","ucirc","ugrave","uml","uuml","yacute","yen","yuml"],Xa={nbsp:"",iexcl:"",cent:"",pound:"",curren:"",yen:"",brvbar:"",sect:"",uml:"",copy:"",ordf:"",laquo:"",not:"",shy:"",reg:"",macr:"",deg:"",plusmn:"",sup2:"",sup3:"",acute:"",micro:"",para:"",middot:"",cedil:"",sup1:"",ordm:"",raquo:"",frac14:"",frac12:"",frac34:"",iquest:"",Agrave:"",Aacute:"",Acirc:"",Atilde:"",Auml:"",Aring:"",AElig:"",Ccedil:"",Egrave:"",Eacute:"",Ecirc:"",Euml:"",Igrave:"",Iacute:"",Icirc:"",Iuml:"",ETH:"",Ntilde:"",Ograve:"",Oacute:"",Ocirc:"",Otilde:"",Ouml:"",times:"",Oslash:"",Ugrave:"",Uacute:"",Ucirc:"",Uuml:"",Yacute:"",THORN:"",szlig:"",agrave:"",aacute:"",acirc:"",atilde:"",auml:"",aring:"",aelig:"",ccedil:"",egrave:"",eacute:"",ecirc:"",euml:"",igrave:"",iacute:"",icirc:"",iuml:"",eth:"",ntilde:"",ograve:"",oacute:"",ocirc:"",otilde:"",ouml:"",divide:"",oslash:"",ugrave:"",uacute:"",ucirc:"",uuml:"",yacute:"",thorn:"",yuml:"",fnof:"",Alpha:"",Beta:"",Gamma:"",Delta:"",Epsilon:"",Zeta:"",Eta:"",Theta:"",Iota:"",Kappa:"",Lambda:"",Mu:"",Nu:"",Xi:"",Omicron:"",Pi:"",Rho:"",Sigma:"",Tau:"",Upsilon:"",Phi:"",Chi:"",Psi:"",Omega:"",alpha:"",beta:"",gamma:"",delta:"",epsilon:"",zeta:"",eta:"",theta:"",iota:"",kappa:"",lambda:"",mu:"",nu:"",xi:"",omicron:"",pi:"",rho:"",sigmaf:"",sigma:"",tau:"",upsilon:"",phi:"",chi:"",psi:"",omega:"",thetasym:"",upsih:"",piv:"",bull:"",hellip:"",prime:"",Prime:"",oline:"",frasl:"",weierp:"",image:"",real:"",trade:"",alefsym:"",larr:"",uarr:"",rarr:"",darr:"",harr:"",crarr:"",lArr:"",uArr:"",rArr:"",dArr:"",hArr:"",forall:"",part:"",exist:"",empty:"",nabla:"",isin:"",notin:"",ni:"",prod:"",sum:"",minus:"",lowast:"",radic:"",prop:"",infin:"",ang:"",and:"",or:"",cap:"",cup:"",int:"",there4:"",sim:"",cong:"",asymp:"",ne:"",equiv:"",le:"",ge:"",sub:"",sup:"",nsub:"",sube:"",supe:"",oplus:"",otimes:"",perp:"",sdot:"",lceil:"",rceil:"",lfloor:"",rfloor:"",lang:"",rang:"",loz:"",spades:"",clubs:"",hearts:"",diams:"",quot:'"',amp:"&",lt:"<",gt:">",OElig:"",oelig:"",Scaron:"",scaron:"",Yuml:"",circ:"",tilde:"",ensp:"",emsp:"",thinsp:"",zwnj:"",zwj:"",lrm:"",rlm:"",ndash:"",mdash:"",lsquo:"",rsquo:"",sbquo:"",ldquo:"",rdquo:"",bdquo:"",dagger:"",Dagger:"",permil:"",lsaquo:"",rsaquo:"",euro:""},z1=["cent","copy","divide","gt","lt","not","para","times"],Yg={}.hasOwnProperty,ic={};let Vs;for(Vs in Xa)Yg.call(Xa,Vs)&&(ic[Xa[Vs]]=Vs);const B1=/[^\dA-Za-z]/;function V1(t,e,n,r){const i=String.fromCharCode(t);if(Yg.call(ic,i)){const s=ic[i],o="&"+s;return n&&$1.includes(s)&&!z1.includes(s)&&(!r||e&&e!==61&&B1.test(String.fromCharCode(e)))?o:o+";"}return""}function U1(t,e,n){let r=M1(t,e,n.omitOptionalSemicolons),i;if((n.useNamedReferences||n.useShortestReferences)&&(i=V1(t,e,n.omitOptionalSemicolons,n.attribute)),(n.useShortestReferences||!i)&&n.useShortestReferences){const s=F1(t,e,n.omitOptionalSemicolons);s.length<r.length&&(r=s)}return i&&(!n.useShortestReferences||i.length<r.length)?i:r}function ni(t,e){return I1(t,Object.assign({format:U1},e))}const j1=/^>|^->|<!--|-->|--!>|<!-$/g,H1=[">"],W1=["<",">"];function q1(t,e,n,r){return r.settings.bogusComments?"<?"+ni(t.value,Object.assign({},r.settings.characterReferences,{subset:H1}))+">":"<!--"+t.value.replace(j1,i)+"-->";function i(s){return ni(s,Object.assign({},r.settings.characterReferences,{subset:W1}))}}function K1(t,e,n,r){return"<!"+(r.settings.upperDoctype?"DOCTYPE":"doctype")+(r.settings.tightDoctype?"":" ")+"html>"}function ch(t,e){const n=String(t);if(typeof e!="string")throw new TypeError("Expected character");let r=0,i=n.indexOf(e);for(;i!==-1;)r++,i=n.indexOf(e,i+e.length);return r}function X1(t,e){const n=e||{};return(t[t.length-1]===""?[...t,""]:t).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}function Z1(t){return t.join(" ").trim()}const Y1=/[ \t\n\f\r]/g;function sd(t){return typeof t=="object"?t.type==="text"?dh(t.value):!1:dh(t)}function dh(t){return t.replace(Y1,"")===""}const ot=Qg(1),Jg=Qg(-1),J1=[];function Qg(t){return e;function e(n,r,i){const s=n?n.children:J1;let o=(r||0)+t,a=s[o];if(!i)for(;a&&sd(a);)o+=t,a=s[o];return a}}const Q1={}.hasOwnProperty;function em(t){return e;function e(n,r,i){return Q1.call(t,n.tagName)&&t[n.tagName](n,r,i)}}const od=em({body:tE,caption:Za,colgroup:Za,dd:sE,dt:iE,head:Za,html:eE,li:rE,optgroup:oE,option:aE,p:nE,rp:uh,rt:uh,tbody:cE,td:hh,tfoot:dE,th:hh,thead:lE,tr:uE});function Za(t,e,n){const r=ot(n,e,!0);return!r||r.type!=="comment"&&!(r.type==="text"&&sd(r.value.charAt(0)))}function eE(t,e,n){const r=ot(n,e);return!r||r.type!=="comment"}function tE(t,e,n){const r=ot(n,e);return!r||r.type!=="comment"}function nE(t,e,n){const r=ot(n,e);return r?r.type==="element"&&(r.tagName==="address"||r.tagName==="article"||r.tagName==="aside"||r.tagName==="blockquote"||r.tagName==="details"||r.tagName==="div"||r.tagName==="dl"||r.tagName==="fieldset"||r.tagName==="figcaption"||r.tagName==="figure"||r.tagName==="footer"||r.tagName==="form"||r.tagName==="h1"||r.tagName==="h2"||r.tagName==="h3"||r.tagName==="h4"||r.tagName==="h5"||r.tagName==="h6"||r.tagName==="header"||r.tagName==="hgroup"||r.tagName==="hr"||r.tagName==="main"||r.tagName==="menu"||r.tagName==="nav"||r.tagName==="ol"||r.tagName==="p"||r.tagName==="pre"||r.tagName==="section"||r.tagName==="table"||r.tagName==="ul"):!n||!(n.type==="element"&&(n.tagName==="a"||n.tagName==="audio"||n.tagName==="del"||n.tagName==="ins"||n.tagName==="map"||n.tagName==="noscript"||n.tagName==="video"))}function rE(t,e,n){const r=ot(n,e);return!r||r.type==="element"&&r.tagName==="li"}function iE(t,e,n){const r=ot(n,e);return!!(r&&r.type==="element"&&(r.tagName==="dt"||r.tagName==="dd"))}function sE(t,e,n){const r=ot(n,e);return!r||r.type==="element"&&(r.tagName==="dt"||r.tagName==="dd")}function uh(t,e,n){const r=ot(n,e);return!r||r.type==="element"&&(r.tagName==="rp"||r.tagName==="rt")}function oE(t,e,n){const r=ot(n,e);return!r||r.type==="element"&&r.tagName==="optgroup"}function aE(t,e,n){const r=ot(n,e);return!r||r.type==="element"&&(r.tagName==="option"||r.tagName==="optgroup")}function lE(t,e,n){const r=ot(n,e);return!!(r&&r.type==="element"&&(r.tagName==="tbody"||r.tagName==="tfoot"))}function cE(t,e,n){const r=ot(n,e);return!r||r.type==="element"&&(r.tagName==="tbody"||r.tagName==="tfoot")}function dE(t,e,n){return!ot(n,e)}function uE(t,e,n){const r=ot(n,e);return!r||r.type==="element"&&r.tagName==="tr"}function hh(t,e,n){const r=ot(n,e);return!r||r.type==="element"&&(r.tagName==="td"||r.tagName==="th")}const hE=em({body:gE,colgroup:mE,head:pE,html:fE,tbody:yE});function fE(t){const e=ot(t,-1);return!e||e.type!=="comment"}function pE(t){const e=new Set;for(const r of t.children)if(r.type==="element"&&(r.tagName==="base"||r.tagName==="title")){if(e.has(r.tagName))return!1;e.add(r.tagName)}const n=t.children[0];return!n||n.type==="element"}function gE(t){const e=ot(t,-1,!0);return!e||e.type!=="comment"&&!(e.type==="text"&&sd(e.value.charAt(0)))&&!(e.type==="element"&&(e.tagName==="meta"||e.tagName==="link"||e.tagName==="script"||e.tagName==="style"||e.tagName==="template"))}function mE(t,e,n){const r=Jg(n,e),i=ot(t,-1,!0);return n&&r&&r.type==="element"&&r.tagName==="colgroup"&&od(r,n.children.indexOf(r),n)?!1:!!(i&&i.type==="element"&&i.tagName==="col")}function yE(t,e,n){const r=Jg(n,e),i=ot(t,-1);return n&&r&&r.type==="element"&&(r.tagName==="thead"||r.tagName==="tbody")&&od(r,n.children.indexOf(r),n)?!1:!!(i&&i.type==="element"&&i.tagName==="tr")}const Us={name:[[`	
\f\r &/=>`.split(""),`	
\f\r "&'/=>\``.split("")],[`\0	
\f\r "&'/<=>`.split(""),`\0	
\f\r "&'/<=>\``.split("")]],unquoted:[[`	
\f\r &>`.split(""),`\0	
\f\r "&'<=>\``.split("")],[`\0	
\f\r "&'<=>\``.split(""),`\0	
\f\r "&'<=>\``.split("")]],single:[["&'".split(""),"\"&'`".split("")],["\0&'".split(""),"\0\"&'`".split("")]],double:[['"&'.split(""),"\"&'`".split("")],['\0"&'.split(""),"\0\"&'`".split("")]]};function vE(t,e,n,r){const i=r.schema,s=i.space==="svg"?!1:r.settings.omitOptionalTags;let o=i.space==="svg"?r.settings.closeEmptyElements:r.settings.voids.includes(t.tagName.toLowerCase());const a=[];let l;i.space==="html"&&t.tagName==="svg"&&(r.schema=Zg);const c=_E(r,t.properties),d=r.all(i.space==="html"&&t.tagName==="template"?t.content:t);return r.schema=i,d&&(o=!1),(c||!s||!hE(t,e,n))&&(a.push("<",t.tagName,c?" "+c:""),o&&(i.space==="svg"||r.settings.closeSelfClosing)&&(l=c.charAt(c.length-1),(!r.settings.tightSelfClosing||l==="/"||l&&l!=='"'&&l!=="'")&&a.push(" "),a.push("/")),a.push(">")),a.push(d),!o&&(!s||!od(t,e,n))&&a.push("</"+t.tagName+">"),a.join("")}function _E(t,e){const n=[];let r=-1,i;if(e){for(i in e)if(e[i]!==null&&e[i]!==void 0){const s=bE(t,i,e[i]);s&&n.push(s)}}for(;++r<n.length;){const s=t.settings.tightAttributes?n[r].charAt(n[r].length-1):void 0;r!==n.length-1&&s!=='"'&&s!=="'"&&(n[r]+=" ")}return n.join("")}function bE(t,e,n){const r=A1(t.schema,e),i=t.settings.allowParseErrors&&t.schema.space==="html"?0:1,s=t.settings.allowDangerousCharacters?0:1;let o=t.quote,a;if(r.overloadedBoolean&&(n===r.attribute||n==="")?n=!0:(r.boolean||r.overloadedBoolean)&&(typeof n!="string"||n===r.attribute||n==="")&&(n=!!n),n==null||n===!1||typeof n=="number"&&Number.isNaN(n))return"";const l=ni(r.attribute,Object.assign({},t.settings.characterReferences,{subset:Us.name[i][s]}));return n===!0||(n=Array.isArray(n)?(r.commaSeparated?X1:Z1)(n,{padLeft:!t.settings.tightCommaSeparatedLists}):String(n),t.settings.collapseEmptyAttributes&&!n)?l:(t.settings.preferUnquoted&&(a=ni(n,Object.assign({},t.settings.characterReferences,{attribute:!0,subset:Us.unquoted[i][s]}))),a!==n&&(t.settings.quoteSmart&&ch(n,o)>ch(n,t.alternative)&&(o=t.alternative),a=o+ni(n,Object.assign({},t.settings.characterReferences,{subset:(o==="'"?Us.single:Us.double)[i][s],attribute:!0}))+o),l+(a&&"="+a))}const wE=["<","&"];function tm(t,e,n,r){return n&&n.type==="element"&&(n.tagName==="script"||n.tagName==="style")?t.value:ni(t.value,Object.assign({},r.settings.characterReferences,{subset:wE}))}function EE(t,e,n,r){return r.settings.allowDangerousHtml?t.value:tm(t,e,n,r)}function AE(t,e,n,r){return r.all(t)}const kE=S1("type",{invalid:xE,unknown:CE,handlers:{comment:q1,doctype:K1,element:vE,raw:EE,root:AE,text:tm}});function xE(t){throw new Error("Expected node, not `"+t+"`")}function CE(t){const e=t;throw new Error("Cannot compile unknown node `"+e.type+"`")}const SE={},TE={},RE=[];function NE(t,e){const n=e||SE,r=n.quote||'"',i=r==='"'?"'":'"';if(r!=='"'&&r!=="'")throw new Error("Invalid quote `"+r+"`, expected `'` or `\"`");return{one:LE,all:IE,settings:{omitOptionalTags:n.omitOptionalTags||!1,allowParseErrors:n.allowParseErrors||!1,allowDangerousCharacters:n.allowDangerousCharacters||!1,quoteSmart:n.quoteSmart||!1,preferUnquoted:n.preferUnquoted||!1,tightAttributes:n.tightAttributes||!1,upperDoctype:n.upperDoctype||!1,tightDoctype:n.tightDoctype||!1,bogusComments:n.bogusComments||!1,tightCommaSeparatedLists:n.tightCommaSeparatedLists||!1,tightSelfClosing:n.tightSelfClosing||!1,collapseEmptyAttributes:n.collapseEmptyAttributes||!1,allowDangerousHtml:n.allowDangerousHtml||!1,voids:n.voids||y1,characterReferences:n.characterReferences||TE,closeSelfClosing:n.closeSelfClosing||!1,closeEmptyElements:n.closeEmptyElements||!1},schema:n.space==="svg"?Zg:C1,quote:r,alternative:i}.one(Array.isArray(t)?{type:"root",children:t}:t,void 0,void 0)}function LE(t,e,n){return kE(t,e,n,this)}function IE(t){const e=[],n=t&&t.children||RE;let r=-1;for(;++r<n.length;)e[r]=this.one(n[r],r,t);return e.join("")}function Go(t,e){const n=typeof t=="string"?{}:{...t.colorReplacements},r=typeof t=="string"?t:t.name;for(const[i,s]of Object.entries(e?.colorReplacements||{}))typeof s=="string"?n[i]=s:i===r&&Object.assign(n,s);return n}function cr(t,e){return t&&(e?.[t?.toLowerCase()]||t)}function DE(t){return Array.isArray(t)?t:[t]}async function nm(t){return Promise.resolve(typeof t=="function"?t():t).then(e=>e.default||e)}function ad(t){return!t||["plaintext","txt","text","plain"].includes(t)}function rm(t){return t==="ansi"||ad(t)}function ld(t){return t==="none"}function im(t){return ld(t)}function sm(t,e){if(!e)return t;t.properties||={},t.properties.class||=[],typeof t.properties.class=="string"&&(t.properties.class=t.properties.class.split(/\s+/g)),Array.isArray(t.properties.class)||(t.properties.class=[]);const n=Array.isArray(e)?e:e.split(/\s+/g);for(const r of n)r&&!t.properties.class.includes(r)&&t.properties.class.push(r);return t}function ha(t,e=!1){if(t.length===0)return[["",0]];const n=t.split(/(\r?\n)/g);let r=0;const i=[];for(let s=0;s<n.length;s+=2){const o=e?n[s]+(n[s+1]||""):n[s];i.push([o,r]),r+=n[s].length,r+=n[s+1]?.length||0}return i}function PE(t){const e=ha(t,!0).map(([i])=>i);function n(i){if(i===t.length)return{line:e.length-1,character:e[e.length-1].length};let s=i,o=0;for(const a of e){if(s<a.length)break;s-=a.length,o++}return{line:o,character:s}}function r(i,s){let o=0;for(let a=0;a<i;a++)o+=e[a].length;return o+=s,o}return{lines:e,indexToPos:n,posToIndex:r}}const cd="light-dark()",GE=["color","background-color"];function ME(t,e){let n=0;const r=[];for(const i of e)i>n&&r.push({...t,content:t.content.slice(n,i),offset:t.offset+n}),n=i;return n<t.content.length&&r.push({...t,content:t.content.slice(n),offset:t.offset+n}),r}function OE(t,e){const n=Array.from(e instanceof Set?e:new Set(e)).sort((r,i)=>r-i);return n.length?t.map(r=>r.flatMap(i=>{const s=n.filter(o=>i.offset<o&&o<i.offset+i.content.length).map(o=>o-i.offset).sort((o,a)=>o-a);return s.length?ME(i,s):i})):t}function FE(t,e,n,r,i="css-vars"){const s={content:t.content,explanation:t.explanation,offset:t.offset},o=e.map(d=>Mo(t.variants[d])),a=new Set(o.flatMap(d=>Object.keys(d))),l={},c=(d,u)=>{const h=u==="color"?"":u==="background-color"?"-bg":`-${u}`;return n+e[d]+(u==="color"?"":h)};return o.forEach((d,u)=>{for(const h of a){const f=d[h]||"inherit";if(u===0&&r&&GE.includes(h))if(r===cd&&o.length>1){const g=e.findIndex(E=>E==="light"),y=e.findIndex(E=>E==="dark");if(g===-1||y===-1)throw new tt('When using `defaultColor: "light-dark()"`, you must provide both `light` and `dark` themes');const w=o[g][h]||"inherit",b=o[y][h]||"inherit";l[h]=`light-dark(${w}, ${b})`,i==="css-vars"&&(l[c(u,h)]=f)}else l[h]=f;else i==="css-vars"&&(l[c(u,h)]=f)}}),s.htmlStyle=l,s}function Mo(t){const e={};if(t.color&&(e.color=t.color),t.bgColor&&(e["background-color"]=t.bgColor),t.fontStyle){t.fontStyle&Et.Italic&&(e["font-style"]="italic"),t.fontStyle&Et.Bold&&(e["font-weight"]="bold");const n=[];t.fontStyle&Et.Underline&&n.push("underline"),t.fontStyle&Et.Strikethrough&&n.push("line-through"),n.length&&(e["text-decoration"]=n.join(" "))}return e}function sc(t){return typeof t=="string"?t:Object.entries(t).map(([e,n])=>`${e}:${n}`).join(";")}const om=new WeakMap;function fa(t,e){om.set(t,e)}function gs(t){return om.get(t)}class wi{_stacks={};lang;get themes(){return Object.keys(this._stacks)}get theme(){return this.themes[0]}get _stack(){return this._stacks[this.theme]}static initial(e,n){return new wi(Object.fromEntries(DE(n).map(r=>[r,ec])),e)}constructor(...e){if(e.length===2){const[n,r]=e;this.lang=r,this._stacks=n}else{const[n,r,i]=e;this.lang=r,this._stacks={[i]:n}}}getInternalStack(e=this.theme){return this._stacks[e]}getScopes(e=this.theme){return $E(this._stacks[e])}toJSON(){return{lang:this.lang,theme:this.theme,themes:this.themes,scopes:this.getScopes()}}}function $E(t){const e=[],n=new Set;function r(i){if(n.has(i))return;n.add(i);const s=i?.nameScopesList?.scopeName;s&&e.push(s),i.parent&&r(i.parent)}return r(t),e}function zE(t,e){if(!(t instanceof wi))throw new tt("Invalid grammar state");return t.getInternalStack(e)}function BE(){const t=new WeakMap;function e(n){if(!t.has(n.meta)){let r=function(o){if(typeof o=="number"){if(o<0||o>n.source.length)throw new tt(`Invalid decoration offset: ${o}. Code length: ${n.source.length}`);return{...i.indexToPos(o),offset:o}}else{const a=i.lines[o.line];if(a===void 0)throw new tt(`Invalid decoration position ${JSON.stringify(o)}. Lines length: ${i.lines.length}`);let l=o.character;if(l<0&&(l=a.length+l),l<0||l>a.length)throw new tt(`Invalid decoration position ${JSON.stringify(o)}. Line ${o.line} length: ${a.length}`);return{...o,character:l,offset:i.posToIndex(o.line,l)}}};const i=PE(n.source),s=(n.options.decorations||[]).map(o=>({...o,start:r(o.start),end:r(o.end)}));VE(s),t.set(n.meta,{decorations:s,converter:i,source:n.source})}return t.get(n.meta)}return{name:"shiki:decorations",tokens(n){if(!this.options.decorations?.length)return;const i=e(this).decorations.flatMap(o=>[o.start.offset,o.end.offset]);return OE(n,i)},code(n){if(!this.options.decorations?.length)return;const r=e(this),i=Array.from(n.children).filter(d=>d.type==="element"&&d.tagName==="span");if(i.length!==r.converter.lines.length)throw new tt(`Number of lines in code element (${i.length}) does not match the number of lines in the source (${r.converter.lines.length}). Failed to apply decorations.`);function s(d,u,h,f){const g=i[d];let y="",w=-1,b=-1;if(u===0&&(w=0),h===0&&(b=0),h===Number.POSITIVE_INFINITY&&(b=g.children.length),w===-1||b===-1)for(let A=0;A<g.children.length;A++)y+=am(g.children[A]),w===-1&&y.length===u&&(w=A+1),b===-1&&y.length===h&&(b=A+1);if(w===-1)throw new tt(`Failed to find start index for decoration ${JSON.stringify(f.start)}`);if(b===-1)throw new tt(`Failed to find end index for decoration ${JSON.stringify(f.end)}`);const E=g.children.slice(w,b);if(!f.alwaysWrap&&E.length===g.children.length)a(g,f,"line");else if(!f.alwaysWrap&&E.length===1&&E[0].type==="element")a(E[0],f,"token");else{const A={type:"element",tagName:"span",properties:{},children:E};a(A,f,"wrapper"),g.children.splice(w,E.length,A)}}function o(d,u){i[d]=a(i[d],u,"line")}function a(d,u,h){const f=u.properties||{},g=u.transform||(y=>y);return d.tagName=u.tagName||"span",d.properties={...d.properties,...f,class:d.properties.class},u.properties?.class&&sm(d,u.properties.class),d=g(d,h)||d,d}const l=[],c=r.decorations.sort((d,u)=>u.start.offset-d.start.offset||d.end.offset-u.end.offset);for(const d of c){const{start:u,end:h}=d;if(u.line===h.line)s(u.line,u.character,h.character,d);else if(u.line<h.line){s(u.line,u.character,Number.POSITIVE_INFINITY,d);for(let f=u.line+1;f<h.line;f++)l.unshift(()=>o(f,d));s(h.line,0,h.character,d)}}l.forEach(d=>d())}}}function VE(t){for(let e=0;e<t.length;e++){const n=t[e];if(n.start.offset>n.end.offset)throw new tt(`Invalid decoration range: ${JSON.stringify(n.start)} - ${JSON.stringify(n.end)}`);for(let r=e+1;r<t.length;r++){const i=t[r],s=n.start.offset<=i.start.offset&&i.start.offset<n.end.offset,o=n.start.offset<i.end.offset&&i.end.offset<=n.end.offset,a=i.start.offset<=n.start.offset&&n.start.offset<i.end.offset,l=i.start.offset<n.end.offset&&n.end.offset<=i.end.offset;if(s||o||a||l){if(s&&o||a&&l||a&&n.start.offset===n.end.offset||o&&i.start.offset===i.end.offset)continue;throw new tt(`Decorations ${JSON.stringify(n.start)} and ${JSON.stringify(i.start)} intersect.`)}}}}function am(t){return t.type==="text"?t.value:t.type==="element"?t.children.map(am).join(""):""}const UE=[BE()];function Oo(t){const e=jE(t.transformers||[]);return[...e.pre,...e.normal,...e.post,...UE]}function jE(t){const e=[],n=[],r=[];for(const i of t)switch(i.enforce){case"pre":e.push(i);break;case"post":n.push(i);break;default:r.push(i)}return{pre:e,post:n,normal:r}}var Cr=["black","red","green","yellow","blue","magenta","cyan","white","brightBlack","brightRed","brightGreen","brightYellow","brightBlue","brightMagenta","brightCyan","brightWhite"],Ya={1:"bold",2:"dim",3:"italic",4:"underline",7:"reverse",8:"hidden",9:"strikethrough"};function HE(t,e){const n=t.indexOf("\x1B",e);if(n!==-1&&t[n+1]==="["){const r=t.indexOf("m",n);if(r!==-1)return{sequence:t.substring(n+2,r).split(";"),startPosition:n,position:r+1}}return{position:t.length}}function fh(t){const e=t.shift();if(e==="2"){const n=t.splice(0,3).map(r=>Number.parseInt(r));return n.length!==3||n.some(r=>Number.isNaN(r))?void 0:{type:"rgb",rgb:n}}else if(e==="5"){const n=t.shift();if(n)return{type:"table",index:Number(n)}}}function WE(t){const e=[];for(;t.length>0;){const n=t.shift();if(!n)continue;const r=Number.parseInt(n);if(!Number.isNaN(r))if(r===0)e.push({type:"resetAll"});else if(r<=9)Ya[r]&&e.push({type:"setDecoration",value:Ya[r]});else if(r<=29){const i=Ya[r-20];i&&(e.push({type:"resetDecoration",value:i}),i==="dim"&&e.push({type:"resetDecoration",value:"bold"}))}else if(r<=37)e.push({type:"setForegroundColor",value:{type:"named",name:Cr[r-30]}});else if(r===38){const i=fh(t);i&&e.push({type:"setForegroundColor",value:i})}else if(r===39)e.push({type:"resetForegroundColor"});else if(r<=47)e.push({type:"setBackgroundColor",value:{type:"named",name:Cr[r-40]}});else if(r===48){const i=fh(t);i&&e.push({type:"setBackgroundColor",value:i})}else r===49?e.push({type:"resetBackgroundColor"}):r===53?e.push({type:"setDecoration",value:"overline"}):r===55?e.push({type:"resetDecoration",value:"overline"}):r>=90&&r<=97?e.push({type:"setForegroundColor",value:{type:"named",name:Cr[r-90+8]}}):r>=100&&r<=107&&e.push({type:"setBackgroundColor",value:{type:"named",name:Cr[r-100+8]}})}return e}function qE(){let t=null,e=null,n=new Set;return{parse(r){const i=[];let s=0;do{const o=HE(r,s),a=o.sequence?r.substring(s,o.startPosition):r.substring(s);if(a.length>0&&i.push({value:a,foreground:t,background:e,decorations:new Set(n)}),o.sequence){const l=WE(o.sequence);for(const c of l)c.type==="resetAll"?(t=null,e=null,n.clear()):c.type==="resetForegroundColor"?t=null:c.type==="resetBackgroundColor"?e=null:c.type==="resetDecoration"&&n.delete(c.value);for(const c of l)c.type==="setForegroundColor"?t=c.value:c.type==="setBackgroundColor"?e=c.value:c.type==="setDecoration"&&n.add(c.value)}s=o.position}while(s<r.length);return i}}}var KE={black:"#000000",red:"#bb0000",green:"#00bb00",yellow:"#bbbb00",blue:"#0000bb",magenta:"#ff00ff",cyan:"#00bbbb",white:"#eeeeee",brightBlack:"#555555",brightRed:"#ff5555",brightGreen:"#00ff00",brightYellow:"#ffff55",brightBlue:"#5555ff",brightMagenta:"#ff55ff",brightCyan:"#55ffff",brightWhite:"#ffffff"};function XE(t=KE){function e(a){return t[a]}function n(a){return`#${a.map(l=>Math.max(0,Math.min(l,255)).toString(16).padStart(2,"0")).join("")}`}let r;function i(){if(r)return r;r=[];for(let c=0;c<Cr.length;c++)r.push(e(Cr[c]));let a=[0,95,135,175,215,255];for(let c=0;c<6;c++)for(let d=0;d<6;d++)for(let u=0;u<6;u++)r.push(n([a[c],a[d],a[u]]));let l=8;for(let c=0;c<24;c++,l+=10)r.push(n([l,l,l]));return r}function s(a){return i()[a]}function o(a){switch(a.type){case"named":return e(a.name);case"rgb":return n(a.rgb);case"table":return s(a.index)}}return{value:o}}const ZE={black:"#000000",red:"#cd3131",green:"#0DBC79",yellow:"#E5E510",blue:"#2472C8",magenta:"#BC3FBC",cyan:"#11A8CD",white:"#E5E5E5",brightBlack:"#666666",brightRed:"#F14C4C",brightGreen:"#23D18B",brightYellow:"#F5F543",brightBlue:"#3B8EEA",brightMagenta:"#D670D6",brightCyan:"#29B8DB",brightWhite:"#FFFFFF"};function YE(t,e,n){const r=Go(t,n),i=ha(e),s=Object.fromEntries(Cr.map(l=>{const c=`terminal.ansi${l[0].toUpperCase()}${l.substring(1)}`,d=t.colors?.[c];return[l,d||ZE[l]]})),o=XE(s),a=qE();return i.map(l=>a.parse(l[0]).map(c=>{let d,u;c.decorations.has("reverse")?(d=c.background?o.value(c.background):t.bg,u=c.foreground?o.value(c.foreground):t.fg):(d=c.foreground?o.value(c.foreground):t.fg,u=c.background?o.value(c.background):void 0),d=cr(d,r),u=cr(u,r),c.decorations.has("dim")&&(d=JE(d));let h=Et.None;return c.decorations.has("bold")&&(h|=Et.Bold),c.decorations.has("italic")&&(h|=Et.Italic),c.decorations.has("underline")&&(h|=Et.Underline),c.decorations.has("strikethrough")&&(h|=Et.Strikethrough),{content:c.value,offset:l[1],color:d,bgColor:u,fontStyle:h}}))}function JE(t){const e=t.match(/#([0-9a-f]{3,8})/i);if(e){const r=e[1];if(r.length===8){const i=Math.round(Number.parseInt(r.slice(6,8),16)/2).toString(16).padStart(2,"0");return`#${r.slice(0,6)}${i}`}else{if(r.length===6)return`#${r}80`;if(r.length===4){const i=r[0],s=r[1],o=r[2],a=r[3],l=Math.round(Number.parseInt(`${a}${a}`,16)/2).toString(16).padStart(2,"0");return`#${i}${i}${s}${s}${o}${o}${l}`}else if(r.length===3){const i=r[0],s=r[1],o=r[2];return`#${i}${i}${s}${s}${o}${o}80`}}}const n=t.match(/var\((--[\w-]+-ansi-[\w-]+)\)/);return n?`var(${n[1]}-dim)`:t}function dd(t,e,n={}){const{theme:r=t.getLoadedThemes()[0]}=n,i=t.resolveLangAlias(n.lang||"text");if(ad(i)||ld(r))return ha(e).map(l=>[{content:l[0],offset:l[1]}]);const{theme:s,colorMap:o}=t.setTheme(r);if(i==="ansi")return YE(s,e,n);const a=t.getLanguage(n.lang||"text");if(n.grammarState){if(n.grammarState.lang!==a.name)throw new tt(`Grammar state language "${n.grammarState.lang}" does not match highlight language "${a.name}"`);if(!n.grammarState.themes.includes(s.name))throw new tt(`Grammar state themes "${n.grammarState.themes}" do not contain highlight theme "${s.name}"`)}return eA(e,a,s,o,n)}function QE(...t){if(t.length===2)return gs(t[1]);const[e,n,r={}]=t,{lang:i="text",theme:s=e.getLoadedThemes()[0]}=r;if(ad(i)||ld(s))throw new tt("Plain language does not have grammar state");if(i==="ansi")throw new tt("ANSI language does not have grammar state");const{theme:o,colorMap:a}=e.setTheme(s),l=e.getLanguage(i);return new wi(Fo(n,l,o,a,r).stateStack,l.name,o.name)}function eA(t,e,n,r,i){const s=Fo(t,e,n,r,i),o=new wi(Fo(t,e,n,r,i).stateStack,e.name,n.name);return fa(s.tokens,o),s.tokens}function Fo(t,e,n,r,i){const s=Go(n,i),{tokenizeMaxLineLength:o=0,tokenizeTimeLimit:a=500}=i,l=ha(t);let c=i.grammarState?zE(i.grammarState,n.name)??ec:i.grammarContextCode!=null?Fo(i.grammarContextCode,e,n,r,{...i,grammarState:void 0,grammarContextCode:void 0}).stateStack:ec,d=[];const u=[];for(let h=0,f=l.length;h<f;h++){const[g,y]=l[h];if(g===""){d=[],u.push([]);continue}if(o>0&&g.length>=o){d=[],u.push([{content:g,offset:y,color:"",fontStyle:0}]);continue}let w,b,E;i.includeExplanation&&(w=e.tokenizeLine(g,c,a),b=w.tokens,E=0);const A=e.tokenizeLine2(g,c,a),v=A.tokens.length/2;for(let S=0;S<v;S++){const L=A.tokens[2*S],G=S+1<v?A.tokens[2*S+2]:g.length;if(L===G)continue;const V=A.tokens[2*S+1],F=cr(r[fi.getForeground(V)],s),$=fi.getFontStyle(V),H={content:g.substring(L,G),offset:y+L,color:F,fontStyle:$};if(i.includeExplanation){const z=[];if(i.includeExplanation!=="scopeName")for(const k of n.settings){let I;switch(typeof k.scope){case"string":I=k.scope.split(/,/).map(C=>C.trim());break;case"object":I=k.scope;break;default:continue}z.push({settings:k,selectors:I.map(C=>C.split(/ /))})}H.explanation=[];let N=0;for(;L+N<G;){const k=b[E],I=g.substring(k.startIndex,k.endIndex);N+=I.length,H.explanation.push({content:I,scopes:i.includeExplanation==="scopeName"?tA(k.scopes):nA(z,k.scopes)}),E+=1}}d.push(H)}u.push(d),d=[],c=A.ruleStack}return{tokens:u,stateStack:c}}function tA(t){return t.map(e=>({scopeName:e}))}function nA(t,e){const n=[];for(let r=0,i=e.length;r<i;r++){const s=e[r];n[r]={scopeName:s,themeMatches:iA(t,s,e.slice(0,r))}}return n}function ph(t,e){return t===e||e.substring(0,t.length)===t&&e[t.length]==="."}function rA(t,e,n){if(!ph(t[t.length-1],e))return!1;let r=t.length-2,i=n.length-1;for(;r>=0&&i>=0;)ph(t[r],n[i])&&(r-=1),i-=1;return r===-1}function iA(t,e,n){const r=[];for(const{selectors:i,settings:s}of t)for(const o of i)if(rA(o,e,n)){r.push(s);break}return r}function lm(t,e,n){const r=Object.entries(n.themes).filter(l=>l[1]).map(l=>({color:l[0],theme:l[1]})),i=r.map(l=>{const c=dd(t,e,{...n,theme:l.theme}),d=gs(c),u=typeof l.theme=="string"?l.theme:l.theme.name;return{tokens:c,state:d,theme:u}}),s=sA(...i.map(l=>l.tokens)),o=s[0].map((l,c)=>l.map((d,u)=>{const h={content:d.content,variants:{},offset:d.offset};return"includeExplanation"in n&&n.includeExplanation&&(h.explanation=d.explanation),s.forEach((f,g)=>{const{content:y,explanation:w,offset:b,...E}=f[c][u];h.variants[r[g].color]=E}),h})),a=i[0].state?new wi(Object.fromEntries(i.map(l=>[l.theme,l.state?.getInternalStack(l.theme)])),i[0].state.lang):void 0;return a&&fa(o,a),o}function sA(...t){const e=t.map(()=>[]),n=t.length;for(let r=0;r<t[0].length;r++){const i=t.map(l=>l[r]),s=e.map(()=>[]);e.forEach((l,c)=>l.push(s[c]));const o=i.map(()=>0),a=i.map(l=>l[0]);for(;a.every(l=>l);){const l=Math.min(...a.map(c=>c.content.length));for(let c=0;c<n;c++){const d=a[c];d.content.length===l?(s[c].push(d),o[c]+=1,a[c]=i[c][o[c]]):(s[c].push({...d,content:d.content.slice(0,l)}),a[c]={...d,content:d.content.slice(l),offset:d.offset+l})}}}return e}function $o(t,e,n){let r,i,s,o,a,l;if("themes"in n){const{defaultColor:c="light",cssVariablePrefix:d="--shiki-",colorsRendering:u="css-vars"}=n,h=Object.entries(n.themes).filter(b=>b[1]).map(b=>({color:b[0],theme:b[1]})).sort((b,E)=>b.color===c?-1:E.color===c?1:0);if(h.length===0)throw new tt("`themes` option must not be empty");const f=lm(t,e,n);if(l=gs(f),c&&cd!==c&&!h.find(b=>b.color===c))throw new tt(`\`themes\` option must contain the defaultColor key \`${c}\``);const g=h.map(b=>t.getTheme(b.theme)),y=h.map(b=>b.color);s=f.map(b=>b.map(E=>FE(E,y,d,c,u))),l&&fa(s,l);const w=h.map(b=>Go(b.theme,n));i=gh(h,g,w,d,c,"fg",u),r=gh(h,g,w,d,c,"bg",u),o=`shiki-themes ${g.map(b=>b.name).join(" ")}`,a=c?void 0:[i,r].join(";")}else if("theme"in n){const c=Go(n.theme,n);s=dd(t,e,n);const d=t.getTheme(n.theme);r=cr(d.bg,c),i=cr(d.fg,c),o=d.name,l=gs(s)}else throw new tt("Invalid options, either `theme` or `themes` must be provided");return{tokens:s,fg:i,bg:r,themeName:o,rootStyle:a,grammarState:l}}function gh(t,e,n,r,i,s,o){return t.map((a,l)=>{const c=cr(e[l][s],n[l])||"inherit",d=`${r+a.color}${s==="bg"?"-bg":""}:${c}`;if(l===0&&i){if(i===cd&&t.length>1){const u=t.findIndex(y=>y.color==="light"),h=t.findIndex(y=>y.color==="dark");if(u===-1||h===-1)throw new tt('When using `defaultColor: "light-dark()"`, you must provide both `light` and `dark` themes');const f=cr(e[u][s],n[u])||"inherit",g=cr(e[h][s],n[h])||"inherit";return`light-dark(${f}, ${g});${d}`}return c}return o==="css-vars"?d:null}).filter(a=>!!a).join(";")}function zo(t,e,n,r={meta:{},options:n,codeToHast:(i,s)=>zo(t,i,s),codeToTokens:(i,s)=>$o(t,i,s)}){let i=e;for(const g of Oo(n))i=g.preprocess?.call(r,i,n)||i;let{tokens:s,fg:o,bg:a,themeName:l,rootStyle:c,grammarState:d}=$o(t,i,n);const{mergeWhitespaces:u=!0,mergeSameStyleTokens:h=!1}=n;u===!0?s=aA(s):u==="never"&&(s=lA(s)),h&&(s=cA(s));const f={...r,get source(){return i}};for(const g of Oo(n))s=g.tokens?.call(f,s)||s;return oA(s,{...n,fg:o,bg:a,themeName:l,rootStyle:n.rootStyle===!1?!1:n.rootStyle??c},f,d)}function oA(t,e,n,r=gs(t)){const i=Oo(e),s=[],o={type:"root",children:[]},{structure:a="classic",tabindex:l="0"}=e,c={class:`shiki ${e.themeName||""}`};e.rootStyle!==!1&&(e.rootStyle!=null?c.style=e.rootStyle:c.style=`background-color:${e.bg};color:${e.fg}`),l!==!1&&l!=null&&(c.tabindex=l.toString());for(const[y,w]of Object.entries(e.meta||{}))y.startsWith("_")||(c[y]=w);let d={type:"element",tagName:"pre",properties:c,children:[]},u={type:"element",tagName:"code",properties:{},children:s};const h=[],f={...n,structure:a,addClassToHast:sm,get source(){return n.source},get tokens(){return t},get options(){return e},get root(){return o},get pre(){return d},get code(){return u},get lines(){return h}};if(t.forEach((y,w)=>{w&&(a==="inline"?o.children.push({type:"element",tagName:"br",properties:{},children:[]}):a==="classic"&&s.push({type:"text",value:`
`}));let b={type:"element",tagName:"span",properties:{class:"line"},children:[]},E=0;for(const A of y){let v={type:"element",tagName:"span",properties:{...A.htmlAttrs},children:[{type:"text",value:A.content}]};const S=sc(A.htmlStyle||Mo(A));S&&(v.properties.style=S);for(const L of i)v=L?.span?.call(f,v,w+1,E,b,A)||v;a==="inline"?o.children.push(v):a==="classic"&&b.children.push(v),E+=A.content.length}if(a==="classic"){for(const A of i)b=A?.line?.call(f,b,w+1)||b;h.push(b),s.push(b)}else a==="inline"&&h.push(b)}),a==="classic"){for(const y of i)u=y?.code?.call(f,u)||u;d.children.push(u);for(const y of i)d=y?.pre?.call(f,d)||d;o.children.push(d)}else if(a==="inline"){const y=[];let w={type:"element",tagName:"span",properties:{class:"line"},children:[]};for(const A of o.children)A.type==="element"&&A.tagName==="br"?(y.push(w),w={type:"element",tagName:"span",properties:{class:"line"},children:[]}):(A.type==="element"||A.type==="text")&&w.children.push(A);y.push(w);let E={type:"element",tagName:"code",properties:{},children:y};for(const A of i)E=A?.code?.call(f,E)||E;o.children=[];for(let A=0;A<E.children.length;A++){A>0&&o.children.push({type:"element",tagName:"br",properties:{},children:[]});const v=E.children[A];v.type==="element"&&o.children.push(...v.children)}}let g=o;for(const y of i)g=y?.root?.call(f,g)||g;return r&&fa(g,r),g}function aA(t){return t.map(e=>{const n=[];let r="",i;return e.forEach((s,o)=>{const l=!(s.fontStyle&&(s.fontStyle&Et.Underline||s.fontStyle&Et.Strikethrough));l&&s.content.match(/^\s+$/)&&e[o+1]?(i===void 0&&(i=s.offset),r+=s.content):r?(l?n.push({...s,offset:i,content:r+s.content}):n.push({content:r,offset:i},s),i=void 0,r=""):n.push(s)}),n})}function lA(t){return t.map(e=>e.flatMap(n=>{if(n.content.match(/^\s+$/))return n;const r=n.content.match(/^(\s*)(.*?)(\s*)$/);if(!r)return n;const[,i,s,o]=r;if(!i&&!o)return n;const a=[{...n,offset:n.offset+i.length,content:s}];return i&&a.unshift({content:i,offset:n.offset}),o&&a.push({content:o,offset:n.offset+i.length+s.length}),a}))}function cA(t){return t.map(e=>{const n=[];for(const r of e){if(n.length===0){n.push({...r});continue}const i=n[n.length-1],s=sc(i.htmlStyle||Mo(i)),o=sc(r.htmlStyle||Mo(r)),a=i.fontStyle&&(i.fontStyle&Et.Underline||i.fontStyle&Et.Strikethrough),l=r.fontStyle&&(r.fontStyle&Et.Underline||r.fontStyle&Et.Strikethrough);!a&&!l&&s===o?i.content+=r.content:n.push({...r})}return n})}const dA=NE;function uA(t,e,n){const r={meta:{},options:n,codeToHast:(s,o)=>zo(t,s,o),codeToTokens:(s,o)=>$o(t,s,o)};let i=dA(zo(t,e,n,r));for(const s of Oo(n))i=s.postprocess?.call(r,i,n)||i;return i}const mh={light:"#333333",dark:"#bbbbbb"},yh={light:"#fffffe",dark:"#1e1e1e"},vh="__shiki_resolved";function ud(t){if(t?.[vh])return t;const e={...t};e.tokenColors&&!e.settings&&(e.settings=e.tokenColors,delete e.tokenColors),e.type||="dark",e.colorReplacements={...e.colorReplacements},e.settings||=[];let{bg:n,fg:r}=e;if(!n||!r){const a=e.settings?e.settings.find(l=>!l.name&&!l.scope):void 0;a?.settings?.foreground&&(r=a.settings.foreground),a?.settings?.background&&(n=a.settings.background),!r&&e?.colors?.["editor.foreground"]&&(r=e.colors["editor.foreground"]),!n&&e?.colors?.["editor.background"]&&(n=e.colors["editor.background"]),r||(r=e.type==="light"?mh.light:mh.dark),n||(n=e.type==="light"?yh.light:yh.dark),e.fg=r,e.bg=n}e.settings[0]&&e.settings[0].settings&&!e.settings[0].scope||e.settings.unshift({settings:{foreground:e.fg,background:e.bg}});let i=0;const s=new Map;function o(a){if(s.has(a))return s.get(a);i+=1;const l=`#${i.toString(16).padStart(8,"0").toLowerCase()}`;return e.colorReplacements?.[`#${l}`]?o(a):(s.set(a,l),l)}e.settings=e.settings.map(a=>{const l=a.settings?.foreground&&!a.settings.foreground.startsWith("#"),c=a.settings?.background&&!a.settings.background.startsWith("#");if(!l&&!c)return a;const d={...a,settings:{...a.settings}};if(l){const u=o(a.settings.foreground);e.colorReplacements[u]=a.settings.foreground,d.settings.foreground=u}if(c){const u=o(a.settings.background);e.colorReplacements[u]=a.settings.background,d.settings.background=u}return d});for(const a of Object.keys(e.colors||{}))if((a==="editor.foreground"||a==="editor.background"||a.startsWith("terminal.ansi"))&&!e.colors[a]?.startsWith("#")){const l=o(e.colors[a]);e.colorReplacements[l]=e.colors[a],e.colors[a]=l}return Object.defineProperty(e,vh,{enumerable:!1,writable:!1,value:!0}),e}async function cm(t){return Array.from(new Set((await Promise.all(t.filter(e=>!rm(e)).map(async e=>await nm(e).then(n=>Array.isArray(n)?n:[n])))).flat()))}async function dm(t){return(await Promise.all(t.map(async n=>im(n)?null:ud(await nm(n))))).filter(n=>!!n)}let hA=3;function fA(t,e=3){e>hA||console.trace(`[SHIKI DEPRECATE]: ${t}`)}let Wr=class extends Error{constructor(e){super(e),this.name="ShikiError"}};function um(t,e){if(!e)return t;if(e[t]){const n=new Set([t]);for(;e[t];){if(t=e[t],n.has(t))throw new Wr(`Circular alias \`${Array.from(n).join(" -> ")} -> ${t}\``);n.add(t)}}return t}class pA extends m1{constructor(e,n,r,i={}){super(e),this._resolver=e,this._themes=n,this._langs=r,this._alias=i,this._themes.map(s=>this.loadTheme(s)),this.loadLanguages(this._langs)}_resolvedThemes=new Map;_resolvedGrammars=new Map;_langMap=new Map;_langGraph=new Map;_textmateThemeCache=new WeakMap;_loadedThemesCache=null;_loadedLanguagesCache=null;getTheme(e){return typeof e=="string"?this._resolvedThemes.get(e):this.loadTheme(e)}loadTheme(e){const n=ud(e);return n.name&&(this._resolvedThemes.set(n.name,n),this._loadedThemesCache=null),n}getLoadedThemes(){return this._loadedThemesCache||(this._loadedThemesCache=[...this._resolvedThemes.keys()]),this._loadedThemesCache}setTheme(e){let n=this._textmateThemeCache.get(e);n||(n=No.createFromRawTheme(e),this._textmateThemeCache.set(e,n)),this._syncRegistry.setTheme(n)}getGrammar(e){return e=um(e,this._alias),this._resolvedGrammars.get(e)}loadLanguage(e){if(this.getGrammar(e.name))return;const n=new Set([...this._langMap.values()].filter(s=>s.embeddedLangsLazy?.includes(e.name)));this._resolver.addLanguage(e);const r={balancedBracketSelectors:e.balancedBracketSelectors||["*"],unbalancedBracketSelectors:e.unbalancedBracketSelectors||[]};this._syncRegistry._rawGrammars.set(e.scopeName,e);const i=this.loadGrammarWithConfiguration(e.scopeName,1,r);if(i.name=e.name,this._resolvedGrammars.set(e.name,i),e.aliases&&e.aliases.forEach(s=>{this._alias[s]=e.name}),this._loadedLanguagesCache=null,n.size)for(const s of n)this._resolvedGrammars.delete(s.name),this._loadedLanguagesCache=null,this._syncRegistry?._injectionGrammars?.delete(s.scopeName),this._syncRegistry?._grammars?.delete(s.scopeName),this.loadLanguage(this._langMap.get(s.name))}dispose(){super.dispose(),this._resolvedThemes.clear(),this._resolvedGrammars.clear(),this._langMap.clear(),this._langGraph.clear(),this._loadedThemesCache=null}loadLanguages(e){for(const i of e)this.resolveEmbeddedLanguages(i);const n=Array.from(this._langGraph.entries()),r=n.filter(([i,s])=>!s);if(r.length){const i=n.filter(([s,o])=>o?(o.embeddedLanguages||o.embeddedLangs)?.some(l=>r.map(([c])=>c).includes(l)):!1).filter(s=>!r.includes(s));throw new Wr(`Missing languages ${r.map(([s])=>`\`${s}\``).join(", ")}, required by ${i.map(([s])=>`\`${s}\``).join(", ")}`)}for(const[i,s]of n)this._resolver.addLanguage(s);for(const[i,s]of n)this.loadLanguage(s)}getLoadedLanguages(){return this._loadedLanguagesCache||(this._loadedLanguagesCache=[...new Set([...this._resolvedGrammars.keys(),...Object.keys(this._alias)])]),this._loadedLanguagesCache}resolveEmbeddedLanguages(e){this._langMap.set(e.name,e),this._langGraph.set(e.name,e);const n=e.embeddedLanguages??e.embeddedLangs;if(n)for(const r of n)this._langGraph.set(r,this._langMap.get(r))}}class gA{_langs=new Map;_scopeToLang=new Map;_injections=new Map;_onigLib;constructor(e,n){this._onigLib={createOnigScanner:r=>e.createScanner(r),createOnigString:r=>e.createString(r)},n.forEach(r=>this.addLanguage(r))}get onigLib(){return this._onigLib}getLangRegistration(e){return this._langs.get(e)}loadGrammar(e){return this._scopeToLang.get(e)}addLanguage(e){this._langs.set(e.name,e),e.aliases&&e.aliases.forEach(n=>{this._langs.set(n,e)}),this._scopeToLang.set(e.scopeName,e),e.injectTo&&e.injectTo.forEach(n=>{this._injections.get(n)||this._injections.set(n,[]),this._injections.get(n).push(e.scopeName)})}getInjections(e){const n=e.split(".");let r=[];for(let i=1;i<=n.length;i++){const s=n.slice(0,i).join(".");r=[...r,...this._injections.get(s)||[]]}return r}}let Li=0;function mA(t){Li+=1,t.warnings!==!1&&Li>=10&&Li%10===0&&console.warn(`[Shiki] ${Li} instances have been created. Shiki is supposed to be used as a singleton, consider refactoring your code to cache your highlighter instance; Or call \`highlighter.dispose()\` to release unused instances.`);let e=!1;if(!t.engine)throw new Wr("`engine` option is required for synchronous mode");const n=(t.langs||[]).flat(1),r=(t.themes||[]).flat(1).map(ud),i=new gA(t.engine,n),s=new pA(i,r,n,t.langAlias);let o;function a(A){return um(A,t.langAlias)}function l(A){b();const v=s.getGrammar(typeof A=="string"?A:A.name);if(!v)throw new Wr(`Language \`${A}\` not found, you may need to load it first`);return v}function c(A){if(A==="none")return{bg:"",fg:"",name:"none",settings:[],type:"dark"};b();const v=s.getTheme(A);if(!v)throw new Wr(`Theme \`${A}\` not found, you may need to load it first`);return v}function d(A){b();const v=c(A);o!==A&&(s.setTheme(v),o=A);const S=s.getColorMap();return{theme:v,colorMap:S}}function u(){return b(),s.getLoadedThemes()}function h(){return b(),s.getLoadedLanguages()}function f(...A){b(),s.loadLanguages(A.flat(1))}async function g(...A){return f(await cm(A))}function y(...A){b();for(const v of A.flat(1))s.loadTheme(v)}async function w(...A){return b(),y(await dm(A))}function b(){if(e)throw new Wr("Shiki instance has been disposed")}function E(){e||(e=!0,s.dispose(),Li-=1)}return{setTheme:d,getTheme:c,getLanguage:l,getLoadedThemes:u,getLoadedLanguages:h,resolveLangAlias:a,loadLanguage:g,loadLanguageSync:f,loadTheme:w,loadThemeSync:y,dispose:E,[Symbol.dispose]:E}}async function yA(t){t.engine||fA("`engine` option is required. Use `createOnigurumaEngine` or `createJavaScriptRegexEngine` to create an engine.");const[e,n,r]=await Promise.all([dm(t.themes||[]),cm(t.langs||[]),t.engine]);return mA({...t,themes:e,langs:n,engine:r})}async function vA(t){const e=await yA(t);return{getLastGrammarState:(...n)=>QE(e,...n),codeToTokensBase:(n,r)=>dd(e,n,r),codeToTokensWithThemes:(n,r)=>lm(e,n,r),codeToTokens:(n,r)=>$o(e,n,r),codeToHast:(n,r)=>zo(e,n,r),codeToHtml:(n,r)=>uA(e,n,r),getBundledLanguages:()=>({}),getBundledThemes:()=>({}),...e,getInternalContext:()=>e}}function _A(t){const e=t.langs,n=t.themes,r=t.engine;async function i(s){function o(u){if(typeof u=="string"){if(u=s.langAlias?.[u]||u,rm(u))return[];const h=e[u];if(!h)throw new tt(`Language \`${u}\` is not included in this bundle. You may want to load it from external source.`);return h}return u}function a(u){if(im(u))return"none";if(typeof u=="string"){const h=n[u];if(!h)throw new tt(`Theme \`${u}\` is not included in this bundle. You may want to load it from external source.`);return h}return u}const l=(s.themes??[]).map(u=>a(u)),c=(s.langs??[]).map(u=>o(u)),d=await vA({engine:s.engine??r(),...s,themes:l,langs:c});return{...d,loadLanguage(...u){return d.loadLanguage(...u.map(o))},loadTheme(...u){return d.loadTheme(...u.map(a))},getBundledLanguages(){return e},getBundledThemes(){return n}}}return i}const hm=[{id:"abap",name:"ABAP",import:(()=>R(()=>import("./abap-BdImnpbu.js"),[]))},{id:"actionscript-3",name:"ActionScript",import:(()=>R(()=>import("./actionscript-3-CfeIJUat.js"),[]))},{id:"ada",name:"Ada",import:(()=>R(()=>import("./ada-bCR0ucgS.js"),[]))},{id:"angular-html",name:"Angular HTML",import:(()=>R(()=>import("./angular-html-CU67Zn6k.js").then(t=>t.f),__vite__mapDeps([0,1,2,3])))},{id:"angular-ts",name:"Angular TypeScript",import:(()=>R(()=>import("./angular-ts-BwZT4LLn.js"),__vite__mapDeps([4,0,1,2,3,5])))},{id:"apache",name:"Apache Conf",import:(()=>R(()=>import("./apache-Pmp26Uib.js"),[]))},{id:"apex",name:"Apex",import:(()=>R(()=>import("./apex-DDbsPZ6N.js"),[]))},{id:"apl",name:"APL",import:(()=>R(()=>import("./apl-dKokRX4l.js"),__vite__mapDeps([6,1,2,3,7,8,9])))},{id:"applescript",name:"AppleScript",import:(()=>R(()=>import("./applescript-Co6uUVPk.js"),[]))},{id:"ara",name:"Ara",import:(()=>R(()=>import("./ara-BRHolxvo.js"),[]))},{id:"asciidoc",name:"AsciiDoc",aliases:["adoc"],import:(()=>R(()=>import("./asciidoc-Dv7Oe6Be.js"),[]))},{id:"asm",name:"Assembly",import:(()=>R(()=>import("./asm-D_Q5rh1f.js"),[]))},{id:"astro",name:"Astro",import:(()=>R(()=>import("./astro-CbQHKStN.js"),__vite__mapDeps([10,9,2,11,3,12,13])))},{id:"awk",name:"AWK",import:(()=>R(()=>import("./awk-DMzUqQB5.js"),[]))},{id:"ballerina",name:"Ballerina",import:(()=>R(()=>import("./ballerina-BFfxhgS-.js"),[]))},{id:"bat",name:"Batch File",aliases:["batch"],import:(()=>R(()=>import("./bat-BkioyH1T.js"),[]))},{id:"beancount",name:"Beancount",import:(()=>R(()=>import("./beancount-k_qm7-4y.js"),[]))},{id:"berry",name:"Berry",aliases:["be"],import:(()=>R(()=>import("./berry-uYugtg8r.js"),[]))},{id:"bibtex",name:"BibTeX",import:(()=>R(()=>import("./bibtex-CHM0blh-.js"),[]))},{id:"bicep",name:"Bicep",import:(()=>R(()=>import("./bicep-Bmn6On1c.js"),[]))},{id:"blade",name:"Blade",import:(()=>R(()=>import("./blade-DVc8C-J4.js"),__vite__mapDeps([14,15,1,2,3,7,8,16,9])))},{id:"bsl",name:"1C (Enterprise)",aliases:["1c"],import:(()=>R(()=>import("./bsl-BO_Y6i37.js"),__vite__mapDeps([17,18])))},{id:"c",name:"C",import:(()=>R(()=>import("./c-BIGW1oBm.js"),[]))},{id:"cadence",name:"Cadence",aliases:["cdc"],import:(()=>R(()=>import("./cadence-Bv_4Rxtq.js"),[]))},{id:"cairo",name:"Cairo",import:(()=>R(()=>import("./cairo-KRGpt6FW.js"),__vite__mapDeps([19,20])))},{id:"clarity",name:"Clarity",import:(()=>R(()=>import("./clarity-D53aC0YG.js"),[]))},{id:"clojure",name:"Clojure",aliases:["clj"],import:(()=>R(()=>import("./clojure-P80f7IUj.js"),[]))},{id:"cmake",name:"CMake",import:(()=>R(()=>import("./cmake-D1j8_8rp.js"),[]))},{id:"cobol",name:"COBOL",import:(()=>R(()=>import("./cobol-nwyudZeR.js"),__vite__mapDeps([21,1,2,3,8])))},{id:"codeowners",name:"CODEOWNERS",import:(()=>R(()=>import("./codeowners-Bp6g37R7.js"),[]))},{id:"codeql",name:"CodeQL",aliases:["ql"],import:(()=>R(()=>import("./codeql-DsOJ9woJ.js"),[]))},{id:"coffee",name:"CoffeeScript",aliases:["coffeescript"],import:(()=>R(()=>import("./coffee-Ch7k5sss.js"),__vite__mapDeps([22,2])))},{id:"common-lisp",name:"Common Lisp",aliases:["lisp"],import:(()=>R(()=>import("./common-lisp-Cg-RD9OK.js"),[]))},{id:"coq",name:"Coq",import:(()=>R(()=>import("./coq-DkFqJrB1.js"),[]))},{id:"cpp",name:"C++",aliases:["c++"],import:(()=>R(()=>import("./cpp-CofmeUqb.js"),__vite__mapDeps([23,24,25,26,16])))},{id:"crystal",name:"Crystal",import:(()=>R(()=>import("./crystal-tKQVLTB8.js"),__vite__mapDeps([27,1,2,3,16,26,28])))},{id:"csharp",name:"C#",aliases:["c#","cs"],import:(()=>R(()=>import("./csharp-K5feNrxe.js"),[]))},{id:"css",name:"CSS",import:(()=>R(()=>import("./css-DPfMkruS.js"),[]))},{id:"csv",name:"CSV",import:(()=>R(()=>import("./csv-fuZLfV_i.js"),[]))},{id:"cue",name:"CUE",import:(()=>R(()=>import("./cue-D82EKSYY.js"),[]))},{id:"cypher",name:"Cypher",aliases:["cql"],import:(()=>R(()=>import("./cypher-COkxafJQ.js"),[]))},{id:"d",name:"D",import:(()=>R(()=>import("./d-85-TOEBH.js"),[]))},{id:"dart",name:"Dart",import:(()=>R(()=>import("./dart-CF10PKvl.js"),[]))},{id:"dax",name:"DAX",import:(()=>R(()=>import("./dax-CEL-wOlO.js"),[]))},{id:"desktop",name:"Desktop",import:(()=>R(()=>import("./desktop-BmXAJ9_W.js"),[]))},{id:"diff",name:"Diff",import:(()=>R(()=>import("./diff-D97Zzqfu.js"),[]))},{id:"docker",name:"Dockerfile",aliases:["dockerfile"],import:(()=>R(()=>import("./docker-BcOcwvcX.js"),[]))},{id:"dotenv",name:"dotEnv",import:(()=>R(()=>import("./dotenv-Da5cRb03.js"),[]))},{id:"dream-maker",name:"Dream Maker",import:(()=>R(()=>import("./dream-maker-BtqSS_iP.js"),[]))},{id:"edge",name:"Edge",import:(()=>R(()=>import("./edge-BkV0erSs.js"),__vite__mapDeps([29,11,1,2,3,15])))},{id:"elixir",name:"Elixir",import:(()=>R(()=>import("./elixir-CDX3lj18.js"),__vite__mapDeps([30,1,2,3])))},{id:"elm",name:"Elm",import:(()=>R(()=>import("./elm-DbKCFpqz.js"),__vite__mapDeps([31,25,26])))},{id:"emacs-lisp",name:"Emacs Lisp",aliases:["elisp"],import:(()=>R(()=>import("./emacs-lisp-C9XAeP06.js"),[]))},{id:"erb",name:"ERB",import:(()=>R(()=>import("./erb-BOJIQeun.js"),__vite__mapDeps([32,1,2,3,33,34,7,8,16,35,11,36,13,23,24,25,26,28,37,38])))},{id:"erlang",name:"Erlang",aliases:["erl"],import:(()=>R(()=>import("./erlang-DsQrWhSR.js"),__vite__mapDeps([39,40])))},{id:"fennel",name:"Fennel",import:(()=>R(()=>import("./fennel-BYunw83y.js"),[]))},{id:"fish",name:"Fish",import:(()=>R(()=>import("./fish-BvzEVeQv.js"),[]))},{id:"fluent",name:"Fluent",aliases:["ftl"],import:(()=>R(()=>import("./fluent-C4IJs8-o.js"),[]))},{id:"fortran-fixed-form",name:"Fortran (Fixed Form)",aliases:["f","for","f77"],import:(()=>R(()=>import("./fortran-fixed-form-BZjJHVRy.js"),__vite__mapDeps([41,42])))},{id:"fortran-free-form",name:"Fortran (Free Form)",aliases:["f90","f95","f03","f08","f18"],import:(()=>R(()=>import("./fortran-free-form-D22FLkUw.js"),[]))},{id:"fsharp",name:"F#",aliases:["f#","fs"],import:(()=>R(()=>import("./fsharp-CXgrBDvD.js"),__vite__mapDeps([43,40])))},{id:"gdresource",name:"GDResource",import:(()=>R(()=>import("./gdresource-B7Tvp0Sc.js"),__vite__mapDeps([44,45,46])))},{id:"gdscript",name:"GDScript",import:(()=>R(()=>import("./gdscript-DTMYz4Jt.js"),[]))},{id:"gdshader",name:"GDShader",import:(()=>R(()=>import("./gdshader-DkwncUOv.js"),[]))},{id:"genie",name:"Genie",import:(()=>R(()=>import("./genie-D0YGMca9.js"),[]))},{id:"gherkin",name:"Gherkin",import:(()=>R(()=>import("./gherkin-DyxjwDmM.js"),[]))},{id:"git-commit",name:"Git Commit Message",import:(()=>R(()=>import("./git-commit-F4YmCXRG.js"),__vite__mapDeps([47,48])))},{id:"git-rebase",name:"Git Rebase Message",import:(()=>R(()=>import("./git-rebase-r7XF79zn.js"),__vite__mapDeps([49,28])))},{id:"gleam",name:"Gleam",import:(()=>R(()=>import("./gleam-BspZqrRM.js"),[]))},{id:"glimmer-js",name:"Glimmer JS",aliases:["gjs"],import:(()=>R(()=>import("./glimmer-js-Rg0-pVw9.js"),__vite__mapDeps([50,2,11,3,1])))},{id:"glimmer-ts",name:"Glimmer TS",aliases:["gts"],import:(()=>R(()=>import("./glimmer-ts-U6CK756n.js"),__vite__mapDeps([51,11,3,2,1])))},{id:"glsl",name:"GLSL",import:(()=>R(()=>import("./glsl-DplSGwfg.js"),__vite__mapDeps([25,26])))},{id:"gnuplot",name:"Gnuplot",import:(()=>R(()=>import("./gnuplot-DdkO51Og.js"),[]))},{id:"go",name:"Go",import:(()=>R(()=>import("./go-Dn2_MT6a.js"),[]))},{id:"graphql",name:"GraphQL",aliases:["gql"],import:(()=>R(()=>import("./graphql-ChdNCCLP.js"),__vite__mapDeps([35,2,11,36,13])))},{id:"groovy",name:"Groovy",import:(()=>R(()=>import("./groovy-gcz8RCvz.js"),[]))},{id:"hack",name:"Hack",import:(()=>R(()=>import("./hack-CaT9iCJl.js"),__vite__mapDeps([52,1,2,3,16])))},{id:"haml",name:"Ruby Haml",import:(()=>R(()=>import("./haml-B8DHNrY2.js"),__vite__mapDeps([34,2,3])))},{id:"handlebars",name:"Handlebars",aliases:["hbs"],import:(()=>R(()=>import("./handlebars-BL8al0AC.js"),__vite__mapDeps([53,1,2,3,38])))},{id:"haskell",name:"Haskell",aliases:["hs"],import:(()=>R(()=>import("./haskell-Df6bDoY_.js"),[]))},{id:"haxe",name:"Haxe",import:(()=>R(()=>import("./haxe-CzTSHFRz.js"),[]))},{id:"hcl",name:"HashiCorp HCL",import:(()=>R(()=>import("./hcl-BWvSN4gD.js"),[]))},{id:"hjson",name:"Hjson",import:(()=>R(()=>import("./hjson-D5-asLiD.js"),[]))},{id:"hlsl",name:"HLSL",import:(()=>R(()=>import("./hlsl-D3lLCCz7.js"),[]))},{id:"html",name:"HTML",import:(()=>R(()=>import("./html-GMplVEZG.js"),__vite__mapDeps([1,2,3])))},{id:"html-derivative",name:"HTML (Derivative)",import:(()=>R(()=>import("./html-derivative-BFtXZ54Q.js"),__vite__mapDeps([15,1,2,3])))},{id:"http",name:"HTTP",import:(()=>R(()=>import("./http-jrhK8wxY.js"),__vite__mapDeps([54,28,9,7,8,35,2,11,36,13])))},{id:"hurl",name:"Hurl",import:(()=>R(()=>import("./hurl-irOxFIW8.js"),__vite__mapDeps([55,35,2,11,36,13,7,8,56])))},{id:"hxml",name:"HXML",import:(()=>R(()=>import("./hxml-Bvhsp5Yf.js"),__vite__mapDeps([57,58])))},{id:"hy",name:"Hy",import:(()=>R(()=>import("./hy-DFXneXwc.js"),[]))},{id:"imba",name:"Imba",import:(()=>R(()=>import("./imba-DGztddWO.js"),[]))},{id:"ini",name:"INI",aliases:["properties"],import:(()=>R(()=>import("./ini-BEwlwnbL.js"),[]))},{id:"java",name:"Java",import:(()=>R(()=>import("./java-CylS5w8V.js"),[]))},{id:"javascript",name:"JavaScript",aliases:["js","cjs","mjs"],import:(()=>R(()=>import("./javascript-wDzz0qaB.js"),[]))},{id:"jinja",name:"Jinja",import:(()=>R(()=>import("./jinja-4LBKfQ-Z.js"),__vite__mapDeps([59,1,2,3])))},{id:"jison",name:"Jison",import:(()=>R(()=>import("./jison-wvAkD_A8.js"),__vite__mapDeps([60,2])))},{id:"json",name:"JSON",import:(()=>R(()=>import("./json-Cp-IABpG.js"),[]))},{id:"json5",name:"JSON5",import:(()=>R(()=>import("./json5-C9tS-k6U.js"),[]))},{id:"jsonc",name:"JSON with Comments",import:(()=>R(()=>import("./jsonc-Des-eS-w.js"),[]))},{id:"jsonl",name:"JSON Lines",import:(()=>R(()=>import("./jsonl-DcaNXYhu.js"),[]))},{id:"jsonnet",name:"Jsonnet",import:(()=>R(()=>import("./jsonnet-DFQXde-d.js"),[]))},{id:"jssm",name:"JSSM",aliases:["fsl"],import:(()=>R(()=>import("./jssm-C2t-YnRu.js"),[]))},{id:"jsx",name:"JSX",import:(()=>R(()=>import("./jsx-g9-lgVsj.js"),[]))},{id:"julia",name:"Julia",aliases:["jl"],import:(()=>R(()=>import("./julia-C8NyazO9.js"),__vite__mapDeps([61,23,24,25,26,16,20,2,62])))},{id:"kdl",name:"KDL",import:(()=>R(()=>import("./kdl-DV7GczEv.js"),[]))},{id:"kotlin",name:"Kotlin",aliases:["kt","kts"],import:(()=>R(()=>import("./kotlin-BdnUsdx6.js"),[]))},{id:"kusto",name:"Kusto",aliases:["kql"],import:(()=>R(()=>import("./kusto-BvAqAH-y.js"),[]))},{id:"latex",name:"LaTeX",import:(()=>R(()=>import("./latex-BdAV_C_H.js"),__vite__mapDeps([63,64,62])))},{id:"lean",name:"Lean 4",aliases:["lean4"],import:(()=>R(()=>import("./lean-Bc6EcWN3.js"),[]))},{id:"less",name:"Less",import:(()=>R(()=>import("./less-B1dDrJ26.js"),[]))},{id:"liquid",name:"Liquid",import:(()=>R(()=>import("./liquid-DYVedYrR.js"),__vite__mapDeps([65,1,2,3,9])))},{id:"llvm",name:"LLVM IR",import:(()=>R(()=>import("./llvm-BtvRca6l.js"),[]))},{id:"log",name:"Log file",import:(()=>R(()=>import("./log-2UxHyX5q.js"),[]))},{id:"logo",name:"Logo",import:(()=>R(()=>import("./logo-BtOb2qkB.js"),[]))},{id:"lua",name:"Lua",import:(()=>R(()=>import("./lua-BbnMAYS6.js"),__vite__mapDeps([37,26])))},{id:"luau",name:"Luau",import:(()=>R(()=>import("./luau-CXu1NL6O.js"),[]))},{id:"make",name:"Makefile",aliases:["makefile"],import:(()=>R(()=>import("./make-CHLpvVh8.js"),[]))},{id:"markdown",name:"Markdown",aliases:["md"],import:(()=>R(()=>import("./markdown-Cvjx9yec.js"),[]))},{id:"marko",name:"Marko",import:(()=>R(()=>import("./marko-CPi9NSCl.js"),__vite__mapDeps([66,3,67,5,11])))},{id:"matlab",name:"MATLAB",import:(()=>R(()=>import("./matlab-D7o27uSR.js"),[]))},{id:"mdc",name:"MDC",import:(()=>R(()=>import("./mdc-DUICxH0z.js"),__vite__mapDeps([68,40,38,15,1,2,3])))},{id:"mdx",name:"MDX",import:(()=>R(()=>import("./mdx-Cmh6b_Ma.js"),[]))},{id:"mermaid",name:"Mermaid",aliases:["mmd"],import:(()=>R(()=>import("./mermaid-DKYwYmdq.js"),[]))},{id:"mipsasm",name:"MIPS Assembly",aliases:["mips"],import:(()=>R(()=>import("./mipsasm-CKIfxQSi.js"),[]))},{id:"mojo",name:"Mojo",import:(()=>R(()=>import("./mojo-1DNp92w6.js"),[]))},{id:"move",name:"Move",import:(()=>R(()=>import("./move-Bu9oaDYs.js"),[]))},{id:"narrat",name:"Narrat Language",aliases:["nar"],import:(()=>R(()=>import("./narrat-DRg8JJMk.js"),[]))},{id:"nextflow",name:"Nextflow",aliases:["nf"],import:(()=>R(()=>import("./nextflow-BrzmwbiE.js"),[]))},{id:"nginx",name:"Nginx",import:(()=>R(()=>import("./nginx-DknmC5AR.js"),__vite__mapDeps([69,37,26])))},{id:"nim",name:"Nim",import:(()=>R(()=>import("./nim-CVrawwO9.js"),__vite__mapDeps([70,26,1,2,3,7,8,25,40])))},{id:"nix",name:"Nix",import:(()=>R(()=>import("./nix-c8nO5XWb.js"),[]))},{id:"nushell",name:"nushell",aliases:["nu"],import:(()=>R(()=>import("./nushell-C-sUppwS.js"),[]))},{id:"objective-c",name:"Objective-C",aliases:["objc"],import:(()=>R(()=>import("./objective-c-DXmwc3jG.js"),[]))},{id:"objective-cpp",name:"Objective-C++",import:(()=>R(()=>import("./objective-cpp-CLxacb5B.js"),[]))},{id:"ocaml",name:"OCaml",import:(()=>R(()=>import("./ocaml-C0hk2d4L.js"),[]))},{id:"openscad",name:"OpenSCAD",aliases:["scad"],import:(()=>R(()=>import("./openscad-C4EeE6gA.js"),[]))},{id:"pascal",name:"Pascal",import:(()=>R(()=>import("./pascal-D93ZcfNL.js"),[]))},{id:"perl",name:"Perl",import:(()=>R(()=>import("./perl-C0TMdlhV.js"),__vite__mapDeps([71,1,2,3,7,8,16])))},{id:"php",name:"PHP",import:(()=>R(()=>import("./php-CDn_0X-4.js"),__vite__mapDeps([72,1,2,3,7,8,16,9])))},{id:"pkl",name:"Pkl",import:(()=>R(()=>import("./pkl-u5AG7uiY.js"),[]))},{id:"plsql",name:"PL/SQL",import:(()=>R(()=>import("./plsql-ChMvpjG-.js"),[]))},{id:"po",name:"Gettext PO",aliases:["pot","potx"],import:(()=>R(()=>import("./po-BTJTHyun.js"),[]))},{id:"polar",name:"Polar",import:(()=>R(()=>import("./polar-C0HS_06l.js"),[]))},{id:"postcss",name:"PostCSS",import:(()=>R(()=>import("./postcss-CXtECtnM.js"),[]))},{id:"powerquery",name:"PowerQuery",import:(()=>R(()=>import("./powerquery-CEu0bR-o.js"),[]))},{id:"powershell",name:"PowerShell",aliases:["ps","ps1"],import:(()=>R(()=>import("./powershell-Dpen1YoG.js"),[]))},{id:"prisma",name:"Prisma",import:(()=>R(()=>import("./prisma-Dd19v3D-.js"),[]))},{id:"prolog",name:"Prolog",import:(()=>R(()=>import("./prolog-CbFg5uaA.js"),[]))},{id:"proto",name:"Protocol Buffer 3",aliases:["protobuf"],import:(()=>R(()=>import("./proto-DyJlTyXw.js"),[]))},{id:"pug",name:"Pug",aliases:["jade"],import:(()=>R(()=>import("./pug-CGlum2m_.js"),__vite__mapDeps([73,2,3,1])))},{id:"puppet",name:"Puppet",import:(()=>R(()=>import("./puppet-BMWR74SV.js"),[]))},{id:"purescript",name:"PureScript",import:(()=>R(()=>import("./purescript-CklMAg4u.js"),[]))},{id:"python",name:"Python",aliases:["py"],import:(()=>R(()=>import("./python-B6aJPvgy.js"),[]))},{id:"qml",name:"QML",import:(()=>R(()=>import("./qml-3beO22l8.js"),__vite__mapDeps([74,2])))},{id:"qmldir",name:"QML Directory",import:(()=>R(()=>import("./qmldir-C8lEn-DE.js"),[]))},{id:"qss",name:"Qt Style Sheets",import:(()=>R(()=>import("./qss-IeuSbFQv.js"),[]))},{id:"r",name:"R",import:(()=>R(()=>import("./r-DiinP2Uv.js"),[]))},{id:"racket",name:"Racket",import:(()=>R(()=>import("./racket-BqYA7rlc.js"),[]))},{id:"raku",name:"Raku",aliases:["perl6"],import:(()=>R(()=>import("./raku-DXvB9xmW.js"),[]))},{id:"razor",name:"ASP.NET Razor",import:(()=>R(()=>import("./razor-CE9lU5zL.js"),__vite__mapDeps([75,1,2,3,76])))},{id:"reg",name:"Windows Registry Script",import:(()=>R(()=>import("./reg-C-SQnVFl.js"),[]))},{id:"regexp",name:"RegExp",aliases:["regex"],import:(()=>R(()=>import("./regexp-CDVJQ6XC.js"),[]))},{id:"rel",name:"Rel",import:(()=>R(()=>import("./rel-C3B-1QV4.js"),[]))},{id:"riscv",name:"RISC-V",import:(()=>R(()=>import("./riscv-BM1_JUlF.js"),[]))},{id:"rosmsg",name:"ROS Interface",import:(()=>R(()=>import("./rosmsg-BJDFO7_C.js"),[]))},{id:"rst",name:"reStructuredText",import:(()=>R(()=>import("./rst-B0xPkSld.js"),__vite__mapDeps([77,15,1,2,3,23,24,25,26,16,20,28,38,78,33,34,7,8,35,11,36,13,37])))},{id:"ruby",name:"Ruby",aliases:["rb"],import:(()=>R(()=>import("./ruby-BvKwtOVI.js"),__vite__mapDeps([33,1,2,3,34,7,8,16,35,11,36,13,23,24,25,26,28,37,38])))},{id:"rust",name:"Rust",aliases:["rs"],import:(()=>R(()=>import("./rust-B1yitclQ.js"),[]))},{id:"sas",name:"SAS",import:(()=>R(()=>import("./sas-cz2c8ADy.js"),__vite__mapDeps([79,16])))},{id:"sass",name:"Sass",import:(()=>R(()=>import("./sass-Cj5Yp3dK.js"),[]))},{id:"scala",name:"Scala",import:(()=>R(()=>import("./scala-C151Ov-r.js"),[]))},{id:"scheme",name:"Scheme",import:(()=>R(()=>import("./scheme-C98Dy4si.js"),[]))},{id:"scss",name:"SCSS",import:(()=>R(()=>import("./scss-OYdSNvt2.js"),__vite__mapDeps([5,3])))},{id:"sdbl",name:"1C (Query)",aliases:["1c-query"],import:(()=>R(()=>import("./sdbl-DVxCFoDh.js"),[]))},{id:"shaderlab",name:"ShaderLab",aliases:["shader"],import:(()=>R(()=>import("./shaderlab-Dg9Lc6iA.js"),__vite__mapDeps([80,81])))},{id:"shellscript",name:"Shell",aliases:["bash","sh","shell","zsh"],import:(()=>R(()=>import("./shellscript-Yzrsuije.js"),[]))},{id:"shellsession",name:"Shell Session",aliases:["console"],import:(()=>R(()=>import("./shellsession-BADoaaVG.js"),__vite__mapDeps([82,28])))},{id:"smalltalk",name:"Smalltalk",import:(()=>R(()=>import("./smalltalk-BERRCDM3.js"),[]))},{id:"solidity",name:"Solidity",import:(()=>R(()=>import("./solidity-rGO070M0.js"),[]))},{id:"soy",name:"Closure Templates",aliases:["closure-templates"],import:(()=>R(()=>import("./soy-Brmx7dQM.js"),__vite__mapDeps([83,1,2,3])))},{id:"sparql",name:"SPARQL",import:(()=>R(()=>import("./sparql-rVzFXLq3.js"),__vite__mapDeps([84,85])))},{id:"splunk",name:"Splunk Query Language",aliases:["spl"],import:(()=>R(()=>import("./splunk-BtCnVYZw.js"),[]))},{id:"sql",name:"SQL",import:(()=>R(()=>import("./sql-BLtJtn59.js"),[]))},{id:"ssh-config",name:"SSH Config",import:(()=>R(()=>import("./ssh-config-_ykCGR6B.js"),[]))},{id:"stata",name:"Stata",import:(()=>R(()=>import("./stata-BH5u7GGu.js"),__vite__mapDeps([86,16])))},{id:"stylus",name:"Stylus",aliases:["styl"],import:(()=>R(()=>import("./stylus-BEDo0Tqx.js"),[]))},{id:"svelte",name:"Svelte",import:(()=>R(()=>import("./svelte-3Dk4HxPD.js"),__vite__mapDeps([87,2,11,3,12])))},{id:"swift",name:"Swift",import:(()=>R(()=>import("./swift-Dg5xB15N.js"),[]))},{id:"system-verilog",name:"SystemVerilog",import:(()=>R(()=>import("./system-verilog-CnnmHF94.js"),[]))},{id:"systemd",name:"Systemd Units",import:(()=>R(()=>import("./systemd-4A_iFExJ.js"),[]))},{id:"talonscript",name:"TalonScript",aliases:["talon"],import:(()=>R(()=>import("./talonscript-CkByrt1z.js"),[]))},{id:"tasl",name:"Tasl",import:(()=>R(()=>import("./tasl-QIJgUcNo.js"),[]))},{id:"tcl",name:"Tcl",import:(()=>R(()=>import("./tcl-dwOrl1Do.js"),[]))},{id:"templ",name:"Templ",import:(()=>R(()=>import("./templ-W15q3VgB.js"),__vite__mapDeps([88,89,2,3])))},{id:"terraform",name:"Terraform",aliases:["tf","tfvars"],import:(()=>R(()=>import("./terraform-BETggiCN.js"),[]))},{id:"tex",name:"TeX",import:(()=>R(()=>import("./tex-CxkMU7Pf.js"),__vite__mapDeps([64,62])))},{id:"toml",name:"TOML",import:(()=>R(()=>import("./toml-vGWfd6FD.js"),[]))},{id:"ts-tags",name:"TypeScript with Tags",aliases:["lit"],import:(()=>R(()=>import("./ts-tags-zn1MmPIZ.js"),__vite__mapDeps([90,11,3,2,25,26,1,16,7,8])))},{id:"tsv",name:"TSV",import:(()=>R(()=>import("./tsv-B_m7g4N7.js"),[]))},{id:"tsx",name:"TSX",import:(()=>R(()=>import("./tsx-COt5Ahok.js"),[]))},{id:"turtle",name:"Turtle",import:(()=>R(()=>import("./turtle-BsS91CYL.js"),[]))},{id:"twig",name:"Twig",import:(()=>R(()=>import("./twig-CO9l9SDP.js"),__vite__mapDeps([91,3,2,5,72,1,7,8,16,9,20,33,34,35,11,36,13,23,24,25,26,28,37,38])))},{id:"typescript",name:"TypeScript",aliases:["ts","cts","mts"],import:(()=>R(()=>import("./typescript-BPQ3VLAy.js"),[]))},{id:"typespec",name:"TypeSpec",aliases:["tsp"],import:(()=>R(()=>import("./typespec-BGHnOYBU.js"),[]))},{id:"typst",name:"Typst",aliases:["typ"],import:(()=>R(()=>import("./typst-DHCkPAjA.js"),[]))},{id:"v",name:"V",import:(()=>R(()=>import("./v-BcVCzyr7.js"),[]))},{id:"vala",name:"Vala",import:(()=>R(()=>import("./vala-CsfeWuGM.js"),[]))},{id:"vb",name:"Visual Basic",aliases:["cmd"],import:(()=>R(()=>import("./vb-D17OF-Vu.js"),[]))},{id:"verilog",name:"Verilog",import:(()=>R(()=>import("./verilog-BQ8w6xss.js"),[]))},{id:"vhdl",name:"VHDL",import:(()=>R(()=>import("./vhdl-CeAyd5Ju.js"),[]))},{id:"viml",name:"Vim Script",aliases:["vim","vimscript"],import:(()=>R(()=>import("./viml-CJc9bBzg.js"),[]))},{id:"vue",name:"Vue",import:(()=>R(()=>import("./vue-DnHKYNfI.js"),__vite__mapDeps([92,3,2,11,9,15,1])))},{id:"vue-html",name:"Vue HTML",import:(()=>R(()=>import("./vue-html-CChd_i61.js"),__vite__mapDeps([93,92,3,2,11,9,15,1])))},{id:"vue-vine",name:"Vue Vine",import:(()=>R(()=>import("./vue-vine-8moa0y9V.js"),__vite__mapDeps([94,3,5,67,95,12,92,2,11,9,15,1])))},{id:"vyper",name:"Vyper",aliases:["vy"],import:(()=>R(()=>import("./vyper-CDx5xZoG.js"),[]))},{id:"wasm",name:"WebAssembly",import:(()=>R(()=>import("./wasm-MzD3tlZU.js"),[]))},{id:"wenyan",name:"Wenyan",aliases:[""],import:(()=>R(()=>import("./wenyan-BV7otONQ.js"),[]))},{id:"wgsl",name:"WGSL",import:(()=>R(()=>import("./wgsl-Dx-B1_4e.js"),[]))},{id:"wikitext",name:"Wikitext",aliases:["mediawiki","wiki"],import:(()=>R(()=>import("./wikitext-BhOHFoWU.js"),[]))},{id:"wit",name:"WebAssembly Interface Types",import:(()=>R(()=>import("./wit-5i3qLPDT.js"),[]))},{id:"wolfram",name:"Wolfram",aliases:["wl"],import:(()=>R(()=>import("./wolfram-lXgVvXCa.js"),[]))},{id:"xml",name:"XML",import:(()=>R(()=>import("./xml-sdJ4AIDG.js"),__vite__mapDeps([7,8])))},{id:"xsl",name:"XSL",import:(()=>R(()=>import("./xsl-CtQFsRM5.js"),__vite__mapDeps([96,7,8])))},{id:"yaml",name:"YAML",aliases:["yml"],import:(()=>R(()=>import("./yaml-Buea-lGh.js"),[]))},{id:"zenscript",name:"ZenScript",import:(()=>R(()=>import("./zenscript-DVFEvuxE.js"),[]))},{id:"zig",name:"Zig",import:(()=>R(()=>import("./zig-VOosw3JB.js"),[]))}],bA=Object.fromEntries(hm.map(t=>[t.id,t.import])),wA=Object.fromEntries(hm.flatMap(t=>t.aliases?.map(e=>[e,t.import])||[])),EA={...bA,...wA},AA=[{id:"andromeeda",displayName:"Andromeeda",type:"dark",import:(()=>R(()=>import("./andromeeda-C-Jbm3Hp.js"),[]))},{id:"aurora-x",displayName:"Aurora X",type:"dark",import:(()=>R(()=>import("./aurora-x-D-2ljcwZ.js"),[]))},{id:"ayu-dark",displayName:"Ayu Dark",type:"dark",import:(()=>R(()=>import("./ayu-dark-Cv9koXgw.js"),[]))},{id:"catppuccin-frappe",displayName:"Catppuccin Frapp",type:"dark",import:(()=>R(()=>import("./catppuccin-frappe-DFWUc33u.js"),[]))},{id:"catppuccin-latte",displayName:"Catppuccin Latte",type:"light",import:(()=>R(()=>import("./catppuccin-latte-C9dUb6Cb.js"),[]))},{id:"catppuccin-macchiato",displayName:"Catppuccin Macchiato",type:"dark",import:(()=>R(()=>import("./catppuccin-macchiato-DQyhUUbL.js"),[]))},{id:"catppuccin-mocha",displayName:"Catppuccin Mocha",type:"dark",import:(()=>R(()=>import("./catppuccin-mocha-D87Tk5Gz.js"),[]))},{id:"dark-plus",displayName:"Dark Plus",type:"dark",import:(()=>R(()=>import("./dark-plus-C3mMm8J8.js"),[]))},{id:"dracula",displayName:"Dracula Theme",type:"dark",import:(()=>R(()=>import("./dracula-BzJJZx-M.js"),[]))},{id:"dracula-soft",displayName:"Dracula Theme Soft",type:"dark",import:(()=>R(()=>import("./dracula-soft-BXkSAIEj.js"),[]))},{id:"everforest-dark",displayName:"Everforest Dark",type:"dark",import:(()=>R(()=>import("./everforest-dark-BgDCqdQA.js"),[]))},{id:"everforest-light",displayName:"Everforest Light",type:"light",import:(()=>R(()=>import("./everforest-light-C8M2exoo.js"),[]))},{id:"github-dark",displayName:"GitHub Dark",type:"dark",import:(()=>R(()=>import("./github-dark-DHJKELXO.js"),[]))},{id:"github-dark-default",displayName:"GitHub Dark Default",type:"dark",import:(()=>R(()=>import("./github-dark-default-Cuk6v7N8.js"),[]))},{id:"github-dark-dimmed",displayName:"GitHub Dark Dimmed",type:"dark",import:(()=>R(()=>import("./github-dark-dimmed-DH5Ifo-i.js"),[]))},{id:"github-dark-high-contrast",displayName:"GitHub Dark High Contrast",type:"dark",import:(()=>R(()=>import("./github-dark-high-contrast-E3gJ1_iC.js"),[]))},{id:"github-light",displayName:"GitHub Light",type:"light",import:(()=>R(()=>import("./github-light-DAi9KRSo.js"),[]))},{id:"github-light-default",displayName:"GitHub Light Default",type:"light",import:(()=>R(()=>import("./github-light-default-D7oLnXFd.js"),[]))},{id:"github-light-high-contrast",displayName:"GitHub Light High Contrast",type:"light",import:(()=>R(()=>import("./github-light-high-contrast-BfjtVDDH.js"),[]))},{id:"gruvbox-dark-hard",displayName:"Gruvbox Dark Hard",type:"dark",import:(()=>R(()=>import("./gruvbox-dark-hard-CFHQjOhq.js"),[]))},{id:"gruvbox-dark-medium",displayName:"Gruvbox Dark Medium",type:"dark",import:(()=>R(()=>import("./gruvbox-dark-medium-GsRaNv29.js"),[]))},{id:"gruvbox-dark-soft",displayName:"Gruvbox Dark Soft",type:"dark",import:(()=>R(()=>import("./gruvbox-dark-soft-CVdnzihN.js"),[]))},{id:"gruvbox-light-hard",displayName:"Gruvbox Light Hard",type:"light",import:(()=>R(()=>import("./gruvbox-light-hard-CH1njM8p.js"),[]))},{id:"gruvbox-light-medium",displayName:"Gruvbox Light Medium",type:"light",import:(()=>R(()=>import("./gruvbox-light-medium-DRw_LuNl.js"),[]))},{id:"gruvbox-light-soft",displayName:"Gruvbox Light Soft",type:"light",import:(()=>R(()=>import("./gruvbox-light-soft-hJgmCMqR.js"),[]))},{id:"houston",displayName:"Houston",type:"dark",import:(()=>R(()=>import("./houston-DnULxvSX.js"),[]))},{id:"kanagawa-dragon",displayName:"Kanagawa Dragon",type:"dark",import:(()=>R(()=>import("./kanagawa-dragon-CkXjmgJE.js"),[]))},{id:"kanagawa-lotus",displayName:"Kanagawa Lotus",type:"light",import:(()=>R(()=>import("./kanagawa-lotus-CfQXZHmo.js"),[]))},{id:"kanagawa-wave",displayName:"Kanagawa Wave",type:"dark",import:(()=>R(()=>import("./kanagawa-wave-DWedfzmr.js"),[]))},{id:"laserwave",displayName:"LaserWave",type:"dark",import:(()=>R(()=>import("./laserwave-DUszq2jm.js"),[]))},{id:"light-plus",displayName:"Light Plus",type:"light",import:(()=>R(()=>import("./light-plus-B7mTdjB0.js"),[]))},{id:"material-theme",displayName:"Material Theme",type:"dark",import:(()=>R(()=>import("./material-theme-D5KoaKCx.js"),[]))},{id:"material-theme-darker",displayName:"Material Theme Darker",type:"dark",import:(()=>R(()=>import("./material-theme-darker-BfHTSMKl.js"),[]))},{id:"material-theme-lighter",displayName:"Material Theme Lighter",type:"light",import:(()=>R(()=>import("./material-theme-lighter-B0m2ddpp.js"),[]))},{id:"material-theme-ocean",displayName:"Material Theme Ocean",type:"dark",import:(()=>R(()=>import("./material-theme-ocean-CyktbL80.js"),[]))},{id:"material-theme-palenight",displayName:"Material Theme Palenight",type:"dark",import:(()=>R(()=>import("./material-theme-palenight-Csfq5Kiy.js"),[]))},{id:"min-dark",displayName:"Min Dark",type:"dark",import:(()=>R(()=>import("./min-dark-CafNBF8u.js"),[]))},{id:"min-light",displayName:"Min Light",type:"light",import:(()=>R(()=>import("./min-light-CTRr51gU.js"),[]))},{id:"monokai",displayName:"Monokai",type:"dark",import:(()=>R(()=>import("./monokai-D4h5O-jR.js"),[]))},{id:"night-owl",displayName:"Night Owl",type:"dark",import:(()=>R(()=>import("./night-owl-C39BiMTA.js"),[]))},{id:"nord",displayName:"Nord",type:"dark",import:(()=>R(()=>import("./nord-Ddv68eIx.js"),[]))},{id:"one-dark-pro",displayName:"One Dark Pro",type:"dark",import:(()=>R(()=>import("./one-dark-pro-DVMEJ2y_.js"),[]))},{id:"one-light",displayName:"One Light",type:"light",import:(()=>R(()=>import("./one-light-PoHY5YXO.js"),[]))},{id:"plastic",displayName:"Plastic",type:"dark",import:(()=>R(()=>import("./plastic-3e1v2bzS.js"),[]))},{id:"poimandres",displayName:"Poimandres",type:"dark",import:(()=>R(()=>import("./poimandres-CS3Unz2-.js"),[]))},{id:"red",displayName:"Red",type:"dark",import:(()=>R(()=>import("./red-bN70gL4F.js"),[]))},{id:"rose-pine",displayName:"Ros Pine",type:"dark",import:(()=>R(()=>import("./rose-pine-qdsjHGoJ.js"),[]))},{id:"rose-pine-dawn",displayName:"Ros Pine Dawn",type:"light",import:(()=>R(()=>import("./rose-pine-dawn-DHQR4-dF.js"),[]))},{id:"rose-pine-moon",displayName:"Ros Pine Moon",type:"dark",import:(()=>R(()=>import("./rose-pine-moon-D4_iv3hh.js"),[]))},{id:"slack-dark",displayName:"Slack Dark",type:"dark",import:(()=>R(()=>import("./slack-dark-BthQWCQV.js"),[]))},{id:"slack-ochin",displayName:"Slack Ochin",type:"light",import:(()=>R(()=>import("./slack-ochin-DqwNpetd.js"),[]))},{id:"snazzy-light",displayName:"Snazzy Light",type:"light",import:(()=>R(()=>import("./snazzy-light-Bw305WKR.js"),[]))},{id:"solarized-dark",displayName:"Solarized Dark",type:"dark",import:(()=>R(()=>import("./solarized-dark-DXbdFlpD.js"),[]))},{id:"solarized-light",displayName:"Solarized Light",type:"light",import:(()=>R(()=>import("./solarized-light-L9t79GZl.js"),[]))},{id:"synthwave-84",displayName:"Synthwave '84",type:"dark",import:(()=>R(()=>import("./synthwave-84-CbfX1IO0.js"),[]))},{id:"tokyo-night",displayName:"Tokyo Night",type:"dark",import:(()=>R(()=>import("./tokyo-night-hegEt444.js"),[]))},{id:"vesper",displayName:"Vesper",type:"dark",import:(()=>R(()=>import("./vesper-DU1UobuO.js"),[]))},{id:"vitesse-black",displayName:"Vitesse Black",type:"dark",import:(()=>R(()=>import("./vitesse-black-Bkuqu6BP.js"),[]))},{id:"vitesse-dark",displayName:"Vitesse Dark",type:"dark",import:(()=>R(()=>import("./vitesse-dark-D0r3Knsf.js"),[]))},{id:"vitesse-light",displayName:"Vitesse Light",type:"light",import:(()=>R(()=>import("./vitesse-light-CVO1_9PV.js"),[]))}],kA=Object.fromEntries(AA.map(t=>[t.id,t.import]));class hd extends Error{constructor(e){super(e),this.name="ShikiError"}}function xA(){return 2147483648}function CA(){return typeof performance<"u"?performance.now():Date.now()}const SA=(t,e)=>t+(e-t%e)%e;async function TA(t){let e,n;const r={};function i(f){n=f,r.HEAPU8=new Uint8Array(f),r.HEAPU32=new Uint32Array(f)}function s(f,g,y){r.HEAPU8.copyWithin(f,g,g+y)}function o(f){try{return e.grow(f-n.byteLength+65535>>>16),i(e.buffer),1}catch{}}function a(f){const g=r.HEAPU8.length;f=f>>>0;const y=xA();if(f>y)return!1;for(let w=1;w<=4;w*=2){let b=g*(1+.2/w);b=Math.min(b,f+100663296);const E=Math.min(y,SA(Math.max(f,b),65536));if(o(E))return!0}return!1}const l=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function c(f,g,y=1024){const w=g+y;let b=g;for(;f[b]&&!(b>=w);)++b;if(b-g>16&&f.buffer&&l)return l.decode(f.subarray(g,b));let E="";for(;g<b;){let A=f[g++];if(!(A&128)){E+=String.fromCharCode(A);continue}const v=f[g++]&63;if((A&224)===192){E+=String.fromCharCode((A&31)<<6|v);continue}const S=f[g++]&63;if((A&240)===224?A=(A&15)<<12|v<<6|S:A=(A&7)<<18|v<<12|S<<6|f[g++]&63,A<65536)E+=String.fromCharCode(A);else{const L=A-65536;E+=String.fromCharCode(55296|L>>10,56320|L&1023)}}return E}function d(f,g){return f?c(r.HEAPU8,f,g):""}const u={emscripten_get_now:CA,emscripten_memcpy_big:s,emscripten_resize_heap:a,fd_write:()=>0};async function h(){const g=await t({env:u,wasi_snapshot_preview1:u});e=g.memory,i(e.buffer),Object.assign(r,g),r.UTF8ToString=d}return await h(),r}var RA=Object.defineProperty,NA=(t,e,n)=>e in t?RA(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,rt=(t,e,n)=>NA(t,typeof e!="symbol"?e+"":e,n);let lt=null;function LA(t){throw new hd(t.UTF8ToString(t.getLastOnigError()))}class pa{constructor(e){rt(this,"utf16Length"),rt(this,"utf8Length"),rt(this,"utf16Value"),rt(this,"utf8Value"),rt(this,"utf16OffsetToUtf8"),rt(this,"utf8OffsetToUtf16");const n=e.length,r=pa._utf8ByteLength(e),i=r!==n,s=i?new Uint32Array(n+1):null;i&&(s[n]=r);const o=i?new Uint32Array(r+1):null;i&&(o[r]=n);const a=new Uint8Array(r);let l=0;for(let c=0;c<n;c++){const d=e.charCodeAt(c);let u=d,h=!1;if(d>=55296&&d<=56319&&c+1<n){const f=e.charCodeAt(c+1);f>=56320&&f<=57343&&(u=(d-55296<<10)+65536|f-56320,h=!0)}i&&(s[c]=l,h&&(s[c+1]=l),u<=127?o[l+0]=c:u<=2047?(o[l+0]=c,o[l+1]=c):u<=65535?(o[l+0]=c,o[l+1]=c,o[l+2]=c):(o[l+0]=c,o[l+1]=c,o[l+2]=c,o[l+3]=c)),u<=127?a[l++]=u:u<=2047?(a[l++]=192|(u&1984)>>>6,a[l++]=128|(u&63)>>>0):u<=65535?(a[l++]=224|(u&61440)>>>12,a[l++]=128|(u&4032)>>>6,a[l++]=128|(u&63)>>>0):(a[l++]=240|(u&1835008)>>>18,a[l++]=128|(u&258048)>>>12,a[l++]=128|(u&4032)>>>6,a[l++]=128|(u&63)>>>0),h&&c++}this.utf16Length=n,this.utf8Length=r,this.utf16Value=e,this.utf8Value=a,this.utf16OffsetToUtf8=s,this.utf8OffsetToUtf16=o}static _utf8ByteLength(e){let n=0;for(let r=0,i=e.length;r<i;r++){const s=e.charCodeAt(r);let o=s,a=!1;if(s>=55296&&s<=56319&&r+1<i){const l=e.charCodeAt(r+1);l>=56320&&l<=57343&&(o=(s-55296<<10)+65536|l-56320,a=!0)}o<=127?n+=1:o<=2047?n+=2:o<=65535?n+=3:n+=4,a&&r++}return n}createString(e){const n=e.omalloc(this.utf8Length);return e.HEAPU8.set(this.utf8Value,n),n}}const ga=class pn{constructor(e){if(rt(this,"id",++pn.LAST_ID),rt(this,"_onigBinding"),rt(this,"content"),rt(this,"utf16Length"),rt(this,"utf8Length"),rt(this,"utf16OffsetToUtf8"),rt(this,"utf8OffsetToUtf16"),rt(this,"ptr"),!lt)throw new hd("Must invoke loadWasm first.");this._onigBinding=lt,this.content=e;const n=new pa(e);this.utf16Length=n.utf16Length,this.utf8Length=n.utf8Length,this.utf16OffsetToUtf8=n.utf16OffsetToUtf8,this.utf8OffsetToUtf16=n.utf8OffsetToUtf16,this.utf8Length<1e4&&!pn._sharedPtrInUse?(pn._sharedPtr||(pn._sharedPtr=lt.omalloc(1e4)),pn._sharedPtrInUse=!0,lt.HEAPU8.set(n.utf8Value,pn._sharedPtr),this.ptr=pn._sharedPtr):this.ptr=n.createString(lt)}convertUtf8OffsetToUtf16(e){return this.utf8OffsetToUtf16?e<0?0:e>this.utf8Length?this.utf16Length:this.utf8OffsetToUtf16[e]:e}convertUtf16OffsetToUtf8(e){return this.utf16OffsetToUtf8?e<0?0:e>this.utf16Length?this.utf8Length:this.utf16OffsetToUtf8[e]:e}dispose(){this.ptr===pn._sharedPtr?pn._sharedPtrInUse=!1:this._onigBinding.ofree(this.ptr)}};rt(ga,"LAST_ID",0);rt(ga,"_sharedPtr",0);rt(ga,"_sharedPtrInUse",!1);let fm=ga;class IA{constructor(e){if(rt(this,"_onigBinding"),rt(this,"_ptr"),!lt)throw new hd("Must invoke loadWasm first.");const n=[],r=[];for(let a=0,l=e.length;a<l;a++){const c=new pa(e[a]);n[a]=c.createString(lt),r[a]=c.utf8Length}const i=lt.omalloc(4*e.length);lt.HEAPU32.set(n,i/4);const s=lt.omalloc(4*e.length);lt.HEAPU32.set(r,s/4);const o=lt.createOnigScanner(i,s,e.length);for(let a=0,l=e.length;a<l;a++)lt.ofree(n[a]);lt.ofree(s),lt.ofree(i),o===0&&LA(lt),this._onigBinding=lt,this._ptr=o}dispose(){this._onigBinding.freeOnigScanner(this._ptr)}findNextMatchSync(e,n,r){let i=0;if(typeof r=="number"&&(i=r),typeof e=="string"){e=new fm(e);const s=this._findNextMatchSync(e,n,!1,i);return e.dispose(),s}return this._findNextMatchSync(e,n,!1,i)}_findNextMatchSync(e,n,r,i){const s=this._onigBinding,o=s.findNextOnigScannerMatch(this._ptr,e.id,e.ptr,e.utf8Length,e.convertUtf16OffsetToUtf8(n),i);if(o===0)return null;const a=s.HEAPU32;let l=o/4;const c=a[l++],d=a[l++],u=[];for(let h=0;h<d;h++){const f=e.convertUtf8OffsetToUtf16(a[l++]),g=e.convertUtf8OffsetToUtf16(a[l++]);u[h]={start:f,end:g,length:g-f}}return{index:c,captureIndices:u}}}function DA(t){return typeof t.instantiator=="function"}function PA(t){return typeof t.default=="function"}function GA(t){return typeof t.data<"u"}function MA(t){return typeof Response<"u"&&t instanceof Response}function OA(t){return typeof ArrayBuffer<"u"&&(t instanceof ArrayBuffer||ArrayBuffer.isView(t))||typeof Buffer<"u"&&Buffer.isBuffer?.(t)||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer||typeof Uint32Array<"u"&&t instanceof Uint32Array}let js;function FA(t){if(js)return js;async function e(){lt=await TA(async n=>{let r=t;return r=await r,typeof r=="function"&&(r=await r(n)),typeof r=="function"&&(r=await r(n)),DA(r)?r=await r.instantiator(n):PA(r)?r=await r.default(n):(GA(r)&&(r=r.data),MA(r)?typeof WebAssembly.instantiateStreaming=="function"?r=await $A(r)(n):r=await zA(r)(n):OA(r)?r=await Ja(r)(n):r instanceof WebAssembly.Module?r=await Ja(r)(n):"default"in r&&r.default instanceof WebAssembly.Module&&(r=await Ja(r.default)(n))),"instance"in r&&(r=r.instance),"exports"in r&&(r=r.exports),r})}return js=e(),js}function Ja(t){return e=>WebAssembly.instantiate(t,e)}function $A(t){return e=>WebAssembly.instantiateStreaming(t,e)}function zA(t){return async e=>{const n=await t.arrayBuffer();return WebAssembly.instantiate(n,e)}}async function BA(t){return t&&await FA(t),{createScanner(e){return new IA(e.map(n=>typeof n=="string"?n:n.source))},createString(e){return new fm(e)}}}const VA=_A({langs:EA,themes:kA,engine:()=>BA(R(()=>import("./wasm-CG6Dc4jp.js"),[]))});let Hs=null,Qa=null;function UA(){const t=ge(!1);async function e(){return Hs?(t.value=!0,Hs):(Qa||(Qa=VA({themes:["github-dark","github-light"],langs:["javascript","typescript","python","bash","json","css","html"]})),Hs=await Qa,t.value=!0,Hs)}async function n(r,i="javascript",s="github-dark"){return(await e()).codeToHtml(r,{lang:i,theme:s})}return Xn(()=>{e()}),{isReady:t,highlight:n,initHighlighter:e}}const jA={class:"code-block-wrapper"},HA={key:0,class:"bg-gray-900 dark:bg-gray-950 rounded-lg p-4"},WA=["innerHTML"],qA={__name:"CodeBlock",props:{code:{type:String,required:!0},language:{type:String,default:"javascript"},customClass:{type:String,default:""}},setup(t){const e=t,{highlight:n}=UA(),{darkMode:r}=Cg(),i=ge(""),s=ge(!0),o=st(()=>r.value?"github-dark":"github-light");async function a(){s.value=!0;try{i.value=await n(e.code,e.language,o.value)}catch(l){console.error("Failed to highlight code:",l),i.value=`<pre class="bg-gray-900 rounded-lg p-4"><code>${e.code}</code></pre>`}finally{s.value=!1}}return Mt([()=>e.code,()=>e.language,o],a),Xn(a),(l,c)=>(Y(),ne("div",jA,[s.value?(Y(),ne("div",HA,[...c[0]||(c[0]=[p("div",{class:"animate-pulse"},[p("div",{class:"h-4 bg-gray-700 rounded w-3/4 mb-2"}),p("div",{class:"h-4 bg-gray-700 rounded w-1/2"})],-1)])])):(Y(),ne("div",{key:1,innerHTML:i.value,class:yt(["code-block rounded-lg overflow-x-auto",t.customClass])},null,10,WA))]))}},mt=Gr(qA,[["__scopeId","data-v-fdf7ed14"]]),KA={class:"relative"},XA={class:"hero-section"},ZA={class:"hero-container"},YA={class:"hero-title"},JA={class:"hero-subtitle"},QA={class:"hero-description"},ek={class:"hero-cta"},tk={href:"https://github.com/guinetik/graph-js",target:"_blank",class:"btn-secondary"},nk={class:"features-section"},rk={class:"features-grid"},ik={class:"feature-icon"},sk={class:"feature-title"},ok={class:"feature-description"},ak={class:"code-example-section"},lk={class:"code-example-container"},ck={class:"code-example-card"},dk={class:"code-example-header"},uk={class:"code-example-title"},hk=`npm install @guinetik/graph-js

import NetworkStats from '@guinetik/graph-js';

const network = [
  { source: 'Alice', target: 'Bob', weight: 1 },
  { source: 'Bob', target: 'Carol', weight: 2 },
  { source: 'Carol', target: 'Alice', weight: 1 }
];

const analyzer = new NetworkStats({ verbose: true });
const results = await analyzer.analyze(network, ['degree', 'eigenvector']);

console.log(results);
// Analysis runs in workers for optimal performance!`,fk={__name:"HomePage",setup(t){const{t:e}=An();return(n,r)=>{const i=Dl("router-link");return Y(),ne("div",KA,[p("div",XA,[p("div",ZA,[p("h1",YA,_(m(e)("home.hero.title")),1),p("p",JA,_(m(e)("home.hero.subtitle")),1),p("p",QA,_(m(e)("home.hero.description")),1),p("div",ek,[ke(i,{to:"/showcase",class:"btn-primary"},{default:Xe(()=>[Re("  "+_(m(e)("home.hero.cta")),1)]),_:1}),p("a",tk,"  "+_(m(e)("home.hero.github")),1)])])]),p("div",nk,[p("div",rk,[(Y(!0),ne(We,null,_n(m(e)("home.features"),(s,o)=>(Y(),ne("div",{key:o,class:"feature-card"},[p("div",ik,_(s.icon),1),p("h3",sk,_(s.title),1),p("p",ok,_(s.description),1)]))),128))])]),p("div",ak,[p("div",lk,[p("div",ck,[p("div",dk,[p("span",uk,_(m(e)("home.code.title")),1),r[0]||(r[0]=p("div",{class:"code-example-dots"},[p("div",{class:"code-dot-red"}),p("div",{class:"code-dot-yellow"}),p("div",{class:"code-dot-green"})],-1))]),ke(mt,{code:hk,language:"javascript"})])])])])}}},pk={class:"demo-layout"},gk={class:"demo-controls-content"},mk={class:"demo-graph"},yk=["aria-label"],vk={key:0,class:"text-2xl"},_k={key:1,class:"text-2xl"},fd={__name:"DemoLayout",setup(t,{expose:e}){const n=ge(!1),r=()=>{n.value=!n.value};return e({toggleControls:r,controlsVisible:n}),(i,s)=>(Y(),ne("div",pk,[p("aside",{class:yt(["demo-controls",n.value?"mobile-visible":"mobile-hidden"])},[p("div",gk,[Pl(i.$slots,"controls")])],2),p("main",mk,[Pl(i.$slots,"graph")]),p("button",{onClick:r,class:"demo-controls-toggle lg:hidden","aria-label":n.value?"Close controls":"Open controls"},[n.value?(Y(),ne("span",_k,"")):(Y(),ne("span",vk,""))],8,yk)]))}},bk={class:"layout-picker"},wk={class:"space-y-2"},Ek={class:"block text-sm font-medium text-secondary"},Ak=["value","disabled"],kk=["value"],xk=["disabled"],Ck={key:0},Sk={key:1},Tk={key:0,class:"info-box-yellow mt-3"},Rk={class:"text-xs text-yellow-800 dark:text-yellow-200"},Nk={__name:"LayoutPicker",props:{modelValue:{type:String,required:!0},availableLayouts:{type:Array,required:!0},loading:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},emits:["update:modelValue","apply"],setup(t,{emit:e}){const{t:n}=An(),r=t,i=st(()=>r.availableLayouts.find(s=>s.id===r.modelValue));return(s,o)=>(Y(),ne("div",bk,[p("div",wk,[p("label",Ek,_(m(n)("showcase.layoutPicker.chooseLayout")),1),p("select",{value:t.modelValue,onInput:o[0]||(o[0]=a=>s.$emit("update:modelValue",a.target.value)),disabled:t.disabled,class:"w-full bg-secondary text-primary border border-color px-3 py-2 rounded-md disabled:opacity-50"},[(Y(!0),ne(We,null,_n(t.availableLayouts,a=>(Y(),ne("option",{key:a.id,value:a.id},_(a.name),9,kk))),128))],40,Ak)]),p("button",{onClick:o[1]||(o[1]=a=>s.$emit("apply")),disabled:t.disabled||t.loading,class:"w-full bg-purple-600 hover:bg-purple-700 disabled:bg-gray-400 text-white px-4 py-3 rounded-md font-semibold transition-colors mt-3"},[t.loading?(Y(),ne("span",Sk,_(m(n)("showcase.layoutPicker.applyingButton")),1)):(Y(),ne("span",Ck,_(m(n)("showcase.layoutPicker.applyButton")),1))],8,xk),t.modelValue!=="none"&&i.value?(Y(),ne("div",Tk,[p("p",Rk,[p("strong",null,_(i.value.name)+":",1),Re(" "+_(i.value.description),1)])])):Pe("",!0)]))}},pd=Gr(Nk,[["__scopeId","data-v-49c14ca8"]]),Lk={class:"community-picker"},Ik={class:"space-y-2"},Dk={class:"block text-sm font-medium text-secondary"},Pk=["value","disabled"],Gk=["value"],Mk=["disabled"],Ok={key:0},Fk={key:1},$k={__name:"CommunityPicker",props:{modelValue:{type:String,required:!0},availableAlgorithms:{type:Array,required:!0},detecting:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},label:{type:String,default:""}},emits:["update:modelValue","detect"],setup(t,{emit:e}){const{t:n}=An();return(r,i)=>(Y(),ne("div",Lk,[p("div",Ik,[p("label",Dk,_(t.label||m(n)("showcase.communityPicker.chooseAlgorithm")),1),p("select",{value:t.modelValue,onInput:i[0]||(i[0]=s=>r.$emit("update:modelValue",s.target.value)),disabled:t.disabled,class:"w-full bg-secondary text-primary border border-color px-3 py-2 rounded-md disabled:opacity-50"},[(Y(!0),ne(We,null,_n(t.availableAlgorithms,s=>(Y(),ne("option",{key:s.id,value:s.id},_(s.name),9,Gk))),128))],40,Pk)]),p("button",{onClick:i[1]||(i[1]=s=>r.$emit("detect")),disabled:t.disabled||t.detecting,class:"w-full bg-orange-600 hover:bg-orange-700 disabled:bg-gray-400 text-white px-4 py-3 rounded-md font-semibold transition-colors mt-3"},[t.detecting?(Y(),ne("span",Fk,_(m(n)("showcase.communityPicker.detectingButton")),1)):(Y(),ne("span",Ok,_(m(n)("showcase.communityPicker.detectButton")),1))],8,Mk),Pl(r.$slots,"results",{},void 0,!0)]))}},pm=Gr($k,[["__scopeId","data-v-1b411c72"]]),zk={class:"network-analysis"},Bk={class:"bg-[var(--color-bg-secondary)] rounded-md p-4 space-y-2 mb-3"},Vk={class:"flex items-center justify-between mb-2"},Uk={class:"text-sm font-semibold text-primary"},jk={class:"space-y-2"},Hk=["checked"],Wk={class:"text-secondary"},qk=["checked"],Kk={class:"text-secondary"},Xk=["checked"],Zk={class:"text-secondary"},Yk=["checked"],Jk={class:"text-secondary"},Qk=["checked"],ex={class:"text-secondary"},tx=["checked"],nx={class:"text-secondary"},rx=["checked"],ix={class:"text-secondary"},sx=["checked"],ox={class:"text-secondary"},ax=["checked"],lx={class:"text-secondary"},cx={class:"space-y-2 mb-3"},dx={class:"block text-sm font-medium text-secondary"},ux=["value","disabled"],hx={value:""},fx={key:0,value:"degree"},px={key:1,value:"betweenness"},gx={key:2,value:"clustering"},mx={key:3,value:"eigenvector"},yx={key:4,value:"pagerank"},vx={key:5,value:"cliques"},_x={key:6,value:"closeness"},bx={key:7,value:"ego-density"},wx=["disabled"],Ex={key:0},Ax={key:1},kx={key:0,class:"mt-3 pt-3 border-t border-[var(--color-border)]"},xx={class:"flex items-center gap-2 text-sm cursor-pointer"},Cx=["checked"],Sx={class:"text-secondary"},Tx={class:"text-xs text-secondary mt-1 ml-6"},Rx={key:1,class:"mt-2"},Nx={class:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2"},Lx={class:"text-xs text-secondary mt-1 text-center"},Ix={__name:"NetworkAnalysis",props:{selectedMetrics:{type:Array,required:!0},sizeMetric:{type:String,default:""},analyzing:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},progress:{type:Number,default:0},showSpectralMetric:{type:Boolean,default:!1},hasCliques:{type:Boolean,default:!1},showCliqueEdges:{type:Boolean,default:!1}},emits:["update:selectedMetrics","update:sizeMetric","update:showCliqueEdges","analyze"],setup(t,{emit:e}){const{t:n}=An(),{showTooltipAt:r,hideTooltip:i}=Sg(),s=t,o=e,a=st(()=>{const u=["degree","betweenness","clustering","eigenvector","pagerank","cliques","closeness","ego-density"];return s.showSpectralMetric&&u.push("eigenvector-laplacian"),u}),l=st(()=>a.value.every(u=>s.selectedMetrics.includes(u))),c=()=>{l.value?o("update:selectedMetrics",[]):o("update:selectedMetrics",[...a.value])},d=(u,h)=>{let f=[...s.selectedMetrics];h?f.includes(u)||f.push(u):f=f.filter(g=>g!==u),o("update:selectedMetrics",f)};return(u,h)=>(Y(),ne("div",zk,[p("div",Bk,[p("div",Vk,[p("h3",Uk,_(m(n)("showcase.networkAnalysis.metricsTitle")),1),p("button",{onClick:c,class:"text-xs text-purple-600 dark:text-purple-400 hover:text-purple-700 dark:hover:text-purple-300 font-medium transition-colors"},_(l.value?m(n)("showcase.networkAnalysis.unselectAll"):m(n)("showcase.networkAnalysis.selectAll")),1)]),p("div",jk,[p("label",{class:"metric-checkbox-label",onMouseenter:h[1]||(h[1]=f=>m(r)(f,m(n)("showcase.networkAnalysis.degreeDescription"))),onMouseleave:h[2]||(h[2]=(...f)=>m(i)&&m(i)(...f))},[p("input",{type:"checkbox",checked:t.selectedMetrics.includes("degree"),onChange:h[0]||(h[0]=f=>d("degree",f.target.checked)),class:"metric-checkbox"},null,40,Hk),h[30]||(h[30]=p("span",{class:"metric-checkbox-custom"},null,-1)),p("span",Wk,_(m(n)("showcase.networkAnalysis.degreeCentrality")),1)],32),p("label",{class:"metric-checkbox-label tooltip-container",onMouseenter:h[4]||(h[4]=f=>m(r)(f,m(n)("showcase.networkAnalysis.betweennessDescription"))),onMouseleave:h[5]||(h[5]=(...f)=>m(i)&&m(i)(...f))},[p("input",{type:"checkbox",checked:t.selectedMetrics.includes("betweenness"),onChange:h[3]||(h[3]=f=>d("betweenness",f.target.checked)),class:"metric-checkbox"},null,40,qk),h[31]||(h[31]=p("span",{class:"metric-checkbox-custom"},null,-1)),p("span",Kk,_(m(n)("showcase.networkAnalysis.betweennessCentrality")),1)],32),p("label",{class:"metric-checkbox-label",onMouseenter:h[7]||(h[7]=f=>m(r)(f,m(n)("showcase.networkAnalysis.clusteringDescription"))),onMouseleave:h[8]||(h[8]=(...f)=>m(i)&&m(i)(...f))},[p("input",{type:"checkbox",checked:t.selectedMetrics.includes("clustering"),onChange:h[6]||(h[6]=f=>d("clustering",f.target.checked)),class:"metric-checkbox"},null,40,Xk),h[32]||(h[32]=p("span",{class:"metric-checkbox-custom"},null,-1)),p("span",Zk,_(m(n)("showcase.networkAnalysis.clusteringCoefficient")),1)],32),p("label",{class:"metric-checkbox-label",onMouseenter:h[10]||(h[10]=f=>m(r)(f,m(n)("showcase.networkAnalysis.eigenvectorDescription"))),onMouseleave:h[11]||(h[11]=(...f)=>m(i)&&m(i)(...f))},[p("input",{type:"checkbox",checked:t.selectedMetrics.includes("eigenvector"),onChange:h[9]||(h[9]=f=>d("eigenvector",f.target.checked)),class:"metric-checkbox"},null,40,Yk),h[33]||(h[33]=p("span",{class:"metric-checkbox-custom"},null,-1)),p("span",Jk,_(m(n)("showcase.networkAnalysis.eigenvectorCentrality")),1)],32),p("label",{class:"metric-checkbox-label",onMouseenter:h[13]||(h[13]=f=>m(r)(f,m(n)("showcase.networkAnalysis.pagerankDescription"))),onMouseleave:h[14]||(h[14]=(...f)=>m(i)&&m(i)(...f))},[p("input",{type:"checkbox",checked:t.selectedMetrics.includes("pagerank"),onChange:h[12]||(h[12]=f=>d("pagerank",f.target.checked)),class:"metric-checkbox"},null,40,Qk),h[34]||(h[34]=p("span",{class:"metric-checkbox-custom"},null,-1)),p("span",ex,_(m(n)("showcase.networkAnalysis.pageRankCentrality")),1)],32),p("label",{class:"metric-checkbox-label",onMouseenter:h[16]||(h[16]=f=>m(r)(f,m(n)("showcase.networkAnalysis.cliquesDescription"))),onMouseleave:h[17]||(h[17]=(...f)=>m(i)&&m(i)(...f))},[p("input",{type:"checkbox",checked:t.selectedMetrics.includes("cliques"),onChange:h[15]||(h[15]=f=>d("cliques",f.target.checked)),class:"metric-checkbox"},null,40,tx),h[35]||(h[35]=p("span",{class:"metric-checkbox-custom"},null,-1)),p("span",nx,_(m(n)("showcase.networkAnalysis.cliqueCount")),1)],32),p("label",{class:"metric-checkbox-label",onMouseenter:h[19]||(h[19]=f=>m(r)(f,m(n)("showcase.networkAnalysis.closenessDescription"))),onMouseleave:h[20]||(h[20]=(...f)=>m(i)&&m(i)(...f))},[p("input",{type:"checkbox",checked:t.selectedMetrics.includes("closeness"),onChange:h[18]||(h[18]=f=>d("closeness",f.target.checked)),class:"metric-checkbox"},null,40,rx),h[36]||(h[36]=p("span",{class:"metric-checkbox-custom"},null,-1)),p("span",ix,_(m(n)("showcase.networkAnalysis.closenessCentrality")),1)],32),p("label",{class:"metric-checkbox-label",onMouseenter:h[22]||(h[22]=f=>m(r)(f,m(n)("showcase.networkAnalysis.egoDensityDescription"))),onMouseleave:h[23]||(h[23]=(...f)=>m(i)&&m(i)(...f))},[p("input",{type:"checkbox",checked:t.selectedMetrics.includes("ego-density"),onChange:h[21]||(h[21]=f=>d("ego-density",f.target.checked)),class:"metric-checkbox"},null,40,sx),h[37]||(h[37]=p("span",{class:"metric-checkbox-custom"},null,-1)),p("span",ox,_(m(n)("showcase.networkAnalysis.egoDensity")),1)],32),t.showSpectralMetric?(Y(),ne("label",{key:0,class:"metric-checkbox-label",onMouseenter:h[25]||(h[25]=f=>m(r)(f,m(n)("showcase.networkAnalysis.eigenvectorLaplacianDescription"))),onMouseleave:h[26]||(h[26]=(...f)=>m(i)&&m(i)(...f))},[p("input",{type:"checkbox",checked:t.selectedMetrics.includes("eigenvector-laplacian"),onChange:h[24]||(h[24]=f=>d("eigenvector-laplacian",f.target.checked)),class:"metric-checkbox"},null,40,ax),h[38]||(h[38]=p("span",{class:"metric-checkbox-custom"},null,-1)),p("span",lx,_(m(n)("showcase.networkAnalysis.eigenvectorLaplacian")),1)],32)):Pe("",!0)])]),p("div",cx,[p("label",dx,_(m(n)("showcase.networkAnalysis.nodeSizeLabel")),1),p("select",{value:t.sizeMetric,onInput:h[27]||(h[27]=f=>u.$emit("update:sizeMetric",f.target.value)),disabled:t.disabled||t.selectedMetrics.length===0,class:"w-full bg-secondary text-primary border border-color px-3 py-2 rounded-md disabled:opacity-50"},[p("option",hx,_(m(n)("showcase.networkAnalysis.selectMetric")),1),t.selectedMetrics.includes("degree")?(Y(),ne("option",fx,_(m(n)("showcase.networkAnalysis.degreeName")),1)):Pe("",!0),t.selectedMetrics.includes("betweenness")?(Y(),ne("option",px,_(m(n)("showcase.networkAnalysis.betweennessName")),1)):Pe("",!0),t.selectedMetrics.includes("clustering")?(Y(),ne("option",gx,_(m(n)("showcase.networkAnalysis.clusteringName")),1)):Pe("",!0),t.selectedMetrics.includes("eigenvector")?(Y(),ne("option",mx,_(m(n)("showcase.networkAnalysis.eigenvectorName")),1)):Pe("",!0),t.selectedMetrics.includes("pagerank")?(Y(),ne("option",yx,_(m(n)("showcase.networkAnalysis.pageRankName")),1)):Pe("",!0),t.selectedMetrics.includes("cliques")?(Y(),ne("option",vx,_(m(n)("showcase.networkAnalysis.cliquesName")),1)):Pe("",!0),t.selectedMetrics.includes("closeness")?(Y(),ne("option",_x,_(m(n)("showcase.networkAnalysis.closenessName")),1)):Pe("",!0),t.selectedMetrics.includes("ego-density")?(Y(),ne("option",bx,_(m(n)("showcase.networkAnalysis.egoDensityName")),1)):Pe("",!0)],40,ux)]),p("button",{onClick:h[28]||(h[28]=f=>u.$emit("analyze")),disabled:t.disabled||t.analyzing||t.selectedMetrics.length===0,class:"w-full bg-purple-600 hover:bg-purple-700 disabled:bg-gray-400 text-white px-4 py-3 rounded-md font-semibold transition-colors"},[t.analyzing?(Y(),ne("span",Ax,_(m(n)("showcase.networkAnalysis.analyzingButton")),1)):(Y(),ne("span",Ex,_(m(n)("showcase.networkAnalysis.analyzeButton")),1))],8,wx),t.hasCliques?(Y(),ne("div",kx,[p("label",xx,[p("input",{type:"checkbox",checked:t.showCliqueEdges,onChange:h[29]||(h[29]=f=>u.$emit("update:showCliqueEdges",f.target.checked)),class:"rounded"},null,40,Cx),p("span",Sx,_(m(n)("showcase.networkAnalysis.highlightCliqueEdges")),1)]),p("p",Tx,_(m(n)("showcase.networkAnalysis.cliqueEdgesDescription")),1)])):Pe("",!0),t.analyzing&&t.progress>0?(Y(),ne("div",Rx,[p("div",Nx,[p("div",{class:"bg-purple-600 h-2 rounded-full transition-all duration-300",style:Es({width:`${t.progress*100}%`})},null,4)]),p("p",Lx,_(Math.round(t.progress*100))+"% ",1)])):Pe("",!0)]))}},gd=Gr(Ix,[["__scopeId","data-v-6e3ad092"]]);function go(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Dx(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function gm(t){let e,n,r;t.length!==2?(e=go,n=(a,l)=>go(t(a),l),r=(a,l)=>t(a)-l):(e=t===go||t===Dx?t:Px,n=t,r=t);function i(a,l,c=0,d=a.length){if(c<d){if(e(l,l)!==0)return d;do{const u=c+d>>>1;n(a[u],l)<0?c=u+1:d=u}while(c<d)}return c}function s(a,l,c=0,d=a.length){if(c<d){if(e(l,l)!==0)return d;do{const u=c+d>>>1;n(a[u],l)<=0?c=u+1:d=u}while(c<d)}return c}function o(a,l,c=0,d=a.length){const u=i(a,l,c,d-1);return u>c&&r(a[u-1],l)>-r(a[u],l)?u-1:u}return{left:i,center:o,right:s}}function Px(){return 0}function Gx(t){return t===null?NaN:+t}const Mx=gm(go),Ox=Mx.right;gm(Gx).center;class _h extends Map{constructor(e,n=zx){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(bh(this,e))}has(e){return super.has(bh(this,e))}set(e,n){return super.set(Fx(this,e),n)}delete(e){return super.delete($x(this,e))}}function bh({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function Fx({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function $x({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function zx(t){return t!==null&&typeof t=="object"?t.valueOf():t}const Bx=Math.sqrt(50),Vx=Math.sqrt(10),Ux=Math.sqrt(2);function Bo(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),o=s>=Bx?10:s>=Vx?5:s>=Ux?2:1;let a,l,c;return i<0?(c=Math.pow(10,-i)/o,a=Math.round(t*c),l=Math.round(e*c),a/c<t&&++a,l/c>e&&--l,c=-c):(c=Math.pow(10,i)*o,a=Math.round(t/c),l=Math.round(e/c),a*c<t&&++a,l*c>e&&--l),l<a&&.5<=n&&n<2?Bo(t,e,n*2):[a,l,c]}function jx(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,s,o]=r?Bo(e,t,n):Bo(t,e,n);if(!(s>=i))return[];const a=s-i+1,l=new Array(a);if(r)if(o<0)for(let c=0;c<a;++c)l[c]=(s-c)/-o;else for(let c=0;c<a;++c)l[c]=(s-c)*o;else if(o<0)for(let c=0;c<a;++c)l[c]=(i+c)/-o;else for(let c=0;c<a;++c)l[c]=(i+c)*o;return l}function oc(t,e,n){return e=+e,t=+t,n=+n,Bo(t,e,n)[2]}function Hx(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?oc(e,t,n):oc(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}var Wx={value:()=>{}};function Rs(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new mo(n)}function mo(t){this._=t}function qx(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}mo.prototype=Rs.prototype={constructor:mo,on:function(t,e){var n=this._,r=qx(t+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(t=r[s]).type)&&(i=Kx(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<o;)if(i=(t=r[s]).type)n[i]=wh(n[i],t.name,e);else if(e==null)for(i in n)n[i]=wh(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new mo(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=this._[t],r=0,i=s.length;r<i;++r)s[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,s=r.length;i<s;++i)r[i].value.apply(e,n)}};function Kx(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function wh(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=Wx,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var ac="http://www.w3.org/1999/xhtml";const Eh={svg:"http://www.w3.org/2000/svg",xhtml:ac,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ma(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),Eh.hasOwnProperty(e)?{space:Eh[e],local:t}:t}function Xx(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===ac&&e.documentElement.namespaceURI===ac?e.createElement(t):e.createElementNS(n,t)}}function Zx(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function mm(t){var e=ma(t);return(e.local?Zx:Xx)(e)}function Yx(){}function md(t){return t==null?Yx:function(){return this.querySelector(t)}}function Jx(t){typeof t!="function"&&(t=md(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],o=s.length,a=r[i]=new Array(o),l,c,d=0;d<o;++d)(l=s[d])&&(c=t.call(l,l.__data__,d,s))&&("__data__"in l&&(c.__data__=l.__data__),a[d]=c);return new Vt(r,this._parents)}function Qx(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function eC(){return[]}function ym(t){return t==null?eC:function(){return this.querySelectorAll(t)}}function tC(t){return function(){return Qx(t.apply(this,arguments))}}function nC(t){typeof t=="function"?t=tC(t):t=ym(t);for(var e=this._groups,n=e.length,r=[],i=[],s=0;s<n;++s)for(var o=e[s],a=o.length,l,c=0;c<a;++c)(l=o[c])&&(r.push(t.call(l,l.__data__,c,o)),i.push(l));return new Vt(r,i)}function vm(t){return function(){return this.matches(t)}}function _m(t){return function(e){return e.matches(t)}}var rC=Array.prototype.find;function iC(t){return function(){return rC.call(this.children,t)}}function sC(){return this.firstElementChild}function oC(t){return this.select(t==null?sC:iC(typeof t=="function"?t:_m(t)))}var aC=Array.prototype.filter;function lC(){return Array.from(this.children)}function cC(t){return function(){return aC.call(this.children,t)}}function dC(t){return this.selectAll(t==null?lC:cC(typeof t=="function"?t:_m(t)))}function uC(t){typeof t!="function"&&(t=vm(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],o=s.length,a=r[i]=[],l,c=0;c<o;++c)(l=s[c])&&t.call(l,l.__data__,c,s)&&a.push(l);return new Vt(r,this._parents)}function bm(t){return new Array(t.length)}function hC(){return new Vt(this._enter||this._groups.map(bm),this._parents)}function Vo(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}Vo.prototype={constructor:Vo,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function fC(t){return function(){return t}}function pC(t,e,n,r,i,s){for(var o=0,a,l=e.length,c=s.length;o<c;++o)(a=e[o])?(a.__data__=s[o],r[o]=a):n[o]=new Vo(t,s[o]);for(;o<l;++o)(a=e[o])&&(i[o]=a)}function gC(t,e,n,r,i,s,o){var a,l,c=new Map,d=e.length,u=s.length,h=new Array(d),f;for(a=0;a<d;++a)(l=e[a])&&(h[a]=f=o.call(l,l.__data__,a,e)+"",c.has(f)?i[a]=l:c.set(f,l));for(a=0;a<u;++a)f=o.call(t,s[a],a,s)+"",(l=c.get(f))?(r[a]=l,l.__data__=s[a],c.delete(f)):n[a]=new Vo(t,s[a]);for(a=0;a<d;++a)(l=e[a])&&c.get(h[a])===l&&(i[a]=l)}function mC(t){return t.__data__}function yC(t,e){if(!arguments.length)return Array.from(this,mC);var n=e?gC:pC,r=this._parents,i=this._groups;typeof t!="function"&&(t=fC(t));for(var s=i.length,o=new Array(s),a=new Array(s),l=new Array(s),c=0;c<s;++c){var d=r[c],u=i[c],h=u.length,f=vC(t.call(d,d&&d.__data__,c,r)),g=f.length,y=a[c]=new Array(g),w=o[c]=new Array(g),b=l[c]=new Array(h);n(d,u,y,w,b,f,e);for(var E=0,A=0,v,S;E<g;++E)if(v=y[E]){for(E>=A&&(A=E+1);!(S=w[A])&&++A<g;);v._next=S||null}}return o=new Vt(o,r),o._enter=a,o._exit=l,o}function vC(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function _C(){return new Vt(this._exit||this._groups.map(bm),this._parents)}function bC(t,e,n){var r=this.enter(),i=this,s=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function wC(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,s=r.length,o=Math.min(i,s),a=new Array(i),l=0;l<o;++l)for(var c=n[l],d=r[l],u=c.length,h=a[l]=new Array(u),f,g=0;g<u;++g)(f=c[g]||d[g])&&(h[g]=f);for(;l<i;++l)a[l]=n[l];return new Vt(a,this._parents)}function EC(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,s=r[i],o;--i>=0;)(o=r[i])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function AC(t){t||(t=kC);function e(u,h){return u&&h?t(u.__data__,h.__data__):!u-!h}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o=n[s],a=o.length,l=i[s]=new Array(a),c,d=0;d<a;++d)(c=o[d])&&(l[d]=c);l.sort(e)}return new Vt(i,this._parents).order()}function kC(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function xC(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function CC(){return Array.from(this)}function SC(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function TC(){let t=0;for(const e of this)++t;return t}function RC(){return!this.node()}function NC(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],s=0,o=i.length,a;s<o;++s)(a=i[s])&&t.call(a,a.__data__,s,i);return this}function LC(t){return function(){this.removeAttribute(t)}}function IC(t){return function(){this.removeAttributeNS(t.space,t.local)}}function DC(t,e){return function(){this.setAttribute(t,e)}}function PC(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function GC(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function MC(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function OC(t,e){var n=ma(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?IC:LC:typeof e=="function"?n.local?MC:GC:n.local?PC:DC)(n,e))}function wm(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function FC(t){return function(){this.style.removeProperty(t)}}function $C(t,e,n){return function(){this.style.setProperty(t,e,n)}}function zC(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function BC(t,e,n){return arguments.length>1?this.each((e==null?FC:typeof e=="function"?zC:$C)(t,e,n??"")):pi(this.node(),t)}function pi(t,e){return t.style.getPropertyValue(e)||wm(t).getComputedStyle(t,null).getPropertyValue(e)}function VC(t){return function(){delete this[t]}}function UC(t,e){return function(){this[t]=e}}function jC(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function HC(t,e){return arguments.length>1?this.each((e==null?VC:typeof e=="function"?jC:UC)(t,e)):this.node()[t]}function Em(t){return t.trim().split(/^|\s+/)}function yd(t){return t.classList||new Am(t)}function Am(t){this._node=t,this._names=Em(t.getAttribute("class")||"")}Am.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function km(t,e){for(var n=yd(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function xm(t,e){for(var n=yd(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function WC(t){return function(){km(this,t)}}function qC(t){return function(){xm(this,t)}}function KC(t,e){return function(){(e.apply(this,arguments)?km:xm)(this,t)}}function XC(t,e){var n=Em(t+"");if(arguments.length<2){for(var r=yd(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?KC:e?WC:qC)(n,e))}function ZC(){this.textContent=""}function YC(t){return function(){this.textContent=t}}function JC(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function QC(t){return arguments.length?this.each(t==null?ZC:(typeof t=="function"?JC:YC)(t)):this.node().textContent}function eS(){this.innerHTML=""}function tS(t){return function(){this.innerHTML=t}}function nS(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function rS(t){return arguments.length?this.each(t==null?eS:(typeof t=="function"?nS:tS)(t)):this.node().innerHTML}function iS(){this.nextSibling&&this.parentNode.appendChild(this)}function sS(){return this.each(iS)}function oS(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function aS(){return this.each(oS)}function lS(t){var e=typeof t=="function"?t:mm(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function cS(){return null}function dS(t,e){var n=typeof t=="function"?t:mm(t),r=e==null?cS:typeof e=="function"?e:md(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function uS(){var t=this.parentNode;t&&t.removeChild(this)}function hS(){return this.each(uS)}function fS(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function pS(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function gS(t){return this.select(t?pS:fS)}function mS(t){return arguments.length?this.property("__data__",t):this.node().__data__}function yS(t){return function(e){t.call(this,e,this.__data__)}}function vS(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function _S(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,s;n<i;++n)s=e[n],(!t.type||s.type===t.type)&&s.name===t.name?this.removeEventListener(s.type,s.listener,s.options):e[++r]=s;++r?e.length=r:delete this.__on}}}function bS(t,e,n){return function(){var r=this.__on,i,s=yS(e);if(r){for(var o=0,a=r.length;o<a;++o)if((i=r[o]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=e;return}}this.addEventListener(t.type,s,n),i={type:t.type,name:t.name,value:e,listener:s,options:n},r?r.push(i):this.__on=[i]}}function wS(t,e,n){var r=vS(t+""),i,s=r.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,c=a.length,d;l<c;++l)for(i=0,d=a[l];i<s;++i)if((o=r[i]).type===d.type&&o.name===d.name)return d.value}return}for(a=e?bS:_S,i=0;i<s;++i)this.each(a(r[i],e,n));return this}function Cm(t,e,n){var r=wm(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function ES(t,e){return function(){return Cm(this,t,e)}}function AS(t,e){return function(){return Cm(this,t,e.apply(this,arguments))}}function kS(t,e){return this.each((typeof e=="function"?AS:ES)(t,e))}function*xS(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,s=r.length,o;i<s;++i)(o=r[i])&&(yield o)}var Sm=[null];function Vt(t,e){this._groups=t,this._parents=e}function Ns(){return new Vt([[document.documentElement]],Sm)}function CS(){return this}Vt.prototype=Ns.prototype={constructor:Vt,select:Jx,selectAll:nC,selectChild:oC,selectChildren:dC,filter:uC,data:yC,enter:hC,exit:_C,join:bC,merge:wC,selection:CS,order:EC,sort:AC,call:xC,nodes:CC,node:SC,size:TC,empty:RC,each:NC,attr:OC,style:BC,property:HC,classed:XC,text:QC,html:rS,raise:sS,lower:aS,append:lS,insert:dS,remove:hS,clone:gS,datum:mS,on:wS,dispatch:kS,[Symbol.iterator]:xS};function Pt(t){return typeof t=="string"?new Vt([[document.querySelector(t)]],[document.documentElement]):new Vt([[t]],Sm)}function SS(t){let e;for(;e=t.sourceEvent;)t=e;return t}function Pn(t,e){if(t=SS(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}const TS={passive:!1},ms={capture:!0,passive:!1};function el(t){t.stopImmediatePropagation()}function ri(t){t.preventDefault(),t.stopImmediatePropagation()}function Tm(t){var e=t.document.documentElement,n=Pt(t).on("dragstart.drag",ri,ms);"onselectstart"in e?n.on("selectstart.drag",ri,ms):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function Rm(t,e){var n=t.document.documentElement,r=Pt(t).on("dragstart.drag",null);e&&(r.on("click.drag",ri,ms),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Ws=t=>()=>t;function lc(t,{sourceEvent:e,subject:n,target:r,identifier:i,active:s,x:o,y:a,dx:l,dy:c,dispatch:d}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:o,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:d}})}lc.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function RS(t){return!t.ctrlKey&&!t.button}function NS(){return this.parentNode}function LS(t,e){return e??{x:t.x,y:t.y}}function IS(){return navigator.maxTouchPoints||"ontouchstart"in this}function DS(){var t=RS,e=NS,n=LS,r=IS,i={},s=Rs("start","drag","end"),o=0,a,l,c,d,u=0;function h(v){v.on("mousedown.drag",f).filter(r).on("touchstart.drag",w).on("touchmove.drag",b,TS).on("touchend.drag touchcancel.drag",E).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function f(v,S){if(!(d||!t.call(this,v,S))){var L=A(this,e.call(this,v,S),v,S,"mouse");L&&(Pt(v.view).on("mousemove.drag",g,ms).on("mouseup.drag",y,ms),Tm(v.view),el(v),c=!1,a=v.clientX,l=v.clientY,L("start",v))}}function g(v){if(ri(v),!c){var S=v.clientX-a,L=v.clientY-l;c=S*S+L*L>u}i.mouse("drag",v)}function y(v){Pt(v.view).on("mousemove.drag mouseup.drag",null),Rm(v.view,c),ri(v),i.mouse("end",v)}function w(v,S){if(t.call(this,v,S)){var L=v.changedTouches,G=e.call(this,v,S),V=L.length,F,$;for(F=0;F<V;++F)($=A(this,G,v,S,L[F].identifier,L[F]))&&(el(v),$("start",v,L[F]))}}function b(v){var S=v.changedTouches,L=S.length,G,V;for(G=0;G<L;++G)(V=i[S[G].identifier])&&(ri(v),V("drag",v,S[G]))}function E(v){var S=v.changedTouches,L=S.length,G,V;for(d&&clearTimeout(d),d=setTimeout(function(){d=null},500),G=0;G<L;++G)(V=i[S[G].identifier])&&(el(v),V("end",v,S[G]))}function A(v,S,L,G,V,F){var $=s.copy(),H=Pn(F||L,S),z,N,k;if((k=n.call(v,new lc("beforestart",{sourceEvent:L,target:h,identifier:V,active:o,x:H[0],y:H[1],dx:0,dy:0,dispatch:$}),G))!=null)return z=k.x-H[0]||0,N=k.y-H[1]||0,function I(C,x,O){var X=H,re;switch(C){case"start":i[V]=I,re=o++;break;case"end":delete i[V],--o;case"drag":H=Pn(O||x,S),re=o;break}$.call(C,v,new lc(C,{sourceEvent:x,subject:k,target:h,identifier:V,active:re,x:H[0]+z,y:H[1]+N,dx:H[0]-X[0],dy:H[1]-X[1],dispatch:$}),G)}}return h.filter=function(v){return arguments.length?(t=typeof v=="function"?v:Ws(!!v),h):t},h.container=function(v){return arguments.length?(e=typeof v=="function"?v:Ws(v),h):e},h.subject=function(v){return arguments.length?(n=typeof v=="function"?v:Ws(v),h):n},h.touchable=function(v){return arguments.length?(r=typeof v=="function"?v:Ws(!!v),h):r},h.on=function(){var v=s.on.apply(s,arguments);return v===s?h:v},h.clickDistance=function(v){return arguments.length?(u=(v=+v)*v,h):Math.sqrt(u)},h}function vd(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Nm(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Ls(){}var ys=.7,Uo=1/ys,ii="\\s*([+-]?\\d+)\\s*",vs="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",wn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",PS=/^#([0-9a-f]{3,8})$/,GS=new RegExp(`^rgb\\(${ii},${ii},${ii}\\)$`),MS=new RegExp(`^rgb\\(${wn},${wn},${wn}\\)$`),OS=new RegExp(`^rgba\\(${ii},${ii},${ii},${vs}\\)$`),FS=new RegExp(`^rgba\\(${wn},${wn},${wn},${vs}\\)$`),$S=new RegExp(`^hsl\\(${vs},${wn},${wn}\\)$`),zS=new RegExp(`^hsla\\(${vs},${wn},${wn},${vs}\\)$`),Ah={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};vd(Ls,Dr,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:kh,formatHex:kh,formatHex8:BS,formatHsl:VS,formatRgb:xh,toString:xh});function kh(){return this.rgb().formatHex()}function BS(){return this.rgb().formatHex8()}function VS(){return Lm(this).formatHsl()}function xh(){return this.rgb().formatRgb()}function Dr(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=PS.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?Ch(e):n===3?new Gt(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?qs(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?qs(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=GS.exec(t))?new Gt(e[1],e[2],e[3],1):(e=MS.exec(t))?new Gt(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=OS.exec(t))?qs(e[1],e[2],e[3],e[4]):(e=FS.exec(t))?qs(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=$S.exec(t))?Rh(e[1],e[2]/100,e[3]/100,1):(e=zS.exec(t))?Rh(e[1],e[2]/100,e[3]/100,e[4]):Ah.hasOwnProperty(t)?Ch(Ah[t]):t==="transparent"?new Gt(NaN,NaN,NaN,0):null}function Ch(t){return new Gt(t>>16&255,t>>8&255,t&255,1)}function qs(t,e,n,r){return r<=0&&(t=e=n=NaN),new Gt(t,e,n,r)}function US(t){return t instanceof Ls||(t=Dr(t)),t?(t=t.rgb(),new Gt(t.r,t.g,t.b,t.opacity)):new Gt}function cc(t,e,n,r){return arguments.length===1?US(t):new Gt(t,e,n,r??1)}function Gt(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}vd(Gt,cc,Nm(Ls,{brighter(t){return t=t==null?Uo:Math.pow(Uo,t),new Gt(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?ys:Math.pow(ys,t),new Gt(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Gt(Nr(this.r),Nr(this.g),Nr(this.b),jo(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Sh,formatHex:Sh,formatHex8:jS,formatRgb:Th,toString:Th}));function Sh(){return`#${Sr(this.r)}${Sr(this.g)}${Sr(this.b)}`}function jS(){return`#${Sr(this.r)}${Sr(this.g)}${Sr(this.b)}${Sr((isNaN(this.opacity)?1:this.opacity)*255)}`}function Th(){const t=jo(this.opacity);return`${t===1?"rgb(":"rgba("}${Nr(this.r)}, ${Nr(this.g)}, ${Nr(this.b)}${t===1?")":`, ${t})`}`}function jo(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Nr(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Sr(t){return t=Nr(t),(t<16?"0":"")+t.toString(16)}function Rh(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new nn(t,e,n,r)}function Lm(t){if(t instanceof nn)return new nn(t.h,t.s,t.l,t.opacity);if(t instanceof Ls||(t=Dr(t)),!t)return new nn;if(t instanceof nn)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),s=Math.max(e,n,r),o=NaN,a=s-i,l=(s+i)/2;return a?(e===s?o=(n-r)/a+(n<r)*6:n===s?o=(r-e)/a+2:o=(e-n)/a+4,a/=l<.5?s+i:2-s-i,o*=60):a=l>0&&l<1?0:o,new nn(o,a,l,t.opacity)}function HS(t,e,n,r){return arguments.length===1?Lm(t):new nn(t,e,n,r??1)}function nn(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}vd(nn,HS,Nm(Ls,{brighter(t){return t=t==null?Uo:Math.pow(Uo,t),new nn(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?ys:Math.pow(ys,t),new nn(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Gt(tl(t>=240?t-240:t+120,i,r),tl(t,i,r),tl(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new nn(Nh(this.h),Ks(this.s),Ks(this.l),jo(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=jo(this.opacity);return`${t===1?"hsl(":"hsla("}${Nh(this.h)}, ${Ks(this.s)*100}%, ${Ks(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Nh(t){return t=(t||0)%360,t<0?t+360:t}function Ks(t){return Math.max(0,Math.min(1,t||0))}function tl(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const _d=t=>()=>t;function WS(t,e){return function(n){return t+n*e}}function qS(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function KS(t){return(t=+t)==1?Im:function(e,n){return n-e?qS(e,n,t):_d(isNaN(e)?n:e)}}function Im(t,e){var n=e-t;return n?WS(t,n):_d(isNaN(t)?e:t)}const Ho=(function t(e){var n=KS(e);function r(i,s){var o=n((i=cc(i)).r,(s=cc(s)).r),a=n(i.g,s.g),l=n(i.b,s.b),c=Im(i.opacity,s.opacity);return function(d){return i.r=o(d),i.g=a(d),i.b=l(d),i.opacity=c(d),i+""}}return r.gamma=t,r})(1);function XS(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=t[i]*(1-s)+e[i]*s;return r}}function ZS(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function YS(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),s=new Array(n),o;for(o=0;o<r;++o)i[o]=ya(t[o],e[o]);for(;o<n;++o)s[o]=e[o];return function(a){for(o=0;o<r;++o)s[o]=i[o](a);return s}}function JS(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function tn(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function QS(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=ya(t[i],e[i]):r[i]=e[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var dc=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,nl=new RegExp(dc.source,"g");function eT(t){return function(){return t}}function tT(t){return function(e){return t(e)+""}}function Dm(t,e){var n=dc.lastIndex=nl.lastIndex=0,r,i,s,o=-1,a=[],l=[];for(t=t+"",e=e+"";(r=dc.exec(t))&&(i=nl.exec(e));)(s=i.index)>n&&(s=e.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,l.push({i:o,x:tn(r,i)})),n=nl.lastIndex;return n<e.length&&(s=e.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?l[0]?tT(l[0].x):eT(e):(e=l.length,function(c){for(var d=0,u;d<e;++d)a[(u=l[d]).i]=u.x(c);return a.join("")})}function ya(t,e){var n=typeof e,r;return e==null||n==="boolean"?_d(e):(n==="number"?tn:n==="string"?(r=Dr(e))?(e=r,Ho):Dm:e instanceof Dr?Ho:e instanceof Date?JS:ZS(e)?XS:Array.isArray(e)?YS:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?QS:tn)(t,e)}function Pm(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var Lh=180/Math.PI,uc={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Gm(t,e,n,r,i,s){var o,a,l;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(l=t*n+e*r)&&(n-=t*l,r-=e*l),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,l/=a),t*r<e*n&&(t=-t,e=-e,l=-l,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(e,t)*Lh,skewX:Math.atan(l)*Lh,scaleX:o,scaleY:a}}var Xs;function nT(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?uc:Gm(e.a,e.b,e.c,e.d,e.e,e.f)}function rT(t){return t==null||(Xs||(Xs=document.createElementNS("http://www.w3.org/2000/svg","g")),Xs.setAttribute("transform",t),!(t=Xs.transform.baseVal.consolidate()))?uc:(t=t.matrix,Gm(t.a,t.b,t.c,t.d,t.e,t.f))}function Mm(t,e,n,r){function i(c){return c.length?c.pop()+" ":""}function s(c,d,u,h,f,g){if(c!==u||d!==h){var y=f.push("translate(",null,e,null,n);g.push({i:y-4,x:tn(c,u)},{i:y-2,x:tn(d,h)})}else(u||h)&&f.push("translate("+u+e+h+n)}function o(c,d,u,h){c!==d?(c-d>180?d+=360:d-c>180&&(c+=360),h.push({i:u.push(i(u)+"rotate(",null,r)-2,x:tn(c,d)})):d&&u.push(i(u)+"rotate("+d+r)}function a(c,d,u,h){c!==d?h.push({i:u.push(i(u)+"skewX(",null,r)-2,x:tn(c,d)}):d&&u.push(i(u)+"skewX("+d+r)}function l(c,d,u,h,f,g){if(c!==u||d!==h){var y=f.push(i(f)+"scale(",null,",",null,")");g.push({i:y-4,x:tn(c,u)},{i:y-2,x:tn(d,h)})}else(u!==1||h!==1)&&f.push(i(f)+"scale("+u+","+h+")")}return function(c,d){var u=[],h=[];return c=t(c),d=t(d),s(c.translateX,c.translateY,d.translateX,d.translateY,u,h),o(c.rotate,d.rotate,u,h),a(c.skewX,d.skewX,u,h),l(c.scaleX,c.scaleY,d.scaleX,d.scaleY,u,h),c=d=null,function(f){for(var g=-1,y=h.length,w;++g<y;)u[(w=h[g]).i]=w.x(f);return u.join("")}}}var iT=Mm(nT,"px, ","px)","deg)"),sT=Mm(rT,", ",")",")"),oT=1e-12;function Ih(t){return((t=Math.exp(t))+1/t)/2}function aT(t){return((t=Math.exp(t))-1/t)/2}function lT(t){return((t=Math.exp(2*t))-1)/(t+1)}const cT=(function t(e,n,r){function i(s,o){var a=s[0],l=s[1],c=s[2],d=o[0],u=o[1],h=o[2],f=d-a,g=u-l,y=f*f+g*g,w,b;if(y<oT)b=Math.log(h/c)/e,w=function(G){return[a+G*f,l+G*g,c*Math.exp(e*G*b)]};else{var E=Math.sqrt(y),A=(h*h-c*c+r*y)/(2*c*n*E),v=(h*h-c*c-r*y)/(2*h*n*E),S=Math.log(Math.sqrt(A*A+1)-A),L=Math.log(Math.sqrt(v*v+1)-v);b=(L-S)/e,w=function(G){var V=G*b,F=Ih(S),$=c/(n*E)*(F*lT(e*V+S)-aT(S));return[a+$*f,l+$*g,c*F/Ih(e*V+S)]}}return w.duration=b*1e3*e/Math.SQRT2,w}return i.rho=function(s){var o=Math.max(.001,+s),a=o*o,l=a*a;return t(o,a,l)},i})(Math.SQRT2,2,4);var gi=0,ji=0,Ii=0,Om=1e3,Wo,Hi,qo=0,Pr=0,va=0,_s=typeof performance=="object"&&performance.now?performance:Date,Fm=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function bd(){return Pr||(Fm(dT),Pr=_s.now()+va)}function dT(){Pr=0}function Ko(){this._call=this._time=this._next=null}Ko.prototype=wd.prototype={constructor:Ko,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?bd():+n)+(e==null?0:+e),!this._next&&Hi!==this&&(Hi?Hi._next=this:Wo=this,Hi=this),this._call=t,this._time=n,hc()},stop:function(){this._call&&(this._call=null,this._time=1/0,hc())}};function wd(t,e,n){var r=new Ko;return r.restart(t,e,n),r}function uT(){bd(),++gi;for(var t=Wo,e;t;)(e=Pr-t._time)>=0&&t._call.call(void 0,e),t=t._next;--gi}function Dh(){Pr=(qo=_s.now())+va,gi=ji=0;try{uT()}finally{gi=0,fT(),Pr=0}}function hT(){var t=_s.now(),e=t-qo;e>Om&&(va-=e,qo=t)}function fT(){for(var t,e=Wo,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:Wo=n);Hi=t,hc(r)}function hc(t){if(!gi){ji&&(ji=clearTimeout(ji));var e=t-Pr;e>24?(t<1/0&&(ji=setTimeout(Dh,t-_s.now()-va)),Ii&&(Ii=clearInterval(Ii))):(Ii||(qo=_s.now(),Ii=setInterval(hT,Om)),gi=1,Fm(Dh))}}function Ph(t,e,n){var r=new Ko;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}var pT=Rs("start","end","cancel","interrupt"),gT=[],$m=0,Gh=1,fc=2,yo=3,Mh=4,pc=5,vo=6;function _a(t,e,n,r,i,s){var o=t.__transition;if(!o)t.__transition={};else if(n in o)return;mT(t,n,{name:e,index:r,group:i,on:pT,tween:gT,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:$m})}function Ed(t,e){var n=dn(t,e);if(n.state>$m)throw new Error("too late; already scheduled");return n}function kn(t,e){var n=dn(t,e);if(n.state>yo)throw new Error("too late; already running");return n}function dn(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function mT(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=wd(s,0,n.time);function s(c){n.state=Gh,n.timer.restart(o,n.delay,n.time),n.delay<=c&&o(c-n.delay)}function o(c){var d,u,h,f;if(n.state!==Gh)return l();for(d in r)if(f=r[d],f.name===n.name){if(f.state===yo)return Ph(o);f.state===Mh?(f.state=vo,f.timer.stop(),f.on.call("interrupt",t,t.__data__,f.index,f.group),delete r[d]):+d<e&&(f.state=vo,f.timer.stop(),f.on.call("cancel",t,t.__data__,f.index,f.group),delete r[d])}if(Ph(function(){n.state===yo&&(n.state=Mh,n.timer.restart(a,n.delay,n.time),a(c))}),n.state=fc,n.on.call("start",t,t.__data__,n.index,n.group),n.state===fc){for(n.state=yo,i=new Array(h=n.tween.length),d=0,u=-1;d<h;++d)(f=n.tween[d].value.call(t,t.__data__,n.index,n.group))&&(i[++u]=f);i.length=u+1}}function a(c){for(var d=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(l),n.state=pc,1),u=-1,h=i.length;++u<h;)i[u].call(t,d);n.state===pc&&(n.on.call("end",t,t.__data__,n.index,n.group),l())}function l(){n.state=vo,n.timer.stop(),delete r[e];for(var c in r)return;delete t.__transition}}function _o(t,e){var n=t.__transition,r,i,s=!0,o;if(n){e=e==null?null:e+"";for(o in n){if((r=n[o]).name!==e){s=!1;continue}i=r.state>fc&&r.state<pc,r.state=vo,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[o]}s&&delete t.__transition}}function yT(t){return this.each(function(){_o(this,t)})}function vT(t,e){var n,r;return function(){var i=kn(this,t),s=i.tween;if(s!==n){r=n=s;for(var o=0,a=r.length;o<a;++o)if(r[o].name===e){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function _T(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=kn(this,t),o=s.tween;if(o!==r){i=(r=o).slice();for(var a={name:e,value:n},l=0,c=i.length;l<c;++l)if(i[l].name===e){i[l]=a;break}l===c&&i.push(a)}s.tween=i}}function bT(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=dn(this.node(),n).tween,i=0,s=r.length,o;i<s;++i)if((o=r[i]).name===t)return o.value;return null}return this.each((e==null?vT:_T)(n,t,e))}function Ad(t,e,n){var r=t._id;return t.each(function(){var i=kn(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return dn(i,r).value[e]}}function zm(t,e){var n;return(typeof e=="number"?tn:e instanceof Dr?Ho:(n=Dr(e))?(e=n,Ho):Dm)(t,e)}function wT(t){return function(){this.removeAttribute(t)}}function ET(t){return function(){this.removeAttributeNS(t.space,t.local)}}function AT(t,e,n){var r,i=n+"",s;return function(){var o=this.getAttribute(t);return o===i?null:o===r?s:s=e(r=o,n)}}function kT(t,e,n){var r,i=n+"",s;return function(){var o=this.getAttributeNS(t.space,t.local);return o===i?null:o===r?s:s=e(r=o,n)}}function xT(t,e,n){var r,i,s;return function(){var o,a=n(this),l;return a==null?void this.removeAttribute(t):(o=this.getAttribute(t),l=a+"",o===l?null:o===r&&l===i?s:(i=l,s=e(r=o,a)))}}function CT(t,e,n){var r,i,s;return function(){var o,a=n(this),l;return a==null?void this.removeAttributeNS(t.space,t.local):(o=this.getAttributeNS(t.space,t.local),l=a+"",o===l?null:o===r&&l===i?s:(i=l,s=e(r=o,a)))}}function ST(t,e){var n=ma(t),r=n==="transform"?sT:zm;return this.attrTween(t,typeof e=="function"?(n.local?CT:xT)(n,r,Ad(this,"attr."+t,e)):e==null?(n.local?ET:wT)(n):(n.local?kT:AT)(n,r,e))}function TT(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function RT(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function NT(t,e){var n,r;function i(){var s=e.apply(this,arguments);return s!==r&&(n=(r=s)&&RT(t,s)),n}return i._value=e,i}function LT(t,e){var n,r;function i(){var s=e.apply(this,arguments);return s!==r&&(n=(r=s)&&TT(t,s)),n}return i._value=e,i}function IT(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=ma(t);return this.tween(n,(r.local?NT:LT)(r,e))}function DT(t,e){return function(){Ed(this,t).delay=+e.apply(this,arguments)}}function PT(t,e){return e=+e,function(){Ed(this,t).delay=e}}function GT(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?DT:PT)(e,t)):dn(this.node(),e).delay}function MT(t,e){return function(){kn(this,t).duration=+e.apply(this,arguments)}}function OT(t,e){return e=+e,function(){kn(this,t).duration=e}}function FT(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?MT:OT)(e,t)):dn(this.node(),e).duration}function $T(t,e){if(typeof e!="function")throw new Error;return function(){kn(this,t).ease=e}}function zT(t){var e=this._id;return arguments.length?this.each($T(e,t)):dn(this.node(),e).ease}function BT(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;kn(this,t).ease=n}}function VT(t){if(typeof t!="function")throw new Error;return this.each(BT(this._id,t))}function UT(t){typeof t!="function"&&(t=vm(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],o=s.length,a=r[i]=[],l,c=0;c<o;++c)(l=s[c])&&t.call(l,l.__data__,c,s)&&a.push(l);return new qn(r,this._parents,this._name,this._id)}function jT(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,s=Math.min(r,i),o=new Array(r),a=0;a<s;++a)for(var l=e[a],c=n[a],d=l.length,u=o[a]=new Array(d),h,f=0;f<d;++f)(h=l[f]||c[f])&&(u[f]=h);for(;a<r;++a)o[a]=e[a];return new qn(o,this._parents,this._name,this._id)}function HT(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function WT(t,e,n){var r,i,s=HT(e)?Ed:kn;return function(){var o=s(this,t),a=o.on;a!==r&&(i=(r=a).copy()).on(e,n),o.on=i}}function qT(t,e){var n=this._id;return arguments.length<2?dn(this.node(),n).on.on(t):this.each(WT(n,t,e))}function KT(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function XT(){return this.on("end.remove",KT(this._id))}function ZT(t){var e=this._name,n=this._id;typeof t!="function"&&(t=md(t));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var a=r[o],l=a.length,c=s[o]=new Array(l),d,u,h=0;h<l;++h)(d=a[h])&&(u=t.call(d,d.__data__,h,a))&&("__data__"in d&&(u.__data__=d.__data__),c[h]=u,_a(c[h],e,n,h,c,dn(d,n)));return new qn(s,this._parents,e,n)}function YT(t){var e=this._name,n=this._id;typeof t!="function"&&(t=ym(t));for(var r=this._groups,i=r.length,s=[],o=[],a=0;a<i;++a)for(var l=r[a],c=l.length,d,u=0;u<c;++u)if(d=l[u]){for(var h=t.call(d,d.__data__,u,l),f,g=dn(d,n),y=0,w=h.length;y<w;++y)(f=h[y])&&_a(f,e,n,y,h,g);s.push(h),o.push(d)}return new qn(s,o,e,n)}var JT=Ns.prototype.constructor;function QT(){return new JT(this._groups,this._parents)}function eR(t,e){var n,r,i;return function(){var s=pi(this,t),o=(this.style.removeProperty(t),pi(this,t));return s===o?null:s===n&&o===r?i:i=e(n=s,r=o)}}function Bm(t){return function(){this.style.removeProperty(t)}}function tR(t,e,n){var r,i=n+"",s;return function(){var o=pi(this,t);return o===i?null:o===r?s:s=e(r=o,n)}}function nR(t,e,n){var r,i,s;return function(){var o=pi(this,t),a=n(this),l=a+"";return a==null&&(l=a=(this.style.removeProperty(t),pi(this,t))),o===l?null:o===r&&l===i?s:(i=l,s=e(r=o,a))}}function rR(t,e){var n,r,i,s="style."+e,o="end."+s,a;return function(){var l=kn(this,t),c=l.on,d=l.value[s]==null?a||(a=Bm(e)):void 0;(c!==n||i!==d)&&(r=(n=c).copy()).on(o,i=d),l.on=r}}function iR(t,e,n){var r=(t+="")=="transform"?iT:zm;return e==null?this.styleTween(t,eR(t,r)).on("end.style."+t,Bm(t)):typeof e=="function"?this.styleTween(t,nR(t,r,Ad(this,"style."+t,e))).each(rR(this._id,t)):this.styleTween(t,tR(t,r,e),n).on("end.style."+t,null)}function sR(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function oR(t,e,n){var r,i;function s(){var o=e.apply(this,arguments);return o!==i&&(r=(i=o)&&sR(t,o,n)),r}return s._value=e,s}function aR(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,oR(t,e,n??""))}function lR(t){return function(){this.textContent=t}}function cR(t){return function(){var e=t(this);this.textContent=e??""}}function dR(t){return this.tween("text",typeof t=="function"?cR(Ad(this,"text",t)):lR(t==null?"":t+""))}function uR(t){return function(e){this.textContent=t.call(this,e)}}function hR(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&uR(i)),e}return r._value=t,r}function fR(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,hR(t))}function pR(){for(var t=this._name,e=this._id,n=Vm(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,l,c=0;c<a;++c)if(l=o[c]){var d=dn(l,e);_a(l,t,n,c,o,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new qn(r,this._parents,t,n)}function gR(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(s,o){var a={value:o},l={value:function(){--i===0&&s()}};n.each(function(){var c=kn(this,r),d=c.on;d!==t&&(e=(t=d).copy(),e._.cancel.push(a),e._.interrupt.push(a),e._.end.push(l)),c.on=e}),i===0&&s()})}var mR=0;function qn(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function Vm(){return++mR}var Rn=Ns.prototype;qn.prototype={constructor:qn,select:ZT,selectAll:YT,selectChild:Rn.selectChild,selectChildren:Rn.selectChildren,filter:UT,merge:jT,selection:QT,transition:pR,call:Rn.call,nodes:Rn.nodes,node:Rn.node,size:Rn.size,empty:Rn.empty,each:Rn.each,on:qT,attr:ST,attrTween:IT,style:iR,styleTween:aR,text:dR,textTween:fR,remove:XT,tween:bT,delay:GT,duration:FT,ease:zT,easeVarying:VT,end:gR,[Symbol.iterator]:Rn[Symbol.iterator]};function yR(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var vR={time:null,delay:0,duration:250,ease:yR};function _R(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function bR(t){var e,n;t instanceof qn?(e=t._id,t=t._name):(e=Vm(),(n=vR).time=bd(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,l,c=0;c<a;++c)(l=o[c])&&_a(l,t,e,c,o,n||_R(l,e));return new qn(r,this._parents,t,e)}Ns.prototype.interrupt=yT;Ns.prototype.transition=bR;function Oh(t,e){var n,r=1;t==null&&(t=0),e==null&&(e=0);function i(){var s,o=n.length,a,l=0,c=0;for(s=0;s<o;++s)a=n[s],l+=a.x,c+=a.y;for(l=(l/o-t)*r,c=(c/o-e)*r,s=0;s<o;++s)a=n[s],a.x-=l,a.y-=c}return i.initialize=function(s){n=s},i.x=function(s){return arguments.length?(t=+s,i):t},i.y=function(s){return arguments.length?(e=+s,i):e},i.strength=function(s){return arguments.length?(r=+s,i):r},i}function wR(t){const e=+this._x.call(null,t),n=+this._y.call(null,t);return Um(this.cover(e,n),e,n,t)}function Um(t,e,n,r){if(isNaN(e)||isNaN(n))return t;var i,s=t._root,o={data:r},a=t._x0,l=t._y0,c=t._x1,d=t._y1,u,h,f,g,y,w,b,E;if(!s)return t._root=o,t;for(;s.length;)if((y=e>=(u=(a+c)/2))?a=u:c=u,(w=n>=(h=(l+d)/2))?l=h:d=h,i=s,!(s=s[b=w<<1|y]))return i[b]=o,t;if(f=+t._x.call(null,s.data),g=+t._y.call(null,s.data),e===f&&n===g)return o.next=s,i?i[b]=o:t._root=o,t;do i=i?i[b]=new Array(4):t._root=new Array(4),(y=e>=(u=(a+c)/2))?a=u:c=u,(w=n>=(h=(l+d)/2))?l=h:d=h;while((b=w<<1|y)===(E=(g>=h)<<1|f>=u));return i[E]=s,i[b]=o,t}function ER(t){var e,n,r=t.length,i,s,o=new Array(r),a=new Array(r),l=1/0,c=1/0,d=-1/0,u=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,e=t[n]))||isNaN(s=+this._y.call(null,e))||(o[n]=i,a[n]=s,i<l&&(l=i),i>d&&(d=i),s<c&&(c=s),s>u&&(u=s));if(l>d||c>u)return this;for(this.cover(l,c).cover(d,u),n=0;n<r;++n)Um(this,o[n],a[n],t[n]);return this}function AR(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,r=this._y0,i=this._x1,s=this._y1;if(isNaN(n))i=(n=Math.floor(t))+1,s=(r=Math.floor(e))+1;else{for(var o=i-n||1,a=this._root,l,c;n>t||t>=i||r>e||e>=s;)switch(c=(e<r)<<1|t<n,l=new Array(4),l[c]=a,a=l,o*=2,c){case 0:i=n+o,s=r+o;break;case 1:n=i-o,s=r+o;break;case 2:i=n+o,r=s-o;break;case 3:n=i-o,r=s-o;break}this._root&&this._root.length&&(this._root=a)}return this._x0=n,this._y0=r,this._x1=i,this._y1=s,this}function kR(){var t=[];return this.visit(function(e){if(!e.length)do t.push(e.data);while(e=e.next)}),t}function xR(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Nt(t,e,n,r,i){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=i}function CR(t,e,n){var r,i=this._x0,s=this._y0,o,a,l,c,d=this._x1,u=this._y1,h=[],f=this._root,g,y;for(f&&h.push(new Nt(f,i,s,d,u)),n==null?n=1/0:(i=t-n,s=e-n,d=t+n,u=e+n,n*=n);g=h.pop();)if(!(!(f=g.node)||(o=g.x0)>d||(a=g.y0)>u||(l=g.x1)<i||(c=g.y1)<s))if(f.length){var w=(o+l)/2,b=(a+c)/2;h.push(new Nt(f[3],w,b,l,c),new Nt(f[2],o,b,w,c),new Nt(f[1],w,a,l,b),new Nt(f[0],o,a,w,b)),(y=(e>=b)<<1|t>=w)&&(g=h[h.length-1],h[h.length-1]=h[h.length-1-y],h[h.length-1-y]=g)}else{var E=t-+this._x.call(null,f.data),A=e-+this._y.call(null,f.data),v=E*E+A*A;if(v<n){var S=Math.sqrt(n=v);i=t-S,s=e-S,d=t+S,u=e+S,r=f.data}}return r}function SR(t){if(isNaN(d=+this._x.call(null,t))||isNaN(u=+this._y.call(null,t)))return this;var e,n=this._root,r,i,s,o=this._x0,a=this._y0,l=this._x1,c=this._y1,d,u,h,f,g,y,w,b;if(!n)return this;if(n.length)for(;;){if((g=d>=(h=(o+l)/2))?o=h:l=h,(y=u>=(f=(a+c)/2))?a=f:c=f,e=n,!(n=n[w=y<<1|g]))return this;if(!n.length)break;(e[w+1&3]||e[w+2&3]||e[w+3&3])&&(r=e,b=w)}for(;n.data!==t;)if(i=n,!(n=n.next))return this;return(s=n.next)&&delete n.next,i?(s?i.next=s:delete i.next,this):e?(s?e[w]=s:delete e[w],(n=e[0]||e[1]||e[2]||e[3])&&n===(e[3]||e[2]||e[1]||e[0])&&!n.length&&(r?r[b]=n:this._root=n),this):(this._root=s,this)}function TR(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this}function RR(){return this._root}function NR(){var t=0;return this.visit(function(e){if(!e.length)do++t;while(e=e.next)}),t}function LR(t){var e=[],n,r=this._root,i,s,o,a,l;for(r&&e.push(new Nt(r,this._x0,this._y0,this._x1,this._y1));n=e.pop();)if(!t(r=n.node,s=n.x0,o=n.y0,a=n.x1,l=n.y1)&&r.length){var c=(s+a)/2,d=(o+l)/2;(i=r[3])&&e.push(new Nt(i,c,d,a,l)),(i=r[2])&&e.push(new Nt(i,s,d,c,l)),(i=r[1])&&e.push(new Nt(i,c,o,a,d)),(i=r[0])&&e.push(new Nt(i,s,o,c,d))}return this}function IR(t){var e=[],n=[],r;for(this._root&&e.push(new Nt(this._root,this._x0,this._y0,this._x1,this._y1));r=e.pop();){var i=r.node;if(i.length){var s,o=r.x0,a=r.y0,l=r.x1,c=r.y1,d=(o+l)/2,u=(a+c)/2;(s=i[0])&&e.push(new Nt(s,o,a,d,u)),(s=i[1])&&e.push(new Nt(s,d,a,l,u)),(s=i[2])&&e.push(new Nt(s,o,u,d,c)),(s=i[3])&&e.push(new Nt(s,d,u,l,c))}n.push(r)}for(;r=n.pop();)t(r.node,r.x0,r.y0,r.x1,r.y1);return this}function DR(t){return t[0]}function PR(t){return arguments.length?(this._x=t,this):this._x}function GR(t){return t[1]}function MR(t){return arguments.length?(this._y=t,this):this._y}function kd(t,e,n){var r=new xd(e??DR,n??GR,NaN,NaN,NaN,NaN);return t==null?r:r.addAll(t)}function xd(t,e,n,r,i,s){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=i,this._y1=s,this._root=void 0}function Fh(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var Lt=kd.prototype=xd.prototype;Lt.copy=function(){var t=new xd(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root,n,r;if(!e)return t;if(!e.length)return t._root=Fh(e),t;for(n=[{source:e,target:t._root=new Array(4)}];e=n.pop();)for(var i=0;i<4;++i)(r=e.source[i])&&(r.length?n.push({source:r,target:e.target[i]=new Array(4)}):e.target[i]=Fh(r));return t};Lt.add=wR;Lt.addAll=ER;Lt.cover=AR;Lt.data=kR;Lt.extent=xR;Lt.find=CR;Lt.remove=SR;Lt.removeAll=TR;Lt.root=RR;Lt.size=NR;Lt.visit=LR;Lt.visitAfter=IR;Lt.x=PR;Lt.y=MR;function Lr(t){return function(){return t}}function or(t){return(t()-.5)*1e-6}function OR(t){return t.x+t.vx}function FR(t){return t.y+t.vy}function $R(t){var e,n,r,i=1,s=1;typeof t!="function"&&(t=Lr(t==null?1:+t));function o(){for(var c,d=e.length,u,h,f,g,y,w,b=0;b<s;++b)for(u=kd(e,OR,FR).visitAfter(a),c=0;c<d;++c)h=e[c],y=n[h.index],w=y*y,f=h.x+h.vx,g=h.y+h.vy,u.visit(E);function E(A,v,S,L,G){var V=A.data,F=A.r,$=y+F;if(V){if(V.index>h.index){var H=f-V.x-V.vx,z=g-V.y-V.vy,N=H*H+z*z;N<$*$&&(H===0&&(H=or(r),N+=H*H),z===0&&(z=or(r),N+=z*z),N=($-(N=Math.sqrt(N)))/N*i,h.vx+=(H*=N)*($=(F*=F)/(w+F)),h.vy+=(z*=N)*$,V.vx-=H*($=1-$),V.vy-=z*$)}return}return v>f+$||L<f-$||S>g+$||G<g-$}}function a(c){if(c.data)return c.r=n[c.data.index];for(var d=c.r=0;d<4;++d)c[d]&&c[d].r>c.r&&(c.r=c[d].r)}function l(){if(e){var c,d=e.length,u;for(n=new Array(d),c=0;c<d;++c)u=e[c],n[u.index]=+t(u,c,e)}}return o.initialize=function(c,d){e=c,r=d,l()},o.iterations=function(c){return arguments.length?(s=+c,o):s},o.strength=function(c){return arguments.length?(i=+c,o):i},o.radius=function(c){return arguments.length?(t=typeof c=="function"?c:Lr(+c),l(),o):t},o}function zR(t){return t.index}function $h(t,e){var n=t.get(e);if(!n)throw new Error("node not found: "+e);return n}function BR(t){var e=zR,n=u,r,i=Lr(30),s,o,a,l,c,d=1;t==null&&(t=[]);function u(w){return 1/Math.min(a[w.source.index],a[w.target.index])}function h(w){for(var b=0,E=t.length;b<d;++b)for(var A=0,v,S,L,G,V,F,$;A<E;++A)v=t[A],S=v.source,L=v.target,G=L.x+L.vx-S.x-S.vx||or(c),V=L.y+L.vy-S.y-S.vy||or(c),F=Math.sqrt(G*G+V*V),F=(F-s[A])/F*w*r[A],G*=F,V*=F,L.vx-=G*($=l[A]),L.vy-=V*$,S.vx+=G*($=1-$),S.vy+=V*$}function f(){if(o){var w,b=o.length,E=t.length,A=new Map(o.map((S,L)=>[e(S,L,o),S])),v;for(w=0,a=new Array(b);w<E;++w)v=t[w],v.index=w,typeof v.source!="object"&&(v.source=$h(A,v.source)),typeof v.target!="object"&&(v.target=$h(A,v.target)),a[v.source.index]=(a[v.source.index]||0)+1,a[v.target.index]=(a[v.target.index]||0)+1;for(w=0,l=new Array(E);w<E;++w)v=t[w],l[w]=a[v.source.index]/(a[v.source.index]+a[v.target.index]);r=new Array(E),g(),s=new Array(E),y()}}function g(){if(o)for(var w=0,b=t.length;w<b;++w)r[w]=+n(t[w],w,t)}function y(){if(o)for(var w=0,b=t.length;w<b;++w)s[w]=+i(t[w],w,t)}return h.initialize=function(w,b){o=w,c=b,f()},h.links=function(w){return arguments.length?(t=w,f(),h):t},h.id=function(w){return arguments.length?(e=w,h):e},h.iterations=function(w){return arguments.length?(d=+w,h):d},h.strength=function(w){return arguments.length?(n=typeof w=="function"?w:Lr(+w),g(),h):n},h.distance=function(w){return arguments.length?(i=typeof w=="function"?w:Lr(+w),y(),h):i},h}const VR=1664525,UR=1013904223,zh=4294967296;function jR(){let t=1;return()=>(t=(VR*t+UR)%zh)/zh}function HR(t){return t.x}function WR(t){return t.y}var qR=10,KR=Math.PI*(3-Math.sqrt(5));function XR(t){var e,n=1,r=.001,i=1-Math.pow(r,1/300),s=0,o=.6,a=new Map,l=wd(u),c=Rs("tick","end"),d=jR();t==null&&(t=[]);function u(){h(),c.call("tick",e),n<r&&(l.stop(),c.call("end",e))}function h(y){var w,b=t.length,E;y===void 0&&(y=1);for(var A=0;A<y;++A)for(n+=(s-n)*i,a.forEach(function(v){v(n)}),w=0;w<b;++w)E=t[w],E.fx==null?E.x+=E.vx*=o:(E.x=E.fx,E.vx=0),E.fy==null?E.y+=E.vy*=o:(E.y=E.fy,E.vy=0);return e}function f(){for(var y=0,w=t.length,b;y<w;++y){if(b=t[y],b.index=y,b.fx!=null&&(b.x=b.fx),b.fy!=null&&(b.y=b.fy),isNaN(b.x)||isNaN(b.y)){var E=qR*Math.sqrt(.5+y),A=y*KR;b.x=E*Math.cos(A),b.y=E*Math.sin(A)}(isNaN(b.vx)||isNaN(b.vy))&&(b.vx=b.vy=0)}}function g(y){return y.initialize&&y.initialize(t,d),y}return f(),e={tick:h,restart:function(){return l.restart(u),e},stop:function(){return l.stop(),e},nodes:function(y){return arguments.length?(t=y,f(),a.forEach(g),e):t},alpha:function(y){return arguments.length?(n=+y,e):n},alphaMin:function(y){return arguments.length?(r=+y,e):r},alphaDecay:function(y){return arguments.length?(i=+y,e):+i},alphaTarget:function(y){return arguments.length?(s=+y,e):s},velocityDecay:function(y){return arguments.length?(o=1-y,e):1-o},randomSource:function(y){return arguments.length?(d=y,a.forEach(g),e):d},force:function(y,w){return arguments.length>1?(w==null?a.delete(y):a.set(y,g(w)),e):a.get(y)},find:function(y,w,b){var E=0,A=t.length,v,S,L,G,V;for(b==null?b=1/0:b*=b,E=0;E<A;++E)G=t[E],v=y-G.x,S=w-G.y,L=v*v+S*S,L<b&&(V=G,b=L);return V},on:function(y,w){return arguments.length>1?(c.on(y,w),e):c.on(y)}}}function ZR(){var t,e,n,r,i=Lr(-30),s,o=1,a=1/0,l=.81;function c(f){var g,y=t.length,w=kd(t,HR,WR).visitAfter(u);for(r=f,g=0;g<y;++g)e=t[g],w.visit(h)}function d(){if(t){var f,g=t.length,y;for(s=new Array(g),f=0;f<g;++f)y=t[f],s[y.index]=+i(y,f,t)}}function u(f){var g=0,y,w,b=0,E,A,v;if(f.length){for(E=A=v=0;v<4;++v)(y=f[v])&&(w=Math.abs(y.value))&&(g+=y.value,b+=w,E+=w*y.x,A+=w*y.y);f.x=E/b,f.y=A/b}else{y=f,y.x=y.data.x,y.y=y.data.y;do g+=s[y.data.index];while(y=y.next)}f.value=g}function h(f,g,y,w){if(!f.value)return!0;var b=f.x-e.x,E=f.y-e.y,A=w-g,v=b*b+E*E;if(A*A/l<v)return v<a&&(b===0&&(b=or(n),v+=b*b),E===0&&(E=or(n),v+=E*E),v<o&&(v=Math.sqrt(o*v)),e.vx+=b*f.value*r/v,e.vy+=E*f.value*r/v),!0;if(f.length||v>=a)return;(f.data!==e||f.next)&&(b===0&&(b=or(n),v+=b*b),E===0&&(E=or(n),v+=E*E),v<o&&(v=Math.sqrt(o*v)));do f.data!==e&&(A=s[f.data.index]*r/v,e.vx+=b*A,e.vy+=E*A);while(f=f.next)}return c.initialize=function(f,g){t=f,n=g,d()},c.strength=function(f){return arguments.length?(i=typeof f=="function"?f:Lr(+f),d(),c):i},c.distanceMin=function(f){return arguments.length?(o=f*f,c):Math.sqrt(o)},c.distanceMax=function(f){return arguments.length?(a=f*f,c):Math.sqrt(a)},c.theta=function(f){return arguments.length?(l=f*f,c):Math.sqrt(l)},c}function YR(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Xo(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function mi(t){return t=Xo(Math.abs(t)),t?t[1]:NaN}function JR(t,e){return function(n,r){for(var i=n.length,s=[],o=0,a=t[0],l=0;i>0&&a>0&&(l+a+1>r&&(a=Math.max(1,r-l)),s.push(n.substring(i-=a,i+a)),!((l+=a+1)>r));)a=t[o=(o+1)%t.length];return s.reverse().join(e)}}function QR(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var eN=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Zo(t){if(!(e=eN.exec(t)))throw new Error("invalid format: "+t);var e;return new Cd({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Zo.prototype=Cd.prototype;function Cd(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}Cd.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function tN(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var jm;function nN(t,e){var n=Xo(t,e);if(!n)return t+"";var r=n[0],i=n[1],s=i-(jm=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return s===o?r:s>o?r+new Array(s-o+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+Xo(t,Math.max(0,e+s-1))[0]}function Bh(t,e){var n=Xo(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const Vh={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:YR,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>Bh(t*100,e),r:Bh,s:nN,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Uh(t){return t}var jh=Array.prototype.map,Hh=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function rN(t){var e=t.grouping===void 0||t.thousands===void 0?Uh:JR(jh.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?Uh:QR(jh.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",a=t.minus===void 0?"":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function c(u){u=Zo(u);var h=u.fill,f=u.align,g=u.sign,y=u.symbol,w=u.zero,b=u.width,E=u.comma,A=u.precision,v=u.trim,S=u.type;S==="n"?(E=!0,S="g"):Vh[S]||(A===void 0&&(A=12),v=!0,S="g"),(w||h==="0"&&f==="=")&&(w=!0,h="0",f="=");var L=y==="$"?n:y==="#"&&/[boxX]/.test(S)?"0"+S.toLowerCase():"",G=y==="$"?r:/[%p]/.test(S)?o:"",V=Vh[S],F=/[defgprs%]/.test(S);A=A===void 0?6:/[gprs]/.test(S)?Math.max(1,Math.min(21,A)):Math.max(0,Math.min(20,A));function $(H){var z=L,N=G,k,I,C;if(S==="c")N=V(H)+N,H="";else{H=+H;var x=H<0||1/H<0;if(H=isNaN(H)?l:V(Math.abs(H),A),v&&(H=tN(H)),x&&+H==0&&g!=="+"&&(x=!1),z=(x?g==="("?g:a:g==="-"||g==="("?"":g)+z,N=(S==="s"?Hh[8+jm/3]:"")+N+(x&&g==="("?")":""),F){for(k=-1,I=H.length;++k<I;)if(C=H.charCodeAt(k),48>C||C>57){N=(C===46?i+H.slice(k+1):H.slice(k))+N,H=H.slice(0,k);break}}}E&&!w&&(H=e(H,1/0));var O=z.length+H.length+N.length,X=O<b?new Array(b-O+1).join(h):"";switch(E&&w&&(H=e(X+H,X.length?b-N.length:1/0),X=""),f){case"<":H=z+H+N+X;break;case"=":H=z+X+H+N;break;case"^":H=X.slice(0,O=X.length>>1)+z+H+N+X.slice(O);break;default:H=X+z+H+N;break}return s(H)}return $.toString=function(){return u+""},$}function d(u,h){var f=c((u=Zo(u),u.type="f",u)),g=Math.max(-8,Math.min(8,Math.floor(mi(h)/3)))*3,y=Math.pow(10,-g),w=Hh[8+g/3];return function(b){return f(y*b)+w}}return{format:c,formatPrefix:d}}var Zs,Hm,Wm;iN({thousands:",",grouping:[3],currency:["$",""]});function iN(t){return Zs=rN(t),Hm=Zs.format,Wm=Zs.formatPrefix,Zs}function sN(t){return Math.max(0,-mi(Math.abs(t)))}function oN(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(mi(e)/3)))*3-mi(Math.abs(t)))}function aN(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,mi(e)-mi(t))+1}function qm(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function lN(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const Wh=Symbol("implicit");function Km(){var t=new _h,e=[],n=[],r=Wh;function i(s){let o=t.get(s);if(o===void 0){if(r!==Wh)return r;t.set(s,o=e.push(s)-1)}return n[o%n.length]}return i.domain=function(s){if(!arguments.length)return e.slice();e=[],t=new _h;for(const o of s)t.has(o)||t.set(o,e.push(o)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return Km(e,n).unknown(r)},qm.apply(i,arguments),i}function cN(t){return function(){return t}}function dN(t){return+t}var qh=[0,1];function yn(t){return t}function gc(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:cN(isNaN(e)?NaN:.5)}function uN(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function hN(t,e,n){var r=t[0],i=t[1],s=e[0],o=e[1];return i<r?(r=gc(i,r),s=n(o,s)):(r=gc(r,i),s=n(s,o)),function(a){return s(r(a))}}function fN(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),s=new Array(r),o=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<r;)i[o]=gc(t[o],t[o+1]),s[o]=n(e[o],e[o+1]);return function(a){var l=Ox(t,a,1,r)-1;return s[l](i[l](a))}}function pN(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function gN(){var t=qh,e=qh,n=ya,r,i,s,o=yn,a,l,c;function d(){var h=Math.min(t.length,e.length);return o!==yn&&(o=uN(t[0],t[h-1])),a=h>2?fN:hN,l=c=null,u}function u(h){return h==null||isNaN(h=+h)?s:(l||(l=a(t.map(r),e,n)))(r(o(h)))}return u.invert=function(h){return o(i((c||(c=a(e,t.map(r),tn)))(h)))},u.domain=function(h){return arguments.length?(t=Array.from(h,dN),d()):t.slice()},u.range=function(h){return arguments.length?(e=Array.from(h),d()):e.slice()},u.rangeRound=function(h){return e=Array.from(h),n=Pm,d()},u.clamp=function(h){return arguments.length?(o=h?!0:yn,d()):o!==yn},u.interpolate=function(h){return arguments.length?(n=h,d()):n},u.unknown=function(h){return arguments.length?(s=h,u):s},function(h,f){return r=h,i=f,d()}}function mN(t,e,n,r){var i=Hx(t,e,n),s;switch(r=Zo(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(s=oN(i,o))&&(r.precision=s),Wm(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=aN(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=sN(i))&&(r.precision=s-(r.type==="%")*2);break}}return Hm(r)}function Xm(t){var e=t.domain;return t.ticks=function(n){var r=e();return jx(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return mN(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,s=r.length-1,o=r[i],a=r[s],l,c,d=10;for(a<o&&(c=o,o=a,a=c,c=i,i=s,s=c);d-- >0;){if(c=oc(o,a,n),c===l)return r[i]=o,r[s]=a,e(r);if(c>0)o=Math.floor(o/c)*c,a=Math.ceil(a/c)*c;else if(c<0)o=Math.ceil(o*c)/c,a=Math.floor(a*c)/c;else break;l=c}return t},t}function Kh(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function yN(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function vN(t){return t<0?-t*t:t*t}function _N(t){var e=t(yn,yn),n=1;function r(){return n===1?t(yn,yn):n===.5?t(yN,vN):t(Kh(n),Kh(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,r()):n},Xm(e)}function Zm(){var t=_N(gN());return t.copy=function(){return pN(t,Zm()).exponent(t.exponent())},qm.apply(t,arguments),t}function bN(){return Zm.apply(null,arguments).exponent(.5)}function wN(){var t=0,e=1,n,r,i,s,o=yn,a=!1,l;function c(u){return u==null||isNaN(u=+u)?l:o(i===0?.5:(u=(s(u)-n)*i,a?Math.max(0,Math.min(1,u)):u))}c.domain=function(u){return arguments.length?([t,e]=u,n=s(t=+t),r=s(e=+e),i=n===r?0:1/(r-n),c):[t,e]},c.clamp=function(u){return arguments.length?(a=!!u,c):a},c.interpolator=function(u){return arguments.length?(o=u,c):o};function d(u){return function(h){var f,g;return arguments.length?([f,g]=h,o=u(f,g),c):[o(0),o(1)]}}return c.range=d(ya),c.rangeRound=d(Pm),c.unknown=function(u){return arguments.length?(l=u,c):l},function(u){return s=u,n=u(t),r=u(e),i=n===r?0:1/(r-n),c}}function EN(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function Ym(){var t=Xm(wN()(yn));return t.copy=function(){return EN(t,Ym())},lN.apply(t,arguments)}function ba(t){for(var e=t.length/6|0,n=new Array(e),r=0;r<e;)n[r]="#"+t.slice(r*6,++r*6);return n}function wa(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}const AN=wa(ba("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));wa(ba("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf"));wa(ba("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4"));wa(ba("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));const Ys=t=>()=>t;function kN(t,{sourceEvent:e,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function zn(t,e,n){this.k=t,this.x=e,this.y=n}zn.prototype={constructor:zn,scale:function(t){return t===1?this:new zn(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new zn(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Ea=new zn(1,0,0);Jm.prototype=zn.prototype;function Jm(t){for(;!t.__zoom;)if(!(t=t.parentNode))return Ea;return t.__zoom}function rl(t){t.stopImmediatePropagation()}function Di(t){t.preventDefault(),t.stopImmediatePropagation()}function xN(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function CN(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function Xh(){return this.__zoom||Ea}function SN(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function TN(){return navigator.maxTouchPoints||"ontouchstart"in this}function RN(t,e,n){var r=t.invertX(e[0][0])-n[0][0],i=t.invertX(e[1][0])-n[1][0],s=t.invertY(e[0][1])-n[0][1],o=t.invertY(e[1][1])-n[1][1];return t.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),o>s?(s+o)/2:Math.min(0,s)||Math.max(0,o))}function NN(){var t=xN,e=CN,n=RN,r=SN,i=TN,s=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],a=250,l=cT,c=Rs("start","zoom","end"),d,u,h,f=500,g=150,y=0,w=10;function b(k){k.property("__zoom",Xh).on("wheel.zoom",V,{passive:!1}).on("mousedown.zoom",F).on("dblclick.zoom",$).filter(i).on("touchstart.zoom",H).on("touchmove.zoom",z).on("touchend.zoom touchcancel.zoom",N).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}b.transform=function(k,I,C,x){var O=k.selection?k.selection():k;O.property("__zoom",Xh),k!==O?S(k,I,C,x):O.interrupt().each(function(){L(this,arguments).event(x).start().zoom(null,typeof I=="function"?I.apply(this,arguments):I).end()})},b.scaleBy=function(k,I,C,x){b.scaleTo(k,function(){var O=this.__zoom.k,X=typeof I=="function"?I.apply(this,arguments):I;return O*X},C,x)},b.scaleTo=function(k,I,C,x){b.transform(k,function(){var O=e.apply(this,arguments),X=this.__zoom,re=C==null?v(O):typeof C=="function"?C.apply(this,arguments):C,fe=X.invert(re),me=typeof I=="function"?I.apply(this,arguments):I;return n(A(E(X,me),re,fe),O,o)},C,x)},b.translateBy=function(k,I,C,x){b.transform(k,function(){return n(this.__zoom.translate(typeof I=="function"?I.apply(this,arguments):I,typeof C=="function"?C.apply(this,arguments):C),e.apply(this,arguments),o)},null,x)},b.translateTo=function(k,I,C,x,O){b.transform(k,function(){var X=e.apply(this,arguments),re=this.__zoom,fe=x==null?v(X):typeof x=="function"?x.apply(this,arguments):x;return n(Ea.translate(fe[0],fe[1]).scale(re.k).translate(typeof I=="function"?-I.apply(this,arguments):-I,typeof C=="function"?-C.apply(this,arguments):-C),X,o)},x,O)};function E(k,I){return I=Math.max(s[0],Math.min(s[1],I)),I===k.k?k:new zn(I,k.x,k.y)}function A(k,I,C){var x=I[0]-C[0]*k.k,O=I[1]-C[1]*k.k;return x===k.x&&O===k.y?k:new zn(k.k,x,O)}function v(k){return[(+k[0][0]+ +k[1][0])/2,(+k[0][1]+ +k[1][1])/2]}function S(k,I,C,x){k.on("start.zoom",function(){L(this,arguments).event(x).start()}).on("interrupt.zoom end.zoom",function(){L(this,arguments).event(x).end()}).tween("zoom",function(){var O=this,X=arguments,re=L(O,X).event(x),fe=e.apply(O,X),me=C==null?v(fe):typeof C=="function"?C.apply(O,X):C,W=Math.max(fe[1][0]-fe[0][0],fe[1][1]-fe[0][1]),ve=O.__zoom,Ee=typeof I=="function"?I.apply(O,X):I,De=l(ve.invert(me).concat(W/ve.k),Ee.invert(me).concat(W/Ee.k));return function(q){if(q===1)q=Ee;else{var J=De(q),U=W/J[2];q=new zn(U,me[0]-J[0]*U,me[1]-J[1]*U)}re.zoom(null,q)}})}function L(k,I,C){return!C&&k.__zooming||new G(k,I)}function G(k,I){this.that=k,this.args=I,this.active=0,this.sourceEvent=null,this.extent=e.apply(k,I),this.taps=0}G.prototype={event:function(k){return k&&(this.sourceEvent=k),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(k,I){return this.mouse&&k!=="mouse"&&(this.mouse[1]=I.invert(this.mouse[0])),this.touch0&&k!=="touch"&&(this.touch0[1]=I.invert(this.touch0[0])),this.touch1&&k!=="touch"&&(this.touch1[1]=I.invert(this.touch1[0])),this.that.__zoom=I,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(k){var I=Pt(this.that).datum();c.call(k,this.that,new kN(k,{sourceEvent:this.sourceEvent,target:b,transform:this.that.__zoom,dispatch:c}),I)}};function V(k,...I){if(!t.apply(this,arguments))return;var C=L(this,I).event(k),x=this.__zoom,O=Math.max(s[0],Math.min(s[1],x.k*Math.pow(2,r.apply(this,arguments)))),X=Pn(k);if(C.wheel)(C.mouse[0][0]!==X[0]||C.mouse[0][1]!==X[1])&&(C.mouse[1]=x.invert(C.mouse[0]=X)),clearTimeout(C.wheel);else{if(x.k===O)return;C.mouse=[X,x.invert(X)],_o(this),C.start()}Di(k),C.wheel=setTimeout(re,g),C.zoom("mouse",n(A(E(x,O),C.mouse[0],C.mouse[1]),C.extent,o));function re(){C.wheel=null,C.end()}}function F(k,...I){if(h||!t.apply(this,arguments))return;var C=k.currentTarget,x=L(this,I,!0).event(k),O=Pt(k.view).on("mousemove.zoom",me,!0).on("mouseup.zoom",W,!0),X=Pn(k,C),re=k.clientX,fe=k.clientY;Tm(k.view),rl(k),x.mouse=[X,this.__zoom.invert(X)],_o(this),x.start();function me(ve){if(Di(ve),!x.moved){var Ee=ve.clientX-re,De=ve.clientY-fe;x.moved=Ee*Ee+De*De>y}x.event(ve).zoom("mouse",n(A(x.that.__zoom,x.mouse[0]=Pn(ve,C),x.mouse[1]),x.extent,o))}function W(ve){O.on("mousemove.zoom mouseup.zoom",null),Rm(ve.view,x.moved),Di(ve),x.event(ve).end()}}function $(k,...I){if(t.apply(this,arguments)){var C=this.__zoom,x=Pn(k.changedTouches?k.changedTouches[0]:k,this),O=C.invert(x),X=C.k*(k.shiftKey?.5:2),re=n(A(E(C,X),x,O),e.apply(this,I),o);Di(k),a>0?Pt(this).transition().duration(a).call(S,re,x,k):Pt(this).call(b.transform,re,x,k)}}function H(k,...I){if(t.apply(this,arguments)){var C=k.touches,x=C.length,O=L(this,I,k.changedTouches.length===x).event(k),X,re,fe,me;for(rl(k),re=0;re<x;++re)fe=C[re],me=Pn(fe,this),me=[me,this.__zoom.invert(me),fe.identifier],O.touch0?!O.touch1&&O.touch0[2]!==me[2]&&(O.touch1=me,O.taps=0):(O.touch0=me,X=!0,O.taps=1+!!d);d&&(d=clearTimeout(d)),X&&(O.taps<2&&(u=me[0],d=setTimeout(function(){d=null},f)),_o(this),O.start())}}function z(k,...I){if(this.__zooming){var C=L(this,I).event(k),x=k.changedTouches,O=x.length,X,re,fe,me;for(Di(k),X=0;X<O;++X)re=x[X],fe=Pn(re,this),C.touch0&&C.touch0[2]===re.identifier?C.touch0[0]=fe:C.touch1&&C.touch1[2]===re.identifier&&(C.touch1[0]=fe);if(re=C.that.__zoom,C.touch1){var W=C.touch0[0],ve=C.touch0[1],Ee=C.touch1[0],De=C.touch1[1],q=(q=Ee[0]-W[0])*q+(q=Ee[1]-W[1])*q,J=(J=De[0]-ve[0])*J+(J=De[1]-ve[1])*J;re=E(re,Math.sqrt(q/J)),fe=[(W[0]+Ee[0])/2,(W[1]+Ee[1])/2],me=[(ve[0]+De[0])/2,(ve[1]+De[1])/2]}else if(C.touch0)fe=C.touch0[0],me=C.touch0[1];else return;C.zoom("touch",n(A(re,fe,me),C.extent,o))}}function N(k,...I){if(this.__zooming){var C=L(this,I).event(k),x=k.changedTouches,O=x.length,X,re;for(rl(k),h&&clearTimeout(h),h=setTimeout(function(){h=null},f),X=0;X<O;++X)re=x[X],C.touch0&&C.touch0[2]===re.identifier?delete C.touch0:C.touch1&&C.touch1[2]===re.identifier&&delete C.touch1;if(C.touch1&&!C.touch0&&(C.touch0=C.touch1,delete C.touch1),C.touch0)C.touch0[1]=this.__zoom.invert(C.touch0[0]);else if(C.end(),C.taps===2&&(re=Pn(re,this),Math.hypot(u[0]-re[0],u[1]-re[1])<w)){var fe=Pt(this).on("dblclick.zoom");fe&&fe.apply(this,arguments)}}}return b.wheelDelta=function(k){return arguments.length?(r=typeof k=="function"?k:Ys(+k),b):r},b.filter=function(k){return arguments.length?(t=typeof k=="function"?k:Ys(!!k),b):t},b.touchable=function(k){return arguments.length?(i=typeof k=="function"?k:Ys(!!k),b):i},b.extent=function(k){return arguments.length?(e=typeof k=="function"?k:Ys([[+k[0][0],+k[0][1]],[+k[1][0],+k[1][1]]]),b):e},b.scaleExtent=function(k){return arguments.length?(s[0]=+k[0],s[1]=+k[1],b):[s[0],s[1]]},b.translateExtent=function(k){return arguments.length?(o[0][0]=+k[0][0],o[1][0]=+k[1][0],o[0][1]=+k[0][1],o[1][1]=+k[1][1],b):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},b.constrain=function(k){return arguments.length?(n=k,b):n},b.duration=function(k){return arguments.length?(a=+k,b):a},b.interpolate=function(k){return arguments.length?(l=k,b):l},b.on=function(){var k=c.on.apply(c,arguments);return k===c?b:k},b.clickDistance=function(k){return arguments.length?(y=(k=+k)*k,b):Math.sqrt(y)},b.tapDistance=function(k){return arguments.length?(w=+k,b):w},b}const Oe={WIDTH:800,HEIGHT:600,NODE_RADIUS:8,LINK_DISTANCE:100,CHARGE_STRENGTH:-300,MIN_RADIUS:4,MAX_RADIUS:20,COLLISION_PADDING:2,COLLISION_STRENGTH:.7,LINK_STRENGTH:.5,ZOOM_MIN:.1,ZOOM_MAX:4,RESIZE_DEBOUNCE_MS:150,TOOLTIP_PADDING:12,TOOLTIP_DURATION:150,TOOLTIP_MAX_WIDTH:280,DRAG_ALPHA_TARGET:.3,SIMULATION_ALPHA:1,SIMULATION_RESTART_ALPHA:.3,LABEL_VISIBILITY_THRESHOLD:.5};function at(t){return typeof t=="string"?t:t?.id||String(t)}function Qn(t){const e=at(t.source),n=at(t.target);return e<n?`${e}-${n}`:`${n}-${e}`}function LN(t,e){let n;return function(...i){const s=()=>{clearTimeout(n),t(...i)};clearTimeout(n),n=setTimeout(s,e)}}class Zh{constructor(e,n={}){if(this.container=typeof e=="string"?document.querySelector(e):e,!this.container)throw new Error("NetworkGraphD3: Container not found");this.log=Ze({prefix:"NetworkGraphD3",level:"info"}),this.options={width:n.width||Oe.WIDTH,height:n.height||Oe.HEIGHT,nodeRadius:n.nodeRadius||Oe.NODE_RADIUS,linkDistance:n.linkDistance||Oe.LINK_DISTANCE,chargeStrength:n.chargeStrength||Oe.CHARGE_STRENGTH,sizeBy:n.sizeBy||null,minRadius:n.minRadius||Oe.MIN_RADIUS,maxRadius:n.maxRadius||Oe.MAX_RADIUS,colorBy:n.colorBy||"group",colorScheme:n.colorScheme||"categorical",showLabels:n.showLabels!==!1,tooltipBuilder:n.tooltipBuilder||null,renderMode:n.renderMode||"colors",...n},this.options.minRadius>=this.options.maxRadius&&(this.log.warn("minRadius should be less than maxRadius, adjusting..."),this.options.minRadius=Math.min(this.options.minRadius,this.options.maxRadius-1)),this.data={nodes:[],links:[]},this.svg=null,this.simulation=null,this.isDestroyed=!1,this.isReady=!1,this.isRendering=!1,this.selectedNode=null,this.sizeScale=null,this.colorScale=null,this.resizeHandler=null,this.darkModeQuery=null,this.darkModeHandler=null,this.tooltip=null,this.currentTooltipNode=null,this.linkKeyCache=new Map,this.stabilizationCheckFrame=null,this.lastAlpha=1,this.stableTickCount=0,this.requiredStableTicks=10,this.stabilizationThreshold=.01,this.init()}init(){this.log.debug("Initializing graph",{width:this.options.width,height:this.options.height}),this.svg=Pt(this.container).append("svg").attr("width",this.options.width).attr("height",this.options.height).attr("viewBox",`0 0 ${this.options.width} ${this.options.height}`).attr("preserveAspectRatio","xMidYMid meet").attr("role","img").attr("aria-label","Network graph visualization").style("background","transparent").style("opacity",0).style("visibility","hidden").attr("class","network-graph-svg"),this.g=this.svg.append("g").attr("class","main-group"),this.linkGroup=this.g.append("g").attr("class","links").attr("aria-label","Graph links"),this.nodeGroup=this.g.append("g").attr("class","nodes").attr("aria-label","Graph nodes"),this.options.showLabels&&(this.labelGroup=this.g.append("g").attr("class","labels").attr("aria-label","Node labels")),this.createTooltip(),this.zoomBehavior=NN().scaleExtent([Oe.ZOOM_MIN,Oe.ZOOM_MAX]).on("zoom",e=>{this.g.attr("transform",e.transform),this.currentZoom=e.transform.k,this.updateLabelVisibility()}),this.svg.call(this.zoomBehavior),this.currentZoom=1,this.svg.on("click",e=>{e.target===this.svg.node()&&this.deselectNode()}),this.simulation=XR().force("link",BR().id(e=>e.id).distance(this.options.linkDistance).strength(Oe.LINK_STRENGTH)).force("charge",ZR().strength(this.options.chargeStrength)).force("center",Oh(this.options.width/2,this.options.height/2)).force("collision",$R().radius(e=>this.getNodeRadius(e)+Oe.COLLISION_PADDING).strength(Oe.COLLISION_STRENGTH)).on("tick",()=>this.onTick()).on("end",()=>this.onSimulationEnd()),this.resizeHandler=LN(()=>this.handleResize(),Oe.RESIZE_DEBOUNCE_MS),window.addEventListener("resize",this.resizeHandler)}setData(e,n){if(this.isDestroyed){this.log.warn("Cannot set data on destroyed instance");return}if(!Array.isArray(e))throw new Error("NetworkGraphD3: nodes must be an array");if(!Array.isArray(n))throw new Error("NetworkGraphD3: links must be an array");const r=e.filter(i=>!i||!i.id);r.length>0&&this.log.warn(`Found ${r.length} nodes without id property`),this.log.debug("Setting graph data",{nodeCount:e.length,linkCount:n.length}),this.data.nodes=e,this.data.links=n.map(i=>({...i,source:at(i.source),target:at(i.target)})),this.linkKeyCache.clear(),this.selectedNode=null,this.computeScales(),this.updateGraph()}computeScales(){if(!this.data.nodes||this.data.nodes.length===0){this.sizeScale=null,this.colorScale=null;return}if(this.options.sizeBy){const r=this.data.nodes.map(i=>i[this.options.sizeBy]).filter(i=>i!=null);if(r.length>0){const i=Math.min(...r),s=Math.max(...r);this.sizeScale=bN().domain([i,s]).range([this.options.minRadius,this.options.maxRadius]).clamp(!0)}else this.sizeScale=null}else this.sizeScale=null;const e=this.options.colorBy;if(!e){this.colorScale=null;return}const n=this.data.nodes.map(r=>r[e]).filter(r=>r!=null);if(n.length>0){const r=n.every(o=>typeof o=="number"),i=["group","community"].includes(e);if(this.options.colorScheme==="sequential"||r&&!i){const o=Math.min(...n),a=Math.max(...n);this.colorScale=Ym(AN).domain([o,a])}else{const o=[...new Set(n)].sort((l,c)=>typeof l=="number"&&typeof c=="number"?l-c:String(l).localeCompare(String(c))),a=["#3b82f6","#10b981","#f59e0b","#ef4444","#6366f1","#ec4899","#06b6d4","#f97316","#14b8a6","#a855f7"];this.colorScale=Km().domain(o).range(a).unknown(a[0])}}else this.colorScale=null}updateVisualEncoding(e={}){e.sizeBy!==void 0&&(this.options.sizeBy=e.sizeBy),e.minRadius!==void 0&&(this.options.minRadius=e.minRadius),e.maxRadius!==void 0&&(this.options.maxRadius=e.maxRadius),e.colorBy!==void 0&&(this.options.colorBy=e.colorBy),e.colorScheme!==void 0&&(this.options.colorScheme=e.colorScheme);const n=e.preserveZoom!==!1;let r=null;n&&this.g&&(r=Jm(this.svg.node())),this.computeScales(),this.svg&&this.isReady&&this.svg.style("opacity",1).style("visibility","visible"),this.node&&this.node.attr("r",i=>this.getNodeRadius(i)).attr("fill",i=>this.getNodeColor(i)),this.simulation&&this.simulation.force("collision").radius(i=>this.getNodeRadius(i)+Oe.COLLISION_PADDING),n&&r&&this.zoomBehavior&&this.svg&&(this.svg.call(this.zoomBehavior.transform,r),this.g.attr("transform",r),this.currentZoom=r.k)}setRenderMode(e){if(e!=="colors"&&e!=="avatars"){this.log.warn(`Invalid render mode: ${e}. Must be 'colors' or 'avatars'`);return}this.options.renderMode=e,this.log.debug(`Render mode changed to: ${e}`),this.nodeGroup&&(this.nodeGroup.selectAll("circle").remove(),this.nodeGroup.selectAll("text").remove(),this.node=null),this.labelGroup&&(this.labelGroup.selectAll("text").remove(),this.label=null),this.updateGraph()}updateNodeStatistics(e,n="eigenvector",r=!0){if(!e||!Array.isArray(e)){this.log.warn("updateNodeStatistics: enrichedNodes must be an array");return}this.svg&&this.isReady&&this.svg.style("opacity",1).style("visibility","visible");const i=new Map;e.forEach(o=>{i.set(o.id,o)});let s=!1;this.data.nodes.forEach(o=>{const a=i.get(o.id);a&&(Object.keys(a).forEach(l=>{l!=="x"&&l!=="y"&&l!=="vx"&&l!=="vy"&&l!=="fx"&&l!=="fy"&&(o[l]=a[l])}),a.eigenvector!==void 0&&(s=!0))}),s&&n==="eigenvector"?this.updateVisualEncoding({sizeBy:"eigenvector",preserveZoom:r}):(this.computeScales(),this.node&&this.node.attr("r",o=>this.getNodeRadius(o)).attr("fill",o=>this.getNodeColor(o)),this.simulation&&this.simulation.force("collision").radius(o=>this.getNodeRadius(o)+Oe.COLLISION_PADDING)),this.log.debug("Node statistics updated",{nodeCount:e.length,sizingBy:s?n:"none"})}updateCliqueEdgeColors(e){if(!this.data||!this.data.nodes||!this.data.links)return;const n="#ef4444",r="var(--color-border)",i=new Map;this.data.nodes.forEach(o=>{const a=String(o.id);i.set(a,new Set)}),this.data.links.forEach(o=>{const a=at(o.source),l=at(o.target);i.has(a)&&i.get(a).add(l),i.has(l)&&i.get(l).add(a)});const s=(o,a)=>{const l=i.get(o)||new Set,c=i.get(a)||new Set;for(const d of l)if(d!==a&&c.has(d))return!0;return!1};if(this.linkGroup){const o=this.linkGroup.selectAll("line");o.size()>0?(o.attr("stroke",a=>{const l=at(a.source),c=at(a.target);return e&&s(l,c)?n:r}),this.log.debug("Updated clique edge colors",{enabled:e,linkCount:o.size()})):this.log.warn("No links found to update colors",{linkGroupExists:!!this.linkGroup})}else this.log.warn("Link group not initialized, cannot update clique edge colors")}updateGraph(){if(!this.data.nodes||!this.data.links)return;this.isReady=!1,this.isRendering=!1,this.stableTickCount=0,this.lastAlpha=1,this.svg&&this.svg.style("opacity",0).style("visibility","hidden"),this.link=this.linkGroup.selectAll("line").data(this.data.links,i=>Qn(i)),this.link.exit().remove();const e=this.link.enter().append("line").attr("stroke","var(--color-border)").attr("stroke-width",2).attr("stroke-opacity",.6).attr("aria-label",i=>`Link from ${at(i.source)} to ${at(i.target)}`);this.link=e.merge(this.link);const n=this.options.renderMode==="avatars"?"text":"circle";this.node=this.nodeGroup.selectAll(n).data(this.data.nodes,i=>i.id),this.node.exit().remove();const r=this.node.enter().append(n);if(this.options.renderMode==="avatars"?r.attr("text-anchor","middle").attr("dominant-baseline","central").attr("font-size",i=>`${this.getNodeRadius(i)*2}px`).attr("cursor","pointer").attr("role","button").attr("tabindex",0).attr("aria-label",i=>`Node ${i.id}`).text(i=>i.avatar||"").attr("stroke",i=>this.getNodeStrokeColor(i)).attr("stroke-width",i=>this.getNodeStrokeWidth(i)*.5).attr("paint-order","stroke").call(this.createDragBehavior()).on("mouseover",(i,s)=>this.onNodeMouseOver(i,s)).on("mouseout",(i,s)=>this.onNodeMouseOut(i,s)).on("click",(i,s)=>{i.stopPropagation(),this.toggleNodeSelection(s),this.emit("nodeClick",s)}).on("keydown",(i,s)=>{(i.key==="Enter"||i.key===" ")&&(i.preventDefault(),this.toggleNodeSelection(s),this.emit("nodeClick",s))}):r.attr("r",i=>this.getNodeRadius(i)).attr("fill",i=>this.getNodeColor(i)).attr("stroke","#fff").attr("stroke-width",2).attr("cursor","pointer").attr("role","button").attr("tabindex",0).attr("aria-label",i=>`Node ${i.id}`).call(this.createDragBehavior()).on("mouseover",(i,s)=>this.onNodeMouseOver(i,s)).on("mouseout",(i,s)=>this.onNodeMouseOut(i,s)).on("click",(i,s)=>{i.stopPropagation(),this.toggleNodeSelection(s),this.emit("nodeClick",s)}).on("keydown",(i,s)=>{(i.key==="Enter"||i.key===" ")&&(i.preventDefault(),this.toggleNodeSelection(s),this.emit("nodeClick",s))}),this.node=r.merge(this.node),this.options.renderMode==="avatars"?this.node.attr("font-size",i=>`${this.getNodeRadius(i)*2}px`).text(i=>i.avatar||"").attr("stroke",i=>this.getNodeStrokeColor(i)).attr("stroke-width",i=>this.getNodeStrokeWidth(i)*.5):this.node.attr("r",i=>this.getNodeRadius(i)).attr("fill",i=>this.getNodeColor(i)).attr("stroke",i=>this.getNodeStrokeColor(i)).attr("stroke-width",i=>this.getNodeStrokeWidth(i)),this.simulation.force("collision").radius(i=>this.getNodeRadius(i)+Oe.COLLISION_PADDING),this.options.showLabels&&this.labelGroup){this.label=this.labelGroup.selectAll("text").data(this.data.nodes,s=>s.id),this.label.exit().remove();const i=this.label.enter().append("text").text(s=>s.id).attr("font-size","12px").attr("text-anchor","middle").attr("dx",0).attr("dy",s=>this.getNodeRadius(s)+15).attr("fill","var(--color-text-primary)").style("pointer-events","none").style("user-select","none").attr("aria-hidden","true");this.label=i.merge(this.label),this.label.attr("dy",s=>this.getNodeRadius(s)+15),this.updateLabelVisibility()}this.simulation.nodes(this.data.nodes),this.simulation.force("link").links(this.data.links),requestAnimationFrame(()=>{this.isRendering=!0,this.simulation.alpha(Oe.SIMULATION_ALPHA).restart()})}onTick(){this.isDestroyed||!this.isRendering&&!this.isReady||(this.link&&this.link.attr("x1",e=>e.source.x).attr("y1",e=>e.source.y).attr("x2",e=>e.target.x).attr("y2",e=>e.target.y),this.node&&(this.options.renderMode==="avatars"?this.node.attr("x",e=>e.x).attr("y",e=>e.y):this.node.attr("cx",e=>e.x).attr("cy",e=>e.y)),this.label&&this.label.attr("x",e=>e.x).attr("y",e=>e.y),!this.isReady&&this.simulation&&this.checkStabilization())}checkStabilization(){if(!this.simulation||this.isDestroyed)return;const e=this.simulation.alpha();e<this.stabilizationThreshold?this.stableTickCount++:this.stableTickCount=0,this.stableTickCount>=this.requiredStableTicks?this.markAsReady():this.stabilizationCheckFrame||(this.stabilizationCheckFrame=requestAnimationFrame(()=>{this.stabilizationCheckFrame=null})),this.lastAlpha=e}onSimulationEnd(){this.isDestroyed||this.markAsReady()}markAsReady(){this.isReady||this.isDestroyed||(this.log.debug("Graph marked as ready"),this.isReady=!0,this.isRendering=!0,this.svg&&this.svg.style("opacity",1).style("visibility","visible"),this.stabilizationCheckFrame&&(cancelAnimationFrame(this.stabilizationCheckFrame),this.stabilizationCheckFrame=null),requestAnimationFrame(()=>{requestAnimationFrame(()=>{this.fitToView(),this.emit("ready")})}))}createDragBehavior(){return DS().on("start",(e,n)=>{e.active||this.simulation.alphaTarget(Oe.DRAG_ALPHA_TARGET).restart(),n.fx=n.x,n.fy=n.y,this.emit("nodeDragStart",n)}).on("drag",(e,n)=>{n.fx=e.x,n.fy=e.y,this.emit("nodeDrag",n)}).on("end",(e,n)=>{e.active||this.simulation.alphaTarget(0),this.emit("nodeDragEnd",n)})}isDarkMode(){return document.documentElement.classList.contains("dark")||window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches}updateTooltipStyles(e){this.tooltip&&this.tooltip.style("background",e?"rgba(17, 24, 39, 0.95)":"rgba(0, 0, 0, 0.9)").style("color",e?"#f9fafb":"#fff").style("box-shadow",e?"0 4px 12px rgba(0, 0, 0, 0.5)":"0 4px 12px rgba(0, 0, 0, 0.3)").style("border",e?"1px solid rgba(255, 255, 255, 0.1)":"1px solid rgba(255, 255, 255, 0.2)")}createTooltip(){this.tooltip&&this.tooltip.remove(),this.darkModeQuery&&this.darkModeHandler&&this.darkModeQuery.removeEventListener("change",this.darkModeHandler);const e=this.isDarkMode();this.tooltip=Pt("body").append("div").attr("class","network-graph-tooltip").attr("role","tooltip").attr("aria-hidden","true").style("position","absolute").style("padding","10px 14px").style("border-radius","8px").style("font-size","12px").style("font-family","system-ui, -apple-system, sans-serif").style("pointer-events","none").style("opacity",0).style("visibility","hidden").style("z-index",1e3).style("max-width",`${Oe.TOOLTIP_MAX_WIDTH}px`).style("line-height","1.6").style("backdrop-filter","blur(8px)"),this.updateTooltipStyles(e),window.matchMedia&&(this.darkModeQuery=window.matchMedia("(prefers-color-scheme: dark)"),this.darkModeHandler=n=>{!this.isDestroyed&&this.tooltip&&this.updateTooltipStyles(n.matches)},this.darkModeQuery.addEventListener("change",this.darkModeHandler))}showTooltip(e,n){if(!this.tooltip||this.isDestroyed)return;const r=this.options.tooltipBuilder?this.options.tooltipBuilder(n):this.buildTooltipContent(n);this.tooltip.html(r);const i=e.clientX||e.pageX,s=e.clientY||e.pageY;this.tooltip.style("opacity",0).style("visibility","visible").attr("aria-hidden","false");const o=this.tooltip.node();if(!o)return;const a=o.offsetWidth||200,l=o.offsetHeight||100,c=Oe.TOOLTIP_PADDING;let d=i+c,u=s-l-c;const h=window.innerWidth,f=window.innerHeight;d+a>h-c&&(d=i-a-c),d<c&&(d=i+c),u<c&&(u=s+c),u+l>f-c&&(u=s-l-c),this.tooltip.style("left",`${d}px`).style("top",`${u}px`).transition().duration(Oe.TOOLTIP_DURATION).style("opacity",1),this.currentTooltipNode=n}hideTooltip(){this.tooltip&&(this.tooltip.transition().duration(Oe.TOOLTIP_DURATION).style("opacity",0).on("end",function(){Pt(this).style("visibility","hidden").attr("aria-hidden","true")}),this.currentTooltipNode=null)}updateLabelVisibility(){if(!this.label||!this.options.showLabels)return;const e=this.currentZoom>=Oe.LABEL_VISIBILITY_THRESHOLD;this.label.style("opacity",e?1:0).style("visibility",e?"visible":"hidden")}buildTooltipContent(e){if(!e)return"";const n=[];n.push(`<div style="font-weight: 600; margin-bottom: 6px; font-size: 13px;"> ${e.id}</div>`);const r=new Set(["id","x","y","fx","fy","vx","vy","index","__data__","__transition__"]),i=["relationship","gender","avatar","group","community"],s=["degree","eigenvector","betweenness","clustering","closeness","centrality"];i.forEach(l=>{if(e[l]!==void 0&&e[l]!==null&&!r.has(l)){const c=e[l];let d=l.charAt(0).toUpperCase()+l.slice(1).replace(/_/g," ");if(l==="relationship")n.push(`<div style="margin-bottom: 3px;"><strong> Relationship:</strong> ${this.escapeHtml(c)}</div>`);else if(l==="gender"){const h={male:{emoji:"",text:"Male"},female:{emoji:"",text:"Female"},other:{emoji:"",text:"Other"}}[c]||{emoji:"",text:c};n.push(`<div style="margin-bottom: 3px;"><strong>Gender:</strong> ${h.emoji} ${h.text}</div>`)}else l==="avatar"?n.push(`<div style="margin-bottom: 3px;"><strong>Avatar:</strong> ${c}</div>`):l==="group"?n.push(`<div style="margin-bottom: 3px;"><strong>Group:</strong> ${c}</div>`):l==="community"?n.push(`<div style="margin-bottom: 3px;"><strong> Community:</strong> ${c}</div>`):n.push(`<div style="margin-bottom: 3px;"><strong>${d}:</strong> ${this.escapeHtml(String(c))}</div>`)}}),s.forEach(l=>{if(e[l]!==void 0&&e[l]!==null&&!r.has(l)){const c=e[l],d=l.charAt(0).toUpperCase()+l.slice(1).replace(/_/g," ");if(l==="centrality"&&e.eigenvector!==void 0)return;typeof c=="number"?n.push(`<div style="margin-bottom: 2px;"><strong>${d}:</strong> ${c.toFixed(4)}</div>`):n.push(`<div style="margin-bottom: 2px;"><strong>${d}:</strong> ${this.escapeHtml(String(c))}</div>`)}});const o=new Set([...i,...s,"x","y"]),a=Object.keys(e).filter(l=>!r.has(l)&&!o.has(l)&&e[l]!==void 0&&e[l]!==null&&typeof e[l]!="function"&&!l.startsWith("__")).sort();return a.length>0&&(n.push(`<div style="margin-top: 6px; padding-top: 6px; border-top: 1px solid ${this.isDarkMode()?"rgba(255,255,255,0.15)":"rgba(0,0,0,0.1)"}; font-size: 11px;">`),n.push(`<div style="margin-bottom: 4px; font-weight: 600; color: ${this.isDarkMode()?"rgba(249,250,251,0.8)":"rgba(0,0,0,0.7)"};">Other Properties:</div>`),a.forEach(l=>{const c=e[l];let d;typeof c=="object"&&c!==null?Array.isArray(c)?d=`[${c.length} items]`:d=`{${Object.keys(c).length} keys}`:d=String(c);const u=l.charAt(0).toUpperCase()+l.slice(1).replace(/_/g," ");n.push(`<div style="margin-bottom: 2px; font-family: monospace; font-size: 10px;"><strong>${u}:</strong> ${this.escapeHtml(d)}</div>`)}),n.push("</div>")),e.x!==void 0&&e.y,n.join("")}escapeHtml(e){const n=document.createElement("div");return n.textContent=e,n.innerHTML}onNodeMouseOver(e,n){Pt(e.currentTarget).attr("stroke-width",4).attr("stroke","#fbbf24"),this.showTooltip(e,n),this.emit("nodeHover",n)}onNodeMouseOut(e,n){Pt(e.currentTarget).attr("stroke-width",this.getNodeStrokeWidth(n)).attr("stroke",this.getNodeStrokeColor(n)),this.hideTooltip(),this.emit("nodeLeave",n)}getNodeRadius(e){if(this.options.sizeBy&&this.sizeScale){const n=e[this.options.sizeBy];if(n!=null)return this.sizeScale(n)}return this.options.nodeRadius}getNodeColor(e){if(this.options.customColorFunction){const s=this.options.customColorFunction(e);if(s)return s}const n=this.options.colorBy;if(this.colorScale){const s=e[n];if(s!=null)return this.colorScale(s)}const r=e.group||0,i=["#3b82f6","#10b981","#f59e0b","#ef4444","#6366f1","#ec4899","#06b6d4","#f97316","#14b8a6","#a855f7"];return i[(r-1)%i.length]}getNodeStrokeColor(e){return this.selectedNode&&this.selectedNode.id===e.id?"#fb923c":"#fff"}getNodeStrokeWidth(e){return this.selectedNode&&this.selectedNode.id===e.id?3:2}toggleNodeSelection(e){this.selectedNode&&this.selectedNode.id===e.id?this.deselectNode():this.selectNode(e)}selectNode(e){if(!e)return;const n=this.selectedNode;n&&(n.fx=null,n.fy=null),this.selectedNode=e,this.node&&this.node.attr("stroke",r=>this.getNodeStrokeColor(r)).attr("stroke-width",r=>this.getNodeStrokeWidth(r)),this.log.debug("Node selected",{nodeId:e.id}),this.emit("nodeSelected",{node:e,previousSelection:n})}deselectNode(){if(!this.selectedNode)return;const e=this.selectedNode;e.fx=null,e.fy=null,this.selectedNode=null,this.node&&this.node.attr("stroke",n=>this.getNodeStrokeColor(n)).attr("stroke-width",n=>this.getNodeStrokeWidth(n)),this.simulation&&this.simulation.alpha(.3).restart(),this.log.debug("Node deselected",{nodeId:e.id}),this.emit("nodeDeselected",{previousSelection:e})}getSelectedNode(){return this.selectedNode}handleResize(){if(this.isDestroyed||!this.container)return;const e=this.container.getBoundingClientRect(),n=e.width||this.options.width,r=e.height||this.options.height;n===this.options.width&&r===this.options.height||(this.options.width=n,this.options.height=r,this.svg&&this.svg.attr("width",n).attr("height",r).attr("viewBox",`0 0 ${n} ${r}`),this.simulation&&this.simulation.force("center",Oh(n/2,r/2)).alpha(Oe.SIMULATION_RESTART_ALPHA).restart(),this.emit("resize",{width:n,height:r}))}emit(e,n){this.eventHandlers&&this.eventHandlers[e]&&this.eventHandlers[e].forEach(r=>r(n))}on(e,n){this.eventHandlers||(this.eventHandlers={}),this.eventHandlers[e]||(this.eventHandlers[e]=[]),this.eventHandlers[e].push(n)}off(e,n){this.eventHandlers&&this.eventHandlers[e]&&(this.eventHandlers[e]=this.eventHandlers[e].filter(r=>r!==n))}addNodeIncremental(e=[],n=null,r=null){const i=n||`Node${this.data.nodes.length+1}`,s=r!==null?r:this.data.nodes.length>0?this.data.nodes[Math.floor(Math.random()*this.data.nodes.length)].group:1;let o=this.options.width/2,a=this.options.height/2;if(e.length>0){const d=this.data.nodes.filter(u=>e.includes(u.id));if(d.length>0){o=d.reduce((f,g)=>f+g.x,0)/d.length,a=d.reduce((f,g)=>f+g.y,0)/d.length;const u=Math.random()*2*Math.PI,h=50+Math.random()*50;o+=Math.cos(u)*h,a+=Math.sin(u)*h}}const l={id:i,group:s,centrality:.5,x:o,y:a,fx:o,fy:a};this.data.nodes.push(l);const c=[];if(e.forEach(d=>{if(this.data.nodes.find(u=>u.id===d)){const u={source:i,target:d};this.data.links.push(u),c.push(u)}}),this.computeScales(),this.nodeGroup){const d=this.options.renderMode==="avatars"?"text":"circle";this.node=this.nodeGroup.selectAll(d).data(this.data.nodes,h=>h.id);const u=this.node.enter().append(d);this.options.renderMode==="avatars"?u.attr("text-anchor","middle").attr("dominant-baseline","central").attr("font-size",h=>`${this.getNodeRadius(h)*2}px`).attr("cursor","pointer").attr("role","button").attr("tabindex",0).attr("aria-label",h=>`Node ${h.id}`).attr("x",h=>h.x).attr("y",h=>h.y).text(h=>h.avatar||"").attr("stroke",h=>this.getNodeStrokeColor(h)).attr("stroke-width",h=>this.getNodeStrokeWidth(h)*.5).attr("paint-order","stroke").call(this.createDragBehavior()).on("mouseover",(h,f)=>this.onNodeMouseOver(h,f)).on("mouseout",(h,f)=>this.onNodeMouseOut(h,f)).on("click",(h,f)=>{h.stopPropagation(),this.toggleNodeSelection(f),this.emit("nodeClick",f)}).on("keydown",(h,f)=>{(h.key==="Enter"||h.key===" ")&&(h.preventDefault(),this.toggleNodeSelection(f),this.emit("nodeClick",f))}):u.attr("r",h=>this.getNodeRadius(h)).attr("fill",h=>this.getNodeColor(h)).attr("stroke","#fff").attr("stroke-width",2).attr("cursor","pointer").attr("role","button").attr("tabindex",0).attr("aria-label",h=>`Node ${h.id}`).attr("cx",h=>h.x).attr("cy",h=>h.y).call(this.createDragBehavior()).on("mouseover",(h,f)=>this.onNodeMouseOver(h,f)).on("mouseout",(h,f)=>this.onNodeMouseOut(h,f)).on("click",(h,f)=>{h.stopPropagation(),this.toggleNodeSelection(f),this.emit("nodeClick",f)}).on("keydown",(h,f)=>{(h.key==="Enter"||h.key===" ")&&(h.preventDefault(),this.toggleNodeSelection(f),this.emit("nodeClick",f))}),this.node=u.merge(this.node),this.options.renderMode==="avatars"?this.node.attr("font-size",h=>`${this.getNodeRadius(h)*2}px`).text(h=>h.avatar||"").attr("stroke",h=>this.getNodeStrokeColor(h)).attr("stroke-width",h=>this.getNodeStrokeWidth(h)*.5):this.node.attr("r",h=>this.getNodeRadius(h)).attr("fill",h=>this.getNodeColor(h)).attr("stroke",h=>this.getNodeStrokeColor(h)).attr("stroke-width",h=>this.getNodeStrokeWidth(h))}if(this.linkGroup&&c.length>0){this.link=this.linkGroup.selectAll("line").data(this.data.links,u=>Qn(u));const d=this.link.enter().append("line").attr("stroke","var(--color-border)").attr("stroke-width",2).attr("stroke-opacity",.6).attr("x1",u=>(typeof u.source=="object"?u.source:this.data.nodes.find(f=>f.id===u.source))?.x||0).attr("y1",u=>(typeof u.source=="object"?u.source:this.data.nodes.find(f=>f.id===u.source))?.y||0).attr("x2",u=>(typeof u.target=="object"?u.target:this.data.nodes.find(f=>f.id===u.target))?.x||0).attr("y2",u=>(typeof u.target=="object"?u.target:this.data.nodes.find(f=>f.id===u.target))?.y||0).attr("aria-label",u=>`Link from ${at(u.source)} to ${at(u.target)}`);this.link=d.merge(this.link)}if(this.options.showLabels&&this.labelGroup){this.label=this.labelGroup.selectAll("text").data(this.data.nodes,u=>u.id);const d=this.label.enter().append("text").text(u=>u.id).attr("font-size","12px").attr("text-anchor","middle").attr("dx",0).attr("dy",u=>this.getNodeRadius(u)+15).attr("fill","var(--color-text-primary)").attr("x",u=>u.x).attr("y",u=>u.y).style("pointer-events","none").style("user-select","none").attr("aria-hidden","true");this.label=d.merge(this.label),this.label.attr("dy",u=>this.getNodeRadius(u)+15),this.updateLabelVisibility()}return this.simulation.nodes(this.data.nodes),this.simulation.force("link").links(this.data.links),this.simulation.force("collision").radius(d=>this.getNodeRadius(d)+Oe.COLLISION_PADDING),this.isReady?this.simulation.alpha(.3).restart():(this.isRendering=!0,requestAnimationFrame(()=>{this.simulation.alpha(Oe.SIMULATION_ALPHA).restart()})),setTimeout(()=>{const d=this.data.nodes.find(u=>u.id===i);d&&(d.fx=null,d.fy=null,this.simulation.alpha(.3).restart())},1e3),l}addNode(e=[],n=null,r=null){const i=n||`Node${this.data.nodes.length+1}`,s=r!==null?r:this.data.nodes.length>0?this.data.nodes[Math.floor(Math.random()*this.data.nodes.length)].group:1;let o=this.options.width/2,a=this.options.height/2;if(e.length>0){const c=this.data.nodes.filter(d=>e.includes(d.id));if(c.length>0){o=c.reduce((h,f)=>h+f.x,0)/c.length,a=c.reduce((h,f)=>h+f.y,0)/c.length;const d=Math.random()*2*Math.PI,u=50+Math.random()*50;o+=Math.cos(d)*u,a+=Math.sin(d)*u}}const l={id:i,group:s,centrality:.5,x:o,y:a,fx:o,fy:a};return this.data.nodes.push(l),e.forEach(c=>{this.data.nodes.find(d=>d.id===c)&&this.data.links.push({source:i,target:c})}),this.updateGraph(),setTimeout(()=>{const c=this.data.nodes.find(d=>d.id===i);c&&(c.fx=null,c.fy=null,this.simulation.alpha(.3).restart())},1e3),l}removeNode(e){if(!e)if(this.data.nodes.length>0)e=this.data.nodes[Math.floor(Math.random()*this.data.nodes.length)].id;else return!1;const n=this.data.nodes.findIndex(r=>r.id===e);return n===-1?!1:(this.data.nodes.splice(n,1),this.data.links=this.data.links.filter(r=>{const i=at(r.source),s=at(r.target);return i!==e&&s!==e}),this.linkKeyCache.clear(),this.updateGraph(),this.emit("nodeRemoved",e),!0)}removeNodeIncremental(e){if(!e)if(this.data.nodes.length>0)e=this.data.nodes[Math.floor(Math.random()*this.data.nodes.length)].id;else return!1;const n=this.data.nodes.findIndex(r=>r.id===e);return n===-1?!1:(this.data.nodes.splice(n,1),this.data.links=this.data.links.filter(r=>{const i=at(r.source),s=at(r.target);return i!==e&&s!==e}),this.linkKeyCache.clear(),this.computeScales(),this.nodeGroup&&(this.node=this.nodeGroup.selectAll("circle").data(this.data.nodes,r=>r.id),this.node.exit().remove()),this.linkGroup&&(this.link=this.linkGroup.selectAll("line").data(this.data.links,r=>Qn(r)),this.link.exit().remove()),this.options.showLabels&&this.labelGroup&&(this.label=this.labelGroup.selectAll("text").data(this.data.nodes,r=>r.id),this.label.exit().remove()),this.simulation.nodes(this.data.nodes),this.simulation.force("link").links(this.data.links),this.simulation.force("collision").radius(r=>this.getNodeRadius(r)+Oe.COLLISION_PADDING),this.isReady?this.simulation.alpha(.3).restart():(this.isRendering=!0,requestAnimationFrame(()=>{this.simulation.alpha(Oe.SIMULATION_ALPHA).restart()})),this.emit("nodeRemoved",e),!0)}addLinkIncremental(e,n){if(!e||!n)return!1;const r=this.data.nodes.find(l=>l.id===e),i=this.data.nodes.find(l=>l.id===n);if(!r||!i)return this.log.warn(`Cannot add link: nodes ${e} or ${n} not found`),!1;if(e===n)return this.log.warn("Cannot add self-loop"),!1;const s={source:e,target:n},o=Qn(s);if(this.data.links.some(l=>Qn(l)===o))return this.log.debug(`Link already exists: ${e} -> ${n}`),!1;if(this.data.links.push(s),this.linkGroup){this.link=this.linkGroup.selectAll("line").data(this.data.links,c=>Qn(c));const l=this.link.enter().append("line").attr("stroke","var(--color-border)").attr("stroke-width",2).attr("stroke-opacity",.6).attr("x1",c=>(typeof c.source=="object"?c.source:this.data.nodes.find(u=>u.id===c.source))?.x||0).attr("y1",c=>(typeof c.source=="object"?c.source:this.data.nodes.find(u=>u.id===c.source))?.y||0).attr("x2",c=>(typeof c.target=="object"?c.target:this.data.nodes.find(u=>u.id===c.target))?.x||0).attr("y2",c=>(typeof c.target=="object"?c.target:this.data.nodes.find(u=>u.id===c.target))?.y||0).attr("aria-label",c=>`Link from ${at(c.source)} to ${at(c.target)}`);this.link=l.merge(this.link)}return this.simulation.force("link").links(this.data.links),this.isReady?this.simulation.alpha(.3).restart():(this.isRendering=!0,requestAnimationFrame(()=>{this.simulation.alpha(Oe.SIMULATION_ALPHA).restart()})),this.emit("linkAdded",{source:e,target:n}),!0}addLink(e,n){if(!e||!n)return!1;const r=this.data.nodes.some(l=>l.id===e),i=this.data.nodes.some(l=>l.id===n);if(!r||!i)return this.log.warn(`Cannot add link: nodes ${e} or ${n} not found`),!1;if(e===n)return this.log.warn("Cannot add self-loop"),!1;const s={source:e,target:n},o=Qn(s);return this.data.links.some(l=>Qn(l)===o)?(this.log.debug(`Link already exists: ${e} -> ${n}`),!1):(this.data.links.push(s),this.updateGraph(),this.emit("linkAdded",{source:e,target:n}),!0)}getNodeIds(){return this.data.nodes.map(e=>e.id)}hasNode(e){return this.data.nodes.some(n=>n.id===e)}fitToView(){if(!this.data.nodes||this.data.nodes.length===0||!this.svg)return;let e=1/0,n=1/0,r=-1/0,i=-1/0;if(this.data.nodes.forEach(E=>{if(E.x!==void 0&&E.y!==void 0){const A=this.getNodeRadius(E);e=Math.min(e,E.x-A),n=Math.min(n,E.y-A),r=Math.max(r,E.x+A),i=Math.max(i,E.y+A)}}),e===1/0||n===1/0)return;const s=50;e-=s,n-=s,r+=s,i+=s;const o=r-e,a=i-n,l=(e+r)/2,c=(n+i)/2,d=this.options.width,u=this.options.height,h=d/o,f=u/a,g=Math.min(h,f,Oe.ZOOM_MAX)*.9,y=d/2-l*g,w=u/2-c*g,b=Ea.translate(y,w).scale(g);this.zoomBehavior&&this.svg&&this.svg.call(this.zoomBehavior.transform,b),this.g.attr("transform",b),this.currentZoom=g,this.updateLabelVisibility(),this.log.debug("Fitted graph to view",{scale:g,translateX:y,translateY:w})}lockPositions(){if(!this.data.nodes||this.data.nodes.length===0){this.log.warn("No nodes to lock");return}this.data.nodes.forEach(e=>{e.x!==void 0&&e.y!==void 0&&(e.fx=e.x,e.fy=e.y)}),this.simulation&&this.simulation.alpha(0).alphaTarget(0),this.log.debug("Node positions locked"),this.emit("positionsLocked")}unlockPositions(){if(!this.data.nodes||this.data.nodes.length===0){this.log.warn("No nodes to unlock");return}this.data.nodes.forEach(e=>{e.fx=null,e.fy=null}),this.simulation&&this.simulation.alpha(.3).alphaTarget(0).restart(),this.log.debug("Node positions unlocked"),this.emit("positionsUnlocked")}saveAsPNG(e="network-graph.png"){if(!this.svg||this.isDestroyed){this.log.warn("Cannot save PNG - graph not available");return}try{const n=this.svg.node();if(!n){this.log.warn("SVG element not found");return}const r=new XMLSerializer().serializeToString(n),i=new Image,s=new Blob([r],{type:"image/svg+xml;charset=utf-8"}),o=URL.createObjectURL(s);i.onload=()=>{const a=document.createElement("canvas");a.width=this.options.width,a.height=this.options.height;const l=a.getContext("2d");l.fillStyle="white",l.fillRect(0,0,a.width,a.height),l.drawImage(i,0,0),a.toBlob(c=>{if(c){const d=URL.createObjectURL(c),u=document.createElement("a");u.href=d,u.download=e,document.body.appendChild(u),u.click(),document.body.removeChild(u),URL.revokeObjectURL(d),this.log.info("PNG exported successfully",{filename:e})}},"image/png"),URL.revokeObjectURL(o)},i.onerror=()=>{this.log.error("Failed to load SVG for PNG export"),URL.revokeObjectURL(o)},i.src=o}catch(n){this.log.error("Failed to export PNG",{error:n.message,stack:n.stack})}}destroy(){this.isDestroyed||(this.log.debug("Destroying graph instance"),this.isDestroyed=!0,this.stabilizationCheckFrame&&(cancelAnimationFrame(this.stabilizationCheckFrame),this.stabilizationCheckFrame=null),this.simulation&&(this.simulation.stop(),this.simulation=null),this.resizeHandler&&(window.removeEventListener("resize",this.resizeHandler),this.resizeHandler=null),this.darkModeQuery&&this.darkModeHandler&&(this.darkModeQuery.removeEventListener("change",this.darkModeHandler),this.darkModeQuery=null,this.darkModeHandler=null),this.svg&&(this.svg.remove(),this.svg=null),this.tooltip&&(this.tooltip.remove(),this.tooltip=null),this.data={nodes:[],links:[]},this.linkKeyCache.clear(),this.eventHandlers={},this.log.info("Graph destroyed"))}}function IN(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function ts(t){var e=IN(t,"string");return typeof e=="symbol"?e:e+""}function At(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Yh(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ts(r.key),r)}}function kt(t,e,n){return e&&Yh(t.prototype,e),n&&Yh(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function yi(t){return yi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},yi(t)}function Qm(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Qm=function(){return!!t})()}function DN(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function PN(t,e){if(e&&(typeof e=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return DN(t)}function Yt(t,e,n){return e=yi(e),PN(t,Qm()?Reflect.construct(e,n||[],yi(t).constructor):e.apply(t,n))}function mc(t,e){return mc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},mc(t,e)}function Jt(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&mc(t,e)}function GN(t){if(Array.isArray(t))return t}function MN(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,o,a=[],l=!0,c=!1;try{if(s=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=s.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(d){c=!0,i=d}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return a}}function yc(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function ey(t,e){if(t){if(typeof t=="string")return yc(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?yc(t,e):void 0}}function ON(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vi(t,e){return GN(t)||MN(t,e)||ey(t,e)||ON()}var il={black:"#000000",silver:"#C0C0C0",gray:"#808080",grey:"#808080",white:"#FFFFFF",maroon:"#800000",red:"#FF0000",purple:"#800080",fuchsia:"#FF00FF",green:"#008000",lime:"#00FF00",olive:"#808000",yellow:"#FFFF00",navy:"#000080",blue:"#0000FF",teal:"#008080",aqua:"#00FFFF",darkblue:"#00008B",mediumblue:"#0000CD",darkgreen:"#006400",darkcyan:"#008B8B",deepskyblue:"#00BFFF",darkturquoise:"#00CED1",mediumspringgreen:"#00FA9A",springgreen:"#00FF7F",cyan:"#00FFFF",midnightblue:"#191970",dodgerblue:"#1E90FF",lightseagreen:"#20B2AA",forestgreen:"#228B22",seagreen:"#2E8B57",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",limegreen:"#32CD32",mediumseagreen:"#3CB371",turquoise:"#40E0D0",royalblue:"#4169E1",steelblue:"#4682B4",darkslateblue:"#483D8B",mediumturquoise:"#48D1CC",indigo:"#4B0082",darkolivegreen:"#556B2F",cadetblue:"#5F9EA0",cornflowerblue:"#6495ED",rebeccapurple:"#663399",mediumaquamarine:"#66CDAA",dimgray:"#696969",dimgrey:"#696969",slateblue:"#6A5ACD",olivedrab:"#6B8E23",slategray:"#708090",slategrey:"#708090",lightslategray:"#778899",lightslategrey:"#778899",mediumslateblue:"#7B68EE",lawngreen:"#7CFC00",chartreuse:"#7FFF00",aquamarine:"#7FFFD4",skyblue:"#87CEEB",lightskyblue:"#87CEFA",blueviolet:"#8A2BE2",darkred:"#8B0000",darkmagenta:"#8B008B",saddlebrown:"#8B4513",darkseagreen:"#8FBC8F",lightgreen:"#90EE90",mediumpurple:"#9370DB",darkviolet:"#9400D3",palegreen:"#98FB98",darkorchid:"#9932CC",yellowgreen:"#9ACD32",sienna:"#A0522D",brown:"#A52A2A",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",lightblue:"#ADD8E6",greenyellow:"#ADFF2F",paleturquoise:"#AFEEEE",lightsteelblue:"#B0C4DE",powderblue:"#B0E0E6",firebrick:"#B22222",darkgoldenrod:"#B8860B",mediumorchid:"#BA55D3",rosybrown:"#BC8F8F",darkkhaki:"#BDB76B",mediumvioletred:"#C71585",indianred:"#CD5C5C",peru:"#CD853F",chocolate:"#D2691E",tan:"#D2B48C",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",thistle:"#D8BFD8",orchid:"#DA70D6",goldenrod:"#DAA520",palevioletred:"#DB7093",crimson:"#DC143C",gainsboro:"#DCDCDC",plum:"#DDA0DD",burlywood:"#DEB887",lightcyan:"#E0FFFF",lavender:"#E6E6FA",darksalmon:"#E9967A",violet:"#EE82EE",palegoldenrod:"#EEE8AA",lightcoral:"#F08080",khaki:"#F0E68C",aliceblue:"#F0F8FF",honeydew:"#F0FFF0",azure:"#F0FFFF",sandybrown:"#F4A460",wheat:"#F5DEB3",beige:"#F5F5DC",whitesmoke:"#F5F5F5",mintcream:"#F5FFFA",ghostwhite:"#F8F8FF",salmon:"#FA8072",antiquewhite:"#FAEBD7",linen:"#FAF0E6",lightgoldenrodyellow:"#FAFAD2",oldlace:"#FDF5E6",magenta:"#FF00FF",deeppink:"#FF1493",orangered:"#FF4500",tomato:"#FF6347",hotpink:"#FF69B4",coral:"#FF7F50",darkorange:"#FF8C00",lightsalmon:"#FFA07A",orange:"#FFA500",lightpink:"#FFB6C1",pink:"#FFC0CB",gold:"#FFD700",peachpuff:"#FFDAB9",navajowhite:"#FFDEAD",moccasin:"#FFE4B5",bisque:"#FFE4C4",mistyrose:"#FFE4E1",blanchedalmond:"#FFEBCD",papayawhip:"#FFEFD5",lavenderblush:"#FFF0F5",seashell:"#FFF5EE",cornsilk:"#FFF8DC",lemonchiffon:"#FFFACD",floralwhite:"#FFFAF0",snow:"#FFFAFA",lightyellow:"#FFFFE0",ivory:"#FFFFF0"},ty=new Int8Array(4),bo=new Int32Array(ty.buffer,0,1),ny=new Float32Array(ty.buffer,0,1),FN=/^\s*rgba?\s*\(/,$N=/^\s*rgba?\s*\(\s*([0-9]*)\s*,\s*([0-9]*)\s*,\s*([0-9]*)(?:\s*,\s*(.*)?)?\)\s*$/;function zN(t){var e=0,n=0,r=0,i=1;if(t[0]==="#")t.length===4?(e=parseInt(t.charAt(1)+t.charAt(1),16),n=parseInt(t.charAt(2)+t.charAt(2),16),r=parseInt(t.charAt(3)+t.charAt(3),16)):(e=parseInt(t.charAt(1)+t.charAt(2),16),n=parseInt(t.charAt(3)+t.charAt(4),16),r=parseInt(t.charAt(5)+t.charAt(6),16)),t.length===9&&(i=parseInt(t.charAt(7)+t.charAt(8),16)/255);else if(FN.test(t)){var s=t.match($N);s&&(e=+s[1],n=+s[2],r=+s[3],s[4]&&(i=+s[4]))}return{r:e,g:n,b:r,a:i}}var si={};for(var Js in il)si[Js]=Or(il[Js]),si[il[Js]]=si[Js];function ry(t,e,n,r,i){return bo[0]=r<<24|n<<16|e<<8|t,bo[0]=bo[0]&4278190079,ny[0]}function Or(t){if(t=t.toLowerCase(),typeof si[t]<"u")return si[t];var e=zN(t),n=e.r,r=e.g,i=e.b,s=e.a;s=s*255|0;var o=ry(n,r,i,s);return si[t]=o,o}function BN(t,e){ny[0]=Or(t);var n=bo[0],r=n&255,i=n>>8&255,s=n>>16&255,o=n>>24&255;return[r,i,s,o]}var sl={};function iy(t){if(typeof sl[t]<"u")return sl[t];var e=(t&16711680)>>>16,n=(t&65280)>>>8,r=t&255,i=255,s=ry(e,n,r,i);return sl[t]=s,s}function Jh(t,e,n,r){return n+(e<<8)+(t<<16)}function Qh(t,e,n,r,i,s){var o=Math.floor(n/s*i),a=Math.floor(t.drawingBufferHeight/s-r/s*i),l=new Uint8Array(4);t.bindFramebuffer(t.FRAMEBUFFER,e),t.readPixels(o,a,1,1,t.RGBA,t.UNSIGNED_BYTE,l);var c=vi(l,4),d=c[0],u=c[1],h=c[2],f=c[3];return[d,u,h,f]}function se(t,e,n){return(e=ts(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ef(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function we(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ef(Object(n),!0).forEach(function(r){se(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ef(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function VN(t,e){for(;!{}.hasOwnProperty.call(t,e)&&(t=yi(t))!==null;);return t}function vc(){return vc=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=VN(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},vc.apply(null,arguments)}function sy(t,e,n,r){var i=vc(yi(t.prototype),e,n);return typeof i=="function"?function(s){return i.apply(n,s)}:i}function UN(t){return t.normalized?1:t.size}function ol(t){var e=0;return t.forEach(function(n){return e+=UN(n)}),e}function oy(t,e,n){var r=t==="VERTEX"?e.VERTEX_SHADER:e.FRAGMENT_SHADER,i=e.createShader(r);if(i===null)throw new Error("loadShader: error while creating the shader");e.shaderSource(i,n),e.compileShader(i);var s=e.getShaderParameter(i,e.COMPILE_STATUS);if(!s){var o=e.getShaderInfoLog(i);throw e.deleteShader(i),new Error(`loadShader: error while compiling the shader:
`.concat(o,`
`).concat(n))}return i}function jN(t,e){return oy("VERTEX",t,e)}function HN(t,e){return oy("FRAGMENT",t,e)}function WN(t,e){var n=t.createProgram();if(n===null)throw new Error("loadProgram: error while creating the program.");var r,i;for(r=0,i=e.length;r<i;r++)t.attachShader(n,e[r]);t.linkProgram(n);var s=t.getProgramParameter(n,t.LINK_STATUS);if(!s)throw t.deleteProgram(n),new Error("loadProgram: error while linking the program.");return n}function tf(t){var e=t.gl,n=t.buffer,r=t.program,i=t.vertexShader,s=t.fragmentShader;e.deleteShader(i),e.deleteShader(s),e.deleteProgram(r),e.deleteBuffer(n)}function nf(t){return t%1===0?t.toFixed(1):t.toString()}var rf=`#define PICKING_MODE
`,qN=se(se(se(se(se(se(se(se({},WebGL2RenderingContext.BOOL,1),WebGL2RenderingContext.BYTE,1),WebGL2RenderingContext.UNSIGNED_BYTE,1),WebGL2RenderingContext.SHORT,2),WebGL2RenderingContext.UNSIGNED_SHORT,2),WebGL2RenderingContext.INT,4),WebGL2RenderingContext.UNSIGNED_INT,4),WebGL2RenderingContext.FLOAT,4),ay=(function(){function t(e,n,r){At(this,t),se(this,"array",new Float32Array),se(this,"constantArray",new Float32Array),se(this,"capacity",0),se(this,"verticesCount",0);var i=this.getDefinition();if(this.VERTICES=i.VERTICES,this.VERTEX_SHADER_SOURCE=i.VERTEX_SHADER_SOURCE,this.FRAGMENT_SHADER_SOURCE=i.FRAGMENT_SHADER_SOURCE,this.UNIFORMS=i.UNIFORMS,this.ATTRIBUTES=i.ATTRIBUTES,this.METHOD=i.METHOD,this.CONSTANT_ATTRIBUTES="CONSTANT_ATTRIBUTES"in i?i.CONSTANT_ATTRIBUTES:[],this.CONSTANT_DATA="CONSTANT_DATA"in i?i.CONSTANT_DATA:[],this.isInstanced="CONSTANT_ATTRIBUTES"in i,this.ATTRIBUTES_ITEMS_COUNT=ol(this.ATTRIBUTES),this.STRIDE=this.VERTICES*this.ATTRIBUTES_ITEMS_COUNT,this.renderer=r,this.normalProgram=this.getProgramInfo("normal",e,i.VERTEX_SHADER_SOURCE,i.FRAGMENT_SHADER_SOURCE,null),this.pickProgram=n?this.getProgramInfo("pick",e,rf+i.VERTEX_SHADER_SOURCE,rf+i.FRAGMENT_SHADER_SOURCE,n):null,this.isInstanced){var s=ol(this.CONSTANT_ATTRIBUTES);if(this.CONSTANT_DATA.length!==this.VERTICES)throw new Error("Program: error while getting constant data (expected ".concat(this.VERTICES," items, received ").concat(this.CONSTANT_DATA.length," instead)"));this.constantArray=new Float32Array(this.CONSTANT_DATA.length*s);for(var o=0;o<this.CONSTANT_DATA.length;o++){var a=this.CONSTANT_DATA[o];if(a.length!==s)throw new Error("Program: error while getting constant data (one vector has ".concat(a.length," items instead of ").concat(s,")"));for(var l=0;l<a.length;l++)this.constantArray[o*s+l]=a[l]}this.STRIDE=this.ATTRIBUTES_ITEMS_COUNT}}return kt(t,[{key:"kill",value:function(){tf(this.normalProgram),this.pickProgram&&(tf(this.pickProgram),this.pickProgram=null)}},{key:"getProgramInfo",value:function(n,r,i,s,o){var a=this.getDefinition(),l=r.createBuffer();if(l===null)throw new Error("Program: error while creating the WebGL buffer.");var c=jN(r,i),d=HN(r,s),u=WN(r,[c,d]),h={};a.UNIFORMS.forEach(function(y){var w=r.getUniformLocation(u,y);w&&(h[y]=w)});var f={};a.ATTRIBUTES.forEach(function(y){f[y.name]=r.getAttribLocation(u,y.name)});var g;if("CONSTANT_ATTRIBUTES"in a&&(a.CONSTANT_ATTRIBUTES.forEach(function(y){f[y.name]=r.getAttribLocation(u,y.name)}),g=r.createBuffer(),g===null))throw new Error("Program: error while creating the WebGL constant buffer.");return{name:n,program:u,gl:r,frameBuffer:o,buffer:l,constantBuffer:g||{},uniformLocations:h,attributeLocations:f,isPicking:n==="pick",vertexShader:c,fragmentShader:d}}},{key:"bindProgram",value:function(n){var r=this,i=0,s=n.gl,o=n.buffer;this.isInstanced?(s.bindBuffer(s.ARRAY_BUFFER,n.constantBuffer),i=0,this.CONSTANT_ATTRIBUTES.forEach(function(a){return i+=r.bindAttribute(a,n,i,!1)}),s.bufferData(s.ARRAY_BUFFER,this.constantArray,s.STATIC_DRAW),s.bindBuffer(s.ARRAY_BUFFER,n.buffer),i=0,this.ATTRIBUTES.forEach(function(a){return i+=r.bindAttribute(a,n,i,!0)}),s.bufferData(s.ARRAY_BUFFER,this.array,s.DYNAMIC_DRAW)):(s.bindBuffer(s.ARRAY_BUFFER,o),i=0,this.ATTRIBUTES.forEach(function(a){return i+=r.bindAttribute(a,n,i)}),s.bufferData(s.ARRAY_BUFFER,this.array,s.DYNAMIC_DRAW)),s.bindBuffer(s.ARRAY_BUFFER,null)}},{key:"unbindProgram",value:function(n){var r=this;this.isInstanced?(this.CONSTANT_ATTRIBUTES.forEach(function(i){return r.unbindAttribute(i,n,!1)}),this.ATTRIBUTES.forEach(function(i){return r.unbindAttribute(i,n,!0)})):this.ATTRIBUTES.forEach(function(i){return r.unbindAttribute(i,n)})}},{key:"bindAttribute",value:function(n,r,i,s){var o=qN[n.type];if(typeof o!="number")throw new Error('Program.bind: yet unsupported attribute type "'.concat(n.type,'"'));var a=r.attributeLocations[n.name],l=r.gl;if(a!==-1){l.enableVertexAttribArray(a);var c=this.isInstanced?(s?this.ATTRIBUTES_ITEMS_COUNT:ol(this.CONSTANT_ATTRIBUTES))*Float32Array.BYTES_PER_ELEMENT:this.ATTRIBUTES_ITEMS_COUNT*Float32Array.BYTES_PER_ELEMENT;if(l.vertexAttribPointer(a,n.size,n.type,n.normalized||!1,c,i),this.isInstanced&&s)if(l instanceof WebGL2RenderingContext)l.vertexAttribDivisor(a,1);else{var d=l.getExtension("ANGLE_instanced_arrays");d&&d.vertexAttribDivisorANGLE(a,1)}}return n.size*o}},{key:"unbindAttribute",value:function(n,r,i){var s=r.attributeLocations[n.name],o=r.gl;if(s!==-1&&(o.disableVertexAttribArray(s),this.isInstanced&&i))if(o instanceof WebGL2RenderingContext)o.vertexAttribDivisor(s,0);else{var a=o.getExtension("ANGLE_instanced_arrays");a&&a.vertexAttribDivisorANGLE(s,0)}}},{key:"reallocate",value:function(n){n!==this.capacity&&(this.capacity=n,this.verticesCount=this.VERTICES*n,this.array=new Float32Array(this.isInstanced?this.capacity*this.ATTRIBUTES_ITEMS_COUNT:this.verticesCount*this.ATTRIBUTES_ITEMS_COUNT))}},{key:"hasNothingToRender",value:function(){return this.verticesCount===0}},{key:"renderProgram",value:function(n,r){var i=r.gl,s=r.program;i.enable(i.BLEND),i.useProgram(s),this.setUniforms(n,r),this.drawWebGL(this.METHOD,r)}},{key:"render",value:function(n){this.hasNothingToRender()||(this.pickProgram&&(this.pickProgram.gl.viewport(0,0,n.width*n.pixelRatio/n.downSizingRatio,n.height*n.pixelRatio/n.downSizingRatio),this.bindProgram(this.pickProgram),this.renderProgram(we(we({},n),{},{pixelRatio:n.pixelRatio/n.downSizingRatio}),this.pickProgram),this.unbindProgram(this.pickProgram)),this.normalProgram.gl.viewport(0,0,n.width*n.pixelRatio,n.height*n.pixelRatio),this.bindProgram(this.normalProgram),this.renderProgram(n,this.normalProgram),this.unbindProgram(this.normalProgram))}},{key:"drawWebGL",value:function(n,r){var i=r.gl,s=r.frameBuffer;if(i.bindFramebuffer(i.FRAMEBUFFER,s),!this.isInstanced)i.drawArrays(n,0,this.verticesCount);else if(i instanceof WebGL2RenderingContext)i.drawArraysInstanced(n,0,this.VERTICES,this.capacity);else{var o=i.getExtension("ANGLE_instanced_arrays");o&&o.drawArraysInstancedANGLE(n,0,this.VERTICES,this.capacity)}}}])})(),ly=(function(t){function e(){return At(this,e),Yt(this,e,arguments)}return Jt(e,t),kt(e,[{key:"kill",value:function(){sy(e,"kill",this)([])}},{key:"process",value:function(r,i,s){var o=i*this.STRIDE;if(s.hidden){for(var a=o+this.STRIDE;o<a;o++)this.array[o]=0;return}return this.processVisibleItem(iy(r),o,s)}}])})(ay),Sd=(function(t){function e(){var n;At(this,e);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return n=Yt(this,e,[].concat(i)),se(n,"drawLabel",void 0),n}return Jt(e,t),kt(e,[{key:"kill",value:function(){sy(e,"kill",this)([])}},{key:"process",value:function(r,i,s,o,a){var l=i*this.STRIDE;if(a.hidden||s.hidden||o.hidden){for(var c=l+this.STRIDE;l<c;l++)this.array[l]=0;return}return this.processVisibleItem(iy(r),l,s,o,a)}}])})(ay);function KN(t,e){return(function(){function n(r,i,s){At(this,n),se(this,"drawLabel",e),this.programs=t.map(function(o){return new o(r,i,s)})}return kt(n,[{key:"reallocate",value:function(i){this.programs.forEach(function(s){return s.reallocate(i)})}},{key:"process",value:function(i,s,o,a,l){this.programs.forEach(function(c){return c.process(i,s,o,a,l)})}},{key:"render",value:function(i){this.programs.forEach(function(s){return s.render(i)})}},{key:"kill",value:function(){this.programs.forEach(function(i){return i.kill()})}}])})()}function XN(t,e,n,r,i){var s=i.edgeLabelSize,o=i.edgeLabelFont,a=i.edgeLabelWeight,l=i.edgeLabelColor.attribute?e[i.edgeLabelColor.attribute]||i.edgeLabelColor.color||"#000":i.edgeLabelColor.color,c=e.label;if(c){t.fillStyle=l,t.font="".concat(a," ").concat(s,"px ").concat(o);var d=n.size,u=r.size,h=n.x,f=n.y,g=r.x,y=r.y,w=(h+g)/2,b=(f+y)/2,E=g-h,A=y-f,v=Math.sqrt(E*E+A*A);if(!(v<d+u)){h+=E*d/v,f+=A*d/v,g-=E*u/v,y-=A*u/v,w=(h+g)/2,b=(f+y)/2,E=g-h,A=y-f,v=Math.sqrt(E*E+A*A);var S=t.measureText(c).width;if(S>v){var L="";for(c=c+L,S=t.measureText(c).width;S>v&&c.length>1;)c=c.slice(0,-2)+L,S=t.measureText(c).width;if(c.length<4)return}var G;E>0?A>0?G=Math.acos(E/v):G=Math.asin(A/v):A>0?G=Math.acos(E/v)+Math.PI:G=Math.asin(E/v)+Math.PI/2,t.save(),t.translate(w,b),t.rotate(G),t.fillText(c,-S/2,e.size/2+s),t.restore()}}}function cy(t,e,n){if(e.label){var r=n.labelSize,i=n.labelFont,s=n.labelWeight,o=n.labelColor.attribute?e[n.labelColor.attribute]||n.labelColor.color||"#000":n.labelColor.color;t.fillStyle=o,t.font="".concat(s," ").concat(r,"px ").concat(i),t.fillText(e.label,e.x+e.size+3,e.y+r/3)}}function ZN(t,e,n){var r=n.labelSize,i=n.labelFont,s=n.labelWeight;t.font="".concat(s," ").concat(r,"px ").concat(i),t.fillStyle="#FFF",t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=8,t.shadowColor="#000";var o=2;if(typeof e.label=="string"){var a=t.measureText(e.label).width,l=Math.round(a+5),c=Math.round(r+2*o),d=Math.max(e.size,r/2)+o,u=Math.asin(c/2/d),h=Math.sqrt(Math.abs(Math.pow(d,2)-Math.pow(c/2,2)));t.beginPath(),t.moveTo(e.x+h,e.y+c/2),t.lineTo(e.x+d+l,e.y+c/2),t.lineTo(e.x+d+l,e.y-c/2),t.lineTo(e.x+h,e.y-c/2),t.arc(e.x,e.y,d,u,-u),t.closePath(),t.fill()}else t.beginPath(),t.arc(e.x,e.y,e.size+o,0,Math.PI*2),t.closePath(),t.fill();t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0,cy(t,e,n)}var YN=`
precision highp float;

varying vec4 v_color;
varying vec2 v_diffVector;
varying float v_radius;

uniform float u_correctionRatio;

const vec4 transparent = vec4(0.0, 0.0, 0.0, 0.0);

void main(void) {
  float border = u_correctionRatio * 2.0;
  float dist = length(v_diffVector) - v_radius + border;

  // No antialiasing for picking mode:
  #ifdef PICKING_MODE
  if (dist > border)
    gl_FragColor = transparent;
  else
    gl_FragColor = v_color;

  #else
  float t = 0.0;
  if (dist > border)
    t = 1.0;
  else if (dist > 0.0)
    t = dist / border;

  gl_FragColor = mix(v_color, transparent, t);
  #endif
}
`,JN=YN,QN=`
attribute vec4 a_id;
attribute vec4 a_color;
attribute vec2 a_position;
attribute float a_size;
attribute float a_angle;

uniform mat3 u_matrix;
uniform float u_sizeRatio;
uniform float u_correctionRatio;

varying vec4 v_color;
varying vec2 v_diffVector;
varying float v_radius;
varying float v_border;

const float bias = 255.0 / 254.0;

void main() {
  float size = a_size * u_correctionRatio / u_sizeRatio * 4.0;
  vec2 diffVector = size * vec2(cos(a_angle), sin(a_angle));
  vec2 position = a_position + diffVector;
  gl_Position = vec4(
    (u_matrix * vec3(position, 1)).xy,
    0,
    1
  );

  v_diffVector = diffVector;
  v_radius = size / 2.0;

  #ifdef PICKING_MODE
  // For picking mode, we use the ID as the color:
  v_color = a_id;
  #else
  // For normal mode, we use the color:
  v_color = a_color;
  #endif

  v_color.a *= bias;
}
`,eL=QN,dy=WebGLRenderingContext,sf=dy.UNSIGNED_BYTE,al=dy.FLOAT,tL=["u_sizeRatio","u_correctionRatio","u_matrix"],Aa=(function(t){function e(){return At(this,e),Yt(this,e,arguments)}return Jt(e,t),kt(e,[{key:"getDefinition",value:function(){return{VERTICES:3,VERTEX_SHADER_SOURCE:eL,FRAGMENT_SHADER_SOURCE:JN,METHOD:WebGLRenderingContext.TRIANGLES,UNIFORMS:tL,ATTRIBUTES:[{name:"a_position",size:2,type:al},{name:"a_size",size:1,type:al},{name:"a_color",size:4,type:sf,normalized:!0},{name:"a_id",size:4,type:sf,normalized:!0}],CONSTANT_ATTRIBUTES:[{name:"a_angle",size:1,type:al}],CONSTANT_DATA:[[e.ANGLE_1],[e.ANGLE_2],[e.ANGLE_3]]}}},{key:"processVisibleItem",value:function(r,i,s){var o=this.array,a=Or(s.color);o[i++]=s.x,o[i++]=s.y,o[i++]=s.size,o[i++]=a,o[i++]=r}},{key:"setUniforms",value:function(r,i){var s=i.gl,o=i.uniformLocations,a=o.u_sizeRatio,l=o.u_correctionRatio,c=o.u_matrix;s.uniform1f(l,r.correctionRatio),s.uniform1f(a,r.sizeRatio),s.uniformMatrix3fv(c,!1,r.matrix)}}])})(ly);se(Aa,"ANGLE_1",0);se(Aa,"ANGLE_2",2*Math.PI/3);se(Aa,"ANGLE_3",4*Math.PI/3);var nL=`
precision mediump float;

varying vec4 v_color;

void main(void) {
  gl_FragColor = v_color;
}
`,rL=nL,iL=`
attribute vec2 a_position;
attribute vec2 a_normal;
attribute float a_radius;
attribute vec3 a_barycentric;

#ifdef PICKING_MODE
attribute vec4 a_id;
#else
attribute vec4 a_color;
#endif

uniform mat3 u_matrix;
uniform float u_sizeRatio;
uniform float u_correctionRatio;
uniform float u_minEdgeThickness;
uniform float u_lengthToThicknessRatio;
uniform float u_widenessToThicknessRatio;

varying vec4 v_color;

const float bias = 255.0 / 254.0;

void main() {
  float minThickness = u_minEdgeThickness;

  float normalLength = length(a_normal);
  vec2 unitNormal = a_normal / normalLength;

  // These first computations are taken from edge.vert.glsl and
  // edge.clamped.vert.glsl. Please read it to get better comments on what's
  // happening:
  float pixelsThickness = max(normalLength / u_sizeRatio, minThickness);
  float webGLThickness = pixelsThickness * u_correctionRatio;
  float webGLNodeRadius = a_radius * 2.0 * u_correctionRatio / u_sizeRatio;
  float webGLArrowHeadLength = webGLThickness * u_lengthToThicknessRatio * 2.0;
  float webGLArrowHeadThickness = webGLThickness * u_widenessToThicknessRatio;

  float da = a_barycentric.x;
  float db = a_barycentric.y;
  float dc = a_barycentric.z;

  vec2 delta = vec2(
      da * (webGLNodeRadius * unitNormal.y)
    + db * ((webGLNodeRadius + webGLArrowHeadLength) * unitNormal.y + webGLArrowHeadThickness * unitNormal.x)
    + dc * ((webGLNodeRadius + webGLArrowHeadLength) * unitNormal.y - webGLArrowHeadThickness * unitNormal.x),

      da * (-webGLNodeRadius * unitNormal.x)
    + db * (-(webGLNodeRadius + webGLArrowHeadLength) * unitNormal.x + webGLArrowHeadThickness * unitNormal.y)
    + dc * (-(webGLNodeRadius + webGLArrowHeadLength) * unitNormal.x - webGLArrowHeadThickness * unitNormal.y)
  );

  vec2 position = (u_matrix * vec3(a_position + delta, 1)).xy;

  gl_Position = vec4(position, 0, 1);

  #ifdef PICKING_MODE
  // For picking mode, we use the ID as the color:
  v_color = a_id;
  #else
  // For normal mode, we use the color:
  v_color = a_color;
  #endif

  v_color.a *= bias;
}
`,sL=iL,uy=WebGLRenderingContext,of=uy.UNSIGNED_BYTE,Qs=uy.FLOAT,oL=["u_matrix","u_sizeRatio","u_correctionRatio","u_minEdgeThickness","u_lengthToThicknessRatio","u_widenessToThicknessRatio"],hy={extremity:"target",lengthToThicknessRatio:2.5,widenessToThicknessRatio:2};function fy(t){var e=we(we({},hy),{});return(function(n){function r(){return At(this,r),Yt(this,r,arguments)}return Jt(r,n),kt(r,[{key:"getDefinition",value:function(){return{VERTICES:3,VERTEX_SHADER_SOURCE:sL,FRAGMENT_SHADER_SOURCE:rL,METHOD:WebGLRenderingContext.TRIANGLES,UNIFORMS:oL,ATTRIBUTES:[{name:"a_position",size:2,type:Qs},{name:"a_normal",size:2,type:Qs},{name:"a_radius",size:1,type:Qs},{name:"a_color",size:4,type:of,normalized:!0},{name:"a_id",size:4,type:of,normalized:!0}],CONSTANT_ATTRIBUTES:[{name:"a_barycentric",size:3,type:Qs}],CONSTANT_DATA:[[1,0,0],[0,1,0],[0,0,1]]}}},{key:"processVisibleItem",value:function(s,o,a,l,c){if(e.extremity==="source"){var d=[l,a];a=d[0],l=d[1]}var u=c.size||1,h=l.size||1,f=a.x,g=a.y,y=l.x,w=l.y,b=Or(c.color),E=y-f,A=w-g,v=E*E+A*A,S=0,L=0;v&&(v=1/Math.sqrt(v),S=-A*v*u,L=E*v*u);var G=this.array;G[o++]=y,G[o++]=w,G[o++]=-S,G[o++]=-L,G[o++]=h,G[o++]=b,G[o++]=s}},{key:"setUniforms",value:function(s,o){var a=o.gl,l=o.uniformLocations,c=l.u_matrix,d=l.u_sizeRatio,u=l.u_correctionRatio,h=l.u_minEdgeThickness,f=l.u_lengthToThicknessRatio,g=l.u_widenessToThicknessRatio;a.uniformMatrix3fv(c,!1,s.matrix),a.uniform1f(d,s.sizeRatio),a.uniform1f(u,s.correctionRatio),a.uniform1f(h,s.minEdgeThickness),a.uniform1f(f,e.lengthToThicknessRatio),a.uniform1f(g,e.widenessToThicknessRatio)}}])})(Sd)}fy();var aL=`
precision mediump float;

varying vec4 v_color;
varying vec2 v_normal;
varying float v_thickness;
varying float v_feather;

const vec4 transparent = vec4(0.0, 0.0, 0.0, 0.0);

void main(void) {
  // We only handle antialiasing for normal mode:
  #ifdef PICKING_MODE
  gl_FragColor = v_color;
  #else
  float dist = length(v_normal) * v_thickness;

  float t = smoothstep(
    v_thickness - v_feather,
    v_thickness,
    dist
  );

  gl_FragColor = mix(v_color, transparent, t);
  #endif
}
`,py=aL,lL=`
attribute vec4 a_id;
attribute vec4 a_color;
attribute vec2 a_normal;
attribute float a_normalCoef;
attribute vec2 a_positionStart;
attribute vec2 a_positionEnd;
attribute float a_positionCoef;
attribute float a_radius;
attribute float a_radiusCoef;

uniform mat3 u_matrix;
uniform float u_zoomRatio;
uniform float u_sizeRatio;
uniform float u_pixelRatio;
uniform float u_correctionRatio;
uniform float u_minEdgeThickness;
uniform float u_lengthToThicknessRatio;
uniform float u_feather;

varying vec4 v_color;
varying vec2 v_normal;
varying float v_thickness;
varying float v_feather;

const float bias = 255.0 / 254.0;

void main() {
  float minThickness = u_minEdgeThickness;

  float radius = a_radius * a_radiusCoef;
  vec2 normal = a_normal * a_normalCoef;
  vec2 position = a_positionStart * (1.0 - a_positionCoef) + a_positionEnd * a_positionCoef;

  float normalLength = length(normal);
  vec2 unitNormal = normal / normalLength;

  // These first computations are taken from edge.vert.glsl. Please read it to
  // get better comments on what's happening:
  float pixelsThickness = max(normalLength, minThickness * u_sizeRatio);
  float webGLThickness = pixelsThickness * u_correctionRatio / u_sizeRatio;

  // Here, we move the point to leave space for the arrow head:
  float direction = sign(radius);
  float webGLNodeRadius = direction * radius * 2.0 * u_correctionRatio / u_sizeRatio;
  float webGLArrowHeadLength = webGLThickness * u_lengthToThicknessRatio * 2.0;

  vec2 compensationVector = vec2(-direction * unitNormal.y, direction * unitNormal.x) * (webGLNodeRadius + webGLArrowHeadLength);

  // Here is the proper position of the vertex
  gl_Position = vec4((u_matrix * vec3(position + unitNormal * webGLThickness + compensationVector, 1)).xy, 0, 1);

  v_thickness = webGLThickness / u_zoomRatio;

  v_normal = unitNormal;

  v_feather = u_feather * u_correctionRatio / u_zoomRatio / u_pixelRatio * 2.0;

  #ifdef PICKING_MODE
  // For picking mode, we use the ID as the color:
  v_color = a_id;
  #else
  // For normal mode, we use the color:
  v_color = a_color;
  #endif

  v_color.a *= bias;
}
`,cL=lL,gy=WebGLRenderingContext,af=gy.UNSIGNED_BYTE,vr=gy.FLOAT,dL=["u_matrix","u_zoomRatio","u_sizeRatio","u_correctionRatio","u_pixelRatio","u_feather","u_minEdgeThickness","u_lengthToThicknessRatio"],uL={lengthToThicknessRatio:hy.lengthToThicknessRatio};function my(t){var e=we(we({},uL),{});return(function(n){function r(){return At(this,r),Yt(this,r,arguments)}return Jt(r,n),kt(r,[{key:"getDefinition",value:function(){return{VERTICES:6,VERTEX_SHADER_SOURCE:cL,FRAGMENT_SHADER_SOURCE:py,METHOD:WebGLRenderingContext.TRIANGLES,UNIFORMS:dL,ATTRIBUTES:[{name:"a_positionStart",size:2,type:vr},{name:"a_positionEnd",size:2,type:vr},{name:"a_normal",size:2,type:vr},{name:"a_color",size:4,type:af,normalized:!0},{name:"a_id",size:4,type:af,normalized:!0},{name:"a_radius",size:1,type:vr}],CONSTANT_ATTRIBUTES:[{name:"a_positionCoef",size:1,type:vr},{name:"a_normalCoef",size:1,type:vr},{name:"a_radiusCoef",size:1,type:vr}],CONSTANT_DATA:[[0,1,0],[0,-1,0],[1,1,1],[1,1,1],[0,-1,0],[1,-1,-1]]}}},{key:"processVisibleItem",value:function(s,o,a,l,c){var d=c.size||1,u=a.x,h=a.y,f=l.x,g=l.y,y=Or(c.color),w=f-u,b=g-h,E=l.size||1,A=w*w+b*b,v=0,S=0;A&&(A=1/Math.sqrt(A),v=-b*A*d,S=w*A*d);var L=this.array;L[o++]=u,L[o++]=h,L[o++]=f,L[o++]=g,L[o++]=v,L[o++]=S,L[o++]=y,L[o++]=s,L[o++]=E}},{key:"setUniforms",value:function(s,o){var a=o.gl,l=o.uniformLocations,c=l.u_matrix,d=l.u_zoomRatio,u=l.u_feather,h=l.u_pixelRatio,f=l.u_correctionRatio,g=l.u_sizeRatio,y=l.u_minEdgeThickness,w=l.u_lengthToThicknessRatio;a.uniformMatrix3fv(c,!1,s.matrix),a.uniform1f(d,s.zoomRatio),a.uniform1f(g,s.sizeRatio),a.uniform1f(f,s.correctionRatio),a.uniform1f(h,s.pixelRatio),a.uniform1f(u,s.antiAliasingFeather),a.uniform1f(y,s.minEdgeThickness),a.uniform1f(w,e.lengthToThicknessRatio)}}])})(Sd)}my();function hL(t){return KN([my(),fy()])}var fL=hL(),pL=fL,gL=`
attribute vec4 a_id;
attribute vec4 a_color;
attribute vec2 a_normal;
attribute float a_normalCoef;
attribute vec2 a_positionStart;
attribute vec2 a_positionEnd;
attribute float a_positionCoef;

uniform mat3 u_matrix;
uniform float u_sizeRatio;
uniform float u_zoomRatio;
uniform float u_pixelRatio;
uniform float u_correctionRatio;
uniform float u_minEdgeThickness;
uniform float u_feather;

varying vec4 v_color;
varying vec2 v_normal;
varying float v_thickness;
varying float v_feather;

const float bias = 255.0 / 254.0;

void main() {
  float minThickness = u_minEdgeThickness;

  vec2 normal = a_normal * a_normalCoef;
  vec2 position = a_positionStart * (1.0 - a_positionCoef) + a_positionEnd * a_positionCoef;

  float normalLength = length(normal);
  vec2 unitNormal = normal / normalLength;

  // We require edges to be at least "minThickness" pixels thick *on screen*
  // (so we need to compensate the size ratio):
  float pixelsThickness = max(normalLength, minThickness * u_sizeRatio);

  // Then, we need to retrieve the normalized thickness of the edge in the WebGL
  // referential (in a ([0, 1], [0, 1]) space), using our "magic" correction
  // ratio:
  float webGLThickness = pixelsThickness * u_correctionRatio / u_sizeRatio;

  // Here is the proper position of the vertex
  gl_Position = vec4((u_matrix * vec3(position + unitNormal * webGLThickness, 1)).xy, 0, 1);

  // For the fragment shader though, we need a thickness that takes the "magic"
  // correction ratio into account (as in webGLThickness), but so that the
  // antialiasing effect does not depend on the zoom level. So here's yet
  // another thickness version:
  v_thickness = webGLThickness / u_zoomRatio;

  v_normal = unitNormal;

  v_feather = u_feather * u_correctionRatio / u_zoomRatio / u_pixelRatio * 2.0;

  #ifdef PICKING_MODE
  // For picking mode, we use the ID as the color:
  v_color = a_id;
  #else
  // For normal mode, we use the color:
  v_color = a_color;
  #endif

  v_color.a *= bias;
}
`,mL=gL,yy=WebGLRenderingContext,lf=yy.UNSIGNED_BYTE,Pi=yy.FLOAT,yL=["u_matrix","u_zoomRatio","u_sizeRatio","u_correctionRatio","u_pixelRatio","u_feather","u_minEdgeThickness"],vL=(function(t){function e(){return At(this,e),Yt(this,e,arguments)}return Jt(e,t),kt(e,[{key:"getDefinition",value:function(){return{VERTICES:6,VERTEX_SHADER_SOURCE:mL,FRAGMENT_SHADER_SOURCE:py,METHOD:WebGLRenderingContext.TRIANGLES,UNIFORMS:yL,ATTRIBUTES:[{name:"a_positionStart",size:2,type:Pi},{name:"a_positionEnd",size:2,type:Pi},{name:"a_normal",size:2,type:Pi},{name:"a_color",size:4,type:lf,normalized:!0},{name:"a_id",size:4,type:lf,normalized:!0}],CONSTANT_ATTRIBUTES:[{name:"a_positionCoef",size:1,type:Pi},{name:"a_normalCoef",size:1,type:Pi}],CONSTANT_DATA:[[0,1],[0,-1],[1,1],[1,1],[0,-1],[1,-1]]}}},{key:"processVisibleItem",value:function(r,i,s,o,a){var l=a.size||1,c=s.x,d=s.y,u=o.x,h=o.y,f=Or(a.color),g=u-c,y=h-d,w=g*g+y*y,b=0,E=0;w&&(w=1/Math.sqrt(w),b=-y*w*l,E=g*w*l);var A=this.array;A[i++]=c,A[i++]=d,A[i++]=u,A[i++]=h,A[i++]=b,A[i++]=E,A[i++]=f,A[i++]=r}},{key:"setUniforms",value:function(r,i){var s=i.gl,o=i.uniformLocations,a=o.u_matrix,l=o.u_zoomRatio,c=o.u_feather,d=o.u_pixelRatio,u=o.u_correctionRatio,h=o.u_sizeRatio,f=o.u_minEdgeThickness;s.uniformMatrix3fv(a,!1,r.matrix),s.uniform1f(l,r.zoomRatio),s.uniform1f(h,r.sizeRatio),s.uniform1f(u,r.correctionRatio),s.uniform1f(d,r.pixelRatio),s.uniform1f(c,r.antiAliasingFeather),s.uniform1f(f,r.minEdgeThickness)}}])})(Sd);function Is(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var eo={exports:{}},cf;function _L(){if(cf)return eo.exports;cf=1;var t=typeof Reflect=="object"?Reflect:null,e=t&&typeof t.apply=="function"?t.apply:function(S,L,G){return Function.prototype.apply.call(S,L,G)},n;t&&typeof t.ownKeys=="function"?n=t.ownKeys:Object.getOwnPropertySymbols?n=function(S){return Object.getOwnPropertyNames(S).concat(Object.getOwnPropertySymbols(S))}:n=function(S){return Object.getOwnPropertyNames(S)};function r(v){console&&console.warn&&console.warn(v)}var i=Number.isNaN||function(S){return S!==S};function s(){s.init.call(this)}eo.exports=s,eo.exports.once=b,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var o=10;function a(v){if(typeof v!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof v)}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(v){if(typeof v!="number"||v<0||i(v))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+v+".");o=v}}),s.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(S){if(typeof S!="number"||S<0||i(S))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+S+".");return this._maxListeners=S,this};function l(v){return v._maxListeners===void 0?s.defaultMaxListeners:v._maxListeners}s.prototype.getMaxListeners=function(){return l(this)},s.prototype.emit=function(S){for(var L=[],G=1;G<arguments.length;G++)L.push(arguments[G]);var V=S==="error",F=this._events;if(F!==void 0)V=V&&F.error===void 0;else if(!V)return!1;if(V){var $;if(L.length>0&&($=L[0]),$ instanceof Error)throw $;var H=new Error("Unhandled error."+($?" ("+$.message+")":""));throw H.context=$,H}var z=F[S];if(z===void 0)return!1;if(typeof z=="function")e(z,this,L);else for(var N=z.length,k=g(z,N),G=0;G<N;++G)e(k[G],this,L);return!0};function c(v,S,L,G){var V,F,$;if(a(L),F=v._events,F===void 0?(F=v._events=Object.create(null),v._eventsCount=0):(F.newListener!==void 0&&(v.emit("newListener",S,L.listener?L.listener:L),F=v._events),$=F[S]),$===void 0)$=F[S]=L,++v._eventsCount;else if(typeof $=="function"?$=F[S]=G?[L,$]:[$,L]:G?$.unshift(L):$.push(L),V=l(v),V>0&&$.length>V&&!$.warned){$.warned=!0;var H=new Error("Possible EventEmitter memory leak detected. "+$.length+" "+String(S)+" listeners added. Use emitter.setMaxListeners() to increase limit");H.name="MaxListenersExceededWarning",H.emitter=v,H.type=S,H.count=$.length,r(H)}return v}s.prototype.addListener=function(S,L){return c(this,S,L,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(S,L){return c(this,S,L,!0)};function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function u(v,S,L){var G={fired:!1,wrapFn:void 0,target:v,type:S,listener:L},V=d.bind(G);return V.listener=L,G.wrapFn=V,V}s.prototype.once=function(S,L){return a(L),this.on(S,u(this,S,L)),this},s.prototype.prependOnceListener=function(S,L){return a(L),this.prependListener(S,u(this,S,L)),this},s.prototype.removeListener=function(S,L){var G,V,F,$,H;if(a(L),V=this._events,V===void 0)return this;if(G=V[S],G===void 0)return this;if(G===L||G.listener===L)--this._eventsCount===0?this._events=Object.create(null):(delete V[S],V.removeListener&&this.emit("removeListener",S,G.listener||L));else if(typeof G!="function"){for(F=-1,$=G.length-1;$>=0;$--)if(G[$]===L||G[$].listener===L){H=G[$].listener,F=$;break}if(F<0)return this;F===0?G.shift():y(G,F),G.length===1&&(V[S]=G[0]),V.removeListener!==void 0&&this.emit("removeListener",S,H||L)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(S){var L,G,V;if(G=this._events,G===void 0)return this;if(G.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):G[S]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete G[S]),this;if(arguments.length===0){var F=Object.keys(G),$;for(V=0;V<F.length;++V)$=F[V],$!=="removeListener"&&this.removeAllListeners($);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(L=G[S],typeof L=="function")this.removeListener(S,L);else if(L!==void 0)for(V=L.length-1;V>=0;V--)this.removeListener(S,L[V]);return this};function h(v,S,L){var G=v._events;if(G===void 0)return[];var V=G[S];return V===void 0?[]:typeof V=="function"?L?[V.listener||V]:[V]:L?w(V):g(V,V.length)}s.prototype.listeners=function(S){return h(this,S,!0)},s.prototype.rawListeners=function(S){return h(this,S,!1)},s.listenerCount=function(v,S){return typeof v.listenerCount=="function"?v.listenerCount(S):f.call(v,S)},s.prototype.listenerCount=f;function f(v){var S=this._events;if(S!==void 0){var L=S[v];if(typeof L=="function")return 1;if(L!==void 0)return L.length}return 0}s.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]};function g(v,S){for(var L=new Array(S),G=0;G<S;++G)L[G]=v[G];return L}function y(v,S){for(;S+1<v.length;S++)v[S]=v[S+1];v.pop()}function w(v){for(var S=new Array(v.length),L=0;L<S.length;++L)S[L]=v[L].listener||v[L];return S}function b(v,S){return new Promise(function(L,G){function V($){v.removeListener(S,F),G($)}function F(){typeof v.removeListener=="function"&&v.removeListener("error",V),L([].slice.call(arguments))}A(v,S,F,{once:!0}),S!=="error"&&E(v,V,{once:!0})})}function E(v,S,L){typeof v.on=="function"&&A(v,"error",S,L)}function A(v,S,L,G){if(typeof v.on=="function")G.once?v.once(S,L):v.on(S,L);else if(typeof v.addEventListener=="function")v.addEventListener(S,function V(F){G.once&&v.removeEventListener(S,V),L(F)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof v)}return eo.exports}var vy=_L(),Td=(function(t){function e(){var n;return At(this,e),n=Yt(this,e),n.rawEmitter=n,n}return Jt(e,t),kt(e)})(vy.EventEmitter),ll,df;function _y(){return df||(df=1,ll=function(e){return e!==null&&typeof e=="object"&&typeof e.addUndirectedEdgeWithKey=="function"&&typeof e.dropNode=="function"&&typeof e.multi=="boolean"}),ll}var bL=_y();const wL=Is(bL);var EL=function(e){return e},AL=function(e){return e*e},kL=function(e){return e*(2-e)},xL=function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)},CL=function(e){return e*e*e},SL=function(e){return--e*e*e+1},TL=function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)},RL={linear:EL,quadraticIn:AL,quadraticOut:kL,quadraticInOut:xL,cubicIn:CL,cubicOut:SL,cubicInOut:TL},NL={easing:"quadraticInOut",duration:150};function en(){return Float32Array.of(1,0,0,0,1,0,0,0,1)}function to(t,e,n){return t[0]=e,t[4]=typeof n=="number"?n:e,t}function uf(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[3]=-n,t[4]=r,t}function hf(t,e,n){return t[6]=e,t[7]=n,t}function er(t,e){var n=t[0],r=t[1],i=t[2],s=t[3],o=t[4],a=t[5],l=t[6],c=t[7],d=t[8],u=e[0],h=e[1],f=e[2],g=e[3],y=e[4],w=e[5],b=e[6],E=e[7],A=e[8];return t[0]=u*n+h*s+f*l,t[1]=u*r+h*o+f*c,t[2]=u*i+h*a+f*d,t[3]=g*n+y*s+w*l,t[4]=g*r+y*o+w*c,t[5]=g*i+y*a+w*d,t[6]=b*n+E*s+A*l,t[7]=b*r+E*o+A*c,t[8]=b*i+E*a+A*d,t}function _c(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,r=t[0],i=t[1],s=t[3],o=t[4],a=t[6],l=t[7],c=e.x,d=e.y;return{x:c*r+d*s+a*n,y:c*i+d*o+l*n}}function LL(t,e){var n=t.height/t.width,r=e.height/e.width;return n<1&&r>1||n>1&&r<1?1:Math.min(Math.max(r,1/r),Math.max(1/n,n))}function Gi(t,e,n,r,i){var s=t.angle,o=t.ratio,a=t.x,l=t.y,c=e.width,d=e.height,u=en(),h=Math.min(c,d)-2*r,f=LL(e,n);return i?(er(u,hf(en(),a,l)),er(u,to(en(),o)),er(u,uf(en(),s)),er(u,to(en(),c/h/2/f,d/h/2/f))):(er(u,to(en(),2*(h/c)*f,2*(h/d)*f)),er(u,uf(en(),-s)),er(u,to(en(),1/o)),er(u,hf(en(),-a,-l))),u}function IL(t,e,n){var r=_c(t,{x:Math.cos(e.angle),y:Math.sin(e.angle)},0),i=r.x,s=r.y;return 1/Math.sqrt(Math.pow(i,2)+Math.pow(s,2))/n.width}function DL(t){if(!t.order)return{x:[0,1],y:[0,1]};var e=1/0,n=-1/0,r=1/0,i=-1/0;return t.forEachNode(function(s,o){var a=o.x,l=o.y;a<e&&(e=a),a>n&&(n=a),l<r&&(r=l),l>i&&(i=l)}),{x:[e,n],y:[r,i]}}function PL(t){if(!wL(t))throw new Error("Sigma: invalid graph instance.");t.forEachNode(function(e,n){if(!Number.isFinite(n.x)||!Number.isFinite(n.y))throw new Error("Sigma: Coordinates of node ".concat(e," are invalid. A node must have a numeric 'x' and 'y' attribute."))})}function GL(t,e,n){var r=document.createElement(t);if(e)for(var i in e)r.style[i]=e[i];if(n)for(var s in n)r.setAttribute(s,n[s]);return r}function ff(){return typeof window.devicePixelRatio<"u"?window.devicePixelRatio:1}function pf(t,e,n){return n.sort(function(r,i){var s=e(r)||0,o=e(i)||0;return s<o?-1:s>o?1:0})}function gf(t){var e=vi(t.x,2),n=e[0],r=e[1],i=vi(t.y,2),s=i[0],o=i[1],a=Math.max(r-n,o-s),l=(r+n)/2,c=(o+s)/2;(a===0||Math.abs(a)===1/0||isNaN(a))&&(a=1),isNaN(l)&&(l=0),isNaN(c)&&(c=0);var d=function(h){return{x:.5+(h.x-l)/a,y:.5+(h.y-c)/a}};return d.applyTo=function(u){u.x=.5+(u.x-l)/a,u.y=.5+(u.y-c)/a},d.inverse=function(u){return{x:l+a*(u.x-.5),y:c+a*(u.y-.5)}},d.ratio=a,d}function bc(t){"@babel/helpers - typeof";return bc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bc(t)}function mf(t,e){var n=e.size;if(n!==0){var r=t.length;t.length+=n;var i=0;e.forEach(function(s){t[r+i]=s,i++})}}function cl(t){t=t||{};for(var e=0,n=arguments.length<=1?0:arguments.length-1;e<n;e++){var r=e+1<1||arguments.length<=e+1?void 0:arguments[e+1];r&&Object.assign(t,r)}return t}var Rd={hideEdgesOnMove:!1,hideLabelsOnMove:!1,renderLabels:!0,renderEdgeLabels:!1,enableEdgeEvents:!1,defaultNodeColor:"#999",defaultNodeType:"circle",defaultEdgeColor:"#ccc",defaultEdgeType:"line",labelFont:"Arial",labelSize:14,labelWeight:"normal",labelColor:{color:"#000"},edgeLabelFont:"Arial",edgeLabelSize:14,edgeLabelWeight:"normal",edgeLabelColor:{attribute:"color"},stagePadding:30,defaultDrawEdgeLabel:XN,defaultDrawNodeLabel:cy,defaultDrawNodeHover:ZN,minEdgeThickness:1.7,antiAliasingFeather:1,dragTimeout:100,draggedEventsTolerance:3,inertiaDuration:200,inertiaRatio:3,zoomDuration:250,zoomingRatio:1.7,doubleClickTimeout:300,doubleClickZoomingRatio:2.2,doubleClickZoomingDuration:200,tapMoveTolerance:10,zoomToSizeRatioFunction:Math.sqrt,itemSizesReference:"screen",autoRescale:!0,autoCenter:!0,labelDensity:1,labelGridCellSize:100,labelRenderedSizeThreshold:6,nodeReducer:null,edgeReducer:null,zIndex:!1,minCameraRatio:null,maxCameraRatio:null,enableCameraZooming:!0,enableCameraPanning:!0,enableCameraRotation:!0,cameraPanBoundaries:null,allowInvalidContainer:!1,nodeProgramClasses:{},nodeHoverProgramClasses:{},edgeProgramClasses:{}},ML={circle:Aa},OL={arrow:pL,line:vL};function dl(t){if(typeof t.labelDensity!="number"||t.labelDensity<0)throw new Error("Settings: invalid `labelDensity`. Expecting a positive number.");var e=t.minCameraRatio,n=t.maxCameraRatio;if(typeof e=="number"&&typeof n=="number"&&n<e)throw new Error("Settings: invalid camera ratio boundaries. Expecting `maxCameraRatio` to be greater than `minCameraRatio`.")}function FL(t){var e=cl({},Rd,t);return e.nodeProgramClasses=cl({},ML,e.nodeProgramClasses),e.edgeProgramClasses=cl({},OL,e.edgeProgramClasses),e}var no=1.5,yf=(function(t){function e(){var n;return At(this,e),n=Yt(this,e),se(n,"x",.5),se(n,"y",.5),se(n,"angle",0),se(n,"ratio",1),se(n,"minRatio",null),se(n,"maxRatio",null),se(n,"enabledZooming",!0),se(n,"enabledPanning",!0),se(n,"enabledRotation",!0),se(n,"clean",null),se(n,"nextFrame",null),se(n,"previousState",null),se(n,"enabled",!0),n.previousState=n.getState(),n}return Jt(e,t),kt(e,[{key:"enable",value:function(){return this.enabled=!0,this}},{key:"disable",value:function(){return this.enabled=!1,this}},{key:"getState",value:function(){return{x:this.x,y:this.y,angle:this.angle,ratio:this.ratio}}},{key:"hasState",value:function(r){return this.x===r.x&&this.y===r.y&&this.ratio===r.ratio&&this.angle===r.angle}},{key:"getPreviousState",value:function(){var r=this.previousState;return r?{x:r.x,y:r.y,angle:r.angle,ratio:r.ratio}:null}},{key:"getBoundedRatio",value:function(r){var i=r;return typeof this.minRatio=="number"&&(i=Math.max(i,this.minRatio)),typeof this.maxRatio=="number"&&(i=Math.min(i,this.maxRatio)),i}},{key:"validateState",value:function(r){var i={};return this.enabledPanning&&typeof r.x=="number"&&(i.x=r.x),this.enabledPanning&&typeof r.y=="number"&&(i.y=r.y),this.enabledZooming&&typeof r.ratio=="number"&&(i.ratio=this.getBoundedRatio(r.ratio)),this.enabledRotation&&typeof r.angle=="number"&&(i.angle=r.angle),this.clean?this.clean(we(we({},this.getState()),i)):i}},{key:"isAnimated",value:function(){return!!this.nextFrame}},{key:"setState",value:function(r){if(!this.enabled)return this;this.previousState=this.getState();var i=this.validateState(r);return typeof i.x=="number"&&(this.x=i.x),typeof i.y=="number"&&(this.y=i.y),typeof i.ratio=="number"&&(this.ratio=i.ratio),typeof i.angle=="number"&&(this.angle=i.angle),this.hasState(this.previousState)||this.emit("updated",this.getState()),this}},{key:"updateState",value:function(r){return this.setState(r(this.getState())),this}},{key:"animate",value:function(r){var i=this,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=arguments.length>2?arguments[2]:void 0;if(!o)return new Promise(function(f){return i.animate(r,s,f)});if(this.enabled){var a=we(we({},NL),s),l=this.validateState(r),c=typeof a.easing=="function"?a.easing:RL[a.easing],d=Date.now(),u=this.getState(),h=function(){var g=(Date.now()-d)/a.duration;if(g>=1){i.nextFrame=null,i.setState(l),i.animationCallback&&(i.animationCallback.call(null),i.animationCallback=void 0);return}var y=c(g),w={};typeof l.x=="number"&&(w.x=u.x+(l.x-u.x)*y),typeof l.y=="number"&&(w.y=u.y+(l.y-u.y)*y),i.enabledRotation&&typeof l.angle=="number"&&(w.angle=u.angle+(l.angle-u.angle)*y),typeof l.ratio=="number"&&(w.ratio=u.ratio+(l.ratio-u.ratio)*y),i.setState(w),i.nextFrame=requestAnimationFrame(h)};this.nextFrame?(cancelAnimationFrame(this.nextFrame),this.animationCallback&&this.animationCallback.call(null),this.nextFrame=requestAnimationFrame(h)):h(),this.animationCallback=o}}},{key:"animatedZoom",value:function(r){return r?typeof r=="number"?this.animate({ratio:this.ratio/r}):this.animate({ratio:this.ratio/(r.factor||no)},r):this.animate({ratio:this.ratio/no})}},{key:"animatedUnzoom",value:function(r){return r?typeof r=="number"?this.animate({ratio:this.ratio*r}):this.animate({ratio:this.ratio*(r.factor||no)},r):this.animate({ratio:this.ratio*no})}},{key:"animatedReset",value:function(r){return this.animate({x:.5,y:.5,ratio:1,angle:0},r)}},{key:"copy",value:function(){return e.from(this.getState())}}],[{key:"from",value:function(r){var i=new e;return i.setState(r)}}])})(Td);function rn(t,e){var n=e.getBoundingClientRect();return{x:t.clientX-n.left,y:t.clientY-n.top}}function In(t,e){var n=we(we({},rn(t,e)),{},{sigmaDefaultPrevented:!1,preventSigmaDefault:function(){n.sigmaDefaultPrevented=!0},original:t});return n}function Mi(t){var e="x"in t?t:we(we({},t.touches[0]||t.previousTouches[0]),{},{original:t.original,sigmaDefaultPrevented:t.sigmaDefaultPrevented,preventSigmaDefault:function(){t.sigmaDefaultPrevented=!0,e.sigmaDefaultPrevented=!0}});return e}function $L(t,e){return we(we({},In(t,e)),{},{delta:by(t)})}var zL=2;function wo(t){for(var e=[],n=0,r=Math.min(t.length,zL);n<r;n++)e.push(t[n]);return e}function Oi(t,e,n){var r={touches:wo(t.touches).map(function(i){return rn(i,n)}),previousTouches:e.map(function(i){return rn(i,n)}),sigmaDefaultPrevented:!1,preventSigmaDefault:function(){r.sigmaDefaultPrevented=!0},original:t};return r}function by(t){if(typeof t.deltaY<"u")return t.deltaY*-3/360;if(typeof t.detail<"u")return t.detail/-9;throw new Error("Captor: could not extract delta from event.")}var wy=(function(t){function e(n,r){var i;return At(this,e),i=Yt(this,e),i.container=n,i.renderer=r,i}return Jt(e,t),kt(e)})(Td),BL=["doubleClickTimeout","doubleClickZoomingDuration","doubleClickZoomingRatio","dragTimeout","draggedEventsTolerance","inertiaDuration","inertiaRatio","zoomDuration","zoomingRatio"],VL=BL.reduce(function(t,e){return we(we({},t),{},se({},e,Rd[e]))},{}),UL=(function(t){function e(n,r){var i;return At(this,e),i=Yt(this,e,[n,r]),se(i,"enabled",!0),se(i,"draggedEvents",0),se(i,"downStartTime",null),se(i,"lastMouseX",null),se(i,"lastMouseY",null),se(i,"isMouseDown",!1),se(i,"isMoving",!1),se(i,"movingTimeout",null),se(i,"startCameraState",null),se(i,"clicks",0),se(i,"doubleClickTimeout",null),se(i,"currentWheelDirection",0),se(i,"settings",VL),i.handleClick=i.handleClick.bind(i),i.handleRightClick=i.handleRightClick.bind(i),i.handleDown=i.handleDown.bind(i),i.handleUp=i.handleUp.bind(i),i.handleMove=i.handleMove.bind(i),i.handleWheel=i.handleWheel.bind(i),i.handleLeave=i.handleLeave.bind(i),i.handleEnter=i.handleEnter.bind(i),n.addEventListener("click",i.handleClick,{capture:!1}),n.addEventListener("contextmenu",i.handleRightClick,{capture:!1}),n.addEventListener("mousedown",i.handleDown,{capture:!1}),n.addEventListener("wheel",i.handleWheel,{capture:!1}),n.addEventListener("mouseleave",i.handleLeave,{capture:!1}),n.addEventListener("mouseenter",i.handleEnter,{capture:!1}),document.addEventListener("mousemove",i.handleMove,{capture:!1}),document.addEventListener("mouseup",i.handleUp,{capture:!1}),i}return Jt(e,t),kt(e,[{key:"kill",value:function(){var r=this.container;r.removeEventListener("click",this.handleClick),r.removeEventListener("contextmenu",this.handleRightClick),r.removeEventListener("mousedown",this.handleDown),r.removeEventListener("wheel",this.handleWheel),r.removeEventListener("mouseleave",this.handleLeave),r.removeEventListener("mouseenter",this.handleEnter),document.removeEventListener("mousemove",this.handleMove),document.removeEventListener("mouseup",this.handleUp)}},{key:"handleClick",value:function(r){var i=this;if(this.enabled){if(this.clicks++,this.clicks===2)return this.clicks=0,typeof this.doubleClickTimeout=="number"&&(clearTimeout(this.doubleClickTimeout),this.doubleClickTimeout=null),this.handleDoubleClick(r);setTimeout(function(){i.clicks=0,i.doubleClickTimeout=null},this.settings.doubleClickTimeout),this.draggedEvents<this.settings.draggedEventsTolerance&&this.emit("click",In(r,this.container))}}},{key:"handleRightClick",value:function(r){this.enabled&&this.emit("rightClick",In(r,this.container))}},{key:"handleDoubleClick",value:function(r){if(this.enabled){r.preventDefault(),r.stopPropagation();var i=In(r,this.container);if(this.emit("doubleClick",i),!i.sigmaDefaultPrevented){var s=this.renderer.getCamera(),o=s.getBoundedRatio(s.getState().ratio/this.settings.doubleClickZoomingRatio);s.animate(this.renderer.getViewportZoomedState(rn(r,this.container),o),{easing:"quadraticInOut",duration:this.settings.doubleClickZoomingDuration})}}}},{key:"handleDown",value:function(r){if(this.enabled){if(r.button===0){this.startCameraState=this.renderer.getCamera().getState();var i=rn(r,this.container),s=i.x,o=i.y;this.lastMouseX=s,this.lastMouseY=o,this.draggedEvents=0,this.downStartTime=Date.now(),this.isMouseDown=!0}this.emit("mousedown",In(r,this.container))}}},{key:"handleUp",value:function(r){var i=this;if(!(!this.enabled||!this.isMouseDown)){var s=this.renderer.getCamera();this.isMouseDown=!1,typeof this.movingTimeout=="number"&&(clearTimeout(this.movingTimeout),this.movingTimeout=null);var o=rn(r,this.container),a=o.x,l=o.y,c=s.getState(),d=s.getPreviousState()||{x:0,y:0};this.isMoving?s.animate({x:c.x+this.settings.inertiaRatio*(c.x-d.x),y:c.y+this.settings.inertiaRatio*(c.y-d.y)},{duration:this.settings.inertiaDuration,easing:"quadraticOut"}):(this.lastMouseX!==a||this.lastMouseY!==l)&&s.setState({x:c.x,y:c.y}),this.isMoving=!1,setTimeout(function(){var u=i.draggedEvents>0;i.draggedEvents=0,u&&i.renderer.getSetting("hideEdgesOnMove")&&i.renderer.refresh()},0),this.emit("mouseup",In(r,this.container))}}},{key:"handleMove",value:function(r){var i=this;if(this.enabled){var s=In(r,this.container);if(this.emit("mousemovebody",s),(r.target===this.container||r.composedPath()[0]===this.container)&&this.emit("mousemove",s),!s.sigmaDefaultPrevented&&this.isMouseDown){this.isMoving=!0,this.draggedEvents++,typeof this.movingTimeout=="number"&&clearTimeout(this.movingTimeout),this.movingTimeout=window.setTimeout(function(){i.movingTimeout=null,i.isMoving=!1},this.settings.dragTimeout);var o=this.renderer.getCamera(),a=rn(r,this.container),l=a.x,c=a.y,d=this.renderer.viewportToFramedGraph({x:this.lastMouseX,y:this.lastMouseY}),u=this.renderer.viewportToFramedGraph({x:l,y:c}),h=d.x-u.x,f=d.y-u.y,g=o.getState(),y=g.x+h,w=g.y+f;o.setState({x:y,y:w}),this.lastMouseX=l,this.lastMouseY=c,r.preventDefault(),r.stopPropagation()}}}},{key:"handleLeave",value:function(r){this.emit("mouseleave",In(r,this.container))}},{key:"handleEnter",value:function(r){this.emit("mouseenter",In(r,this.container))}},{key:"handleWheel",value:function(r){var i=this,s=this.renderer.getCamera();if(!(!this.enabled||!s.enabledZooming)){var o=by(r);if(o){var a=$L(r,this.container);if(this.emit("wheel",a),a.sigmaDefaultPrevented){r.preventDefault(),r.stopPropagation();return}var l=s.getState().ratio,c=o>0?1/this.settings.zoomingRatio:this.settings.zoomingRatio,d=s.getBoundedRatio(l*c),u=o>0?1:-1,h=Date.now();l!==d&&(r.preventDefault(),r.stopPropagation(),!(this.currentWheelDirection===u&&this.lastWheelTriggerTime&&h-this.lastWheelTriggerTime<this.settings.zoomDuration/5)&&(s.animate(this.renderer.getViewportZoomedState(rn(r,this.container),d),{easing:"quadraticOut",duration:this.settings.zoomDuration},function(){i.currentWheelDirection=0}),this.currentWheelDirection=u,this.lastWheelTriggerTime=h))}}}},{key:"setSettings",value:function(r){this.settings=r}}])})(wy),jL=["dragTimeout","inertiaDuration","inertiaRatio","doubleClickTimeout","doubleClickZoomingRatio","doubleClickZoomingDuration","tapMoveTolerance"],HL=jL.reduce(function(t,e){return we(we({},t),{},se({},e,Rd[e]))},{}),WL=(function(t){function e(n,r){var i;return At(this,e),i=Yt(this,e,[n,r]),se(i,"enabled",!0),se(i,"isMoving",!1),se(i,"hasMoved",!1),se(i,"touchMode",0),se(i,"startTouchesPositions",[]),se(i,"lastTouches",[]),se(i,"lastTap",null),se(i,"settings",HL),i.handleStart=i.handleStart.bind(i),i.handleLeave=i.handleLeave.bind(i),i.handleMove=i.handleMove.bind(i),n.addEventListener("touchstart",i.handleStart,{capture:!1}),n.addEventListener("touchcancel",i.handleLeave,{capture:!1}),document.addEventListener("touchend",i.handleLeave,{capture:!1,passive:!1}),document.addEventListener("touchmove",i.handleMove,{capture:!1,passive:!1}),i}return Jt(e,t),kt(e,[{key:"kill",value:function(){var r=this.container;r.removeEventListener("touchstart",this.handleStart),r.removeEventListener("touchcancel",this.handleLeave),document.removeEventListener("touchend",this.handleLeave),document.removeEventListener("touchmove",this.handleMove)}},{key:"getDimensions",value:function(){return{width:this.container.offsetWidth,height:this.container.offsetHeight}}},{key:"handleStart",value:function(r){var i=this;if(this.enabled){r.preventDefault();var s=wo(r.touches);if(this.touchMode=s.length,this.startCameraState=this.renderer.getCamera().getState(),this.startTouchesPositions=s.map(function(f){return rn(f,i.container)}),this.touchMode===2){var o=vi(this.startTouchesPositions,2),a=o[0],l=a.x,c=a.y,d=o[1],u=d.x,h=d.y;this.startTouchesAngle=Math.atan2(h-c,u-l),this.startTouchesDistance=Math.sqrt(Math.pow(u-l,2)+Math.pow(h-c,2))}this.emit("touchdown",Oi(r,this.lastTouches,this.container)),this.lastTouches=s,this.lastTouchesPositions=this.startTouchesPositions}}},{key:"handleLeave",value:function(r){if(!(!this.enabled||!this.startTouchesPositions.length)){switch(r.cancelable&&r.preventDefault(),this.movingTimeout&&(this.isMoving=!1,clearTimeout(this.movingTimeout)),this.touchMode){case 2:if(r.touches.length===1){this.handleStart(r),r.preventDefault();break}case 1:if(this.isMoving){var i=this.renderer.getCamera(),s=i.getState(),o=i.getPreviousState()||{x:0,y:0};i.animate({x:s.x+this.settings.inertiaRatio*(s.x-o.x),y:s.y+this.settings.inertiaRatio*(s.y-o.y)},{duration:this.settings.inertiaDuration,easing:"quadraticOut"})}this.hasMoved=!1,this.isMoving=!1,this.touchMode=0;break}if(this.emit("touchup",Oi(r,this.lastTouches,this.container)),!r.touches.length){var a=rn(this.lastTouches[0],this.container),l=this.startTouchesPositions[0],c=Math.pow(a.x-l.x,2)+Math.pow(a.y-l.y,2);if(!r.touches.length&&c<Math.pow(this.settings.tapMoveTolerance,2))if(this.lastTap&&Date.now()-this.lastTap.time<this.settings.doubleClickTimeout){var d=Oi(r,this.lastTouches,this.container);if(this.emit("doubletap",d),this.lastTap=null,!d.sigmaDefaultPrevented){var u=this.renderer.getCamera(),h=u.getBoundedRatio(u.getState().ratio/this.settings.doubleClickZoomingRatio);u.animate(this.renderer.getViewportZoomedState(a,h),{easing:"quadraticInOut",duration:this.settings.doubleClickZoomingDuration})}}else{var f=Oi(r,this.lastTouches,this.container);this.emit("tap",f),this.lastTap={time:Date.now(),position:f.touches[0]||f.previousTouches[0]}}}this.lastTouches=wo(r.touches),this.startTouchesPositions=[]}}},{key:"handleMove",value:function(r){var i=this;if(!(!this.enabled||!this.startTouchesPositions.length)){r.preventDefault();var s=wo(r.touches),o=s.map(function(fe){return rn(fe,i.container)}),a=this.lastTouches;this.lastTouches=s,this.lastTouchesPositions=o;var l=Oi(r,a,this.container);if(this.emit("touchmove",l),!l.sigmaDefaultPrevented&&(this.hasMoved||(this.hasMoved=o.some(function(fe,me){var W=i.startTouchesPositions[me];return W&&(fe.x!==W.x||fe.y!==W.y)})),!!this.hasMoved)){this.isMoving=!0,this.movingTimeout&&clearTimeout(this.movingTimeout),this.movingTimeout=window.setTimeout(function(){i.isMoving=!1},this.settings.dragTimeout);var c=this.renderer.getCamera(),d=this.startCameraState,u=this.renderer.getSetting("stagePadding");switch(this.touchMode){case 1:{var h=this.renderer.viewportToFramedGraph((this.startTouchesPositions||[])[0]),f=h.x,g=h.y,y=this.renderer.viewportToFramedGraph(o[0]),w=y.x,b=y.y;c.setState({x:d.x+f-w,y:d.y+g-b});break}case 2:{var E={x:.5,y:.5,angle:0,ratio:1},A=o[0],v=A.x,S=A.y,L=o[1],G=L.x,V=L.y,F=Math.atan2(V-S,G-v)-this.startTouchesAngle,$=Math.hypot(V-S,G-v)/this.startTouchesDistance,H=c.getBoundedRatio(d.ratio/$);E.ratio=H,E.angle=d.angle+F;var z=this.getDimensions(),N=this.renderer.viewportToFramedGraph((this.startTouchesPositions||[])[0],{cameraState:d}),k=Math.min(z.width,z.height)-2*u,I=k/z.width,C=k/z.height,x=H/k,O=v-k/2/I,X=S-k/2/C,re=[O*Math.cos(-E.angle)-X*Math.sin(-E.angle),X*Math.cos(-E.angle)+O*Math.sin(-E.angle)];O=re[0],X=re[1],E.x=N.x-O*x,E.y=N.y+X*x,c.setState(E);break}}}}}},{key:"setSettings",value:function(r){this.settings=r}}])})(wy);function qL(t){if(Array.isArray(t))return yc(t)}function KL(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function XL(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vf(t){return qL(t)||KL(t)||ey(t)||XL()}function ZL(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function ul(t,e){if(t==null)return{};var n,r,i=ZL(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}var _f=(function(){function t(e,n){At(this,t),this.key=e,this.size=n}return kt(t,null,[{key:"compare",value:function(n,r){return n.size>r.size?-1:n.size<r.size||n.key>r.key?1:-1}}])})(),bf=(function(){function t(){At(this,t),se(this,"width",0),se(this,"height",0),se(this,"cellSize",0),se(this,"columns",0),se(this,"rows",0),se(this,"cells",{})}return kt(t,[{key:"resizeAndClear",value:function(n,r){this.width=n.width,this.height=n.height,this.cellSize=r,this.columns=Math.ceil(n.width/r),this.rows=Math.ceil(n.height/r),this.cells={}}},{key:"getIndex",value:function(n){var r=Math.floor(n.x/this.cellSize),i=Math.floor(n.y/this.cellSize);return i*this.columns+r}},{key:"add",value:function(n,r,i){var s=new _f(n,r),o=this.getIndex(i),a=this.cells[o];a||(a=[],this.cells[o]=a),a.push(s)}},{key:"organize",value:function(){for(var n in this.cells){var r=this.cells[n];r.sort(_f.compare)}}},{key:"getLabelsToDisplay",value:function(n,r){var i=this.cellSize*this.cellSize,s=i/n/n,o=s*r/i,a=Math.ceil(o),l=[];for(var c in this.cells)for(var d=this.cells[c],u=0;u<Math.min(a,d.length);u++)l.push(d[u].key);return l}}])})();function YL(t){var e=t.graph,n=t.hoveredNode,r=t.highlightedNodes,i=t.displayedNodeLabels,s=[];return e.forEachEdge(function(o,a,l,c){(l===n||c===n||r.has(l)||r.has(c)||i.has(l)&&i.has(c))&&s.push(o)}),s}var wf=150,Ef=50,$n=Object.prototype.hasOwnProperty;function JL(t,e,n){if(!$n.call(n,"x")||!$n.call(n,"y"))throw new Error('Sigma: could not find a valid position (x, y) for node "'.concat(e,'". All your nodes must have a number "x" and "y". Maybe your forgot to apply a layout or your "nodeReducer" is not returning the correct data?'));return n.color||(n.color=t.defaultNodeColor),!n.label&&n.label!==""&&(n.label=null),n.label!==void 0&&n.label!==null?n.label=""+n.label:n.label=null,n.size||(n.size=2),$n.call(n,"hidden")||(n.hidden=!1),$n.call(n,"highlighted")||(n.highlighted=!1),$n.call(n,"forceLabel")||(n.forceLabel=!1),(!n.type||n.type==="")&&(n.type=t.defaultNodeType),n.zIndex||(n.zIndex=0),n}function QL(t,e,n){return n.color||(n.color=t.defaultEdgeColor),n.label||(n.label=""),n.size||(n.size=.5),$n.call(n,"hidden")||(n.hidden=!1),$n.call(n,"forceLabel")||(n.forceLabel=!1),(!n.type||n.type==="")&&(n.type=t.defaultEdgeType),n.zIndex||(n.zIndex=0),n}var eI=(function(t){function e(n,r){var i,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(At(this,e),i=Yt(this,e),se(i,"elements",{}),se(i,"canvasContexts",{}),se(i,"webGLContexts",{}),se(i,"pickingLayers",new Set),se(i,"textures",{}),se(i,"frameBuffers",{}),se(i,"activeListeners",{}),se(i,"labelGrid",new bf),se(i,"nodeDataCache",{}),se(i,"edgeDataCache",{}),se(i,"nodeProgramIndex",{}),se(i,"edgeProgramIndex",{}),se(i,"nodesWithForcedLabels",new Set),se(i,"edgesWithForcedLabels",new Set),se(i,"nodeExtent",{x:[0,1],y:[0,1]}),se(i,"nodeZExtent",[1/0,-1/0]),se(i,"edgeZExtent",[1/0,-1/0]),se(i,"matrix",en()),se(i,"invMatrix",en()),se(i,"correctionRatio",1),se(i,"customBBox",null),se(i,"normalizationFunction",gf({x:[0,1],y:[0,1]})),se(i,"graphToViewportRatio",1),se(i,"itemIDsIndex",{}),se(i,"nodeIndices",{}),se(i,"edgeIndices",{}),se(i,"width",0),se(i,"height",0),se(i,"pixelRatio",ff()),se(i,"pickingDownSizingRatio",2*i.pixelRatio),se(i,"displayedNodeLabels",new Set),se(i,"displayedEdgeLabels",new Set),se(i,"highlightedNodes",new Set),se(i,"hoveredNode",null),se(i,"hoveredEdge",null),se(i,"renderFrame",null),se(i,"renderHighlightedNodesFrame",null),se(i,"needToProcess",!1),se(i,"checkEdgesEventsFrame",null),se(i,"nodePrograms",{}),se(i,"nodeHoverPrograms",{}),se(i,"edgePrograms",{}),i.settings=FL(s),dl(i.settings),PL(n),!(r instanceof HTMLElement))throw new Error("Sigma: container should be an html element.");i.graph=n,i.container=r,i.createWebGLContext("edges",{picking:s.enableEdgeEvents}),i.createCanvasContext("edgeLabels"),i.createWebGLContext("nodes",{picking:!0}),i.createCanvasContext("labels"),i.createCanvasContext("hovers"),i.createWebGLContext("hoverNodes"),i.createCanvasContext("mouse",{style:{touchAction:"none",userSelect:"none"}}),i.resize();for(var o in i.settings.nodeProgramClasses)i.registerNodeProgram(o,i.settings.nodeProgramClasses[o],i.settings.nodeHoverProgramClasses[o]);for(var a in i.settings.edgeProgramClasses)i.registerEdgeProgram(a,i.settings.edgeProgramClasses[a]);return i.camera=new yf,i.bindCameraHandlers(),i.mouseCaptor=new UL(i.elements.mouse,i),i.mouseCaptor.setSettings(i.settings),i.touchCaptor=new WL(i.elements.mouse,i),i.touchCaptor.setSettings(i.settings),i.bindEventHandlers(),i.bindGraphHandlers(),i.handleSettingsUpdate(),i.refresh(),i}return Jt(e,t),kt(e,[{key:"registerNodeProgram",value:function(r,i,s){return this.nodePrograms[r]&&this.nodePrograms[r].kill(),this.nodeHoverPrograms[r]&&this.nodeHoverPrograms[r].kill(),this.nodePrograms[r]=new i(this.webGLContexts.nodes,this.frameBuffers.nodes,this),this.nodeHoverPrograms[r]=new(s||i)(this.webGLContexts.hoverNodes,null,this),this}},{key:"registerEdgeProgram",value:function(r,i){return this.edgePrograms[r]&&this.edgePrograms[r].kill(),this.edgePrograms[r]=new i(this.webGLContexts.edges,this.frameBuffers.edges,this),this}},{key:"unregisterNodeProgram",value:function(r){if(this.nodePrograms[r]){var i=this.nodePrograms,s=i[r],o=ul(i,[r].map(ts));s.kill(),this.nodePrograms=o}if(this.nodeHoverPrograms[r]){var a=this.nodeHoverPrograms,l=a[r],c=ul(a,[r].map(ts));l.kill(),this.nodePrograms=c}return this}},{key:"unregisterEdgeProgram",value:function(r){if(this.edgePrograms[r]){var i=this.edgePrograms,s=i[r],o=ul(i,[r].map(ts));s.kill(),this.edgePrograms=o}return this}},{key:"resetWebGLTexture",value:function(r){var i=this.webGLContexts[r],s=this.frameBuffers[r],o=this.textures[r];o&&i.deleteTexture(o);var a=i.createTexture();return i.bindFramebuffer(i.FRAMEBUFFER,s),i.bindTexture(i.TEXTURE_2D,a),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,this.width,this.height,0,i.RGBA,i.UNSIGNED_BYTE,null),i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,a,0),this.textures[r]=a,this}},{key:"bindCameraHandlers",value:function(){var r=this;return this.activeListeners.camera=function(){r.scheduleRender()},this.camera.on("updated",this.activeListeners.camera),this}},{key:"unbindCameraHandlers",value:function(){return this.camera.removeListener("updated",this.activeListeners.camera),this}},{key:"getNodeAtPosition",value:function(r){var i=r.x,s=r.y,o=Qh(this.webGLContexts.nodes,this.frameBuffers.nodes,i,s,this.pixelRatio,this.pickingDownSizingRatio),a=Jh.apply(void 0,vf(o)),l=this.itemIDsIndex[a];return l&&l.type==="node"?l.id:null}},{key:"bindEventHandlers",value:function(){var r=this;this.activeListeners.handleResize=function(){r.scheduleRefresh()},window.addEventListener("resize",this.activeListeners.handleResize),this.activeListeners.handleMove=function(s){var o=Mi(s),a={event:o,preventSigmaDefault:function(){o.preventSigmaDefault()}},l=r.getNodeAtPosition(o);if(l&&r.hoveredNode!==l&&!r.nodeDataCache[l].hidden){r.hoveredNode&&r.emit("leaveNode",we(we({},a),{},{node:r.hoveredNode})),r.hoveredNode=l,r.emit("enterNode",we(we({},a),{},{node:l})),r.scheduleHighlightedNodesRender();return}if(r.hoveredNode&&r.getNodeAtPosition(o)!==r.hoveredNode){var c=r.hoveredNode;r.hoveredNode=null,r.emit("leaveNode",we(we({},a),{},{node:c})),r.scheduleHighlightedNodesRender();return}if(r.settings.enableEdgeEvents){var d=r.hoveredNode?null:r.getEdgeAtPoint(a.event.x,a.event.y);d!==r.hoveredEdge&&(r.hoveredEdge&&r.emit("leaveEdge",we(we({},a),{},{edge:r.hoveredEdge})),d&&r.emit("enterEdge",we(we({},a),{},{edge:d})),r.hoveredEdge=d)}},this.activeListeners.handleMoveBody=function(s){var o=Mi(s);r.emit("moveBody",{event:o,preventSigmaDefault:function(){o.preventSigmaDefault()}})},this.activeListeners.handleLeave=function(s){var o=Mi(s),a={event:o,preventSigmaDefault:function(){o.preventSigmaDefault()}};r.hoveredNode&&(r.emit("leaveNode",we(we({},a),{},{node:r.hoveredNode})),r.scheduleHighlightedNodesRender()),r.settings.enableEdgeEvents&&r.hoveredEdge&&(r.emit("leaveEdge",we(we({},a),{},{edge:r.hoveredEdge})),r.scheduleHighlightedNodesRender()),r.emit("leaveStage",we({},a))},this.activeListeners.handleEnter=function(s){var o=Mi(s),a={event:o,preventSigmaDefault:function(){o.preventSigmaDefault()}};r.emit("enterStage",we({},a))};var i=function(o){return function(a){var l=Mi(a),c={event:l,preventSigmaDefault:function(){l.preventSigmaDefault()}},d=r.getNodeAtPosition(l);if(d)return r.emit("".concat(o,"Node"),we(we({},c),{},{node:d}));if(r.settings.enableEdgeEvents){var u=r.getEdgeAtPoint(l.x,l.y);if(u)return r.emit("".concat(o,"Edge"),we(we({},c),{},{edge:u}))}return r.emit("".concat(o,"Stage"),c)}};return this.activeListeners.handleClick=i("click"),this.activeListeners.handleRightClick=i("rightClick"),this.activeListeners.handleDoubleClick=i("doubleClick"),this.activeListeners.handleWheel=i("wheel"),this.activeListeners.handleDown=i("down"),this.activeListeners.handleUp=i("up"),this.mouseCaptor.on("mousemove",this.activeListeners.handleMove),this.mouseCaptor.on("mousemovebody",this.activeListeners.handleMoveBody),this.mouseCaptor.on("click",this.activeListeners.handleClick),this.mouseCaptor.on("rightClick",this.activeListeners.handleRightClick),this.mouseCaptor.on("doubleClick",this.activeListeners.handleDoubleClick),this.mouseCaptor.on("wheel",this.activeListeners.handleWheel),this.mouseCaptor.on("mousedown",this.activeListeners.handleDown),this.mouseCaptor.on("mouseup",this.activeListeners.handleUp),this.mouseCaptor.on("mouseleave",this.activeListeners.handleLeave),this.mouseCaptor.on("mouseenter",this.activeListeners.handleEnter),this.touchCaptor.on("touchdown",this.activeListeners.handleDown),this.touchCaptor.on("touchdown",this.activeListeners.handleMove),this.touchCaptor.on("touchup",this.activeListeners.handleUp),this.touchCaptor.on("touchmove",this.activeListeners.handleMove),this.touchCaptor.on("tap",this.activeListeners.handleClick),this.touchCaptor.on("doubletap",this.activeListeners.handleDoubleClick),this.touchCaptor.on("touchmove",this.activeListeners.handleMoveBody),this}},{key:"bindGraphHandlers",value:function(){var r=this,i=this.graph,s=new Set(["x","y","zIndex","type"]);return this.activeListeners.eachNodeAttributesUpdatedGraphUpdate=function(o){var a,l=(a=o.hints)===null||a===void 0?void 0:a.attributes;r.graph.forEachNode(function(d){return r.updateNode(d)});var c=!l||l.some(function(d){return s.has(d)});r.refresh({partialGraph:{nodes:i.nodes()},skipIndexation:!c,schedule:!0})},this.activeListeners.eachEdgeAttributesUpdatedGraphUpdate=function(o){var a,l=(a=o.hints)===null||a===void 0?void 0:a.attributes;r.graph.forEachEdge(function(d){return r.updateEdge(d)});var c=l&&["zIndex","type"].some(function(d){return l?.includes(d)});r.refresh({partialGraph:{edges:i.edges()},skipIndexation:!c,schedule:!0})},this.activeListeners.addNodeGraphUpdate=function(o){var a=o.key;r.addNode(a),r.refresh({partialGraph:{nodes:[a]},skipIndexation:!1,schedule:!0})},this.activeListeners.updateNodeGraphUpdate=function(o){var a=o.key;r.refresh({partialGraph:{nodes:[a]},skipIndexation:!1,schedule:!0})},this.activeListeners.dropNodeGraphUpdate=function(o){var a=o.key;r.removeNode(a),r.refresh({schedule:!0})},this.activeListeners.addEdgeGraphUpdate=function(o){var a=o.key;r.addEdge(a),r.refresh({partialGraph:{edges:[a]},schedule:!0})},this.activeListeners.updateEdgeGraphUpdate=function(o){var a=o.key;r.refresh({partialGraph:{edges:[a]},skipIndexation:!1,schedule:!0})},this.activeListeners.dropEdgeGraphUpdate=function(o){var a=o.key;r.removeEdge(a),r.refresh({schedule:!0})},this.activeListeners.clearEdgesGraphUpdate=function(){r.clearEdgeState(),r.clearEdgeIndices(),r.refresh({schedule:!0})},this.activeListeners.clearGraphUpdate=function(){r.clearEdgeState(),r.clearNodeState(),r.clearEdgeIndices(),r.clearNodeIndices(),r.refresh({schedule:!0})},i.on("nodeAdded",this.activeListeners.addNodeGraphUpdate),i.on("nodeDropped",this.activeListeners.dropNodeGraphUpdate),i.on("nodeAttributesUpdated",this.activeListeners.updateNodeGraphUpdate),i.on("eachNodeAttributesUpdated",this.activeListeners.eachNodeAttributesUpdatedGraphUpdate),i.on("edgeAdded",this.activeListeners.addEdgeGraphUpdate),i.on("edgeDropped",this.activeListeners.dropEdgeGraphUpdate),i.on("edgeAttributesUpdated",this.activeListeners.updateEdgeGraphUpdate),i.on("eachEdgeAttributesUpdated",this.activeListeners.eachEdgeAttributesUpdatedGraphUpdate),i.on("edgesCleared",this.activeListeners.clearEdgesGraphUpdate),i.on("cleared",this.activeListeners.clearGraphUpdate),this}},{key:"unbindGraphHandlers",value:function(){var r=this.graph;r.removeListener("nodeAdded",this.activeListeners.addNodeGraphUpdate),r.removeListener("nodeDropped",this.activeListeners.dropNodeGraphUpdate),r.removeListener("nodeAttributesUpdated",this.activeListeners.updateNodeGraphUpdate),r.removeListener("eachNodeAttributesUpdated",this.activeListeners.eachNodeAttributesUpdatedGraphUpdate),r.removeListener("edgeAdded",this.activeListeners.addEdgeGraphUpdate),r.removeListener("edgeDropped",this.activeListeners.dropEdgeGraphUpdate),r.removeListener("edgeAttributesUpdated",this.activeListeners.updateEdgeGraphUpdate),r.removeListener("eachEdgeAttributesUpdated",this.activeListeners.eachEdgeAttributesUpdatedGraphUpdate),r.removeListener("edgesCleared",this.activeListeners.clearEdgesGraphUpdate),r.removeListener("cleared",this.activeListeners.clearGraphUpdate)}},{key:"getEdgeAtPoint",value:function(r,i){var s=Qh(this.webGLContexts.edges,this.frameBuffers.edges,r,i,this.pixelRatio,this.pickingDownSizingRatio),o=Jh.apply(void 0,vf(s)),a=this.itemIDsIndex[o];return a&&a.type==="edge"?a.id:null}},{key:"process",value:function(){var r=this;this.emit("beforeProcess");var i=this.graph,s=this.settings,o=this.getDimensions();if(this.nodeExtent=DL(this.graph),!this.settings.autoRescale){var a=o.width,l=o.height,c=this.nodeExtent,d=c.x,u=c.y;this.nodeExtent={x:[(d[0]+d[1])/2-a/2,(d[0]+d[1])/2+a/2],y:[(u[0]+u[1])/2-l/2,(u[0]+u[1])/2+l/2]}}this.normalizationFunction=gf(this.customBBox||this.nodeExtent);var h=new yf,f=Gi(h.getState(),o,this.getGraphDimensions(),this.getStagePadding());this.labelGrid.resizeAndClear(o,s.labelGridCellSize);for(var g={},y={},w={},b={},E=1,A=i.nodes(),v=0,S=A.length;v<S;v++){var L=A[v],G=this.nodeDataCache[L],V=i.getNodeAttributes(L);G.x=V.x,G.y=V.y,this.normalizationFunction.applyTo(G),typeof G.label=="string"&&!G.hidden&&this.labelGrid.add(L,G.size,this.framedGraphToViewport(G,{matrix:f})),g[G.type]=(g[G.type]||0)+1}this.labelGrid.organize();for(var F in this.nodePrograms){if(!$n.call(this.nodePrograms,F))throw new Error('Sigma: could not find a suitable program for node type "'.concat(F,'"!'));this.nodePrograms[F].reallocate(g[F]||0),g[F]=0}this.settings.zIndex&&this.nodeZExtent[0]!==this.nodeZExtent[1]&&(A=pf(this.nodeZExtent,function(Ee){return r.nodeDataCache[Ee].zIndex},A));for(var $=0,H=A.length;$<H;$++){var z=A[$];y[z]=E,b[y[z]]={type:"node",id:z},E++;var N=this.nodeDataCache[z];this.addNodeToProgram(z,y[z],g[N.type]++)}for(var k={},I=i.edges(),C=0,x=I.length;C<x;C++){var O=I[C],X=this.edgeDataCache[O];k[X.type]=(k[X.type]||0)+1}this.settings.zIndex&&this.edgeZExtent[0]!==this.edgeZExtent[1]&&(I=pf(this.edgeZExtent,function(Ee){return r.edgeDataCache[Ee].zIndex},I));for(var re in this.edgePrograms){if(!$n.call(this.edgePrograms,re))throw new Error('Sigma: could not find a suitable program for edge type "'.concat(re,'"!'));this.edgePrograms[re].reallocate(k[re]||0),k[re]=0}for(var fe=0,me=I.length;fe<me;fe++){var W=I[fe];w[W]=E,b[w[W]]={type:"edge",id:W},E++;var ve=this.edgeDataCache[W];this.addEdgeToProgram(W,w[W],k[ve.type]++)}return this.itemIDsIndex=b,this.nodeIndices=y,this.edgeIndices=w,this.emit("afterProcess"),this}},{key:"handleSettingsUpdate",value:function(r){var i=this,s=this.settings;if(this.camera.minRatio=s.minCameraRatio,this.camera.maxRatio=s.maxCameraRatio,this.camera.enabledZooming=s.enableCameraZooming,this.camera.enabledPanning=s.enableCameraPanning,this.camera.enabledRotation=s.enableCameraRotation,s.cameraPanBoundaries?this.camera.clean=function(d){return i.cleanCameraState(d,s.cameraPanBoundaries&&bc(s.cameraPanBoundaries)==="object"?s.cameraPanBoundaries:{})}:this.camera.clean=null,this.camera.setState(this.camera.validateState(this.camera.getState())),r){if(r.edgeProgramClasses!==s.edgeProgramClasses){for(var o in s.edgeProgramClasses)s.edgeProgramClasses[o]!==r.edgeProgramClasses[o]&&this.registerEdgeProgram(o,s.edgeProgramClasses[o]);for(var a in r.edgeProgramClasses)s.edgeProgramClasses[a]||this.unregisterEdgeProgram(a)}if(r.nodeProgramClasses!==s.nodeProgramClasses||r.nodeHoverProgramClasses!==s.nodeHoverProgramClasses){for(var l in s.nodeProgramClasses)(s.nodeProgramClasses[l]!==r.nodeProgramClasses[l]||s.nodeHoverProgramClasses[l]!==r.nodeHoverProgramClasses[l])&&this.registerNodeProgram(l,s.nodeProgramClasses[l],s.nodeHoverProgramClasses[l]);for(var c in r.nodeProgramClasses)s.nodeProgramClasses[c]||this.unregisterNodeProgram(c)}}return this.mouseCaptor.setSettings(this.settings),this.touchCaptor.setSettings(this.settings),this}},{key:"cleanCameraState",value:function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=i.tolerance,o=s===void 0?0:s,a=i.boundaries,l=we({},r),c=a||this.nodeExtent,d=vi(c.x,2),u=d[0],h=d[1],f=vi(c.y,2),g=f[0],y=f[1],w=[this.graphToViewport({x:u,y:g},{cameraState:r}),this.graphToViewport({x:h,y:g},{cameraState:r}),this.graphToViewport({x:u,y},{cameraState:r}),this.graphToViewport({x:h,y},{cameraState:r})],b=1/0,E=-1/0,A=1/0,v=-1/0;w.forEach(function(k){var I=k.x,C=k.y;b=Math.min(b,I),E=Math.max(E,I),A=Math.min(A,C),v=Math.max(v,C)});var S=E-b,L=v-A,G=this.getDimensions(),V=G.width,F=G.height,$=0,H=0;if(S>=V?E<V-o?$=E-(V-o):b>o&&($=b-o):E>V+o?$=E-(V+o):b<-o&&($=b+o),L>=F?v<F-o?H=v-(F-o):A>o&&(H=A-o):v>F+o?H=v-(F+o):A<-o&&(H=A+o),$||H){var z=this.viewportToFramedGraph({x:0,y:0},{cameraState:r}),N=this.viewportToFramedGraph({x:$,y:H},{cameraState:r});$=N.x-z.x,H=N.y-z.y,l.x+=$,l.y+=H}return l}},{key:"renderLabels",value:function(){if(!this.settings.renderLabels)return this;var r=this.camera.getState(),i=this.labelGrid.getLabelsToDisplay(r.ratio,this.settings.labelDensity);mf(i,this.nodesWithForcedLabels),this.displayedNodeLabels=new Set;for(var s=this.canvasContexts.labels,o=0,a=i.length;o<a;o++){var l=i[o],c=this.nodeDataCache[l];if(!this.displayedNodeLabels.has(l)&&!c.hidden){var d=this.framedGraphToViewport(c),u=d.x,h=d.y,f=this.scaleSize(c.size);if(!(!c.forceLabel&&f<this.settings.labelRenderedSizeThreshold)&&!(u<-wf||u>this.width+wf||h<-Ef||h>this.height+Ef)){this.displayedNodeLabels.add(l);var g=this.settings.defaultDrawNodeLabel,y=this.nodePrograms[c.type],w=y?.drawLabel||g;w(s,we(we({key:l},c),{},{size:f,x:u,y:h}),this.settings)}}}return this}},{key:"renderEdgeLabels",value:function(){if(!this.settings.renderEdgeLabels)return this;var r=this.canvasContexts.edgeLabels;r.clearRect(0,0,this.width,this.height);var i=YL({graph:this.graph,hoveredNode:this.hoveredNode,displayedNodeLabels:this.displayedNodeLabels,highlightedNodes:this.highlightedNodes});mf(i,this.edgesWithForcedLabels);for(var s=new Set,o=0,a=i.length;o<a;o++){var l=i[o],c=this.graph.extremities(l),d=this.nodeDataCache[c[0]],u=this.nodeDataCache[c[1]],h=this.edgeDataCache[l];if(!s.has(l)&&!(h.hidden||d.hidden||u.hidden)){var f=this.settings.defaultDrawEdgeLabel,g=this.edgePrograms[h.type],y=g?.drawLabel||f;y(r,we(we({key:l},h),{},{size:this.scaleSize(h.size)}),we(we(we({key:c[0]},d),this.framedGraphToViewport(d)),{},{size:this.scaleSize(d.size)}),we(we(we({key:c[1]},u),this.framedGraphToViewport(u)),{},{size:this.scaleSize(u.size)}),this.settings),s.add(l)}}return this.displayedEdgeLabels=s,this}},{key:"renderHighlightedNodes",value:function(){var r=this,i=this.canvasContexts.hovers;i.clearRect(0,0,this.width,this.height);var s=function(f){var g=r.nodeDataCache[f],y=r.framedGraphToViewport(g),w=y.x,b=y.y,E=r.scaleSize(g.size),A=r.settings.defaultDrawNodeHover,v=r.nodePrograms[g.type],S=v?.drawHover||A;S(i,we(we({key:f},g),{},{size:E,x:w,y:b}),r.settings)},o=[];this.hoveredNode&&!this.nodeDataCache[this.hoveredNode].hidden&&o.push(this.hoveredNode),this.highlightedNodes.forEach(function(h){h!==r.hoveredNode&&o.push(h)}),o.forEach(function(h){return s(h)});var a={};o.forEach(function(h){var f=r.nodeDataCache[h].type;a[f]=(a[f]||0)+1});for(var l in this.nodeHoverPrograms)this.nodeHoverPrograms[l].reallocate(a[l]||0),a[l]=0;o.forEach(function(h){var f=r.nodeDataCache[h];r.nodeHoverPrograms[f.type].process(0,a[f.type]++,f)}),this.webGLContexts.hoverNodes.clear(this.webGLContexts.hoverNodes.COLOR_BUFFER_BIT);var c=this.getRenderParams();for(var d in this.nodeHoverPrograms){var u=this.nodeHoverPrograms[d];u.render(c)}}},{key:"scheduleHighlightedNodesRender",value:function(){var r=this;this.renderHighlightedNodesFrame||this.renderFrame||(this.renderHighlightedNodesFrame=requestAnimationFrame(function(){r.renderHighlightedNodesFrame=null,r.renderHighlightedNodes(),r.renderEdgeLabels()}))}},{key:"render",value:function(){var r=this;this.emit("beforeRender");var i=function(){return r.emit("afterRender"),r};if(this.renderFrame&&(cancelAnimationFrame(this.renderFrame),this.renderFrame=null),this.resize(),this.needToProcess&&this.process(),this.needToProcess=!1,this.clear(),this.pickingLayers.forEach(function(w){return r.resetWebGLTexture(w)}),!this.graph.order)return i();var s=this.mouseCaptor,o=this.camera.isAnimated()||s.isMoving||s.draggedEvents||s.currentWheelDirection,a=this.camera.getState(),l=this.getDimensions(),c=this.getGraphDimensions(),d=this.getStagePadding();this.matrix=Gi(a,l,c,d),this.invMatrix=Gi(a,l,c,d,!0),this.correctionRatio=IL(this.matrix,a,l),this.graphToViewportRatio=this.getGraphToViewportRatio();var u=this.getRenderParams();for(var h in this.nodePrograms){var f=this.nodePrograms[h];f.render(u)}if(!this.settings.hideEdgesOnMove||!o)for(var g in this.edgePrograms){var y=this.edgePrograms[g];y.render(u)}return this.settings.hideLabelsOnMove&&o||(this.renderLabels(),this.renderEdgeLabels(),this.renderHighlightedNodes()),i()}},{key:"addNode",value:function(r){var i=Object.assign({},this.graph.getNodeAttributes(r));this.settings.nodeReducer&&(i=this.settings.nodeReducer(r,i));var s=JL(this.settings,r,i);this.nodeDataCache[r]=s,this.nodesWithForcedLabels.delete(r),s.forceLabel&&!s.hidden&&this.nodesWithForcedLabels.add(r),this.highlightedNodes.delete(r),s.highlighted&&!s.hidden&&this.highlightedNodes.add(r),this.settings.zIndex&&(s.zIndex<this.nodeZExtent[0]&&(this.nodeZExtent[0]=s.zIndex),s.zIndex>this.nodeZExtent[1]&&(this.nodeZExtent[1]=s.zIndex))}},{key:"updateNode",value:function(r){this.addNode(r);var i=this.nodeDataCache[r];this.normalizationFunction.applyTo(i)}},{key:"removeNode",value:function(r){delete this.nodeDataCache[r],delete this.nodeProgramIndex[r],this.highlightedNodes.delete(r),this.hoveredNode===r&&(this.hoveredNode=null),this.nodesWithForcedLabels.delete(r)}},{key:"addEdge",value:function(r){var i=Object.assign({},this.graph.getEdgeAttributes(r));this.settings.edgeReducer&&(i=this.settings.edgeReducer(r,i));var s=QL(this.settings,r,i);this.edgeDataCache[r]=s,this.edgesWithForcedLabels.delete(r),s.forceLabel&&!s.hidden&&this.edgesWithForcedLabels.add(r),this.settings.zIndex&&(s.zIndex<this.edgeZExtent[0]&&(this.edgeZExtent[0]=s.zIndex),s.zIndex>this.edgeZExtent[1]&&(this.edgeZExtent[1]=s.zIndex))}},{key:"updateEdge",value:function(r){this.addEdge(r)}},{key:"removeEdge",value:function(r){delete this.edgeDataCache[r],delete this.edgeProgramIndex[r],this.hoveredEdge===r&&(this.hoveredEdge=null),this.edgesWithForcedLabels.delete(r)}},{key:"clearNodeIndices",value:function(){this.labelGrid=new bf,this.nodeExtent={x:[0,1],y:[0,1]},this.nodeDataCache={},this.edgeProgramIndex={},this.nodesWithForcedLabels=new Set,this.nodeZExtent=[1/0,-1/0],this.highlightedNodes=new Set}},{key:"clearEdgeIndices",value:function(){this.edgeDataCache={},this.edgeProgramIndex={},this.edgesWithForcedLabels=new Set,this.edgeZExtent=[1/0,-1/0]}},{key:"clearIndices",value:function(){this.clearEdgeIndices(),this.clearNodeIndices()}},{key:"clearNodeState",value:function(){this.displayedNodeLabels=new Set,this.highlightedNodes=new Set,this.hoveredNode=null}},{key:"clearEdgeState",value:function(){this.displayedEdgeLabels=new Set,this.highlightedNodes=new Set,this.hoveredEdge=null}},{key:"clearState",value:function(){this.clearEdgeState(),this.clearNodeState()}},{key:"addNodeToProgram",value:function(r,i,s){var o=this.nodeDataCache[r],a=this.nodePrograms[o.type];if(!a)throw new Error('Sigma: could not find a suitable program for node type "'.concat(o.type,'"!'));a.process(i,s,o),this.nodeProgramIndex[r]=s}},{key:"addEdgeToProgram",value:function(r,i,s){var o=this.edgeDataCache[r],a=this.edgePrograms[o.type];if(!a)throw new Error('Sigma: could not find a suitable program for edge type "'.concat(o.type,'"!'));var l=this.graph.extremities(r),c=this.nodeDataCache[l[0]],d=this.nodeDataCache[l[1]];a.process(i,s,c,d,o),this.edgeProgramIndex[r]=s}},{key:"getRenderParams",value:function(){return{matrix:this.matrix,invMatrix:this.invMatrix,width:this.width,height:this.height,pixelRatio:this.pixelRatio,zoomRatio:this.camera.ratio,cameraAngle:this.camera.angle,sizeRatio:1/this.scaleSize(),correctionRatio:this.correctionRatio,downSizingRatio:this.pickingDownSizingRatio,minEdgeThickness:this.settings.minEdgeThickness,antiAliasingFeather:this.settings.antiAliasingFeather}}},{key:"getStagePadding",value:function(){var r=this.settings,i=r.stagePadding,s=r.autoRescale;return s&&i||0}},{key:"createLayer",value:function(r,i){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(this.elements[r])throw new Error('Sigma: a layer named "'.concat(r,'" already exists'));var o=GL(i,{position:"absolute"},{class:"sigma-".concat(r)});return s.style&&Object.assign(o.style,s.style),this.elements[r]=o,"beforeLayer"in s&&s.beforeLayer?this.elements[s.beforeLayer].before(o):"afterLayer"in s&&s.afterLayer?this.elements[s.afterLayer].after(o):this.container.appendChild(o),o}},{key:"createCanvas",value:function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.createLayer(r,"canvas",i)}},{key:"createCanvasContext",value:function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=this.createCanvas(r,i),o={preserveDrawingBuffer:!1,antialias:!1};return this.canvasContexts[r]=s.getContext("2d",o),this}},{key:"createWebGLContext",value:function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=i?.canvas||this.createCanvas(r,i);i.hidden&&s.remove();var o=we({preserveDrawingBuffer:!1,antialias:!1},i),a;a=s.getContext("webgl2",o),a||(a=s.getContext("webgl",o)),a||(a=s.getContext("experimental-webgl",o));var l=a;if(this.webGLContexts[r]=l,l.blendFunc(l.ONE,l.ONE_MINUS_SRC_ALPHA),i.picking){this.pickingLayers.add(r);var c=l.createFramebuffer();if(!c)throw new Error("Sigma: cannot create a new frame buffer for layer ".concat(r));this.frameBuffers[r]=c}return l}},{key:"killLayer",value:function(r){var i=this.elements[r];if(!i)throw new Error("Sigma: cannot kill layer ".concat(r,", which does not exist"));if(this.webGLContexts[r]){var s,o=this.webGLContexts[r];(s=o.getExtension("WEBGL_lose_context"))===null||s===void 0||s.loseContext(),delete this.webGLContexts[r]}else this.canvasContexts[r]&&delete this.canvasContexts[r];return i.remove(),delete this.elements[r],this}},{key:"getCamera",value:function(){return this.camera}},{key:"setCamera",value:function(r){this.unbindCameraHandlers(),this.camera=r,this.bindCameraHandlers()}},{key:"getContainer",value:function(){return this.container}},{key:"getGraph",value:function(){return this.graph}},{key:"setGraph",value:function(r){r!==this.graph&&(this.hoveredNode&&!r.hasNode(this.hoveredNode)&&(this.hoveredNode=null),this.hoveredEdge&&!r.hasEdge(this.hoveredEdge)&&(this.hoveredEdge=null),this.unbindGraphHandlers(),this.checkEdgesEventsFrame!==null&&(cancelAnimationFrame(this.checkEdgesEventsFrame),this.checkEdgesEventsFrame=null),this.graph=r,this.bindGraphHandlers(),this.refresh())}},{key:"getMouseCaptor",value:function(){return this.mouseCaptor}},{key:"getTouchCaptor",value:function(){return this.touchCaptor}},{key:"getDimensions",value:function(){return{width:this.width,height:this.height}}},{key:"getGraphDimensions",value:function(){var r=this.customBBox||this.nodeExtent;return{width:r.x[1]-r.x[0]||1,height:r.y[1]-r.y[0]||1}}},{key:"getNodeDisplayData",value:function(r){var i=this.nodeDataCache[r];return i?Object.assign({},i):void 0}},{key:"getEdgeDisplayData",value:function(r){var i=this.edgeDataCache[r];return i?Object.assign({},i):void 0}},{key:"getNodeDisplayedLabels",value:function(){return new Set(this.displayedNodeLabels)}},{key:"getEdgeDisplayedLabels",value:function(){return new Set(this.displayedEdgeLabels)}},{key:"getSettings",value:function(){return we({},this.settings)}},{key:"getSetting",value:function(r){return this.settings[r]}},{key:"setSetting",value:function(r,i){var s=we({},this.settings);return this.settings[r]=i,dl(this.settings),this.handleSettingsUpdate(s),this.scheduleRefresh(),this}},{key:"updateSetting",value:function(r,i){return this.setSetting(r,i(this.settings[r])),this}},{key:"setSettings",value:function(r){var i=we({},this.settings);return this.settings=we(we({},this.settings),r),dl(this.settings),this.handleSettingsUpdate(i),this.scheduleRefresh(),this}},{key:"resize",value:function(r){var i=this.width,s=this.height;if(this.width=this.container.offsetWidth,this.height=this.container.offsetHeight,this.pixelRatio=ff(),this.width===0)if(this.settings.allowInvalidContainer)this.width=1;else throw new Error("Sigma: Container has no width. You can set the allowInvalidContainer setting to true to stop seeing this error.");if(this.height===0)if(this.settings.allowInvalidContainer)this.height=1;else throw new Error("Sigma: Container has no height. You can set the allowInvalidContainer setting to true to stop seeing this error.");if(!r&&i===this.width&&s===this.height)return this;for(var o in this.elements){var a=this.elements[o];a.style.width=this.width+"px",a.style.height=this.height+"px"}for(var l in this.canvasContexts)this.elements[l].setAttribute("width",this.width*this.pixelRatio+"px"),this.elements[l].setAttribute("height",this.height*this.pixelRatio+"px"),this.pixelRatio!==1&&this.canvasContexts[l].scale(this.pixelRatio,this.pixelRatio);for(var c in this.webGLContexts){this.elements[c].setAttribute("width",this.width*this.pixelRatio+"px"),this.elements[c].setAttribute("height",this.height*this.pixelRatio+"px");var d=this.webGLContexts[c];if(d.viewport(0,0,this.width*this.pixelRatio,this.height*this.pixelRatio),this.pickingLayers.has(c)){var u=this.textures[c];u&&d.deleteTexture(u)}}return this.emit("resize"),this}},{key:"clear",value:function(){return this.emit("beforeClear"),this.webGLContexts.nodes.bindFramebuffer(WebGLRenderingContext.FRAMEBUFFER,null),this.webGLContexts.nodes.clear(WebGLRenderingContext.COLOR_BUFFER_BIT),this.webGLContexts.edges.bindFramebuffer(WebGLRenderingContext.FRAMEBUFFER,null),this.webGLContexts.edges.clear(WebGLRenderingContext.COLOR_BUFFER_BIT),this.webGLContexts.hoverNodes.clear(WebGLRenderingContext.COLOR_BUFFER_BIT),this.canvasContexts.labels.clearRect(0,0,this.width,this.height),this.canvasContexts.hovers.clearRect(0,0,this.width,this.height),this.canvasContexts.edgeLabels.clearRect(0,0,this.width,this.height),this.emit("afterClear"),this}},{key:"refresh",value:function(r){var i=this,s=r?.skipIndexation!==void 0?r?.skipIndexation:!1,o=r?.schedule!==void 0?r.schedule:!1,a=!r||!r.partialGraph;if(a)this.clearEdgeIndices(),this.clearNodeIndices(),this.graph.forEachNode(function(v){return i.addNode(v)}),this.graph.forEachEdge(function(v){return i.addEdge(v)});else{for(var l,c,d=((l=r.partialGraph)===null||l===void 0?void 0:l.nodes)||[],u=0,h=d?.length||0;u<h;u++){var f=d[u];if(this.updateNode(f),s){var g=this.nodeProgramIndex[f];if(g===void 0)throw new Error('Sigma: node "'.concat(f,`" can't be repaint`));this.addNodeToProgram(f,this.nodeIndices[f],g)}}for(var y=(r==null||(c=r.partialGraph)===null||c===void 0?void 0:c.edges)||[],w=0,b=y.length;w<b;w++){var E=y[w];if(this.updateEdge(E),s){var A=this.edgeProgramIndex[E];if(A===void 0)throw new Error('Sigma: edge "'.concat(E,`" can't be repaint`));this.addEdgeToProgram(E,this.edgeIndices[E],A)}}}return(a||!s)&&(this.needToProcess=!0),o?this.scheduleRender():this.render(),this}},{key:"scheduleRender",value:function(){var r=this;return this.renderFrame||(this.renderFrame=requestAnimationFrame(function(){r.render()})),this}},{key:"scheduleRefresh",value:function(r){return this.refresh(we(we({},r),{},{schedule:!0}))}},{key:"getViewportZoomedState",value:function(r,i){var s=this.camera.getState(),o=s.ratio,a=s.angle,l=s.x,c=s.y,d=this.settings,u=d.minCameraRatio,h=d.maxCameraRatio;typeof h=="number"&&(i=Math.min(i,h)),typeof u=="number"&&(i=Math.max(i,u));var f=i/o,g={x:this.width/2,y:this.height/2},y=this.viewportToFramedGraph(r),w=this.viewportToFramedGraph(g);return{angle:a,x:(y.x-w.x)*(1-f)+l,y:(y.y-w.y)*(1-f)+c,ratio:i}}},{key:"viewRectangle",value:function(){var r=this.viewportToFramedGraph({x:0,y:0}),i=this.viewportToFramedGraph({x:this.width,y:0}),s=this.viewportToFramedGraph({x:0,y:this.height});return{x1:r.x,y1:r.y,x2:i.x,y2:i.y,height:i.y-s.y}}},{key:"framedGraphToViewport",value:function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=!!i.cameraState||!!i.viewportDimensions||!!i.graphDimensions,o=i.matrix?i.matrix:s?Gi(i.cameraState||this.camera.getState(),i.viewportDimensions||this.getDimensions(),i.graphDimensions||this.getGraphDimensions(),i.padding||this.getStagePadding()):this.matrix,a=_c(o,r);return{x:(1+a.x)*this.width/2,y:(1-a.y)*this.height/2}}},{key:"viewportToFramedGraph",value:function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=!!i.cameraState||!!i.viewportDimensions||!i.graphDimensions,o=i.matrix?i.matrix:s?Gi(i.cameraState||this.camera.getState(),i.viewportDimensions||this.getDimensions(),i.graphDimensions||this.getGraphDimensions(),i.padding||this.getStagePadding(),!0):this.invMatrix,a=_c(o,{x:r.x/this.width*2-1,y:1-r.y/this.height*2});return isNaN(a.x)&&(a.x=0),isNaN(a.y)&&(a.y=0),a}},{key:"viewportToGraph",value:function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.normalizationFunction.inverse(this.viewportToFramedGraph(r,i))}},{key:"graphToViewport",value:function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.framedGraphToViewport(this.normalizationFunction(r),i)}},{key:"getGraphToViewportRatio",value:function(){var r={x:0,y:0},i={x:1,y:1},s=Math.sqrt(Math.pow(r.x-i.x,2)+Math.pow(r.y-i.y,2)),o=this.graphToViewport(r),a=this.graphToViewport(i),l=Math.sqrt(Math.pow(o.x-a.x,2)+Math.pow(o.y-a.y,2));return l/s}},{key:"getBBox",value:function(){return this.nodeExtent}},{key:"getCustomBBox",value:function(){return this.customBBox}},{key:"setCustomBBox",value:function(r){return this.customBBox=r,this.scheduleRender(),this}},{key:"kill",value:function(){this.emit("kill"),this.removeAllListeners(),this.unbindCameraHandlers(),window.removeEventListener("resize",this.activeListeners.handleResize),this.mouseCaptor.kill(),this.touchCaptor.kill(),this.unbindGraphHandlers(),this.clearIndices(),this.clearState(),this.nodeDataCache={},this.edgeDataCache={},this.highlightedNodes.clear(),this.renderFrame&&(cancelAnimationFrame(this.renderFrame),this.renderFrame=null),this.renderHighlightedNodesFrame&&(cancelAnimationFrame(this.renderHighlightedNodesFrame),this.renderHighlightedNodesFrame=null);for(var r=this.container;r.firstChild;)r.removeChild(r.firstChild);for(var i in this.nodePrograms)this.nodePrograms[i].kill();for(var s in this.nodeHoverPrograms)this.nodeHoverPrograms[s].kill();for(var o in this.edgePrograms)this.edgePrograms[o].kill();this.nodePrograms={},this.nodeHoverPrograms={},this.edgePrograms={};for(var a in this.elements)this.killLayer(a);this.canvasContexts={},this.webGLContexts={},this.elements={}}},{key:"scaleSize",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.camera.ratio;return r/this.settings.zoomToSizeRatioFunction(i)*(this.getSetting("itemSizesReference")==="positions"?i*this.graphToViewportRatio:1)}},{key:"getCanvases",value:function(){var r={};for(var i in this.elements)this.elements[i]instanceof HTMLCanvasElement&&(r[i]=this.elements[i]);return r}}])})(Td),tI=eI,hl,Af;function Nd(){if(Af)return hl;Af=1;function t(e){if(typeof e!="function")throw new Error("obliterator/iterator: expecting a function!");this.next=e}return typeof Symbol<"u"&&(t.prototype[Symbol.iterator]=function(){return this}),t.of=function(){var e=arguments,n=e.length,r=0;return new t(function(){return r>=n?{done:!0}:{done:!1,value:e[r++]}})},t.empty=function(){var e=new t(function(){return{done:!0}});return e},t.fromSequence=function(e){var n=0,r=e.length;return new t(function(){return n>=r?{done:!0}:{done:!1,value:e[n++]}})},t.is=function(e){return e instanceof t?!0:typeof e=="object"&&e!==null&&typeof e.next=="function"},hl=t,hl}var nI=Nd();const Zt=Is(nI);var ro={},kf;function rI(){return kf||(kf=1,ro.ARRAY_BUFFER_SUPPORT=typeof ArrayBuffer<"u",ro.SYMBOL_SUPPORT=typeof Symbol<"u"),ro}var fl,xf;function Ey(){if(xf)return fl;xf=1;var t=Nd(),e=rI(),n=e.ARRAY_BUFFER_SUPPORT,r=e.SYMBOL_SUPPORT;function i(s){return typeof s=="string"||Array.isArray(s)||n&&ArrayBuffer.isView(s)?t.fromSequence(s):typeof s!="object"||s===null?null:r&&typeof s[Symbol.iterator]=="function"?s[Symbol.iterator]():typeof s.next=="function"?s:null}return fl=function(o){var a=i(o);if(!a)throw new Error("obliterator: target is not iterable nor a valid iterator.");return a},fl}var pl,Cf;function iI(){if(Cf)return pl;Cf=1;var t=Ey();return pl=function(n,r){for(var i=arguments.length>1?r:1/0,s=i!==1/0?new Array(i):[],o,a=0,l=t(n);;){if(a===i)return s;if(o=l.next(),o.done)return a!==r&&(s.length=a),s;s[a++]=o.value}},pl}var sI=iI();const Ay=Is(sI);var gl,Sf;function oI(){if(Sf)return gl;Sf=1;var t=Nd(),e=Ey();return gl=function(){var r=arguments,i=null,s=-1;return new t(function(){var a=null;do{if(i===null){if(s++,s>=r.length)return{done:!0};i=e(r[s])}if(a=i.next(),a.done===!0){i=null;continue}break}while(!0);return a})},gl}var aI=oI();const Vn=Is(aI);function lI(){const t=arguments[0];for(let e=1,n=arguments.length;e<n;e++)if(arguments[e])for(const r in arguments[e])t[r]=arguments[e][r];return t}let it=lI;typeof Object.assign=="function"&&(it=Object.assign);function Kt(t,e,n,r){const i=t._nodes.get(e);let s=null;return i&&(r==="mixed"?s=i.out&&i.out[n]||i.undirected&&i.undirected[n]:r==="directed"?s=i.out&&i.out[n]:s=i.undirected&&i.undirected[n]),s}function ut(t){return typeof t=="object"&&t!==null}function ky(t){let e;for(e in t)return!1;return!0}function jt(t,e,n){Object.defineProperty(t,e,{enumerable:!1,configurable:!1,writable:!0,value:n})}function Qt(t,e,n){const r={enumerable:!0,configurable:!0};typeof n=="function"?r.get=n:(r.value=n,r.writable=!1),Object.defineProperty(t,e,r)}function Tf(t){return!(!ut(t)||t.attributes&&!Array.isArray(t.attributes))}function cI(){let t=Math.floor(Math.random()*256)&255;return()=>t++}class Ld extends Error{constructor(e){super(),this.name="GraphError",this.message=e}}class ye extends Ld{constructor(e){super(e),this.name="InvalidArgumentsGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,ye.prototype.constructor)}}class ue extends Ld{constructor(e){super(e),this.name="NotFoundGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,ue.prototype.constructor)}}class xe extends Ld{constructor(e){super(e),this.name="UsageGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,xe.prototype.constructor)}}function xy(t,e){this.key=t,this.attributes=e,this.clear()}xy.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.undirectedDegree=0,this.undirectedLoops=0,this.directedLoops=0,this.in={},this.out={},this.undirected={}};function Cy(t,e){this.key=t,this.attributes=e,this.clear()}Cy.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.directedLoops=0,this.in={},this.out={}};function Sy(t,e){this.key=t,this.attributes=e,this.clear()}Sy.prototype.clear=function(){this.undirectedDegree=0,this.undirectedLoops=0,this.undirected={}};function Ei(t,e,n,r,i){this.key=e,this.attributes=i,this.undirected=t,this.source=n,this.target=r}Ei.prototype.attach=function(){let t="out",e="in";this.undirected&&(t=e="undirected");const n=this.source.key,r=this.target.key;this.source[t][r]=this,!(this.undirected&&n===r)&&(this.target[e][n]=this)};Ei.prototype.attachMulti=function(){let t="out",e="in";const n=this.source.key,r=this.target.key;this.undirected&&(t=e="undirected");const i=this.source[t],s=i[r];if(typeof s>"u"){i[r]=this,this.undirected&&n===r||(this.target[e][n]=this);return}s.previous=this,this.next=s,i[r]=this,this.target[e][n]=this};Ei.prototype.detach=function(){const t=this.source.key,e=this.target.key;let n="out",r="in";this.undirected&&(n=r="undirected"),delete this.source[n][e],delete this.target[r][t]};Ei.prototype.detachMulti=function(){const t=this.source.key,e=this.target.key;let n="out",r="in";this.undirected&&(n=r="undirected"),this.previous===void 0?this.next===void 0?(delete this.source[n][e],delete this.target[r][t]):(this.next.previous=void 0,this.source[n][e]=this.next,this.target[r][t]=this.next):(this.previous.next=this.next,this.next!==void 0&&(this.next.previous=this.previous))};const Ty=0,Ry=1,dI=2,Ny=3;function Zn(t,e,n,r,i,s,o){let a,l,c,d;if(r=""+r,n===Ty){if(a=t._nodes.get(r),!a)throw new ue(`Graph.${e}: could not find the "${r}" node in the graph.`);c=i,d=s}else if(n===Ny){if(i=""+i,l=t._edges.get(i),!l)throw new ue(`Graph.${e}: could not find the "${i}" edge in the graph.`);const u=l.source.key,h=l.target.key;if(r===u)a=l.target;else if(r===h)a=l.source;else throw new ue(`Graph.${e}: the "${r}" node is not attached to the "${i}" edge (${u}, ${h}).`);c=s,d=o}else{if(l=t._edges.get(r),!l)throw new ue(`Graph.${e}: could not find the "${r}" edge in the graph.`);n===Ry?a=l.source:a=l.target,c=i,d=s}return[a,c,d]}function uI(t,e,n){t.prototype[e]=function(r,i,s){const[o,a]=Zn(this,e,n,r,i,s);return o.attributes[a]}}function hI(t,e,n){t.prototype[e]=function(r,i){const[s]=Zn(this,e,n,r,i);return s.attributes}}function fI(t,e,n){t.prototype[e]=function(r,i,s){const[o,a]=Zn(this,e,n,r,i,s);return o.attributes.hasOwnProperty(a)}}function pI(t,e,n){t.prototype[e]=function(r,i,s,o){const[a,l,c]=Zn(this,e,n,r,i,s,o);return a.attributes[l]=c,this.emit("nodeAttributesUpdated",{key:a.key,type:"set",attributes:a.attributes,name:l}),this}}function gI(t,e,n){t.prototype[e]=function(r,i,s,o){const[a,l,c]=Zn(this,e,n,r,i,s,o);if(typeof c!="function")throw new ye(`Graph.${e}: updater should be a function.`);const d=a.attributes,u=c(d[l]);return d[l]=u,this.emit("nodeAttributesUpdated",{key:a.key,type:"set",attributes:a.attributes,name:l}),this}}function mI(t,e,n){t.prototype[e]=function(r,i,s){const[o,a]=Zn(this,e,n,r,i,s);return delete o.attributes[a],this.emit("nodeAttributesUpdated",{key:o.key,type:"remove",attributes:o.attributes,name:a}),this}}function yI(t,e,n){t.prototype[e]=function(r,i,s){const[o,a]=Zn(this,e,n,r,i,s);if(!ut(a))throw new ye(`Graph.${e}: provided attributes are not a plain object.`);return o.attributes=a,this.emit("nodeAttributesUpdated",{key:o.key,type:"replace",attributes:o.attributes}),this}}function vI(t,e,n){t.prototype[e]=function(r,i,s){const[o,a]=Zn(this,e,n,r,i,s);if(!ut(a))throw new ye(`Graph.${e}: provided attributes are not a plain object.`);return it(o.attributes,a),this.emit("nodeAttributesUpdated",{key:o.key,type:"merge",attributes:o.attributes,data:a}),this}}function _I(t,e,n){t.prototype[e]=function(r,i,s){const[o,a]=Zn(this,e,n,r,i,s);if(typeof a!="function")throw new ye(`Graph.${e}: provided updater is not a function.`);return o.attributes=a(o.attributes),this.emit("nodeAttributesUpdated",{key:o.key,type:"update",attributes:o.attributes}),this}}const bI=[{name:t=>`get${t}Attribute`,attacher:uI},{name:t=>`get${t}Attributes`,attacher:hI},{name:t=>`has${t}Attribute`,attacher:fI},{name:t=>`set${t}Attribute`,attacher:pI},{name:t=>`update${t}Attribute`,attacher:gI},{name:t=>`remove${t}Attribute`,attacher:mI},{name:t=>`replace${t}Attributes`,attacher:yI},{name:t=>`merge${t}Attributes`,attacher:vI},{name:t=>`update${t}Attributes`,attacher:_I}];function wI(t){bI.forEach(function({name:e,attacher:n}){n(t,e("Node"),Ty),n(t,e("Source"),Ry),n(t,e("Target"),dI),n(t,e("Opposite"),Ny)})}function EI(t,e,n){t.prototype[e]=function(r,i){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new xe(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new xe(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+r,a=""+i;if(i=arguments[2],s=Kt(this,o,a,n),!s)throw new ue(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new xe(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,s=this._edges.get(r),!s)throw new ue(`Graph.${e}: could not find the "${r}" edge in the graph.`)}return s.attributes[i]}}function AI(t,e,n){t.prototype[e]=function(r){let i;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new xe(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>1){if(this.multi)throw new xe(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+r,o=""+arguments[1];if(i=Kt(this,s,o,n),!i)throw new ue(`Graph.${e}: could not find an edge for the given path ("${s}" - "${o}").`)}else{if(n!=="mixed")throw new xe(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,i=this._edges.get(r),!i)throw new ue(`Graph.${e}: could not find the "${r}" edge in the graph.`)}return i.attributes}}function kI(t,e,n){t.prototype[e]=function(r,i){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new xe(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new xe(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+r,a=""+i;if(i=arguments[2],s=Kt(this,o,a,n),!s)throw new ue(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new xe(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,s=this._edges.get(r),!s)throw new ue(`Graph.${e}: could not find the "${r}" edge in the graph.`)}return s.attributes.hasOwnProperty(i)}}function xI(t,e,n){t.prototype[e]=function(r,i,s){let o;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new xe(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new xe(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+r,l=""+i;if(i=arguments[2],s=arguments[3],o=Kt(this,a,l,n),!o)throw new ue(`Graph.${e}: could not find an edge for the given path ("${a}" - "${l}").`)}else{if(n!=="mixed")throw new xe(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,o=this._edges.get(r),!o)throw new ue(`Graph.${e}: could not find the "${r}" edge in the graph.`)}return o.attributes[i]=s,this.emit("edgeAttributesUpdated",{key:o.key,type:"set",attributes:o.attributes,name:i}),this}}function CI(t,e,n){t.prototype[e]=function(r,i,s){let o;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new xe(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new xe(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+r,l=""+i;if(i=arguments[2],s=arguments[3],o=Kt(this,a,l,n),!o)throw new ue(`Graph.${e}: could not find an edge for the given path ("${a}" - "${l}").`)}else{if(n!=="mixed")throw new xe(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,o=this._edges.get(r),!o)throw new ue(`Graph.${e}: could not find the "${r}" edge in the graph.`)}if(typeof s!="function")throw new ye(`Graph.${e}: updater should be a function.`);return o.attributes[i]=s(o.attributes[i]),this.emit("edgeAttributesUpdated",{key:o.key,type:"set",attributes:o.attributes,name:i}),this}}function SI(t,e,n){t.prototype[e]=function(r,i){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new xe(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new xe(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+r,a=""+i;if(i=arguments[2],s=Kt(this,o,a,n),!s)throw new ue(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new xe(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,s=this._edges.get(r),!s)throw new ue(`Graph.${e}: could not find the "${r}" edge in the graph.`)}return delete s.attributes[i],this.emit("edgeAttributesUpdated",{key:s.key,type:"remove",attributes:s.attributes,name:i}),this}}function TI(t,e,n){t.prototype[e]=function(r,i){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new xe(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new xe(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+r,a=""+i;if(i=arguments[2],s=Kt(this,o,a,n),!s)throw new ue(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new xe(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,s=this._edges.get(r),!s)throw new ue(`Graph.${e}: could not find the "${r}" edge in the graph.`)}if(!ut(i))throw new ye(`Graph.${e}: provided attributes are not a plain object.`);return s.attributes=i,this.emit("edgeAttributesUpdated",{key:s.key,type:"replace",attributes:s.attributes}),this}}function RI(t,e,n){t.prototype[e]=function(r,i){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new xe(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new xe(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+r,a=""+i;if(i=arguments[2],s=Kt(this,o,a,n),!s)throw new ue(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new xe(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,s=this._edges.get(r),!s)throw new ue(`Graph.${e}: could not find the "${r}" edge in the graph.`)}if(!ut(i))throw new ye(`Graph.${e}: provided attributes are not a plain object.`);return it(s.attributes,i),this.emit("edgeAttributesUpdated",{key:s.key,type:"merge",attributes:s.attributes,data:i}),this}}function NI(t,e,n){t.prototype[e]=function(r,i){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new xe(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new xe(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+r,a=""+i;if(i=arguments[2],s=Kt(this,o,a,n),!s)throw new ue(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new xe(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,s=this._edges.get(r),!s)throw new ue(`Graph.${e}: could not find the "${r}" edge in the graph.`)}if(typeof i!="function")throw new ye(`Graph.${e}: provided updater is not a function.`);return s.attributes=i(s.attributes),this.emit("edgeAttributesUpdated",{key:s.key,type:"update",attributes:s.attributes}),this}}const LI=[{name:t=>`get${t}Attribute`,attacher:EI},{name:t=>`get${t}Attributes`,attacher:AI},{name:t=>`has${t}Attribute`,attacher:kI},{name:t=>`set${t}Attribute`,attacher:xI},{name:t=>`update${t}Attribute`,attacher:CI},{name:t=>`remove${t}Attribute`,attacher:SI},{name:t=>`replace${t}Attributes`,attacher:TI},{name:t=>`merge${t}Attributes`,attacher:RI},{name:t=>`update${t}Attributes`,attacher:NI}];function II(t){LI.forEach(function({name:e,attacher:n}){n(t,e("Edge"),"mixed"),n(t,e("DirectedEdge"),"directed"),n(t,e("UndirectedEdge"),"undirected")})}const DI=[{name:"edges",type:"mixed"},{name:"inEdges",type:"directed",direction:"in"},{name:"outEdges",type:"directed",direction:"out"},{name:"inboundEdges",type:"mixed",direction:"in"},{name:"outboundEdges",type:"mixed",direction:"out"},{name:"directedEdges",type:"directed"},{name:"undirectedEdges",type:"undirected"}];function PI(t,e,n,r){let i=!1;for(const s in e){if(s===r)continue;const o=e[s];if(i=n(o.key,o.attributes,o.source.key,o.target.key,o.source.attributes,o.target.attributes,o.undirected),t&&i)return o.key}}function GI(t,e,n,r){let i,s,o,a=!1;for(const l in e)if(l!==r){i=e[l];do{if(s=i.source,o=i.target,a=n(i.key,i.attributes,s.key,o.key,s.attributes,o.attributes,i.undirected),t&&a)return i.key;i=i.next}while(i!==void 0)}}function ml(t,e){const n=Object.keys(t),r=n.length;let i,s=0;return new Zt(function(){do if(i)i=i.next;else{if(s>=r)return{done:!0};const a=n[s++];if(a===e){i=void 0;continue}i=t[a]}while(!i);return{done:!1,value:{edge:i.key,attributes:i.attributes,source:i.source.key,target:i.target.key,sourceAttributes:i.source.attributes,targetAttributes:i.target.attributes,undirected:i.undirected}}})}function MI(t,e,n,r){const i=e[n];if(!i)return;const s=i.source,o=i.target;if(r(i.key,i.attributes,s.key,o.key,s.attributes,o.attributes,i.undirected)&&t)return i.key}function OI(t,e,n,r){let i=e[n];if(!i)return;let s=!1;do{if(s=r(i.key,i.attributes,i.source.key,i.target.key,i.source.attributes,i.target.attributes,i.undirected),t&&s)return i.key;i=i.next}while(i!==void 0)}function yl(t,e){let n=t[e];return n.next!==void 0?new Zt(function(){if(!n)return{done:!0};const r={edge:n.key,attributes:n.attributes,source:n.source.key,target:n.target.key,sourceAttributes:n.source.attributes,targetAttributes:n.target.attributes,undirected:n.undirected};return n=n.next,{done:!1,value:r}}):Zt.of({edge:n.key,attributes:n.attributes,source:n.source.key,target:n.target.key,sourceAttributes:n.source.attributes,targetAttributes:n.target.attributes,undirected:n.undirected})}function FI(t,e){if(t.size===0)return[];if(e==="mixed"||e===t.type)return typeof Array.from=="function"?Array.from(t._edges.keys()):Ay(t._edges.keys(),t._edges.size);const n=e==="undirected"?t.undirectedSize:t.directedSize,r=new Array(n),i=e==="undirected",s=t._edges.values();let o=0,a,l;for(;a=s.next(),a.done!==!0;)l=a.value,l.undirected===i&&(r[o++]=l.key);return r}function Ly(t,e,n,r){if(e.size===0)return;const i=n!=="mixed"&&n!==e.type,s=n==="undirected";let o,a,l=!1;const c=e._edges.values();for(;o=c.next(),o.done!==!0;){if(a=o.value,i&&a.undirected!==s)continue;const{key:d,attributes:u,source:h,target:f}=a;if(l=r(d,u,h.key,f.key,h.attributes,f.attributes,a.undirected),t&&l)return d}}function $I(t,e){if(t.size===0)return Zt.empty();const n=e!=="mixed"&&e!==t.type,r=e==="undirected",i=t._edges.values();return new Zt(function(){let o,a;for(;;){if(o=i.next(),o.done)return o;if(a=o.value,!(n&&a.undirected!==r))break}return{value:{edge:a.key,attributes:a.attributes,source:a.source.key,target:a.target.key,sourceAttributes:a.source.attributes,targetAttributes:a.target.attributes,undirected:a.undirected},done:!1}})}function Id(t,e,n,r,i,s){const o=e?GI:PI;let a;if(n!=="undirected"&&(r!=="out"&&(a=o(t,i.in,s),t&&a)||r!=="in"&&(a=o(t,i.out,s,r?void 0:i.key),t&&a))||n!=="directed"&&(a=o(t,i.undirected,s),t&&a))return a}function zI(t,e,n,r){const i=[];return Id(!1,t,e,n,r,function(s){i.push(s)}),i}function BI(t,e,n){let r=Zt.empty();return t!=="undirected"&&(e!=="out"&&typeof n.in<"u"&&(r=Vn(r,ml(n.in))),e!=="in"&&typeof n.out<"u"&&(r=Vn(r,ml(n.out,e?void 0:n.key)))),t!=="directed"&&typeof n.undirected<"u"&&(r=Vn(r,ml(n.undirected))),r}function Dd(t,e,n,r,i,s,o){const a=n?OI:MI;let l;if(e!=="undirected"&&(typeof i.in<"u"&&r!=="out"&&(l=a(t,i.in,s,o),t&&l)||typeof i.out<"u"&&r!=="in"&&(r||i.key!==s)&&(l=a(t,i.out,s,o),t&&l))||e!=="directed"&&typeof i.undirected<"u"&&(l=a(t,i.undirected,s,o),t&&l))return l}function VI(t,e,n,r,i){const s=[];return Dd(!1,t,e,n,r,i,function(o){s.push(o)}),s}function UI(t,e,n,r){let i=Zt.empty();return t!=="undirected"&&(typeof n.in<"u"&&e!=="out"&&r in n.in&&(i=Vn(i,yl(n.in,r))),typeof n.out<"u"&&e!=="in"&&r in n.out&&(e||n.key!==r)&&(i=Vn(i,yl(n.out,r)))),t!=="directed"&&typeof n.undirected<"u"&&r in n.undirected&&(i=Vn(i,yl(n.undirected,r))),i}function jI(t,e){const{name:n,type:r,direction:i}=e;t.prototype[n]=function(s,o){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return[];if(!arguments.length)return FI(this,r);if(arguments.length===1){s=""+s;const a=this._nodes.get(s);if(typeof a>"u")throw new ue(`Graph.${n}: could not find the "${s}" node in the graph.`);return zI(this.multi,r==="mixed"?this.type:r,i,a)}if(arguments.length===2){s=""+s,o=""+o;const a=this._nodes.get(s);if(!a)throw new ue(`Graph.${n}:  could not find the "${s}" source node in the graph.`);if(!this._nodes.has(o))throw new ue(`Graph.${n}:  could not find the "${o}" target node in the graph.`);return VI(r,this.multi,i,a,o)}throw new ye(`Graph.${n}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function HI(t,e){const{name:n,type:r,direction:i}=e,s="forEach"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[s]=function(c,d,u){if(!(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)){if(arguments.length===1)return u=c,Ly(!1,this,r,u);if(arguments.length===2){c=""+c,u=d;const h=this._nodes.get(c);if(typeof h>"u")throw new ue(`Graph.${s}: could not find the "${c}" node in the graph.`);return Id(!1,this.multi,r==="mixed"?this.type:r,i,h,u)}if(arguments.length===3){c=""+c,d=""+d;const h=this._nodes.get(c);if(!h)throw new ue(`Graph.${s}:  could not find the "${c}" source node in the graph.`);if(!this._nodes.has(d))throw new ue(`Graph.${s}:  could not find the "${d}" target node in the graph.`);return Dd(!1,r,this.multi,i,h,d,u)}throw new ye(`Graph.${s}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)}};const o="map"+n[0].toUpperCase()+n.slice(1);t.prototype[o]=function(){const c=Array.prototype.slice.call(arguments),d=c.pop();let u;if(c.length===0){let h=0;r!=="directed"&&(h+=this.undirectedSize),r!=="undirected"&&(h+=this.directedSize),u=new Array(h);let f=0;c.push((g,y,w,b,E,A,v)=>{u[f++]=d(g,y,w,b,E,A,v)})}else u=[],c.push((h,f,g,y,w,b,E)=>{u.push(d(h,f,g,y,w,b,E))});return this[s].apply(this,c),u};const a="filter"+n[0].toUpperCase()+n.slice(1);t.prototype[a]=function(){const c=Array.prototype.slice.call(arguments),d=c.pop(),u=[];return c.push((h,f,g,y,w,b,E)=>{d(h,f,g,y,w,b,E)&&u.push(h)}),this[s].apply(this,c),u};const l="reduce"+n[0].toUpperCase()+n.slice(1);t.prototype[l]=function(){let c=Array.prototype.slice.call(arguments);if(c.length<2||c.length>4)throw new ye(`Graph.${l}: invalid number of arguments (expecting 2, 3 or 4 and got ${c.length}).`);if(typeof c[c.length-1]=="function"&&typeof c[c.length-2]!="function")throw new ye(`Graph.${l}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let d,u;c.length===2?(d=c[0],u=c[1],c=[]):c.length===3?(d=c[1],u=c[2],c=[c[0]]):c.length===4&&(d=c[2],u=c[3],c=[c[0],c[1]]);let h=u;return c.push((f,g,y,w,b,E,A)=>{h=d(h,f,g,y,w,b,E,A)}),this[s].apply(this,c),h}}function WI(t,e){const{name:n,type:r,direction:i}=e,s="find"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[s]=function(l,c,d){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return!1;if(arguments.length===1)return d=l,Ly(!0,this,r,d);if(arguments.length===2){l=""+l,d=c;const u=this._nodes.get(l);if(typeof u>"u")throw new ue(`Graph.${s}: could not find the "${l}" node in the graph.`);return Id(!0,this.multi,r==="mixed"?this.type:r,i,u,d)}if(arguments.length===3){l=""+l,c=""+c;const u=this._nodes.get(l);if(!u)throw new ue(`Graph.${s}:  could not find the "${l}" source node in the graph.`);if(!this._nodes.has(c))throw new ue(`Graph.${s}:  could not find the "${c}" target node in the graph.`);return Dd(!0,r,this.multi,i,u,c,d)}throw new ye(`Graph.${s}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)};const o="some"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[o]=function(){const l=Array.prototype.slice.call(arguments),c=l.pop();return l.push((u,h,f,g,y,w,b)=>c(u,h,f,g,y,w,b)),!!this[s].apply(this,l)};const a="every"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[a]=function(){const l=Array.prototype.slice.call(arguments),c=l.pop();return l.push((u,h,f,g,y,w,b)=>!c(u,h,f,g,y,w,b)),!this[s].apply(this,l)}}function qI(t,e){const{name:n,type:r,direction:i}=e,s=n.slice(0,-1)+"Entries";t.prototype[s]=function(o,a){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return Zt.empty();if(!arguments.length)return $I(this,r);if(arguments.length===1){o=""+o;const l=this._nodes.get(o);if(!l)throw new ue(`Graph.${s}: could not find the "${o}" node in the graph.`);return BI(r,i,l)}if(arguments.length===2){o=""+o,a=""+a;const l=this._nodes.get(o);if(!l)throw new ue(`Graph.${s}:  could not find the "${o}" source node in the graph.`);if(!this._nodes.has(a))throw new ue(`Graph.${s}:  could not find the "${a}" target node in the graph.`);return UI(r,i,l,a)}throw new ye(`Graph.${s}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function KI(t){DI.forEach(e=>{jI(t,e),HI(t,e),WI(t,e),qI(t,e)})}const XI=[{name:"neighbors",type:"mixed"},{name:"inNeighbors",type:"directed",direction:"in"},{name:"outNeighbors",type:"directed",direction:"out"},{name:"inboundNeighbors",type:"mixed",direction:"in"},{name:"outboundNeighbors",type:"mixed",direction:"out"},{name:"directedNeighbors",type:"directed"},{name:"undirectedNeighbors",type:"undirected"}];function ka(){this.A=null,this.B=null}ka.prototype.wrap=function(t){this.A===null?this.A=t:this.B===null&&(this.B=t)};ka.prototype.has=function(t){return this.A!==null&&t in this.A||this.B!==null&&t in this.B};function Fi(t,e,n,r,i){for(const s in r){const o=r[s],a=o.source,l=o.target,c=a===n?l:a;if(e&&e.has(c.key))continue;const d=i(c.key,c.attributes);if(t&&d)return c.key}}function Pd(t,e,n,r,i){if(e!=="mixed"){if(e==="undirected")return Fi(t,null,r,r.undirected,i);if(typeof n=="string")return Fi(t,null,r,r[n],i)}const s=new ka;let o;if(e!=="undirected"){if(n!=="out"){if(o=Fi(t,null,r,r.in,i),t&&o)return o;s.wrap(r.in)}if(n!=="in"){if(o=Fi(t,s,r,r.out,i),t&&o)return o;s.wrap(r.out)}}if(e!=="directed"&&(o=Fi(t,s,r,r.undirected,i),t&&o))return o}function ZI(t,e,n){if(t!=="mixed"){if(t==="undirected")return Object.keys(n.undirected);if(typeof e=="string")return Object.keys(n[e])}const r=[];return Pd(!1,t,e,n,function(i){r.push(i)}),r}function $i(t,e,n){const r=Object.keys(n),i=r.length;let s=0;return new Zt(function(){let a=null;do{if(s>=i)return t&&t.wrap(n),{done:!0};const l=n[r[s++]],c=l.source,d=l.target;if(a=c===e?d:c,t&&t.has(a.key)){a=null;continue}}while(a===null);return{done:!1,value:{neighbor:a.key,attributes:a.attributes}}})}function YI(t,e,n){if(t!=="mixed"){if(t==="undirected")return $i(null,n,n.undirected);if(typeof e=="string")return $i(null,n,n[e])}let r=Zt.empty();const i=new ka;return t!=="undirected"&&(e!=="out"&&(r=Vn(r,$i(i,n,n.in))),e!=="in"&&(r=Vn(r,$i(i,n,n.out)))),t!=="directed"&&(r=Vn(r,$i(i,n,n.undirected))),r}function JI(t,e){const{name:n,type:r,direction:i}=e;t.prototype[n]=function(s){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return[];s=""+s;const o=this._nodes.get(s);if(typeof o>"u")throw new ue(`Graph.${n}: could not find the "${s}" node in the graph.`);return ZI(r==="mixed"?this.type:r,i,o)}}function QI(t,e){const{name:n,type:r,direction:i}=e,s="forEach"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[s]=function(c,d){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return;c=""+c;const u=this._nodes.get(c);if(typeof u>"u")throw new ue(`Graph.${s}: could not find the "${c}" node in the graph.`);Pd(!1,r==="mixed"?this.type:r,i,u,d)};const o="map"+n[0].toUpperCase()+n.slice(1);t.prototype[o]=function(c,d){const u=[];return this[s](c,(h,f)=>{u.push(d(h,f))}),u};const a="filter"+n[0].toUpperCase()+n.slice(1);t.prototype[a]=function(c,d){const u=[];return this[s](c,(h,f)=>{d(h,f)&&u.push(h)}),u};const l="reduce"+n[0].toUpperCase()+n.slice(1);t.prototype[l]=function(c,d,u){if(arguments.length<3)throw new ye(`Graph.${l}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let h=u;return this[s](c,(f,g)=>{h=d(h,f,g)}),h}}function e2(t,e){const{name:n,type:r,direction:i}=e,s=n[0].toUpperCase()+n.slice(1,-1),o="find"+s;t.prototype[o]=function(c,d){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return;c=""+c;const u=this._nodes.get(c);if(typeof u>"u")throw new ue(`Graph.${o}: could not find the "${c}" node in the graph.`);return Pd(!0,r==="mixed"?this.type:r,i,u,d)};const a="some"+s;t.prototype[a]=function(c,d){return!!this[o](c,d)};const l="every"+s;t.prototype[l]=function(c,d){return!this[o](c,(h,f)=>!d(h,f))}}function t2(t,e){const{name:n,type:r,direction:i}=e,s=n.slice(0,-1)+"Entries";t.prototype[s]=function(o){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return Zt.empty();o=""+o;const a=this._nodes.get(o);if(typeof a>"u")throw new ue(`Graph.${s}: could not find the "${o}" node in the graph.`);return YI(r==="mixed"?this.type:r,i,a)}}function n2(t){XI.forEach(e=>{JI(t,e),QI(t,e),e2(t,e),t2(t,e)})}function io(t,e,n,r,i){const s=r._nodes.values(),o=r.type;let a,l,c,d,u,h;for(;a=s.next(),a.done!==!0;){let f=!1;if(l=a.value,o!=="undirected"){d=l.out;for(c in d){u=d[c];do h=u.target,f=!0,i(l.key,h.key,l.attributes,h.attributes,u.key,u.attributes,u.undirected),u=u.next;while(u)}}if(o!=="directed"){d=l.undirected;for(c in d)if(!(e&&l.key>c)){u=d[c];do h=u.target,h.key!==c&&(h=u.source),f=!0,i(l.key,h.key,l.attributes,h.attributes,u.key,u.attributes,u.undirected),u=u.next;while(u)}}n&&!f&&i(l.key,null,l.attributes,null,null,null,null)}}function r2(t,e){const n={key:t};return ky(e.attributes)||(n.attributes=it({},e.attributes)),n}function i2(t,e,n){const r={key:e,source:n.source.key,target:n.target.key};return ky(n.attributes)||(r.attributes=it({},n.attributes)),t==="mixed"&&n.undirected&&(r.undirected=!0),r}function s2(t){if(!ut(t))throw new ye('Graph.import: invalid serialized node. A serialized node should be a plain object with at least a "key" property.');if(!("key"in t))throw new ye("Graph.import: serialized node is missing its key.");if("attributes"in t&&(!ut(t.attributes)||t.attributes===null))throw new ye("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.")}function o2(t){if(!ut(t))throw new ye('Graph.import: invalid serialized edge. A serialized edge should be a plain object with at least a "source" & "target" property.');if(!("source"in t))throw new ye("Graph.import: serialized edge is missing its source.");if(!("target"in t))throw new ye("Graph.import: serialized edge is missing its target.");if("attributes"in t&&(!ut(t.attributes)||t.attributes===null))throw new ye("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.");if("undirected"in t&&typeof t.undirected!="boolean")throw new ye("Graph.import: invalid undirectedness information. Undirected should be boolean or omitted.")}const a2=cI(),l2=new Set(["directed","undirected","mixed"]),Rf=new Set(["domain","_events","_eventsCount","_maxListeners"]),c2=[{name:t=>`${t}Edge`,generateKey:!0},{name:t=>`${t}DirectedEdge`,generateKey:!0,type:"directed"},{name:t=>`${t}UndirectedEdge`,generateKey:!0,type:"undirected"},{name:t=>`${t}EdgeWithKey`},{name:t=>`${t}DirectedEdgeWithKey`,type:"directed"},{name:t=>`${t}UndirectedEdgeWithKey`,type:"undirected"}],d2={allowSelfLoops:!0,multi:!1,type:"mixed"};function u2(t,e,n){if(n&&!ut(n))throw new ye(`Graph.addNode: invalid attributes. Expecting an object but got "${n}"`);if(e=""+e,n=n||{},t._nodes.has(e))throw new xe(`Graph.addNode: the "${e}" node already exist in the graph.`);const r=new t.NodeDataClass(e,n);return t._nodes.set(e,r),t.emit("nodeAdded",{key:e,attributes:n}),r}function Nf(t,e,n){const r=new t.NodeDataClass(e,n);return t._nodes.set(e,r),t.emit("nodeAdded",{key:e,attributes:n}),r}function Iy(t,e,n,r,i,s,o,a){if(!r&&t.type==="undirected")throw new xe(`Graph.${e}: you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead.`);if(r&&t.type==="directed")throw new xe(`Graph.${e}: you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead.`);if(a&&!ut(a))throw new ye(`Graph.${e}: invalid attributes. Expecting an object but got "${a}"`);if(s=""+s,o=""+o,a=a||{},!t.allowSelfLoops&&s===o)throw new xe(`Graph.${e}: source & target are the same ("${s}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);const l=t._nodes.get(s),c=t._nodes.get(o);if(!l)throw new ue(`Graph.${e}: source node "${s}" not found.`);if(!c)throw new ue(`Graph.${e}: target node "${o}" not found.`);const d={key:null,undirected:r,source:s,target:o,attributes:a};if(n)i=t._edgeKeyGenerator();else if(i=""+i,t._edges.has(i))throw new xe(`Graph.${e}: the "${i}" edge already exists in the graph.`);if(!t.multi&&(r?typeof l.undirected[o]<"u":typeof l.out[o]<"u"))throw new xe(`Graph.${e}: an edge linking "${s}" to "${o}" already exists. If you really want to add multiple edges linking those nodes, you should create a multi graph by using the 'multi' option.`);const u=new Ei(r,i,l,c,a);t._edges.set(i,u);const h=s===o;return r?(l.undirectedDegree++,c.undirectedDegree++,h&&(l.undirectedLoops++,t._undirectedSelfLoopCount++)):(l.outDegree++,c.inDegree++,h&&(l.directedLoops++,t._directedSelfLoopCount++)),t.multi?u.attachMulti():u.attach(),r?t._undirectedSize++:t._directedSize++,d.key=i,t.emit("edgeAdded",d),i}function h2(t,e,n,r,i,s,o,a,l){if(!r&&t.type==="undirected")throw new xe(`Graph.${e}: you cannot merge/update a directed edge to an undirected graph. Use the #.mergeEdge/#.updateEdge or #.addUndirectedEdge instead.`);if(r&&t.type==="directed")throw new xe(`Graph.${e}: you cannot merge/update an undirected edge to a directed graph. Use the #.mergeEdge/#.updateEdge or #.addDirectedEdge instead.`);if(a){if(l){if(typeof a!="function")throw new ye(`Graph.${e}: invalid updater function. Expecting a function but got "${a}"`)}else if(!ut(a))throw new ye(`Graph.${e}: invalid attributes. Expecting an object but got "${a}"`)}s=""+s,o=""+o;let c;if(l&&(c=a,a=void 0),!t.allowSelfLoops&&s===o)throw new xe(`Graph.${e}: source & target are the same ("${s}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);let d=t._nodes.get(s),u=t._nodes.get(o),h,f;if(!n&&(h=t._edges.get(i),h)){if((h.source.key!==s||h.target.key!==o)&&(!r||h.source.key!==o||h.target.key!==s))throw new xe(`Graph.${e}: inconsistency detected when attempting to merge the "${i}" edge with "${s}" source & "${o}" target vs. ("${h.source.key}", "${h.target.key}").`);f=h}if(!f&&!t.multi&&d&&(f=r?d.undirected[o]:d.out[o]),f){const E=[f.key,!1,!1,!1];if(l?!c:!a)return E;if(l){const A=f.attributes;f.attributes=c(A),t.emit("edgeAttributesUpdated",{type:"replace",key:f.key,attributes:f.attributes})}else it(f.attributes,a),t.emit("edgeAttributesUpdated",{type:"merge",key:f.key,attributes:f.attributes,data:a});return E}a=a||{},l&&c&&(a=c(a));const g={key:null,undirected:r,source:s,target:o,attributes:a};if(n)i=t._edgeKeyGenerator();else if(i=""+i,t._edges.has(i))throw new xe(`Graph.${e}: the "${i}" edge already exists in the graph.`);let y=!1,w=!1;d||(d=Nf(t,s,{}),y=!0,s===o&&(u=d,w=!0)),u||(u=Nf(t,o,{}),w=!0),h=new Ei(r,i,d,u,a),t._edges.set(i,h);const b=s===o;return r?(d.undirectedDegree++,u.undirectedDegree++,b&&(d.undirectedLoops++,t._undirectedSelfLoopCount++)):(d.outDegree++,u.inDegree++,b&&(d.directedLoops++,t._directedSelfLoopCount++)),t.multi?h.attachMulti():h.attach(),r?t._undirectedSize++:t._directedSize++,g.key=i,t.emit("edgeAdded",g),[i,!0,y,w]}function zr(t,e){t._edges.delete(e.key);const{source:n,target:r,attributes:i}=e,s=e.undirected,o=n===r;s?(n.undirectedDegree--,r.undirectedDegree--,o&&(n.undirectedLoops--,t._undirectedSelfLoopCount--)):(n.outDegree--,r.inDegree--,o&&(n.directedLoops--,t._directedSelfLoopCount--)),t.multi?e.detachMulti():e.detach(),s?t._undirectedSize--:t._directedSize--,t.emit("edgeDropped",{key:e.key,attributes:i,source:n.key,target:r.key,undirected:s})}class Be extends vy.EventEmitter{constructor(e){if(super(),e=it({},d2,e),typeof e.multi!="boolean")throw new ye(`Graph.constructor: invalid 'multi' option. Expecting a boolean but got "${e.multi}".`);if(!l2.has(e.type))throw new ye(`Graph.constructor: invalid 'type' option. Should be one of "mixed", "directed" or "undirected" but got "${e.type}".`);if(typeof e.allowSelfLoops!="boolean")throw new ye(`Graph.constructor: invalid 'allowSelfLoops' option. Expecting a boolean but got "${e.allowSelfLoops}".`);const n=e.type==="mixed"?xy:e.type==="directed"?Cy:Sy;jt(this,"NodeDataClass",n);const r="geid_"+a2()+"_";let i=0;const s=()=>{let o;do o=r+i++;while(this._edges.has(o));return o};jt(this,"_attributes",{}),jt(this,"_nodes",new Map),jt(this,"_edges",new Map),jt(this,"_directedSize",0),jt(this,"_undirectedSize",0),jt(this,"_directedSelfLoopCount",0),jt(this,"_undirectedSelfLoopCount",0),jt(this,"_edgeKeyGenerator",s),jt(this,"_options",e),Rf.forEach(o=>jt(this,o,this[o])),Qt(this,"order",()=>this._nodes.size),Qt(this,"size",()=>this._edges.size),Qt(this,"directedSize",()=>this._directedSize),Qt(this,"undirectedSize",()=>this._undirectedSize),Qt(this,"selfLoopCount",()=>this._directedSelfLoopCount+this._undirectedSelfLoopCount),Qt(this,"directedSelfLoopCount",()=>this._directedSelfLoopCount),Qt(this,"undirectedSelfLoopCount",()=>this._undirectedSelfLoopCount),Qt(this,"multi",this._options.multi),Qt(this,"type",this._options.type),Qt(this,"allowSelfLoops",this._options.allowSelfLoops),Qt(this,"implementation",()=>"graphology")}_resetInstanceCounters(){this._directedSize=0,this._undirectedSize=0,this._directedSelfLoopCount=0,this._undirectedSelfLoopCount=0}hasNode(e){return this._nodes.has(""+e)}hasDirectedEdge(e,n){if(this.type==="undirected")return!1;if(arguments.length===1){const r=""+e,i=this._edges.get(r);return!!i&&!i.undirected}else if(arguments.length===2){e=""+e,n=""+n;const r=this._nodes.get(e);return r?r.out.hasOwnProperty(n):!1}throw new ye(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasUndirectedEdge(e,n){if(this.type==="directed")return!1;if(arguments.length===1){const r=""+e,i=this._edges.get(r);return!!i&&i.undirected}else if(arguments.length===2){e=""+e,n=""+n;const r=this._nodes.get(e);return r?r.undirected.hasOwnProperty(n):!1}throw new ye(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasEdge(e,n){if(arguments.length===1){const r=""+e;return this._edges.has(r)}else if(arguments.length===2){e=""+e,n=""+n;const r=this._nodes.get(e);return r?typeof r.out<"u"&&r.out.hasOwnProperty(n)||typeof r.undirected<"u"&&r.undirected.hasOwnProperty(n):!1}throw new ye(`Graph.hasEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}directedEdge(e,n){if(this.type==="undirected")return;if(e=""+e,n=""+n,this.multi)throw new xe("Graph.directedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.directedEdges instead.");const r=this._nodes.get(e);if(!r)throw new ue(`Graph.directedEdge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(n))throw new ue(`Graph.directedEdge: could not find the "${n}" target node in the graph.`);const i=r.out&&r.out[n]||void 0;if(i)return i.key}undirectedEdge(e,n){if(this.type==="directed")return;if(e=""+e,n=""+n,this.multi)throw new xe("Graph.undirectedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.undirectedEdges instead.");const r=this._nodes.get(e);if(!r)throw new ue(`Graph.undirectedEdge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(n))throw new ue(`Graph.undirectedEdge: could not find the "${n}" target node in the graph.`);const i=r.undirected&&r.undirected[n]||void 0;if(i)return i.key}edge(e,n){if(this.multi)throw new xe("Graph.edge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.edges instead.");e=""+e,n=""+n;const r=this._nodes.get(e);if(!r)throw new ue(`Graph.edge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(n))throw new ue(`Graph.edge: could not find the "${n}" target node in the graph.`);const i=r.out&&r.out[n]||r.undirected&&r.undirected[n]||void 0;if(i)return i.key}areDirectedNeighbors(e,n){e=""+e,n=""+n;const r=this._nodes.get(e);if(!r)throw new ue(`Graph.areDirectedNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:n in r.in||n in r.out}areOutNeighbors(e,n){e=""+e,n=""+n;const r=this._nodes.get(e);if(!r)throw new ue(`Graph.areOutNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:n in r.out}areInNeighbors(e,n){e=""+e,n=""+n;const r=this._nodes.get(e);if(!r)throw new ue(`Graph.areInNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:n in r.in}areUndirectedNeighbors(e,n){e=""+e,n=""+n;const r=this._nodes.get(e);if(!r)throw new ue(`Graph.areUndirectedNeighbors: could not find the "${e}" node in the graph.`);return this.type==="directed"?!1:n in r.undirected}areNeighbors(e,n){e=""+e,n=""+n;const r=this._nodes.get(e);if(!r)throw new ue(`Graph.areNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&(n in r.in||n in r.out)||this.type!=="directed"&&n in r.undirected}areInboundNeighbors(e,n){e=""+e,n=""+n;const r=this._nodes.get(e);if(!r)throw new ue(`Graph.areInboundNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&n in r.in||this.type!=="directed"&&n in r.undirected}areOutboundNeighbors(e,n){e=""+e,n=""+n;const r=this._nodes.get(e);if(!r)throw new ue(`Graph.areOutboundNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&n in r.out||this.type!=="directed"&&n in r.undirected}inDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ue(`Graph.inDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree}outDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ue(`Graph.outDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.outDegree}directedDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ue(`Graph.directedDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree+n.outDegree}undirectedDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ue(`Graph.undirectedDegree: could not find the "${e}" node in the graph.`);return this.type==="directed"?0:n.undirectedDegree}inboundDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ue(`Graph.inboundDegree: could not find the "${e}" node in the graph.`);let r=0;return this.type!=="directed"&&(r+=n.undirectedDegree),this.type!=="undirected"&&(r+=n.inDegree),r}outboundDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ue(`Graph.outboundDegree: could not find the "${e}" node in the graph.`);let r=0;return this.type!=="directed"&&(r+=n.undirectedDegree),this.type!=="undirected"&&(r+=n.outDegree),r}degree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ue(`Graph.degree: could not find the "${e}" node in the graph.`);let r=0;return this.type!=="directed"&&(r+=n.undirectedDegree),this.type!=="undirected"&&(r+=n.inDegree+n.outDegree),r}inDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ue(`Graph.inDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree-n.directedLoops}outDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ue(`Graph.outDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.outDegree-n.directedLoops}directedDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ue(`Graph.directedDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree+n.outDegree-n.directedLoops*2}undirectedDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ue(`Graph.undirectedDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="directed"?0:n.undirectedDegree-n.undirectedLoops*2}inboundDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ue(`Graph.inboundDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let r=0,i=0;return this.type!=="directed"&&(r+=n.undirectedDegree,i+=n.undirectedLoops*2),this.type!=="undirected"&&(r+=n.inDegree,i+=n.directedLoops),r-i}outboundDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ue(`Graph.outboundDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let r=0,i=0;return this.type!=="directed"&&(r+=n.undirectedDegree,i+=n.undirectedLoops*2),this.type!=="undirected"&&(r+=n.outDegree,i+=n.directedLoops),r-i}degreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ue(`Graph.degreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let r=0,i=0;return this.type!=="directed"&&(r+=n.undirectedDegree,i+=n.undirectedLoops*2),this.type!=="undirected"&&(r+=n.inDegree+n.outDegree,i+=n.directedLoops*2),r-i}source(e){e=""+e;const n=this._edges.get(e);if(!n)throw new ue(`Graph.source: could not find the "${e}" edge in the graph.`);return n.source.key}target(e){e=""+e;const n=this._edges.get(e);if(!n)throw new ue(`Graph.target: could not find the "${e}" edge in the graph.`);return n.target.key}extremities(e){e=""+e;const n=this._edges.get(e);if(!n)throw new ue(`Graph.extremities: could not find the "${e}" edge in the graph.`);return[n.source.key,n.target.key]}opposite(e,n){e=""+e,n=""+n;const r=this._edges.get(n);if(!r)throw new ue(`Graph.opposite: could not find the "${n}" edge in the graph.`);const i=r.source.key,s=r.target.key;if(e===i)return s;if(e===s)return i;throw new ue(`Graph.opposite: the "${e}" node is not attached to the "${n}" edge (${i}, ${s}).`)}hasExtremity(e,n){e=""+e,n=""+n;const r=this._edges.get(e);if(!r)throw new ue(`Graph.hasExtremity: could not find the "${e}" edge in the graph.`);return r.source.key===n||r.target.key===n}isUndirected(e){e=""+e;const n=this._edges.get(e);if(!n)throw new ue(`Graph.isUndirected: could not find the "${e}" edge in the graph.`);return n.undirected}isDirected(e){e=""+e;const n=this._edges.get(e);if(!n)throw new ue(`Graph.isDirected: could not find the "${e}" edge in the graph.`);return!n.undirected}isSelfLoop(e){e=""+e;const n=this._edges.get(e);if(!n)throw new ue(`Graph.isSelfLoop: could not find the "${e}" edge in the graph.`);return n.source===n.target}addNode(e,n){return u2(this,e,n).key}mergeNode(e,n){if(n&&!ut(n))throw new ye(`Graph.mergeNode: invalid attributes. Expecting an object but got "${n}"`);e=""+e,n=n||{};let r=this._nodes.get(e);return r?(n&&(it(r.attributes,n),this.emit("nodeAttributesUpdated",{type:"merge",key:e,attributes:r.attributes,data:n})),[e,!1]):(r=new this.NodeDataClass(e,n),this._nodes.set(e,r),this.emit("nodeAdded",{key:e,attributes:n}),[e,!0])}updateNode(e,n){if(n&&typeof n!="function")throw new ye(`Graph.updateNode: invalid updater function. Expecting a function but got "${n}"`);e=""+e;let r=this._nodes.get(e);if(r){if(n){const s=r.attributes;r.attributes=n(s),this.emit("nodeAttributesUpdated",{type:"replace",key:e,attributes:r.attributes})}return[e,!1]}const i=n?n({}):{};return r=new this.NodeDataClass(e,i),this._nodes.set(e,r),this.emit("nodeAdded",{key:e,attributes:i}),[e,!0]}dropNode(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ue(`Graph.dropNode: could not find the "${e}" node in the graph.`);let r;if(this.type!=="undirected"){for(const i in n.out){r=n.out[i];do zr(this,r),r=r.next;while(r)}for(const i in n.in){r=n.in[i];do zr(this,r),r=r.next;while(r)}}if(this.type!=="directed")for(const i in n.undirected){r=n.undirected[i];do zr(this,r),r=r.next;while(r)}this._nodes.delete(e),this.emit("nodeDropped",{key:e,attributes:n.attributes})}dropEdge(e){let n;if(arguments.length>1){const r=""+arguments[0],i=""+arguments[1];if(n=Kt(this,r,i,this.type),!n)throw new ue(`Graph.dropEdge: could not find the "${r}" -> "${i}" edge in the graph.`)}else if(e=""+e,n=this._edges.get(e),!n)throw new ue(`Graph.dropEdge: could not find the "${e}" edge in the graph.`);return zr(this,n),this}dropDirectedEdge(e,n){if(arguments.length<2)throw new xe("Graph.dropDirectedEdge: it does not make sense to try and drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new xe("Graph.dropDirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");e=""+e,n=""+n;const r=Kt(this,e,n,"directed");if(!r)throw new ue(`Graph.dropDirectedEdge: could not find a "${e}" -> "${n}" edge in the graph.`);return zr(this,r),this}dropUndirectedEdge(e,n){if(arguments.length<2)throw new xe("Graph.dropUndirectedEdge: it does not make sense to drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new xe("Graph.dropUndirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");const r=Kt(this,e,n,"undirected");if(!r)throw new ue(`Graph.dropUndirectedEdge: could not find a "${e}" -> "${n}" edge in the graph.`);return zr(this,r),this}clear(){this._edges.clear(),this._nodes.clear(),this._resetInstanceCounters(),this.emit("cleared")}clearEdges(){const e=this._nodes.values();let n;for(;n=e.next(),n.done!==!0;)n.value.clear();this._edges.clear(),this._resetInstanceCounters(),this.emit("edgesCleared")}getAttribute(e){return this._attributes[e]}getAttributes(){return this._attributes}hasAttribute(e){return this._attributes.hasOwnProperty(e)}setAttribute(e,n){return this._attributes[e]=n,this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:e}),this}updateAttribute(e,n){if(typeof n!="function")throw new ye("Graph.updateAttribute: updater should be a function.");const r=this._attributes[e];return this._attributes[e]=n(r),this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:e}),this}removeAttribute(e){return delete this._attributes[e],this.emit("attributesUpdated",{type:"remove",attributes:this._attributes,name:e}),this}replaceAttributes(e){if(!ut(e))throw new ye("Graph.replaceAttributes: provided attributes are not a plain object.");return this._attributes=e,this.emit("attributesUpdated",{type:"replace",attributes:this._attributes}),this}mergeAttributes(e){if(!ut(e))throw new ye("Graph.mergeAttributes: provided attributes are not a plain object.");return it(this._attributes,e),this.emit("attributesUpdated",{type:"merge",attributes:this._attributes,data:e}),this}updateAttributes(e){if(typeof e!="function")throw new ye("Graph.updateAttributes: provided updater is not a function.");return this._attributes=e(this._attributes),this.emit("attributesUpdated",{type:"update",attributes:this._attributes}),this}updateEachNodeAttributes(e,n){if(typeof e!="function")throw new ye("Graph.updateEachNodeAttributes: expecting an updater function.");if(n&&!Tf(n))throw new ye("Graph.updateEachNodeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const r=this._nodes.values();let i,s;for(;i=r.next(),i.done!==!0;)s=i.value,s.attributes=e(s.key,s.attributes);this.emit("eachNodeAttributesUpdated",{hints:n||null})}updateEachEdgeAttributes(e,n){if(typeof e!="function")throw new ye("Graph.updateEachEdgeAttributes: expecting an updater function.");if(n&&!Tf(n))throw new ye("Graph.updateEachEdgeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const r=this._edges.values();let i,s,o,a;for(;i=r.next(),i.done!==!0;)s=i.value,o=s.source,a=s.target,s.attributes=e(s.key,s.attributes,o.key,a.key,o.attributes,a.attributes,s.undirected);this.emit("eachEdgeAttributesUpdated",{hints:n||null})}forEachAdjacencyEntry(e){if(typeof e!="function")throw new ye("Graph.forEachAdjacencyEntry: expecting a callback.");io(!1,!1,!1,this,e)}forEachAdjacencyEntryWithOrphans(e){if(typeof e!="function")throw new ye("Graph.forEachAdjacencyEntryWithOrphans: expecting a callback.");io(!1,!1,!0,this,e)}forEachAssymetricAdjacencyEntry(e){if(typeof e!="function")throw new ye("Graph.forEachAssymetricAdjacencyEntry: expecting a callback.");io(!1,!0,!1,this,e)}forEachAssymetricAdjacencyEntryWithOrphans(e){if(typeof e!="function")throw new ye("Graph.forEachAssymetricAdjacencyEntryWithOrphans: expecting a callback.");io(!1,!0,!0,this,e)}nodes(){return typeof Array.from=="function"?Array.from(this._nodes.keys()):Ay(this._nodes.keys(),this._nodes.size)}forEachNode(e){if(typeof e!="function")throw new ye("Graph.forEachNode: expecting a callback.");const n=this._nodes.values();let r,i;for(;r=n.next(),r.done!==!0;)i=r.value,e(i.key,i.attributes)}findNode(e){if(typeof e!="function")throw new ye("Graph.findNode: expecting a callback.");const n=this._nodes.values();let r,i;for(;r=n.next(),r.done!==!0;)if(i=r.value,e(i.key,i.attributes))return i.key}mapNodes(e){if(typeof e!="function")throw new ye("Graph.mapNode: expecting a callback.");const n=this._nodes.values();let r,i;const s=new Array(this.order);let o=0;for(;r=n.next(),r.done!==!0;)i=r.value,s[o++]=e(i.key,i.attributes);return s}someNode(e){if(typeof e!="function")throw new ye("Graph.someNode: expecting a callback.");const n=this._nodes.values();let r,i;for(;r=n.next(),r.done!==!0;)if(i=r.value,e(i.key,i.attributes))return!0;return!1}everyNode(e){if(typeof e!="function")throw new ye("Graph.everyNode: expecting a callback.");const n=this._nodes.values();let r,i;for(;r=n.next(),r.done!==!0;)if(i=r.value,!e(i.key,i.attributes))return!1;return!0}filterNodes(e){if(typeof e!="function")throw new ye("Graph.filterNodes: expecting a callback.");const n=this._nodes.values();let r,i;const s=[];for(;r=n.next(),r.done!==!0;)i=r.value,e(i.key,i.attributes)&&s.push(i.key);return s}reduceNodes(e,n){if(typeof e!="function")throw new ye("Graph.reduceNodes: expecting a callback.");if(arguments.length<2)throw new ye("Graph.reduceNodes: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.");let r=n;const i=this._nodes.values();let s,o;for(;s=i.next(),s.done!==!0;)o=s.value,r=e(r,o.key,o.attributes);return r}nodeEntries(){const e=this._nodes.values();return new Zt(()=>{const n=e.next();if(n.done)return n;const r=n.value;return{value:{node:r.key,attributes:r.attributes},done:!1}})}export(){const e=new Array(this._nodes.size);let n=0;this._nodes.forEach((i,s)=>{e[n++]=r2(s,i)});const r=new Array(this._edges.size);return n=0,this._edges.forEach((i,s)=>{r[n++]=i2(this.type,s,i)}),{options:{type:this.type,multi:this.multi,allowSelfLoops:this.allowSelfLoops},attributes:this.getAttributes(),nodes:e,edges:r}}import(e,n=!1){if(e instanceof Be)return e.forEachNode((l,c)=>{n?this.mergeNode(l,c):this.addNode(l,c)}),e.forEachEdge((l,c,d,u,h,f,g)=>{n?g?this.mergeUndirectedEdgeWithKey(l,d,u,c):this.mergeDirectedEdgeWithKey(l,d,u,c):g?this.addUndirectedEdgeWithKey(l,d,u,c):this.addDirectedEdgeWithKey(l,d,u,c)}),this;if(!ut(e))throw new ye("Graph.import: invalid argument. Expecting a serialized graph or, alternatively, a Graph instance.");if(e.attributes){if(!ut(e.attributes))throw new ye("Graph.import: invalid attributes. Expecting a plain object.");n?this.mergeAttributes(e.attributes):this.replaceAttributes(e.attributes)}let r,i,s,o,a;if(e.nodes){if(s=e.nodes,!Array.isArray(s))throw new ye("Graph.import: invalid nodes. Expecting an array.");for(r=0,i=s.length;r<i;r++){o=s[r],s2(o);const{key:l,attributes:c}=o;n?this.mergeNode(l,c):this.addNode(l,c)}}if(e.edges){let l=!1;if(this.type==="undirected"&&(l=!0),s=e.edges,!Array.isArray(s))throw new ye("Graph.import: invalid edges. Expecting an array.");for(r=0,i=s.length;r<i;r++){a=s[r],o2(a);const{source:c,target:d,attributes:u,undirected:h=l}=a;let f;"key"in a?(f=n?h?this.mergeUndirectedEdgeWithKey:this.mergeDirectedEdgeWithKey:h?this.addUndirectedEdgeWithKey:this.addDirectedEdgeWithKey,f.call(this,a.key,c,d,u)):(f=n?h?this.mergeUndirectedEdge:this.mergeDirectedEdge:h?this.addUndirectedEdge:this.addDirectedEdge,f.call(this,c,d,u))}}return this}nullCopy(e){const n=new Be(it({},this._options,e));return n.replaceAttributes(it({},this.getAttributes())),n}emptyCopy(e){const n=this.nullCopy(e);return this._nodes.forEach((r,i)=>{const s=it({},r.attributes);r=new n.NodeDataClass(i,s),n._nodes.set(i,r)}),n}copy(e){if(e=e||{},typeof e.type=="string"&&e.type!==this.type&&e.type!=="mixed")throw new xe(`Graph.copy: cannot create an incompatible copy from "${this.type}" type to "${e.type}" because this would mean losing information about the current graph.`);if(typeof e.multi=="boolean"&&e.multi!==this.multi&&e.multi!==!0)throw new xe("Graph.copy: cannot create an incompatible copy by downgrading a multi graph to a simple one because this would mean losing information about the current graph.");if(typeof e.allowSelfLoops=="boolean"&&e.allowSelfLoops!==this.allowSelfLoops&&e.allowSelfLoops!==!0)throw new xe("Graph.copy: cannot create an incompatible copy from a graph allowing self loops to one that does not because this would mean losing information about the current graph.");const n=this.emptyCopy(e),r=this._edges.values();let i,s;for(;i=r.next(),i.done!==!0;)s=i.value,Iy(n,"copy",!1,s.undirected,s.key,s.source.key,s.target.key,it({},s.attributes));return n}toJSON(){return this.export()}toString(){return"[object Graph]"}inspect(){const e={};this._nodes.forEach((s,o)=>{e[o]=s.attributes});const n={},r={};this._edges.forEach((s,o)=>{const a=s.undirected?"--":"->";let l="",c=s.source.key,d=s.target.key,u;s.undirected&&c>d&&(u=c,c=d,d=u);const h=`(${c})${a}(${d})`;o.startsWith("geid_")?this.multi&&(typeof r[h]>"u"?r[h]=0:r[h]++,l+=`${r[h]}. `):l+=`[${o}]: `,l+=h,n[l]=s.attributes});const i={};for(const s in this)this.hasOwnProperty(s)&&!Rf.has(s)&&typeof this[s]!="function"&&typeof s!="symbol"&&(i[s]=this[s]);return i.attributes=this._attributes,i.nodes=e,i.edges=n,jt(i,"constructor",this.constructor),i}}typeof Symbol<"u"&&(Be.prototype[Symbol.for("nodejs.util.inspect.custom")]=Be.prototype.inspect);c2.forEach(t=>{["add","merge","update"].forEach(e=>{const n=t.name(e),r=e==="add"?Iy:h2;t.generateKey?Be.prototype[n]=function(i,s,o){return r(this,n,!0,(t.type||this.type)==="undirected",null,i,s,o,e==="update")}:Be.prototype[n]=function(i,s,o,a){return r(this,n,!1,(t.type||this.type)==="undirected",i,s,o,a,e==="update")}})});wI(Be);II(Be);KI(Be);n2(Be);class Dy extends Be{constructor(e){const n=it({type:"directed"},e);if("multi"in n&&n.multi!==!1)throw new ye("DirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(n.type!=="directed")throw new ye('DirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class Py extends Be{constructor(e){const n=it({type:"undirected"},e);if("multi"in n&&n.multi!==!1)throw new ye("UndirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(n.type!=="undirected")throw new ye('UndirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class Gy extends Be{constructor(e){const n=it({multi:!0},e);if("multi"in n&&n.multi!==!0)throw new ye("MultiGraph.from: inconsistent indication that the graph should be simple in given options!");super(n)}}class My extends Be{constructor(e){const n=it({type:"directed",multi:!0},e);if("multi"in n&&n.multi!==!0)throw new ye("MultiDirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(n.type!=="directed")throw new ye('MultiDirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class Oy extends Be{constructor(e){const n=it({type:"undirected",multi:!0},e);if("multi"in n&&n.multi!==!0)throw new ye("MultiUndirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(n.type!=="undirected")throw new ye('MultiUndirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}function Ai(t){t.from=function(e,n){const r=it({},e.options,n),i=new t(r);return i.import(e),i}}Ai(Be);Ai(Dy);Ai(Py);Ai(Gy);Ai(My);Ai(Oy);Be.Graph=Be;Be.DirectedGraph=Dy;Be.UndirectedGraph=Py;Be.MultiGraph=Gy;Be.MultiDirectedGraph=My;Be.MultiUndirectedGraph=Oy;Be.InvalidArgumentsGraphError=ye;Be.NotFoundGraphError=ue;Be.UsageGraphError=xe;function f2(t){if(Array.isArray(t))return t}function p2(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,o,a=[],l=!0,c=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(l=(r=s.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(d){c=!0,i=d}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return a}}function wc(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function Fy(t,e){if(t){if(typeof t=="string")return wc(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?wc(t,e):void 0}}function g2(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function m2(t,e){return f2(t)||p2(t,e)||Fy(t,e)||g2()}function y2(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function v2(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function $y(t){var e=v2(t,"string");return typeof e=="symbol"?e:e+""}function _2(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,$y(r.key),r)}}function b2(t,e,n){return e&&_2(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Yo(t){return Yo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Yo(t)}function zy(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(zy=function(){return!!t})()}function Ec(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function w2(t,e){if(e&&(typeof e=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ec(t)}function E2(t,e,n){return e=Yo(e),w2(t,zy()?Reflect.construct(e,n||[],Yo(t).constructor):e.apply(t,n))}function Ac(t,e){return Ac=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},Ac(t,e)}function A2(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ac(t,e)}function Hr(t,e,n){return(e=$y(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function k2(t){if(Array.isArray(t))return wc(t)}function x2(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function C2(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vl(t){return k2(t)||x2(t)||Fy(t)||C2()}function Lf(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function If(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Lf(Object(n),!0).forEach(function(r){Hr(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Lf(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var S2="relative",T2={drawLabel:void 0,drawHover:void 0,borders:[{size:{value:.1},color:{attribute:"borderColor"}},{size:{fill:!0},color:{attribute:"color"}}]},R2="#000000";function N2(t){var e=t.borders,n=nf(e.filter(function(i){var s=i.size;return"fill"in s}).length),r=`
precision highp float;

varying vec2 v_diffVector;
varying float v_radius;

#ifdef PICKING_MODE
varying vec4 v_color;
#else
// For normal mode, we use the border colors defined in the program:
`.concat(e.flatMap(function(i,s){var o=i.size;return"attribute"in o?["varying float v_borderSize_".concat(s+1,";")]:[]}).join(`
`),`
`).concat(e.flatMap(function(i,s){var o=i.color;return"attribute"in o?["varying vec4 v_borderColor_".concat(s+1,";")]:"value"in o?["uniform vec4 u_borderColor_".concat(s+1,";")]:[]}).join(`
`),`
#endif

uniform float u_correctionRatio;

const float bias = 255.0 / 254.0;
const vec4 transparent = vec4(0.0, 0.0, 0.0, 0.0);

void main(void) {
  float dist = length(v_diffVector);
  float aaBorder = 2.0 * u_correctionRatio;
  float v_borderSize_0 = v_radius;
  vec4 v_borderColor_0 = transparent;

  // No antialiasing for picking mode:
  #ifdef PICKING_MODE
  if (dist > v_radius)
    gl_FragColor = transparent;
  else {
    gl_FragColor = v_color;
    gl_FragColor.a *= bias;
  }
  #else
  // Sizes:
`).concat(e.flatMap(function(i,s){var o=i.size;if("fill"in o)return[];o=o;var a="attribute"in o?"v_borderSize_".concat(s+1):nf(o.value),l=(o.mode||S2)==="pixels"?"u_correctionRatio":"v_radius";return["  float borderSize_".concat(s+1," = ").concat(l," * ").concat(a,";")]}).join(`
`),`
  // Now, let's split the remaining space between "fill" borders:
  float fillBorderSize = (v_radius - (`).concat(e.flatMap(function(i,s){var o=i.size;return"fill"in o?[]:["borderSize_".concat(s+1)]}).join(" + "),") ) / ").concat(n,`;
`).concat(e.flatMap(function(i,s){var o=i.size;return"fill"in o?["  float borderSize_".concat(s+1," = fillBorderSize;")]:[]}).join(`
`),`

  // Finally, normalize all border sizes, to start from the full size and to end with the smallest:
  float adjustedBorderSize_0 = v_radius;
`).concat(e.map(function(i,s){return"  float adjustedBorderSize_".concat(s+1," = adjustedBorderSize_").concat(s," - borderSize_").concat(s+1,";")}).join(`
`),`

  // Colors:
  vec4 borderColor_0 = transparent;
`).concat(e.map(function(i,s){var o=i.color,a=[];return"attribute"in o?a.push("  vec4 borderColor_".concat(s+1," = v_borderColor_").concat(s+1,";")):"transparent"in o?a.push("  vec4 borderColor_".concat(s+1," = vec4(0.0, 0.0, 0.0, 0.0);")):a.push("  vec4 borderColor_".concat(s+1," = u_borderColor_").concat(s+1,";")),a.push("  borderColor_".concat(s+1,".a *= bias;")),a.push("  if (borderSize_".concat(s+1," <= 1.0 * u_correctionRatio) { borderColor_").concat(s+1," = borderColor_").concat(s,"; }")),a.join(`
`)}).join(`
`),`
  if (dist > adjustedBorderSize_0) {
    gl_FragColor = borderColor_0;
  } else `).concat(e.map(function(i,s){return"if (dist > adjustedBorderSize_".concat(s,` - aaBorder) {
    gl_FragColor = mix(borderColor_`).concat(s+1,", borderColor_").concat(s,", (dist - adjustedBorderSize_").concat(s,` + aaBorder) / aaBorder);
  } else if (dist > adjustedBorderSize_`).concat(s+1,`) {
    gl_FragColor = borderColor_`).concat(s+1,`;
  } else `)}).join(""),` { /* Nothing to add here */ }
  #endif
}
`);return r}function L2(t){var e=t.borders,n=`
attribute vec2 a_position;
attribute float a_size;
attribute float a_angle;

uniform mat3 u_matrix;
uniform float u_sizeRatio;
uniform float u_correctionRatio;

varying vec2 v_diffVector;
varying float v_radius;

#ifdef PICKING_MODE
attribute vec4 a_id;
varying vec4 v_color;
#else
`.concat(e.flatMap(function(r,i){var s=r.size;return"attribute"in s?["attribute float a_borderSize_".concat(i+1,";"),"varying float v_borderSize_".concat(i+1,";")]:[]}).join(`
`),`
`).concat(e.flatMap(function(r,i){var s=r.color;return"attribute"in s?["attribute vec4 a_borderColor_".concat(i+1,";"),"varying vec4 v_borderColor_".concat(i+1,";")]:[]}).join(`
`),`
#endif

const float bias = 255.0 / 254.0;
const vec4 transparent = vec4(0.0, 0.0, 0.0, 0.0);

void main() {
  float size = a_size * u_correctionRatio / u_sizeRatio * 4.0;
  vec2 diffVector = size * vec2(cos(a_angle), sin(a_angle));
  vec2 position = a_position + diffVector;
  gl_Position = vec4(
    (u_matrix * vec3(position, 1)).xy,
    0,
    1
  );

  v_radius = size / 2.0;
  v_diffVector = diffVector;

  #ifdef PICKING_MODE
  v_color = a_id;
  #else
`).concat(e.flatMap(function(r,i){var s=r.size;return"attribute"in s?["  v_borderSize_".concat(i+1," = a_borderSize_").concat(i+1,";")]:[]}).join(`
`),`
`).concat(e.flatMap(function(r,i){var s=r.color;return"attribute"in s?["  v_borderColor_".concat(i+1," = a_borderColor_").concat(i+1,";")]:[]}).join(`
`),`
  #endif
}
`);return n}var By=WebGLRenderingContext,Df=By.UNSIGNED_BYTE,so=By.FLOAT;function Vy(t){var e,n=If(If({},T2),t||{}),r=n.borders,i=n.drawLabel,s=n.drawHover,o=["u_sizeRatio","u_correctionRatio","u_matrix"].concat(vl(r.flatMap(function(a,l){var c=a.color;return"value"in c?["u_borderColor_".concat(l+1)]:[]})));return e=(function(a){A2(l,a);function l(){var c;y2(this,l);for(var d=arguments.length,u=new Array(d),h=0;h<d;h++)u[h]=arguments[h];return c=E2(this,l,[].concat(u)),Hr(Ec(c),"drawLabel",i),Hr(Ec(c),"drawHover",s),c}return b2(l,[{key:"getDefinition",value:function(){return{VERTICES:3,VERTEX_SHADER_SOURCE:L2(n),FRAGMENT_SHADER_SOURCE:N2(n),METHOD:WebGLRenderingContext.TRIANGLES,UNIFORMS:o,ATTRIBUTES:[{name:"a_position",size:2,type:so},{name:"a_id",size:4,type:Df,normalized:!0},{name:"a_size",size:1,type:so}].concat(vl(r.flatMap(function(d,u){var h=d.color;return"attribute"in h?[{name:"a_borderColor_".concat(u+1),size:4,type:Df,normalized:!0}]:[]})),vl(r.flatMap(function(d,u){var h=d.size;return"attribute"in h?[{name:"a_borderSize_".concat(u+1),size:1,type:so}]:[]}))),CONSTANT_ATTRIBUTES:[{name:"a_angle",size:1,type:so}],CONSTANT_DATA:[[l.ANGLE_1],[l.ANGLE_2],[l.ANGLE_3]]}}},{key:"processVisibleItem",value:function(d,u,h){var f=this.array;f[u++]=h.x,f[u++]=h.y,f[u++]=d,f[u++]=h.size,r.forEach(function(g){var y=g.color;"attribute"in y&&(f[u++]=Or(h[y.attribute]||y.defaultValue||R2))}),r.forEach(function(g){var y=g.size;"attribute"in y&&(f[u++]=h[y.attribute]||y.defaultValue)})}},{key:"setUniforms",value:function(d,u){var h=u.gl,f=u.uniformLocations,g=f.u_sizeRatio,y=f.u_correctionRatio,w=f.u_matrix;h.uniform1f(y,d.correctionRatio),h.uniform1f(g,d.sizeRatio),h.uniformMatrix3fv(w,!1,d.matrix),r.forEach(function(b,E){var A=b.color;if("value"in A){var v=f["u_borderColor_".concat(E+1)],S=BN(A.value),L=m2(S,4),G=L[0],V=L[1],F=L[2],$=L[3];h.uniform4f(v,G/255,V/255,F/255,$/255)}})}}]),l})(ly),Hr(e,"ANGLE_1",0),Hr(e,"ANGLE_2",2*Math.PI/3),Hr(e,"ANGLE_3",4*Math.PI/3),e}Vy();var zi={},Pf;function I2(){if(Pf)return zi;Pf=1;function t(r){return typeof r!="number"||isNaN(r)?1:r}function e(r,i){var s={},o=function(c){return typeof c>"u"?i:c};typeof i=="function"&&(o=i);var a=function(c){return o(c[r])},l=function(){return o(void 0)};return typeof r=="string"?(s.fromAttributes=a,s.fromGraph=function(c,d){return a(c.getNodeAttributes(d))},s.fromEntry=function(c,d){return a(d)}):typeof r=="function"?(s.fromAttributes=function(){throw new Error("graphology-utils/getters/createNodeValueGetter: irrelevant usage.")},s.fromGraph=function(c,d){return o(r(d,c.getNodeAttributes(d)))},s.fromEntry=function(c,d){return o(r(c,d))}):(s.fromAttributes=l,s.fromGraph=l,s.fromEntry=l),s}function n(r,i){var s={},o=function(c){return typeof c>"u"?i:c};typeof i=="function"&&(o=i);var a=function(c){return o(c[r])},l=function(){return o(void 0)};return typeof r=="string"?(s.fromAttributes=a,s.fromGraph=function(c,d){return a(c.getEdgeAttributes(d))},s.fromEntry=function(c,d){return a(d)},s.fromPartialEntry=s.fromEntry,s.fromMinimalEntry=s.fromEntry):typeof r=="function"?(s.fromAttributes=function(){throw new Error("graphology-utils/getters/createEdgeValueGetter: irrelevant usage.")},s.fromGraph=function(c,d){var u=c.extremities(d);return o(r(d,c.getEdgeAttributes(d),u[0],u[1],c.getNodeAttributes(u[0]),c.getNodeAttributes(u[1]),c.isUndirected(d)))},s.fromEntry=function(c,d,u,h,f,g,y){return o(r(c,d,u,h,f,g,y))},s.fromPartialEntry=function(c,d,u,h){return o(r(c,d,u,h))},s.fromMinimalEntry=function(c,d){return o(r(c,d))}):(s.fromAttributes=l,s.fromGraph=l,s.fromEntry=l,s.fromMinimalEntry=l),s}return zi.createNodeValueGetter=e,zi.createEdgeValueGetter=n,zi.createEdgeWeightGetter=function(r){return n(r,t)},zi}var _l,Gf;function D2(){if(Gf)return _l;Gf=1;var t=0,e=1,n=2,r=3,i=4,s=5,o=6,a=7,l=8,c=9,d=0,u=1,h=2,f=0,g=1,y=2,w=3,b=4,E=5,A=6,v=7,S=8,L=3,G=10,V=3,F=9,$=10;return _l=function(z,N,k){var I,C,x,O,X,re,fe,me,W,ve,Ee=N.length,De=k.length,q=z.adjustSizes,J=z.barnesHutTheta*z.barnesHutTheta,U,ee,ce,T,D,P,B,M=[];for(x=0;x<Ee;x+=G)N[x+i]=N[x+n],N[x+s]=N[x+r],N[x+n]=0,N[x+r]=0;if(z.outboundAttractionDistribution){for(U=0,x=0;x<Ee;x+=G)U+=N[x+o];U/=Ee/G}if(z.barnesHutOptimize){var Z=1/0,ie=-1/0,le=1/0,oe=-1/0,Q,be,pe;for(x=0;x<Ee;x+=G)Z=Math.min(Z,N[x+t]),ie=Math.max(ie,N[x+t]),le=Math.min(le,N[x+e]),oe=Math.max(oe,N[x+e]);var _e=ie-Z,Ae=oe-le;for(_e>Ae?(le-=(_e-Ae)/2,oe=le+_e):(Z-=(Ae-_e)/2,ie=Z+Ae),M[0+f]=-1,M[0+g]=(Z+ie)/2,M[0+y]=(le+oe)/2,M[0+w]=Math.max(ie-Z,oe-le),M[0+b]=-1,M[0+E]=-1,M[0+A]=0,M[0+v]=0,M[0+S]=0,I=1,x=0;x<Ee;x+=G)for(C=0,pe=L;;)if(M[C+E]>=0){N[x+t]<M[C+g]?N[x+e]<M[C+y]?Q=M[C+E]:Q=M[C+E]+F:N[x+e]<M[C+y]?Q=M[C+E]+F*2:Q=M[C+E]+F*3,M[C+v]=(M[C+v]*M[C+A]+N[x+t]*N[x+o])/(M[C+A]+N[x+o]),M[C+S]=(M[C+S]*M[C+A]+N[x+e]*N[x+o])/(M[C+A]+N[x+o]),M[C+A]+=N[x+o],C=Q;continue}else if(M[C+f]<0){M[C+f]=x;break}else{if(M[C+E]=I*F,me=M[C+w]/2,W=M[C+E],M[W+f]=-1,M[W+g]=M[C+g]-me,M[W+y]=M[C+y]-me,M[W+w]=me,M[W+b]=W+F,M[W+E]=-1,M[W+A]=0,M[W+v]=0,M[W+S]=0,W+=F,M[W+f]=-1,M[W+g]=M[C+g]-me,M[W+y]=M[C+y]+me,M[W+w]=me,M[W+b]=W+F,M[W+E]=-1,M[W+A]=0,M[W+v]=0,M[W+S]=0,W+=F,M[W+f]=-1,M[W+g]=M[C+g]+me,M[W+y]=M[C+y]-me,M[W+w]=me,M[W+b]=W+F,M[W+E]=-1,M[W+A]=0,M[W+v]=0,M[W+S]=0,W+=F,M[W+f]=-1,M[W+g]=M[C+g]+me,M[W+y]=M[C+y]+me,M[W+w]=me,M[W+b]=M[C+b],M[W+E]=-1,M[W+A]=0,M[W+v]=0,M[W+S]=0,I+=4,N[M[C+f]+t]<M[C+g]?N[M[C+f]+e]<M[C+y]?Q=M[C+E]:Q=M[C+E]+F:N[M[C+f]+e]<M[C+y]?Q=M[C+E]+F*2:Q=M[C+E]+F*3,M[C+A]=N[M[C+f]+o],M[C+v]=N[M[C+f]+t],M[C+S]=N[M[C+f]+e],M[Q+f]=M[C+f],M[C+f]=-1,N[x+t]<M[C+g]?N[x+e]<M[C+y]?be=M[C+E]:be=M[C+E]+F:N[x+e]<M[C+y]?be=M[C+E]+F*2:be=M[C+E]+F*3,Q===be)if(pe--){C=Q;continue}else{pe=L;break}M[be+f]=x;break}}if(z.barnesHutOptimize)for(ee=z.scalingRatio,x=0;x<Ee;x+=G)for(C=0;;)if(M[C+E]>=0)if(P=Math.pow(N[x+t]-M[C+v],2)+Math.pow(N[x+e]-M[C+S],2),ve=M[C+w],4*ve*ve/P<J){if(ce=N[x+t]-M[C+v],T=N[x+e]-M[C+S],q===!0?P>0?(B=ee*N[x+o]*M[C+A]/P,N[x+n]+=ce*B,N[x+r]+=T*B):P<0&&(B=-ee*N[x+o]*M[C+A]/Math.sqrt(P),N[x+n]+=ce*B,N[x+r]+=T*B):P>0&&(B=ee*N[x+o]*M[C+A]/P,N[x+n]+=ce*B,N[x+r]+=T*B),C=M[C+b],C<0)break;continue}else{C=M[C+E];continue}else{if(re=M[C+f],re>=0&&re!==x&&(ce=N[x+t]-N[re+t],T=N[x+e]-N[re+e],P=ce*ce+T*T,q===!0?P>0?(B=ee*N[x+o]*N[re+o]/P,N[x+n]+=ce*B,N[x+r]+=T*B):P<0&&(B=-ee*N[x+o]*N[re+o]/Math.sqrt(P),N[x+n]+=ce*B,N[x+r]+=T*B):P>0&&(B=ee*N[x+o]*N[re+o]/P,N[x+n]+=ce*B,N[x+r]+=T*B)),C=M[C+b],C<0)break;continue}else for(ee=z.scalingRatio,O=0;O<Ee;O+=G)for(X=0;X<O;X+=G)ce=N[O+t]-N[X+t],T=N[O+e]-N[X+e],q===!0?(P=Math.sqrt(ce*ce+T*T)-N[O+l]-N[X+l],P>0?(B=ee*N[O+o]*N[X+o]/P/P,N[O+n]+=ce*B,N[O+r]+=T*B,N[X+n]-=ce*B,N[X+r]-=T*B):P<0&&(B=100*ee*N[O+o]*N[X+o],N[O+n]+=ce*B,N[O+r]+=T*B,N[X+n]-=ce*B,N[X+r]-=T*B)):(P=Math.sqrt(ce*ce+T*T),P>0&&(B=ee*N[O+o]*N[X+o]/P/P,N[O+n]+=ce*B,N[O+r]+=T*B,N[X+n]-=ce*B,N[X+r]-=T*B));for(W=z.gravity/z.scalingRatio,ee=z.scalingRatio,x=0;x<Ee;x+=G)B=0,ce=N[x+t],T=N[x+e],P=Math.sqrt(Math.pow(ce,2)+Math.pow(T,2)),z.strongGravityMode?P>0&&(B=ee*N[x+o]*W):P>0&&(B=ee*N[x+o]*W/P),N[x+n]-=ce*B,N[x+r]-=T*B;for(ee=1*(z.outboundAttractionDistribution?U:1),fe=0;fe<De;fe+=V)O=k[fe+d],X=k[fe+u],me=k[fe+h],D=Math.pow(me,z.edgeWeightInfluence),ce=N[O+t]-N[X+t],T=N[O+e]-N[X+e],q===!0?(P=Math.sqrt(ce*ce+T*T)-N[O+l]-N[X+l],z.linLogMode?z.outboundAttractionDistribution?P>0&&(B=-ee*D*Math.log(1+P)/P/N[O+o]):P>0&&(B=-ee*D*Math.log(1+P)/P):z.outboundAttractionDistribution?P>0&&(B=-ee*D/N[O+o]):P>0&&(B=-ee*D)):(P=Math.sqrt(Math.pow(ce,2)+Math.pow(T,2)),z.linLogMode?z.outboundAttractionDistribution?P>0&&(B=-ee*D*Math.log(1+P)/P/N[O+o]):P>0&&(B=-ee*D*Math.log(1+P)/P):z.outboundAttractionDistribution?(P=1,B=-ee*D/N[O+o]):(P=1,B=-ee*D)),P>0&&(N[O+n]+=ce*B,N[O+r]+=T*B,N[X+n]-=ce*B,N[X+r]-=T*B);var Ne,te,j,K,Ce,He;if(q===!0)for(x=0;x<Ee;x+=G)N[x+c]!==1&&(Ne=Math.sqrt(Math.pow(N[x+n],2)+Math.pow(N[x+r],2)),Ne>$&&(N[x+n]=N[x+n]*$/Ne,N[x+r]=N[x+r]*$/Ne),te=N[x+o]*Math.sqrt((N[x+i]-N[x+n])*(N[x+i]-N[x+n])+(N[x+s]-N[x+r])*(N[x+s]-N[x+r])),j=Math.sqrt((N[x+i]+N[x+n])*(N[x+i]+N[x+n])+(N[x+s]+N[x+r])*(N[x+s]+N[x+r]))/2,K=.1*Math.log(1+j)/(1+Math.sqrt(te)),Ce=N[x+t]+N[x+n]*(K/z.slowDown),N[x+t]=Ce,He=N[x+e]+N[x+r]*(K/z.slowDown),N[x+e]=He);else for(x=0;x<Ee;x+=G)N[x+c]!==1&&(te=N[x+o]*Math.sqrt((N[x+i]-N[x+n])*(N[x+i]-N[x+n])+(N[x+s]-N[x+r])*(N[x+s]-N[x+r])),j=Math.sqrt((N[x+i]+N[x+n])*(N[x+i]+N[x+n])+(N[x+s]+N[x+r])*(N[x+s]+N[x+r]))/2,K=N[x+a]*Math.log(1+j)/(1+Math.sqrt(te)),N[x+a]=Math.min(1,Math.sqrt(K*(Math.pow(N[x+n],2)+Math.pow(N[x+r],2))/(1+Math.sqrt(te)))),Ce=N[x+t]+N[x+n]*(K/z.slowDown),N[x+t]=Ce,He=N[x+e]+N[x+r]*(K/z.slowDown),N[x+e]=He);return{}},_l}var Nn={},Mf;function P2(){if(Mf)return Nn;Mf=1;var t=10,e=3;return Nn.assign=function(n){n=n||{};var r=Array.prototype.slice.call(arguments).slice(1),i,s,o;for(i=0,o=r.length;i<o;i++)if(r[i])for(s in r[i])n[s]=r[i][s];return n},Nn.validateSettings=function(n){return"linLogMode"in n&&typeof n.linLogMode!="boolean"?{message:"the `linLogMode` setting should be a boolean."}:"outboundAttractionDistribution"in n&&typeof n.outboundAttractionDistribution!="boolean"?{message:"the `outboundAttractionDistribution` setting should be a boolean."}:"adjustSizes"in n&&typeof n.adjustSizes!="boolean"?{message:"the `adjustSizes` setting should be a boolean."}:"edgeWeightInfluence"in n&&typeof n.edgeWeightInfluence!="number"?{message:"the `edgeWeightInfluence` setting should be a number."}:"scalingRatio"in n&&!(typeof n.scalingRatio=="number"&&n.scalingRatio>=0)?{message:"the `scalingRatio` setting should be a number >= 0."}:"strongGravityMode"in n&&typeof n.strongGravityMode!="boolean"?{message:"the `strongGravityMode` setting should be a boolean."}:"gravity"in n&&!(typeof n.gravity=="number"&&n.gravity>=0)?{message:"the `gravity` setting should be a number >= 0."}:"slowDown"in n&&!(typeof n.slowDown=="number"||n.slowDown>=0)?{message:"the `slowDown` setting should be a number >= 0."}:"barnesHutOptimize"in n&&typeof n.barnesHutOptimize!="boolean"?{message:"the `barnesHutOptimize` setting should be a boolean."}:"barnesHutTheta"in n&&!(typeof n.barnesHutTheta=="number"&&n.barnesHutTheta>=0)?{message:"the `barnesHutTheta` setting should be a number >= 0."}:null},Nn.graphToByteArrays=function(n,r){var i=n.order,s=n.size,o={},a,l=new Float32Array(i*t),c=new Float32Array(s*e);return a=0,n.forEachNode(function(d,u){o[d]=a,l[a]=u.x,l[a+1]=u.y,l[a+2]=0,l[a+3]=0,l[a+4]=0,l[a+5]=0,l[a+6]=1,l[a+7]=1,l[a+8]=u.size||1,l[a+9]=u.fixed?1:0,a+=t}),a=0,n.forEachEdge(function(d,u,h,f,g,y,w){var b=o[h],E=o[f],A=r(d,u,h,f,g,y,w);l[b+6]+=A,l[E+6]+=A,c[a]=b,c[a+1]=E,c[a+2]=A,a+=e}),{nodes:l,edges:c}},Nn.assignLayoutChanges=function(n,r,i){var s=0;n.updateEachNodeAttributes(function(o,a){return a.x=r[s],a.y=r[s+1],s+=t,i?i(o,a):a})},Nn.readGraphPositions=function(n,r){var i=0;n.forEachNode(function(s,o){r[i]=o.x,r[i+1]=o.y,i+=t})},Nn.collectLayoutChanges=function(n,r,i){for(var s=n.nodes(),o={},a=0,l=0,c=r.length;a<c;a+=t){if(i){var d=Object.assign({},n.getNodeAttributes(s[l]));d.x=r[a],d.y=r[a+1],d=i(s[l],d),o[s[l]]={x:d.x,y:d.y}}else o[s[l]]={x:r[a],y:r[a+1]};l++}return o},Nn.createWorker=function(r){var i=window.URL||window.webkitURL,s=r.toString(),o=i.createObjectURL(new Blob(["("+s+").call(this);"],{type:"text/javascript"})),a=new Worker(o);return i.revokeObjectURL(o),a},Nn}var bl,Of;function G2(){return Of||(Of=1,bl={linLogMode:!1,outboundAttractionDistribution:!1,adjustSizes:!1,edgeWeightInfluence:1,scalingRatio:1,strongGravityMode:!1,gravity:1,slowDown:1,barnesHutOptimize:!1,barnesHutTheta:.5}),bl}var wl,Ff;function M2(){if(Ff)return wl;Ff=1;var t=_y(),e=I2().createEdgeWeightGetter,n=D2(),r=P2(),i=G2();function s(l,c,d){if(!t(c))throw new Error("graphology-layout-forceatlas2: the given graph is not a valid graphology instance.");typeof d=="number"&&(d={iterations:d});var u=d.iterations;if(typeof u!="number")throw new Error("graphology-layout-forceatlas2: invalid number of iterations.");if(u<=0)throw new Error("graphology-layout-forceatlas2: you should provide a positive number of iterations.");var h=e("getEdgeWeight"in d?d.getEdgeWeight:"weight").fromEntry,f=typeof d.outputReducer=="function"?d.outputReducer:null,g=r.assign({},i,d.settings),y=r.validateSettings(g);if(y)throw new Error("graphology-layout-forceatlas2: "+y.message);var w=r.graphToByteArrays(c,h),b;for(b=0;b<u;b++)n(g,w.nodes,w.edges);if(l){r.assignLayoutChanges(c,w.nodes,f);return}return r.collectLayoutChanges(c,w.nodes)}function o(l){var c=typeof l=="number"?l:l.order;return{barnesHutOptimize:c>2e3,strongGravityMode:!0,gravity:.05,scalingRatio:10,slowDown:1+Math.log(c)}}var a=s.bind(null,!1);return a.assign=s.bind(null,!0),a.inferSettings=o,wl=a,wl}var O2=M2();const F2=Is(O2),$f=Ze({prefix:"GraphTooltip",level:"info"}),oo={MAX_WIDTH:300,PADDING:15,ANIMATION_DURATION:150,Z_INDEX:1e4};class $2{constructor(e={}){this.options={maxWidth:e.maxWidth||oo.MAX_WIDTH,padding:e.padding||oo.PADDING,animationDuration:e.animationDuration||oo.ANIMATION_DURATION,contentBuilder:e.contentBuilder||null,zIndex:e.zIndex||oo.Z_INDEX},this.element=null,this.currentNode=null,this.isDestroyed=!1,this.darkModeQuery=null,this.darkModeHandler=null,this._createTooltip()}isDarkMode(){return document.documentElement.classList.contains("dark")||document.body.classList.contains("dark")?!0:window.matchMedia?.("(prefers-color-scheme: dark)").matches||!1}_createTooltip(){this.element&&this.element.remove(),this.darkModeQuery&&this.darkModeHandler&&this.darkModeQuery.removeEventListener("change",this.darkModeHandler);const e=this.isDarkMode();this.element=document.createElement("div"),this.element.className="graph-tooltip",this.element.setAttribute("role","tooltip"),this.element.setAttribute("aria-hidden","true"),Object.assign(this.element.style,{position:"absolute",padding:"10px 14px",borderRadius:"8px",fontSize:"12px",fontFamily:"system-ui, -apple-system, sans-serif",pointerEvents:"none",opacity:"0",visibility:"hidden",zIndex:this.options.zIndex,maxWidth:`${this.options.maxWidth}px`,lineHeight:"1.6",backdropFilter:"blur(8px)",transition:`opacity ${this.options.animationDuration}ms ease, visibility ${this.options.animationDuration}ms ease`}),this._updateStyles(e),document.body.appendChild(this.element),window.matchMedia&&(this.darkModeQuery=window.matchMedia("(prefers-color-scheme: dark)"),this.darkModeHandler=n=>{!this.isDestroyed&&this.element&&this._updateStyles(this.isDarkMode())},this.darkModeQuery.addEventListener("change",this.darkModeHandler)),$f.debug("Tooltip created")}_updateStyles(e){this.element&&(e?Object.assign(this.element.style,{background:"rgba(30, 30, 35, 0.95)",color:"#f9fafb",border:"1px solid rgba(255, 255, 255, 0.1)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4), 0 2px 8px rgba(0, 0, 0, 0.3)"}):Object.assign(this.element.style,{background:"rgba(255, 255, 255, 0.98)",color:"#1a1a1a",border:"1px solid rgba(0, 0, 0, 0.08)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.12), 0 2px 8px rgba(0, 0, 0, 0.08)"}))}escapeHtml(e){if(typeof e!="string")return String(e);const n=document.createElement("div");return n.textContent=e,n.innerHTML}buildContent(e){if(!e)return"";if(this.options.contentBuilder)return this.options.contentBuilder(e);const n=[],r=this.isDarkMode();n.push(`<div style="font-weight: 600; margin-bottom: 6px; font-size: 13px;"> ${this.escapeHtml(String(e.id))}</div>`);const i=new Set(["id","x","y","fx","fy","vx","vy","index","__data__","__transition__","label","size","color","hidden","forceLabel","type","highlighted","zIndex"]),s=["relationship","gender","avatar","group","community"],o=["degree","eigenvector","betweenness","clustering","closeness","centrality","pagerank"];s.forEach(c=>{if(e[c]!==void 0&&e[c]!==null&&!i.has(c)){const d=e[c];if(c==="relationship")n.push(`<div style="margin-bottom: 3px;"><strong> Relationship:</strong> ${this.escapeHtml(d)}</div>`);else if(c==="gender"){const h={male:{emoji:"",text:"Male"},female:{emoji:"",text:"Female"},other:{emoji:"",text:"Other"}}[d]||{emoji:"",text:d};n.push(`<div style="margin-bottom: 3px;"><strong>Gender:</strong> ${h.emoji} ${h.text}</div>`)}else if(c==="avatar")n.push(`<div style="margin-bottom: 3px;"><strong>Avatar:</strong> ${d}</div>`);else if(c==="group")n.push(`<div style="margin-bottom: 3px;"><strong>Group:</strong> ${d}</div>`);else if(c==="community")n.push(`<div style="margin-bottom: 3px;"><strong> Community:</strong> ${d}</div>`);else{const u=c.charAt(0).toUpperCase()+c.slice(1).replace(/_/g," ");n.push(`<div style="margin-bottom: 3px;"><strong>${u}:</strong> ${this.escapeHtml(String(d))}</div>`)}}}),o.forEach(c=>{if(e[c]!==void 0&&e[c]!==null&&!i.has(c)){const d=e[c],u=c.charAt(0).toUpperCase()+c.slice(1).replace(/_/g," ");if(c==="centrality"&&e.eigenvector!==void 0)return;typeof d=="number"?n.push(`<div style="margin-bottom: 2px;"><strong>${u}:</strong> ${d.toFixed(4)}</div>`):n.push(`<div style="margin-bottom: 2px;"><strong>${u}:</strong> ${this.escapeHtml(String(d))}</div>`)}});const a=new Set([...s,...o]),l=Object.keys(e).filter(c=>!i.has(c)&&!a.has(c)&&e[c]!==void 0&&e[c]!==null&&typeof e[c]!="function"&&!c.startsWith("__")).sort();if(l.length>0){const c=r?"rgba(255,255,255,0.15)":"rgba(0,0,0,0.1)",d=r?"rgba(249,250,251,0.8)":"rgba(0,0,0,0.7)";n.push(`<div style="margin-top: 6px; padding-top: 6px; border-top: 1px solid ${c}; font-size: 11px;">`),n.push(`<div style="margin-bottom: 4px; font-weight: 600; color: ${d};">Other Properties:</div>`),l.forEach(u=>{const h=e[u];let f;typeof h=="object"&&h!==null?Array.isArray(h)?f=`[${h.length} items]`:f=`{${Object.keys(h).length} keys}`:f=String(h);const g=u.charAt(0).toUpperCase()+u.slice(1).replace(/_/g," ");n.push(`<div style="margin-bottom: 2px; font-family: monospace; font-size: 10px;"><strong>${g}:</strong> ${this.escapeHtml(f)}</div>`)}),n.push("</div>")}return n.join("")}show(e,n){if(!this.element||this.isDestroyed)return;const r=this.buildContent(n);this.element.innerHTML=r;const i=e.clientX??e.x??0,s=e.clientY??e.y??0;this.element.style.opacity="0",this.element.style.visibility="visible",this.element.setAttribute("aria-hidden","false");const o=this.element.offsetWidth||200,a=this.element.offsetHeight||100,l=this.options.padding;let c=i+l,d=s-a-l;const u=window.innerWidth,h=window.innerHeight;c+o>u-l&&(c=i-o-l),c<l&&(c=i+l),d<l&&(d=s+l),d+a>h-l&&(d=s-a-l),this.element.style.left=`${c}px`,this.element.style.top=`${d}px`,this.element.style.opacity="1",this.currentNode=n}updatePosition(e){!this.element||!this.currentNode||this.isDestroyed||this.show(e,this.currentNode)}hide(){this.element&&(this.element.style.opacity="0",this.element.style.visibility="hidden",this.element.setAttribute("aria-hidden","true"),this.currentNode=null)}destroy(){this.isDestroyed||($f.debug("Destroying tooltip"),this.darkModeQuery&&this.darkModeHandler&&(this.darkModeQuery.removeEventListener("change",this.darkModeHandler),this.darkModeQuery=null,this.darkModeHandler=null),this.element&&(this.element.remove(),this.element=null),this.currentNode=null,this.isDestroyed=!0)}}const z2=Ze({prefix:"NetworkGraphSigma",level:"info"}),Ht={WIDTH:800,HEIGHT:600,NODE_SIZE:5,MIN_SIZE:3,MAX_SIZE:12,EDGE_COLOR:"#aaa",NODE_COLOR:"#6366f1",HOVER_COLOR:"#ef4444",SELECTED_COLOR:"#f97316"},zf={category10:["#3b82f6","#10b981","#f59e0b","#ef4444","#6366f1","#ec4899","#06b6d4","#f97316","#14b8a6","#a855f7"],pastel:["#a6cee3","#b2df8a","#fb9a99","#fdbf6f","#cab2d6","#ffff99","#b15928","#66c2a5","#fc8d62","#8da0cb"]};function Bf(t){return typeof t=="string"?t:t?.id||String(t)}class Vf{constructor(e,n={}){if(this.container=typeof e=="string"?document.querySelector(e):e,!this.container)throw new Error("NetworkGraphSigma: Container not found");this.options={width:n.width||this.container.clientWidth||Ht.WIDTH,height:n.height||this.container.clientHeight||Ht.HEIGHT,nodeSize:n.nodeRadius||Ht.NODE_SIZE,minSize:n.minRadius||Ht.MIN_SIZE,maxSize:n.maxRadius||Ht.MAX_SIZE,sizeBy:n.sizeBy||null,colorBy:n.colorBy||"group",colorScheme:n.colorScheme||"category10",showLabels:n.showLabels!==!1,...n},this.graph=null,this.sigma=null,this.data={nodes:[],links:[]},this.isReady=!1,this.isDestroyed=!1,this.selectedNode=null,this.hoveredNode=null,this.draggedNode=null,this.isDragging=!1,this.eventHandlers=new Map,this.interactionDisabled=!1,this.sizeScale=null,this.colorMap=null,this.tooltip=new $2({contentBuilder:n.tooltipBuilder||null}),this.lastMouseEvent=null,this.simulationRunning=!1,this.simulationFrame=null,this.simulationAlpha=1,this.simulationAlphaDecay=.02,this.simulationAlphaMin=.001,this.simulationSettings={iterations:1,settings:{gravity:.5,scalingRatio:20,slowDown:1,barnesHutOptimize:!0,barnesHutTheta:.5,adjustSizes:!1,strongGravityMode:!1,outboundAttractionDistribution:!1,linLogMode:!1}},this.log=z2,this._initContainer(),this._initGraph(),this.log.info("NetworkGraphSigma initialized",{width:this.options.width,height:this.options.height})}_initContainer(){this.container.style.width||(this.container.style.width=`${this.options.width}px`),this.container.style.height||(this.container.style.height=`${this.options.height}px`),this.container.style.position="relative"}_initGraph(){this.graph=new Be({type:"undirected",allowSelfLoops:!1})}_initSigma(){this.sigma&&(this.sigma.kill(),this.sigma=null);const e=Vy({borders:[{size:{value:.06},color:{value:"#ffffff"}},{size:{fill:!0},color:{attribute:"color"}}]}),r=this.graph.order>5e3,i=this.options.showLabels&&!r;this.sigma=new tI(this.graph,this.container,{allowInvalidContainer:!0,renderLabels:i,labelRenderedSizeThreshold:r?20:4,labelFont:"Inter, system-ui, Arial, sans-serif",labelSize:11,labelWeight:"500",labelColor:{color:"#333"},defaultNodeColor:Ht.NODE_COLOR,defaultEdgeColor:r?"#99999933":"#99999966",defaultNodeType:"bordered",nodeProgramClasses:{bordered:e},defaultEdgeType:"line",minCameraRatio:.1,maxCameraRatio:10,stagePadding:50,renderEdgeLabels:!1,enableEdgeEvents:!1,zIndex:!0,allowInvalidContainer:!0,...r&&{nodeReducer:(s,o)=>({...o,label:i?o.label:void 0})}}),this._setupEventHandlers()}_setupEventHandlers(){this.sigma&&(this.sigma.on("clickNode",({node:e})=>{this.interactionDisabled||(this._selectNode(e),this.emit("nodeClick",{node:this.graph.getNodeAttributes(e),id:e}))}),this.sigma.on("enterNode",({node:e})=>{if(this.interactionDisabled)return;this.hoveredNode=e,this._updateNodeHighlight();const n=this.graph.getNodeAttributes(e),i={...this.data.nodes.find(s=>String(s.id)===String(e))||{},...n,id:e};this.lastMouseEvent&&this.tooltip.show(this.lastMouseEvent,i),this.emit("nodeHover",{node:i,id:e})}),this.sigma.on("leaveNode",({node:e})=>{this.interactionDisabled||(this.hoveredNode=null,this._updateNodeHighlight(),this.tooltip.hide(),this.emit("nodeLeave",{node:this.graph.getNodeAttributes(e),id:e}))}),this._mouseMoveHandler=e=>{this.lastMouseEvent={clientX:e.clientX,clientY:e.clientY},this.hoveredNode&&!this.isDragging&&this.tooltip.updatePosition(this.lastMouseEvent)},this.container.addEventListener("mousemove",this._mouseMoveHandler),this.sigma.on("downNode",({node:e,event:n})=>{if(this.interactionDisabled)return;this.draggedNode=e,this.isDragging=!0,n.x,n.y,this.tooltip.hide();const r=this.graph.getNodeAttributes(e);this.graph.setNodeAttribute(e,"fx",r.x),this.graph.setNodeAttribute(e,"fy",r.y),this.sigma.getCamera().disable(),this.emit("nodeDragStart",{node:r,id:e})}),this.sigma.getMouseCaptor().on("mousemovebody",e=>{if(this.interactionDisabled||!this.isDragging||!this.draggedNode)return;const n=this.sigma.viewportToGraph({x:e.x,y:e.y});this.graph.setNodeAttribute(this.draggedNode,"x",n.x),this.graph.setNodeAttribute(this.draggedNode,"y",n.y),this.graph.setNodeAttribute(this.draggedNode,"fx",n.x),this.graph.setNodeAttribute(this.draggedNode,"fy",n.y),this.emit("nodeDrag",{node:this.graph.getNodeAttributes(this.draggedNode),id:this.draggedNode})}),this.sigma.getMouseCaptor().on("mouseup",()=>{this.isDragging&&this.draggedNode&&this.emit("nodeDragEnd",{node:this.graph.getNodeAttributes(this.draggedNode),id:this.draggedNode}),this.isDragging=!1,this.draggedNode=null,this.sigma.getCamera().enable()}),this.sigma.on("clickStage",()=>{if(this.selectedNode){const e=this.selectedNode;this._deselectNode(),this.emit("nodeDeselected",{id:e})}}))}_updateNodeHighlight(){this.sigma&&(this.sigma.setSetting("nodeReducer",(e,n)=>{const r={...n};return e===this.selectedNode?(r.color=Ht.SELECTED_COLOR,r.highlighted=!0):e===this.hoveredNode&&(r.color=Ht.HOVER_COLOR,r.highlighted=!0),r}),this.sigma.refresh())}_selectNode(e){const n=this.selectedNode;this.selectedNode=e,n&&this.emit("nodeDeselected",{id:n}),this._updateNodeHighlight(),this.emit("nodeSelected",{node:this.graph.getNodeAttributes(e),id:e})}_deselectNode(){this.selectedNode=null,this._updateNodeHighlight()}startSimulation(){if(this.simulationRunning||!this.graph||this.graph.order===0)return;this.simulationRunning=!0,this.simulationAlpha=1,this.interactionDisabled=!0;const e=this.graph.order;this.graph.size;const n=e>5e3,r=e>1e4,i=Math.sqrt(e)*2;this.simulationSettings.settings.scalingRatio=Math.max(100,i),r?(this.simulationSettings.settings.gravity=.001,this.simulationSettings.settings.slowDown=Math.max(this.simulationSettings.settings.slowDown,10),this.simulationSettings.settings.barnesHutTheta=.8):n?(this.simulationSettings.settings.gravity=.005,this.simulationSettings.settings.slowDown=Math.max(this.simulationSettings.settings.slowDown,5),this.simulationSettings.settings.barnesHutTheta=.6):this.simulationSettings.settings.gravity=.01,this.log.info("Starting ForceAtlas2 simulation",{nodeCount:e,scaleFactor:i,scalingRatio:this.simulationSettings.settings.scalingRatio});const s=()=>{if(!(!this.simulationRunning||this.isDestroyed||!this.graph)){if(this.simulationAlpha<this.simulationAlphaMin){this.log.info("Simulation reached equilibrium"),this.simulationRunning=!1,this.interactionDisabled=!1,setTimeout(()=>{this.fitView()},100),this.emit("simulationEnd");return}if(!this.isDragging){const o={...this.simulationSettings,settings:{...this.simulationSettings.settings,slowDown:this.simulationSettings.settings.slowDown/this.simulationAlpha}};F2.assign(this.graph,o);const a=this.graph.order,l=a>1e4?this.simulationAlphaDecay*1.5:a>5e3?this.simulationAlphaDecay*1.2:this.simulationAlphaDecay;this.simulationAlpha-=this.simulationAlpha*l}if(this.draggedNode&&this.graph.hasNode(this.draggedNode)){const o=this.graph.getNodeAttributes(this.draggedNode);o.fx!==void 0&&(this.graph.setNodeAttribute(this.draggedNode,"x",o.fx),this.graph.setNodeAttribute(this.draggedNode,"y",o.fy))}this.simulationFrame=requestAnimationFrame(s)}};this.simulationFrame=requestAnimationFrame(s)}stopSimulation(){this.simulationRunning&&(this.simulationRunning=!1,this.simulationFrame&&(cancelAnimationFrame(this.simulationFrame),this.simulationFrame=null),this.interactionDisabled=!1,this.log.info("Stopped ForceAtlas2 simulation"))}toggleSimulation(){return this.simulationRunning?this.stopSimulation():this.startSimulation(),this.simulationRunning}isSimulationRunning(){return this.simulationRunning}setData(e,n){if(this.isDestroyed){this.log.warn("Cannot set data on destroyed instance");return}if(!Array.isArray(e))throw new Error("NetworkGraphSigma: nodes must be an array");if(!Array.isArray(n))throw new Error("NetworkGraphSigma: links must be an array");this.log.debug("Setting graph data",{nodeCount:e.length,linkCount:n.length}),this.data.nodes=e,this.data.links=n.map(r=>({...r,source:Bf(r.source),target:Bf(r.target)})),this.selectedNode=null,this._buildGraph(),this.sigma||this._initSigma(),this.isReady=!0,this.startSimulation(),this.emit("ready")}_buildGraph(){this.graph.clear(),this._computeScales();const e=this.data.nodes.length,n=Math.sqrt(e)*200;for(let r=0;r<this.data.nodes.length;r++){const i=this.data.nodes[r],s=String(i.id),o=i.x!==void 0?i.x:(Math.random()-.5)*n,a=i.y!==void 0?i.y:(Math.random()-.5)*n;let l=this.options.nodeSize;this.sizeScale&&i[this.options.sizeBy]!==void 0&&(l=this.sizeScale(i[this.options.sizeBy]));let c=Ht.NODE_COLOR;this.colorMap&&i[this.options.colorBy]!==void 0&&(c=this.colorMap(i[this.options.colorBy])),this.graph.addNode(s,{x:o,y:a,size:l,color:c,label:String(i.label||i.id),...i})}for(const r of this.data.links){const i=String(r.source),s=String(r.target);if(!(!this.graph.hasNode(i)||!this.graph.hasNode(s))&&i!==s&&!this.graph.hasEdge(i,s))try{this.graph.addEdge(i,s,{weight:r.weight||1,size:Math.max(1,Math.log(r.weight||1)+1),color:Ht.EDGE_COLOR})}catch{}}this.log.info("Graph built",{nodes:this.graph.order,edges:this.graph.size})}_computeScales(){if(!this.data.nodes||this.data.nodes.length===0)return;if(this.options.sizeBy){const n=this.data.nodes.map(r=>r[this.options.sizeBy]).filter(r=>r!=null&&!isNaN(r));if(n.length>0){const r=Math.min(...n),s=Math.max(...n)-r||1;this.sizeScale=o=>{const a=(o-r)/s;return this.options.minSize+Math.sqrt(a)*(this.options.maxSize-this.options.minSize)}}}const e=this.options.colorBy;if(e){const n=this.data.nodes.map(o=>o[e]).filter(o=>o!=null),r=[...new Set(n)],i=zf[this.options.colorScheme]||zf.category10,s=new Map;r.forEach((o,a)=>{s.set(o,i[a%i.length])}),this.colorMap=o=>s.get(o)||Ht.NODE_COLOR}}updateVisualEncoding(e={}){e.sizeBy!==void 0&&(this.options.sizeBy=e.sizeBy),e.minSize!==void 0&&(this.options.minSize=e.minSize),e.maxSize!==void 0&&(this.options.maxSize=e.maxSize),e.colorBy!==void 0&&(this.options.colorBy=e.colorBy),e.colorScheme!==void 0&&(this.options.colorScheme=e.colorScheme),this._computeScales(),this.graph.forEachNode((n,r)=>{const i=this.data.nodes.find(s=>String(s.id)===n);i&&(this.sizeScale&&i[this.options.sizeBy]!==void 0&&this.graph.setNodeAttribute(n,"size",this.sizeScale(i[this.options.sizeBy])),this.colorMap&&i[this.options.colorBy]!==void 0&&this.graph.setNodeAttribute(n,"color",this.colorMap(i[this.options.colorBy])))}),this.sigma&&this.sigma.refresh()}updateCliqueEdgeColors(e){if(!this.graph)return;const n="#ef4444",r=Ht.EDGE_COLOR,i=(s,o)=>{const a=this.graph.neighbors(s),l=this.graph.neighbors(o);for(const c of a)if(c!==o&&l.includes(c))return!0;return!1};this.graph.forEachEdge((s,o,a,l)=>{const c=e&&i(a,l)?n:r;this.graph.setEdgeAttribute(s,"color",c)}),this.sigma&&this.sigma.refresh(),this.log.debug("Updated clique edge colors",{enabled:e})}updateNodeStatistics(e,n="eigenvector",r=!0){for(const i of e){const s=String(i.id),o=this.data.nodes.find(a=>String(a.id)===s);if(o&&Object.assign(o,i),this.graph.hasNode(s))for(const[a,l]of Object.entries(i))a!=="id"&&this.graph.setNodeAttribute(s,a,l)}this.updateVisualEncoding({sizeBy:n})}updateGraph(){if(!(!this.graph||!this.sigma)){this.stopSimulation();for(const e of this.data.nodes){const n=String(e.id);this.graph.hasNode(n)&&(e.x!==void 0&&this.graph.setNodeAttribute(n,"x",e.x),e.y!==void 0&&this.graph.setNodeAttribute(n,"y",e.y),e.fx!==void 0&&this.graph.setNodeAttribute(n,"x",e.fx),e.fy!==void 0&&this.graph.setNodeAttribute(n,"y",e.fy))}this.sigma.refresh(),this.emit("ready")}}lockPositions(){if(!this.data.nodes||this.data.nodes.length===0){this.log.warn("No nodes to lock");return}this.data.nodes.forEach(e=>{const n=String(e.id);if(this.graph.hasNode(n)){const r=this.graph.getNodeAttribute(n,"x"),i=this.graph.getNodeAttribute(n,"y");e.fx=r,e.fy=i,e.x=r,e.y=i}}),this.log.debug("Locked all node positions")}unlockPositions(){if(!this.data.nodes||this.data.nodes.length===0){this.log.warn("No nodes to unlock");return}this.data.nodes.forEach(e=>{e.fx=null,e.fy=null}),this.log.debug("Unlocked all node positions")}getNodeIds(){return this.data.nodes.map(e=>e.id)}hasNode(e){return this.data.nodes.some(n=>String(n.id)===String(e))}getSelectedNode(){return this.selectedNode&&this.graph.hasNode(this.selectedNode)?{id:this.selectedNode,...this.graph.getNodeAttributes(this.selectedNode)}:null}fitView(){if(!this.sigma)return;this.sigma.getCamera().animatedReset({duration:300})}getCamera(){return this.sigma?.getCamera()}on(e,n){this.eventHandlers.has(e)||this.eventHandlers.set(e,new Set),this.eventHandlers.get(e).add(n)}off(e,n){this.eventHandlers.has(e)&&this.eventHandlers.get(e).delete(n)}emit(e,n){if(this.eventHandlers.has(e))for(const r of this.eventHandlers.get(e))try{r(n)}catch(i){this.log.error("Event handler error",{eventName:e,error:i.message})}}destroy(){this.isDestroyed||(this.log.info("Destroying NetworkGraphSigma instance"),this.stopSimulation(),this._mouseMoveHandler&&this.container&&(this.container.removeEventListener("mousemove",this._mouseMoveHandler),this._mouseMoveHandler=null),this.tooltip&&(this.tooltip.destroy(),this.tooltip=null),this.sigma&&(this.sigma.kill(),this.sigma=null),this.graph&&(this.graph.clear(),this.graph=null),this.data={nodes:[],links:[]},this.eventHandlers.clear(),this.isReady=!1,this.isDestroyed=!0)}}class xa{constructor(){this.nodes=new Set,this.edges=[],this.adjacencyMap=new Map}addNode(e){return this.nodes.add(e),this}addNodesFrom(e){return e.forEach(n=>this.nodes.add(n)),this}removeNode(e){if(!this.nodes.has(e))throw new Error(`Node '${e}' does not exist in the graph`);return this.nodes.delete(e),this.edges=this.edges.filter(n=>n.u!==e&&n.v!==e),this.adjacencyMap.has(e)&&(Array.from(this.adjacencyMap.get(e).keys()).forEach(n=>{this.adjacencyMap.has(n)&&this.adjacencyMap.get(n).delete(e)}),this.adjacencyMap.delete(e)),this}hasNode(e){return this.nodes.has(e)}addEdgesFrom(e){return e.forEach(([n,r,i=1])=>{this.addEdge(n,r,i)}),this}addEdge(e,n,r=1){this.nodes.add(e),this.nodes.add(n);const i={u:e,v:n,weight:r};return this.edges.push(i),this.adjacencyMap.has(e)||this.adjacencyMap.set(e,new Map),this.adjacencyMap.has(n)||this.adjacencyMap.set(n,new Map),this.adjacencyMap.get(e).set(n,r),this.adjacencyMap.get(n).set(e,r),this}getNeighbors(e){return this.adjacencyMap.has(e)?Array.from(this.adjacencyMap.get(e).keys()):[]}getAllEdges(){return this.edges}getNodeList(){return Array.from(this.nodes)}numberOfNodes(){return this.nodes.size}numberOfEdges(){return this.edges.length}removeEdge(e,n){const r=this.edges.findIndex(i=>i.u===e&&i.v===n||i.u===n&&i.v===e);if(r===-1)throw new Error(`Edge between '${e}' and '${n}' does not exist`);return this.edges.splice(r,1),this.adjacencyMap.has(e)&&this.adjacencyMap.get(e).delete(n),this.adjacencyMap.has(n)&&this.adjacencyMap.get(n).delete(e),this}hasEdge(e,n){return this.adjacencyMap.has(e)&&this.adjacencyMap.get(e).has(n)}getEdgeWeight(e,n){return this.hasEdge(e,n)?this.adjacencyMap.get(e).get(n):null}updateEdgeWeight(e,n,r){if(!this.hasEdge(e,n))throw new Error(`Edge between '${e}' and '${n}' does not exist`);this.adjacencyMap.get(e).set(n,r),this.adjacencyMap.get(n).set(e,r);const i=this.edges.find(s=>s.u===e&&s.v===n||s.u===n&&s.v===e);return i&&(i.weight=r),this}degree(e){return this.adjacencyMap.has(e)?this.adjacencyMap.get(e).size:0}clear(){return this.nodes.clear(),this.edges=[],this.adjacencyMap.clear(),this}}class _i{constructor(e){this.workerScript=e,this.worker=null}static create(e){if(typeof globalThis<"u"&&globalThis.__USE_MOCK_WORKERS__)return new V2(e);if(typeof Worker<"u")return new Gd(e);if(typeof require<"u")try{return require.resolve("worker_threads"),new B2(e)}catch{throw new Error("Worker Threads not available in this Node.js version")}else throw new Error("No worker support available in this environment")}static isSupported(){if(typeof Worker<"u")return!0;if(typeof require<"u")try{return require.resolve("worker_threads"),!0}catch{return!1}return!1}postMessage(e,n=[]){throw new Error("Must implement postMessage")}onMessage(e){throw new Error("Must implement onMessage")}onError(e){throw new Error("Must implement onError")}terminate(){throw new Error("Must implement terminate")}}class Gd extends _i{constructor(e){super(e),this.worker=new Worker(e,{type:"module"})}static fromCode(e){const n=new Blob([e],{type:"application/javascript"}),r=URL.createObjectURL(n);return new Gd(r)}postMessage(e,n=[]){this.worker.postMessage(e,n)}onMessage(e){this.worker.onmessage=n=>e(n.data)}onError(e){this.worker.onerror=n=>{e(new Error(n.message||"Worker error"))}}terminate(){this.worker&&(this.worker.terminate(),this.worker=null)}}class B2 extends _i{constructor(e){super(e);const{Worker:n}=require("worker_threads");this.worker=new n(e)}postMessage(e,n=[]){this.worker.postMessage(e,n)}onMessage(e){this.worker.on("message",e)}onError(e){this.worker.on("error",n=>{e(n)}),this.worker.on("exit",n=>{n!==0&&e(new Error(`Worker stopped with exit code ${n}`))})}terminate(){this.worker&&(this.worker.terminate(),this.worker=null)}}class V2 extends _i{constructor(e){super(e),this.messageHandler=null}postMessage(e,n=[]){setTimeout(async()=>{if(this.messageHandler)try{const r=await this.executeSync(e);this.messageHandler({id:e.id,status:"complete",result:r})}catch(r){this.errorHandler?this.errorHandler(r):this.messageHandler({id:e.id,status:"error",error:r.message||"Unknown error",stack:r.stack})}},0)}onMessage(e){this.messageHandler=e}onError(e){this.errorHandler=e}terminate(){this.messageHandler=null,this.errorHandler=null}async executeSync(e){const{executeTask:n}=await R(async()=>{const{executeTask:r}=await import("./module-registry-B78OHx-w-DYpBQmi1.js");return{executeTask:r}},[]);return n(e)}}class U2{constructor(e={}){this.maxWorkers=e.maxWorkers||this.detectCPUCount(),this.workerScript=e.workerScript||this.getDefaultWorkerScript(),this.taskTimeout=e.taskTimeout||6e4,this.verbose=e.verbose||!1,this.affinityCacheLimit=e.affinityCacheLimit||50,this.enableAffinity=e.enableAffinity!==!1,this.workers=[],this.availableWorkers=[],this.taskQueue=[],this.activeTasks=new Map,this.taskIdCounter=0,this.initialized=!1,this.affinityMetrics={hits:0,misses:0},this.log=Ze({prefix:"WorkerPool",level:this.verbose?"debug":"info"})}detectCPUCount(){if(typeof navigator<"u"&&navigator.hardwareConcurrency)return navigator.hardwareConcurrency;if(typeof require<"u")try{return require("os").cpus().length}catch{}return 4}getDefaultWorkerScript(){return typeof window<"u"?new URL("data:text/javascript;base64,LyoqCiAqIE5ldHdvcmsgV29ya2VyIC0gRXhlY3V0ZXMgY29tcHV0ZSBmdW5jdGlvbnMgZnJvbSBhbGdvcml0aG0gbW9kdWxlcwogKgogKiAqKkJ1bmRsZXItRnJpZW5kbHkgQXJjaGl0ZWN0dXJlOioqCiAqIC0gU3RhdGljYWxseSBpbXBvcnRzIGFsbCBhbGdvcml0aG0gbW9kdWxlcyB1cGZyb250CiAqIC0gQ3JlYXRlcyBhIHJlZ2lzdHJ5IHRoYXQgbWFwcyBtb2R1bGUgcGF0aHMgdG8gdGhlaXIgZXhwb3J0cwogKiAtIE1haW4gdGhyZWFkIHNlbmRzOiB7IGlkLCBtb2R1bGUsIGZ1bmN0aW9uTmFtZSwgYXJncyB9CiAqIC0gV29ya2VyIGxvb2tzIHVwIG1vZHVsZSBmcm9tIHJlZ2lzdHJ5IGFuZCBleGVjdXRlcyBmdW5jdGlvbgogKgogKiBUaGlzIGFwcHJvYWNoIHdvcmtzIHdpdGggYWxsIGJ1bmRsZXJzIChWaXRlLCBXZWJwYWNrLCBSb2xsdXApIGJlY2F1c2UKICogaW1wb3J0cyBhcmUga25vd24gYXQgYnVpbGQgdGltZS4KICoKICogQG1vZHVsZSBuZXR3b3JrLXdvcmtlcgogKi8KCmltcG9ydCB7IGNyZWF0ZUxvZ2dlciB9IGZyb20gJ0BndWluZXRpay9sb2dnZXInOwoKLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQovLyBTVEFUSUMgSU1QT1JUUyAtIEFsbCBhbGdvcml0aG0gbW9kdWxlcyBpbXBvcnRlZCB1cGZyb250Ci8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KCi8vIENyZWF0ZSBsb2dnZXIgZm9yIHdvcmtlciAocnVucyBpbiBzZXBhcmF0ZSBjb250ZXh0LCBubyB3aW5kb3cubG9nRmlsdGVyKQpjb25zdCBsb2cgPSBjcmVhdGVMb2dnZXIoewogIHByZWZpeDogJ25ldHdvcmstd29ya2VyJywKICBsZXZlbDogJ2luZm8nIC8vIFdvcmtlcnMgZGVmYXVsdCB0byBpbmZvIGxldmVsCn0pOwoKLy8gU3RhdGlzdGljcyBhbGdvcml0aG1zIChub2RlLWxldmVsIGFuZCBncmFwaC1sZXZlbCkKaW1wb3J0ICogYXMgbm9kZVN0YXRzQ29tcHV0ZSBmcm9tICcuLi9zdGF0aXN0aWNzL2FsZ29yaXRobXMvbm9kZS1zdGF0cy5qcyc7CmltcG9ydCAqIGFzIGdyYXBoU3RhdHNDb21wdXRlIGZyb20gJy4uL3N0YXRpc3RpY3MvYWxnb3JpdGhtcy9ncmFwaC1zdGF0cy5qcyc7CgovLyBDb21tdW5pdHkgZGV0ZWN0aW9uIGFsZ29yaXRobXMKaW1wb3J0ICogYXMgbG91dmFpbkNvbXB1dGUgZnJvbSAnLi4vY29tbXVuaXR5L2FsZ29yaXRobXMvbG91dmFpbi5qcyc7CgovLyBMYXlvdXQgYWxnb3JpdGhtcwppbXBvcnQgKiBhcyByYW5kb21Db21wdXRlIGZyb20gJy4uL2xheW91dHMvcmFuZG9tLmpzJzsKaW1wb3J0ICogYXMgY2lyY3VsYXJDb21wdXRlIGZyb20gJy4uL2xheW91dHMvY2lyY3VsYXIuanMnOwppbXBvcnQgKiBhcyBzcGlyYWxDb21wdXRlIGZyb20gJy4uL2xheW91dHMvc3BpcmFsLmpzJzsKaW1wb3J0ICogYXMgc2hlbGxDb21wdXRlIGZyb20gJy4uL2xheW91dHMvc2hlbGwuanMnOwppbXBvcnQgKiBhcyBzcGVjdHJhbENvbXB1dGUgZnJvbSAnLi4vbGF5b3V0cy9zcGVjdHJhbC5qcyc7CmltcG9ydCAqIGFzIGZvcmNlRGlyZWN0ZWRDb21wdXRlIGZyb20gJy4uL2xheW91dHMvZm9yY2UtZGlyZWN0ZWQuanMnOwppbXBvcnQgKiBhcyBrYW1hZGFLYXdhaUNvbXB1dGUgZnJvbSAnLi4vbGF5b3V0cy9rYW1hZGEta2F3YWkuanMnOwppbXBvcnQgKiBhcyBiaXBhcnRpdGVDb21wdXRlIGZyb20gJy4uL2xheW91dHMvYmlwYXJ0aXRlLmpzJzsKaW1wb3J0ICogYXMgbXVsdGlwYXJ0aXRlQ29tcHV0ZSBmcm9tICcuLi9sYXlvdXRzL211bHRpcGFydGl0ZS5qcyc7CmltcG9ydCAqIGFzIGJmc0NvbXB1dGUgZnJvbSAnLi4vbGF5b3V0cy9iZnMuanMnOwoKLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQovLyBNT0RVTEUgUkVHSVNUUlkgLSBNYXBzIG1vZHVsZSBwYXRocyB0byB0aGVpciBleHBvcnRzCi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KCmNvbnN0IE1PRFVMRV9SRUdJU1RSWSA9IHsKICAvLyBOb2RlLWxldmVsIHN0YXRpc3RpY3MgKGFsbCBpbiBvbmUgZmlsZSkKICAnLi4vc3RhdGlzdGljcy9hbGdvcml0aG1zL25vZGUtc3RhdHMuanMnOiBub2RlU3RhdHNDb21wdXRlLAoKICAvLyBHcmFwaC1sZXZlbCBzdGF0aXN0aWNzCiAgJy4uL3N0YXRpc3RpY3MvYWxnb3JpdGhtcy9ncmFwaC1zdGF0cy5qcyc6IGdyYXBoU3RhdHNDb21wdXRlLAoKICAvLyBDb21tdW5pdHkKICAnLi4vY29tbXVuaXR5L2FsZ29yaXRobXMvbG91dmFpbi5qcyc6IGxvdXZhaW5Db21wdXRlLAoKICAvLyBMYXlvdXRzCiAgJy4uL2xheW91dHMvcmFuZG9tLmpzJzogcmFuZG9tQ29tcHV0ZSwKICAnLi4vbGF5b3V0cy9jaXJjdWxhci5qcyc6IGNpcmN1bGFyQ29tcHV0ZSwKICAnLi4vbGF5b3V0cy9zcGlyYWwuanMnOiBzcGlyYWxDb21wdXRlLAogICcuLi9sYXlvdXRzL3NoZWxsLmpzJzogc2hlbGxDb21wdXRlLAogICcuLi9sYXlvdXRzL3NwZWN0cmFsLmpzJzogc3BlY3RyYWxDb21wdXRlLAogICcuLi9sYXlvdXRzL2ZvcmNlLWRpcmVjdGVkLmpzJzogZm9yY2VEaXJlY3RlZENvbXB1dGUsCiAgJy4uL2xheW91dHMva2FtYWRhLWthd2FpLmpzJzoga2FtYWRhS2F3YWlDb21wdXRlLAogICcuLi9sYXlvdXRzL2JpcGFydGl0ZS5qcyc6IGJpcGFydGl0ZUNvbXB1dGUsCiAgJy4uL2xheW91dHMvbXVsdGlwYXJ0aXRlLmpzJzogbXVsdGlwYXJ0aXRlQ29tcHV0ZSwKICAnLi4vbGF5b3V0cy9iZnMuanMnOiBiZnNDb21wdXRlCn07CgovLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ci8vIFdPUktFUiBNRVNTQUdFIEhBTkRMRVIKLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQoKLyoqCiAqIE1haW4gbWVzc2FnZSBoYW5kbGVyIC0gcmVjZWl2ZXMgdGFza3MgYW5kIGRlbGVnYXRlcyB0byBhbGdvcml0aG0gbW9kdWxlcwogKi8Kc2VsZi5vbm1lc3NhZ2UgPSBhc3luYyBmdW5jdGlvbihldmVudCkgewogIGNvbnN0IHsgaWQsIG1vZHVsZSwgZnVuY3Rpb25OYW1lLCBhcmdzID0gW10gfSA9IGV2ZW50LmRhdGE7CgogIHRyeSB7CiAgICAvLyBWYWxpZGF0ZSBtZXNzYWdlIGZvcm1hdAogICAgaWYgKCFtb2R1bGUgfHwgIWZ1bmN0aW9uTmFtZSkgewogICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgdGFzazogbW9kdWxlIGFuZCBmdW5jdGlvbk5hbWUgYXJlIHJlcXVpcmVkJyk7CiAgICB9CgogICAgbG9nLmRlYnVnKCdQcm9jZXNzaW5nIHRhc2snLCB7CiAgICAgIGlkLAogICAgICBtb2R1bGUsCiAgICAgIGZ1bmN0aW9uTmFtZSwKICAgICAgYXJnc0xlbmd0aDogYXJncz8ubGVuZ3RoIHx8IDAKICAgIH0pOwoKICAgIC8vIENyZWF0ZSBwcm9ncmVzcyBjYWxsYmFjayB0aGF0IHJlcG9ydHMgYmFjayB0byBtYWluIHRocmVhZAogICAgY29uc3QgcHJvZ3Jlc3NDYWxsYmFjayA9IChwcm9ncmVzcykgPT4gewogICAgICBzZWxmLnBvc3RNZXNzYWdlKHsKICAgICAgICBpZCwKICAgICAgICBzdGF0dXM6ICdwcm9ncmVzcycsCiAgICAgICAgcHJvZ3Jlc3M6IE1hdGgubWluKE1hdGgubWF4KHByb2dyZXNzLCAwKSwgMSkgLy8gQ2xhbXAgdG8gWzAsIDFdCiAgICAgIH0pOwogICAgfTsKCiAgICAvLyBMb29rIHVwIGFsZ29yaXRobSBtb2R1bGUgZnJvbSByZWdpc3RyeQogICAgY29uc3QgYWxnb3JpdGhtTW9kdWxlID0gTU9EVUxFX1JFR0lTVFJZW21vZHVsZV07CgogICAgaWYgKCFhbGdvcml0aG1Nb2R1bGUpIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKAogICAgICAgIGBNb2R1bGUgJyR7bW9kdWxlfScgbm90IGZvdW5kIGluIHJlZ2lzdHJ5LiBgICsKICAgICAgICBgQXZhaWxhYmxlIG1vZHVsZXM6ICR7T2JqZWN0LmtleXMoTU9EVUxFX1JFR0lTVFJZKS5qb2luKCcsICcpfWAKICAgICAgKTsKICAgIH0KCiAgICAvLyBHZXQgdGhlIGNvbXB1dGUgZnVuY3Rpb24KICAgIGNvbnN0IGNvbXB1dGVGdW5jdGlvbiA9IGFsZ29yaXRobU1vZHVsZVtmdW5jdGlvbk5hbWVdOwoKICAgIGlmICghY29tcHV0ZUZ1bmN0aW9uIHx8IHR5cGVvZiBjb21wdXRlRnVuY3Rpb24gIT09ICdmdW5jdGlvbicpIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKAogICAgICAgIGBGdW5jdGlvbiAnJHtmdW5jdGlvbk5hbWV9JyBub3QgZm91bmQgaW4gbW9kdWxlICcke21vZHVsZX0nLiBgICsKICAgICAgICBgQXZhaWxhYmxlIGZ1bmN0aW9uczogJHtPYmplY3Qua2V5cyhhbGdvcml0aG1Nb2R1bGUpLmpvaW4oJywgJyl9YAogICAgICApOwogICAgfQoKICAgIC8vIEV4ZWN1dGUgdGhlIGNvbXB1dGUgZnVuY3Rpb24KICAgIC8vIExhc3QgYXJnIGlzIGFsd2F5cyB0aGUgcHJvZ3Jlc3MgY2FsbGJhY2sKICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNvbXB1dGVGdW5jdGlvbiguLi5hcmdzLCBwcm9ncmVzc0NhbGxiYWNrKTsKCiAgICAvLyBTZW5kIHN1Y2Nlc3NmdWwgcmVzdWx0CiAgICBzZWxmLnBvc3RNZXNzYWdlKHsKICAgICAgaWQsCiAgICAgIHN0YXR1czogJ2NvbXBsZXRlJywKICAgICAgcmVzdWx0CiAgICB9KTsKCiAgfSBjYXRjaCAoZXJyb3IpIHsKICAgIC8vIFNlbmQgZXJyb3IKICAgIGxvZy5lcnJvcignVGFzayBmYWlsZWQnLCB7CiAgICAgIGlkLAogICAgICBlcnJvcjogZXJyb3IubWVzc2FnZSwKICAgICAgc3RhY2s6IGVycm9yLnN0YWNrCiAgICB9KTsKICAgIHNlbGYucG9zdE1lc3NhZ2UoewogICAgICBpZCwKICAgICAgc3RhdHVzOiAnZXJyb3InLAogICAgICBlcnJvcjogZXJyb3IubWVzc2FnZSB8fCAnVW5rbm93biBlcnJvcicsCiAgICAgIHN0YWNrOiBlcnJvci5zdGFjawogICAgfSk7CiAgfQp9OwoKLyoqCiAqIEhhbmRsZSB3b3JrZXIgZXJyb3JzCiAqLwpzZWxmLm9uZXJyb3IgPSBmdW5jdGlvbihlcnJvcikgewogIGxvZy5lcnJvcignV29ya2VyIGVycm9yJywgewogICAgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfHwgJ1dvcmtlciBlcnJvciBvY2N1cnJlZCcsCiAgICBzdGFjazogZXJyb3Iuc3RhY2sKICB9KTsKICBzZWxmLnBvc3RNZXNzYWdlKHsKICAgIHN0YXR1czogJ2Vycm9yJywKICAgIGVycm9yOiBlcnJvci5tZXNzYWdlIHx8ICdXb3JrZXIgZXJyb3Igb2NjdXJyZWQnCiAgfSk7Cn07CgovLyBMb2cgd29ya2VyIGluaXRpYWxpemF0aW9uCmxvZy5pbmZvKCdJbml0aWFsaXplZCcsIHsgbW9kdWxlQ291bnQ6IE9iamVjdC5rZXlzKE1PRFVMRV9SRUdJU1RSWSkubGVuZ3RoIH0pOwo=",import.meta.url).href:typeof require<"u"?require("path").join(__dirname,"network-worker.js"):"./network-worker.js"}async initialize(){if(!this.initialized){if(!_i.isSupported())throw new Error("Workers not supported in this environment");this.log.debug("Initializing worker pool",{maxWorkers:this.maxWorkers});try{for(let e=0;e<this.maxWorkers;e++){const n=await this.createWorker(e);this.workers.push(n),this.availableWorkers.push(n)}this.initialized=!0,this.log.info("Worker pool initialized successfully",{workerCount:this.maxWorkers})}catch(e){throw this.log.error("Failed to initialize worker pool",{error:e.message,stack:e.stack}),await this.terminate(),e}}}async createWorker(e){const n=_i.create(this.workerScript);return n.id=e,n.currentTaskId=null,n.cachedFunctions=new Set,n.tasksExecuted=0,n.lastTaskTime=0,n.onMessage(r=>{this.handleWorkerMessage(n,r)}),n.onError(r=>{this.handleWorkerError(n,r)}),this.log.debug("Worker created",{workerId:e}),n}async execute(e,n={}){if(!this.initialized)throw new Error("Worker pool not initialized. Call initialize() first.");return new Promise((r,i)=>{const s=`task_${this.taskIdCounter++}`,o={id:s,...e},a=n.timeout||this.taskTimeout,l=setTimeout(()=>{this.handleTaskTimeout(s)},a);this.activeTasks.set(s,{resolve:r,reject:i,onProgress:n.onProgress,timeoutId:l,startTime:Date.now(),task:o});const c=this._selectWorker(o);c?this.assignTask(c,o):(this.taskQueue.push(o),this.log.debug("Task queued",{taskId:s,queueLength:this.taskQueue.length}))})}assignTask(e,n){e.currentTaskId=n.id,e.postMessage(n)}_getAffinityKey(e){return e&&e.module&&e.functionName?`${e.module}:${e.functionName}`:null}_selectWorker(e){if(this.availableWorkers.length===0)return null;if(!this.enableAffinity){const i=this.availableWorkers.pop();return this.log.debug("Worker selected (affinity disabled)",{workerId:i.id,taskId:e.id}),i}const n=this._getAffinityKey(e);if(n){const i=this.availableWorkers.find(s=>s.cachedFunctions.has(n));if(i)return this._recordAffinityHit(),this.log.debug("Worker selected via affinity",{workerId:i.id,taskId:e.id,affinityKey:n,cachedFunctions:Array.from(i.cachedFunctions)}),this._removeFromAvailable(i);this._recordAffinityMiss(),this.log.debug("No affinity match found",{taskId:e.id,affinityKey:n,availableWorkers:this.availableWorkers.length})}const r=this.availableWorkers.reduce((i,s)=>s.tasksExecuted<i.tasksExecuted?s:i);return this.log.debug("Worker selected (least loaded)",{workerId:r.id,taskId:e.id,tasksExecuted:r.tasksExecuted,affinityKey:n||"none"}),this._removeFromAvailable(r)}_removeFromAvailable(e){const n=this.availableWorkers.indexOf(e);return n>-1&&this.availableWorkers.splice(n,1),e}_recordAffinityHit(){this.affinityMetrics.hits++}_recordAffinityMiss(){this.affinityMetrics.misses++}_updateWorkerAffinity(e,n){const r=this._getAffinityKey(n);if(!r)return;const i=!e.cachedFunctions.has(r);if(e.cachedFunctions.add(r),e.tasksExecuted++,e.lastTaskTime=Date.now(),i&&this.log.debug("Worker affinity cache updated",{workerId:e.id,affinityKey:r,cacheSize:e.cachedFunctions.size,tasksExecuted:e.tasksExecuted}),e.cachedFunctions.size>this.affinityCacheLimit){const s=e.cachedFunctions.size;this._evictAffinityEntries(e),this.log.debug("Worker affinity cache evicted",{workerId:e.id,beforeSize:s,afterSize:e.cachedFunctions.size,limit:this.affinityCacheLimit})}}_evictAffinityEntries(e){const n=Array.from(e.cachedFunctions),r=n.slice(0,Math.floor(n.length/2));r.forEach(i=>e.cachedFunctions.delete(i)),this.log.debug("Evicted affinity entries",{workerId:e.id,evicted:r.length,remaining:e.cachedFunctions.size})}handleWorkerMessage(e,n){const{id:r,status:i,result:s,progress:o,error:a}=n,l=this.activeTasks.get(r);if(!l){this.log.warn("Received message for unknown task",{taskId:r});return}if(i==="progress")l.onProgress&&l.onProgress(o),this.log.debug("Task progress",{taskId:r,progress:Math.round(o*100)});else if(i==="complete"){const c=Date.now()-l.startTime;this.log.debug("Task completed",{taskId:r,duration:c}),clearTimeout(l.timeoutId),l.resolve(s),l.task&&this._updateWorkerAffinity(e,l.task),this.activeTasks.delete(r),this.freeWorker(e)}else i==="error"&&(this.log.error("Task failed",{taskId:r,error:a}),clearTimeout(l.timeoutId),l.reject(new Error(a)),this.activeTasks.delete(r),this.freeWorker(e))}handleWorkerError(e,n){if(this.log.error("Worker error",{workerId:e.id,error:n.message,stack:n.stack}),e.currentTaskId){const r=this.activeTasks.get(e.currentTaskId);r&&(clearTimeout(r.timeoutId),r.reject(n),this.activeTasks.delete(e.currentTaskId))}this.restartWorker(e)}handleTaskTimeout(e){const n=this.activeTasks.get(e);if(!n)return;this.log.warn("Task timed out",{taskId:e,timeout:this.taskTimeout}),n.reject(new Error(`Task timed out after ${this.taskTimeout}ms`)),this.activeTasks.delete(e);const r=this.workers.find(i=>i.currentTaskId===e);r&&this.restartWorker(r)}freeWorker(e){if(e.currentTaskId=null,this.taskQueue.length>0){const n=this.taskQueue.shift();this.assignTask(e,n),this.log.debug("Task assigned from queue",{taskId:n.id,workerId:e.id})}else this.availableWorkers.push(e)}async restartWorker(e){const n=this.workers.indexOf(e);if(n!==-1){this.log.debug("Restarting worker",{workerId:e.id});try{e.terminate();const r=await this.createWorker(e.id);this.workers[n]=r,this.availableWorkers.push(r),this.log.info("Worker restarted successfully",{workerId:e.id,lostAffinityEntries:e.cachedFunctions?.size||0})}catch(r){this.log.error("Failed to restart worker",{workerId:e.id,error:r.message,stack:r.stack}),this.workers.splice(n,1)}}}async waitForActiveTasks(e=5e3){if(this.activeTasks.size!==0)return this.log.debug("Waiting for active tasks",{taskCount:this.activeTasks.size,timeout:e}),new Promise(n=>{const r=Date.now(),i=setInterval(()=>{(this.activeTasks.size===0||Date.now()-r>e)&&(clearInterval(i),this.log.debug("Wait complete",{remainingTasks:this.activeTasks.size}),n())},100)})}async terminate(e=!1){this.initialized&&(this.log.info("Terminating worker pool",{force:e}),e||await this.waitForActiveTasks(5e3),this.activeTasks.forEach((n,r)=>{clearTimeout(n.timeoutId),n.reject(new Error("Worker pool terminated"))}),this.activeTasks.clear(),this.workers.forEach(n=>{try{n.terminate()}catch(r){this.log.error("Error terminating worker",{workerId:n.id,error:r.message})}}),this.workers=[],this.availableWorkers=[],this.taskQueue=[],this.initialized=!1,this.log.info("Worker pool terminated"))}getStatus(){const e=this.getAffinityStats();return{initialized:this.initialized,totalWorkers:this.workers.length,availableWorkers:this.availableWorkers.length,busyWorkers:this.workers.length-this.availableWorkers.length,activeTasks:this.activeTasks.size,queuedTasks:this.taskQueue.length,affinity:{enabled:this.enableAffinity,cacheLimit:this.affinityCacheLimit,hitRate:e.hitRate}}}getAffinityStats(){const e=this.affinityMetrics.hits+this.affinityMetrics.misses;return{hits:this.affinityMetrics.hits,misses:this.affinityMetrics.misses,hitRate:e>0?this.affinityMetrics.hits/e:0,workerCaches:this.workers.map(n=>({workerId:n.id,cachedFunctions:Array.from(n.cachedFunctions||[]),tasksExecuted:n.tasksExecuted||0}))}}}class Mn{constructor(){if(Mn.instance)return Mn.instance;this.workerPool=null,this.initialized=!1,this.initPromise=null,this.log=Ze({prefix:"WorkerManager",level:"info"}),Mn.instance=this}async initialize(e={}){if(this.initPromise)return this.initPromise;if(this.initialized&&this.workerPool)return Promise.resolve();this.initPromise=this._doInitialize(e);try{await this.initPromise}finally{this.initPromise=null}}async _doInitialize(e){const{maxWorkers:n,workerScript:r,taskTimeout:i=6e4,verbose:s=!1,enableAffinity:o=!0,affinityCacheLimit:a=50}=e;this.log.setLevel(s?"debug":"info");let l=r;if(!l)try{l=new URL("data:text/javascript;base64,LyoqCiAqIE5ldHdvcmsgV29ya2VyIC0gRXhlY3V0ZXMgY29tcHV0ZSBmdW5jdGlvbnMgZnJvbSBhbGdvcml0aG0gbW9kdWxlcwogKgogKiAqKkJ1bmRsZXItRnJpZW5kbHkgQXJjaGl0ZWN0dXJlOioqCiAqIC0gU3RhdGljYWxseSBpbXBvcnRzIGFsbCBhbGdvcml0aG0gbW9kdWxlcyB1cGZyb250CiAqIC0gQ3JlYXRlcyBhIHJlZ2lzdHJ5IHRoYXQgbWFwcyBtb2R1bGUgcGF0aHMgdG8gdGhlaXIgZXhwb3J0cwogKiAtIE1haW4gdGhyZWFkIHNlbmRzOiB7IGlkLCBtb2R1bGUsIGZ1bmN0aW9uTmFtZSwgYXJncyB9CiAqIC0gV29ya2VyIGxvb2tzIHVwIG1vZHVsZSBmcm9tIHJlZ2lzdHJ5IGFuZCBleGVjdXRlcyBmdW5jdGlvbgogKgogKiBUaGlzIGFwcHJvYWNoIHdvcmtzIHdpdGggYWxsIGJ1bmRsZXJzIChWaXRlLCBXZWJwYWNrLCBSb2xsdXApIGJlY2F1c2UKICogaW1wb3J0cyBhcmUga25vd24gYXQgYnVpbGQgdGltZS4KICoKICogQG1vZHVsZSBuZXR3b3JrLXdvcmtlcgogKi8KCmltcG9ydCB7IGNyZWF0ZUxvZ2dlciB9IGZyb20gJ0BndWluZXRpay9sb2dnZXInOwoKLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQovLyBTVEFUSUMgSU1QT1JUUyAtIEFsbCBhbGdvcml0aG0gbW9kdWxlcyBpbXBvcnRlZCB1cGZyb250Ci8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KCi8vIENyZWF0ZSBsb2dnZXIgZm9yIHdvcmtlciAocnVucyBpbiBzZXBhcmF0ZSBjb250ZXh0LCBubyB3aW5kb3cubG9nRmlsdGVyKQpjb25zdCBsb2cgPSBjcmVhdGVMb2dnZXIoewogIHByZWZpeDogJ25ldHdvcmstd29ya2VyJywKICBsZXZlbDogJ2luZm8nIC8vIFdvcmtlcnMgZGVmYXVsdCB0byBpbmZvIGxldmVsCn0pOwoKLy8gU3RhdGlzdGljcyBhbGdvcml0aG1zIChub2RlLWxldmVsIGFuZCBncmFwaC1sZXZlbCkKaW1wb3J0ICogYXMgbm9kZVN0YXRzQ29tcHV0ZSBmcm9tICcuLi9zdGF0aXN0aWNzL2FsZ29yaXRobXMvbm9kZS1zdGF0cy5qcyc7CmltcG9ydCAqIGFzIGdyYXBoU3RhdHNDb21wdXRlIGZyb20gJy4uL3N0YXRpc3RpY3MvYWxnb3JpdGhtcy9ncmFwaC1zdGF0cy5qcyc7CgovLyBDb21tdW5pdHkgZGV0ZWN0aW9uIGFsZ29yaXRobXMKaW1wb3J0ICogYXMgbG91dmFpbkNvbXB1dGUgZnJvbSAnLi4vY29tbXVuaXR5L2FsZ29yaXRobXMvbG91dmFpbi5qcyc7CgovLyBMYXlvdXQgYWxnb3JpdGhtcwppbXBvcnQgKiBhcyByYW5kb21Db21wdXRlIGZyb20gJy4uL2xheW91dHMvcmFuZG9tLmpzJzsKaW1wb3J0ICogYXMgY2lyY3VsYXJDb21wdXRlIGZyb20gJy4uL2xheW91dHMvY2lyY3VsYXIuanMnOwppbXBvcnQgKiBhcyBzcGlyYWxDb21wdXRlIGZyb20gJy4uL2xheW91dHMvc3BpcmFsLmpzJzsKaW1wb3J0ICogYXMgc2hlbGxDb21wdXRlIGZyb20gJy4uL2xheW91dHMvc2hlbGwuanMnOwppbXBvcnQgKiBhcyBzcGVjdHJhbENvbXB1dGUgZnJvbSAnLi4vbGF5b3V0cy9zcGVjdHJhbC5qcyc7CmltcG9ydCAqIGFzIGZvcmNlRGlyZWN0ZWRDb21wdXRlIGZyb20gJy4uL2xheW91dHMvZm9yY2UtZGlyZWN0ZWQuanMnOwppbXBvcnQgKiBhcyBrYW1hZGFLYXdhaUNvbXB1dGUgZnJvbSAnLi4vbGF5b3V0cy9rYW1hZGEta2F3YWkuanMnOwppbXBvcnQgKiBhcyBiaXBhcnRpdGVDb21wdXRlIGZyb20gJy4uL2xheW91dHMvYmlwYXJ0aXRlLmpzJzsKaW1wb3J0ICogYXMgbXVsdGlwYXJ0aXRlQ29tcHV0ZSBmcm9tICcuLi9sYXlvdXRzL211bHRpcGFydGl0ZS5qcyc7CmltcG9ydCAqIGFzIGJmc0NvbXB1dGUgZnJvbSAnLi4vbGF5b3V0cy9iZnMuanMnOwoKLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQovLyBNT0RVTEUgUkVHSVNUUlkgLSBNYXBzIG1vZHVsZSBwYXRocyB0byB0aGVpciBleHBvcnRzCi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KCmNvbnN0IE1PRFVMRV9SRUdJU1RSWSA9IHsKICAvLyBOb2RlLWxldmVsIHN0YXRpc3RpY3MgKGFsbCBpbiBvbmUgZmlsZSkKICAnLi4vc3RhdGlzdGljcy9hbGdvcml0aG1zL25vZGUtc3RhdHMuanMnOiBub2RlU3RhdHNDb21wdXRlLAoKICAvLyBHcmFwaC1sZXZlbCBzdGF0aXN0aWNzCiAgJy4uL3N0YXRpc3RpY3MvYWxnb3JpdGhtcy9ncmFwaC1zdGF0cy5qcyc6IGdyYXBoU3RhdHNDb21wdXRlLAoKICAvLyBDb21tdW5pdHkKICAnLi4vY29tbXVuaXR5L2FsZ29yaXRobXMvbG91dmFpbi5qcyc6IGxvdXZhaW5Db21wdXRlLAoKICAvLyBMYXlvdXRzCiAgJy4uL2xheW91dHMvcmFuZG9tLmpzJzogcmFuZG9tQ29tcHV0ZSwKICAnLi4vbGF5b3V0cy9jaXJjdWxhci5qcyc6IGNpcmN1bGFyQ29tcHV0ZSwKICAnLi4vbGF5b3V0cy9zcGlyYWwuanMnOiBzcGlyYWxDb21wdXRlLAogICcuLi9sYXlvdXRzL3NoZWxsLmpzJzogc2hlbGxDb21wdXRlLAogICcuLi9sYXlvdXRzL3NwZWN0cmFsLmpzJzogc3BlY3RyYWxDb21wdXRlLAogICcuLi9sYXlvdXRzL2ZvcmNlLWRpcmVjdGVkLmpzJzogZm9yY2VEaXJlY3RlZENvbXB1dGUsCiAgJy4uL2xheW91dHMva2FtYWRhLWthd2FpLmpzJzoga2FtYWRhS2F3YWlDb21wdXRlLAogICcuLi9sYXlvdXRzL2JpcGFydGl0ZS5qcyc6IGJpcGFydGl0ZUNvbXB1dGUsCiAgJy4uL2xheW91dHMvbXVsdGlwYXJ0aXRlLmpzJzogbXVsdGlwYXJ0aXRlQ29tcHV0ZSwKICAnLi4vbGF5b3V0cy9iZnMuanMnOiBiZnNDb21wdXRlCn07CgovLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ci8vIFdPUktFUiBNRVNTQUdFIEhBTkRMRVIKLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQoKLyoqCiAqIE1haW4gbWVzc2FnZSBoYW5kbGVyIC0gcmVjZWl2ZXMgdGFza3MgYW5kIGRlbGVnYXRlcyB0byBhbGdvcml0aG0gbW9kdWxlcwogKi8Kc2VsZi5vbm1lc3NhZ2UgPSBhc3luYyBmdW5jdGlvbihldmVudCkgewogIGNvbnN0IHsgaWQsIG1vZHVsZSwgZnVuY3Rpb25OYW1lLCBhcmdzID0gW10gfSA9IGV2ZW50LmRhdGE7CgogIHRyeSB7CiAgICAvLyBWYWxpZGF0ZSBtZXNzYWdlIGZvcm1hdAogICAgaWYgKCFtb2R1bGUgfHwgIWZ1bmN0aW9uTmFtZSkgewogICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgdGFzazogbW9kdWxlIGFuZCBmdW5jdGlvbk5hbWUgYXJlIHJlcXVpcmVkJyk7CiAgICB9CgogICAgbG9nLmRlYnVnKCdQcm9jZXNzaW5nIHRhc2snLCB7CiAgICAgIGlkLAogICAgICBtb2R1bGUsCiAgICAgIGZ1bmN0aW9uTmFtZSwKICAgICAgYXJnc0xlbmd0aDogYXJncz8ubGVuZ3RoIHx8IDAKICAgIH0pOwoKICAgIC8vIENyZWF0ZSBwcm9ncmVzcyBjYWxsYmFjayB0aGF0IHJlcG9ydHMgYmFjayB0byBtYWluIHRocmVhZAogICAgY29uc3QgcHJvZ3Jlc3NDYWxsYmFjayA9IChwcm9ncmVzcykgPT4gewogICAgICBzZWxmLnBvc3RNZXNzYWdlKHsKICAgICAgICBpZCwKICAgICAgICBzdGF0dXM6ICdwcm9ncmVzcycsCiAgICAgICAgcHJvZ3Jlc3M6IE1hdGgubWluKE1hdGgubWF4KHByb2dyZXNzLCAwKSwgMSkgLy8gQ2xhbXAgdG8gWzAsIDFdCiAgICAgIH0pOwogICAgfTsKCiAgICAvLyBMb29rIHVwIGFsZ29yaXRobSBtb2R1bGUgZnJvbSByZWdpc3RyeQogICAgY29uc3QgYWxnb3JpdGhtTW9kdWxlID0gTU9EVUxFX1JFR0lTVFJZW21vZHVsZV07CgogICAgaWYgKCFhbGdvcml0aG1Nb2R1bGUpIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKAogICAgICAgIGBNb2R1bGUgJyR7bW9kdWxlfScgbm90IGZvdW5kIGluIHJlZ2lzdHJ5LiBgICsKICAgICAgICBgQXZhaWxhYmxlIG1vZHVsZXM6ICR7T2JqZWN0LmtleXMoTU9EVUxFX1JFR0lTVFJZKS5qb2luKCcsICcpfWAKICAgICAgKTsKICAgIH0KCiAgICAvLyBHZXQgdGhlIGNvbXB1dGUgZnVuY3Rpb24KICAgIGNvbnN0IGNvbXB1dGVGdW5jdGlvbiA9IGFsZ29yaXRobU1vZHVsZVtmdW5jdGlvbk5hbWVdOwoKICAgIGlmICghY29tcHV0ZUZ1bmN0aW9uIHx8IHR5cGVvZiBjb21wdXRlRnVuY3Rpb24gIT09ICdmdW5jdGlvbicpIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKAogICAgICAgIGBGdW5jdGlvbiAnJHtmdW5jdGlvbk5hbWV9JyBub3QgZm91bmQgaW4gbW9kdWxlICcke21vZHVsZX0nLiBgICsKICAgICAgICBgQXZhaWxhYmxlIGZ1bmN0aW9uczogJHtPYmplY3Qua2V5cyhhbGdvcml0aG1Nb2R1bGUpLmpvaW4oJywgJyl9YAogICAgICApOwogICAgfQoKICAgIC8vIEV4ZWN1dGUgdGhlIGNvbXB1dGUgZnVuY3Rpb24KICAgIC8vIExhc3QgYXJnIGlzIGFsd2F5cyB0aGUgcHJvZ3Jlc3MgY2FsbGJhY2sKICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNvbXB1dGVGdW5jdGlvbiguLi5hcmdzLCBwcm9ncmVzc0NhbGxiYWNrKTsKCiAgICAvLyBTZW5kIHN1Y2Nlc3NmdWwgcmVzdWx0CiAgICBzZWxmLnBvc3RNZXNzYWdlKHsKICAgICAgaWQsCiAgICAgIHN0YXR1czogJ2NvbXBsZXRlJywKICAgICAgcmVzdWx0CiAgICB9KTsKCiAgfSBjYXRjaCAoZXJyb3IpIHsKICAgIC8vIFNlbmQgZXJyb3IKICAgIGxvZy5lcnJvcignVGFzayBmYWlsZWQnLCB7CiAgICAgIGlkLAogICAgICBlcnJvcjogZXJyb3IubWVzc2FnZSwKICAgICAgc3RhY2s6IGVycm9yLnN0YWNrCiAgICB9KTsKICAgIHNlbGYucG9zdE1lc3NhZ2UoewogICAgICBpZCwKICAgICAgc3RhdHVzOiAnZXJyb3InLAogICAgICBlcnJvcjogZXJyb3IubWVzc2FnZSB8fCAnVW5rbm93biBlcnJvcicsCiAgICAgIHN0YWNrOiBlcnJvci5zdGFjawogICAgfSk7CiAgfQp9OwoKLyoqCiAqIEhhbmRsZSB3b3JrZXIgZXJyb3JzCiAqLwpzZWxmLm9uZXJyb3IgPSBmdW5jdGlvbihlcnJvcikgewogIGxvZy5lcnJvcignV29ya2VyIGVycm9yJywgewogICAgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfHwgJ1dvcmtlciBlcnJvciBvY2N1cnJlZCcsCiAgICBzdGFjazogZXJyb3Iuc3RhY2sKICB9KTsKICBzZWxmLnBvc3RNZXNzYWdlKHsKICAgIHN0YXR1czogJ2Vycm9yJywKICAgIGVycm9yOiBlcnJvci5tZXNzYWdlIHx8ICdXb3JrZXIgZXJyb3Igb2NjdXJyZWQnCiAgfSk7Cn07CgovLyBMb2cgd29ya2VyIGluaXRpYWxpemF0aW9uCmxvZy5pbmZvKCdJbml0aWFsaXplZCcsIHsgbW9kdWxlQ291bnQ6IE9iamVjdC5rZXlzKE1PRFVMRV9SRUdJU1RSWSkubGVuZ3RoIH0pOwo=",import.meta.url).href}catch{l="/graph-js/src/compute/network-worker.js",this.log.warn("Could not resolve worker path from import.meta.url, using fallback",{workerPath:l})}if(!_i.isSupported())throw new Error("Web Workers are not supported in this environment. This library requires Web Worker support (browser) or Worker Threads (Node.js).");this.workerPool=new U2({maxWorkers:n||this._getDefaultWorkerCount(),workerScript:l,taskTimeout:i,verbose:s,enableAffinity:o,affinityCacheLimit:a}),await this.workerPool.initialize(),this.initialized=!0,this.log.info("Initialized successfully",{workerCount:this.workerPool.maxWorkers})}_getDefaultWorkerCount(){if(typeof navigator<"u"&&navigator.hardwareConcurrency)return navigator.hardwareConcurrency;try{return require("os").cpus().length}catch{return 4}}async execute(e,n={}){return this.initialized||await this.initialize(),this.workerPool.execute(e,n)}serializeGraph(e){return{nodes:Array.from(e.nodes),edges:e.edges.map(n=>({source:n.u,target:n.v,weight:n.weight}))}}getStatus(){return this.workerPool?this.workerPool.getStatus():null}async terminate(e=!1){this.workerPool&&(await this.workerPool.terminate(e),this.workerPool=null,this.initialized=!1)}static reset(){Mn.instance&&(Mn.instance.terminate(!0),Mn.instance=null)}}Mn.instance=null;const En=new Mn,$t=Ze({prefix:"compute-utils",level:"info"});function Ye(t){$t.debug("Starting reconstruction",{isObject:t&&typeof t=="object",hasNodes:t&&"nodes"in t,hasEdges:t&&"edges"in t,graphDataKeys:t?Object.keys(t):"N/A"});const e=new xa;if(!t||typeof t!="object")return $t.error("Invalid graphData passed to reconstructGraph",{graphData:t}),e;if(t.nodes!==void 0&&t.nodes!==null){$t.debug("Processing nodes",{type:typeof t.nodes,isArray:Array.isArray(t.nodes),length:Array.isArray(t.nodes)?t.nodes.length:"N/A"});try{let n;if(Array.isArray(t.nodes))n=t.nodes;else if(t.nodes[Symbol.iterator])n=Array.from(t.nodes);else throw new Error(`nodes is not iterable: ${typeof t.nodes}`);$t.debug("Node array created",{length:n.length}),n.forEach(r=>{e.addNode(r)}),$t.debug("Nodes added successfully",{type:typeof e.nodes,size:e.nodes.size})}catch(n){throw $t.error("Error adding nodes",{error:n.message,stack:n.stack,nodesValue:t.nodes,nodesType:typeof t.nodes,nodesConstructor:t.nodes?.constructor?.name}),new Error(`Failed to reconstruct nodes: ${n.message}`)}}else $t.warn("No nodes found in graphData");if(t.edges!==void 0&&t.edges!==null){$t.debug("Processing edges",{type:typeof t.edges,isArray:Array.isArray(t.edges),length:Array.isArray(t.edges)?t.edges.length:"N/A"});try{let n;if(Array.isArray(t.edges))n=t.edges;else if(t.edges[Symbol.iterator])n=Array.from(t.edges);else throw new Error(`edges is not iterable: ${typeof t.edges}`);$t.debug("Edge array created",{length:n.length}),n.forEach(r=>{const i=r.source!==void 0?r.source:r.u,s=r.target!==void 0?r.target:r.v,o=r.weight||1;i!==void 0&&s!==void 0&&e.addEdge(i,s,o)}),$t.debug("Edges added successfully")}catch(n){throw $t.error("Error adding edges",{error:n.message,stack:n.stack,edgesValue:t.edges,edgesType:typeof t.edges}),new Error(`Failed to reconstruct edges: ${n.message}`)}}else $t.warn("No edges found in graphData");return $t.debug("Reconstruction complete",{nodes:e.nodes.size,edges:e.edges.length}),e}function de(t,e){t&&typeof t=="function"&&t(Math.min(Math.max(e,0),1))}function j2(t,e){const n=new Map([[e,0]]),r=new Map([[e,1]]),i=new Map,s=[e],o=[];for(;s.length>0;){const a=s.shift();o.push(a);const l=t.getNeighbors(a),c=n.get(a);l.forEach(d=>{n.has(d)||(n.set(d,c+1),s.push(d)),n.get(d)===c+1&&(r.set(d,(r.get(d)||0)+r.get(a)),i.has(d)||i.set(d,[]),i.get(d).push(a))})}return{distance:n,pathCount:r,predecessors:i,stack:o}}function Uy(t,e){const n=new Map,r=[e],i=new Set([e]);for(n.set(e,0);r.length>0;){const s=r.shift(),o=n.get(s);for(const a of t.getNeighbors(s))i.has(a)||(i.add(a),r.push(a),n.set(a,o+1))}return n}function jy(t,e){const n=t.getNeighbors(e),r=n.length;if(r<2)return 0;let i=0;for(let s=0;s<n.length;s++)for(let o=s+1;o<n.length;o++)t.hasEdge(n[s],n[o])&&i++;return 2*i/(r*(r-1))}function H2(t,e){const n=t.getNeighbors(e);let r=0;for(let i=0;i<n.length;i++)for(let s=i+1;s<n.length;s++)t.hasEdge(n[i],n[s])&&r++;return r}function Ar(t){const e=Math.sqrt(Object.values(t).reduce((n,r)=>n+r*r,0));return e>0&&Object.keys(t).forEach(n=>{t[n]/=e}),t}function Hy(t,e){const n=Object.keys(t);let r=0;for(const i of n)r+=Math.abs((t[i]||0)-(e[i]||0));return r}class ft{constructor(e,n="",r="node",i=null){if(new.target===ft)throw new Error("StatisticAlgorithm is abstract and cannot be instantiated directly");if(r!=="node"&&r!=="graph")throw new Error(`Scope must be 'node' or 'graph', got: ${r}`);if(!i||!i.module||!i.functionName)throw new Error("computeConfig with module and functionName is required");this.name=e,this.description=n,this.scope=r,this.computeConfig=i,this.options={}}async calculate(e,n=null,r={}){const i=En.serializeGraph(e),s={module:this.computeConfig.module,functionName:this.computeConfig.functionName,args:[i,n,this.options]};return await En.execute(s,r)}getInfo(){return{name:this.name,description:this.description,scope:this.scope}}isNodeLevel(){return this.scope==="node"}isGraphLevel(){return this.scope==="graph"}}class Wy extends ft{constructor(){super("degree","Number of connections per node","node",{module:"../statistics/algorithms/node-stats.js",functionName:"degreeCompute"})}}class qy extends ft{constructor(e={}){super("closeness","Average distance to all other nodes (inverted)","node",{module:"../statistics/algorithms/node-stats.js",functionName:"closenessCompute"}),this.options={normalized:e.normalized!==!1}}}class Ky extends ft{constructor(e={}){super("ego-density","Density of connections among neighbors","node",{module:"../statistics/algorithms/node-stats.js",functionName:"egoDensityCompute"}),this.options={radius:e.radius||1}}}class Xy extends ft{constructor(){super("betweenness","Frequency on shortest paths between other nodes","node",{module:"../statistics/algorithms/node-stats.js",functionName:"betweennessCompute"})}}class Zy extends ft{constructor(){super("clustering","Local clustering coefficient","node",{module:"../statistics/algorithms/node-stats.js",functionName:"clusteringCompute"})}}class Yy extends ft{constructor(e={}){super("eigenvector","Importance based on neighbor importance","node",{module:"../statistics/algorithms/node-stats.js",functionName:"eigenvectorCompute"}),this.options={maxIter:e.maxIter||100,tolerance:e.tolerance||1e-6}}}class Jy extends ft{constructor(e={}){super("pagerank","PageRank importance score with damping","node",{module:"../statistics/algorithms/node-stats.js",functionName:"pageRankCompute"}),this.options={dampingFactor:e.dampingFactor??.85,maxIter:e.maxIter??100,tolerance:e.tolerance??1e-6}}}class Qy extends ft{constructor(e={}){super("eigenvector-laplacian","X,Y coordinates from Laplacian eigenvectors","node",{module:"../statistics/algorithms/node-stats.js",functionName:"eigenvectorLaplacianCompute"}),this.options={maxIter:e.maxIter||100,tolerance:e.tolerance||1e-6}}}class ev extends ft{constructor(){super("cliques","Number of maximal cliques per node","node",{module:"../statistics/algorithms/node-stats.js",functionName:"cliquesCompute"})}}async function W2(t,e,n,r){const i=Ye(t),s=e||Array.from(i.nodes),o={};return s.forEach((a,l)=>{o[a]=i.degree(a),l%100===0&&de(r,l/s.length)}),de(r,1),o}async function q2(t,e,n,r){const i=Ye(t),s=e||Array.from(i.nodes),o=Array.from(i.nodes),a={};o.forEach(d=>{a[d]=0}),s.forEach((d,u)=>{const h=j2(i,d);K2(a,h,o,d),u%Math.max(1,Math.floor(s.length/10))===0&&de(r,u/s.length)});const l=o.length,c=l>2?2/((l-1)*(l-2)):1;return o.forEach(d=>{a[d]*=c}),de(r,1),a}function K2(t,e,n,r){const{pathCount:i,predecessors:s,stack:o}=e,a=new Map;for(n.forEach(l=>{a.set(l,0)});o.length>0;){const l=o.pop();(s.get(l)||[]).forEach(c=>{const d=i.get(c)/i.get(l)*(1+a.get(l));a.set(c,a.get(c)+d)}),l!==r&&(t[l]+=a.get(l))}}async function X2(t,e,n,r){const i=Ye(t),s=e||Array.from(i.nodes),o={};return s.forEach((a,l)=>{o[a]=jy(i,a),l%100===0&&de(r,l/s.length)}),de(r,1),o}async function Z2(t,e,n,r){const i=Ye(t),{maxIter:s=100,tolerance:o=1e-6}=n||{},a=Array.from(i.nodes),l=a.length;let c={};a.forEach(d=>{c[d]=1/l});for(let d=0;d<s;d++){const u={};a.forEach(f=>{u[f]=0}),a.forEach(f=>{i.getNeighbors(f).forEach(g=>{const y=i.adjacencyMap.get(f).get(g);u[g]+=c[f]*y})}),Ar(u);const h=Hy(u,c);if(c=u,d%10===0&&de(r,d/s),h<o)break}return de(r,1),c}async function Y2(t,e,n,r){const i=Ye(t),{dampingFactor:s=.85,maxIter:o=100,tolerance:a=1e-6}=n||{},l=Array.from(i.nodes),c=l.length;if(c===0)return de(r,1),{};let d={};l.forEach(y=>{d[y]=1/c});const u={};l.forEach(y=>{u[y]=i.getNeighbors(y).length});const h=l.filter(y=>u[y]===0),f=(1-s)/c;for(let y=0;y<o;y++){const w={};let b=0;h.forEach(v=>{b+=d[v]});const E=s*b/c;l.forEach(v=>{w[v]=f+E}),l.forEach(v=>{const S=i.getNeighbors(v);if(S.length>0){const L=s*d[v]/S.length;S.forEach(G=>{w[G]+=L})}});const A=Hy(w,d);if(d=w,y%10===0&&de(r,y/o),A<a)break}const g=Object.values(d).reduce((y,w)=>y+w,0);return g>0&&l.forEach(y=>{d[y]/=g}),de(r,1),d}async function J2(t,e,n,r){const i=Ye(t),s=e||Array.from(i.nodes),o={};return s.forEach((a,l)=>{o[a]=H2(i,a),l%100===0&&de(r,l/s.length)}),de(r,1),o}async function Q2(t,e,n,r){const i=Ye(t),s=e||Array.from(i.nodes),o=Array.from(i.nodes).length,a={},l=n?.normalized!==!1;return s.forEach((c,d)=>{const u=new Map,h=[c],f=new Set([c]);for(u.set(c,0);h.length>0;){const y=h.shift(),w=u.get(y);for(const b of i.getNeighbors(y))f.has(b)||(f.add(b),h.push(b),u.set(b,w+1))}const g=u.size-1;if(g===0)a[c]=0;else{const y=Array.from(u.values()).reduce((w,b)=>w+b,0);if(y===0)a[c]=0;else{const w=g/y;a[c]=l?w*(g/(o-1)):w}}d%100===0&&de(r,d/s.length)}),de(r,1),a}async function eD(t,e,n,r){const i=Ye(t),s=e||Array.from(i.nodes),o={};return s.forEach((a,l)=>{const c=i.getNeighbors(a),d=c.length;if(d<2)o[a]=0;else{let u=0;for(let f=0;f<d;f++)for(let g=f+1;g<d;g++)i.hasEdge(c[f],c[g])&&u++;const h=d*(d-1)/2;o[a]=u/h}l%100===0&&de(r,l/s.length)}),de(r,1),o}async function tD(t,e,n,r){const i=Ye(t),s=Array.from(i.nodes),o=s.length;if(o<3){const g={};return s.forEach(y=>{g[y]={laplacian_x:Math.random()*2-1,laplacian_y:Math.random()*2-1}}),de(r,1),g}const{maxIter:a=100,tolerance:l=1e-6}=n||{},c=Array(o).fill(null).map(()=>Array(o).fill(0)),d=new Map;s.forEach((g,y)=>d.set(g,y));for(let g=0;g<o;g++){const y=s[g],w=i.getNeighbors(y);c[g][g]=w.length,w.forEach(b=>{const E=d.get(b);E!==void 0&&(c[g][E]=-1)})}de(r,.2);const u=Array(o).fill(0).map(()=>Math.random()),h=Array(o).fill(0).map(()=>Math.random());Ar(u),Ar(h);for(let g=0;g<a;g++){const y=Uf(c,u);Ar(y);let w=0;for(let b=0;b<o;b++)w+=Math.abs(y[b]-u[b]);if(w<l)break;for(let b=0;b<o;b++)u[b]=y[b];g%20===0&&de(r,.2+g/a*.4)}de(r,.6),El(h,u),Ar(h);for(let g=0;g<a;g++){const y=Uf(c,h);Ar(y),El(y,u),El(y,h),Ar(y);let w=0;for(let b=0;b<o;b++)w+=Math.abs(y[b]-h[b]);if(w<l)break;for(let b=0;b<o;b++)h[b]=y[b];g%20===0&&de(r,.6+g/a*.39)}de(r,.99);const f={};return s.forEach((g,y)=>{f[g]={laplacian_x:u[y],laplacian_y:h[y]}}),de(r,1),f}function Uf(t,e){const n=t.length,r=Array(n).fill(0);for(let i=0;i<n;i++)for(let s=0;s<n;s++)r[i]+=t[i][s]*e[s];return r}function El(t,e){let n=0;for(let r=0;r<t.length;r++)n+=t[r]*e[r];for(let r=0;r<t.length;r++)t[r]-=n*e[r]}const g8=Object.freeze(Object.defineProperty({__proto__:null,BetweennessStatistic:Xy,CliquesStatistic:ev,ClosenessStatistic:qy,ClusteringStatistic:Zy,DegreeStatistic:Wy,EgoDensityStatistic:Ky,EigenvectorLaplacianStatistic:Qy,EigenvectorStatistic:Yy,PageRankStatistic:Jy,betweennessCompute:q2,cliquesCompute:J2,closenessCompute:Q2,clusteringCompute:X2,degreeCompute:W2,egoDensityCompute:eD,eigenvectorCompute:Z2,eigenvectorLaplacianCompute:tD,pageRankCompute:Y2},Symbol.toStringTag,{value:"Module"}));class tv extends ft{constructor(){super("density","Ratio of actual edges to possible edges","graph",{module:"../statistics/algorithms/graph-stats.js",functionName:"densityCompute"})}}class nv extends ft{constructor(){super("diameter","Longest shortest path in the graph","graph",{module:"../statistics/algorithms/graph-stats.js",functionName:"diameterCompute"})}}class rv extends ft{constructor(){super("average_clustering","Mean clustering coefficient across all nodes","graph",{module:"../statistics/algorithms/graph-stats.js",functionName:"averageClusteringCompute"})}}class iv extends ft{constructor(){super("average_shortest_path","Mean distance between all node pairs","graph",{module:"../statistics/algorithms/graph-stats.js",functionName:"averageShortestPathCompute"})}}class sv extends ft{constructor(){super("connected_components","Number of disconnected subgraphs","graph",{module:"../statistics/algorithms/graph-stats.js",functionName:"connectedComponentsCompute"})}}class ov extends ft{constructor(){super("average_degree","Mean number of connections per node","graph",{module:"../statistics/algorithms/graph-stats.js",functionName:"averageDegreeCompute"})}}async function nD(t,e,n,r){const i=Ye(t),s=i.nodes.size,o=i.edges.length;if(s<2)return 0;const a=s*(s-1)/2,l=o/a;return de(r,1),l}async function rD(t,e,n,r){const i=Ye(t),s=Array.from(i.nodes);let o=0;return s.forEach((a,l)=>{const c=Uy(i,a);for(const d of c.values())d>o&&(o=d);l%Math.max(1,Math.floor(s.length/10))===0&&de(r,l/s.length)}),de(r,1),o}async function iD(t,e,n,r){const i=Ye(t),s=Array.from(i.nodes);let o=0;return s.forEach((a,l)=>{o+=jy(i,a),l%100===0&&de(r,l/s.length)}),de(r,1),s.length>0?o/s.length:0}async function sD(t,e,n,r){const i=Ye(t),s=Array.from(i.nodes);let o=0,a=0;return s.forEach((l,c)=>{Uy(i,l).forEach((d,u)=>{u!==l&&(a+=d,o++)}),c%Math.max(1,Math.floor(s.length/10))===0&&de(r,c/s.length)}),de(r,1),o>0?a/o:0}async function oD(t,e,n,r){const i=Ye(t),s=Array.from(i.nodes),o=new Set,a={};let l=0;return s.forEach(c=>{if(!o.has(c)){const d=[c];for(o.add(c),a[c]=l;d.length>0;){const u=d.shift();for(const h of i.getNeighbors(u))o.has(h)||(o.add(h),d.push(h),a[h]=l)}l++}}),de(r,1),{count:l,components:a}}async function aD(t,e,n,r){const i=Ye(t),s=Array.from(i.nodes);let o=0;return s.forEach(a=>{o+=i.getNeighbors(a).length}),de(r,1),s.length>0?o/s.length:0}const m8=Object.freeze(Object.defineProperty({__proto__:null,AverageClusteringStatistic:rv,AverageDegreeStatistic:ov,AverageShortestPathStatistic:iv,ConnectedComponentsStatistic:sv,DensityStatistic:tv,DiameterStatistic:nv,averageClusteringCompute:iD,averageDegreeCompute:aD,averageShortestPathCompute:sD,connectedComponentsCompute:oD,densityCompute:nD,diameterCompute:rD},Symbol.toStringTag,{value:"Module"}));class Ca{constructor(e,n="",r=null){if(new.target===Ca)throw new Error("CommunityAlgorithm is abstract and cannot be instantiated directly");if(!r||!r.module||!r.functionName)throw new Error("computeConfig with module and functionName is required");this.name=e,this.description=n,this.computeConfig=r,this.options={}}async detect(e,n={}){const r=En.serializeGraph(e),i={module:this.computeConfig.module,functionName:this.computeConfig.functionName,args:[r,this.options]};return{...await En.execute(i,n),algorithm:this.name}}getInfo(){return{name:this.name,description:this.description}}}class bs extends Ca{constructor(e={}){super("louvain","Louvain method for community detection using modularity optimization",{module:"../community/algorithms/louvain.js",functionName:"louvainCompute"}),this.options={resolution:e.resolution||1,maxIterations:e.maxIterations||100}}}async function lD(t,e,n){const r=Ye(t),{resolution:i=1,maxIterations:s=100}=e||{},o=Array.from(r.nodes),a=b=>{const E=r.getNeighbors(b);let A=0;return E.forEach(v=>{A+=r.getEdgeWeight(b,v)}),A};let l=0;r.edges.forEach(b=>{l+=b.weight});const c=2*l,d={};o.forEach(b=>{d[b]=b});let u=!0,h=0;for(;u&&h<s;){u=!1,h++;for(const b of o){const E=d[b],A=r.getNeighbors(b),v=new Set;A.forEach(V=>{v.add(d[V])});const S=a(b);let L=E,G=0;v.forEach(V=>{if(V===E)return;const F=cD(r,b,E,V,d,c,i,S,a);F>G&&(G=F,L=V)}),L!==E&&(d[b]=L,u=!0)}if(de(n,Math.min(h/s,.9)),!u)break}const f=Array.from(new Set(Object.values(d))),g={};f.forEach((b,E)=>{g[b]=E});const y={};Object.keys(d).forEach(b=>{y[b]=g[d[b]]});const w=dD(r,y,l,a);return de(n,1),{communities:y,modularity:w,numCommunities:f.length,iterations:h}}function cD(t,e,n,r,i,s,o,a,l){const c=t.getNeighbors(e);let d=0,u=0;c.forEach(y=>{const w=t.getEdgeWeight(e,y);i[y]===r&&(d+=w),i[y]===n&&y!==e&&(u+=w)});const h=Array.from(t.nodes);let f=0,g=0;return h.forEach(y=>{i[y]===r&&(f+=l(y)),i[y]===n&&(g+=l(y))}),d/s-o*(f*a)/(s*s)-(u/s-o*(g*a)/(s*s))}function dD(t,e,n,r){if(n===0)return 0;const i=2*n,s=new Set(Object.values(e));let o=0;return s.forEach(a=>{let l=0,c=0;Object.keys(e).filter(d=>e[d]===a).forEach(d=>{c+=r(d)}),t.edges.forEach(d=>{const u=d.u,h=d.v,f=d.weight;e[u]===a&&e[h]===a&&(l+=f)}),o+=l/i-Math.pow(c/i,2)}),o}const y8=Object.freeze(Object.defineProperty({__proto__:null,LouvainAlgorithm:bs,default:bs,louvainCompute:lD},Symbol.toStringTag,{value:"Module"}));class Sa{constructor(e=null){this.graph=e}setGraph(e){return this.graph=e,this}async detectCommunities(e="louvain",n={}){if(!this.graph)throw new Error("No graph set. Use setGraph() or provide graph in constructor.");let r;if(e instanceof Ca)r=e;else if(typeof e=="string")r=this._createAlgorithmFromName(e,n);else throw new Error("Algorithm must be a CommunityAlgorithm instance or a string name");return await r.detect(this.graph,{onProgress:n.onProgress})}_createAlgorithmFromName(e,n={}){switch(e.toLowerCase()){case"louvain":return new bs(n);default:throw new Error(`Unknown community detection algorithm: ${e}`)}}calculateModularity(e){if(!this.graph)throw new Error("No graph set");const n=this.graph.numberOfEdges();if(n===0)return 0;let r=0;const i=Array.from(this.graph.nodes.keys());for(const s of i)for(const o of i)if(e[s]===e[o]){const a=this.graph.hasEdge(s,o)?this.graph.getEdgeWeight(s,o):0,l=this.graph.degree(s),c=this.graph.degree(o);r+=a-l*c/(2*n)}return r/(2*n)}static getNodesInCommunity(e,n){return Object.keys(e).filter(r=>e[r]===n)}static getCommunityGroups(e){const n={};for(const[r,i]of Object.entries(e))n[i]||(n[i]=[]),n[i].push(r);return n}static graphFromData(e){const n=new xa;for(const r of e.nodes)n.addNode(r.id);for(const r of e.edges)n.addEdge(r.source,r.target,r.weight||1);return n}static async detect(e,n="louvain",r={}){const i=this.graphFromData(e);return await new Sa(i).detectCommunities(n,r)}}const jf={algorithms:[{id:"louvain",name:"Louvain Method",description:"Fast greedy algorithm that optimizes modularity",category:"modularity",complexity:"O(n log n)",bestFor:["General graphs","Large networks","Hierarchical communities"],supportsWeighted:!0,supportsDirected:!1,defaultOptions:{resolution:1,maxIterations:100}}],getAll(){return[...this.algorithms]},get(t){return this.algorithms.find(e=>e.id===t)||null},filter(t){return this.algorithms.filter(t)},getIds(){return this.algorithms.map(t=>t.id)}};class xn{constructor(e,n={},r=null){if(!e)throw new Error("Graph is required for layout computation");if(!r||!r.module||!r.functionName)throw new Error("computeConfig with module and functionName is required");this.graph=e,this.options=n,this.computeConfig=r,this._positions=null}async computePositions(e={}){const n={...this.options,...e},{onProgress:r,timeout:i,...s}=n,o=En.serializeGraph(this.graph),a={module:this.computeConfig.module,functionName:this.computeConfig.functionName,args:[o,s]};return await En.execute(a,{onProgress:r,timeout:i})}async getPositions(e={},n=!1){return(!this._positions||n)&&(this._positions=await this.computePositions(e)),this._positions}async updateLayout(e=1){return this.getPositions({},!0)}reset(){this._positions=null}getNodes(){return this.graph.getNodeList()}getNodeCount(){return this.graph.numberOfNodes()}}class kc extends xn{constructor(e,n={}){super(e,{scale:100,center:{x:0,y:0},seed:null,...n},{module:"../layouts/random.js",functionName:"randomCompute"})}}async function uD(t,e,n){const r=Array.from(t.nodes||[]),{scale:i=1,center:s={x:0,y:0},seed:o=null}=e||{},a={};let l;return o!==null?l=(function(c){return function(){let d=c+=1831565813;return d=Math.imul(d^d>>>15,d|1),d^=d+Math.imul(d^d>>>7,d|61),((d^d>>>14)>>>0)/4294967296}})(o):l=Math.random,r.forEach(c=>{const d=(l()*2-1)*i+s.x,u=(l()*2-1)*i+s.y;a[c]={x:d,y:u}}),de(n,1),a}const v8=Object.freeze(Object.defineProperty({__proto__:null,RandomLayout:kc,default:kc,randomCompute:uD},Symbol.toStringTag,{value:"Module"}));class xc extends xn{constructor(e,n={}){super(e,{scale:100,center:{x:0,y:0},sortBy:null,...n},{module:"../layouts/circular.js",functionName:"circularCompute"})}}async function hD(t,e,n){const r=Ye(t),{scale:i=1,center:s={x:0,y:0},sortBy:o=null}=e||{};let a=Array.from(r.nodes);const l=a.length;if(l===0)return de(n,1),{};if(l===1){const d={[a[0]]:{x:s.x,y:s.y}};return de(n,1),d}o&&typeof o=="function"&&(a=a.sort(o));const c={};return a.forEach((d,u)=>{const h=2*Math.PI*u/l;c[d]={x:Math.cos(h)*i+s.x,y:Math.sin(h)*i+s.y}}),de(n,1),c}const _8=Object.freeze(Object.defineProperty({__proto__:null,CircularLayout:xc,circularCompute:hD,default:xc},Symbol.toStringTag,{value:"Module"}));class Cc extends xn{constructor(e,n={}){super(e,{scale:100,center:{x:0,y:0},resolution:.35,equidistant:!1,...n},{module:"../layouts/spiral.js",functionName:"spiralCompute"})}}function fD(t,e=1){if(t.length===0)return t;let n=1/0,r=-1/0,i=1/0,s=-1/0;for(const[d,u]of t)n=Math.min(n,d),r=Math.max(r,d),i=Math.min(i,u),s=Math.max(s,u);const o=r-n||1,a=s-i||1,l=Math.max(o,a),c=2*e/l;return t.map(([d,u])=>[(d-n-o/2)*c+e,(u-i-a/2)*c+e])}async function pD(t,e,n){const r=Array.from(t.nodes||[]),i=r.length,{scale:s=1,center:o={x:0,y:0},resolution:a=.35,equidistant:l=!1}=e||{};if(i===0)return de(n,1),{};if(i===1){const u={[r[0]]:{x:o.x,y:o.y}};return de(n,1),u}let c=[];if(l){let u=.5,h=a;h+=1/(u*h);for(let f=0;f<i;f++){const g=u*h;h+=1/g,c.push([Math.cos(h)*g,Math.sin(h)*g])}}else for(let u=0;u<i;u++){const h=a*u,f=u;c.push([Math.cos(h)*f,Math.sin(h)*f])}c=fD(c,s);const d={};return r.forEach((u,h)=>{d[u]={x:c[h][0]+o.x,y:c[h][1]+o.y}}),de(n,1),d}const b8=Object.freeze(Object.defineProperty({__proto__:null,SpiralLayout:Cc,default:Cc,spiralCompute:pD},Symbol.toStringTag,{value:"Module"}));class Sc extends xn{constructor(e,n={}){super(e,{scale:100,center:{x:0,y:0},nlist:null,rotate:null,nodeProperties:null,...n},{module:"../layouts/shell.js",functionName:"shellCompute"})}}async function gD(t,e,n){const r=Array.from(t.nodes||[]),i=r.length,{scale:s=1,center:o={x:0,y:0},nlist:a=null,rotate:l=null,nodeProperties:c=null}=e||{};if(i===0)return de(n,1),{};if(i===1){const w={[r[0]]:{x:o.x,y:o.y}};return de(n,1),w}let d;if(a&&Array.isArray(a))d=a;else{let w=new Map;if(c&&c.size>0)r.forEach(E=>{const A=c.get(E),v=A&&typeof A=="object"&&A.degree||0;w.set(E,v)});else if(r.forEach(E=>{w.set(E,0)}),t.edges)for(const E of t.edges){const A=E.u!==void 0?E.u:E.source!==void 0?E.source:E[0],v=E.v!==void 0?E.v:E.target!==void 0?E.target:E[1];w.has(A)&&w.set(A,w.get(A)+1),w.has(v)&&w.set(v,w.get(v)+1)}const b=new Map;r.forEach(E=>{const A=w.get(E)||0;b.has(A)||b.set(A,[]),b.get(A).push(E)}),d=Array.from(b.keys()).sort((E,A)=>A-E).map(E=>b.get(E))}const u=s/d.length;let h;d[0].length===1?h=0:h=u;let f;l===null?f=Math.PI/d.length:f=l;const g={};let y=f;for(const w of d){const b=w.length;if(b===0)continue;const E=[];for(let A=0;A<b;A++)E.push(2*Math.PI*A/b+y);w.forEach((A,v)=>{const S=E[v],L=h*Math.cos(S)+o.x,G=h*Math.sin(S)+o.y;g[A]={x:L,y:G}}),h+=u,y+=f}return de(n,1),g}const w8=Object.freeze(Object.defineProperty({__proto__:null,ShellLayout:Sc,default:Sc,shellCompute:gD},Symbol.toStringTag,{value:"Module"}));class Tc extends xn{constructor(e,n={}){super(e,{scale:100,center:{x:0,y:0},...n},{module:"../layouts/spectral.js",functionName:"spectralCompute"})}}async function mD(t,e,n){const r=Array.from(t.nodes||[]),i=r.length;console.log("[spectralCompute] Starting with",i,"nodes");const{scale:s=1,center:o={x:0,y:0},nodeProperties:a=null}=e||{};if(console.log("[spectralCompute] nodeProperties:",a?`Map with ${a.size} entries`:"null"),i===0)return de(n,1),{};if(i===1){const h={[r[0]]:{x:o.x,y:o.y}};return de(n,1),h}const l={},c=[],d=a||new Map;console.log("[spectralCompute] Processing",i,"nodes for eigenvector extraction");for(const h of r){let f,g;if(d&&d.size>0){const y=d.get(h);if(y&&y.laplacian_x!==void 0&&y.laplacian_y!==void 0)f=y.laplacian_x,g=y.laplacian_y;else throw new Error(`Spectral layout requires eigenvector-laplacian stat. Node "${h}" missing laplacian_x/laplacian_y. Include 'eigenvector-laplacian' in analyze() features.`)}else if(t.nodes&&typeof t.nodes[Symbol.iterator]=="function")throw new Error("Spectral layout requires eigenvector-laplacian stat. Include 'eigenvector-laplacian' in analyze() features.");c.push([f,g])}console.log("[spectralCompute] Extracted",c.length,"coordinates. Sample:",c[0]),de(n,.5),console.log("[spectralCompute] Starting rescaleLayout...");const u=yD(c,s);return console.log("[spectralCompute] Rescaled. Sample:",u[0]),de(n,.99),r.forEach((h,f)=>{l[h]={x:u[f][0]+o.x,y:u[f][1]+o.y}}),console.log("[spectralCompute] Created positions for",Object.keys(l).length,"nodes"),de(n,1),console.log("[spectralCompute] Completed successfully"),l}function yD(t,e=1){if(t.length===0)return t;let n=1/0,r=-1/0,i=1/0,s=-1/0;for(const[d,u]of t)n=Math.min(n,d),r=Math.max(r,d),i=Math.min(i,u),s=Math.max(s,u);const o=r-n||1,a=s-i||1,l=Math.max(o,a),c=2*e/l;return t.map(([d,u])=>[(d-n-o/2)*c+e,(u-i-a/2)*c+e])}const E8=Object.freeze(Object.defineProperty({__proto__:null,SpectralLayout:Tc,default:Tc,spectralCompute:mD},Symbol.toStringTag,{value:"Module"}));function Ds(t,e,n=1,r={x:0,y:0}){if(e.length===0)return t;let i=0,s=0;e.forEach(u=>{i+=t[u].x,s+=t[u].y});const o=i/e.length,a=s/e.length,l={};e.forEach(u=>{l[u]={x:t[u].x-o,y:t[u].y-a}});let c=0;e.forEach(u=>{const h=Math.abs(l[u].x),f=Math.abs(l[u].y);c=Math.max(c,h,f)});const d={};if(c>0){const u=n/c;e.forEach(h=>{d[h]={x:l[h].x*u+r.x,y:l[h].y*u+r.y}})}else e.forEach(u=>{d[u]={x:r.x,y:r.y}});return d}class Rc extends xn{constructor(e,n={}){super(e,{iterations:50,k:null,scale:1,center:{x:0,y:0},initialPositions:null,threshold:1e-4,...n},{module:"../layouts/force-directed.js",functionName:"forceDirectedCompute"})}}async function vD(t,e,n){const r=Ye(t),{iterations:i=50,k:s=null,scale:o=1,center:a={x:0,y:0},initialPositions:l=null,threshold:c=1e-4}=e||{},d=Array.from(r.nodes),u=d.length;if(u===0)return de(n,1),{};if(u===1){const L={[d[0]]:{x:a.x,y:a.y}};return de(n,1),L}let h={};l?h={...l}:d.forEach(L=>{h[L]={x:Math.random(),y:Math.random()}});const f=s!==null?s:Math.sqrt(1/u);let g=1/0,y=-1/0,w=1/0,b=-1/0;d.forEach(L=>{const G=h[L];g=Math.min(g,G.x),y=Math.max(y,G.x),w=Math.min(w,G.y),b=Math.max(b,G.y)});let E=Math.max(y-g,b-w)*.1;const A=E/(i+1),v=new Map;d.forEach(L=>{const G=new Set(r.getNeighbors(L));v.set(L,G)});for(let L=0;L<i;L++){const G={};d.forEach(F=>{G[F]={x:0,y:0}}),d.forEach(F=>{const $=h[F];let H=0,z=0;d.forEach(N=>{if(N!==F){const k=h[N],I=$.x-k.x,C=$.y-k.y;let x=Math.sqrt(I*I+C*C);x<.01&&(x=.01);const O=v.get(F).has(N),X=f*f/(x*x),re=O?x/f:0,fe=X-re;H+=I/x*fe,z+=C/x*fe}}),G[F]={x:H,y:z}});let V=0;if(d.forEach(F=>{const $=G[F],H=Math.sqrt($.x*$.x+$.y*$.y);if(H>0){const z=Math.max(H,.01),N=E/z;h[F].x+=$.x*N,h[F].y+=$.y*N,V+=H}}),E-=A,V/u<c){de(n,1);break}L%10===0&&de(n,L/i)}const S=Ds(h,d,o,a);return de(n,1),S}const A8=Object.freeze(Object.defineProperty({__proto__:null,ForceDirectedLayout:Rc,default:Rc,forceDirectedCompute:vD},Symbol.toStringTag,{value:"Module"}));class Nc extends xn{constructor(e,n={}){super(e,{iterations:1e3,scale:1,center:{x:0,y:0},initialPositions:null,threshold:1e-4,K:null,...n},{module:"../layouts/kamada-kawai.js",functionName:"kamadaKawaiCompute"})}}async function _D(t,e,n){console.log("[Kamada-Kawai] Received graphData:",{hasNodes:"nodes"in t,nodesType:typeof t.nodes,nodesIsArray:Array.isArray(t.nodes),hasEdges:"edges"in t,edgesType:typeof t.edges,edgesIsArray:Array.isArray(t.edges)});const r=Ye(t);console.log("[Kamada-Kawai] After reconstructGraph, graph.nodes:",{type:typeof r.nodes,isSet:r.nodes instanceof Set,size:r.nodes?.size||"N/A"});const{iterations:i=100,scale:s=1,center:o={x:0,y:0},initialPositions:a=null,threshold:l=1e-4,K:c=null}=e||{},d=Array.from(r.nodes),u=d.length;if(console.log("[Kamada-Kawai] Nodes array:",{length:d.length,isArray:Array.isArray(d),sample:d.slice(0,3)}),u===0)return de(n,1),{};if(u===1){const k={[d[0]]:{x:o.x,y:o.y}};return de(n,1),k}de(n,.1),console.log("[Kamada-Kawai] About to compute all-pairs shortest paths:",{nodesLength:d.length,nodesIsArray:Array.isArray(d),nodesType:typeof d});let h;try{h=bD(r,d),console.log("[Kamada-Kawai] All-pairs shortest paths computed successfully");let k=!1,I=!1,C=0,x=0;for(let O=0;O<h.length;O++)for(let X=0;X<h[O].length;X++)isFinite(h[O][X])||(k=h[O][X]===1/0,I=isNaN(h[O][X]),k&&C++,I&&x++);(C>0||x>0)&&console.warn("[Kamada-Kawai] Distances contain problematic values:",{infinityCount:C,nanCount:x,totalDistances:h.length*h[0].length,sample:h[0].slice(0,5)})}catch(k){throw console.error("[Kamada-Kawai] Error in computeAllPairsShortestPaths:",k.message,k.stack),k}de(n,.3),console.log("[Kamada-Kawai] About to initialize positions");let f;try{f=wD(d,a),console.log("[Kamada-Kawai] Positions initialized successfully, pos:",{type:typeof f,isArray:Array.isArray(f),length:f?.length||"N/A"})}catch(k){throw console.error("[Kamada-Kawai] Error in initializePositions:",k.message,k.stack),k}const g=h.flat().filter(k=>isFinite(k)&&k>0);g.length===0&&console.warn("[Kamada-Kawai] All distances are placeholder (disconnected)!");const y=g.length>0?g.reduce((k,I)=>Math.max(k,I),0):1,w=Math.sqrt(u),b=w/y,E=c!==null?c:u;console.log("[Kamada-Kawai] Distance matrix stats:",{totalPairs:h.flat().length,finitePairs:g.length,infinitePairs:h.flat().length-g.length,max_dij:y,L0:w,L:b,kkconst:E,isKvalFinite:isFinite(E)&&isFinite(b),avgDij:g.reduce((k,I)=>k+I,0)/g.length}),de(n,.4);const A=Array(u).fill(null).map(()=>Array(u).fill(0)),v=Array(u).fill(null).map(()=>Array(u).fill(0));for(let k=0;k<u;k++)for(let I=0;I<u;I++){if(k===I)continue;const C=h[k][I];A[k][I]=E/(C*C),v[k][I]=b*C}if(u>1){const k=Math.sqrt(Math.pow(f[0][0]-f[1][0],2)+Math.pow(f[0][1]-f[1][1],2));console.log("[Kamada-Kawai] Sample spring values:",{"graph_dist[0,1]":h[0][1],"spring_const_kij[0,1]":A[0][1].toExponential(4),"desired_dist_lij[0,1]":v[0][1].toFixed(4),initial_euclidean_dist:k.toFixed(4),stress_ratio:(k/v[0][1]).toFixed(4),force:(A[0][1]*Math.abs(k-v[0][1])).toExponential(4)})}const S=Array(u).fill(0),L=Array(u).fill(0);for(let k=0;k<u;k++)for(let I=0;I<u;I++){if(I===k)continue;const C=f[k][0]-f[I][0],x=f[k][1]-f[I][1],O=Math.sqrt(C*C+x*x);O!==0&&(S[k]+=A[k][I]*(C-v[k][I]*C/O),L[k]+=A[k][I]*(x-v[k][I]*x/O))}const G=S.map((k,I)=>Math.sqrt(k*k+L[I]*L[I])),V=Math.max(...G),F=G.reduce((k,I)=>k+I,0)/u;console.log("[Kamada-Kawai] Initial gradient stats:",{maxEnergy:V.toFixed(4),avgEnergy:F.toFixed(4),threshold:Math.sqrt(l).toFixed(6)});for(let k=0;k<i;k++){let I=0,C=-1;for(let U=0;U<u;U++){const ee=S[U]*S[U]+L[U]*L[U];ee>C&&(I=U,C=ee)}if(C<l){console.log(`[Kamada-Kawai] Converged at iteration ${k}/${i} with max_delta ${Math.sqrt(C).toFixed(6)} (threshold: ${Math.sqrt(l).toFixed(6)})`);break}de(n,.4+.6*(k+1)/i),(k%500===0||k<5||k===i-1)&&console.log(`[Kamada-Kawai] Iteration ${k}/${i}: max_delta = ${Math.sqrt(C).toFixed(6)}, node ${I}`);const x=f[I][0],O=f[I][1];let X=0,re=0,fe=0;for(let U=0;U<u;U++){if(U===I)continue;const ee=x-f[U][0],ce=O-f[U][1],T=Math.sqrt(ee*ee+ce*ce);if(T===0)continue;const D=T*(ee*ee+ce*ce);X+=A[I][U]*(1-v[I][U]*ce*ce/D),re+=A[I][U]*v[I][U]*ee*ce/D,fe+=A[I][U]*(1-v[I][U]*ee*ee/D)}let me=0,W=0;const ve=1e-13,Ee=S[I],De=L[I];if(Ee*Ee+De*De>=ve*ve){const U=fe*X-re*re;Math.abs(U)>1e-10?(W=(re*Ee-X*De)/U,me=(re*De-fe*Ee)/U):k<5&&console.warn(`[Kamada-Kawai] Iteration ${k}: Singular matrix (det=${U.toExponential(2)}) for node ${I}`)}else k<5&&console.warn(`[Kamada-Kawai] Iteration ${k}: Gradient too small for node ${I}`);k<3&&I===0&&console.log(`[Kamada-Kawai] Iteration ${k}, node ${I}:`,{A:X.toFixed(4),B:re.toFixed(4),C:fe.toFixed(4),det:(fe*X-re*re).toExponential(4),myD1:Ee.toFixed(4),myD2:De.toFixed(4),delta_x:me.toFixed(6),delta_y:W.toFixed(6),old_pos:[x.toFixed(2),O.toFixed(2)]});const q=x+me,J=O+W;S[I]=0,L[I]=0;for(let U=0;U<u;U++){if(U===I)continue;const ee=x-f[U][0],ce=O-f[U][1],T=Math.sqrt(ee*ee+ce*ce),D=q-f[U][0],P=J-f[U][1],B=Math.sqrt(D*D+P*P);T===0||B===0||(S[U]-=A[I][U]*(-ee+v[I][U]*ee/T),L[U]-=A[I][U]*(-ce+v[I][U]*ce/T),S[U]+=A[I][U]*(-D+v[I][U]*D/B),L[U]+=A[I][U]*(-P+v[I][U]*P/B),S[I]+=A[I][U]*(D-v[I][U]*D/B),L[I]+=A[I][U]*(P-v[I][U]*P/B))}f[I][0]=q,f[I][1]=J}de(n,.95),console.log("[Kamada-Kawai] Before rescaling - preparing positions");const $={};d.forEach((k,I)=>{$[k]={x:f[I][0],y:f[I][1]}});const H=d[0];console.log("[Kamada-Kawai] Sample positions BEFORE rescaling:",{sample:H,value:$[H],allCount:Object.keys($).length,minMax:(()=>{let k=1/0,I=-1/0,C=1/0,x=-1/0;return Object.values($).forEach(O=>{k=Math.min(k,O.x),I=Math.max(I,O.x),C=Math.min(C,O.y),x=Math.max(x,O.y)}),{minX:k,maxX:I,minY:C,maxY:x,rangeX:I-k,rangeY:x-C}})()}),console.log("[Kamada-Kawai] Calling rescaleLayout with correct signature, scale:",s,"center:",o);const z=Ds($,d,s,o);console.log("[Kamada-Kawai] rescaleLayout completed successfully"),console.log("[Kamada-Kawai] Sample positions AFTER rescaling:",{sample:H,value:z[H],minMax:(()=>{let k=1/0,I=-1/0,C=1/0,x=-1/0;return Object.values(z).forEach(O=>{k=Math.min(k,O.x),I=Math.max(I,O.x),C=Math.min(C,O.y),x=Math.max(x,O.y)}),{minX:k,maxX:I,minY:C,maxY:x,rangeX:I-k,rangeY:x-C}})()});const N={};console.log("[Kamada-Kawai] Creating final positions dictionary");try{Object.entries(z).forEach(([C,x])=>{N[C]={x:x.x,y:x.y}}),console.log("[Kamada-Kawai] Final positions dictionary created successfully, count:",Object.keys(N).length);const k=d.slice(0,3),I={};k.forEach(C=>{I[C]=N[C]}),console.log("[Kamada-Kawai] Sample final positions:",I)}catch(k){throw console.error("[Kamada-Kawai] Error creating positions dictionary:",k.message),console.error("  rescaledDict:",z),k}return de(n,1),N}function bD(t,e){const n=e.length,r=Array(n).fill(null).map(()=>Array(n).fill(1/0)),i={};e.forEach((o,a)=>{i[o]=a,r[a][a]=0});for(let o=0;o<n;o++){const a=e[o],l=[[a,0]],c=new Set([a]);for(;l.length>0;){const[d,u]=l.shift(),h=i[d];h!==void 0&&(r[o][h]=u);const f=t.getNeighbors(d)||[];for(const g of f)c.has(g)||(c.add(g),l.push([g,u+1]))}}let s=0;for(let o=0;o<n;o++)for(let a=o+1;a<n;a++)isFinite(r[o][a])&&r[o][a]>s&&(s=r[o][a]);for(let o=0;o<n;o++)for(let a=0;a<n;a++)r[o][a]>s&&(r[o][a]=s);return r}function wD(t,e){const n=t.length,r=[];if(e&&Object.keys(e).length>0)t.forEach(i=>{const s=e[i];s?r.push([s.x||0,s.y||0]):r.push([Math.random(),Math.random()])});else{const i=Math.sqrt(n);if(n>100){const s=i*3;console.log(`[Kamada-Kawai] Random initialization: spread=${s.toFixed(2)}, L0=${i.toFixed(2)}`);for(let o=0;o<n;o++){const a=(Math.random()-.5)*s,l=(Math.random()-.5)*s;r.push([a,l])}}else{const s=2*Math.PI/n,o=i*2;console.log(`[Kamada-Kawai] Circular initialization: radius=${o.toFixed(2)}, L0=${i.toFixed(2)}`);for(let a=0;a<n;a++){const l=o*Math.cos(a*s),c=o*Math.sin(a*s);r.push([l,c])}}}return r}const k8=Object.freeze(Object.defineProperty({__proto__:null,KamadaKawaiLayout:Nc,default:Nc,kamadaKawaiCompute:_D},Symbol.toStringTag,{value:"Module"}));class Lc extends xn{constructor(e,n={}){super(e,{partition:null,align:"vertical",scale:1,aspectRatio:4/3,center:{x:0,y:0},...n},{module:"../layouts/bipartite.js",functionName:"bipartiteCompute"})}}async function ED(t,e,n){const r=Ye(t),{partition:i=null,align:s="vertical",scale:o=1,aspectRatio:a=4/3,center:l={x:0,y:0}}=e||{},c=Array.from(r.nodes),d=c.length;if(d===0)return de(n,1),{};if(d===1){const $={[c[0]]:{x:l.x,y:l.y}};return de(n,1),$}de(n,.3);let u,h;i&&i.length>0?(u=new Set(i),h=new Set(c.filter($=>!u.has($)))):(u=new Set,h=new Set,c.forEach(($,H)=>{H%2===0?u.add($):h.add($)})),de(n,.5);const f=Array.from(u),g=Array.from(h),y=[],w=f.length-1||1,b=g.length-1||1,E=a*2,A=2,v=E/2,S=A/2;f.forEach(($,H)=>{const z=-v,N=w>0?H*A/w-S:0;y.push([z,N])}),g.forEach(($,H)=>{const z=v,N=b>0?H*A/b-S:0;y.push([z,N])}),de(n,.7);const L=[...f,...g],G={};L.forEach(($,H)=>{G[$]={x:y[H][0],y:y[H][1]}});const V=Ds(G,L,o,l);de(n,.9);const F={};return L.forEach($=>{F[$]=V[$]}),s==="horizontal"&&Object.keys(F).forEach($=>{const H=F[$].x;F[$].x=F[$].y,F[$].y=H}),de(n,1),F}const x8=Object.freeze(Object.defineProperty({__proto__:null,BipartiteLayout:Lc,bipartiteCompute:ED,default:Lc},Symbol.toStringTag,{value:"Module"}));class Ic extends xn{constructor(e,n={}){super(e,{subsets:null,align:"vertical",scale:1,center:{x:0,y:0},...n},{module:"../layouts/multipartite.js",functionName:"multipartiteCompute"})}}async function AD(t,e,n){const r=Ye(t),{subsets:i=null,align:s="vertical",scale:o=1,center:a={x:0,y:0}}=e||{},l=Array.from(r.nodes),c=l.length;if(c===0)return de(n,1),{};if(c===1){const E={[l[0]]:{x:a.x,y:a.y}};return de(n,1),E}de(n,.3);let d;if(i&&Object.keys(i).length>0)d=Object.keys(i).sort((E,A)=>{const v=parseInt(E),S=parseInt(A);return isNaN(v)?1:isNaN(S)?-1:v-S}).map(E=>i[E]);else{const E=new Map;l.forEach((A,v)=>{const S=v%3;E.has(S)||E.set(S,[]),E.get(S).push(A)}),d=Array.from(E.values())}de(n,.5);const u=[],h={},f=d.length,g=f*2-1;d.forEach((E,A)=>{const v=E.length-1||1,S=(A*2-g/2)/(f-1||1);E.forEach((L,G)=>{const V=v>0?2*G/v-1:0;u.push([S,V])})}),de(n,.7);const y=[];d.forEach(E=>{E.forEach(A=>{y.push(A)})});const w={};y.forEach((E,A)=>{w[E]={x:u[A][0],y:u[A][1]}});const b=Ds(w,y,o,a);return de(n,.9),y.forEach(E=>{h[E]=b[E]}),s==="horizontal"&&Object.keys(h).forEach(E=>{const A=h[E].x;h[E].x=h[E].y,h[E].y=A}),de(n,1),h}const C8=Object.freeze(Object.defineProperty({__proto__:null,MultipartiteLayout:Ic,default:Ic,multipartiteCompute:AD},Symbol.toStringTag,{value:"Module"}));class Dc extends xn{constructor(e,n={}){super(e,{startNode:null,align:"vertical",scale:1,center:{x:0,y:0},...n},{module:"../layouts/bfs.js",functionName:"bfsCompute"})}}async function kD(t,e,n){const r=Ye(t),{startNode:i=null,align:s="vertical",scale:o=1,center:a={x:0,y:0}}=e||{},l=Array.from(r.nodes),c=l.length;if(c===0)return de(n,1),{};if(c===1){const A={[l[0]]:{x:a.x,y:a.y}};return de(n,1),A}de(n,.2);let d=i;(!d||!l.includes(d))&&(d=l[0]),de(n,.3);const u=xD(r,d);de(n,.6);const h=new Set;if(u.forEach(A=>{A.forEach(v=>h.add(v))}),h.size!==c){const A=l.filter(v=>!h.has(v));A.length>0&&u.push(A)}de(n,.7);const f=[],g=u.length;Math.max(...u.map(A=>A.length)),u.forEach((A,v)=>{const S=g>1?2*v/(g-1)-1:0,L=A.length-1||1;A.forEach((G,V)=>{const F=L>0?2*V/L-1:0;f.push([S,F])})}),de(n,.85);const y=[];u.forEach(A=>{A.forEach(v=>{y.push(v)})});const w={};y.forEach((A,v)=>{w[A]={x:f[v][0],y:f[v][1]}});const b=Ds(w,y,o,a);de(n,.95);const E={};return y.forEach(A=>{E[A]=b[A]}),s==="horizontal"&&Object.keys(E).forEach(A=>{const v=E[A].x;E[A].x=E[A].y,E[A].y=v}),de(n,1),E}function xD(t,e,n){const r=[],i=new Set,s=[e];let o=[];for(i.add(e);s.length>0;){const u=s.shift();o.push(u);const h=(t.getNeighbors(u)||[]).filter(f=>!i.has(f));h.forEach(f=>{i.add(f),s.push(f)}),(s.length===0||h.length>0)&&o.length>0&&(r.push([...o]),o=[])}r.length=0,o=[];const a=new Map,l=[e];let c=0;a.set(e,0);let d=0;for(;c<l.length;){const u=l[c],h=a.get(u);h>d&&(o.length>0&&(r.push([...o]),o=[]),d=h),o.push(u),(t.getNeighbors(u)||[]).forEach(f=>{a.has(f)||(a.set(f,h+1),l.push(f))}),c++}return o.length>0&&r.push([...o]),r}const S8=Object.freeze(Object.defineProperty({__proto__:null,BFSLayout:Dc,bfsCompute:kD,default:Dc},Symbol.toStringTag,{value:"Module"})),CD={layouts:[{id:"none",name:"None (D3 Physics)",description:"D3's built-in force-directed physics simulation",category:"physics",complexity:"O(iterations)",bestFor:["General graphs","Interactive exploration"],requiresStats:!1},{id:"random",name:"Random",description:"Random node positioning",category:"simple",complexity:"O(n)",bestFor:["Testing","Initial visualization"],requiresStats:!1},{id:"circular",name:"Circular",description:"Nodes arranged in a circle",category:"simple",complexity:"O(n)",bestFor:["Symmetric graphs","Ring topologies"],requiresStats:!1},{id:"spiral",name:"Spiral",description:"Archimedean spiral arrangement",category:"simple",complexity:"O(n)",bestFor:["Linear structures","Sequences"],requiresStats:!1},{id:"shell",name:"Shell",description:"Concentric circles by degree",category:"simple",complexity:"O(n)",bestFor:["Star-like graphs","Hub structures"],requiresStats:!0},{id:"spectral",name:"Spectral",description:"Laplacian eigenvector layout",category:"spectral",complexity:"O(n)",bestFor:["Community detection visualization","Graph topology"],requiresStats:!0,requiredStat:"eigenvector-laplacian"},{id:"force-directed",name:"Force-Directed",description:"Spring-electrical model (Fruchterman-Reingold)",category:"physics",complexity:"O(iterations  n)",bestFor:["General graphs","Complex networks"],requiresStats:!1},{id:"kamada-kawai",name:"Kamada-Kawai",description:"Energy minimization based on shortest paths",category:"energy",complexity:"O(n + iterations  n)",bestFor:["Small-medium graphs","Trees","Planar graphs"],requiresStats:!1},{id:"bipartite",name:"Bipartite",description:"Two-line layout for bipartite graphs",category:"hierarchical",complexity:"O(n)",bestFor:["Bipartite graphs","Two-level hierarchies"],requiresStats:!1},{id:"multipartite",name:"Multipartite",description:"Multi-layer layout for hierarchical structures",category:"hierarchical",complexity:"O(n)",bestFor:["DAGs","Organizational hierarchies"],requiresStats:!1},{id:"bfs",name:"BFS Layout",description:"Layer-by-layer breadth-first search",category:"hierarchical",complexity:"O(n + m)",bestFor:["Trees","Network exploration"],requiresStats:!1}],getAll(){return[...this.layouts]},get(t){return this.layouts.find(e=>e.id===t)||null},filter(t){return this.layouts.filter(t)},byCategory(t){return this.layouts.filter(e=>e.category===t)},withoutStatRequirements(){return this.layouts.filter(t=>!t.requiresStats)},exists(t){return this.layouts.some(e=>e.id===t)}},SD=Ze({prefix:"Adapter",level:"info"});class Md{static fromFormat(e,n={}){throw new Error("Adapter.fromFormat() must be implemented by subclass")}static toFormat(e,n={}){throw new Error("Adapter.toFormat() must be implemented by subclass")}static validateGraphData(e){if(!e||typeof e!="object")throw new Error("GraphData must be an object");if(!Array.isArray(e.nodes))throw new Error("GraphData.nodes must be an array");if(!Array.isArray(e.edges))throw new Error("GraphData.edges must be an array");for(const n of e.nodes)if(!n.id&&n.id!==0)throw new Error("All nodes must have an id property");for(const n of e.edges){if(!n.source&&n.source!==0)throw new Error("All edges must have a source property");if(!n.target&&n.target!==0)throw new Error("All edges must have a target property")}return!0}static normalizeIds(e){return{nodes:e.nodes.map(n=>({...n,id:String(n.id)})),edges:e.edges.map(n=>({...n,source:String(n.source),target:String(n.target)}))}}static getNodeIdSet(e){return new Set(e.map(n=>String(n.id)))}static filterInvalidEdges(e,n=!0){const r=this.getNodeIdSet(e.nodes),i=[],s=[];for(const o of e.edges){const a=String(o.source),l=String(o.target);r.has(a)&&r.has(l)?i.push(o):s.push(o)}return n&&s.length>0&&SD.warn("Filtered out edges referencing non-existent nodes",{invalidEdgeCount:s.length,totalEdges:e.edges.length}),{nodes:e.nodes,edges:i}}}const Hf=Ze({prefix:"CSVAdapter",level:"info"});class Pc extends Md{static parseCSV(e,n=","){const r=[],i=e.trim().split(`
`);for(const s of i){const o=[];let a="",l=!1;for(let c=0;c<s.length;c++){const d=s[c];d==='"'?l=!l:d===n&&!l?(o.push(a.trim()),a=""):a+=d}o.push(a.trim()),r.push(o)}return r}static fromEdgeList(e,n={}){const{header:r=!0,delimiter:i=",",weighted:s=!0}=n,o=this.parseCSV(e,i),a=r?o.slice(1):o,l=new Set,c=[];for(const d of a){if(d.length<2)continue;const u=d[0],h=d[1],f=s&&d[2]?parseFloat(d[2]):1;l.add(u),l.add(h),c.push({source:u,target:h,weight:isNaN(f)?1:f})}return{nodes:Array.from(l).map(d=>({id:d,group:1})),edges:c}}static fromNodes(e,n={}){const{header:r=!0,delimiter:i=","}=n,s=this.parseCSV(e,i);if(s.length===0)return[];const o=r?s[0]:["id","group","label"];return(r?s.slice(1):s).map(a=>{const l={};for(let c=0;c<o.length;c++){const d=o[c],u=a[c];d==="group"&&u?l[d]=parseInt(u,10):!isNaN(u)&&u!==""?l[d]=parseFloat(u):l[d]=u}return l})}static fromFormat(e,n=null,r={}){const{nodes:i,edges:s}=this.fromEdgeList(e,r);if(n){const a=this.fromNodes(n,r),l=new Map(a.map(d=>[String(d.id),d])),c={nodes:i.map(d=>{const u=l.get(String(d.id));return u?{...d,...u}:d}),edges:s};return this.filterInvalidEdges(c)}const o={nodes:i,edges:s};return this.filterInvalidEdges(o)}static async loadFromURL(e,n=null,r={}){try{const i=await fetch(e);if(!i.ok)throw new Error(`Failed to fetch edges: ${i.statusText}`);const s=await i.text();let o=null;if(n){const a=await fetch(n);a.ok&&(o=await a.text())}return this.fromFormat(s,o,r)}catch(i){throw Hf.error("Error loading CSV",{edgeURL:e,nodeURL:n,error:i.message,stack:i.stack}),i}}static async loadFromFiles(e,n=null,r={}){try{const i=await e.text();let s=null;return n&&(s=await n.text()),this.fromFormat(i,s,r)}catch(i){throw Hf.error("Error reading file",{edgeFileName:e?.name,nodeFileName:n?.name,error:i.message,stack:i.stack}),i}}static toEdgeList(e,n={}){const{header:r=!0,delimiter:i=","}=n,s=[];r&&s.push(["source","target","weight"].join(i));for(const o of e.edges){const a=o.source?.id||o.source,l=o.target?.id||o.target,c=o.weight||1;s.push([a,l,c].join(i))}return s.join(`
`)}static toNodes(e,n={}){const{header:r=!0,delimiter:i=","}=n,{nodes:s}=e;if(s.length===0)return"";const o=[],a=new Set;s.forEach(c=>{Object.keys(c).forEach(d=>a.add(d))});const l=Array.from(a);r&&o.push(l.join(i));for(const c of s){const d=l.map(u=>{const h=c[u];return typeof h=="string"&&(h.includes(i)||h.includes('"'))?`"${h.replace(/"/g,'""')}"`:h??""});o.push(d.join(i))}return o.join(`
`)}static toFormat(e,n={}){return this.validateGraphData(e),{edges:this.toEdgeList(e,n),nodes:this.toNodes(e,n)}}}const TD=Ze({prefix:"JSONAdapter",level:"info"});class Gc extends Md{static fromD3(e){if(!e||!e.nodes)throw new Error("Invalid D3 data: must have nodes array");const n=e.nodes.map(s=>({...s,id:String(s.id)})),r=(e.links||[]).map(s=>({...s,source:String(s.source?.id||s.source),target:String(s.target?.id||s.target),weight:s.weight||s.value||1})),i={nodes:n,edges:r};return this.filterInvalidEdges(i)}static fromCytoscape(e){if(!e||!Array.isArray(e.nodes))throw new Error("Invalid Cytoscape data: must have nodes array");const n=e.nodes.map(s=>({id:String(s.data.id),...s.data})),r=(e.edges||[]).map(s=>({source:String(s.data.source),target:String(s.data.target),weight:s.data.weight||1,...s.data})),i={nodes:n,edges:r};return this.filterInvalidEdges(i)}static fromFormat(e){if(!e||typeof e!="object")throw new Error("Invalid JSON data");if(e.nodes&&e.edges)return this.normalizeIds(e);if(e.nodes&&e.links)return this.fromD3(e);if(Array.isArray(e.nodes)&&e.nodes[0]?.data)return this.fromCytoscape(e);if(e.nodes&&(e.links||e.edges))return this.fromD3({nodes:e.nodes,links:e.links||e.edges});throw new Error("Unknown JSON format - cannot auto-detect")}static toD3(e){return this.validateGraphData(e),{nodes:e.nodes.map(n=>({...n})),links:e.edges.map(n=>({source:n.source,target:n.target,value:n.weight,...n}))}}static toCytoscape(e){return this.validateGraphData(e),{nodes:e.nodes.map(n=>({data:{...n}})),edges:e.edges.map((n,r)=>({data:{id:`e${r}`,source:n.source,target:n.target,weight:n.weight||1,...n}}))}}static toFormat(e,n={}){const{format:r="standard",pretty:i=!1}=n;let s;switch(r){case"d3":s=this.toD3(e);break;case"cytoscape":s=this.toCytoscape(e);break;case"standard":default:this.validateGraphData(e),s=e}return JSON.stringify(s,null,i?2:0)}static async loadFromURL(e){try{const n=await fetch(e);if(!n.ok)throw new Error(`Failed to fetch: ${n.statusText}`);const r=await n.json();return this.fromFormat(r)}catch(n){throw TD.error("Error loading JSON",{url:e,error:n.message,stack:n.stack}),n}}}class RD extends Md{static fromNodeLink(e){if(!e||!Array.isArray(e.nodes))throw new Error("Invalid NetworkX node-link data: must have nodes array");const n=e.nodes.map(s=>({id:String(s.id),...s})),r=(e.links||[]).map(s=>({source:String(s.source),target:String(s.target),weight:s.weight||1,...s})),i={nodes:n,edges:r};return this.filterInvalidEdges(i)}static fromAdjacency(e){if(!Array.isArray(e))throw new Error("Invalid NetworkX adjacency data: must be array");const n=[],r=[],i=new Set;for(const o of e){const a=String(o.id);if(n.push({id:a,...o}),o.adjacency&&Array.isArray(o.adjacency))for(const l of o.adjacency){const c=String(l.id),d=`${a}-${c}`,u=`${c}-${a}`;!i.has(d)&&!i.has(u)&&(r.push({source:a,target:c,weight:l.weight||1,...l}),i.add(d))}}const s={nodes:n,edges:r};return this.filterInvalidEdges(s)}static fromFormat(e){if(!e||typeof e!="object")throw new Error("Invalid NetworkX data");if(e.nodes&&Array.isArray(e.nodes)&&(e.links||e.edges))return this.fromNodeLink({...e,links:e.links||e.edges});if(Array.isArray(e)&&e[0]?.adjacency)return this.fromAdjacency(e);throw new Error("Unknown NetworkX format")}static toNodeLink(e,n={}){this.validateGraphData(e);const{directed:r=!1,multigraph:i=!1}=n;return{directed:r,multigraph:i,graph:{},nodes:e.nodes.map(s=>({...s})),links:e.edges.map(s=>({source:s.source,target:s.target,weight:s.weight||1,...s}))}}static toAdjacency(e){this.validateGraphData(e);const n=new Map;for(const r of e.nodes)n.set(String(r.id),{...r,adjacency:[]});for(const r of e.edges){const i=String(r.source),s=String(r.target),o=n.get(i);o&&o.adjacency.push({id:s,weight:r.weight||1,...r});const a=n.get(s);a&&i!==s&&a.adjacency.push({id:i,weight:r.weight||1,...r})}return Array.from(n.values())}static toFormat(e,n={}){const{format:r="node-link"}=n;switch(r){case"adjacency":return this.toAdjacency(e);case"node-link":default:return this.toNodeLink(e,n)}}}class Qe{static FEATURES={EIGENVECTOR:"eigenvector",EIGENVECTOR_LAPLACIAN:"eigenvector-laplacian",MODULARITY:"modularity",BETWEENNESS:"betweenness",CLUSTERING:"clustering",CLIQUES:"cliques",DEGREE:"degree",CLOSENESS:"closeness",EGO_DENSITY:"ego-density",PAGERANK:"pagerank",ALL:["degree","betweenness","clustering","eigenvector","eigenvector-laplacian","cliques","closeness","ego-density","pagerank"]};static GRAPH_STATS={DENSITY:"density",DIAMETER:"diameter",AVERAGE_CLUSTERING:"average_clustering",AVERAGE_SHORTEST_PATH:"average_shortest_path",CONNECTED_COMPONENTS:"connected_components",AVERAGE_DEGREE:"average_degree",ALL:["density","diameter","average_clustering","average_shortest_path","connected_components","average_degree"]};static COMMUNITY_DETECTION={LOUVAIN:"louvain",ALL:["louvain"]};constructor(e={}){this.options={verbose:e.verbose!==void 0?e.verbose:!0,maxWorkers:e.maxWorkers,taskTimeout:e.taskTimeout||6e4,workerScript:e.workerScript,enableAffinity:e.enableAffinity!==void 0?e.enableAffinity:!0,affinityCacheLimit:e.affinityCacheLimit||50,maxIter:e.maxIter,tolerance:e.tolerance,...e},this.log=Ze({prefix:"NetworkStats",level:this.options.verbose?"debug":"info"}),En.initialize({maxWorkers:this.options.maxWorkers,taskTimeout:this.options.taskTimeout,verbose:this.options.verbose,workerScript:this.options.workerScript,enableAffinity:this.options.enableAffinity,affinityCacheLimit:this.options.affinityCacheLimit}).catch(n=>{this.log.error("Failed to initialize workers:",n)}),this.statisticClasses={[Qe.FEATURES.DEGREE]:Wy,[Qe.FEATURES.BETWEENNESS]:Xy,[Qe.FEATURES.CLUSTERING]:Zy,[Qe.FEATURES.EIGENVECTOR]:Yy,[Qe.FEATURES.EIGENVECTOR_LAPLACIAN]:Qy,[Qe.FEATURES.CLIQUES]:ev,[Qe.FEATURES.CLOSENESS]:qy,[Qe.FEATURES.EGO_DENSITY]:Ky,[Qe.FEATURES.PAGERANK]:Jy,[Qe.FEATURES.MODULARITY]:"modularity"},this.graphStatClasses={[Qe.GRAPH_STATS.DENSITY]:tv,[Qe.GRAPH_STATS.DIAMETER]:nv,[Qe.GRAPH_STATS.AVERAGE_CLUSTERING]:rv,[Qe.GRAPH_STATS.AVERAGE_SHORTEST_PATH]:iv,[Qe.GRAPH_STATS.CONNECTED_COMPONENTS]:sv,[Qe.GRAPH_STATS.AVERAGE_DEGREE]:ov}}async analyze(e,n,r={}){this.log.time("networkAnalysis"),this.log.info(`Analyzing network with ${e.length} edges`),n=n||Qe.FEATURES.ALL,typeof n=="string"&&(n=[n]);const{graph:i,nodes:s}=this._prepareNetwork(e);this.log.info(`Graph: ${s.length} nodes, ${i.edges.length} edges`);const o=await this._calculateNodeStats(i,s,n,r);if(r.includeGraphStats){const a=await this._calculateGraphStats(i,r.graphStats,r);return this.log.timeEnd("networkAnalysis"),{nodes:o,graph:a}}return this.log.timeEnd("networkAnalysis"),o}async _calculateNodeStats(e,n,r,i){const s={};for(const o of r)if(o===Qe.FEATURES.MODULARITY)s[o]=await this._calculateModularity(e,i);else if(this.statisticClasses[o]){const a=this.statisticClasses[o],l=this.options.maxIter||this.options.tolerance?{maxIter:this.options.maxIter,tolerance:this.options.tolerance}:{},c=new a(l);this.log.debug(`Calculating ${o}...`);const d=await c.calculate(e,null,{onProgress:i.onProgress});s[o]=d}else this.log.warn(`Unknown feature: ${o}`);return this._normalizeNodeStats(s,n)}async _calculateGraphStats(e,n,r={}){const i=n||Qe.GRAPH_STATS.ALL,s={};for(const o of i){const a=this.graphStatClasses[o];if(a){this.log.debug(`Calculating graph stat: ${o}...`);const l=new a;s[o]=await l.calculate(e,null,{onProgress:r.onProgress})}else this.log.warn(`Unknown graph stat: ${o}`)}return s}async _calculateModularity(e,n={}){const r=new Sa(e),i=new bs;return this.log.debug("Running Louvain community detection..."),(await r.detectCommunities(i,{onProgress:n.onProgress})).communities}_prepareNetwork(e){const n=new Set;for(const s of e)n.add(s.source),n.add(s.target);const r=Array.from(n),i=new xa;for(const s of r)i.addNode(s);for(const s of e){const o=s.weight!==void 0?s.weight:1;i.addEdge(s.source,s.target,o)}return{graph:i,nodes:r}}_normalizeNodeStats(e,n){const r=[];for(const i of n){const s={id:i};for(const[o,a]of Object.entries(e))typeof a=="object"&&a!==null&&(s[o]=a[i]);r.push(s)}return r}async dispose(){await En.terminate()}}const ND=async()=>"/assets/network-worker.js";class LD{constructor(){this.analyzer=null,this.initPromise=null,this.lastAnalysisResults=null,this.workerUrl=null,this.log=Ze({prefix:"NetworkAnalyzer",level:"info"})}async _ensureInitialized(){if(!this.analyzer){if(this.initPromise)return this.initPromise;this.initPromise=(async()=>{this.workerUrl=await ND(),this.log.debug("Initializing with worker",{workerUrl:this.workerUrl}),this.analyzer=new Qe({verbose:!0,workerScript:this.workerUrl}),await new Promise(e=>setTimeout(e,500)),this.log.info("Initialized successfully")})(),await this.initPromise}}_toEdgeList(e,n){return n.map(r=>({source:typeof r.source=="object"?r.source.id:r.source,target:typeof r.target=="object"?r.target.id:r.target,weight:r.weight||1}))}_buildGraph(e,n){const r=new xa;return e.forEach(i=>{r.addNode(i.id)}),n.forEach(i=>{const s=typeof i.source=="object"?i.source.id:i.source,o=typeof i.target=="object"?i.target.id:i.target;r.addEdge(s,o,i.weight||1)}),r}async analyzeGraph(e,n,r={}){await this._ensureInitialized(),this.log.debug("Starting analysis",{nodeCount:e.length,linkCount:n.length,features:r.features,includeGraphStats:r.includeGraphStats});const i=this._toEdgeList(e,n),s=r.features||["degree","eigenvector"],o={onProgress:r.onProgress};r.includeGraphStats&&(o.includeGraphStats=!0,o.graphStats=r.graphStats||["density","diameter","average_clustering","average_shortest_path","connected_components","average_degree"]);const a=await this.analyzer.analyze(i,s,o);let l,c=null;Array.isArray(a)?l=a:a.nodes&&a.graph?(l=a.nodes,c=a.graph):l=a,this.log.info("Analysis complete",{resultsCount:l.length,hasGraphStats:c!==null}),this.lastAnalysisResults=l,e.forEach(u=>{const h=l.find(g=>g.id===u.id);if(!h){this.log.warn("No stats found for node",{nodeId:u.id}),u.centrality=.5;return}const f=h.eigenvector!==void 0?h.eigenvector:h.degree!==void 0?h.degree/10:.5;Object.assign(u,h,{centrality:f})}),this.log.debug("Nodes enriched",{sampleNode:e[0]});const d={nodes:e,links:n};return c&&(d.graphStats=c),d}async applyLayout(e,n,r,i={}){await this._ensureInitialized(),this.log.debug("Applying layout",{layoutId:e});const s=i.width||800,o=i.height||600,a=Math.min(s,o)/1.2,l={x:s/2,y:o/2},c=this._buildGraph(n,r);let d;const u={scale:a,center:l};switch(e){case"random":d=new kc(c,u);break;case"circular":d=new xc(c,u);break;case"spiral":d=new Cc(c,{...u,resolution:.15});break;case"shell":const f=new Map;n.forEach(A=>{A.degree!==void 0&&f.set(A.id,{degree:A.degree})}),d=new Sc(c,{...u,nodeProperties:f.size>0?f:null});break;case"spectral":if(!n.some(A=>{const v=A["eigenvector-laplacian"];return v&&typeof v=="object"&&v.laplacian_x!==void 0&&v.laplacian_y!==void 0}))throw new Error('Spectral layout requires eigenvector-laplacian analysis. Please run analysis with ["eigenvector-laplacian"] first.');const y=new Map;n.forEach(A=>{const v=A["eigenvector-laplacian"];v&&typeof v=="object"&&v.laplacian_x!==void 0&&v.laplacian_y!==void 0&&y.set(A.id,{laplacian_x:v.laplacian_x,laplacian_y:v.laplacian_y})}),d=new Tc(c,{...u,nodeProperties:y});break;case"force-directed":const w=n.length,b=Math.sqrt(1/w)*2.5;d=new Rc(c,{iterations:50,k:b,...u});break;case"kamada-kawai":d=new Nc(c,{iterations:300,...u});break;case"bipartite":d=new Lc(c,{align:"vertical",...u});break;case"multipartite":d=new Ic(c,{align:"vertical",...u});break;case"bfs":const E=n[0]?.id||Array.from(c.nodes)[0];d=new Dc(c,{startNode:E,align:"vertical",...u});break;default:throw new Error(`Unknown layout: ${e}`)}const h=await d.getPositions({onProgress:i.onProgress});return this.log.info("Layout complete",{positionCount:Object.keys(h).length}),h}getAvailableLayouts(){return CD.getAll()}getAvailableCommunityAlgorithms(){return jf.getAll()}async detectCommunities(e,n,r,i={}){await this._ensureInitialized(),this.log.debug("Detecting communities",{algorithmId:e});const s=this._buildGraph(n,r),o=jf.get(e);if(!o)throw new Error(`Unknown community detection algorithm: ${e}`);let a;switch(e){case"louvain":a=new bs(o.defaultOptions);break;default:throw new Error(`Unsupported algorithm: ${e}`)}const c=await new Sa(s).detectCommunities(a,{onProgress:i.onProgress});return this.log.info("Community detection complete",{numCommunities:c.numCommunities,modularity:c.modularity}),n.forEach(d=>{const u=c.communities[d.id];u!==void 0&&(d.community=u)}),c}getAffinityStats(){return En.getAffinityStats()}getWorkerStatus(){return En.getStatus()}async dispose(){if(this.analyzer)try{await this.analyzer.dispose(),this.analyzer=null}catch(e){this.log.warn("Error disposing analyzer",{error:e.message}),this.analyzer=null}}}const Te=Ze({prefix:"useNetworkGraph",level:"info"});function Od(t={}){const e=ge(null),n=ge(null),r=ge(null),i=ge(!1),s=ge(null),o=ge(null),a=ge(0),l=ge(t.renderer||"d3"),c=t.autoComputeCentrality!==!1,d=()=>{if(!e.value){Te.warn("Container ref not ready");return}if(n.value){Te.warn("Graph already initialized");return}try{i.value=!0,Te.debug("Initializing graph",{options:t});const k=e.value.getBoundingClientRect(),I=k.width||t.width||800,C=k.height||t.height||600,x=l.value==="sigma"?Vf:Zh;n.value=new x(e.value,{width:I,height:C,...t}),Te.debug("Created renderer instance",{renderer:l.value}),r.value=new LD,n.value.on("nodeHover",O=>{o.value=O}),n.value.on("nodeLeave",()=>{o.value=null}),i.value=!1,Te.info("Graph and analyzer initialized successfully")}catch(k){Te.error("Failed to initialize graph",{error:k.message,stack:k.stack}),s.value=k.message,i.value=!1}},u=(k,I)=>{if(!n.value){Te.warn("Graph not initialized yet");return}try{i.value=!0,Te.debug("Loading data into graph",{nodeCount:k.length,linkCount:I.length});const C=()=>{i.value=!1,n.value.off("ready",C),Te.info("Graph ready and fitted to view"),c&&n.value?.data?.nodes?.length>=2&&requestAnimationFrame(()=>{h()})};n.value.on("ready",C),n.value.setData(k,I)}catch(C){Te.error("Failed to load data",{error:C.message,stack:C.stack}),s.value=C.message,i.value=!1}},h=async()=>{if(!(!c||!n.value||!r.value)&&!(!n.value.data||n.value.data.nodes.length<2))try{Te.debug("Auto-computing eigenvector centrality");const k=n.value.data,I=await r.value.analyzeGraph(k.nodes,k.links,{features:["eigenvector"],onProgress:()=>{}});I&&I.nodes&&n.value.updateNodeStatistics&&(n.value.updateNodeStatistics(I.nodes,"eigenvector",!0),Te.debug("Auto-computed eigenvector centrality and updated node sizes"))}catch(k){Te.debug("Auto-compute eigenvector failed (non-critical)",{error:k.message})}},f=async(k=[],I=null,C=null,x=!1)=>{if(!n.value)return Te.warn("Graph not initialized yet"),null;try{Te.debug("Adding node",{neighborIds:k,nodeId:I,group:C,incremental:x});let O;return x&&n.value.addNodeIncremental?O=n.value.addNodeIncremental(k,I,C):O=n.value.addNode(k,I,C),O&&c&&requestAnimationFrame(()=>{h()}),O}catch(O){return Te.error("Failed to add node",{error:O.message,stack:O.stack}),s.value=O.message,null}},g=(k=null,I=!1)=>{if(!n.value)return Te.warn("Graph not initialized yet"),!1;try{Te.debug("Removing node",{nodeId:k,incremental:I});let C;return I&&n.value.removeNodeIncremental?C=n.value.removeNodeIncremental(k):C=n.value.removeNode(k),C&&c&&requestAnimationFrame(()=>{h()}),C}catch(C){return Te.error("Failed to remove node",{error:C.message,stack:C.stack}),s.value=C.message,!1}},y=async(k,I,C=!1)=>{if(!n.value)return Te.warn("Graph not initialized yet"),!1;try{let x;return C&&n.value.addLinkIncremental?x=n.value.addLinkIncremental(k,I):x=n.value.addLink(k,I),x&&c&&requestAnimationFrame(()=>{h()}),x}catch(x){return Te.error("Failed to add link",{error:x.message,stack:x.stack}),s.value=x.message,!1}},w=()=>n.value?n.value.getNodeIds():[],b=k=>n.value?n.value.hasNode(k):!1,E=async(k=["degree","eigenvector"],I={})=>{if(!n.value||!r.value)return Te.warn("Graph or analyzer not initialized"),null;try{i.value=!0,a.value=0,Te.debug("Starting graph analysis",{features:k,options:I});const C=n.value.data,x=await r.value.analyzeGraph(C.nodes,C.links,{features:k,includeGraphStats:I.includeGraphStats||!1,graphStats:I.graphStats,onProgress:X=>{a.value=X}});return Te.info("Analysis complete, updating visualization",{nodeCount:x.nodes.length,hasGraphStats:!!x.graphStats}),k.includes("eigenvector")&&x.nodes.some(X=>X.eigenvector!==void 0)?(Te.debug("Sizing nodes by eigenvector centrality"),n.value.updateVisualEncoding({sizeBy:"eigenvector",minRadius:4,maxRadius:20})):n.value.updateGraph(),i.value=!1,a.value=0,x}catch(C){return Te.error("Failed to analyze graph",{error:C.message,stack:C.stack,features:k}),s.value=C.message,i.value=!1,a.value=0,null}},A=async k=>{if(!n.value||!r.value)return Te.warn("Graph or analyzer not initialized"),!1;try{if(i.value=!0,a.value=0,Te.debug("Applying layout",{layoutId:k}),k==="none")return typeof n.value.startSimulation=="function"?(n.value.data.nodes.forEach(re=>{re.fx=null,re.fy=null}),n.value.startSimulation()):typeof n.value.unlockPositions=="function"?n.value.unlockPositions():n.value.updateGraph(),i.value=!1,a.value=0,Te.info("Simulation restarted (none layout)"),!0;const I=n.value.data,C=e.value.getBoundingClientRect(),x=await r.value.applyLayout(k,I.nodes,I.links,{width:C.width||800,height:C.height||600,onProgress:X=>{a.value=X}});I.nodes.forEach(X=>{const re=x[X.id];re&&(X.x=re.x,X.y=re.y,X.fx=re.x,X.fy=re.y)});const O=()=>{i.value=!1,a.value=0,n.value.off("ready",O),Te.info("Layout applied successfully",{layoutId:k})};return n.value.on("ready",O),n.value.updateGraph(),!0}catch(I){return Te.error("Failed to apply layout",{layoutId:k,error:I.message,stack:I.stack}),s.value=I.message,i.value=!1,a.value=0,!1}},v=()=>r.value?r.value.getAvailableLayouts():[],S=()=>r.value?r.value.getAvailableCommunityAlgorithms():[],L=async k=>{if(!n.value||!r.value)return Te.warn("Graph or analyzer not initialized"),null;try{i.value=!0,a.value=0,Te.debug("Detecting communities",{algorithmId:k});const I=n.value.data,C=await r.value.detectCommunities(k,I.nodes,I.links,{onProgress:x=>{a.value=x}});return Te.info("Community detection complete, updating colors",{numCommunities:C.numCommunities,modularity:C.modularity}),n.value.updateVisualEncoding({colorBy:"community",colorScheme:"categorical",preserveZoom:!0}),i.value=!1,a.value=0,C}catch(I){return Te.error("Failed to detect communities",{algorithmId:k,error:I.message,stack:I.stack}),s.value=I.message,i.value=!1,a.value=0,null}},G=(k={})=>{if(!n.value){Te.warn("Cannot update visual encoding - no graph instance");return}n.value.updateVisualEncoding(k)},V=()=>{if(!n.value){Te.warn("Graph not initialized yet");return}n.value.lockPositions()},F=()=>{if(!n.value){Te.warn("Graph not initialized yet");return}n.value.unlockPositions()},$=(k="network-graph.png")=>{if(!n.value){Te.warn("Graph not initialized yet");return}n.value.saveAsPNG(k)},H=()=>n.value?n.value.getSelectedNode():(Te.warn("Graph not initialized yet"),null),z=async()=>{if(n.value&&(n.value.destroy(),n.value=null,Te.info("Graph destroyed")),r.value)try{await r.value.dispose(),r.value=null,Te.info("Analyzer disposed")}catch(k){Te.warn("Error disposing analyzer",{error:k.message}),r.value=null}},N=async k=>{if(k===l.value)return Te.debug("Already using renderer",{rendererType:k}),!0;if(!["d3","sigma"].includes(k))return Te.error("Invalid renderer type",{rendererType:k}),!1;try{i.value=!0,Te.info("Switching renderer",{from:l.value,to:k});const I=n.value?.data?{nodes:n.value.data.nodes.map(C=>{const{x,y:O,fx:X,fy:re,vx:fe,vy:me,index:W,...ve}=C;return ve}),links:[...n.value.data.links]}:null;if(n.value&&(n.value.destroy(),n.value=null),l.value=k,await Ir(),e.value){const C=e.value.getBoundingClientRect(),x=C.width||t.width||800,O=C.height||t.height||600,X=k==="sigma"?Vf:Zh;return n.value=new X(e.value,{width:x,height:O,...t}),n.value.on("nodeHover",re=>{o.value=re}),n.value.on("nodeLeave",()=>{o.value=null}),I&&I.nodes.length>0?u(I.nodes,I.links):i.value=!1,Te.info("Renderer switched successfully",{renderer:k}),!0}return i.value=!1,!1}catch(I){return Te.error("Failed to switch renderer",{error:I.message,stack:I.stack}),s.value=I.message,i.value=!1,!1}};return Xn(async()=>{await Ir(),e.value&&d()}),xs(()=>{z()}),{graphContainer:e,graphInstance:n,loading:i,error:s,nodeInfo:o,analysisProgress:a,currentRenderer:l,initGraph:d,loadData:u,destroyGraph:z,addNode:f,removeNode:g,addLink:y,getNodeIds:w,hasNode:b,analyzeGraph:E,applyLayout:A,getAvailableLayouts:v,detectCommunities:L,getAvailableCommunityAlgorithms:S,updateVisualEncoding:G,lockPositions:V,unlockPositions:F,saveAsPNG:$,getSelectedNode:H,switchRenderer:N}}const Br={NAVIGATION:"navigation",DATA_MANAGEMENT:"data_management",ANALYSIS:"analysis",GRAPH_INTERACTION:"graph_interaction",FAMILY_TREE:"family_tree",SHOWCASE:"showcase"},Mc={SAMPLE_NETWORK_LOAD:"sample_network_load",FILE_UPLOAD:"file_upload",DATASET_SELECT:"dataset_select"},dr={LAYOUT_CHANGE:"layout_change",COMMUNITY_DETECTION:"community_detection",ANALYSIS_RUN:"analysis_run"},ID={RENDERER_SWITCH:"renderer_switch"},pt={RELATIVE_ADD:"relative_add",TREE_SAVE:"tree_save",TREE_EXPORT:"tree_export",TREE_RESET:"tree_reset",GRAPH_LOCK:"graph_lock",GRAPH_UNLOCK:"graph_unlock",RENDER_MODE_CHANGE:"render_mode_change",UNDO_ACTION:"undo_action",REDO_ACTION:"redo_action"},Al={NODE_ADD:"showcase_node_add",NODE_REMOVE:"showcase_node_remove"},DD={home:"Home",showcase:"Showcase",explorer:"Network Explorer",family:"Family Tree",docs:"Documentation"},ar=Ze({prefix:"Analytics",level:"warn"});let qr=!1,oi=!1,Bi=null;const PD=()=>!0,GD=()=>{if(qr){ar.warn("Analytics already initialized");return}if(Bi="G-Q54F1BV32E",!Bi){ar.warn("GA Measurement ID not configured (VITE_GA_MEASUREMENT_ID)"),qr=!0,oi=!1;return}if(oi=PD(),!oi){ar.info("Analytics disabled in development mode (set VITE_GA_DEBUG=true to enable)"),qr=!0;return}const t=document.createElement("script");t.async=!0,t.src=`https://www.googletagmanager.com/gtag/js?id=${Bi}`,document.head.appendChild(t),window.dataLayer=window.dataLayer||[],window.gtag=function(){window.dataLayer.push(arguments)},window.gtag("js",new Date),window.gtag("config",Bi,{send_page_view:!1}),qr=!0,ar.info("Google Analytics initialized",{measurementId:Bi})},_r=(t,e={})=>{if(!qr){ar.warn("Analytics not initialized, call initializeAnalytics() first");return}if(oi)try{window.gtag("event",t,e)}catch(n){ar.error("Failed to track event",{eventName:t,error:n.message})}},MD=(t,e)=>{if(!qr){ar.warn("Analytics not initialized");return}if(oi)try{window.gtag("event","page_view",{page_path:t,page_title:e,page_location:window.location.href})}catch(n){ar.error("Failed to track page view",{pagePath:t,error:n.message})}};function Ta(){return{trackEvent:_r,trackPageView:MD,isEnabled:()=>oi,trackNavigation:(t,e={})=>{_r(t,{event_category:Br.NAVIGATION,...e})},trackDataAction:(t,e={})=>{_r(t,{event_category:Br.DATA_MANAGEMENT,...e})},trackAnalysis:(t,e={})=>{_r(t,{event_category:Br.ANALYSIS,...e})},trackGraphInteraction:(t,e={})=>{_r(t,{event_category:Br.GRAPH_INTERACTION,...e})},trackFamilyAction:(t,e={})=>{_r(t,{event_category:Br.FAMILY_TREE,...e})},trackShowcaseAction:(t,e={})=>{_r(t,{event_category:Br.SHOWCASE,...e})}}}class OD{constructor({graphManager:e,onStatusChange:n=null,translate:r=null}){this.graphManager=e,this.onStatusChange=n,this.translate=r||(i=>i),this.log=Ze({prefix:"ShowcaseController",level:"info"}),this.datasets={default:{name:"Default",loader:()=>this._loadDefaultDataset()},karate:{name:"Karate Club",loader:()=>this._loadKarateDataset()},miserables:{name:"Les Misrables",loader:()=>this._loadMiserablesDataset()}}}getInitialDataset(){return{nodes:[{id:"Alice",group:1},{id:"Bob",group:1},{id:"Charlie",group:2},{id:"David",group:2},{id:"Eve",group:3},{id:"Frank",group:3},{id:"Grace",group:1},{id:"Henry",group:2},{id:"Isabel",group:4},{id:"John",group:4},{id:"Kate",group:5},{id:"Luke",group:5},{id:"Mary",group:6},{id:"Nick",group:6},{id:"Oliver",group:7}],links:[{source:"Alice",target:"Bob"},{source:"Alice",target:"Charlie"},{source:"Bob",target:"Charlie"},{source:"Charlie",target:"David"},{source:"Eve",target:"Frank"},{source:"Eve",target:"Alice"},{source:"Grace",target:"Alice"},{source:"Henry",target:"Bob"},{source:"Henry",target:"Eve"},{source:"Isabel",target:"John"},{source:"Isabel",target:"Kate"},{source:"John",target:"Luke"},{source:"Kate",target:"Mary"},{source:"Luke",target:"Nick"},{source:"Mary",target:"Oliver"},{source:"Nick",target:"Oliver"},{source:"Oliver",target:"Alice"},{source:"Frank",target:"Mary"},{source:"David",target:"Isabel"},{source:"Grace",target:"Kate"}]}}async _loadDefaultDataset(){return this.getInitialDataset()}async _loadKarateDataset(){const e=await Gc.loadFromURL("/data/karateclub.json");return e.nodes=e.nodes.map(n=>({...n,group:n.club==="Mr. Hi"?1:2})),{nodes:e.nodes,links:e.edges}}async _loadMiserablesDataset(){const e=await Pc.loadFromURL("/data/les_miserables.csv");return e.nodes=e.nodes.map(n=>({...n,group:n.group||1})),{nodes:e.nodes,links:e.edges}}async loadDataset(e){const n=this.datasets[e];if(!n)return{success:!1,error:`Unknown dataset: ${e}`};try{this.log.debug("Loading dataset",{datasetKey:e,datasetName:n.name}),this._updateStatus("Loading dataset...","info");const r=await n.loader();this.graphManager.loadData(r.nodes,r.links);const i=this.translate("showcase.messages.loadedDataset",{name:n.name,nodes:r.nodes.length,edges:r.links.length});return this.log.info("Dataset loaded successfully",{name:n.name,nodeCount:r.nodes.length,edgeCount:r.links.length}),this._updateStatus(i,"success"),{success:!0,data:r,name:n.name,nodeCount:r.nodes.length,edgeCount:r.links.length}}catch(r){const i=this.translate("showcase.messages.failedToLoadDataset",{error:r.message});return this.log.error("Failed to load dataset",{datasetKey:e,error:r.message,stack:r.stack}),this._updateStatus(i,"error"),{success:!1,error:r.message}}}addRandomNode(){if(!this.graphManager.graphInstance.value)return{success:!1,error:"Graph not initialized"};const e=this.graphManager.getNodeIds();if(e.length===0)return{success:!1,error:"No nodes available to connect to"};const n=e[Math.floor(Math.random()*e.length)],r=this.graphManager.addNode([n],null,null,!0);if(r){const i=this.translate("showcase.messages.addedNode",{nodeId:r.id,connectedTo:n});return this.log.debug("Added random node",{nodeId:r.id,connectedTo:n}),this._updateStatus(i,"success"),{success:!0,node:r,connectedTo:n}}return this.log.warn("Failed to add random node"),{success:!1,error:"Failed to add node"}}addNodeToSelected(){if(!this.graphManager.graphInstance.value)return{success:!1,error:"Graph not initialized"};const e=this.graphManager.getSelectedNode();if(!e){const i=this.translate("showcase.messages.noNodeSelected");return this.log.warn("No node selected"),this._updateStatus(i,"error"),{success:!1,error:"No node selected"}}const n=e.id,r=this.graphManager.addNode([n],null,null,!0);if(r){const i=this.translate("showcase.messages.addedNode",{nodeId:r.id,connectedTo:n});return this.log.debug("Added node connected to selected",{nodeId:r.id,targetNodeId:n}),this._updateStatus(i,"success"),{success:!0,node:r,connectedTo:n}}return this.log.warn("Failed to add node connected to selected",{targetNodeId:n}),{success:!1,error:"Failed to add node"}}removeRandomNode(){if(!this.graphManager.graphInstance.value)return{success:!1,error:"Graph not initialized"};const e=this.graphManager.getNodeIds();if(e.length===0){const i=this.translate("showcase.messages.noNodesToRemove");return this._updateStatus(i,"error"),{success:!1,error:"No nodes to remove"}}const n=e[Math.floor(Math.random()*e.length)];if(this.graphManager.removeNode(n,!0)){const i=this.translate("showcase.messages.removedNode",{nodeId:n});return this.log.debug("Removed random node",{nodeId:n}),this._updateStatus(i,"info"),{success:!0,removedNodeId:n}}return this.log.warn("Failed to remove random node"),{success:!1,error:"Failed to remove node"}}async analyzeGraph(e=["degree","eigenvector","betweenness"]){try{this.log.debug("Starting graph analysis",{metrics:e}),this._updateStatus("Analyzing network using workers...","info");const n=await this.graphManager.analyzeGraph(e);if(n){const r=this.translate("showcase.messages.analysisComplete",{count:n.nodes.length});return this.log.info("Graph analysis complete",{nodeCount:n.nodes.length,metrics:e}),this._updateStatus(r,"success"),{success:!0,results:n,nodeCount:n.nodes.length,metrics:e}}return this.log.warn("Analysis returned no results"),{success:!1,error:"Analysis returned no results"}}catch(n){const r=this.translate("showcase.messages.analysisFailed",{error:n.message});return this.log.error("Graph analysis failed",{error:n.message,stack:n.stack,metrics:e}),this._updateStatus(r,"error"),{success:!1,error:n.message}}}async applyLayout(e){if(e==="none"){const n=this.translate("showcase.messages.usingD3Physics");return this.log.debug("Using default D3 physics simulation"),this._updateStatus(n,"info"),this.graphManager.unlockPositions(),{success:!0,layoutId:"none",message:"Using default D3 physics simulation"}}try{if(this.log.debug("Applying layout algorithm",{layoutId:e}),this._updateStatus(`Applying ${e} layout...`,"info"),await this.graphManager.applyLayout(e)){const r=this.translate("showcase.messages.appliedLayout",{layout:e});return this.log.info("Layout applied successfully",{layoutId:e}),this._updateStatus(r,"success"),{success:!0,layoutId:e}}return this.log.warn("Layout application failed",{layoutId:e}),{success:!1,error:"Layout application failed"}}catch(n){const r=this.translate("showcase.messages.layoutFailed",{error:n.message});return this.log.error("Layout application failed",{layoutId:e,error:n.message,stack:n.stack}),this._updateStatus(r,"error"),{success:!1,error:n.message}}}getAvailableLayouts(){return this.graphManager.getAvailableLayouts()}_updateStatus(e,n){this.onStatusChange&&this.onStatusChange(e,n)}isGraphReady(){return this.graphManager.graphInstance.value!==null}getNodeCount(){return this.graphManager.getNodeIds().length}getAvailableCommunityAlgorithms(){return this.graphManager.getAvailableCommunityAlgorithms()}async detectCommunities(e){if(!this.isGraphReady())return this._updateStatus(this.translate("showcase.messages.graphNotInitialized"),"error"),null;if(this.getNodeCount()===0)return this._updateStatus(this.translate("showcase.messages.graphIsEmpty"),"error"),null;try{this._updateStatus(`Detecting communities using ${e}...`,"info");const r=await this.graphManager.detectCommunities(e);if(r){const i=this.translate("showcase.messages.foundCommunities",{count:r.numCommunities,modularity:r.modularity.toFixed(3)});return this._updateStatus(i,"success"),r}else return this._updateStatus(this.translate("showcase.messages.communityDetectionFailed"),"error"),null}catch(r){return this.log.error("Community detection failed",{algorithmId:e,error:r.message,stack:r.stack}),this._updateStatus(`Error: ${r.message}`,"error"),null}}getSelectedNode(){return this.graphManager.getSelectedNode()}}const FD={class:"demo-controls-header"},$D={class:"demo-controls-title"},zD={class:"demo-controls-description"},BD={class:"info-box-blue mb-4"},VD={class:"text-lg font-semibold text-blue-900 dark:text-blue-300 mb-2"},UD=["innerHTML"],jD={class:"sticky top-0 z-20 bg-white/98 dark:bg-gray-800/98 backdrop-blur-md border-b border-[var(--color-border)] pb-4 mb-4 -mx-6 px-6 pt-4 -mt-2 overflow-x-hidden"},HD={class:"demo-controls-section-title mb-3"},WD={class:"bg-[var(--color-bg-secondary)] rounded-md p-4 text-sm shadow-sm border border-[var(--color-border)]"},qD={key:0,class:"text-secondary text-center py-2"},KD={class:"text-xs"},XD={class:"text-xs mt-1 opacity-60"},ZD={key:1,class:"space-y-2"},YD={class:"flex-shrink-0 mt-0.5"},JD={key:0},QD={key:1},eP={key:2},tP={class:"flex-1 break-words"},nP={class:"demo-controls-section border-t border-[var(--color-border)] pt-4"},rP={class:"demo-controls-section-title"},iP={class:"grid grid-cols-3 gap-2"},sP=["title"],oP=["disabled","title"],aP=["title"],lP={class:"demo-controls-section border-t border-[var(--color-border)] pt-4"},cP={class:"demo-controls-section-title"},dP={class:"space-y-2"},uP={class:"block text-sm font-medium text-secondary"},hP={value:"default"},fP={value:"karate"},pP={value:"miserables"},gP=["disabled"],mP={key:0},yP={key:1},vP={class:"demo-controls-section border-t border-[var(--color-border)] pt-4"},_P={class:"demo-controls-section-title"},bP={class:"info-box-green mt-3"},wP=["innerHTML"],EP={class:"demo-controls-section border-t border-[var(--color-border)] pt-4"},AP={class:"demo-controls-section-title"},kP={class:"demo-controls-section border-t border-[var(--color-border)] pt-4"},xP={class:"demo-controls-section-title"},CP={key:0,class:"info-box-green mt-3"},SP={class:"text-sm text-green-800 dark:text-green-200 space-y-1"},TP={class:"text-xs mt-2"},RP={key:1,class:"info-box-yellow mt-3"},NP={class:"text-xs text-yellow-800 dark:text-yellow-200"},LP={class:"info-box-purple"},IP={class:"text-sm font-semibold text-purple-900 dark:text-purple-300 mb-2"},DP={class:"text-sm text-purple-800 dark:text-purple-200 space-y-1"},PP=["innerHTML"],GP=["innerHTML"],MP=["innerHTML"],OP=["innerHTML"],FP=["innerHTML"],$P=["innerHTML"],zP={key:0,class:"absolute inset-0 flex items-center justify-center bg-white/90 dark:bg-gray-900/90 backdrop-blur-md z-10"},BP={class:"text-center"},VP={class:"text-secondary"},UP={__name:"ShowcasePage",setup(t){const e=Ze({prefix:"ShowcasePage",level:"info"}),{t:n}=An(),{trackShowcaseAction:r,trackDataAction:i,trackAnalysis:s}=Ta(),o=Od(),{graphContainer:a,graphInstance:l,loading:c,loadData:d,addNode:u,removeNode:h,hasNode:f,getNodeIds:g,analysisProgress:y,analyzeGraph:w,applyLayout:b,getAvailableLayouts:E,detectCommunities:A,getAvailableCommunityAlgorithms:v,getSelectedNode:S,unlockPositions:L}=o,G=ge("default"),V=ge("none"),F=ge([]),$=ge("louvain"),H=ge([]),z=ge(null),N=ge(["degree","eigenvector","betweenness"]),k=ge(""),I=ge(""),C=ge("info"),x=ge("");let O=null;const X=(J,U)=>{I.value=J,C.value=U},re=()=>{const J={graphInstance:l,loadData:d,addNode:u,removeNode:h,hasNode:f,getNodeIds:g,analyzeGraph:w,applyLayout:b,getAvailableLayouts:E,detectCommunities:A,getAvailableCommunityAlgorithms:v,getSelectedNode:S,unlockPositions:L};O=new OD({graphManager:J,onStatusChange:X,translate:(ee,ce)=>n(ee,ce)});const U=O.getInitialDataset();x.value=n("showcase.messages.loadingGraph"),d(U.nodes,U.links),F.value=O.getAvailableLayouts(),H.value=O.getAvailableCommunityAlgorithms(),e.info("Initial data loaded",{layouts:F.value.length,communityAlgorithms:H.value.length,nodes:U.nodes.length})},fe=()=>{O&&(r(Al.NODE_ADD,{method:"random"}),O.addRandomNode())},me=()=>{O&&(r(Al.NODE_ADD,{method:"to_selected"}),O.addNodeToSelected())},W=()=>{O&&(r(Al.NODE_REMOVE,{method:"random"}),O.removeRandomNode())},ve=async()=>{if(O){i(Mc.DATASET_SELECT,{dataset:G.value});try{x.value=n("showcase.messages.loadingDataset").replace("{dataset}",G.value);const J=await O.loadDataset(G.value);J.success&&(x.value=n("showcase.messages.loadingDatasetName").replace("{name}",J.name))}catch(J){e.error("Failed to load dataset",{error:J.message,stack:J.stack}),c.value=!1}}},Ee=async()=>{if(O){s(dr.ANALYSIS_RUN,{metrics:N.value.join(",")});try{x.value=n("showcase.messages.analyzing"),await O.analyzeGraph(N.value)}catch(J){e.error("Analysis error",{error:J.message,stack:J.stack})}}},De=async()=>{if(O){s(dr.LAYOUT_CHANGE,{layout:V.value});try{x.value=n("showcase.messages.applyingLayout").replace("{layout}",V.value),await O.applyLayout(V.value)}catch(J){e.error("Layout error",{error:J.message,stack:J.stack})}}},q=async()=>{if(O){s(dr.COMMUNITY_DETECTION,{algorithm:$.value});try{x.value=n("showcase.messages.detectingCommunities").replace("{algorithm}",$.value);const J=await O.detectCommunities($.value);J&&(z.value=J)}catch(J){e.error("Community detection error",{error:J.message,stack:J.stack})}}};return Mt(l,J=>{J&&!O&&re()},{immediate:!0}),(J,U)=>(Y(),Wn(fd,null,{controls:Xe(()=>[p("div",FD,[p("h1",$D,_(m(n)("showcase.header.title")),1),p("p",zD,_(m(n)("showcase.header.subtitle")),1)]),p("div",BD,[p("h2",VD,_(m(n)("showcase.whatIs.title")),1),p("p",{class:"text-sm text-blue-800 dark:text-blue-200",innerHTML:m(n)("showcase.whatIs.description")},null,8,UD)]),p("div",jD,[p("h2",HD,_(m(n)("showcase.status.title")),1),p("div",WD,[I.value?(Y(),ne("div",ZD,[p("div",{class:yt({"flex items-start space-x-2":!0,"text-green-600 dark:text-green-400":C.value==="success","text-red-600 dark:text-red-400":C.value==="error","text-blue-600 dark:text-blue-400":C.value==="info"})},[p("div",YD,[C.value==="success"?(Y(),ne("span",JD,"")):C.value==="error"?(Y(),ne("span",QD,"")):(Y(),ne("span",eP,""))]),p("div",tP,_(I.value),1)],2)])):(Y(),ne("div",qD,[p("div",KD,_(m(n)("showcase.status.ready")),1),p("div",XD,_(m(n)("showcase.status.hover")),1)]))])]),p("div",nP,[p("h2",rP,_(m(n)("showcase.controls.title")),1),p("div",iP,[p("button",{onClick:fe,class:"btn-primary text-sm px-2 py-2 whitespace-nowrap",title:m(n)("showcase.controls.addRandom")},"  "+_(m(n)("showcase.buttons.add")),9,sP),p("button",{onClick:me,class:"btn-secondary text-sm px-2 py-2 whitespace-nowrap",disabled:!m(S)(),title:m(S)()?m(n)("showcase.controls.addToSelected").replace("{name}",m(S)().id):m(n)("showcase.controls.selectNodeFirst")},"  "+_(m(n)("showcase.buttons.toSelected")),9,oP),p("button",{onClick:W,class:"btn-primary bg-red-600 hover:bg-red-700 text-sm px-2 py-2 whitespace-nowrap",title:m(n)("showcase.controls.removeRandom")},"  "+_(m(n)("showcase.buttons.remove")),9,aP)])]),p("div",lP,[p("h2",cP,_(m(n)("showcase.dataLoading.title")),1),p("div",dP,[p("label",uP,_(m(n)("showcase.dataLoading.choose")),1),Rt(p("select",{"onUpdate:modelValue":U[0]||(U[0]=ee=>G.value=ee),class:"w-full bg-secondary text-primary border border-color px-3 py-2 rounded-md"},[p("option",hP,_(m(n)("showcase.dataLoading.default")),1),p("option",fP,_(m(n)("showcase.dataLoading.karate")),1),p("option",pP,_(m(n)("showcase.dataLoading.miserables")),1)],512),[[di,G.value]])]),p("button",{onClick:ve,disabled:m(c),class:"w-full btn-primary mt-3"},[m(c)?(Y(),ne("span",yP,_(m(n)("showcase.dataLoading.loading")),1)):(Y(),ne("span",mP,_(m(n)("showcase.dataLoading.loadButton")),1))],8,gP)]),p("div",vP,[p("h2",_P,_(m(n)("showcase.networkAnalysis.title")),1),ke(gd,{"selected-metrics":N.value,"onUpdate:selectedMetrics":U[1]||(U[1]=ee=>N.value=ee),"size-metric":k.value,"onUpdate:sizeMetric":U[2]||(U[2]=ee=>k.value=ee),analyzing:m(c),progress:m(y),onAnalyze:Ee},null,8,["selected-metrics","size-metric","analyzing","progress"]),p("div",bP,[p("p",{class:"text-xs text-green-800 dark:text-green-200",innerHTML:m(n)("showcase.networkAnalysis.description")},null,8,wP)])]),p("div",EP,[p("h2",AP,_(m(n)("showcase.layoutAlgorithm.title")),1),ke(pd,{modelValue:V.value,"onUpdate:modelValue":U[3]||(U[3]=ee=>V.value=ee),"available-layouts":F.value,loading:m(c),onApply:De},null,8,["modelValue","available-layouts","loading"])]),p("div",kP,[p("h2",xP,_(m(n)("showcase.communityDetection.title")),1),ke(pm,{modelValue:$.value,"onUpdate:modelValue":U[4]||(U[4]=ee=>$.value=ee),"available-algorithms":H.value,detecting:m(c),onDetect:q},{results:Xe(()=>[z.value?(Y(),ne("div",CP,[p("div",SP,[p("div",null,[p("strong",null,_(m(n)("showcase.communityDetection.communitiesFound")),1),Re(" "+_(z.value.numCommunities),1)]),p("div",null,[p("strong",null,_(m(n)("showcase.communityDetection.modularity")),1),Re(" "+_(z.value.modularity.toFixed(3)),1)]),p("div",TP,_(m(n)("showcase.communityDetection.nodeColorsAssignments")),1)])])):Pe("",!0),H.value.length>0&&!z.value?(Y(),ne("div",RP,[p("p",NP,[p("strong",null,_(H.value.find(ee=>ee.id===$.value)?.name)+":",1),Re(" "+_(H.value.find(ee=>ee.id===$.value)?.description),1)])])):Pe("",!0)]),_:1},8,["modelValue","available-algorithms","detecting"])]),p("div",LP,[p("h3",IP,_(m(n)("showcase.instructions.title")),1),p("ul",DP,[p("li",{innerHTML:m(n)("showcase.instructions.dragNodes")},null,8,PP),p("li",{innerHTML:m(n)("showcase.instructions.scroll")},null,8,GP),p("li",{innerHTML:m(n)("showcase.instructions.dragBackground")},null,8,MP),p("li",{innerHTML:m(n)("showcase.instructions.hoverNodes")},null,8,OP),p("li",{innerHTML:m(n)("showcase.instructions.nodeSize")},null,8,FP),p("li",{innerHTML:m(n)("showcase.instructions.color")},null,8,$P)])])]),graph:Xe(()=>[m(c)?(Y(),ne("div",zP,[p("div",BP,[U[5]||(U[5]=p("div",{class:"inline-block animate-spin rounded-full h-12 w-12 border-4 border-purple-600 border-t-transparent mb-4"},null,-1)),p("p",VP,_(x.value),1)])])):Pe("",!0),p("div",{ref_key:"graphContainer",ref:a,class:"w-full h-full"},null,512)]),_:1}))}};class jP{constructor({graphManager:e,onStatusChange:n=null,translate:r=null}){this.graphManager=e,this.onStatusChange=n,this.translate=r||(i=>i),this.log=Ze({prefix:"ExplorerController",level:"info"}),this.sampleNetworks={caruaru:{name:"Caruaru",file:"/data/network_caruaru.json",description:"Small network (~130 edges)",type:"json"},rj:{name:"Rio de Janeiro",file:"/data/network_rj.json",description:"Medium network (~1,900 edges)",type:"json"},niteroi:{name:"Niteri",file:"/data/network_niteroi.json",description:"Large network (~18,500 edges)",type:"json"},karate:{name:"Karate Club",file:"/data/karateclub.json",description:"Classic social network (34 nodes, 78 edges)",type:"json"},miserables:{name:"Les Misrables",file:"/data/les_miserables.csv",description:"Character co-occurrence network (77 nodes, 254 edges)",type:"csv"}},this.workersSupported=typeof Worker<"u",this.workerCount=navigator.hardwareConcurrency||4}async loadSampleNetwork(e){const n=this.sampleNetworks[e];if(!n)return{success:!1,error:`Unknown network: ${e}`};try{this.log.debug("Loading sample network",{networkKey:e,networkName:n.name}),this._updateStatus(this.translate("explorer.messages.loadingNetworkData"),"info");let r;if(n.type==="csv"){const s=await Pc.loadFromURL(n.file);r={nodes:s.nodes.map(a=>({...a,group:a.group||1})),links:s.edges}}else if(e==="karate"){const s=await Gc.loadFromURL(n.file);r={nodes:s.nodes.map(a=>({...a,group:a.club==="Mr. Hi"?1:2})),links:s.edges}}else{const s=await fetch(n.file);if(!s.ok)throw new Error(`Failed to fetch: ${s.statusText}`);const o=await s.json(),a=new Set,l=[];o.forEach(d=>{a.add(d.source),a.add(d.target),l.push({source:String(d.source),target:String(d.target),weight:d.weight||1})}),r={nodes:Array.from(a).map(d=>({id:String(d),group:1})),links:l.map(d=>({source:d.source,target:d.target,weight:d.weight}))}}this.graphManager.loadData(r.nodes,r.links);const i=this.translate("explorer.messages.loadedNetwork",{name:n.name,nodes:r.nodes.length,edges:r.links.length});return this.log.info("Sample network loaded successfully",{name:n.name,nodeCount:r.nodes.length,edgeCount:r.links.length}),this._updateStatus(i,"success"),{success:!0,data:r,name:n.name,nodeCount:r.nodes.length,edgeCount:r.links.length,description:n.description,useWorkers:r.nodes.length>=500&&this.workersSupported}}catch(r){const i=this.translate("explorer.messages.failedToLoadNetwork",{error:r.message});return this.log.error("Failed to load sample network",{networkKey:e,error:r.message,stack:r.stack}),this._updateStatus(i,"error"),{success:!1,error:r.message}}}async loadUploadedNetwork(e,n,r,i){try{this.log.debug("Loading uploaded network",{format:e}),this._updateStatus(this.translate("explorer.messages.loadingUploadedFile"),"info");let s;if(e==="csv"){if(!n)throw new Error("Edges CSV file is required");this.log.debug("Loading CSV files",{edgeFile:n.name,nodeFile:r?.name}),s=await Pc.loadFromFiles(n,r||null)}else if(e==="json"){if(!i)throw new Error("JSON file is required");this.log.debug("Loading JSON file",{fileName:i.name});const d=await i.text(),u=JSON.parse(d);if(Array.isArray(u)&&u.length>0&&u[0].source&&u[0].target){this.log.debug("Detected raw edge list array format");const h=new Set;u.forEach(f=>{h.add(f.source),h.add(f.target)}),s={nodes:Array.from(h).map(f=>({id:String(f),group:1})),edges:u.map(f=>({source:String(f.source),target:String(f.target),weight:f.weight||1}))}}else s=Gc.fromFormat(u)}else if(e==="networkx"){if(!i)throw new Error("NetworkX JSON file is required");this.log.debug("Loading NetworkX file",{fileName:i.name});const d=await i.text(),u=JSON.parse(d);s=RD.fromFormat(u)}else throw new Error(`Unknown format: ${e}`);this.log.info("Parsed graph data",{nodes:s.nodes.length,edges:s.edges.length});const o=s.nodes.map(d=>({...d,id:String(d.id),group:d.group||1})),a=s.edges.map(d=>({source:String(d.source),target:String(d.target),weight:d.weight||1}));this.graphManager.loadData(o,a);const l=i?.name||n?.name||"uploaded file",c=this.translate("explorer.messages.loadedFile",{fileName:l,nodes:o.length,edges:a.length});return this.log.info("Uploaded network loaded successfully",{fileName:l,nodeCount:o.length,edgeCount:a.length}),this._updateStatus(c,"success"),{success:!0,data:{nodes:o,links:a},name:l,nodeCount:o.length,edgeCount:a.length,description:`Uploaded ${e.toUpperCase()} file`,useWorkers:o.length>=500&&this.workersSupported}}catch(s){const o=this.translate("explorer.messages.failedToLoadFile",{error:s.message});return this.log.error("Failed to load uploaded network",{format:e,error:s.message,stack:s.stack}),this._updateStatus(o,"error"),{success:!1,error:s.message}}}async analyzeGraph(e=["degree","eigenvector"],n=null){try{this.log.debug("Starting graph analysis",{metrics:e,sizeMetric:n}),this._updateStatus(this.translate("explorer.messages.analyzingNetwork"),"info");const r=await this.graphManager.analyzeGraph(e,{includeGraphStats:!0,graphStats:["density","diameter","average_clustering","average_shortest_path","connected_components","average_degree"]});if(r){const i=r.nodes.length,s=r.links.length,o=(2*s/i).toFixed(2);n&&r.nodes.some(l=>l[n]!==void 0)&&this.graphManager.updateVisualEncoding({sizeBy:n,minRadius:4,maxRadius:20});const a=this.translate("explorer.messages.analysisComplete",{count:i});return this.log.info("Graph analysis complete",{nodeCount:i,metrics:e,hasGraphStats:!!r.graphStats}),this._updateStatus(a,"success"),{success:!0,results:r,nodeCount:i,linkCount:s,avgDegree:o,metrics:e,graphStats:r.graphStats||{average_degree:parseFloat(o)}}}return this.log.warn("Analysis returned no results"),{success:!1,error:"Analysis returned no results"}}catch(r){const i=this.translate("explorer.messages.analysisFailed",{error:r.message});return this.log.error("Graph analysis failed",{error:r.message,stack:r.stack,metrics:e}),this._updateStatus(i,"error"),{success:!1,error:r.message}}}async applyLayout(e){if(e==="none"){const n=this.translate("explorer.messages.usingD3Physics");return this.log.debug("Using default D3 physics simulation"),this._updateStatus(n,"info"),this.graphManager.unlockPositions(),{success:!0,layoutId:"none",message:"Using default D3 physics simulation"}}try{if(this.log.debug("Applying layout algorithm",{layoutId:e}),this._updateStatus(this.translate("explorer.messages.applyingLayout",{layout:e}),"info"),await this.graphManager.applyLayout(e)){const r=this.translate("explorer.messages.appliedLayout",{layout:e});return this.log.info("Layout applied successfully",{layoutId:e}),this._updateStatus(r,"success"),{success:!0,layoutId:e}}return this.log.warn("Layout application failed",{layoutId:e}),{success:!1,error:"Layout application failed"}}catch(n){const r=this.translate("explorer.messages.layoutFailed",{error:n.message});return this.log.error("Layout application failed",{layoutId:e,error:n.message,stack:n.stack}),this._updateStatus(r,"error"),{success:!1,error:n.message}}}async detectCommunities(e){if(!this.graphManager.graphInstance.value)return this._updateStatus(this.translate("explorer.messages.graphNotInitialized"),"error"),null;if(this.graphManager.getNodeIds().length===0)return this._updateStatus(this.translate("explorer.messages.graphIsEmpty"),"error"),null;try{this._updateStatus(this.translate("explorer.messages.detectingCommunities",{algorithm:e}),"info");const r=await this.graphManager.detectCommunities(e);if(r){const i=this.translate("explorer.messages.foundCommunities",{count:r.numCommunities,modularity:r.modularity.toFixed(3)});return this._updateStatus(i,"success"),r}else return this._updateStatus(this.translate("explorer.messages.communityDetectionFailed"),"error"),null}catch(r){return this.log.error("Community detection failed",{algorithmId:e,error:r.message,stack:r.stack}),this._updateStatus(this.translate("explorer.messages.analysisFailed",{error:r.message}),"error"),null}}getAvailableLayouts(){return this.graphManager.getAvailableLayouts()}getAvailableCommunityAlgorithms(){return this.graphManager.getAvailableCommunityAlgorithms()}getWorkerInfo(){return{supported:this.workersSupported,count:this.workerCount}}_updateStatus(e,n){this.onStatusChange&&this.onStatusChange(e,n)}}const HP={class:"demo-controls-header"},WP={class:"demo-controls-title"},qP={class:"demo-controls-description"},KP={class:"info-box-blue mb-4"},XP={class:"text-lg font-semibold text-blue-900 dark:text-blue-300 mb-2"},ZP=["innerHTML"],YP={class:"flex items-center gap-2 text-xs"},JP={key:0},QP={key:1},eG={key:0,class:"badge badge-yellow"},tG={class:"demo-controls-section mb-4"},nG={class:"demo-controls-section-title"},rG={class:"flex gap-2 bg-gray-100 dark:bg-gray-800 p-1 rounded-lg"},iG=["disabled"],sG=["disabled"],oG={class:"text-xs text-secondary mt-2"},aG={class:"sticky top-0 z-20 bg-white/98 dark:bg-gray-800/98 backdrop-blur-md border-b border-[var(--color-border)] pb-4 mb-4 -mx-6 px-6 pt-4 -mt-2 shadow-sm"},lG={class:"demo-controls-section-title mb-3"},cG={class:"bg-[var(--color-bg-secondary)] rounded-md p-4 text-sm shadow-sm border border-[var(--color-border)]"},dG={key:0,class:"text-secondary text-center py-2"},uG={class:"text-xs"},hG={class:"text-xs mt-1 opacity-60"},fG={key:1,class:"space-y-2"},pG={class:"flex-shrink-0 mt-0.5"},gG={key:0},mG={key:1},yG={key:2},vG={class:"flex-1 break-words"},_G={class:"demo-controls-section border-t border-[var(--color-border)] pt-4"},bG={class:"demo-controls-section-title"},wG={class:"flex gap-2 bg-gray-100 dark:bg-gray-800 p-1 rounded-lg mb-4"},EG={class:"space-y-2"},AG={class:"block text-sm font-medium text-secondary"},kG={value:""},xG={value:"karate"},CG={value:"miserables"},SG={value:"caruaru"},TG={value:"rj"},RG={value:"niteroi"},NG=["disabled"],LG={key:0},IG={key:1},DG={class:"space-y-3"},PG={class:"space-y-2"},GG={class:"block text-sm font-medium text-secondary"},MG={value:"json"},OG={value:"csv"},FG={value:"networkx"},$G={class:"space-y-2"},zG={class:"block text-sm font-medium text-secondary"},BG={class:"block text-sm font-medium text-secondary mt-2"},VG=["innerHTML"],UG={class:"space-y-2"},jG={class:"block text-sm font-medium text-secondary"},HG={key:0},WG={key:1},qG={key:0,class:"text-xs text-secondary bg-[var(--color-bg-secondary)] rounded p-2"},KG={key:1,class:"text-xs text-secondary bg-[var(--color-bg-secondary)] rounded p-2"},XG=["disabled"],ZG={key:0},YG={key:1},JG={class:"demo-controls-section border-t border-[var(--color-border)] pt-4"},QG={class:"demo-controls-section-title"},eM={key:0,class:"demo-controls-section border-t border-[var(--color-border)] pt-4"},tM={class:"demo-controls-section-title"},nM={class:"metrics-grid-row mb-3"},rM={class:"metric-card"},iM={class:"text-xs text-secondary"},sM={class:"text-xl font-bold text-purple-600 dark:text-purple-400"},oM={class:"metric-card"},aM={class:"text-xs text-secondary"},lM={class:"text-xl font-bold text-pink-600 dark:text-pink-400"},cM={class:"metric-card"},dM={class:"text-xs text-secondary"},uM={class:"text-xl font-bold text-blue-600 dark:text-blue-400"},hM={class:"metric-card"},fM={class:"text-xs text-secondary"},pM={class:"text-xl font-bold text-green-600 dark:text-green-400"},gM={key:0,class:"metric-card"},mM={class:"text-xs text-secondary"},yM={class:"text-xl font-bold text-orange-600 dark:text-orange-400"},vM={key:1,class:"metric-card"},_M={class:"text-xs text-secondary"},bM={class:"text-xl font-bold text-cyan-600 dark:text-cyan-400"},wM={key:2,class:"metric-card"},EM={class:"text-xs text-secondary"},AM={class:"text-xl font-bold text-indigo-600 dark:text-indigo-400"},kM={key:3,class:"metric-card"},xM={class:"text-xs text-secondary"},CM={class:"text-xl font-bold text-violet-600 dark:text-violet-400"},SM={key:4,class:"metric-card"},TM={class:"text-xs text-secondary"},RM={class:"text-xl font-bold text-fuchsia-600 dark:text-fuchsia-400"},NM={key:5,class:"metric-card"},LM={class:"text-xs text-secondary"},IM={class:"text-xl font-bold text-rose-600 dark:text-rose-400"},DM={key:6,class:"metric-card"},PM={class:"text-xs text-secondary"},GM={class:"text-xl font-bold text-sky-600 dark:text-sky-400"},MM={key:0,class:"info-box-green text-xs"},OM={class:"font-semibold text-green-800 dark:text-green-300"},FM={class:"text-green-700 dark:text-green-400"},$M={key:1,class:"info-box-yellow text-xs"},zM={class:"font-semibold text-yellow-800 dark:text-yellow-300"},BM={class:"text-yellow-700 dark:text-yellow-400"},VM={class:"demo-controls-section border-t border-[var(--color-border)] pt-4"},UM={class:"demo-controls-section-title"},jM={class:"info-box-yellow mt-3"},HM={class:"text-xs text-yellow-800 dark:text-yellow-200"},WM={key:0,class:"italic"},qM={class:"demo-controls-section border-t border-[var(--color-border)] pt-4"},KM={class:"demo-controls-section-title"},XM={key:1,class:"demo-controls-section border-t border-[var(--color-border)] pt-4"},ZM={class:"bg-gradient-to-br from-orange-50 to-pink-50 dark:from-orange-900/30 dark:to-pink-900/30 rounded-lg p-4 border-2 border-orange-200 dark:border-orange-700"},YM={class:"text-sm font-semibold text-orange-900 dark:text-orange-300 mb-3 flex items-center gap-2"},JM={class:"space-y-2"},QM={class:"flex justify-between items-center"},eO={class:"text-sm text-orange-800 dark:text-orange-200"},tO={class:"text-lg font-bold text-orange-600 dark:text-orange-400"},nO={class:"flex justify-between items-center"},rO={class:"text-sm text-orange-800 dark:text-orange-200"},iO={class:"text-lg font-bold text-orange-600 dark:text-orange-400"},sO={class:"flex justify-between items-center"},oO={class:"text-sm text-orange-800 dark:text-orange-200"},aO={class:"text-sm font-semibold text-orange-600 dark:text-orange-400"},lO={class:"flex justify-between items-center"},cO={class:"text-sm text-orange-800 dark:text-orange-200"},dO={class:"text-sm font-semibold text-orange-600 dark:text-orange-400"},uO={class:"mt-3 pt-3 border-t border-orange-200 dark:border-orange-700"},hO={class:"text-xs text-orange-700 dark:text-orange-300"},fO={class:"info-box-purple"},pO={class:"text-sm font-semibold text-purple-900 dark:text-purple-300 mb-2"},gO={class:"text-sm text-purple-800 dark:text-purple-200 space-y-1"},mO=["innerHTML"],yO=["innerHTML"],vO=["innerHTML"],_O=["innerHTML"],bO=["innerHTML"],wO=["innerHTML"],EO={key:0,class:"absolute inset-0 flex items-center justify-center bg-white/90 dark:bg-gray-900/90 backdrop-blur-md z-10"},AO={class:"text-center"},kO={class:"text-secondary"},xO={__name:"ExplorerPage",setup(t){const e=Ze({prefix:"ExplorerPage",level:"info"}),{t:n}=An(),{trackDataAction:r,trackAnalysis:i,trackGraphInteraction:s}=Ta(),o=Od(),{graphContainer:a,graphInstance:l,loading:c,loadData:d,analysisProgress:u,analyzeGraph:h,applyLayout:f,getAvailableLayouts:g,detectCommunities:y,getAvailableCommunityAlgorithms:w,updateVisualEncoding:b,getNodeIds:E,unlockPositions:A,currentRenderer:v,switchRenderer:S}=o,L=ge("sample"),G=ge(""),V=ge("json"),F=ge(null),$=ge(null),H=ge(null),z=ge("none"),N=ge([]),k=ge([]),I=ge(""),C=ge(!1),x=ge(!1),O=ge("louvain"),X=ge([]),re=ge(!1),fe=ge(!1),me=ge(!1),W=ge(""),ve=ge("info"),Ee=ge("Loading graph..."),De=ge(null),q=ge("-"),J=ge(!1),U=ge(null),ee=ge(!1),ce=ge(!1),T=ge({nodes:0,edges:0,avgDegree:0,analysisTime:"-",communities:null,modularity:null}),D=ge({type:"default",message:"Select a network to begin...",details:null});let P=null;const B=ge({supported:typeof Worker<"u",count:navigator.hardwareConcurrency||4}),M=st(()=>V.value==="csv"?F.value!==null:H.value!==null),Z=(te,j)=>{W.value=te,ve.value=j},ie=(te,j,K=null)=>{D.value={type:te,message:j,details:K}},le=()=>{const te={graphInstance:l,loadData:d,analyzeGraph:h,applyLayout:f,getAvailableLayouts:g,detectCommunities:y,getAvailableCommunityAlgorithms:w,updateVisualEncoding:b,getNodeIds:E,unlockPositions:A};P=new jP({graphManager:te,onStatusChange:Z,translate:(j,K)=>n(j,K)}),N.value=P.getAvailableLayouts(),X.value=P.getAvailableCommunityAlgorithms(),l.value&&(l.value.on("nodeHover",j=>{ie("node-hover",`Node: ${j.id}`,{id:j.id,group:j.group||1,community:J.value?j.community:null,centrality:j.centrality?.toFixed(4)||"N/A",degree:j.degree||"N/A",betweenness:j.betweenness?.toFixed(4),clustering:j.clustering?.toFixed(3),eigenvector:j.eigenvector?.toFixed(4),closeness:j.closeness?.toFixed(4),egoDensity:j["ego-density"]?.toFixed(3),cliques:j.cliques})}),l.value.on("nodeLeave",()=>{re.value?ie("default","Hover over a node to see details..."):ie("default","Select a network to begin...")})),oe()},oe=()=>{const te={nodes:[{id:"Alice",group:1},{id:"Bob",group:1},{id:"Charlie",group:2},{id:"David",group:2},{id:"Eve",group:3},{id:"Frank",group:3},{id:"Grace",group:1},{id:"Henry",group:2},{id:"Isabel",group:4},{id:"John",group:4},{id:"Kate",group:5},{id:"Luke",group:5},{id:"Mary",group:6},{id:"Nick",group:6},{id:"Oliver",group:7}],links:[{source:"Alice",target:"Bob"},{source:"Alice",target:"Charlie"},{source:"Bob",target:"Charlie"},{source:"Charlie",target:"David"},{source:"Eve",target:"Frank"},{source:"Eve",target:"Alice"},{source:"Grace",target:"Alice"},{source:"Henry",target:"Bob"},{source:"Henry",target:"Eve"},{source:"Isabel",target:"John"},{source:"Isabel",target:"Kate"},{source:"John",target:"Luke"},{source:"Kate",target:"Mary"},{source:"Luke",target:"Nick"},{source:"Mary",target:"Oliver"},{source:"Nick",target:"Oliver"},{source:"Oliver",target:"Alice"},{source:"Frank",target:"Mary"},{source:"David",target:"Isabel"},{source:"Grace",target:"Kate"}]};d(te.nodes,te.links),re.value=!0,k.value=[],I.value="",C.value=!1,x.value=!1,l.value&&typeof l.value.updateCliqueEdgeColors=="function"&&l.value.updateCliqueEdgeColors(!1),T.value={nodes:te.nodes.length,edges:te.links.length,avgDegree:(2*te.links.length/te.nodes.length).toFixed(2),analysisTime:"-",communities:null,modularity:null},ie("default","Default network loaded. Hover over a node to see details...")},Q=async()=>{if(!(!P||!G.value)){r(Mc.SAMPLE_NETWORK_LOAD,{network:G.value});try{c.value=!0,Ee.value=`Loading ${G.value} network...`,ie("loading","Loading network data...");const te=await P.loadSampleNetwork(G.value);te.success?(re.value=!0,ce.value=te.useWorkers||!1,z.value="none",k.value=[],I.value="",C.value=!1,x.value=!1,l.value&&typeof l.value.updateCliqueEdgeColors=="function"&&l.value.updateCliqueEdgeColors(!1),T.value={nodes:te.nodeCount,edges:te.edgeCount,avgDegree:(2*te.edgeCount/te.nodeCount).toFixed(2),analysisTime:"-",communities:null,modularity:null},ie("success",`Loaded: ${te.name}`,{nodes:te.nodeCount,edges:te.edgeCount,description:te.description})):(c.value=!1,ie("error",`Failed to load network: ${te.error||"Unknown error"}`))}catch(te){e.error("Failed to load sample network",{error:te.message,stack:te.stack}),c.value=!1,ie("error",`Failed to load network: ${te.message}`)}}},be=async()=>{if(!(!P||!M.value)){r(Mc.FILE_UPLOAD,{format:V.value});try{c.value=!0,Ee.value="Loading uploaded file...",ie("loading","Loading uploaded file...");const te=await P.loadUploadedNetwork(V.value,F.value,$.value,H.value);te.success?(re.value=!0,ce.value=te.useWorkers||!1,z.value="none",k.value=[],I.value="",C.value=!1,x.value=!1,l.value&&typeof l.value.updateCliqueEdgeColors=="function"&&l.value.updateCliqueEdgeColors(!1),T.value={nodes:te.nodeCount,edges:te.edgeCount,avgDegree:(2*te.edgeCount/te.nodeCount).toFixed(2),analysisTime:"-",communities:null,modularity:null},ie("success",`Loaded: ${te.name}`,{nodes:te.nodeCount,edges:te.edgeCount,description:te.description})):(c.value=!1,ie("error",`Failed to load file: ${te.error||"Unknown error"}`))}catch(te){e.error("Failed to load uploaded network",{error:te.message,stack:te.stack}),c.value=!1,ie("error",`Failed to load file: ${te.message}`)}}},pe=async()=>{if(!(!P||!re.value)){i(dr.ANALYSIS_RUN,{metrics:k.value.join(",")});try{fe.value=!0,Ee.value="Analyzing network using workers...",ie("loading","Running network analysis...");const te=performance.now(),j=await P.analyzeGraph(k.value,I.value),K=performance.now()-te;T.value.analysisTime=`${(K/1e3).toFixed(2)}s`,j.success?(x.value=k.value.includes("cliques"),j.graphStats&&(U.value=j.graphStats,ee.value=!0),ie("success","Analysis complete",{nodes:j.nodeCount,edges:j.linkCount,time:T.value.analysisTime,metric:I.value||k.value[0]})):e.warn("Analysis completed but returned unsuccessful",{result:j})}catch(te){e.error("Analysis error",{error:te.message,stack:te.stack}),ie("error",`Analysis failed: ${te.message}`)}finally{fe.value=!1}}},_e=async()=>{if(!(!P||!re.value)){i(dr.LAYOUT_CHANGE,{layout:z.value});try{Ee.value=`Applying ${z.value} layout...`,W.value=`Applying ${z.value} layout...`,ve.value="info";const te=await P.applyLayout(z.value);if(te.success)W.value=` Applied ${z.value} layout`,ve.value="success",ie("layout-applied",`Layout Applied: ${z.value}`,{description:z.value==="none"?"Using D3's built-in force simulation":"Nodes fixed in position (D3 physics disabled)"});else{const j=te.error||"Layout application failed";W.value=` ${j}`,ve.value="error",ie("error",`Layout failed: ${j}`)}}catch(te){e.error("Layout error",{error:te.message,stack:te.stack});const j=te.message||"Layout failed";W.value=` ${j}`,ve.value="error",ie("error",`Layout failed: ${j}`)}}},Ae=async()=>{if(!(!P||!re.value)){i(dr.COMMUNITY_DETECTION,{algorithm:O.value});try{me.value=!0,Ee.value=`Detecting communities using ${O.value}...`,ie("loading","Detecting communities...");const te=performance.now(),j=await P.detectCommunities(O.value),K=performance.now()-te;j&&(De.value=j,q.value=`${(K/1e3).toFixed(2)}s`,J.value=!0,T.value.communities=j.numCommunities,T.value.modularity=j.modularity.toFixed(3),ie("default","Hover over a node to see details..."))}catch(te){e.error("Community detection error",{error:te.message,stack:te.stack}),ie("error",`Community detection failed: ${te.message}`)}finally{me.value=!1}}},Ne=async te=>{if(te!==v.value){s(ID.RENDERER_SWITCH,{renderer:te});try{Ee.value=`Switching to ${te==="d3"?"D3.js (SVG)":"Sigma.js (WebGL)"} renderer...`,W.value=Ee.value,ve.value="info",await S(te)?(W.value=`Switched to ${te==="d3"?"D3.js (SVG)":"Sigma.js (WebGL)"} renderer`,ve.value="success",l.value&&(l.value.on("nodeHover",K=>{ie("node-hover",`Node: ${K.id}`,{id:K.id,group:K.group||1,community:J.value?K.community:null,centrality:K.centrality?.toFixed(4)||"N/A",degree:K.degree||"N/A",betweenness:K.betweenness?.toFixed(4),clustering:K.clustering?.toFixed(3),eigenvector:K.eigenvector?.toFixed(4),closeness:K.closeness?.toFixed(4),egoDensity:K["ego-density"]?.toFixed(3),cliques:K.cliques})}),l.value.on("nodeLeave",()=>{re.value?ie("default","Hover over a node to see details..."):ie("default","Select a network to begin...")}),C.value&&x.value&&typeof l.value.updateCliqueEdgeColors=="function"&&setTimeout(()=>{l.value.updateCliqueEdgeColors(!0)},100))):(W.value="Failed to switch renderer",ve.value="error")}catch(j){e.error("Renderer switch error",{error:j.message,stack:j.stack}),W.value=`Failed to switch renderer: ${j.message}`,ve.value="error"}}};return Mt(C,te=>{l.value&&x.value&&typeof l.value.updateCliqueEdgeColors=="function"&&l.value.updateCliqueEdgeColors(te)}),Mt(l,(te,j)=>{te&&!P&&le(),te&&C.value&&x.value&&typeof te.updateCliqueEdgeColors=="function"&&setTimeout(()=>{te.updateCliqueEdgeColors(!0)},100)},{immediate:!0}),(te,j)=>(Y(),Wn(fd,null,{controls:Xe(()=>[p("div",HP,[p("h1",WP,_(m(n)("explorer.header.title")),1),p("p",qP,_(m(n)("explorer.header.subtitle")),1)]),p("div",KP,[p("h2",XP,_(m(n)("explorer.parallelComputation.title")),1),p("p",{class:"text-sm text-blue-800 dark:text-blue-200 mb-3",innerHTML:m(n)("explorer.parallelComputation.description")},null,8,ZP),p("div",YP,[p("span",{class:yt(B.value.supported?"badge badge-green":"badge badge-red")},[B.value.supported?(Y(),ne("span",JP,_(m(n)("explorer.parallelComputation.workersSupported")),1)):(Y(),ne("span",QP,_(m(n)("explorer.parallelComputation.workersNotSupported")),1))],2),B.value.supported?(Y(),ne("span",eG,_(B.value.count)+" "+_(m(n)("explorer.parallelComputation.cores")),1)):Pe("",!0)])]),p("div",tG,[p("h2",nG,_(m(n)("explorer.renderer.title")),1),p("div",rG,[p("button",{onClick:j[0]||(j[0]=K=>Ne("d3")),disabled:m(c),class:yt(["flex-1 px-3 py-2 rounded-md text-sm font-medium transition-colors",m(v)==="d3"?"bg-white dark:bg-gray-700 shadow text-purple-700 dark:text-purple-300":"hover:bg-gray-200 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300"])},_(m(n)("explorer.renderer.d3")),11,iG),p("button",{onClick:j[1]||(j[1]=K=>Ne("sigma")),disabled:m(c),class:yt(["flex-1 px-3 py-2 rounded-md text-sm font-medium transition-colors",m(v)==="sigma"?"bg-white dark:bg-gray-700 shadow text-purple-700 dark:text-purple-300":"hover:bg-gray-200 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300"])},_(m(n)("explorer.renderer.sigma")),11,sG)]),p("p",oG,_(m(v)==="d3"?m(n)("explorer.renderer.d3Description"):m(n)("explorer.renderer.sigmaDescription")),1)]),p("div",aG,[p("h2",lG,_(m(n)("explorer.status.title")),1),p("div",cG,[W.value?(Y(),ne("div",fG,[p("div",{class:yt({"flex items-start space-x-2":!0,"text-green-600 dark:text-green-400":ve.value==="success","text-red-600 dark:text-red-400":ve.value==="error","text-blue-600 dark:text-blue-400":ve.value==="info"})},[p("div",pG,[ve.value==="success"?(Y(),ne("span",gG,"")):ve.value==="error"?(Y(),ne("span",mG,"")):(Y(),ne("span",yG,""))]),p("div",vG,_(W.value),1)],2)])):(Y(),ne("div",dG,[p("div",uG,_(m(n)("explorer.status.ready")),1),p("div",hG,_(m(n)("explorer.status.loadNetwork")),1)]))])]),p("div",_G,[p("h2",bG,_(m(n)("explorer.dataLoading.title")),1),p("div",wG,[p("button",{onClick:j[2]||(j[2]=K=>L.value="sample"),class:yt([L.value==="sample"?"bg-white dark:bg-gray-700 shadow":"hover:bg-gray-200 dark:hover:bg-gray-700","flex-1 px-3 py-2 rounded-md text-sm font-medium text-gray-700 dark:text-gray-300 transition-colors"])},_(m(n)("explorer.dataLoading.sampleNetworks")),3),p("button",{onClick:j[3]||(j[3]=K=>L.value="upload"),class:yt([L.value==="upload"?"bg-white dark:bg-gray-700 shadow":"hover:bg-gray-200 dark:hover:bg-gray-700","flex-1 px-3 py-2 rounded-md text-sm font-medium text-gray-700 dark:text-gray-300 transition-colors"])},_(m(n)("explorer.dataLoading.uploadFile")),3)]),Rt(p("div",EG,[p("label",AG,_(m(n)("explorer.dataLoading.chooseNetwork")),1),Rt(p("select",{"onUpdate:modelValue":j[4]||(j[4]=K=>G.value=K),class:"w-full bg-secondary text-primary border border-color px-3 py-2 rounded-md"},[p("option",kG,_(m(n)("explorer.dataLoading.chooseCity")),1),p("option",xG,_(m(n)("explorer.dataLoading.karate")),1),p("option",CG,_(m(n)("explorer.dataLoading.miserables")),1),p("option",SG,_(m(n)("explorer.dataLoading.caruaru")),1),p("option",TG,_(m(n)("explorer.dataLoading.rj")),1),p("option",RG,_(m(n)("explorer.dataLoading.niteroi")),1)],512),[[di,G.value]]),p("button",{onClick:Q,disabled:!G.value||m(c),class:"w-full btn-primary mt-3"},[m(c)?(Y(),ne("span",IG,_(m(n)("explorer.dataLoading.loading")),1)):(Y(),ne("span",LG,_(m(n)("explorer.dataLoading.loadNetwork")),1))],8,NG)],512),[[$s,L.value==="sample"]]),Rt(p("div",DG,[p("div",PG,[p("label",GG,_(m(n)("explorer.dataLoading.fileFormat")),1),Rt(p("select",{"onUpdate:modelValue":j[5]||(j[5]=K=>V.value=K),class:"w-full bg-secondary text-primary border border-color px-3 py-2 rounded-md"},[p("option",MG,_(m(n)("explorer.dataLoading.formatJSON")),1),p("option",OG,_(m(n)("explorer.dataLoading.formatCSV")),1),p("option",FG,_(m(n)("explorer.dataLoading.formatNetworkX")),1)],512),[[di,V.value]])]),Rt(p("div",$G,[p("label",zG,_(m(n)("explorer.dataLoading.edgesCSV")),1),p("input",{type:"file",accept:".csv",onChange:j[6]||(j[6]=K=>F.value=K.target.files[0]),class:"w-full text-sm text-secondary file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-purple-50 file:text-purple-700 hover:file:bg-purple-100 dark:file:bg-purple-900/30 dark:file:text-purple-300"},null,32),p("label",BG,_(m(n)("explorer.dataLoading.nodesCSV")),1),p("input",{type:"file",accept:".csv",onChange:j[7]||(j[7]=K=>$.value=K.target.files[0]),class:"w-full text-sm text-secondary file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-purple-50 file:text-purple-700 hover:file:bg-purple-100 dark:file:bg-purple-900/30 dark:file:text-purple-300"},null,32),p("div",{class:"text-xs text-secondary bg-[var(--color-bg-secondary)] rounded p-2",innerHTML:m(n)("explorer.dataLoading.edgeCSVFormat")},null,8,VG)],512),[[$s,V.value==="csv"]]),Rt(p("div",UG,[p("label",jG,[V.value==="json"?(Y(),ne("span",HG,_(m(n)("explorer.dataLoading.jsonFile")),1)):(Y(),ne("span",WG,_(m(n)("explorer.dataLoading.networkxFile")),1))]),p("input",{type:"file",accept:".json",onChange:j[8]||(j[8]=K=>H.value=K.target.files[0]),class:"w-full text-sm text-secondary file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-purple-50 file:text-purple-700 hover:file:bg-purple-100 dark:file:bg-purple-900/30 dark:file:text-purple-300"},null,32),V.value==="json"?(Y(),ne("div",qG,_(m(n)("explorer.dataLoading.jsonSupports")),1)):(Y(),ne("div",KG,_(m(n)("explorer.dataLoading.networkxSupports")),1))],512),[[$s,V.value==="json"||V.value==="networkx"]]),p("button",{onClick:be,disabled:!M.value||m(c),class:"w-full bg-green-600 hover:bg-green-700 disabled:bg-gray-400 text-white px-4 py-3 rounded-md font-semibold transition-colors mt-3"},[m(c)?(Y(),ne("span",YG,_(m(n)("explorer.dataLoading.loading")),1)):(Y(),ne("span",ZG,_(m(n)("explorer.dataLoading.loadUploadedFile")),1))],8,XG)],512),[[$s,L.value==="upload"]])]),p("div",JG,[p("h2",QG,_(m(n)("explorer.networkAnalysis.title")),1),ke(gd,{"selected-metrics":k.value,"onUpdate:selectedMetrics":j[9]||(j[9]=K=>k.value=K),"size-metric":I.value,"onUpdate:sizeMetric":j[10]||(j[10]=K=>I.value=K),"show-clique-edges":C.value,"onUpdate:showCliqueEdges":j[11]||(j[11]=K=>C.value=K),analyzing:fe.value,disabled:!re.value,progress:m(u),"show-spectral-metric":!0,"has-cliques":x.value,onAnalyze:pe},null,8,["selected-metrics","size-metric","show-clique-edges","analyzing","disabled","progress","has-cliques"])]),re.value?(Y(),ne("div",eM,[p("h2",tM,_(m(n)("explorer.networkStats.title")),1),p("div",nM,[p("div",rM,[p("div",iM,_(m(n)("explorer.networkStats.nodes")),1),p("div",sM,_(T.value.nodes),1)]),p("div",oM,[p("div",aM,_(m(n)("explorer.networkStats.edges")),1),p("div",lM,_(T.value.edges),1)]),p("div",cM,[p("div",dM,_(m(n)("explorer.networkStats.avgDegree")),1),p("div",uM,_(T.value.avgDegree),1)]),p("div",hM,[p("div",fM,_(m(n)("explorer.networkStats.analysisTime")),1),p("div",pM,_(T.value.analysisTime),1)]),T.value.communities?(Y(),ne("div",gM,[p("div",mM,_(m(n)("explorer.networkStats.communities")),1),p("div",yM,_(T.value.communities),1)])):Pe("",!0),T.value.modularity?(Y(),ne("div",vM,[p("div",_M,_(m(n)("explorer.networkStats.modularity")),1),p("div",bM,_(T.value.modularity),1)])):Pe("",!0),U.value?.density!==void 0?(Y(),ne("div",wM,[p("div",EM,_(m(n)("explorer.graphStats.density")),1),p("div",AM,_(U.value.density?.toFixed(4)||"-"),1)])):Pe("",!0),U.value?.diameter!==void 0?(Y(),ne("div",kM,[p("div",xM,_(m(n)("explorer.graphStats.diameter")),1),p("div",CM,_(U.value.diameter===1/0?"":U.value.diameter||"-"),1)])):Pe("",!0),U.value?.average_clustering!==void 0?(Y(),ne("div",SM,[p("div",TM,_(m(n)("explorer.graphStats.avgClustering")),1),p("div",RM,_(U.value.average_clustering?.toFixed(4)||"-"),1)])):Pe("",!0),U.value?.average_shortest_path!==void 0?(Y(),ne("div",NM,[p("div",LM,_(m(n)("explorer.graphStats.avgPathLength")),1),p("div",IM,_(U.value.average_shortest_path===1/0?"":U.value.average_shortest_path?.toFixed(2)||"-"),1)])):Pe("",!0),U.value?.connected_components!==void 0?(Y(),ne("div",DM,[p("div",PM,_(m(n)("explorer.graphStats.connectedComponents")),1),p("div",GM,_(U.value.connected_components?.count??"-"),1)])):Pe("",!0)]),ce.value?(Y(),ne("div",MM,[p("span",OM,_(m(n)("explorer.networkStats.usingParallel")),1),p("span",FM," - "+_(B.value.count)+" "+_(m(n)("explorer.networkStats.workersActive")),1)])):Pe("",!0),!ce.value&&re.value?(Y(),ne("div",$M,[p("span",zM,_(m(n)("explorer.networkStats.singleThreaded")),1),p("span",BM," - "+_(m(n)("explorer.networkStats.networkTooSmall")),1)])):Pe("",!0)])):Pe("",!0),p("div",VM,[p("h2",UM,_(m(n)("explorer.layoutAlgorithm.title")),1),ke(pd,{modelValue:z.value,"onUpdate:modelValue":j[12]||(j[12]=K=>z.value=K),"available-layouts":N.value,loading:m(c),disabled:!re.value,onApply:_e},null,8,["modelValue","available-layouts","loading","disabled"]),p("div",jM,[p("p",HM,[(Y(!0),ne(We,null,_n(N.value,K=>(Y(),ne("div",{key:K.id},[p("strong",null,_(K.name)+":",1),Re(" "+_(K.description)+" ",1),K.requiresStats?(Y(),ne("span",WM," ("+_(m(n)("explorer.layoutAlgorithm.requiresAnalysis"))+")",1)):Pe("",!0),j[14]||(j[14]=p("br",null,null,-1))]))),128))])])]),p("div",qM,[p("h2",KM,_(m(n)("explorer.communityDetection.title")),1),ke(pm,{modelValue:O.value,"onUpdate:modelValue":j[13]||(j[13]=K=>O.value=K),"available-algorithms":X.value,detecting:me.value,disabled:!re.value,label:m(n)("explorer.communityDetection.algorithm"),onDetect:Ae},null,8,["modelValue","available-algorithms","detecting","disabled","label"])]),J.value?(Y(),ne("div",XM,[p("div",ZM,[p("h3",YM,_(m(n)("explorer.communityResults.title")),1),p("div",JM,[p("div",QM,[p("span",eO,_(m(n)("explorer.communityResults.communitiesFound")),1),p("span",tO,_(De.value?.numCommunities||"-"),1)]),p("div",nO,[p("span",rO,_(m(n)("explorer.communityResults.modularityScore")),1),p("span",iO,_(De.value?.modularity?.toFixed(3)||"-"),1)]),p("div",sO,[p("span",oO,_(m(n)("explorer.communityResults.computationTime")),1),p("span",aO,_(q.value||"-"),1)]),p("div",lO,[p("span",cO,_(m(n)("explorer.communityResults.algorithm")),1),p("span",dO,_(O.value),1)])]),p("div",uO,[p("p",hO,_(m(n)("explorer.communityResults.nodeColorsRepresent")),1)])])])):Pe("",!0),p("div",fO,[p("h3",pO,_(m(n)("explorer.instructions.title")),1),p("ul",gO,[p("li",{innerHTML:m(n)("explorer.instructions.dragNodes")},null,8,mO),p("li",{innerHTML:m(n)("explorer.instructions.scroll")},null,8,yO),p("li",{innerHTML:m(n)("explorer.instructions.dragBackground")},null,8,vO),p("li",{innerHTML:m(n)("explorer.instructions.hoverNodes")},null,8,_O),p("li",{innerHTML:m(n)("explorer.instructions.nodeSize")},null,8,bO),p("li",{innerHTML:m(n)("explorer.instructions.color")},null,8,wO)])])]),graph:Xe(()=>[m(c)?(Y(),ne("div",EO,[p("div",AO,[j[15]||(j[15]=p("div",{class:"inline-block animate-spin rounded-full h-12 w-12 border-4 border-purple-600 border-t-transparent mb-4"},null,-1)),p("p",kO,_(Ee.value),1)])])):Pe("",!0),p("div",{ref_key:"graphContainer",ref:a,class:"w-full h-full"},null,512)]),_:1}))}},CO=Gr(xO,[["__scopeId","data-v-1f545254"]]),SO=["aria-labelledby"],TO={class:"px-6 pt-6 pb-4 border-b border-gray-200 dark:border-gray-700"},RO=["id"],NO={class:"px-6 py-4"},LO={class:"space-y-4"},IO=["for"],DO={key:0,class:"text-red-500"},PO=["id","onUpdate:modelValue","required"],GO=["id","onUpdate:modelValue","required"],MO={value:"",disabled:""},OO=["value"],FO=["aria-labelledby"],$O=["name","value","onUpdate:modelValue","required"],zO={class:"text-2xl"},BO={class:"text-sm font-medium text-gray-700 dark:text-gray-300"},VO=["id","onUpdate:modelValue","placeholder","required"],UO={__name:"DialogForm",props:{visible:{type:Boolean,default:!1},title:{type:String,required:!0},fields:{type:Array,required:!0,default:()=>[]}},emits:["confirm","cancel"],setup(t,{emit:e}){const n=t,r=e,{t:i}=An(),s=`dialog-${Math.random().toString(36).substr(2,9)}`,o=ge([]),a=()=>{o.value=n.fields.map(()=>"")},l=()=>{if(!n.fields.every((u,h)=>!(u.required&&!o.value[h]?.trim()))){alert("Please fill in all required fields");return}r("confirm",[...o.value])},c=()=>{a(),r("cancel")};return Mt(()=>n.visible,d=>{d&&(a(),Ir(()=>{const u=document.querySelector("#field-0");u&&(u.focus(),u.tagName==="INPUT"&&u.select())}))}),Xn(()=>{a()}),(d,u)=>(Y(),Wn(t0,{to:"body"},[t.visible?(Y(),ne("div",{key:0,class:"dialog-overlay fixed inset-0 z-[9999] flex items-center justify-center",style:{"z-index":"9999 !important",position:"fixed !important"},onClick:dg(c,["self"])},[u[0]||(u[0]=p("div",{class:"absolute inset-0 bg-black/50 backdrop-blur-sm",style:{"z-index":"9998"}},null,-1)),p("div",{class:"dialog-content relative bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-lg w-full mx-4 max-h-[90vh] overflow-y-auto",style:{"z-index":"10000 !important",position:"relative !important"},role:"dialog","aria-modal":"true","aria-labelledby":`dialog-title-${s}`},[p("div",TO,[p("h3",{id:`dialog-title-${s}`,class:"text-lg font-semibold text-gray-900 dark:text-gray-100"},_(t.title),9,RO)]),p("div",NO,[p("div",LO,[(Y(!0),ne(We,null,_n(t.fields,(h,f)=>(Y(),ne("div",{key:f,class:"space-y-2"},[p("label",{for:`field-${f}`,class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},[Re(_(h.label)+" ",1),h.required?(Y(),ne("span",DO,"*")):Pe("",!0)],8,IO),h.type==="text"||!h.type?Rt((Y(),ne("input",{key:0,id:`field-${f}`,"onUpdate:modelValue":g=>o.value[f]=g,type:"text",required:h.required,class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent",onKeyup:[Ti(l,["enter"]),Ti(c,["esc"])]},null,40,PO)),[[Cu,o.value[f]]]):h.type==="select"?Rt((Y(),ne("select",{key:1,id:`field-${f}`,"onUpdate:modelValue":g=>o.value[f]=g,required:h.required,class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent",onKeyup:Ti(c,["esc"])},[p("option",MO,_(m(i)("family.dialogs.selectOption")),1),(Y(!0),ne(We,null,_n(h.options,g=>(Y(),ne("option",{key:g.value,value:g.value},_(g.text),9,OO))),128))],40,GO)),[[di,o.value[f]]]):h.type==="radio"?(Y(),ne("div",{key:2,class:"flex flex-wrap gap-2",role:"radiogroup","aria-labelledby":`field-${f}-label`},[(Y(!0),ne(We,null,_n(h.options,g=>(Y(),ne("label",{key:g.value,class:yt(["flex items-center gap-2 cursor-pointer px-3 py-2 border-2 rounded-lg transition-all flex-1 min-w-[120px]",{"border-green-500 bg-green-50 dark:bg-green-900/20":o.value[f]===g.value,"border-gray-300 dark:border-gray-600 hover:border-green-300":o.value[f]!==g.value}])},[Rt(p("input",{type:"radio",name:`field-${f}`,value:g.value,"onUpdate:modelValue":y=>o.value[f]=y,required:h.required,class:"text-green-600 focus:ring-green-500"},null,8,$O),[[Vl,o.value[f]]]),p("span",zO,_(g.emoji),1),p("span",BO,_(g.text),1)],2))),128))],8,FO)):h.type==="emoji"?Rt((Y(),ne("input",{key:3,id:`field-${f}`,"onUpdate:modelValue":g=>o.value[f]=g,type:"text",placeholder:h.placeholder||"Type an emoji ",required:h.required,maxlength:"10",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent text-2xl text-center",onKeyup:[Ti(l,["enter"]),Ti(c,["esc"])]},null,40,VO)),[[Cu,o.value[f]]]):Pe("",!0)]))),128))])]),p("div",{class:"px-6 py-4 border-t border-gray-200 dark:border-gray-700 flex justify-end gap-3"},[p("button",{type:"button",onClick:c,class:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-md transition-colors"}," Cancel "),p("button",{type:"button",onClick:l,class:"px-4 py-2 text-sm font-medium text-white bg-green-600 hover:bg-green-700 rounded-md transition-colors"}," OK ")])],8,SO)])):Pe("",!0)]))}},jO=Gr(UO,[["__scopeId","data-v-8db90550"]]),he={YOU:1,PARENT:2,SIBLING:3,UNCLE_AUNT:4,COUSIN:5,GRANDPARENT:6,NIECE_NEPHEW:7,CHILD:8,PARTNER:9},_t={MALE:"male",FEMALE:"female",OTHER:"other"},kl={[_t.MALE]:"",[_t.FEMALE]:"",[_t.OTHER]:""},HO={[he.YOU]:"#6366f1",[he.PARENT]:"#ec4899",[he.SIBLING]:"#3b82f6",[he.UNCLE_AUNT]:"#f97316",[he.COUSIN]:"#a855f7",[he.GRANDPARENT]:"#b45309",[he.NIECE_NEPHEW]:"#06b6d4",[he.CHILD]:"#14b8a6",[he.PARTNER]:"#f43f5e"};function Kr(t,e=null){const n=e===_t.FEMALE,r=e===_t.MALE||e===_t.OTHER;switch(t){case he.YOU:return"You";case he.PARENT:return n?"Mother":r?"Father":"Parent";case he.SIBLING:return n?"Sister":r?"Brother":"Sibling";case he.UNCLE_AUNT:return n?"Aunt":r?"Uncle":"Uncle/Aunt";case he.COUSIN:return"Cousin";case he.GRANDPARENT:return n?"Grandmother":r?"Grandfather":"Grandparent";case he.NIECE_NEPHEW:return n?"Niece":r?"Nephew":"Niece/Nephew";case he.CHILD:return n?"Daughter":r?"Son":"Child";case he.PARTNER:return n?"Wife":r?"Husband":"Partner/Spouse";default:return"Relative"}}const WO={nodes:[{id:"YOU",group:he.YOU,relationship:"You"}],links:[]},xl="familyTree";function Wf(t){return typeof t=="string"?t:t?.id||String(t)}class qO{constructor(e,n=r=>r){this.getGraphInstance=e,this.t=n}canAddParents(){const e=this.getGraphInstance();if(!e?.data)return{canAdd:!1,existingCount:0,message:"Graph not initialized"};const n=e.data.nodes.filter(r=>r.group===he.PARENT);return n.length>=2?{canAdd:!1,existingCount:n.length,message:this.t("family.operations.validation.maxParents")}:{canAdd:!0,existingCount:n.length,remainingSlots:2-n.length}}canAddGrandparents(e){const n=this.getGraphInstance();if(!n?.data)return{canAdd:!1,existingCount:0,message:"Graph not initialized"};const i=n.data.links.filter(s=>Wf(s.target)===e).map(s=>{const o=Wf(s.source);return n.data.nodes.find(a=>a.id===o)}).filter(s=>s&&s.group===he.GRANDPARENT);return i.length>=2?{canAdd:!1,existingCount:i.length,message:`${e} already has 2 grandparents. Cannot add more.`}:{canAdd:!0,existingCount:i.length,remainingSlots:2-i.length}}hasPartner(e){const n=this.getGraphInstance();return n?.data?n.data.nodes.filter(i=>i.group===he.PARTNER&&i.partnerOf===e).length>0:!1}getEligibleParents(){const e=this.getGraphInstance();return e?.data?e.data.nodes.filter(n=>{const r=n.group;return r!==he.GRANDPARENT&&r!==he.UNCLE_AUNT&&r!==he.PARENT}):[]}getEligibleForPartner(){const e=this.getGraphInstance();return e?.data?e.data.nodes.filter(n=>{const r=n.group;return(r===he.YOU||r===he.SIBLING||r===he.COUSIN||r===he.UNCLE_AUNT||r===he.NIECE_NEPHEW||r===he.CHILD)&&!this.hasPartner(n.id)}):[]}}function Je(t){return typeof t=="string"?t:t?.id||String(t)}class KO{constructor(e,n,r,i){this.graphManager=e,this.getGraphInstance=n,this.validation=r,this.saveFamily=i}addNodeWithRelationship(e,n,r,i=null,s=null,o=null){const a=o||Kr(r,i),l=this.getGraphInstance(),c=this.graphManager.addNode(e,n,r,!0);if(c&&typeof c.then=="function")return c.then(u=>(this._setNodeProperties(u,a,i,s,l),u));const d=c;return this._setNodeProperties(d,a,i,s,l),d}_setNodeProperties(e,n,r,i,s){this._setNodeProperty(e,"relationship",n,s),r&&this._setNodeProperty(e,"gender",r,s),i&&this._setNodeProperty(e,"avatar",i,s),requestAnimationFrame(()=>{if(s?.data){const o=s.data.nodes.find(a=>a.id===e.id);o&&(o.relationship||(o.relationship=n),r&&!o.gender&&(o.gender=r),i&&!o.avatar&&(o.avatar=i),i&&s.options?.renderMode==="avatars"&&this._updateNodeAvatarElement(e.id,i,s))}})}_updateNodeAvatarElement(e,n,r){r?.nodeGroup&&r.nodeGroup.selectAll("text").filter(i=>i.id===e).text(n)}_setNodeProperty(e,n,r,i){if(e&&(e[n]=r,i?.data)){let s=i.data.nodes.find(o=>o.id===e.id);s?(s[n]=r,s!==e&&(e[n]=r)):requestAnimationFrame(()=>{if(i?.data){const o=i.data.nodes.find(a=>a.id===e.id);o&&(o[n]=r)}})}}_setRelationshipOnNode(e,n,r){this._setNodeProperty(e,"relationship",n,r),requestAnimationFrame(()=>{if(r?.data){const i=r.data.nodes.find(s=>s.id===e.id);i&&!i.relationship&&(i.relationship=n)}})}addParents(e,n,r=null,i=null){const s=this.validation.canAddParents();if(!s.canAdd)return{success:!1,message:s.message};if(!e?.trim()&&!n?.trim())return{success:!1,message:"At least one parent name is required"};const o=s.remainingSlots;if(!this.getGraphInstance())return{success:!1,message:"Graph not initialized"};let l=null;e?.trim()&&o>=1&&(l=this.addNodeWithRelationship(["YOU"],e.trim(),he.PARENT,_t.FEMALE,r?.trim()||null)?.id||e.trim());let c=null;const d=l?o>=2:o>=1;if(n?.trim()&&d)c=this.addNodeWithRelationship(["YOU"],n.trim(),he.PARENT,_t.MALE,i?.trim()||null)?.id||n.trim();else if(n?.trim()&&!d)return{success:!0,message:"Only one parent slot available. Added only the mother."};return l&&c&&this.graphManager.addLink?requestAnimationFrame(()=>{this.graphManager.addLink(l,c)&&this.saveFamily()}):this.saveFamily(),{success:!0}}addSibling(e,n,r=null){if(!e?.trim())return{success:!1,message:"Sibling name is required"};if(!n)return{success:!1,message:"Gender is required"};const i=this.getGraphInstance();if(!i?.data)return{success:!1,message:"Graph not initialized"};const o=i.data.links.filter(u=>{const h=Je(u.source),f=Je(u.target);return h==="YOU"||f==="YOU"}).map(u=>{const h=Je(u.source),f=Je(u.target);return h==="YOU"?f:h}).map(u=>{const h=i.data.nodes.find(f=>f.id===u);return h&&h.group===he.PARENT?u:null}).filter(u=>u!==null),a=i.data.nodes.filter(u=>u.group===he.SIBLING||u.id==="YOU").map(u=>u.id),l=[];o.length>0?l.push(...o):l.push("YOU"),a.forEach(u=>{l.includes(u)||l.push(u)});const c=this.addNodeWithRelationship(l,e.trim(),he.SIBLING,n,r?.trim()||null);if(!c)return{success:!1,message:"Failed to add sibling"};const d=c.id||e.trim();return this.graphManager.addLink&&a.forEach(u=>{u!==d&&requestAnimationFrame(()=>{this.graphManager.addLink(d,u,!0)})}),this.saveFamily(),{success:!0}}addGrandparents(e,n,r,i=null,s=null){if(!this.graphManager?.hasNode||!this.graphManager.hasNode(e))return{success:!1,message:"Parent not found"};const o=this.validation.canAddGrandparents(e);if(!o.canAdd)return{success:!1,message:o.message};if(!n?.trim()&&!r?.trim())return{success:!1,message:"At least one grandparent name is required"};const a=o.remainingSlots;if(!this.getGraphInstance())return{success:!1,message:"Graph not initialized"};let c=null;n?.trim()&&a>=1&&(c=this.addNodeWithRelationship([e],n.trim(),he.GRANDPARENT,_t.FEMALE,i?.trim()||null)?.id||n.trim());let d=null;const u=c?a>=2:a>=1;if(r?.trim()&&u)d=this.addNodeWithRelationship([e],r.trim(),he.GRANDPARENT,_t.MALE,s?.trim()||null)?.id||r.trim();else if(r?.trim()&&!u)return{success:!0,message:"Only one grandparent slot available for this parent. Added only the grandmother."};return c&&d&&this.graphManager.addLink?requestAnimationFrame(()=>{this.graphManager.addLink(c,d)&&this.saveFamily()}):this.saveFamily(),{success:!0}}addUncleAunt(e,n,r,i=null){if(!this.graphManager?.hasNode||!this.graphManager.hasNode(e))return{success:!1,message:"Parent not found"};if(!n?.trim())return{success:!1,message:"Uncle/aunt name is required"};if(!r)return{success:!1,message:"Gender is required"};const s=this.getGraphInstance();if(!s?.data)return{success:!1,message:"Graph not initialized"};const o=s.data.links,a=o.filter(f=>(Je(f.source),Je(f.target)===e)).map(f=>{const g=Je(f.source);return s.data.nodes.find(y=>y.id===g)}).filter(f=>f&&f.group===he.GRANDPARENT).map(f=>f.id),l=[];if(a.length>0){const f=o.filter(g=>{const y=Je(g.source);return a.includes(y)}).map(g=>{const y=Je(g.target);return s.data.nodes.find(w=>w.id===y)}).filter(g=>g&&(g.group===he.PARENT||g.group===he.UNCLE_AUNT)).map(g=>g.id);l.push(...f)}else l.push(e);const c=[...new Set(l)],d=[...a,...c],u=this.addNodeWithRelationship(d,n.trim(),he.UNCLE_AUNT,r,i?.trim()||null);if(!u)return{success:!1,message:"Failed to add uncle/aunt"};const h=u.id||n.trim();return this.graphManager.addLink&&c.forEach(f=>{f!==h&&requestAnimationFrame(()=>{this.graphManager.addLink(h,f,!0)})}),this.saveFamily(),{success:!0}}addCousin(e,n,r,i=null){if(!this.graphManager?.hasNode||!this.graphManager.hasNode(e))return{success:!1,message:"Uncle/aunt not found"};if(!r)return{success:!1,message:"Gender is required"};if(!n?.trim())return{success:!1,message:"Cousin name is required"};const s=this.getGraphInstance();if(!s?.data)return{success:!1,message:"Graph not initialized"};const o=s.data.nodes.find(h=>h.group===he.PARTNER&&h.partnerOf===e),a=s.data.links,l=s.data.nodes.filter(h=>{if(h.group!==he.COUSIN)return!1;const f=a.some(g=>{const y=Je(g.source),w=Je(g.target);return y===h.id&&w===e||w===h.id&&y===e});if(o){const g=a.some(y=>{const w=Je(y.source),b=Je(y.target);return w===h.id&&b===o.id||b===h.id&&w===o.id});return f||g}return f}).map(h=>h.id),c=[e];o&&c.push(o.id),l.forEach(h=>{c.includes(h)||c.push(h)});const d=this.addNodeWithRelationship(c,n.trim(),he.COUSIN,r,i?.trim()||null);if(!d)return{success:!1,message:"Failed to add cousin"};const u=d.id||n.trim();return this.graphManager.addLink&&l.forEach(h=>{h!==u&&requestAnimationFrame(()=>{this.graphManager.addLink(u,h,!0)})}),this.saveFamily(),{success:!0}}addChild(e,n,r,i=null){if(!this.graphManager?.hasNode||!this.graphManager.hasNode(e))return{success:!1,message:"Parent not found"};if(!n?.trim())return{success:!1,message:"Child name is required"};if(!r)return{success:!1,message:"Gender is required"};const s=this.getGraphInstance();if(!s?.data)return{success:!1,message:"Graph not initialized"};const o=s.data.nodes.find(g=>g.id===e);if(!o)return{success:!1,message:"Parent not found"};let a=he.CHILD;o.group===he.YOU||o.group===he.PARTNER?a=he.CHILD:o.group===he.SIBLING?a=he.NIECE_NEPHEW:a=he.CHILD;const l=s.data.nodes.find(g=>g.group===he.PARTNER&&g.partnerOf===e),c=s.data.links,d=s.data.nodes.filter(g=>{if(g.group!==a)return!1;const y=c.some(w=>{const b=Je(w.source),E=Je(w.target);return b===g.id&&E===e||E===g.id&&b===e});if(l){const w=c.some(b=>{const E=Je(b.source),A=Je(b.target);return E===g.id&&A===l.id||A===g.id&&E===l.id});return y||w}return y}).map(g=>g.id),u=[e];l&&u.push(l.id),d.forEach(g=>{u.includes(g)||u.push(g)});const h=this.addNodeWithRelationship(u,n.trim(),a,r,i?.trim()||null);if(!h)return{success:!1,message:"Failed to add child"};const f=h.id||n.trim();return this.graphManager.addLink&&d.forEach(g=>{g!==f&&requestAnimationFrame(()=>{this.graphManager.addLink(f,g,!0)})}),this.saveFamily(),{success:!0}}addNieceNephew(e,n,r,i=null){if(!this.graphManager?.hasNode||!this.graphManager.hasNode(e))return{success:!1,message:"Sibling not found"};if(!n?.trim())return{success:!1,message:"Niece/nephew name is required"};if(!r)return{success:!1,message:"Gender is required"};const s=this.getGraphInstance();if(!s?.data)return{success:!1,message:"Graph not initialized"};const o=s.data.nodes.find(h=>h.group===he.PARTNER&&h.partnerOf===e),a=s.data.links,l=s.data.nodes.filter(h=>{if(h.group!==he.NIECE_NEPHEW)return!1;const f=a.some(g=>{const y=Je(g.source),w=Je(g.target);return y===h.id&&w===e||w===h.id&&y===e});if(o){const g=a.some(y=>{const w=Je(y.source),b=Je(y.target);return w===h.id&&b===o.id||b===h.id&&w===o.id});return f||g}return f}).map(h=>h.id),c=[e];o&&c.push(o.id),l.forEach(h=>{c.includes(h)||c.push(h)});const d=this.addNodeWithRelationship(c,n.trim(),he.NIECE_NEPHEW,r,i?.trim()||null);if(!d)return{success:!1,message:"Failed to add niece/nephew"};const u=d.id||n.trim();return this.graphManager.addLink&&l.forEach(h=>{h!==u&&requestAnimationFrame(()=>{this.graphManager.addLink(u,h,!0)})}),this.saveFamily(),{success:!0}}addPartner(e,n,r,i=null){if(!this.graphManager?.hasNode||!this.graphManager.hasNode(e))return{success:!1,message:"Person not found"};if(!n?.trim())return{success:!1,message:"Partner name is required"};if(!r)return{success:!1,message:"Gender is required"};if(this.validation.hasPartner(e))return{success:!1,message:`${e} already has a partner!`};const s=this.getGraphInstance();let o=null;if(s?.data){const c=s.data.nodes.find(d=>d.id===e);if(c){const d=c.relationship||Kr(c.group);d==="You"?o="Your Partner/Spouse":o=`${d}'s Partner`}}const a=this.addNodeWithRelationship([e],n.trim(),he.PARTNER,r,i?.trim()||null,o),l=c=>{this._setNodeProperty(c,"partnerOf",e,s),requestAnimationFrame(()=>{if(s?.data){const d=s.data.nodes.find(u=>u.id===c.id);d&&(d.partnerOf=e)}this.saveFamily()})};return a&&typeof a.then=="function"?a.then(c=>{l(c)}):l(a),{success:!0}}}function Ln(t){return typeof t=="string"?t:t?.id||String(t)}class XO{constructor(e,n,r,i=s=>s){this.getGraphInstance=e,this.onStatusChange=n,this.log=r,this.t=i,this.autoSaveInterval=null,this.autoSaveIntervalMs=3e4}getInitialDataset(){return{...WO}}loadFamily(){try{const e=localStorage.getItem(xl);if(e){const n=JSON.parse(e);return n.links&&Array.isArray(n.links)&&(n.links=n.links.map(r=>({...r,source:Ln(r.source),target:Ln(r.target)}))),n.nodes&&Array.isArray(n.nodes)&&(n.nodes=n.nodes.filter(r=>r&&r.id),n.nodes.forEach(r=>{if(!r.relationship&&r.group!==void 0)if(r.group===he.PARTNER){const s=(n.links||[]).filter(o=>{const a=Ln(o.source),l=Ln(o.target);return a===r.id||l===r.id});if(s.length>0){const o=s[0],a=Ln(o.source)===r.id?Ln(o.target):Ln(o.source),l=n.nodes.find(c=>c.id===a);if(l){const c=l.relationship||Kr(l.group);c==="You"?r.relationship="Your Partner/Spouse":r.relationship=`${c}'s Partner`}else r.relationship=Kr(r.group)}else r.relationship=Kr(r.group)}else r.relationship=Kr(r.group)})),this.log.debug("Loaded family tree from storage",{nodeCount:n.nodes?.length||0,linkCount:n.links?.length||0}),n}}catch(e){this.log.error("Failed to load family tree",{error:e.message})}return null}saveFamily(){const e=this.getGraphInstance();if(!e?.data){this.log.warn("Cannot save - graph not initialized");return}try{const n=e.data.links.map(s=>({source:Ln(s.source),target:Ln(s.target)})),i={nodes:e.data.nodes.map(s=>{const{id:o,group:a,relationship:l,...c}=s,d={id:o,group:a};return l!==void 0&&(d.relationship=l),c.gender!==void 0&&(d.gender=c.gender),c.avatar!==void 0&&(d.avatar=c.avatar),c.partnerOf!==void 0&&(d.partnerOf=c.partnerOf),c.centrality!==void 0&&(d.centrality=c.centrality),c.community!==void 0&&(d.community=c.community),c.degree!==void 0&&(d.degree=c.degree),c.eigenvector!==void 0&&(d.eigenvector=c.eigenvector),c.betweenness!==void 0&&(d.betweenness=c.betweenness),d}),links:n};localStorage.setItem(xl,JSON.stringify(i)),this.log.debug("Family tree saved",{nodeCount:i.nodes.length,linkCount:i.links.length}),this.showStatus(this.t("family.storage.saved"),"success")}catch(n){this.log.error("Failed to save family tree",{error:n.message}),this.showStatus(this.t("family.storage.error"),"error")}}resetFamily(e,n){const r=!!this.autoSaveInterval;r&&this.stopAutoSave(),localStorage.removeItem(xl);const i=this.getInitialDataset(),s=n.value||n;if(s){const o=()=>{s.off("ready",o),r&&this.startAutoSave(),this.saveFamily()};s.on("ready",o)}e(i.nodes,i.links),this.log.info("Family tree reset"),this.showStatus(this.t("family.storage.reset"),"success")}startAutoSave(){this.autoSaveInterval||(this.autoSaveInterval=setInterval(()=>{document.visibilityState==="visible"&&this.saveFamily()},this.autoSaveIntervalMs),this.log.debug("Auto-save started",{intervalMs:this.autoSaveIntervalMs}))}stopAutoSave(){this.autoSaveInterval&&(clearInterval(this.autoSaveInterval),this.autoSaveInterval=null,this.log.debug("Auto-save stopped"))}showStatus(e,n="info"){this.onStatusChange&&this.onStatusChange(e,n)}}function Vr(t){return[{value:_t.MALE,emoji:kl[_t.MALE],text:t("family.dialogs.genderOptions.male")},{value:_t.FEMALE,emoji:kl[_t.FEMALE],text:t("family.dialogs.genderOptions.female")},{value:_t.OTHER,emoji:kl[_t.OTHER],text:t("family.dialogs.genderOptions.other")}]}const Ge={ADD_PARENTS:"addParents",ADD_SIBLING:"addSibling",ADD_GRANDPARENTS:"addGrandparents",ADD_UNCLE_AUNT:"addUncleAunt",ADD_COUSIN:"addCousin",ADD_CHILD:"addChild",ADD_NIECE_NEPHEW:"addNieceNephew",ADD_PARTNER:"addPartner"};class av{constructor(e,n,r=i=>i){this.getGraphInstance=e,this.validation=n,this.t=r}getAddParentsDialog(){const e=this.validation.canAddParents();return e&&!e.canAdd?null:{title:this.t("family.dialogs.addParents"),fields:[{label:this.t("family.dialogs.fields.motherName"),type:"text",required:!1},{label:this.t("family.dialogs.fields.motherAvatar"),type:"emoji",required:!1,placeholder:this.t("family.dialogs.placeholders.mother")},{label:this.t("family.dialogs.fields.fatherName"),type:"text",required:!1},{label:this.t("family.dialogs.fields.fatherAvatar"),type:"emoji",required:!1,placeholder:this.t("family.dialogs.placeholders.father")}],action:Ge.ADD_PARENTS}}getAddSiblingDialog(){return{title:this.t("family.dialogs.addSibling"),fields:[{label:this.t("family.dialogs.fields.siblingName"),type:"text",required:!0},{label:this.t("family.dialogs.fields.gender"),type:"radio",options:Vr(this.t),required:!0},{label:this.t("family.dialogs.fields.avatar"),type:"emoji",required:!1,placeholder:this.t("family.dialogs.placeholders.avatar")}],action:Ge.ADD_SIBLING}}getAddGrandparentsDialog(){const e=this.getGraphInstance();if(!e?.data)return null;const n=e.data.nodes.filter(i=>i.group===he.PARENT);if(n.length===0)return null;const r=n.map(i=>({value:i.id,text:this.t("family.dropdownOptions.parentSideTemplate").replace("{name}",i.id)}));return{title:this.t("family.dialogs.addGrandparents"),fields:[{label:this.t("family.dialogs.fields.parentsSide"),type:"select",options:r,required:!0},{label:this.t("family.dialogs.fields.grandmotherName"),type:"text",required:!1},{label:this.t("family.dialogs.fields.grandmotherAvatar"),type:"emoji",required:!1,placeholder:this.t("family.dialogs.placeholders.grandmother")},{label:this.t("family.dialogs.fields.grandfatherName"),type:"text",required:!1},{label:this.t("family.dialogs.fields.grandfatherAvatar"),type:"emoji",required:!1,placeholder:this.t("family.dialogs.placeholders.grandfather")}],action:Ge.ADD_GRANDPARENTS}}getAddUncleAuntDialog(){const e=this.getGraphInstance();if(!e?.data)return null;const n=e.data.nodes.filter(i=>i.group===he.PARENT);if(n.length===0)return null;const r=n.map(i=>({value:i.id,text:this.t("family.dropdownOptions.parentSideTemplate").replace("{name}",i.id)}));return{title:this.t("family.dialogs.addUncleAunt"),fields:[{label:this.t("family.dialogs.fields.parentsSide"),type:"select",options:r,required:!0},{label:this.t("family.dialogs.fields.name"),type:"text",required:!0},{label:this.t("family.dialogs.fields.gender"),type:"radio",options:Vr(this.t),required:!0},{label:this.t("family.dialogs.fields.avatar"),type:"emoji",required:!1,placeholder:this.t("family.dialogs.placeholders.avatar")}],action:Ge.ADD_UNCLE_AUNT}}getAddCousinDialog(){const e=this.getGraphInstance();if(!e?.data)return null;const n=e.data.nodes.filter(i=>i.group===he.UNCLE_AUNT);if(n.length===0)return null;const r=n.map(i=>({value:i.id,text:this.t("family.dropdownOptions.uncleAuntChildTemplate").replace("{name}",i.id)}));return{title:this.t("family.dialogs.addCousin"),fields:[{label:this.t("family.dialogs.fields.uncleAuntField"),type:"select",options:r,required:!0},{label:this.t("family.dialogs.fields.name"),type:"text",required:!0},{label:this.t("family.dialogs.fields.gender"),type:"radio",options:Vr(this.t),required:!0},{label:this.t("family.dialogs.fields.avatar"),type:"emoji",required:!1,placeholder:this.t("family.dialogs.placeholders.avatar")}],action:Ge.ADD_COUSIN}}getAddChildDialog(){const e=this.validation.getEligibleParents();if(e.length===0)return null;const n=e.map(r=>{let i="";switch(r.group){case he.YOU:i=this.t("family.dropdownOptions.yourChild");break;case he.SIBLING:i=this.t("family.dropdownOptions.nieceNephewTemplate").replace("{name}",r.id);break;case he.COUSIN:i=this.t("family.dropdownOptions.cousinChildTemplate").replace("{name}",r.id);break;case he.CHILD:i=this.t("family.dropdownOptions.grandchildTemplate").replace("{name}",r.id);break;case he.NIECE_NEPHEW:i=this.t("family.dropdownOptions.childTemplate").replace("{name}",r.id);break;case he.PARTNER:i=this.t("family.dropdownOptions.childTemplate").replace("{name}",r.id);break;default:i=this.t("family.dropdownOptions.childTemplate").replace("{name}",r.id)}return{value:r.id,text:i}});return{title:this.t("family.dialogs.addChild"),fields:[{label:this.t("family.dialogs.fields.parent"),type:"select",options:n,required:!0},{label:this.t("family.dialogs.fields.name"),type:"text",required:!0},{label:this.t("family.dialogs.fields.gender"),type:"radio",options:Vr(this.t),required:!0},{label:this.t("family.dialogs.fields.avatar"),type:"emoji",required:!1,placeholder:this.t("family.dialogs.placeholders.avatar")}],action:Ge.ADD_CHILD}}getAddNieceNephewDialog(){const e=this.getGraphInstance();if(!e?.data)return null;const n=e.data.nodes.filter(i=>i.group===he.SIBLING);if(n.length===0)return null;const r=n.map(i=>({value:i.id,text:this.t("family.dropdownOptions.siblingChildTemplate").replace("{name}",i.id)}));return{title:this.t("family.dialogs.addNieceNephew"),fields:[{label:this.t("family.dialogs.fields.sibling"),type:"select",options:r,required:!0},{label:this.t("family.dialogs.fields.name"),type:"text",required:!0},{label:this.t("family.dialogs.fields.gender"),type:"radio",options:Vr(this.t),required:!0},{label:this.t("family.dialogs.fields.avatar"),type:"emoji",required:!1,placeholder:this.t("family.dialogs.placeholders.avatar")}],action:Ge.ADD_NIECE_NEPHEW}}getAddPartnerDialog(){const e=this.validation.getEligibleForPartner();if(e.length===0)return null;const n=e.map(r=>{let i="";switch(r.group){case he.YOU:i=this.t("family.operations.relationships.yourPartner");break;case he.SIBLING:i=this.t("family.dropdownOptions.siblingPartnerTemplate").replace("{name}",r.id);break;case he.COUSIN:i=this.t("family.dropdownOptions.partnerTemplate").replace("{name}",r.id);break;case he.UNCLE_AUNT:i=this.t("family.dropdownOptions.partnerTemplate").replace("{name}",r.id);break;case he.NIECE_NEPHEW:i=this.t("family.dropdownOptions.partnerTemplate").replace("{name}",r.id);break;case he.CHILD:i=this.t("family.dropdownOptions.childPartnerTemplate").replace("{name}",r.id);break;default:i=this.t("family.dropdownOptions.partnerTemplate").replace("{name}",r.id)}return{value:r.id,text:i}});return{title:this.t("family.dialogs.addPartner"),fields:[{label:this.t("family.dialogs.fields.partnerOf"),type:"select",options:n,required:!0},{label:this.t("family.dialogs.fields.name"),type:"text",required:!0},{label:this.t("family.dialogs.fields.gender"),type:"radio",options:Vr(this.t),required:!0},{label:this.t("family.dialogs.fields.avatar"),type:"emoji",required:!1,placeholder:this.t("family.dialogs.placeholders.avatar")}],action:Ge.ADD_PARTNER}}getValidationMessage(e){const n=this.getGraphInstance();switch(e){case Ge.ADD_PARENTS:return this.validation.canAddParents()?.message||"Cannot add more parents (maximum 2)";case Ge.ADD_GRANDPARENTS:return n?.data?.nodes.filter(i=>i.group===he.PARENT)?.length===0?"You must add parents first before adding grandparents":"No parents available";case Ge.ADD_UNCLE_AUNT:return n?.data?.nodes.filter(i=>i.group===he.PARENT)?.length===0?"You must add parents first before adding uncles/aunts":"No parents available";case Ge.ADD_COUSIN:return n?.data?.nodes.filter(i=>i.group===he.UNCLE_AUNT)?.length===0?"You must add uncles/aunts first before adding cousins":"No uncles/aunts available";case Ge.ADD_CHILD:return"No eligible parents available to have children";case Ge.ADD_NIECE_NEPHEW:return n?.data?.nodes.filter(i=>i.group===he.SIBLING)?.length===0?"You must add siblings first before adding nieces/nephews":"No siblings available";case Ge.ADD_PARTNER:return"No eligible people available for partners (they may already have partners)";default:return"Operation cannot be performed"}}executeAction(e,n,r){switch(e){case Ge.ADD_PARENTS:return r.addParents(n[0],n[2],n[1],n[3]);case Ge.ADD_SIBLING:return r.addSibling(n[0],n[1],n[2]);case Ge.ADD_GRANDPARENTS:return r.addGrandparents(n[0],n[1],n[3],n[2],n[4]);case Ge.ADD_UNCLE_AUNT:return r.addUncleAunt(n[0],n[1],n[2],n[3]);case Ge.ADD_COUSIN:return r.addCousin(n[0],n[1],n[2],n[3]);case Ge.ADD_CHILD:return r.addChild(n[0],n[1],n[2],n[3]);case Ge.ADD_NIECE_NEPHEW:return r.addNieceNephew(n[0],n[1],n[2],n[3]);case Ge.ADD_PARTNER:return r.addPartner(n[0],n[1],n[2],n[3]);default:return{success:!1,message:`Unknown action: ${e}`}}}}class ZO{constructor(e,n,r=""){this.nodes=JSON.parse(JSON.stringify(e)),this.links=n.map(i=>({source:typeof i.source=="string"?i.source:i.source.id,target:typeof i.target=="string"?i.target:i.target.id})),this.description=r,this.timestamp=Date.now()}getNodes(){return JSON.parse(JSON.stringify(this.nodes))}getLinks(){return JSON.parse(JSON.stringify(this.links))}getDescription(){return this.description}getTimestamp(){return this.timestamp}getSummary(){return{nodeCount:this.nodes.length,linkCount:this.links.length,description:this.description,timestamp:new Date(this.timestamp).toLocaleString()}}}class YO{constructor(e={}){this.undoStack=[],this.redoStack=[],this.maxHistorySize=e.maxHistorySize||10}saveState(e){this.undoStack.push(e),this.undoStack.length>this.maxHistorySize&&this.undoStack.shift(),this.redoStack=[]}undo(){if(this.undoStack.length===0)return null;const e=this.undoStack.pop();return this.redoStack.push(e),e}redo(){if(this.redoStack.length===0)return null;const e=this.redoStack.pop();return this.undoStack.push(e),e}canUndo(){return this.undoStack.length>0}canRedo(){return this.redoStack.length>0}getUndoCount(){return this.undoStack.length}getRedoCount(){return this.redoStack.length}getUndoDescription(){return this.undoStack.length===0?null:this.undoStack[this.undoStack.length-1].getDescription()}getRedoDescription(){return this.redoStack.length===0?null:this.redoStack[this.redoStack.length-1].getDescription()}clear(){this.undoStack=[],this.redoStack=[]}getHistorySummary(){return{undoCount:this.undoStack.length,redoCount:this.redoStack.length,canUndo:this.canUndo(),canRedo:this.canRedo(),nextUndo:this.getUndoDescription(),nextRedo:this.getRedoDescription()}}}class JO{constructor({graphManager:e,onStatusChange:n=null,lang:r="en"}){this.graphManager=e,this.onStatusChange=n,this.lang=r,this.log=Ze({prefix:"FamilyController",level:"info"});const i=()=>this.getGraphInstance(),s=o=>xg(this.lang,o);this.validation=new qO(i,s),this.storage=new XO(i,n,this.log,s),this.operations=new KO(e,i,this.validation,()=>this.storage.saveFamily()),this.dialogService=new av(i,this.validation,s),this.mementoHistory=new YO({maxHistorySize:10}),this.storage.startAutoSave()}getInitialDataset(){return this.storage.getInitialDataset()}loadFamily(){return this.storage.loadFamily()}getGraphInstance(){return this.graphManager?.graphInstance?this.graphManager.graphInstance.value||this.graphManager.graphInstance:null}saveFamily(){this.storage.saveFamily()}resetFamily(){this.storage.resetFamily(this.graphManager.loadData,this.graphManager.graphInstance)}lockGraph(){if(!this.graphManager?.lockPositions){this.log.warn("lockPositions not available");return}this.graphManager.lockPositions(),this.showStatus("Graph locked","success")}unlockGraph(){if(!this.graphManager?.unlockPositions){this.log.warn("unlockPositions not available");return}this.graphManager.unlockPositions(),this.showStatus("Graph unlocked","success")}saveAsPNG(e="family-tree.png"){if(!this.graphManager?.saveAsPNG){this.log.warn("saveAsPNG not available");return}this.graphManager.saveAsPNG(e),this.showStatus("Image saved!","success")}canAddParents(){return this.validation.canAddParents()}getEligibleParents(){return this.validation.getEligibleParents()}getEligibleForPartner(){return this.validation.getEligibleForPartner()}addParents(e,n=null){return this.operations.addParents(e,n)}addSibling(e){return this.operations.addSibling(e)}addGrandparents(e,n,r=null){return this.operations.addGrandparents(e,n,r)}addUncleAunt(e,n){return this.operations.addUncleAunt(e,n)}addCousin(e,n){return this.operations.addCousin(e,n)}addChild(e,n){return this.operations.addChild(e,n)}addNieceNephew(e,n){return this.operations.addNieceNephew(e,n)}addPartner(e,n){return this.operations.addPartner(e,n)}getDialogService(){return this.dialogService}getOperations(){return this.operations}async applyLayout(e){if(e==="none"){const n=" Using D3 physics simulation (no layout algorithm)";return this.log.debug("Using default D3 physics simulation"),this.showStatus(n,"info"),this.graphManager?.unlockPositions&&this.graphManager.unlockPositions(),{success:!0,layoutId:"none",message:"Using default D3 physics simulation"}}try{if(this.log.debug("Applying layout algorithm",{layoutId:e}),this.showStatus(`Applying ${e} layout...`,"info"),!this.graphManager?.applyLayout)return{success:!1,error:"Layout functionality not available"};if(await this.graphManager.applyLayout(e)){const r=` Applied ${e} layout algorithm`;return this.log.info("Layout applied successfully",{layoutId:e}),this.showStatus(r,"success"),{success:!0,layoutId:e}}return this.log.warn("Layout application failed",{layoutId:e}),{success:!1,error:"Layout application failed"}}catch(n){const r=` Layout failed: ${n.message}`;return this.log.error("Layout application failed",{layoutId:e,error:n.message,stack:n.stack}),this.showStatus(r,"error"),{success:!1,error:n.message}}}getAvailableLayouts(){return this.graphManager?.getAvailableLayouts?this.graphManager.getAvailableLayouts():[]}showStatus(e,n="info"){this.onStatusChange&&this.onStatusChange(e,n)}saveStateBeforeOperation(e){const n=this.getGraphInstance();if(!n||!n.data){this.log.warn("Cannot save state: graph not available");return}const r=new ZO(n.data.nodes,n.data.links,e);this.mementoHistory.saveState(r),this.log.debug("State saved",{description:e,summary:r.getSummary()})}undo(){if(!this.mementoHistory.canUndo())return{success:!1,message:"Nothing to undo"};const e=this.mementoHistory.undo();if(!e)return{success:!1,message:"Failed to undo"};if(!this.getGraphInstance())return{success:!1,message:"Graph not available"};const r=e.getNodes(),i=e.getLinks();this.graphManager.loadData(r,i);const s=`Undid: ${e.getDescription()}`;return this.log.info("Undo successful",{description:e.getDescription()}),this.showStatus(s,"info"),{success:!0,message:s}}redo(){if(!this.mementoHistory.canRedo())return{success:!1,message:"Nothing to redo"};const e=this.mementoHistory.redo();if(!e)return{success:!1,message:"Failed to redo"};if(!this.getGraphInstance())return{success:!1,message:"Graph not available"};const r=e.getNodes(),i=e.getLinks();this.graphManager.loadData(r,i);const s=`Redid: ${e.getDescription()}`;return this.log.info("Redo successful",{description:e.getDescription()}),this.showStatus(s,"info"),{success:!0,message:s}}canUndo(){return this.mementoHistory.canUndo()}canRedo(){return this.mementoHistory.canRedo()}getHistorySummary(){return this.mementoHistory.getHistorySummary()}dispose(){this.storage.stopAutoSave(),this.log.info("FamilyController disposed")}}const QO={class:"family-page"},e3={class:"demo-controls-header"},t3={class:"demo-controls-title"},n3={class:"demo-controls-description"},r3={class:"info-box-green mb-4"},i3={class:"info-box-title-green"},s3={class:"info-box-text-green"},o3={class:"status-section"},a3={class:"demo-controls-section-title mb-3"},l3={class:"status-box"},c3={key:0,class:"status-empty"},d3={class:"text-xs"},u3={class:"text-xs mt-1 opacity-60"},h3={key:1,class:"space-y-2"},f3={class:"status-icon"},p3={key:0},g3={key:1},m3={key:2},y3={class:"status-text"},v3={class:"controls-section-bordered"},_3={class:"demo-controls-section-title"},b3={class:"btn-grid"},w3={class:"controls-section-bordered"},E3={class:"demo-controls-section-title"},A3={class:"btn-grid"},k3=["disabled"],x3=["disabled"],C3={class:"controls-section-bordered"},S3={class:"demo-controls-section-title"},T3={class:"render-mode-container"},R3={class:"render-mode-text"},N3={class:"render-mode-text"},L3={class:"info-box-blue"},I3={class:"info-box-text-yellow"},D3={class:"controls-section-bordered"},P3={class:"demo-controls-section-title"},G3={class:"controls-section-bordered"},M3={class:"legend-title"},O3={class:"legend-list"},F3={class:"legend-item"},$3={class:"legend-text"},z3={class:"legend-item"},B3={class:"legend-text"},V3={class:"legend-item"},U3={class:"legend-text"},j3={class:"legend-item"},H3={class:"legend-text"},W3={class:"legend-item"},q3={class:"legend-text"},K3={class:"legend-item"},X3={class:"legend-text"},Z3={class:"legend-item"},Y3={class:"legend-text"},J3={class:"legend-item"},Q3={class:"legend-text"},eF={class:"legend-item"},tF={class:"legend-text"},nF={class:"controls-section-bordered"},rF={class:"demo-controls-section-title"},iF={class:"info-box-yellow mt-3"},sF={class:"info-box-text-yellow"},oF={key:0,class:"italic"},aF={class:"info-box-blue"},lF={class:"info-box-title-blue text-sm"},cF={class:"info-box-text-blue space-y-1"},dF=["innerHTML"],uF=["innerHTML"],hF=["innerHTML"],fF=["innerHTML"],pF=["innerHTML"],gF=["innerHTML"],mF=["innerHTML"],yF={key:0,class:"loading-overlay"},vF={class:"text-center"},_F={class:"text-secondary"},bF={__name:"FamilyPage",setup(t){const e=Ze({prefix:"FamilyPage",level:"info"}),{t:n,lang:r}=An(),{trackFamilyAction:i,trackAnalysis:s}=Ta(),o=Od({colorBy:"group",colorScheme:"categorical",showLabels:!0,autoComputeCentrality:!1,customColorFunction:j=>{const K=j.group||0;return HO[K]||null}}),{graphContainer:a,graphInstance:l,loading:c,loadData:d,addNode:u,addLink:h,hasNode:f,getNodeIds:g,lockPositions:y,unlockPositions:w,saveAsPNG:b,applyLayout:E,getAvailableLayouts:A,analyzeGraph:v,analysisProgress:S}=o,L=ge(""),G=ge("info"),V=ge("Loading graph..."),F=ge(!1),$=ge(""),H=ge([]),z=ge(null),N=ge("none"),k=ge([]),I=ge(!1),C=ge(!1),x=ge(!1),O=ge(["eigenvector"]),X=ge("eigenvector"),re=ge(!1),fe=ge("colors"),me=ge(!1);let W=null;const ve=(j,K)=>{L.value=j,G.value=K},Ee=()=>{W&&(C.value=W.canUndo(),x.value=W.canRedo())},De=j=>{(j.ctrlKey||j.metaKey)&&j.key==="z"&&!j.shiftKey?(j.preventDefault(),_e()):((j.ctrlKey||j.metaKey)&&j.key==="y"||(j.ctrlKey||j.metaKey)&&j.shiftKey&&j.key==="z")&&(j.preventDefault(),Ae())},q=()=>{const j={graphInstance:l,loadData:d,addNode:(Ce,He,It)=>u(Ce,He,It,!0),addLink:(Ce,He)=>h(Ce,He,!0),hasNode:f,getNodeIds:g,lockPositions:y,unlockPositions:w,saveAsPNG:b,applyLayout:E,getAvailableLayouts:A};W=new JO({graphManager:j,onStatusChange:ve,lang:r.value}),k.value=W.getAvailableLayouts();const K=W.loadFamily();if(K)d(K.nodes,K.links);else{const Ce=W.getInitialDataset();d(Ce.nodes,Ce.links)}},J=async(j,K)=>{if(!W){ve("Graph is still loading. Please wait...","error");return}const Ce=W.getDialogService(),He=K();if(!He){const It=Ce.getValidationMessage(j);ve(It,"error");return}$.value=He.title,H.value=He.fields,z.value=He.action,await Ir(),F.value=!0},U=()=>{i(pt.RELATIVE_ADD,{type:"parents"}),J(Ge.ADD_PARENTS,()=>W?.getDialogService().getAddParentsDialog())},ee=()=>{i(pt.RELATIVE_ADD,{type:"sibling"}),J(Ge.ADD_SIBLING,()=>W?.getDialogService().getAddSiblingDialog())},ce=()=>{i(pt.RELATIVE_ADD,{type:"grandparents"}),J(Ge.ADD_GRANDPARENTS,()=>W?.getDialogService().getAddGrandparentsDialog())},T=()=>{i(pt.RELATIVE_ADD,{type:"uncle_aunt"}),J(Ge.ADD_UNCLE_AUNT,()=>W?.getDialogService().getAddUncleAuntDialog())},D=()=>{i(pt.RELATIVE_ADD,{type:"cousin"}),J(Ge.ADD_COUSIN,()=>W?.getDialogService().getAddCousinDialog())},P=()=>{i(pt.RELATIVE_ADD,{type:"child"}),J(Ge.ADD_CHILD,()=>W?.getDialogService().getAddChildDialog())},B=()=>{i(pt.RELATIVE_ADD,{type:"niece_nephew"}),J(Ge.ADD_NIECE_NEPHEW,()=>W?.getDialogService().getAddNieceNephewDialog())},M=()=>{i(pt.RELATIVE_ADD,{type:"partner"}),J(Ge.ADD_PARTNER,()=>W?.getDialogService().getAddPartnerDialog())},Z=j=>{if(!W||!z.value)return;F.value=!1,W.saveStateBeforeOperation($.value);const Ce=W.getDialogService().executeAction(z.value,j,W.getOperations());Ce.success?(Ce.message&&ve(Ce.message,"info"),Ee()):ve(Ce.message||"Failed to add relative","error"),z.value=null},ie=()=>{F.value=!1,z.value=null},le=()=>{W&&(i(pt.TREE_SAVE),W.saveFamily())},oe=()=>{W&&(i(pt.TREE_EXPORT),W.saveAsPNG("family-tree.png"))},Q=()=>{W&&(i(pt.GRAPH_LOCK),W.lockGraph())},be=()=>{W&&(i(pt.GRAPH_UNLOCK),W.unlockGraph())},pe=()=>{W&&confirm("Are you sure you want to reset your family tree?")&&(i(pt.TREE_RESET),W.resetFamily(),Ee())},_e=()=>{if(!W)return;i(pt.UNDO_ACTION);const j=W.undo();j.success?ve(j.message,"info"):ve(j.message||"Nothing to undo","error"),Ee()},Ae=()=>{if(!W)return;i(pt.REDO_ACTION);const j=W.redo();j.success?ve(j.message,"info"):ve(j.message||"Nothing to redo","error"),Ee()},Ne=async()=>{if(!(!v||O.value.length===0)){s(dr.ANALYSIS_RUN,{metrics:O.value.join(",")});try{if(re.value=!0,ve("Analyzing network...","info"),await v(O.value,{includeGraphStats:!1})){const K=X.value||O.value[0];l.value?.updateVisualEncoding&&l.value.updateVisualEncoding({sizeBy:K,preserveZoom:!0}),ve(` Analysis complete - sizing by ${K}`,"success")}}catch(j){e.error("Analysis error",{error:j.message,stack:j.stack}),ve(`Analysis failed: ${j.message}`,"error")}finally{re.value=!1}}},te=async()=>{if(!(!W||!N.value)){s(dr.LAYOUT_CHANGE,{layout:N.value});try{I.value=!0;const j=await W.applyLayout(N.value);j.success||ve(j.error||"Failed to apply layout","error")}catch(j){e.error("Layout error",{error:j.message,stack:j.stack}),ve(`Layout failed: ${j.message}`,"error")}finally{I.value=!1}}};return Mt(l,j=>{j&&!W&&(q(),Ee())},{immediate:!0}),Mt(r,j=>{if(W){W.lang=j;const K=Ce=>xg(j,Ce);W.dialogService=new av(()=>W.getGraphInstance(),W.validation,K),W.validation.t=K,W.storage.t=K}}),Mt(fe,j=>{if(i(pt.RENDER_MODE_CHANGE,{mode:j}),l.value){me.value=!0;const K=()=>{me.value=!1,l.value.off("ready",K)};l.value.on("ready",K),l.value.setRenderMode(j)}}),Xn(()=>{window.addEventListener("keydown",De)}),xs(()=>{window.removeEventListener("keydown",De),W&&W.dispose()}),(j,K)=>(Y(),ne("div",QO,[ke(fd,null,{controls:Xe(()=>[p("div",e3,[p("h1",t3,_(m(n)("family.header.title")),1),p("p",n3,_(m(n)("family.header.subtitle")),1)]),p("div",r3,[p("h2",i3,_(m(n)("family.whatIs.title")),1),p("p",s3,_(m(n)("family.whatIs.description")),1)]),p("div",o3,[p("h2",a3,_(m(n)("family.status.title")),1),p("div",l3,[L.value?(Y(),ne("div",h3,[p("div",{class:yt({"status-message-success":G.value==="success","status-message-error":G.value==="error","status-message-info":G.value==="info"})},[p("div",f3,[G.value==="success"?(Y(),ne("span",p3,"")):G.value==="error"?(Y(),ne("span",g3,"")):(Y(),ne("span",m3,""))]),p("div",y3,_(L.value),1)],2)])):(Y(),ne("div",c3,[p("div",d3,_(m(n)("family.status.ready")),1),p("div",u3,_(m(n)("family.status.clickToAdd")),1)]))])]),p("div",v3,[p("h2",_3,_(m(n)("family.addRelatives.title")),1),p("div",b3,[p("button",{onClick:U,class:"action-btn-pink",type:"button"},_(m(n)("family.addRelatives.parents")),1),p("button",{onClick:ce,class:"action-btn-amber"},_(m(n)("family.addRelatives.grandparents")),1),p("button",{onClick:ee,class:"action-btn-blue"},_(m(n)("family.addRelatives.sibling")),1),p("button",{onClick:B,class:"action-btn-cyan"},_(m(n)("family.addRelatives.nieceNephew")),1),p("button",{onClick:T,class:"action-btn-orange"},_(m(n)("family.addRelatives.uncleAunt")),1),p("button",{onClick:D,class:"action-btn-purple"},_(m(n)("family.addRelatives.cousin")),1),p("button",{onClick:M,class:"action-btn-rose"},_(m(n)("family.addRelatives.partner")),1),p("button",{onClick:P,class:"action-btn-teal"},_(m(n)("family.addRelatives.child")),1)])]),p("div",w3,[p("h2",E3,_(m(n)("family.actions.title")),1),p("div",A3,[p("button",{onClick:le,class:"action-btn-gray"},_(m(n)("family.actions.saveFamily")),1),p("button",{onClick:oe,class:"action-btn-emerald"},_(m(n)("family.actions.saveImage")),1),p("button",{onClick:Q,class:"action-btn-indigo"},_(m(n)("family.actions.lockGraph")),1),p("button",{onClick:be,class:"action-btn-amber"},_(m(n)("family.actions.unlockGraph")),1),p("button",{onClick:_e,disabled:!C.value,class:"action-btn-violet action-btn-disabled"},_(m(n)("family.actions.undo")),9,k3),p("button",{onClick:Ae,disabled:!x.value,class:"action-btn-fuchsia action-btn-disabled"},_(m(n)("family.actions.redo")),9,x3),p("button",{onClick:pe,class:"action-btn-red col-span-2"},_(m(n)("family.actions.resetTree")),1)])]),p("div",C3,[p("h2",S3,_(m(n)("family.renderNodes.title")),1),p("div",T3,[p("label",{class:yt(["render-mode-label",fe.value==="colors"?"render-mode-label-active":"render-mode-label-inactive"])},[Rt(p("input",{type:"radio",name:"renderMode",value:"colors","onUpdate:modelValue":K[0]||(K[0]=Ce=>fe.value=Ce),class:"render-mode-radio"},null,512),[[Vl,fe.value]]),K[5]||(K[5]=p("span",{class:"render-mode-icon"},"",-1)),p("span",R3,_(m(n)("family.renderNodes.colors")),1)],2),p("label",{class:yt(["render-mode-label",fe.value==="avatars"?"render-mode-label-active":"render-mode-label-inactive"])},[Rt(p("input",{type:"radio",name:"renderMode",value:"avatars","onUpdate:modelValue":K[1]||(K[1]=Ce=>fe.value=Ce),class:"render-mode-radio"},null,512),[[Vl,fe.value]]),K[6]||(K[6]=p("span",{class:"render-mode-icon"},"",-1)),p("span",N3,_(m(n)("family.renderNodes.avatars")),1)],2)]),p("div",L3,[p("p",I3,[p("strong",null,_(m(n)("family.renderNodes.colors"))+":",1),Re(" "+_(m(n)("family.renderNodes.colorsDesc")),1),K[7]||(K[7]=p("br",null,null,-1)),p("strong",null,_(m(n)("family.renderNodes.avatars"))+":",1),Re(" "+_(m(n)("family.renderNodes.avatarsDesc")),1)])])]),p("div",D3,[p("h2",P3,_(m(n)("family.networkAnalysis.title")),1),ke(gd,{"selected-metrics":O.value,"onUpdate:selectedMetrics":K[2]||(K[2]=Ce=>O.value=Ce),"size-metric":X.value,"onUpdate:sizeMetric":K[3]||(K[3]=Ce=>X.value=Ce),analyzing:re.value,progress:m(S),onAnalyze:Ne},null,8,["selected-metrics","size-metric","analyzing","progress"])]),p("div",G3,[p("h3",M3,_(m(n)("family.relationshipColors.title")),1),p("div",O3,[p("div",F3,[K[8]||(K[8]=p("div",{class:"legend-dot bg-indigo-500"},null,-1)),p("span",$3,_(m(n)("family.relationshipColors.you")),1)]),p("div",z3,[K[9]||(K[9]=p("div",{class:"legend-dot bg-pink-500"},null,-1)),p("span",B3,_(m(n)("family.relationshipColors.parents")),1)]),p("div",V3,[K[10]||(K[10]=p("div",{class:"legend-dot bg-blue-500"},null,-1)),p("span",U3,_(m(n)("family.relationshipColors.siblings")),1)]),p("div",j3,[K[11]||(K[11]=p("div",{class:"legend-dot bg-orange-500"},null,-1)),p("span",H3,_(m(n)("family.relationshipColors.unclesAunts")),1)]),p("div",W3,[K[12]||(K[12]=p("div",{class:"legend-dot bg-purple-500"},null,-1)),p("span",q3,_(m(n)("family.relationshipColors.cousins")),1)]),p("div",K3,[K[13]||(K[13]=p("div",{class:"legend-dot bg-amber-700"},null,-1)),p("span",X3,_(m(n)("family.relationshipColors.grandparents")),1)]),p("div",Z3,[K[14]||(K[14]=p("div",{class:"legend-dot bg-cyan-500"},null,-1)),p("span",Y3,_(m(n)("family.relationshipColors.nieces")),1)]),p("div",J3,[K[15]||(K[15]=p("div",{class:"legend-dot bg-rose-500"},null,-1)),p("span",Q3,_(m(n)("family.relationshipColors.partners")),1)]),p("div",eF,[K[16]||(K[16]=p("div",{class:"legend-dot bg-teal-500"},null,-1)),p("span",tF,_(m(n)("family.relationshipColors.children")),1)])])]),p("div",nF,[p("h2",rF,_(m(n)("family.layoutAlgorithm.title")),1),ke(pd,{modelValue:N.value,"onUpdate:modelValue":K[4]||(K[4]=Ce=>N.value=Ce),"available-layouts":k.value,loading:m(c)||I.value,onApply:te},null,8,["modelValue","available-layouts","loading"]),p("div",iF,[p("p",sF,[(Y(!0),ne(We,null,_n(k.value,Ce=>(Y(),ne("div",{key:Ce.id},[p("strong",null,_(Ce.name)+":",1),Re(" "+_(Ce.description)+" ",1),Ce.requiresStats?(Y(),ne("span",oF," (requires analysis)")):Pe("",!0),K[17]||(K[17]=p("br",null,null,-1))]))),128))])])]),p("div",aF,[p("h3",lF,_(m(n)("family.instructions.title")),1),p("ul",cF,[p("li",{innerHTML:m(n)("family.instructions.dragNodes")},null,8,dF),p("li",{innerHTML:m(n)("family.instructions.autoSaves")},null,8,uF),p("li",{innerHTML:m(n)("family.instructions.lock")},null,8,hF),p("li",{innerHTML:m(n)("family.instructions.download")},null,8,fF),p("li",{innerHTML:m(n)("family.instructions.analyze")},null,8,pF),p("li",{innerHTML:m(n)("family.instructions.layouts")},null,8,gF),p("li",{innerHTML:m(n)("family.instructions.undoRedo")},null,8,mF)])])]),graph:Xe(()=>[m(c)||me.value?(Y(),ne("div",yF,[p("div",vF,[K[18]||(K[18]=p("div",{class:"loading-spinner"},null,-1)),p("p",_F,_(me.value?"Switching render mode...":V.value),1)])])):Pe("",!0),p("div",{ref_key:"graphContainer",ref:a,class:"w-full h-full"},null,512)]),_:1}),(Y(),Wn(jO,{key:`dialog-${z.value||"default"}`,visible:F.value,title:$.value,fields:H.value,onConfirm:Z,onCancel:ie},null,8,["visible","title","fields"]))]))}},wF={class:"page-content"},EF={class:"docs-page-header"},AF={class:"docs-page-title"},kF={class:"section-description"},xF={class:"docs-toc"},CF={class:"docs-toc-grid"},SF={href:"#quick-start",class:"docs-toc-link"},TF={href:"#core-classes",class:"docs-toc-link"},RF={href:"#workers",class:"docs-toc-link"},NF={href:"#adapters",class:"docs-toc-link"},LF={href:"#layouts",class:"docs-toc-link"},IF={href:"#community",class:"docs-toc-link"},DF={href:"#examples",class:"docs-toc-link"},PF={id:"quick-start",class:"docs-section"},GF={class:"docs-section-header"},MF={class:"docs-card"},OF={class:"docs-card-description"},FF={class:"docs-subsection-title-accent"},$F={class:"docs-code-block"},zF={class:"docs-code-block-green"},BF={class:"docs-subsection-title-accent"},VF={id:"core-classes",class:"docs-section"},UF={class:"docs-section-header"},jF={class:"docs-card"},HF={class:"docs-card-title"},WF={class:"docs-card-description"},qF={class:"docs-subsection-title"},KF={class:"docs-method-list"},XF={class:"docs-method-item"},ZF={class:"docs-method-name"},YF={class:"docs-method-description"},JF={class:"docs-method-item"},QF={class:"docs-method-name"},e4={class:"docs-method-description"},t4={class:"docs-method-item"},n4={class:"docs-method-name"},r4={class:"docs-method-description"},i4={class:"docs-method-item"},s4={class:"docs-method-name"},o4={class:"docs-method-description"},a4={class:"docs-method-item"},l4={class:"docs-method-name"},c4={class:"docs-method-description"},d4={class:"docs-method-item"},u4={class:"docs-method-name"},h4={class:"docs-method-description"},f4={class:"docs-method-item"},p4={class:"docs-method-name"},g4={class:"docs-method-description"},m4={class:"docs-card"},y4={class:"docs-card-title"},v4={class:"docs-card-description"},_4={class:"docs-subsection-title"},b4={class:"list-disc pl-6 space-y-2 text-secondary mb-6"},w4={class:"docs-subsection-title"},E4={class:"text-secondary mb-3"},A4={class:"docs-subsection-title"},k4={class:"docs-feature-grid-item"},x4={class:"docs-feature-item"},C4={class:"docs-feature-description"},S4={class:"docs-feature-item"},T4={class:"docs-feature-description"},R4={class:"docs-feature-item"},N4={class:"docs-feature-description"},L4={class:"docs-feature-item"},I4={class:"docs-feature-description"},D4={class:"docs-feature-item"},P4={class:"docs-feature-description"},G4={class:"docs-feature-item"},M4={class:"docs-feature-description"},O4={class:"docs-feature-item"},F4={class:"docs-feature-description"},$4={class:"docs-feature-item"},z4={class:"docs-feature-description"},B4={class:"docs-feature-item"},V4={class:"docs-feature-description"},U4={id:"workers",class:"docs-section"},j4={class:"docs-section-header"},H4={class:"docs-section-intro"},W4={class:"docs-card"},q4={class:"docs-card-title"},K4={class:"docs-method-list"},X4={class:"docs-method-item"},Z4={class:"docs-method-name"},Y4={class:"docs-method-description"},J4={class:"docs-method-item"},Q4={class:"docs-method-name"},e9={class:"docs-method-description"},t9={class:"docs-method-item"},n9={class:"docs-method-name"},r9={class:"docs-method-description"},i9={class:"docs-card"},s9={class:"docs-card-title-purple"},o9={class:"docs-card-description"},a9={class:"docs-subsection-title"},l9={class:"list-disc pl-6 space-y-2 text-secondary mb-6"},c9={class:"docs-subsection-title"},d9={class:"list-decimal pl-6 space-y-2 text-secondary mb-6"},u9={class:"docs-card"},h9={class:"docs-card-title-green"},f9={class:"docs-options-box mt-4"},p9={class:"docs-options-list"},g9={class:"docs-card"},m9={class:"docs-card-title-blue"},y9={class:"docs-card-description"},v9={id:"adapters",class:"docs-section"},_9={class:"docs-section-header"},b9={class:"docs-section-intro"},w9={class:"docs-card"},E9={class:"docs-card-title-blue"},A9={class:"docs-card-description"},k9={class:"docs-subsection-title"},x9={class:"docs-method-list"},C9={class:"docs-method-item-blue"},S9={class:"docs-method-name"},T9={class:"docs-method-description"},R9={class:"docs-method-returns"},N9={class:"docs-method-item-blue"},L9={class:"docs-method-name"},I9={class:"docs-method-description"},D9={class:"docs-method-returns"},P9={class:"docs-method-item-blue"},G9={class:"docs-method-name"},M9={class:"docs-method-description"},O9={class:"docs-method-returns"},F9={class:"docs-method-item-blue"},$9={class:"docs-method-name"},z9={class:"docs-method-description"},B9={class:"docs-method-returns"},V9={class:"docs-method-item-blue"},U9={class:"docs-method-name"},j9={class:"docs-method-description"},H9={class:"docs-method-returns"},W9={class:"docs-card"},q9={class:"docs-card-title-green"},K9={class:"docs-card-description"},X9={class:"docs-subsection-title"},Z9={class:"docs-method-list"},Y9={class:"docs-method-item-green"},J9={class:"docs-method-name"},Q9={class:"docs-method-description"},e5={class:"docs-method-returns"},t5={class:"docs-method-item-green"},n5={class:"docs-method-name"},r5={class:"docs-method-description"},i5={class:"docs-method-returns"},s5={class:"docs-method-item-green"},o5={class:"docs-method-name"},a5={class:"docs-method-description"},l5={class:"docs-method-returns"},c5={class:"docs-method-item-green"},d5={class:"docs-method-name"},u5={class:"docs-method-description"},h5={class:"docs-method-returns"},f5={class:"docs-method-item-green"},p5={class:"docs-method-name"},g5={class:"docs-method-description"},m5={class:"docs-method-returns"},y5={class:"docs-method-item-green"},v5={class:"docs-method-name"},_5={class:"docs-method-description"},b5={class:"docs-method-returns"},w5={class:"docs-card"},E5={class:"docs-card-title-yellow"},A5={class:"docs-card-description"},k5={class:"docs-subsection-title"},x5={class:"docs-method-list"},C5={class:"docs-method-item-yellow"},S5={class:"docs-method-name"},T5={class:"docs-method-description"},R5={class:"docs-method-returns"},N5={class:"docs-method-item-yellow"},L5={class:"docs-method-name"},I5={class:"docs-method-description"},D5={class:"docs-method-returns"},P5={class:"docs-method-item-yellow"},G5={class:"docs-method-name"},M5={class:"docs-method-description"},O5={class:"docs-method-returns"},F5={class:"docs-method-item-yellow"},$5={class:"docs-method-name"},z5={class:"docs-method-description"},B5={class:"docs-method-returns"},V5={id:"layouts",class:"docs-section"},U5={class:"docs-section-header"},j5={class:"docs-section-intro"},H5={class:"docs-note"},W5={class:"docs-card"},q5={class:"docs-card-title-purple"},K5={class:"text-secondary mb-2"},X5={class:"docs-complexity"},Z5={class:"docs-best-for"},Y5={class:"docs-subsection-title-lg"},J5={class:"docs-options-box"},Q5={class:"docs-options-list"},e$={class:"docs-card"},t$={class:"docs-card-title-indigo"},n$={class:"text-secondary mb-2"},r$={class:"docs-complexity"},i$={class:"docs-best-for"},s$={class:"docs-subsection-title-lg"},o$={class:"docs-options-box"},a$={class:"docs-options-list"},l$={class:"docs-card"},c$={class:"docs-card-title-pink"},d$={class:"text-secondary mb-2"},u$={class:"docs-complexity"},h$={class:"text-sm text-accent mb-2"},f$={class:"docs-warning"},p$={class:"docs-feature-grid"},g$={class:"docs-card-compact"},m$={class:"docs-card-title-sm text-blue-600 dark:text-blue-400"},y$={class:"docs-feature-description mb-2"},v$={class:"text-xs text-gray-600 dark:text-gray-400 mb-2"},_$={class:"text-xs text-accent"},b$={class:"docs-card-compact"},w$={class:"docs-card-title-sm text-green-600 dark:text-green-400"},E$={class:"docs-feature-description mb-2"},A$={class:"text-xs text-gray-600 dark:text-gray-400 mb-2"},k$={class:"text-xs text-accent mb-1"},x$={class:"text-xs text-red-600 dark:text-red-400"},C$={class:"docs-card-compact"},S$={class:"docs-card-title-sm text-yellow-600 dark:text-yellow-400"},T$={class:"docs-feature-description mb-2"},R$={class:"text-xs text-gray-600 dark:text-gray-400 mb-2"},N$={class:"text-xs text-accent"},L$={class:"docs-card-compact"},I$={class:"docs-card-title-sm text-red-600 dark:text-red-400"},D$={class:"docs-feature-description mb-2"},P$={class:"text-xs text-gray-600 dark:text-gray-400 mb-2"},G$={class:"text-xs text-accent"},M$={class:"docs-card-compact"},O$={class:"docs-card-title-sm text-teal-600 dark:text-teal-400"},F$={class:"docs-feature-description mb-2"},$$={class:"text-xs text-gray-600 dark:text-gray-400 mb-2"},z$={class:"text-xs text-accent"},B$={class:"docs-card-compact"},V$={class:"docs-card-title-sm text-gray-600 dark:text-gray-400"},U$={class:"docs-feature-description mb-2"},j$={class:"text-xs text-gray-600 dark:text-gray-400 mb-2"},H$={class:"text-xs text-accent"},W$={class:"docs-tip-box"},q$={class:"docs-subsection-title-lg"},K$={class:"text-sm text-secondary mb-3"},X$={id:"community",class:"docs-section"},Z$={class:"docs-section-header"},Y$={class:"docs-section-intro"},J$={class:"docs-card"},Q$={class:"docs-card-title"},ez={class:"docs-card-description"},tz={class:"docs-subsection-title"},nz={class:"docs-method-list"},rz={class:"docs-method-item"},iz={class:"docs-method-name"},sz={class:"docs-method-description"},oz={class:"docs-method-returns"},az={class:"docs-method-item"},lz={class:"docs-method-name"},cz={class:"docs-method-description"},dz={class:"docs-method-returns"},uz={class:"docs-method-list"},hz={class:"docs-method-item-purple"},fz={class:"docs-method-name"},pz={class:"docs-method-description"},gz={class:"docs-method-returns"},mz={class:"docs-method-item-purple"},yz={class:"docs-method-name"},vz={class:"docs-method-description"},_z={class:"docs-method-item-purple"},bz={class:"docs-method-name"},wz={class:"docs-method-description"},Ez={class:"docs-card"},Az={class:"docs-card-title-orange"},kz={class:"text-secondary mb-2"},xz={class:"docs-complexity"},Cz={class:"docs-card-description"},Sz={class:"docs-subsection-title-lg"},Tz={class:"docs-options-box"},Rz={class:"docs-options-list"},Nz={class:"docs-card"},Lz={class:"docs-card-title-green"},Iz={class:"docs-card-description"},Dz={class:"docs-options-box"},Pz={class:"docs-options-list space-y-2"},Gz={id:"examples",class:"docs-section"},Mz={class:"docs-section-header"},Oz={class:"docs-section-intro"},Fz={class:"docs-card"},$z={class:"docs-card-title"},zz={class:"text-secondary mb-4"},Bz={class:"docs-card"},Vz={class:"docs-card-title-blue"},Uz={class:"text-secondary mb-4"},jz={class:"docs-card"},Hz={class:"docs-card-title-purple"},Wz={class:"text-secondary mb-4"},qz=`import NetworkStats from '@guinetik/graph-js';

const network = [
  { source: 'Alice', target: 'Bob' },
  { source: 'Bob', target: 'Charlie' },
  { source: 'Charlie', target: 'Alice' }
];

const analyzer = new NetworkStats({ verbose: false });
const results = await analyzer.analyze(network, ['degree', 'eigenvector']);

console.log(results);
// [
//   { id: 'Alice', degree: 2, eigenvector: 0.577 },
//   { id: 'Bob', degree: 2, eigenvector: 0.577 },
//   { id: 'Charlie', degree: 2, eigenvector: 0.577 }
// ]`,Kz=`import { Graph } from '@guinetik/graph-js';

const graph = new Graph();
graph.addNodesFrom(['A', 'B', 'C']);
graph.addEdge('A', 'B', 1);
graph.addEdge('B', 'C', 2);

console.log(graph.getNeighbors('B')); // ['A', 'C']
console.log(graph.numberOfNodes());    // 3
console.log(graph.numberOfEdges());    // 2`,Xz=`import NetworkStats from '@guinetik/graph-js';

const analyzer = new NetworkStats({
  maxWorkers: 4,              // Max workers (default: auto-detect)
  enableAffinity: true,       // Enable worker affinity (default: true)
  affinityCacheLimit: 50,     // Max cached functions per worker
  taskTimeout: 300000,        // 5 minute timeout
  verbose: true               // See affinity logs:  hits,  updates
});

// Run analysis - affinity routing happens automatically
const results = await analyzer.analyze(network, ['degree', 'eigenvector']);

// Cleanup when done
await analyzer.dispose();`,Zz="import WorkerManager from '@guinetik/graph-js';\n\n// Get pool status\nconst status = WorkerManager.getStatus();\nconsole.log(`Workers: ${status.availableWorkers}/${status.totalWorkers}`);\nconsole.log(`Affinity hit rate: ${(status.affinity.hitRate * 100).toFixed(1)}%`);\n\n// Get detailed affinity stats\nconst stats = WorkerManager.getAffinityStats();\nconsole.log(`Hits: ${stats.hits}, Misses: ${stats.misses}`);\n\n// Per-worker cache info\nstats.workerCaches.forEach(w => {\n  console.log(`Worker ${w.workerId}: ${w.cachedFunctions.length} cached`);\n  console.log(`  Functions: ${w.cachedFunctions.join(', ')}`);\n});",Yz=`import { CSVAdapter } from '@guinetik/graph-js';

// Load from URLs
const graphData = await CSVAdapter.loadFromURL(
  '../data/edges.csv',
  '../data/nodes.csv'
);

// Export to CSV
const edgesCSV = CSVAdapter.toEdgeList(graphData);
const nodesCSV = CSVAdapter.toNodes(graphData);`,Jz=`import { JSONAdapter } from '@guinetik/graph-js';

// Convert D3 format to GraphData
const graphData = JSONAdapter.fromD3(d3Data);

// Convert to Cytoscape format
const cytoData = JSONAdapter.toCytoscape(graphData);

// Auto-detect format
const data = JSONAdapter.fromFormat(unknownJSON);`,Qz=`import { NetworkXAdapter } from '@guinetik/graph-js';

// From Python: nx.node_link_data(G)
const graphData = NetworkXAdapter.fromNodeLink(nxData);

// To Python: G = nx.node_link_graph(nxData)
const nxData = NetworkXAdapter.toNodeLink(graphData, {
  directed: false,
  multigraph: false
});`,e8=`import { Graph, ForceDirectedLayout } from '@guinetik/graph-js';

const graph = new Graph();
graph.addNodesFrom(['A', 'B', 'C']);
graph.addEdge('A', 'B');
graph.addEdge('B', 'C');

const layout = new ForceDirectedLayout(graph, {
  iterations: 100,
  scale: 200
});
const positions = await layout.getPositions();
// { 'A': {x: 120, y: 45}, 'B': {x: -30, y: 90}, ... }`,t8=`import { KamadaKawaiLayout } from '@guinetik/graph-js';

const layout = new KamadaKawaiLayout(graph, {
  iterations: 100,
  scale: 200
});
const positions = await layout.getPositions();`,n8=`import { NetworkStats, Graph, SpectralLayout } from '@guinetik/graph-js';

// First compute eigenvector-laplacian
const analyzer = new NetworkStats();
await analyzer.analyze(edges, ['eigenvector-laplacian']);

// Then apply layout
const layout = new SpectralLayout(graph, { scale: 200 });
const positions = await layout.getPositions();`,r8=`// All layouts follow this pattern
const layout = new SomeLayout(graph, options);
const positions = await layout.getPositions({
  onProgress: (progress) => console.log(\`\${progress * 100}%\`)
});`,i8=`import { CommunityDetection, LouvainAlgorithm } from '@guinetik/graph-js';

// Method 1: Direct detection from GraphData
const result = await CommunityDetection.detect(graphData, 'louvain', {
  resolution: 1.0,
  onProgress: (p) => console.log(\`\${Math.round(p * 100)}%\`)
});

// Method 2: Using algorithm instance
const detector = new CommunityDetection(graph);
const algorithm = new LouvainAlgorithm({ resolution: 1.0 });
const result = await detector.detectCommunities(algorithm);

console.log(result.communities);     // { 'A': 0, 'B': 0, 'C': 1 }
console.log(result.modularity);      // 0.42
console.log(result.numCommunities);  // 2`,s8=`import NetworkStats from '@guinetik/graph-js';

const network = [
  { source: 'Alice', target: 'Bob', weight: 1 },
  { source: 'Bob', target: 'Carol', weight: 2 },
  { source: 'Carol', target: 'Dave', weight: 1 }
];

const analyzer = new NetworkStats({ verbose: true });
const results = await analyzer.analyze(network, ['degree', 'eigenvector', 'betweenness']);

console.log(results);
// [
//   { id: 'Alice', degree: 1, eigenvector: 0.34, betweenness: 0 },
//   { id: 'Bob', degree: 2, eigenvector: 0.58, betweenness: 0.67 },
//   ...
// ]

await analyzer.dispose(); // Cleanup workers`,o8=`import { CSVAdapter } from '@guinetik/graph-js';
import NetworkStats from '@guinetik/graph-js';

// Load CSV data
const graphData = await CSVAdapter.loadFromURL(
  '../data/edges.csv',
  '../data/nodes.csv'
);

// Convert to edge list for analysis
const network = graphData.edges;

// Analyze
const analyzer = new NetworkStats();
const results = await analyzer.analyze(network, ['degree', 'clustering']);
await analyzer.dispose();`,a8=`import NetworkStats, {
  CSVAdapter,
  Graph,
  KamadaKawaiLayout,
  CommunityDetection
} from '@guinetik/graph-js';

// 1. Load data
const graphData = await CSVAdapter.loadFromURL('../data/edges.csv');

// 2. Analyze network
const analyzer = new NetworkStats();
const nodeMetrics = await analyzer.analyze(graphData.edges, [
  'degree',
  'eigenvector',
  'betweenness'
]);

// 3. Apply layout
const graph = new Graph();
graphData.edges.forEach(e => {
  graph.addNode(e.source);
  graph.addNode(e.target);
  graph.addEdge(e.source, e.target, e.weight || 1);
});

const layout = new KamadaKawaiLayout(graph, { scale: 200 });
const positions = await layout.getPositions();

// 4. Detect communities
const communityResult = await CommunityDetection.detect(
  graphData,
  'louvain'
);

// 5. Combine results
const finalData = nodeMetrics.map(node => ({
  ...node,
  x: positions[node.id].x,
  y: positions[node.id].y,
  community: communityResult.communities[node.id]
}));

console.log('Analysis complete!', finalData);
console.log('Modularity:', communityResult.modularity);

await analyzer.dispose();`,l8={__name:"DocsPage",setup(t){const{t:e}=An();return(n,r)=>(Y(),ne("div",wF,[p("div",EF,[p("h1",AF,_(m(e)("docs.title")),1),p("p",kF,_(m(e)("docs.subtitle")),1)]),p("div",xF,[r[7]||(r[7]=p("h2",{class:"docs-toc-title"}," Contents",-1)),p("div",CF,[p("a",SF,[r[0]||(r[0]=p("span",{class:"docs-toc-icon"},"",-1)),p("span",null,_(m(e)("docs.sections.quickStart")),1)]),p("a",TF,[r[1]||(r[1]=p("span",{class:"docs-toc-icon"},"",-1)),p("span",null,_(m(e)("docs.sections.coreClasses")),1)]),p("a",RF,[r[2]||(r[2]=p("span",{class:"docs-toc-icon"},"",-1)),p("span",null,_(m(e)("docs.sections.workers")),1)]),p("a",NF,[r[3]||(r[3]=p("span",{class:"docs-toc-icon"},"",-1)),p("span",null,_(m(e)("docs.sections.adapters")),1)]),p("a",LF,[r[4]||(r[4]=p("span",{class:"docs-toc-icon"},"",-1)),p("span",null,_(m(e)("docs.sections.layouts")),1)]),p("a",IF,[r[5]||(r[5]=p("span",{class:"docs-toc-icon"},"",-1)),p("span",null,_(m(e)("docs.sections.community")),1)]),p("a",DF,[r[6]||(r[6]=p("span",{class:"docs-toc-icon"},"",-1)),p("span",null,_(m(e)("docs.sections.examples")),1)])])]),p("section",PF,[p("h2",GF,[r[8]||(r[8]=p("span",{class:"docs-section-header-icon"},"",-1)),p("span",null,_(m(e)("docs.quickStart.title")),1)]),p("div",MF,[p("p",OF,_(m(e)("docs.quickStart.description")),1),p("h3",FF,_(m(e)("docs.quickStart.install")),1),p("div",$F,[p("code",zF,_(m(e)("docs.quickStart.installCmd")),1)]),p("h3",BF,_(m(e)("docs.quickStart.basicUsage")),1),ke(mt,{code:qz,language:"javascript"})])]),p("section",VF,[p("h2",UF,[r[9]||(r[9]=p("span",{class:"docs-section-header-icon"},"",-1)),p("span",null,_(m(e)("docs.sections.coreClasses")),1)]),p("div",jF,[p("h3",HF,_(m(e)("docs.graph.title")),1),p("p",WF,_(m(e)("docs.graph.description")),1),r[10]||(r[10]=p("div",{class:"docs-code-block"},[p("code",{class:"docs-code-block-text"},"const graph = new Graph();")],-1)),p("h4",qF,_(m(e)("docs.graph.methods")),1),p("div",KF,[p("div",XF,[p("code",ZF,_(m(e)("docs.graph.methodsList.addNode.name")),1),p("p",YF,_(m(e)("docs.graph.methodsList.addNode.description")),1)]),p("div",JF,[p("code",QF,_(m(e)("docs.graph.methodsList.addNodesFrom.name")),1),p("p",e4,_(m(e)("docs.graph.methodsList.addNodesFrom.description")),1)]),p("div",t4,[p("code",n4,_(m(e)("docs.graph.methodsList.addEdge.name")),1),p("p",r4,_(m(e)("docs.graph.methodsList.addEdge.description")),1)]),p("div",i4,[p("code",s4,_(m(e)("docs.graph.methodsList.removeNode.name")),1),p("p",o4,_(m(e)("docs.graph.methodsList.removeNode.description")),1)]),p("div",a4,[p("code",l4,_(m(e)("docs.graph.methodsList.getNeighbors.name")),1),p("p",c4,_(m(e)("docs.graph.methodsList.getNeighbors.description")),1)]),p("div",d4,[p("code",u4,_(m(e)("docs.graph.methodsList.hasEdge.name")),1),p("p",h4,_(m(e)("docs.graph.methodsList.hasEdge.description")),1)]),p("div",f4,[p("code",p4,_(m(e)("docs.graph.methodsList.numberOfNodes.name")),1),p("p",g4,_(m(e)("docs.graph.methodsList.numberOfNodes.description")),1)])]),ke(mt,{code:Kz,language:"javascript"})]),p("div",m4,[p("h3",y4,_(m(e)("docs.networkStats.title")),1),p("p",v4,_(m(e)("docs.networkStats.description")),1),p("h4",_4,_(m(e)("docs.networkStats.constructor")),1),r[22]||(r[22]=p("div",{class:"docs-code-block"},[p("code",{class:"docs-code-block-text"},"new NetworkStats(options?)")],-1)),p("ul",b4,[p("li",null,[r[11]||(r[11]=p("code",{class:"docs-code-inline-xs"},"maxIter:",-1)),Re(" "+_(m(e)("docs.networkStats.constructorParams.maxIter")),1)]),p("li",null,[r[12]||(r[12]=p("code",{class:"docs-code-inline-xs"},"verbose:",-1)),Re(" "+_(m(e)("docs.networkStats.constructorParams.verbose")),1)])]),p("h4",w4,_(m(e)("docs.networkStats.analyze.title")),1),p("p",E4,_(m(e)("docs.networkStats.analyze.description")),1),r[23]||(r[23]=p("div",{class:"docs-code-block"},[p("code",{class:"docs-code-block-text"},"analyzer.analyze(network, features?)")],-1)),p("h4",A4,_(m(e)("docs.networkStats.features.title")),1),p("div",k4,[p("div",x4,[r[13]||(r[13]=p("span",{class:"docs-feature-badge"},"degree",-1)),p("span",C4,_(m(e)("docs.networkStats.features.degree")),1)]),p("div",S4,[r[14]||(r[14]=p("span",{class:"docs-feature-badge"},"eigenvector",-1)),p("span",T4,_(m(e)("docs.networkStats.features.eigenvector")),1)]),p("div",R4,[r[15]||(r[15]=p("span",{class:"docs-feature-badge"},"eigenvector-laplacian",-1)),p("span",N4,_(m(e)("docs.networkStats.features.eigenvectorLaplacian")),1)]),p("div",L4,[r[16]||(r[16]=p("span",{class:"docs-feature-badge"},"betweenness",-1)),p("span",I4,_(m(e)("docs.networkStats.features.betweenness")),1)]),p("div",D4,[r[17]||(r[17]=p("span",{class:"docs-feature-badge"},"clustering",-1)),p("span",P4,_(m(e)("docs.networkStats.features.clustering")),1)]),p("div",G4,[r[18]||(r[18]=p("span",{class:"docs-feature-badge"},"closeness",-1)),p("span",M4,_(m(e)("docs.networkStats.features.closeness")),1)]),p("div",O4,[r[19]||(r[19]=p("span",{class:"docs-feature-badge"},"cliques",-1)),p("span",F4,_(m(e)("docs.networkStats.features.cliques")),1)]),p("div",$4,[r[20]||(r[20]=p("span",{class:"docs-feature-badge"},"ego-density",-1)),p("span",z4,_(m(e)("docs.networkStats.features.egoDensity")),1)]),p("div",B4,[r[21]||(r[21]=p("span",{class:"docs-feature-badge"},"modularity",-1)),p("span",V4,_(m(e)("docs.networkStats.features.modularity")),1)])])])]),p("section",U4,[p("h2",j4,[r[24]||(r[24]=p("span",{class:"docs-section-header-icon"},"",-1)),p("span",null,_(m(e)("docs.workers.title")),1)]),p("p",H4,_(m(e)("docs.workers.description")),1),p("div",W4,[p("h3",q4,_(m(e)("docs.workers.components.title")),1),p("div",K4,[p("div",X4,[p("code",Z4,_(m(e)("docs.workers.components.workerManager.name")),1),p("p",Y4,_(m(e)("docs.workers.components.workerManager.description")),1)]),p("div",J4,[p("code",Q4,_(m(e)("docs.workers.components.workerPool.name")),1),p("p",e9,_(m(e)("docs.workers.components.workerPool.description")),1)]),p("div",t9,[p("code",n9,_(m(e)("docs.workers.components.workerAdapter.name")),1),p("p",r9,_(m(e)("docs.workers.components.workerAdapter.description")),1)])])]),p("div",i9,[p("h3",s9,_(m(e)("docs.workers.affinity.title")),1),p("p",o9,_(m(e)("docs.workers.affinity.description")),1),p("h4",a9,_(m(e)("docs.workers.affinity.howItWorks")),1),p("ul",l9,[(Y(!0),ne(We,null,_n(m(e)("docs.workers.affinity.howItWorksSteps"),(i,s)=>(Y(),ne("li",{key:"how-"+s},_(i),1))),128))]),p("h4",c9,_(m(e)("docs.workers.affinity.selectionTitle")),1),p("ul",d9,[(Y(!0),ne(We,null,_n(m(e)("docs.workers.affinity.selectionSteps"),(i,s)=>(Y(),ne("li",{key:"sel-"+s},_(i),1))),128))])]),p("div",u9,[p("h3",h9,_(m(e)("docs.workers.config.title")),1),ke(mt,{code:Xz,language:"javascript"}),p("div",f9,[r[29]||(r[29]=p("h5",{class:"docs-options-title"},"Options:",-1)),p("ul",p9,[p("li",null,[r[25]||(r[25]=p("code",{class:"docs-options-code"},"maxWorkers:",-1)),Re(" "+_(m(e)("docs.workers.config.options.maxWorkers")),1)]),p("li",null,[r[26]||(r[26]=p("code",{class:"docs-options-code"},"enableAffinity:",-1)),Re(" "+_(m(e)("docs.workers.config.options.enableAffinity")),1)]),p("li",null,[r[27]||(r[27]=p("code",{class:"docs-options-code"},"affinityCacheLimit:",-1)),Re(" "+_(m(e)("docs.workers.config.options.affinityCacheLimit")),1)]),p("li",null,[r[28]||(r[28]=p("code",{class:"docs-options-code"},"taskTimeout:",-1)),Re(" "+_(m(e)("docs.workers.config.options.taskTimeout")),1)])])])]),p("div",g9,[p("h3",m9,_(m(e)("docs.workers.monitoring.title")),1),p("p",y9,_(m(e)("docs.workers.monitoring.description")),1),ke(mt,{code:Zz,language:"javascript"})])]),p("section",v9,[p("h2",_9,[r[30]||(r[30]=p("span",{class:"docs-section-header-icon"},"",-1)),p("span",null,_(m(e)("docs.adapters.title")),1)]),p("p",b9,_(m(e)("docs.adapters.description")),1),p("div",w9,[p("h3",E9,_(m(e)("docs.adapters.csv.title")),1),p("p",A9,_(m(e)("docs.adapters.csv.description")),1),p("h4",k9,_(m(e)("docs.adapters.csv.methods")),1),p("div",x9,[p("div",C9,[p("code",S9,_(m(e)("docs.adapters.csv.methodsList.fromEdgeList.name")),1),p("p",T9,_(m(e)("docs.adapters.csv.methodsList.fromEdgeList.description")),1),p("p",R9,_(m(e)("docs.adapters.csv.methodsList.fromEdgeList.returns")),1)]),p("div",N9,[p("code",L9,_(m(e)("docs.adapters.csv.methodsList.fromNodes.name")),1),p("p",I9,_(m(e)("docs.adapters.csv.methodsList.fromNodes.description")),1),p("p",D9,_(m(e)("docs.adapters.csv.methodsList.fromNodes.returns")),1)]),p("div",P9,[p("code",G9,_(m(e)("docs.adapters.csv.methodsList.loadFromURL.name")),1),p("p",M9,_(m(e)("docs.adapters.csv.methodsList.loadFromURL.description")),1),p("p",O9,_(m(e)("docs.adapters.csv.methodsList.loadFromURL.returns")),1)]),p("div",F9,[p("code",$9,_(m(e)("docs.adapters.csv.methodsList.toEdgeList.name")),1),p("p",z9,_(m(e)("docs.adapters.csv.methodsList.toEdgeList.description")),1),p("p",B9,_(m(e)("docs.adapters.csv.methodsList.toEdgeList.returns")),1)]),p("div",V9,[p("code",U9,_(m(e)("docs.adapters.csv.methodsList.toNodes.name")),1),p("p",j9,_(m(e)("docs.adapters.csv.methodsList.toNodes.description")),1),p("p",H9,_(m(e)("docs.adapters.csv.methodsList.toNodes.returns")),1)])]),ke(mt,{code:Yz,language:"javascript"})]),p("div",W9,[p("h3",q9,_(m(e)("docs.adapters.json.title")),1),p("p",K9,_(m(e)("docs.adapters.json.description")),1),p("h4",X9,_(m(e)("docs.adapters.json.methods")),1),p("div",Z9,[p("div",Y9,[p("code",J9,_(m(e)("docs.adapters.json.methodsList.fromD3.name")),1),p("p",Q9,_(m(e)("docs.adapters.json.methodsList.fromD3.description")),1),p("p",e5,_(m(e)("docs.adapters.json.methodsList.fromD3.returns")),1)]),p("div",t5,[p("code",n5,_(m(e)("docs.adapters.json.methodsList.fromCytoscape.name")),1),p("p",r5,_(m(e)("docs.adapters.json.methodsList.fromCytoscape.description")),1),p("p",i5,_(m(e)("docs.adapters.json.methodsList.fromCytoscape.returns")),1)]),p("div",s5,[p("code",o5,_(m(e)("docs.adapters.json.methodsList.fromFormat.name")),1),p("p",a5,_(m(e)("docs.adapters.json.methodsList.fromFormat.description")),1),p("p",l5,_(m(e)("docs.adapters.json.methodsList.fromFormat.returns")),1)]),p("div",c5,[p("code",d5,_(m(e)("docs.adapters.json.methodsList.toD3.name")),1),p("p",u5,_(m(e)("docs.adapters.json.methodsList.toD3.description")),1),p("p",h5,_(m(e)("docs.adapters.json.methodsList.toD3.returns")),1)]),p("div",f5,[p("code",p5,_(m(e)("docs.adapters.json.methodsList.toCytoscape.name")),1),p("p",g5,_(m(e)("docs.adapters.json.methodsList.toCytoscape.description")),1),p("p",m5,_(m(e)("docs.adapters.json.methodsList.toCytoscape.returns")),1)]),p("div",y5,[p("code",v5,_(m(e)("docs.adapters.json.methodsList.loadFromURL.name")),1),p("p",_5,_(m(e)("docs.adapters.json.methodsList.loadFromURL.description")),1),p("p",b5,_(m(e)("docs.adapters.json.methodsList.loadFromURL.returns")),1)])]),ke(mt,{code:Jz,language:"javascript"})]),p("div",w5,[p("h3",E5,_(m(e)("docs.adapters.networkx.title")),1),p("p",A5,_(m(e)("docs.adapters.networkx.description")),1),p("h4",k5,_(m(e)("docs.adapters.networkx.methods")),1),p("div",x5,[p("div",C5,[p("code",S5,_(m(e)("docs.adapters.networkx.methodsList.fromNodeLink.name")),1),p("p",T5,_(m(e)("docs.adapters.networkx.methodsList.fromNodeLink.description")),1),p("p",R5,_(m(e)("docs.adapters.networkx.methodsList.fromNodeLink.returns")),1)]),p("div",N5,[p("code",L5,_(m(e)("docs.adapters.networkx.methodsList.fromAdjacency.name")),1),p("p",I5,_(m(e)("docs.adapters.networkx.methodsList.fromAdjacency.description")),1),p("p",D5,_(m(e)("docs.adapters.networkx.methodsList.fromAdjacency.returns")),1)]),p("div",P5,[p("code",G5,_(m(e)("docs.adapters.networkx.methodsList.toNodeLink.name")),1),p("p",M5,_(m(e)("docs.adapters.networkx.methodsList.toNodeLink.description")),1),p("p",O5,_(m(e)("docs.adapters.networkx.methodsList.toNodeLink.returns")),1)]),p("div",F5,[p("code",$5,_(m(e)("docs.adapters.networkx.methodsList.toAdjacency.name")),1),p("p",z5,_(m(e)("docs.adapters.networkx.methodsList.toAdjacency.description")),1),p("p",B5,_(m(e)("docs.adapters.networkx.methodsList.toAdjacency.returns")),1)])]),ke(mt,{code:Qz,language:"javascript"})])]),p("section",V5,[p("h2",U5,[r[31]||(r[31]=p("span",{class:"docs-section-header-icon"},"",-1)),p("span",null,_(m(e)("docs.layouts.title")),1)]),p("p",j5,_(m(e)("docs.layouts.description")),1),p("p",H5," "+_(m(e)("docs.layouts.note")),1),p("div",W5,[p("h3",q5,_(m(e)("docs.layouts.forceDirected.title")),1),p("p",K5,_(m(e)("docs.layouts.forceDirected.description")),1),p("p",X5,_(m(e)("docs.layouts.forceDirected.complexity")),1),p("p",Z5,_(m(e)("docs.layouts.forceDirected.bestFor")),1),p("h4",Y5,_(m(e)("docs.layouts.forceDirected.constructor")),1),p("div",J5,[r[38]||(r[38]=p("h5",{class:"docs-options-title"},"Options:",-1)),p("ul",Q5,[p("li",null,[r[32]||(r[32]=p("code",{class:"docs-options-code"},"iterations:",-1)),Re(" "+_(m(e)("docs.layouts.forceDirected.options.iterations")),1)]),p("li",null,[r[33]||(r[33]=p("code",{class:"docs-options-code"},"k:",-1)),Re(" "+_(m(e)("docs.layouts.forceDirected.options.k")),1)]),p("li",null,[r[34]||(r[34]=p("code",{class:"docs-options-code"},"scale:",-1)),Re(" "+_(m(e)("docs.layouts.forceDirected.options.scale")),1)]),p("li",null,[r[35]||(r[35]=p("code",{class:"docs-options-code"},"center:",-1)),Re(" "+_(m(e)("docs.layouts.forceDirected.options.center")),1)]),p("li",null,[r[36]||(r[36]=p("code",{class:"docs-options-code"},"initialPositions:",-1)),Re(" "+_(m(e)("docs.layouts.forceDirected.options.initialPositions")),1)]),p("li",null,[r[37]||(r[37]=p("code",{class:"docs-options-code"},"threshold:",-1)),Re(" "+_(m(e)("docs.layouts.forceDirected.options.threshold")),1)])])]),ke(mt,{code:e8,language:"javascript"})]),p("div",e$,[p("h3",t$,_(m(e)("docs.layouts.kamadaKawai.title")),1),p("p",n$,_(m(e)("docs.layouts.kamadaKawai.description")),1),p("p",r$,_(m(e)("docs.layouts.kamadaKawai.complexity")),1),p("p",i$,_(m(e)("docs.layouts.kamadaKawai.bestFor")),1),p("h4",s$,_(m(e)("docs.layouts.kamadaKawai.constructor")),1),p("div",o$,[r[45]||(r[45]=p("h5",{class:"docs-options-title"},"Options:",-1)),p("ul",a$,[p("li",null,[r[39]||(r[39]=p("code",{class:"docs-options-code"},"iterations:",-1)),Re(" "+_(m(e)("docs.layouts.kamadaKawai.options.iterations")),1)]),p("li",null,[r[40]||(r[40]=p("code",{class:"docs-options-code"},"scale:",-1)),Re(" "+_(m(e)("docs.layouts.kamadaKawai.options.scale")),1)]),p("li",null,[r[41]||(r[41]=p("code",{class:"docs-options-code"},"center:",-1)),Re(" "+_(m(e)("docs.layouts.kamadaKawai.options.center")),1)]),p("li",null,[r[42]||(r[42]=p("code",{class:"docs-options-code"},"initialPositions:",-1)),Re(" "+_(m(e)("docs.layouts.kamadaKawai.options.initialPositions")),1)]),p("li",null,[r[43]||(r[43]=p("code",{class:"docs-options-code"},"threshold:",-1)),Re(" "+_(m(e)("docs.layouts.kamadaKawai.options.threshold")),1)]),p("li",null,[r[44]||(r[44]=p("code",{class:"docs-options-code"},"K:",-1)),Re(" "+_(m(e)("docs.layouts.kamadaKawai.options.K")),1)])])]),ke(mt,{code:t8,language:"javascript"})]),p("div",l$,[p("h3",c$,_(m(e)("docs.layouts.spectral.title")),1),p("p",d$,_(m(e)("docs.layouts.spectral.description")),1),p("p",u$,_(m(e)("docs.layouts.spectral.complexity")),1),p("p",h$,_(m(e)("docs.layouts.spectral.bestFor")),1),p("p",f$," "+_(m(e)("docs.layouts.spectral.requires")),1),ke(mt,{code:n8,language:"javascript"})]),p("div",p$,[p("div",g$,[p("h3",m$,_(m(e)("docs.layouts.circular.title")),1),p("p",y$,_(m(e)("docs.layouts.circular.description")),1),p("p",v$,_(m(e)("docs.layouts.circular.complexity")),1),p("p",_$,_(m(e)("docs.layouts.circular.bestFor")),1)]),p("div",b$,[p("h3",w$,_(m(e)("docs.layouts.shell.title")),1),p("p",E$,_(m(e)("docs.layouts.shell.description")),1),p("p",A$,_(m(e)("docs.layouts.shell.complexity")),1),p("p",k$,_(m(e)("docs.layouts.shell.bestFor")),1),p("p",x$," "+_(m(e)("docs.layouts.shell.requires")),1)]),p("div",C$,[p("h3",S$,_(m(e)("docs.layouts.spiral.title")),1),p("p",T$,_(m(e)("docs.layouts.spiral.description")),1),p("p",R$,_(m(e)("docs.layouts.spiral.complexity")),1),p("p",N$,_(m(e)("docs.layouts.spiral.bestFor")),1)]),p("div",L$,[p("h3",I$,_(m(e)("docs.layouts.bfs.title")),1),p("p",D$,_(m(e)("docs.layouts.bfs.description")),1),p("p",P$,_(m(e)("docs.layouts.bfs.complexity")),1),p("p",G$,_(m(e)("docs.layouts.bfs.bestFor")),1)]),p("div",M$,[p("h3",O$,_(m(e)("docs.layouts.bipartite.title")),1),p("p",F$,_(m(e)("docs.layouts.bipartite.description")),1),p("p",$$,_(m(e)("docs.layouts.bipartite.complexity")),1),p("p",z$,_(m(e)("docs.layouts.bipartite.bestFor")),1)]),p("div",B$,[p("h3",V$,_(m(e)("docs.layouts.random.title")),1),p("p",U$,_(m(e)("docs.layouts.random.description")),1),p("p",j$,_(m(e)("docs.layouts.random.complexity")),1),p("p",H$,_(m(e)("docs.layouts.random.bestFor")),1)])]),p("div",W$,[p("h4",q$,_(m(e)("docs.layouts.usage")),1),p("p",K$,_(m(e)("docs.layouts.usageDescription")),1),ke(mt,{code:r8,language:"javascript"})])]),p("section",X$,[p("h2",Z$,[r[46]||(r[46]=p("span",{class:"docs-section-header-icon"},"",-1)),p("span",null,_(m(e)("docs.community.title")),1)]),p("p",Y$,_(m(e)("docs.community.description")),1),p("div",J$,[p("h3",Q$,_(m(e)("docs.community.mainClass.title")),1),p("p",ez,_(m(e)("docs.community.mainClass.description")),1),p("h4",tz,_(m(e)("docs.community.mainClass.constructor")),1),r[47]||(r[47]=p("div",{class:"docs-code-block"},[p("code",{class:"docs-code-block-text"},"new CommunityDetection(graph)")],-1)),r[48]||(r[48]=p("h4",{class:"docs-subsection-title"},"Methods",-1)),p("div",nz,[p("div",rz,[p("code",iz,_(m(e)("docs.community.mainClass.methods.detectCommunities.name")),1),p("p",sz,_(m(e)("docs.community.mainClass.methods.detectCommunities.description")),1),p("p",oz,_(m(e)("docs.community.mainClass.methods.detectCommunities.returns")),1)]),p("div",az,[p("code",lz,_(m(e)("docs.community.mainClass.methods.calculateModularity.name")),1),p("p",cz,_(m(e)("docs.community.mainClass.methods.calculateModularity.description")),1),p("p",dz,_(m(e)("docs.community.mainClass.methods.calculateModularity.returns")),1)])]),r[49]||(r[49]=p("h4",{class:"docs-subsection-title"},"Static Methods",-1)),p("div",uz,[p("div",hz,[p("code",fz,_(m(e)("docs.community.mainClass.staticMethods.detect.name")),1),p("p",pz,_(m(e)("docs.community.mainClass.staticMethods.detect.description")),1),p("p",gz,_(m(e)("docs.community.mainClass.staticMethods.detect.returns")),1)]),p("div",mz,[p("code",yz,_(m(e)("docs.community.mainClass.staticMethods.getNodesInCommunity.name")),1),p("p",vz,_(m(e)("docs.community.mainClass.staticMethods.getNodesInCommunity.description")),1)]),p("div",_z,[p("code",bz,_(m(e)("docs.community.mainClass.staticMethods.getCommunityGroups.name")),1),p("p",wz,_(m(e)("docs.community.mainClass.staticMethods.getCommunityGroups.description")),1)])])]),p("div",Ez,[p("h3",Az,_(m(e)("docs.community.louvain.title")),1),p("p",kz,_(m(e)("docs.community.louvain.description")),1),p("p",xz,_(m(e)("docs.community.louvain.complexity")),1),p("p",Cz,_(m(e)("docs.community.louvain.bestFor")),1),p("h4",Sz,_(m(e)("docs.community.louvain.constructor")),1),p("div",Tz,[r[52]||(r[52]=p("h5",{class:"docs-options-title"},"Options:",-1)),p("ul",Rz,[p("li",null,[r[50]||(r[50]=p("code",{class:"docs-options-code"},"resolution:",-1)),Re(" "+_(m(e)("docs.community.louvain.options.resolution")),1)]),p("li",null,[r[51]||(r[51]=p("code",{class:"docs-options-code"},"maxIterations:",-1)),Re(" "+_(m(e)("docs.community.louvain.options.maxIterations")),1)])])]),ke(mt,{code:i8,language:"javascript"})]),p("div",Nz,[p("h3",Lz,_(m(e)("docs.community.result.title")),1),p("p",Iz,_(m(e)("docs.community.result.description")),1),p("div",Dz,[r[58]||(r[58]=p("h5",{class:"docs-options-title"},"Properties:",-1)),p("ul",Pz,[p("li",null,[r[53]||(r[53]=p("code",{class:"docs-options-code"},"communities:",-1)),Re(" "+_(m(e)("docs.community.result.properties.communities")),1)]),p("li",null,[r[54]||(r[54]=p("code",{class:"docs-options-code"},"modularity:",-1)),Re(" "+_(m(e)("docs.community.result.properties.modularity")),1)]),p("li",null,[r[55]||(r[55]=p("code",{class:"docs-options-code"},"numCommunities:",-1)),Re(" "+_(m(e)("docs.community.result.properties.numCommunities")),1)]),p("li",null,[r[56]||(r[56]=p("code",{class:"docs-options-code"},"algorithm:",-1)),Re(" "+_(m(e)("docs.community.result.properties.algorithm")),1)]),p("li",null,[r[57]||(r[57]=p("code",{class:"docs-options-code"},"metadata:",-1)),Re(" "+_(m(e)("docs.community.result.properties.metadata")),1)])])])])]),p("section",Gz,[p("h2",Mz,[r[59]||(r[59]=p("span",{class:"docs-section-header-icon"},"",-1)),p("span",null,_(m(e)("docs.examples.title")),1)]),p("p",Oz,_(m(e)("docs.examples.description")),1),p("div",Fz,[p("h3",$z,_(m(e)("docs.examples.basic.title")),1),p("p",zz,_(m(e)("docs.examples.basic.description")),1),ke(mt,{code:s8,language:"javascript"})]),p("div",Bz,[p("h3",Vz,_(m(e)("docs.examples.csv.title")),1),p("p",Uz,_(m(e)("docs.examples.csv.description")),1),ke(mt,{code:o8,language:"javascript"})]),p("div",jz,[p("h3",Hz,_(m(e)("docs.examples.complete.title")),1),p("p",Wz,_(m(e)("docs.examples.complete.description")),1),ke(mt,{code:a8,language:"javascript"})])]),r[60]||(r[60]=p("div",{class:"docs-footer"},[p("p",{class:"text-secondary"},[Re("  For more details, check out the "),p("a",{href:"https://github.com/guinetik/graph-js",class:"docs-footer-link",target:"_blank"}," GitHub repository ")])],-1))]))}},c8=[{path:"/",name:"home",component:fk},{path:"/showcase",name:"showcase",component:UP},{path:"/explorer",name:"explorer",component:CO},{path:"/family",name:"family",component:bF},{path:"/docs",name:"docs",component:l8}],lv=Vb({history:bb(),routes:c8});lv.afterEach(t=>{const{trackPageView:e}=Ta(),n=DD[t.name]||t.name||"Unknown";e(t.fullPath,n)});const d8=Ze({prefix:"App",level:"info"});GD();const cv=P_(Tw);cv.use(lv);cv.mount("#app");d8.info("Vue app started");export{g8 as B,S8 as D,m8 as F,_8 as J,b8 as K,y8 as M,C8 as Q,k8 as U,E8 as V,w8 as Y,A8 as _,x8 as q,v8 as z};
